"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[207],{38535:(O,m,a)=>{a.d(m,{b:()=>o});var e=a(66111),t=a(91017),h=a(32434);class o{constructor(d){this._subject=new t.x,this._state=d}useState(){return r(this)}get state(){return this._state}setState(d){this._state={...this._state,...d},this._subject.next(this._state)}subscribeToState(d){return this._subject.subscribe(d)}}function r(y){const d=(0,h.N)();return(0,e.useEffect)(()=>{const w=y.subscribeToState({next:d});return()=>w.unsubscribe()},[y,d]),y.state}},13190:(O,m,a)=>{a.r(m),a.d(m,{SceneListPage:()=>w,default:()=>b});var e=a(66111),t=a(59679),h=a(26418),o=a(72948),r=a(8412),y=a(82e3),d=a(31185);const w=({})=>{const v=(0,d.F)(),E=(0,t.Z)(()=>(0,y.getGrafanaSearcher)().starred({starred:!0}),[]);return e.createElement(r.T,{navId:"scenes",subTitle:"Experimental new runtime and state model for dashboards"},e.createElement(r.T.Contents,null,e.createElement(h.Stack,{direction:"column",gap:1},e.createElement("h5",null,"Apps"),e.createElement(h.Stack,{direction:"column",gap:0},e.createElement(o.Z,{href:"/scenes/grafana-monitoring"},e.createElement(o.Z.Heading,null,"Grafana monitoring"))),e.createElement("h5",null,"Test scenes"),e.createElement(h.Stack,{direction:"column",gap:0},v.map(S=>e.createElement(o.Z,{key:S.title,href:`/scenes/${S.title}`},e.createElement(o.Z.Heading,null,S.title)))),E.value&&e.createElement(e.Fragment,null,e.createElement("h5",null,"Starred dashboards"),e.createElement(h.Stack,{direction:"column",gap:0},E.value.view.map(S=>e.createElement(o.Z,{href:`/scenes/dashboard/${S.uid}`,key:S.uid},e.createElement(o.Z.Heading,null,S.name))))))))},b=w},23192:(O,m,a)=>{a.r(m),a.d(m,{ScenePage:()=>o,default:()=>r});var e=a(66111),t=a(57369),h=a(31185);const o=y=>{const d=(0,h.H)(y.match.params.name),[w,b]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{d&&!w&&((0,t.oo)().initSync(d),b(!0))},[w,d]),d?w?e.createElement(d.Component,{model:d}):null:e.createElement("h2",null,"Scene not found")},r=o},38282:(O,m,a)=>{a.r(m),a.d(m,{GrafanaMonitoringApp:()=>V,default:()=>q,getHandlerDrilldownPage:()=>F,getMainPageScene:()=>K,getSecondLevelDrilldown:()=>H});var e=a(66111),t=a(57369),h=a(83233),o=a(52889),r=a(30471),y=a(53768),d=a(37932),w=a(2594);class b extends t.wx{constructor(){super(...arguments),this.onChange=l=>{this.setState({value:l}),this.state.onChange(l)}}}b.Component=({model:i})=>{const{options:l,value:f}=i.useState();return e.createElement(w.S,{options:l,value:f,onChange:i.onChange})};var v=a(46967);class E extends t.wx{constructor(){super(...arguments),this.onChange=l=>{this.setState({value:l.currentTarget.value})}}}E.Component=({model:i})=>{const{value:l}=i.useState();return e.createElement(v.I,{width:25,placeholder:"Search...",value:l,onChange:i.onChange})};var S=a(9471),$=a(90748),I=a(13512),_=a(91603);function A(i){const l={id:$.mE.regex,options:{value:i}};return{id:I.W.filterByValue,options:{type:_.PQ.include,match:_.ER.all,filters:[{fieldName:"handler",config:l}]}}}function p(i){return()=>l=>l.pipe((0,S.U)(f=>f.filter(C=>(0,r.nf)(C).toLowerCase().includes(i.toLowerCase()))))}var P=a(49187);function x(){const i=useLocation();return locationSearchToObject(i.search||"")}function U(i,l){return P.Cj.renderUrl(i,l)}function W(){const i=new E({value:""}),l=n({expr:"sort_desc(avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval]) * 1e3)) "}),f=new t.bM({$data:l,transformations:[A("")]});f.addActivationHandler(()=>{const R=i.subscribeToState(L=>{f.setState({transformations:[A(L.value)]}),f.reprocessTransformations()});return()=>R.unsubscribe()});const C=new t.Z({$data:f,pluginId:"table",title:"",options:{footer:{enablePagination:!0}},fieldConfig:{defaults:{},overrides:[{matcher:{id:"byRegexp",options:".*"},properties:[{id:"filterable",value:!1}]},{matcher:{id:"byName",options:"Time"},properties:[{id:"custom.hidden",value:!0}]},{matcher:{id:"byName",options:"Value"},properties:[{id:"displayName",value:"Duration (Avg)"}]},{matcher:{id:"byName",options:"handler"},properties:[{id:"links",value:[{title:"Go to handler drilldown view",onBuildUrl:()=>{const R=d.E1.getSearchObject();return U("/scenes/grafana-monitoring/handlers/${__value.text:percentencode}",R)}}]}]}]}}),T=new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:"topk(20, avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval])) * 1e3)",range:!0,format:"time_series",legendFormat:"{{method}} {{handler}} (status = {{status_code}})",maxDataPoints:500}]}),B=new t.bM({$data:T,transformations:[p("")]});B.addActivationHandler(()=>{const R=i.subscribeToState(L=>{B.setState({transformations:[p(L.value)]}),B.reprocessTransformations()});return()=>R.unsubscribe()});const G=new t.$M({$data:B,body:new t.QY({direction:"column",children:[]}),getLayoutChild:(R,L,j)=>new t.fy({key:`panel-${j}`,minHeight:200,$data:new t.Yt({data:{...R,series:[L]}}),body:new t.QY({direction:"row",children:[new t.fy({body:new t.Z({pluginId:"timeseries",title:(0,r.nf)(L),options:{legend:{displayMode:"hidden"}}})}),new t.fy({width:200,body:new t.Z({title:"Last",pluginId:"stat",fieldConfig:{defaults:{displayName:"Last",links:[{title:"Go to handler drilldown view",url:"",onBuildUrl:()=>{const Q=d.E1.getSearchObject();return U("/scenes/grafana-monitoring/handlers/${__field.labels.handler:percentencode}",Q)}}]},overrides:[]},options:{graphMode:"none",textMode:"value"}})})]})})}),Z=new t.QY({children:[new t.fy({body:C})]}),Y=new b({options:[{value:"table",label:"Table"},{value:"graphs",label:"Graphs"}],value:"table",onChange:R=>{R==="table"?Z.setState({children:[new t.fy({body:C})]}):Z.setState({children:[G]})}});return new t.U4({$variables:g(),$data:l,$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),i,new t.o$,Y,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:Z})}function D(i){const l=s({expr:`avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum{handler="${i}"}[$__rate_interval])) * 1e3`,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"}),f=s({expr:`sum without(job, instance) (rate(grafana_http_request_duration_seconds_count{handler="${i}"}[$__rate_interval])) `,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"});return new t.U4({$variables:g(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:new t.Z({$data:l,pluginId:"timeseries",title:"Request duration avg (ms)",options:{}})}),new t.fy({body:new t.Z({$data:f,pluginId:"timeseries",title:"Request count/s",options:{}})})]})})}function n(i){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",instant:!0,format:"table",maxDataPoints:500,...i}]})}function s(i){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",range:!0,format:"time_series",maxDataPoints:500,...i}]})}function u(){return new t.U4({$variables:g(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({height:150,body:new t.QY({children:[new t.fy({body:c("grafana_stat_totals_dashboard","Dashboards")}),new t.fy({body:c("grafana_stat_total_users","Users")}),new t.fy({body:c("sum(grafana_stat_totals_datasource)","Data sources")}),new t.fy({body:c("grafana_stat_total_service_account_tokens","Service account tokens")})]})}),new t.fy({body:new t.Z({$data:new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(process_resident_memory_bytes{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]}),pluginId:"timeseries",title:"Memory usage",options:{legend:{showLegend:!1}},fieldConfig:{defaults:{unit:"bytes",min:0,custom:{lineWidth:2,fillOpacity:6}},overrides:[]}})}),new t.fy({body:new t.Z({$data:new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(go_goroutines{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]}),pluginId:"timeseries",title:"Go routines",options:{legend:{showLegend:!1}},fieldConfig:{defaults:{min:0,custom:{lineWidth:2,fillOpacity:6}},overrides:[]}})})]})})}function g(){return new t.hT({variables:[new t.$1({name:"instance",datasource:{uid:"gdev-prometheus"},query:{query:"label_values(grafana_http_request_duration_seconds_sum, instance)"}})]})}function c(i,l){return new t.Z({$data:n({expr:i}),pluginId:"stat",title:l,options:{},fieldConfig:{defaults:{color:{fixedColor:"text",mode:y.S.Fixed}},overrides:[]}})}function M(i){const l=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:`{job="grafana"} | logfmt | handler=\`${i}\` | __error__=\`\``,queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:g(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:new t.Z({pluginId:"text",title:"",options:{mode:"markdown",content:`
  [mupp](/scenes/grafana-monitoring/handlers/${encodeURIComponent(i)}/logs/mupp)
  [mapp](/scenes/grafana-monitoring/handlers/${encodeURIComponent(i)}/logs/mapp)
  `}})}),new t.fy({body:new t.Z({$data:l,pluginId:"logs",title:"",options:{showTime:!0,showLabels:!1,showCommonLabels:!1,wrapLogMessage:!0,prettifyLogMessage:!1,enableLogDetails:!0,dedupStrategy:"none",sortOrder:"Descending"}})})]})})}function z(){const i=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:'{job="grafana"} | logfmt | __error__=``',queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:g(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:new t.Z({$data:i,pluginId:"logs",title:"",options:{showTime:!0,showLabels:!1,showCommonLabels:!1,wrapLogMessage:!0,prettifyLogMessage:!1,enableLogDetails:!0,dedupStrategy:"none",sortOrder:"Descending"}})})]})})}function V(){const i=(0,e.useMemo)(()=>new t.mt({pages:[K()]}),[]),l=(0,h.P)("scenes"),[f]=(0,e.useState)({sectionNav:l});return e.createElement(o.v.Provider,{value:f},e.createElement(i.Component,{model:i}))}function K(){return new t.yH({title:"Grafana Monitoring",subTitle:"A custom app with embedded scenes to monitor your Grafana server",url:"/scenes/grafana-monitoring",hideFromBreadcrumbs:!1,getScene:u,tabs:[new t.yH({title:"Overview",url:"/scenes/grafana-monitoring",getScene:u,preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"HTTP handlers",url:"/scenes/grafana-monitoring/handlers",getScene:W,preserveUrlKeys:["from","to","var-instance"],drilldowns:[{routePath:"/scenes/grafana-monitoring/handlers/:handler",getPage:F}]}),new t.yH({title:"Logs",url:"/scenes/grafana-monitoring/logs",getScene:z,preserveUrlKeys:["from","to","var-instance"]})]})}function F(i,l){const f=decodeURIComponent(i.params.handler),C=`/scenes/grafana-monitoring/handlers/${encodeURIComponent(f)}`;return new t.yH({title:f,subTitle:"A grafana http handler is responsible for service a specific API request",url:C,getParentPage:()=>l,getScene:()=>D(f),tabs:[new t.yH({title:"Metrics",url:C,routePath:"/scenes/grafana-monitoring/handlers/:handler",getScene:()=>D(f),preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"Logs",url:C+"/logs",routePath:"/scenes/grafana-monitoring/handlers/:handler/logs",getScene:()=>M(f),preserveUrlKeys:["from","to","var-instance"],drilldowns:[{routePath:"/scenes/grafana-monitoring/handlers/:handler/logs/:secondLevel",getPage:H}]})]})}function H(i,l){const f=decodeURIComponent(i.params.handler),C=decodeURIComponent(i.params.secondLevel),T=`/scenes/grafana-monitoring/handlers/${encodeURIComponent(f)}/logs/${C}`;return new t.yH({title:C,subTitle:"Second level dynamic drilldown",url:T,getParentPage:()=>l,getScene:()=>new t.U4({body:new t.QY({children:[new t.fy({body:new t.S$({text:"Drilldown: "+C})})]})})})}const q=V},56440:(O,m,a)=>{a.d(m,{W:()=>v});var e=a(9892),t=a(66111),h=a(77346),o=a(37932),r=a(57369),y=a(72648),d=a(64319),w=a(95379),b=a(8412);class v extends r.wx{}v.Component=E;function E({model:$}){const{title:I,body:_,actions:A=[],uid:p,controls:P}=$.useState(),x=(0,y.wW)(S),U=(A??[]).map(D=>t.createElement(D.Component,{key:D.state.key,model:D}));p?.length&&U.push(t.createElement(d.h,{icon:"apps",onClick:()=>o.E1.push(`/d/${p}`),tooltip:"View as Dashboard",key:"scene-to-dashboard-switch"}));const W=t.createElement(w.A,{actions:U});return t.createElement(b.T,{navId:"scenes",pageNav:{text:I},layout:h.Q.Canvas,toolbar:W},P&&t.createElement("div",{className:x.controls},P.map(D=>t.createElement(D.Component,{key:D.state.key,model:D}))),t.createElement("div",{className:x.body},t.createElement(_.Component,{model:_})))}function S($){return{body:(0,e.css)({flexGrow:1,display:"flex",gap:"8px"}),controls:(0,e.css)({display:"flex",paddingBottom:$.spacing(2),flexWrap:"wrap",alignItems:"center",gap:$.spacing(1)})}}},44336:(O,m,a)=>{a.r(m),a.d(m,{DashboardScenePage:()=>y,default:()=>d});var e=a(66111),t=a(77346),h=a(8412),o=a(2555),r=a(52686);const y=({match:w})=>{const b=(0,r.bC)(),{dashboard:v,isLoading:E}=b.useState();return(0,e.useEffect)(()=>(b.load(w.params.uid),()=>{b.clearState()}),[b,w.params.uid]),v?e.createElement(v.Component,{model:v}):e.createElement(h.T,{layout:t.Q.Canvas},E&&e.createElement(o.Z,null),!E&&e.createElement("h2",null,"Dashboard not found"))},d=y},52686:(O,m,a)=>{a.d(m,{Yz:()=>$,bC:()=>P});var e=a(57369),t=a(38535),h=a(87449),o=a(86899),r=a(21471),y=a(56440);function d(n){return`panel-${n}`}function w(n){const s=[];return n.forEachChild(u=>{s.push(w(u))}),s.push(n.activate()),()=>{for(const u of s)u()}}class b extends e.wx{constructor(s){super(s),this.addActivationHandler(()=>(this._subscribeToSource(),()=>{this._querySub&&this._querySub.unsubscribe(),this._sourceDataDeactivationHandler&&this._sourceDataDeactivationHandler()}))}_subscribeToSource(){const{query:s}=this.state;if(this._querySub&&this._querySub.unsubscribe(),!s.panelId)return;const u=d(s.panelId),g=v(this.getRoot(),M=>M.state.key===u);if(!g){console.log("Shared dashboard query refers to a panel that does not exist in the scene");return}let c=g.state.$data;if(!c){console.log("No source data found for shared dashboard query");return}if(this._sourceDataDeactivationHandler=c.activate(),c instanceof e.bM&&!s.withTransforms){if(!c.state.$data)throw new Error("No source inner query runner found in data transformer");c=c.state.$data}this._querySub=c.subscribeToState(M=>this.setState({data:M.data})),this.setState({data:c.state.data})}}function v(n,s){if(s(n))return n;let u=null;return n.forEachChild(g=>{let c=v(g,s);c&&(u=c)}),u}class E extends t.b{constructor(){super(...arguments),this.cache={}}async load(s){const u=this.cache[s];if(u){this.setState({dashboard:u});return}this.setState({isLoading:!0});try{const g=await h.pD.loadDashboard("db","",s);if(g.dashboard)this.initDashboard(g);else throw new Error("Dashboard not found")}catch(g){this.setState({isLoading:!1,loadError:String(g)})}}initDashboard(s){const u=new o.f(s.dashboard,s.meta,{autoMigrateOldPanels:!0}),g=$(u);(0,e.oo)().initSync(g),this.cache[s.dashboard.uid]=g,this.setState({dashboard:g,isLoading:!1})}clearState(){this.setState({dashboard:void 0,loadError:void 0,isLoading:!1})}}function S(n){const s=[];let u=null,g=[];for(const c of n)if(c.type==="row")u?u.id!==c.id&&(s.push(new e.I_({title:u.title,y:u.gridPos.y,children:g})),u=c,g=[]):Boolean(c.collapsed)?s.push(new e.I_({title:c.title,isCollapsed:!0,y:c.gridPos.y,children:c.panels?c.panels.map(_):[]})):u=c;else{const M=_(c);u?g.push(M):s.push(M)}return u&&s.push(new e.I_({title:u.title,y:u.gridPos.y,children:g})),s}function $(n){let s;if(n.templating?.list?.length){const u=n.templating.list.map(g=>{try{return I(g)}catch(c){return console.error(c),null}}).filter(g=>Boolean(g));s=new e.hT({variables:u})}return new y.W({title:n.title,uid:n.uid,body:new e.Qh({children:S(n.panels)}),$timeRange:new e.gg(n.time),actions:[new e.n7({}),new e.vf({refresh:n.refresh,intervals:n.timepicker.refresh_intervals})],$variables:s,...s&&{controls:[new e.dn({})]}})}function I(n){const s={name:n.name,label:n.label};if(x(n))return new e.eO({...s,value:n.current.value,text:n.current.text,description:n.description,query:n.query,isMulti:n.multi,allValue:n.allValue||void 0,includeAll:n.includeAll,defaultToAll:Boolean(n.includeAll),skipUrlSync:n.skipUrlSync,hide:n.hide});if(U(n))return new e.$1({...s,value:n.current.value,text:n.current.text,description:n.description,query:n.query,datasource:n.datasource,sort:n.sort,refresh:n.refresh,regex:n.regex,allValue:n.allValue||void 0,includeAll:n.includeAll,defaultToAll:Boolean(n.includeAll),isMulti:n.multi,skipUrlSync:n.skipUrlSync,hide:n.hide});if(W(n))return new e.l3({...s,value:n.current.value,text:n.current.text,description:n.description,regex:n.regex,pluginId:n.query,allValue:n.allValue||void 0,includeAll:n.includeAll,defaultToAll:Boolean(n.includeAll),skipUrlSync:n.skipUrlSync,isMulti:n.multi,hide:n.hide});if(D(n))return new e.M6({...s,description:n.description,value:n.query,skipUrlSync:n.skipUrlSync,hide:n.hide});throw new Error(`Scenes: Unsupported variable type ${n.type}`)}function _(n){return new e.bO({x:n.gridPos.x,y:n.gridPos.y,width:n.gridPos.w,height:n.gridPos.h,isDraggable:!0,isResizable:!0,body:new e.Z({key:d(n.id),title:n.title,pluginId:n.type,options:n.options??{},fieldConfig:n.fieldConfig,pluginVersion:n.pluginVersion,displayMode:n.transparent?"transparent":void 0,hoverHeader:!n.title&&!n.timeFrom&&!n.timeShift,$data:A(n)})})}function A(n){if(!n.targets?.length)return;let s;return n.datasource?.uid===r.o?s=new b({query:n.targets[0]}):s=new e.uq({queries:n.targets,maxDataPoints:n.maxDataPoints??void 0}),n.transformations?.length&&(s=new e.bM({$data:s,transformations:n.transformations})),s}let p=null;function P(){return p||(p=new E({})),p}const x=n=>n.type==="custom",U=n=>n.type==="query",W=n=>n.type==="datasource",D=n=>n.type==="constant"},31185:(O,m,a)=>{a.d(m,{H:()=>A,F:()=>I});var e=a(57369),t=a(20195),h=a(56440);function o(p,P){return new e.uq({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",...p}],...P})}function r(){const p=new e.gg,P=new e.gg({from:"now-1y",to:"now"});return new h.W({title:"Grid with rows and different queries and time ranges",body:new e.Qh({children:[new e.I_({$timeRange:P,$data:o({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query, last year time range",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1"})}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2"})})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:new e.Z({$data:o(),pluginId:"timeseries",title:"Outsider, has its own query",key:"Outsider-own-query"})})]}),$timeRange:p,$data:o(),actions:[new e.n7({}),new e.vf({})]})}function y(){return new h.W({title:"Multiple grid layouts test",body:new e.QY({children:[new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:new e.Z({pluginId:"timeseries",title:"Dragabble and resizable"})}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Draggable only"})}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})})]})}),new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:new e.Z({pluginId:"timeseries",title:"Dragabble and resizable"})}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Draggable only"})}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})})]})})]}),$timeRange:new e.gg,$data:o(),actions:[new e.n7({}),new e.vf({})]})}function d(){return new h.W({title:"Grid with rows and different queries",body:new e.Qh({children:[new e.I_({$timeRange:new e.gg,$data:o({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1"})}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2"})})]}),new e.I_({title:"Row B - uses global query",key:"Row B",isCollapsed:!0,y:1,children:[new e.bO({x:0,y:2,width:12,height:5,isResizable:!1,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row B Child1",key:"Row B Child1"})}),new e.bO({x:0,y:7,width:6,height:5,isResizable:!1,isDraggable:!0,body:new e.Z({$data:o({seriesCount:10}),pluginId:"timeseries",title:"Row B Child2 with data",key:"Row B Child2"})})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:new e.Z({$data:o({seriesCount:10}),pluginId:"timeseries",title:"Outsider, has its own query",key:"Outsider-own-query"})}),new e.bO({x:6,y:12,width:12,height:10,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Outsider, uses global query",key:"Outsider-global-query"})})]}),$timeRange:new e.gg,$data:o(),actions:[new e.n7({}),new e.vf({})]})}var w=a(69273);function b(){return new h.W({title:"Query variable",$variables:new e.hT({variables:[new e.eO({name:"metric",query:"job : job, instance : instance"}),new e.l3({name:"datasource",pluginId:"prometheus"}),new e.$1({name:"instance (using datasource variable)",refresh:w.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})"},datasource:{uid:"${datasource}"}}),new e.$1({name:"label values (on time range refresh)",refresh:w.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})"},datasource:{uid:"gdev-prometheus",type:"prometheus"}}),new e.$1({name:"legacy (graphite)",refresh:w.Bd.onTimeRangeChanged,query:{queryType:"Default",target:"stats.response.*"},datasource:{uid:"gdev-graphite",type:"graphite"}})]}),body:new e.QY({direction:"row",children:[new e.fy({width:"40%",body:new e.S$({text:"metric: ${metric}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function v(){return new h.W({title:"Scene with rows",body:new e.QY({direction:"column",children:[new e.Gb({title:"Overview",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})}),new e.Gb({title:"More server details",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})})]}),$timeRange:new e.gg,$data:o(),actions:[new e.n7({}),new e.vf({})]})}function E(){return new h.W({title:"Transformations demo",body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"Source data (global query"})}),new e.fy({body:new e.Z({pluginId:"stat",title:"Transformed data",$data:new e.bM({transformations:[{id:"reduce",options:{reducers:["last","mean"]}}]})})})]})}),new e.fy({body:new e.Z({$data:new e.bM({$data:o(),transformations:[{id:"reduce",options:{reducers:["mean"]}}]}),pluginId:"stat",title:"Query with predefined transformations"})})]})})]}),$timeRange:new e.gg,$data:o(),actions:[new e.n7({}),new e.vf({})]})}function S(){return new h.W({title:"Variables",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"server",text:"",delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:"pod",delayMs:1e3,isMulti:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:"handler",delayMs:1e3,text:"",options:[]}),new e.eO({name:"custom",query:"A : 10,B : 20"}),new e.l3({name:"ds",pluginId:"testdata"}),new e.Dm({name:"textbox",value:"default value"})]}),body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"handler: $handler",$data:o({alias:"handler: $handler"})})}),new e.fy({body:new e.S$({text:"Text: ${textbox}",fontSize:20,align:"center"})}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]})}),new e.fy({body:new e.Gb({title:"Collapsable inner scene",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"handler: $handler",$data:o({alias:"handler: $handler"})})})]})})})]})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function $(){return new h.W({title:"Variables with All values",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"AA",text:"AA",includeAll:!0,defaultToAll:!0,delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:[],delayMs:1e3,isMulti:!0,includeAll:!0,defaultToAll:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:[],delayMs:1e3,includeAll:!0,defaultToAll:!1,isMulti:!0,text:"",options:[]})]}),body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"handler: $handler",$data:o({alias:"handler: $handler"})})}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function I(){return[{title:"Scene with rows",getScene:v},{title:"Grid with rows and different queries",getScene:d},{title:"Grid with rows and different queries and time ranges",getScene:r},{title:"Multiple grid layouts test",getScene:y},{title:"Variables",getScene:S},{title:"Variables with All values",getScene:$},{title:"Query variable",getScene:b},{title:"Transformations demo",getScene:E}]}const _={};function A(p){if(_[p])return _[p];const P=I().find(x=>x.title===p);return P&&(_[p]=P.getScene()),_[p]}},20195:(O,m,a)=>{a.d(m,{UV:()=>t});const e=Object.freeze([0,0]);var t=(r=>(r.Annotations="annotations",r.Arrow="arrow",r.CSVContent="csv_content",r.CSVFile="csv_file",r.CSVMetricValues="csv_metric_values",r.DataPointsOutsideRange="datapoints_outside_range",r.ExponentialHeatmapBucketData="exponential_heatmap_bucket_data",r.FlameGraph="flame_graph",r.GrafanaAPI="grafana_api",r.LinearHeatmapBucketData="linear_heatmap_bucket_data",r.Live="live",r.Logs="logs",r.ManualEntry="manual_entry",r.NoDataPoints="no_data_points",r.NodeGraph="node_graph",r.PredictableCSVWave="predictable_csv_wave",r.PredictablePulse="predictable_pulse",r.RandomWalk="random_walk",r.RandomWalkTable="random_walk_table",r.RandomWalkWithError="random_walk_with_error",r.RawFrame="raw_frame",r.ServerError500="server_error_500",r.Simulation="simulation",r.SlowQuery="slow_query",r.StreamingClient="streaming_client",r.TableStatic="table_static",r.Trace="trace",r.USA="usa",r.VariablesQuery="variables-query",r))(t||{});const h={fields:[],states:[]},o={csvWave:[],points:[],scenarioId:"random_walk"}}}]);

//# sourceMappingURL=scenes.6310de1a3eeda109f0f3.js.map