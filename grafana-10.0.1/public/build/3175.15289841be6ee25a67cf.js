(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3175],{47956:(Y,O,e)=>{"use strict";e.d(O,{n:()=>o});var t=e(66111),n=e(32976);function o(s){const{children:l,instanceSettings:f}=s,d=(0,t.useMemo)(()=>({instanceSettings:f,meta:f.meta}),[f]);return t.createElement(n._.Provider,{value:d},l)}},32976:(Y,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(66111);const n=(0,t.createContext)(void 0)},75363:(Y,O,e)=>{"use strict";e.d(O,{b:()=>o});var t=e(66111),n=e(32976);function o(s){const{children:l,...f}=s;return t.createElement(n._.Provider,{value:f},l)}},58556:(Y,O,e)=>{"use strict";e.d(O,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},81129:(Y,O,e)=>{"use strict";e.d(O,{g:()=>o});var t=e(66111),n=e(32976);function o(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},86029:(Y,O,e)=>{"use strict";e.d(O,{P:()=>s,i:()=>o});var t=e(99098),n=e(83881);class o{constructor(d,r){return this.fields=[],this.length=0,s(d,r)}}function s(f,d){const r={fields:[],length:f.length};if(!f?.length)return r;if(d){for(const a of d)r.fields.push(l(a,f.map(u=>u[a])));return r}const c=f.find(a=>a!=null);return c!=null&&(typeof c=="object"?r.fields=Object.keys(c).map(a=>l(a,f.map(u=>u[a]))):r.fields.push(l(t.M5,f))),r}function l(f,d){const r={name:f,config:{},values:d,type:t.fS.other};return r.type=(0,n.fu)(r)??t.fS.other,r}},18298:(Y,O,e)=>{"use strict";e.d(O,{a:()=>o});var t=e(74911),n=e(53678);class o extends n.v{constructor(l){super(void 0,f=>new t.d({...l,buffer:f}))}}},59957:(Y,O,e)=>{"use strict";e.d(O,{Ib:()=>l,Jy:()=>s,Y:()=>r,vP:()=>d});var t=e(99098),n=e(83881);const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(c,a){for(const u in c){const i=o[u];for(const p of c[u])p<a.length&&(a[p]=i)}}function l(c,a){for(let u=0;u<a.length;u++)a[u]=c[a[u]]}function f(c,a){for(const u of a)if(u!=null)return(0,n._m)(c,u);return t.fS.other}function d(c){const{schema:a,data:u}=c;if(!a||!a.fields)throw new Error("JSON needs a fields definition");const i=u?u.values.reduce((g,y)=>Math.max(g,y.length),0):0,p=a.fields.map((g,y)=>{let E=u?u.values[y]:[],h=E.length,v=g.type;h!==i&&(E.length=i,E.fill(void 0,h));let C=u?.entities?.[y];C&&s(C,E);let m=u?.enums?.[y];m&&(l(m,E),v=t.fS.string);const D=u?.nanos?.[y],P={...g,type:v??f(g.name,E),config:g.config??{},values:E,entities:C??{}};return D!=null&&(P.nanos=D),P});return{...a,fields:p,length:i}}function r(c){const a={values:[]},u=[];let i=!1;const p={refId:c.refId,meta:c.meta,name:c.name,fields:c.fields.map(g=>{const{values:y,nanos:E,state:h,display:v,...C}=g;return delete C.entities,a.values.push(y),E!=null?(u.push(E),i=!0):u.push(null),C})};return i&&(a.nanos=u),{schema:p,data:a}}},12115:(Y,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(21570);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const l={},f={};for(let d=0;d<s.fields.length;d++){const r=s.fields[d];if(!r.name)continue;f[r.name]=r;const c=()=>r.values.get(this.index);l.hasOwnProperty(r.name)||Object.defineProperty(l,r.name,{enumerable:!0,get:c}),l.hasOwnProperty(d.toString())||Object.defineProperty(l,d,{enumerable:!1,get:c})}this.obj=l,this.fields=f}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const l=this.dataFrame.fields[s];if(!(!l||!l.display))return l.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,l)=>({...this.get(l)}))}}},5109:(Y,O,e)=>{"use strict";e.d(O,{N:()=>o});var t=e(99098),n=e(83881);class o{constructor(l){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=l.fields.map((f,d)=>({...f,index:d}));for(let f=0;f<l.fields.length;f++){const d=l.fields[f];if(d.type===t.fS.other){const r=(0,n.fu)(d);r&&(d.type=r)}this.fieldByType[d.type]||(this.fieldByType[d.type]=[]),this.fieldByType[d.type].push({...d,index:f}),this.fieldByName[d.name]?console.warn("Duplicate field names in DataFrame: ",d.name):this.fieldByName[d.name]={...d,index:f}}}getFields(l){if(!l)return[...this.fields];const f=this.fieldByType[l];return f?[...f]:[]}hasFieldOfType(l){const f=this.fieldByType[l];return f&&f.length>0}getFirstFieldOfType(l,f=!1){return this.fieldByType[l].find(c=>f||!c.config.custom?.hidden)}hasFieldNamed(l){return!!this.fieldByName[l]}hasFieldWithNameAndType(l,f){return!!this.fieldByName[l]&&this.fieldByType[f].filter(d=>d.name===l).length>0}getFieldByName(l){return this.fieldByName[l]}getFieldsByLabel(l,f){return Object.values(this.fieldByName).filter(d=>d.labels&&d.labels[l]===f)}}},53678:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>f,v:()=>d});var t=e(82897),n=e(99098),o=e(83881);function s(r,c){return c.type||(c.name==="time"||c.name==="Time"?c.type=n.fS.time:c.type=(0,o.LI)(r)),c.type===n.fS.number?a=>parseFloat(a):c.type===n.fS.boolean?a=>!(a[0]==="F"||a[0]==="f"||a[0]==="0"):a=>a}var l=e(21570);const f=void 0;class d extends l.G{constructor(c,a){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=a||(u=>u??[]),c){const{name:u,refId:i,meta:p,fields:g}=c;if(u&&(this.name=u),i&&(this.refId=i),p&&(this.meta=p),g)for(const y of g)this.addField(y)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(c,a){return this.addField({name:a||"",type:(0,o.LI)(c)})}addField(c,a){let u;c.values&&(u=c.values);let i=c.type;!i&&(c.name==="time"||c.name==="Time")?i=n.fS.time:(!i&&u&&u.length&&(i=(0,o.LI)(u[0])),i||(i=n.fS.other));let p=c.name;p||(p=`Field ${this.fields.length+1}`);const g={...c,name:p,type:i,config:c.config||{},values:this.creator(u)};if(i===n.fS.other&&(i=(0,o.fu)(g),i&&(g.type=i)),this.fields.push(g),this.first=this.fields[0].values,a)for(;g.values.length<a;)g.values.push(f);else this.validate();return g}validate(){const c=this.fields.reduce((a,u)=>Math.max(a,u.values.length),0);for(const a of this.fields)for(;a.values.length!==c;)a.values.push(f)}setParser(c,a){return this.parsers||(this.parsers=new Map),this.parsers.set(c,a),a}parseValue(c,a){let u=this.parsers?.get(c);return u||(u=this.setParser(c,s(a,c))),u(a)}appendRow(c){for(let a=this.fields.length;a<c.length;a++)this.addField({name:`Field ${a+1}`,type:(0,o.LI)(c[a])});if(this.length<1)for(let a=0;a<this.fields.length;a++){const u=this.fields[a];(!u.type||u.type===n.fS.other)&&(u.type=(0,o.LI)(c[a]))}for(let a=0;a<this.fields.length;a++){const u=this.fields[a];let i=c[a];u.type!==n.fS.string&&(0,t.isString)(i)&&(i=this.parseValue(u,i)),u.values.push(i)}}push(...c){for(const a of c)this.add(a);return this.length}reverse(){for(const c of this.fields)c.values.reverse();return this}add(c){const a=c;for(const u of this.fields){let i=a[u.name];u.type!==n.fS.string&&(0,t.isString)(i)&&(i=this.parseValue(u,i)),i===void 0&&(i=f),u.values.push(i)}}set(c,a){if(c>this.length)throw new Error("Unable to set value beyond current length");const u=a||{};for(const i of this.fields)i.values[c]=u[i.name]}get(c){const a={};for(const u of this.fields)a[u.name]=u.values[c];return a}toJSON(){return(0,o.og)(this)}}},61113:(Y,O,e)=>{"use strict";e.d(O,{$q:()=>o,GV:()=>n,YP:()=>f,jC:()=>s,q2:()=>t,r7:()=>l});const t=(d,r)=>({name:d,columns:r}),n=d=>d.columns,o=(d,r)=>d.columns[r],s=(d,r,c)=>d.columns[r].values[c],l=(d,r,c)=>d.columns.map(a=>a.values[c]),f=(d,r)=>d[r]},96905:(Y,O,e)=>{"use strict";e.d(O,{Ch:()=>o,Vv:()=>f,nl:()=>s});var t=e(82897),n=e.n(t);function o(d,r,c){if(d===r)return!0;if(d?.fields?.length!==r?.fields?.length||d.name!==r.name)return!1;for(let a=0;a<d.fields.length;a++){const u=d.fields[a],i=r.fields[a];if(u.type!==i.type||u.name!==i.name)return!1;if(c)continue;if(u.labels&&i.labels&&!f(u.labels,i.labels))return!1;const p=u.config,g=i.config;let y=Object.keys(p),E=Object.keys(g);if(y.length!==E.length)return!1;for(const h of y){if(!(h in g))return!1;if(h!=="interval"&&!(0,t.isEqual)(p[h],g[h]))return!1}}return!0}function s(d,r,c){if(d===r)return!0;if(d?.length!==r?.length)return!1;for(let a=0;a<d.length;a++)if(!c(d[a],r[a]))return!1;return!0}const l=(d,r)=>d===r;function f(d,r,c=l){if(d===r)return!0;const a=Object.keys(d),u=Object.keys(r);if(a.length!==u.length)return!1;for(let i of a)if(!c(d[i],r[i]))return!1;return!0}},2033:(Y,O,e)=>{"use strict";e.d(O,{$q:()=>f.$q,Aw:()=>l.Aw,Ch:()=>c.Ch,DP:()=>l.DP,F9:()=>l.F9,GV:()=>f.GV,Ib:()=>r.Ib,Ji:()=>l.Ji,Jy:()=>r.Jy,LI:()=>l.LI,N:()=>n.N,Pc:()=>d.P,SX:()=>l.SX,US:()=>t.U,Vv:()=>c.Vv,Y:()=>r.Y,Y6:()=>l.Y6,YP:()=>f.YP,Yi:()=>s.Y,Zr:()=>l.Zr,_m:()=>l._m,a2:()=>o.a,aK:()=>l.aK,aY:()=>l.aY,fh:()=>l.fh,fu:()=>l.fu,g0:()=>l.g0,iB:()=>d.i,jC:()=>f.jC,m$:()=>a.m$,nl:()=>c.nl,og:()=>l.og,pP:()=>a.pP,q2:()=>f.q2,r7:()=>f.r7,sV:()=>l.sV,vA:()=>s.v,vP:()=>r.vP,xI:()=>a.xI,zR:()=>l.zR});var t=e(12115),n=e(5109),o=e(18298),s=e(53678),l=e(83881),f=e(61113),d=e(86029),r=e(59957),c=e(96905),a=e(19447)},83881:(Y,O,e)=>{"use strict";e.d(O,{Aw:()=>U,DP:()=>h,F9:()=>B,Ji:()=>D,LI:()=>v,SX:()=>m,Y6:()=>A,Zr:()=>M,_m:()=>E,aK:()=>x,aY:()=>P,fh:()=>T,fu:()=>C,g0:()=>b,og:()=>S,sV:()=>R,zR:()=>K});var t=e(82897),n=e.n(t),o=e(67483),s=e(76152),l=e(30471),f=e(99098),d=e(52666),r=e(86029),c=e(59957),a=e(53678);function u(L){const N=L.columns.map(z=>{const{text:G,type:I,...V}=z;return{name:G?.length?G:z,config:V||{},values:[],type:I&&Object.values(f.fS).includes(I)?I:f.fS.other}});if(!(0,t.isArray)(L.rows))throw new Error(`Expected table rows to be array, got ${typeof L.rows}.`);for(const z of L.rows)for(let G=0;G<N.length;G++)N[G].values.push(z[G]);for(const z of N)if(z.type===f.fS.other){const G=C(z);G&&(z.type=G)}return{fields:N,refId:L.refId,meta:L.meta,name:L.name,length:L.rows.length}}function i(L){const N=[],z=[],G=L.datapoints||L.points;for(const V of G)z.push(V[0]),N.push(V[1]);const I=[{name:f.Ls,type:f.fS.time,config:{},values:N},{name:f.M5,type:f.fS.number,config:{unit:L.unit},values:z,labels:L.tags}];return L.title&&(I[1].config.displayNameFromDS=L.title),{name:L.target||L.name,refId:L.refId,meta:L.meta,fields:I,length:z.length}}function p(L){const N=[],z=[];for(let G=0;G<L.data.length;G++){const I=L.data[G];N.push(I[1]),z.push(I[0])}return{name:L.label,fields:[{name:L.label||f.M5,type:f.fS.number,config:{},values:N},{name:f.Ls,type:f.fS.time,config:{unit:"dateTimeAsIso"},values:z}],length:N.length}}function g(L){const N=[{name:L.target,type:f.fS.other,labels:L.tags,config:{unit:L.unit,filterable:L.filterable},values:[]}];for(const z of L.datapoints)N[0].values.push(z);return{name:L.target,refId:L.target,meta:{json:!0},fields:N,length:L.datapoints.length}}const y=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function E(L,N){return L&&(L=L.toLowerCase(),L==="date"||L==="time")?f.fS.time:v(N)}function h(L){return L instanceof Date||(0,o.v9)(L)?f.fS.time:(0,t.isNumber)(L)?f.fS.number:(0,t.isString)(L)?f.fS.string:(0,t.isBoolean)(L)?f.fS.boolean:f.fS.other}function v(L){return L instanceof Date||(0,o.v9)(L)?f.fS.time:(0,t.isNumber)(L)?f.fS.number:(0,t.isString)(L)?y.test(L)?f.fS.number:L==="true"||L==="TRUE"||L==="True"||L==="false"||L==="FALSE"||L==="False"?f.fS.boolean:f.fS.string:(0,t.isBoolean)(L)?f.fS.boolean:f.fS.other}function C(L){if(L.name){const N=L.name.toLowerCase();if(N==="date"||N==="time")return f.fS.time}for(let N=0;N<L.values.length;N++){const z=L.values[N];if(z!=null)return v(z)}}const m=(L,N=!1)=>{for(const z of L.fields)if(!z.type||z.type===f.fS.other||N)return{...L,fields:L.fields.map(G=>G.type&&G.type!==f.fS.other&&!N?G:{...G,type:C(G)||f.fS.other})};return L},D=L=>Boolean(L&&L.hasOwnProperty("columns")),P=L=>Boolean(L&&L.hasOwnProperty("fields"));function b(L){if("fields"in L)return"length"in L&&L.fields[0]?.values?.get?L:new a.v(L);if(L.hasOwnProperty("type")&&L.type==="docs")return g(L);if(L.hasOwnProperty("datapoints")||L.hasOwnProperty("points"))return i(L);if(L.hasOwnProperty("data"))return L.hasOwnProperty("schema")?(0,c.vP)(L):p(L);if(L.hasOwnProperty("columns"))return u(L);if(Array.isArray(L))return(0,r.P)(L);throw console.warn("Can not convert",L),new Error("Unsupported data format")}const M=L=>{const{fields:N}=L,z=L.length,G=[];if(N.length===2){const{timeField:I,timeIndex:V}=R(L);if(I){const Q=N[V===0?1:0],oe=N[V];for(let se=0;se<z;se++)G.push([Q.values[se],oe.values[se]]);return{alias:L.name,target:(0,l.CZ)(Q,L),datapoints:G,unit:N[0].config?N[0].config.unit:void 0,refId:L.refId,meta:L.meta}}}for(let I=0;I<z;I++){const V=[];for(let H=0;H<N.length;H++)V.push(N[H].values[I]);G.push(V)}return L.meta&&L.meta.json?{alias:N[0].name||L.name,target:N[0].name||L.name,datapoints:N[0].values,filterable:N[0].config?N[0].config.filterable:void 0,type:"docs"}:{columns:N.map(I=>{const{name:V,config:H}=I;if(H){const{...Q}=H;return Q.text=V,Q}return{text:V}}),type:"table",refId:L.refId,meta:L.meta,rows:G}};function x(L,N,z=!1){const G=L.fields[N];if(!G)return L;const I=[];for(let H=0;H<L.length;H++)I.push(H);const V=(0,s.Mo)(G,z);return I.sort(V),{...L,fields:L.fields.map(H=>({...H,values:H.values.map((Q,oe)=>H.values[I[oe]])}))}}function A(L){return{...L,fields:L.fields.map(N=>{const z=[...N.values];return z.reverse(),{...N,values:z}})}}function T(L,N){const z=[];for(const G of L.fields)z.push(G.values[N]);return z}function S(L){return U(L)}function U(L,N){return{fields:(N?L.fields.filter(N):L.fields).map(I=>{let V=I.values;return{name:I.name,type:I.type,config:I.config,values:V,labels:I.labels}}),refId:L.refId,meta:L.meta,name:L.name}}const R=L=>{for(let N=0;N<L.fields.length;N++)if(L.fields[N].type===f.fS.time)return{timeField:L.fields[N],timeIndex:N};return{}};function F(L){const N=m(b(L));if(N.fields&&N.fields.length)for(const z of N.fields)z.state=null;return N}function B(L){return!L||!(0,t.isArray)(L)?[]:L.map(N=>F(N))}function K(L,N){const{series:z,annotations:G}=L;if(L.state===d.Gu.Loading&&z.length===0)return N||(N=L),{...N,state:d.Gu.Loading,request:L.request};const I=performance.now(),V=z.map(oe=>F(oe)),H=B(G),Q=performance.now();return{...L,series:V,annotations:H,timings:{dataProcessingTime:Q-I}}}},19447:(Y,O,e)=>{"use strict";e.d(O,{m$:()=>l,pP:()=>o,xI:()=>s});var t=e(99098),n=e(83881);function o(f){return f.fields.length>2?!1:Boolean(f.fields.find(d=>d.type===t.fS.time))}function s(f){return!f.find(d=>!o(d))}function l(f){for(let d=0;d<f.length;d++){const r=(0,n.sV)(f[d]);if(r.timeField!==void 0&&r.timeIndex!==void 0)return!0}return!1}},10753:(Y,O,e)=>{"use strict";e.d(O,{K:()=>o,Z:()=>s});var t=e(75849);let n=()=>t.Ys;const o=l=>{n=l??n},s=l=>l?.timeZone??n()??t.Ys},47406:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{isMathString:()=>l,isValid:()=>d,parse:()=>f,parseDateMath:()=>r,roundToFiscal:()=>c});var t=e(82897),n=e.n(t),o=e(67483);const s=["y","M","w","d","h","m","s","Q"];function l(a){return a?!!(typeof a=="string"&&(a.substring(0,3)==="now"||a.includes("||"))):!1}function f(a,u,i,p){if(a){if(typeof a!="string")return(0,o.v9)(a)?a:(0,t.isDate)(a)?(0,o.CQ)(a):void 0;{let g,y="",E,h;return a.substring(0,3)==="now"?(g=(0,o.GY)(i),y=a.substring(3)):(E=a.indexOf("||"),E===-1?(h=a,y=""):(h=a.substring(0,E),y=a.substring(E+2)),g=(0,o.CQ)(h,o.VJ)),y.length?r(y,g,u,p):g}}}function d(a){const u=f(a);return u&&(0,o.v9)(u)?u.isValid():!1}function r(a,u,i,p=0){const g=a.replace(/\s/g,""),y=u;let E=0;const h=g.length;for(;E<h;){const v=g.charAt(E++);let C,m,D,P=!1;if(v==="/")C=0;else if(v==="+")C=1;else if(v==="-")C=2;else return;if(isNaN(parseInt(g.charAt(E),10)))m=1;else if(g.length===2)m=parseInt(g.charAt(E),10);else{const b=E;for(;!isNaN(parseInt(g.charAt(E),10));)if(E++,E>10)return;m=parseInt(g.substring(b,E),10)}if(C===0&&m!==1)return;if(D=g.charAt(E++),D==="f"&&(D=g.charAt(E++),P=!0),(0,t.includes)(s,D))C===0?i?P?c(p,y,D,i):y.endOf(D):P?c(p,y,D,i):y.startOf(D):C===1?y.add(m,D):C===2&&y.subtract(m,D);else return}return y}function c(a,u,i,p){switch(i){case"y":return p?c(a,u,i,!1).add(11,"M").endOf("M"):u.subtract((u.month()-a+12)%12,"M").startOf("M"),u;case"Q":return p?c(a,u,i,!1).add(2,"M").endOf("M"):u.subtract((u.month()-a+3)%3,"M").startOf("M"),u;default:return}}},76282:(Y,O,e)=>{"use strict";e.d(O,{IA:()=>u,Ks:()=>d,RA:()=>f,iX:()=>r,jO:()=>a,qb:()=>c,vT:()=>l});var t=e(87882),n=e(68813),o=e(17454);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function l(i,p=!0){if((0,t.Z)(i.start,i.end))return"";const g=(0,o.Z)(i);return Object.entries(g).reduce((y,[E,h])=>h&&h!==0&&!(E==="seconds"&&!p&&y)?y+`${y!==""?" ":""}${h}${s[E][0]}`:y,"")}function f(i){return i.split(" ").reduce((p,g)=>{const y=g.match(/(\d+)(.+)/),E=y?.[1],h=y?.[2];if(!(E&&h))return p;const v=Object.entries(s).find(([m,D])=>D?.includes(y[2])),C=parseInt(E,10);return v?{...p,[v[0]]:C}:p},{})}function d(i,p){return(0,n.Z)(i,p)}function r(i){const p=new Date;return d(p,i).getTime()-p.getTime()}function c(i){return!isNaN(Date.parse(i))}function a(i){for(const p of i.trim().split(" ")){const g=p.match(/(\d+)(.+)/);if(g===null||g.length!==3||!Object.entries(s).find(([E,h])=>h?.includes(g[2]))?.[0])return!1}return!0}function u(i){const p=["h","m","s","ms","us","\xB5s","ns"];for(const g of i.trim().split(" ")){const y=g.match(/([0-9]*[.]?[0-9]+)(.+)/);if(y===null||y.length!==3||!p.includes(y[2]))return!1}return!0}},82410:(Y,O,e)=>{"use strict";e.d(O,{Ji:()=>s,U6:()=>l,zf:()=>o});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class o{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(r){this.fullDate=r.fullDate,this.interval=r.interval,r.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(r){return`time:${r?this.fullDateMS:this.fullDate}`}}function s(d,r,c){if(f())return c??t;!r&&navigator&&(r=[...navigator.languages]);const a=new Intl.DateTimeFormat(r||void 0,d),u=a.formatToParts(new Date),p={year:"YYYY",month:"MM",day:"DD",hour:a.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return u.map(g=>p[g.type]||g.value).join("")}const l=new o,f=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},77258:(Y,O,e)=>{"use strict";e.d(O,{E8:()=>d,Fm:()=>r,Hk:()=>c,dq:()=>l,lf:()=>f});var t=e(6835),n=e.n(t),o=e(10753),s=e(82410);const l=(i,p)=>u(i,(0,o.Z)(p)).format(a(p)),f=(i,p)=>u(i,(0,o.Z)(p)).format(),d=(i,p)=>u(i,(0,o.Z)(p)).fromNow(),r=(i,p)=>u(i,(0,o.Z)(p)).format(`${s.U6.fullDate} z`),c=(i,p)=>u(i,(0,o.Z)(p)).format("z"),a=i=>i?.defaultWithMS?i?.format??s.U6.fullDateMS:i?.format??s.U6.fullDate,u=(i,p)=>{const g=i,y=n().tz.zone(p);if(y&&y.name)return n().utc(g).tz(y.name);switch(p){case"utc":return n().utc(g);default:return n().utc(g).local()}}},44540:(Y,O,e)=>{"use strict";e.d(O,{$8:()=>s.$8,CQ:()=>o.CQ,C_:()=>o.C_,D2:()=>o.D2,E8:()=>f.E8,Fm:()=>f.Fm,GY:()=>o.GY,Hk:()=>f.Hk,IA:()=>r.IA,J:()=>d.J,Ji:()=>l.Ji,K7:()=>c.K,Kd:()=>o.Kd,Ks:()=>r.Ks,Ls:()=>o.Ls,Pr:()=>s.Pr,RA:()=>r.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>l.U6,VJ:()=>o.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>c.Z,cT:()=>n,dq:()=>f.dq,iX:()=>r.iX,i_:()=>o.i_,ig:()=>o.ig,jN:()=>o.jN,jO:()=>r.jO,k4:()=>o.k4,lf:()=>f.lf,np:()=>o.Ks,qb:()=>r.qb,v9:()=>o.v9,vT:()=>r.vT,zf:()=>l.zf,zh:()=>o.zh});var t=e(47406),n=e(47891),o=e(67483),s=e(56808),l=e(82410),f=e(77258),d=e(29826),r=e(76282),c=e(10753)},67483:(Y,O,e)=>{"use strict";e.d(O,{CQ:()=>u,C_:()=>i,D2:()=>d,GY:()=>p,Kd:()=>l,Ks:()=>a,Ls:()=>E,VJ:()=>o,i_:()=>s,ig:()=>g,jN:()=>y,k4:()=>f,v9:()=>r,zh:()=>c});var t=e(36365),n=e.n(t);const o=n().ISO_8601,s=h=>{n().locale(h)},l=()=>n().locale(),f=()=>n().localeData(),d=h=>h===null||typeof h=="string"||typeof h=="number"||h instanceof Date||Array.isArray(h)&&h.every(v=>typeof v=="string"||typeof v=="number")||r(h),r=h=>n().isMoment(h),c=(h,v)=>n().utc(h,v),a=(h,v)=>n().duration(h,v),u=(h,v)=>n()(h,v),i=h=>u(h),p=(h,v,C)=>h==="utc"?c(v,C):u(v,C),g=h=>n().weekdays().findIndex(v=>v.toLowerCase()===h.toLowerCase()),y=h=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(v=>v.toLowerCase()===h.toLowerCase()),E=h=>{const v="-weekStart",C=l().replace(v,""),m=h?y(h):-1;m!==-1?n().locale(C+v,{parentLocale:C,week:{dow:m}}):s(C)}},29826:(Y,O,e)=>{"use strict";e.d(O,{J:()=>c});var t=e(82897),n=e.n(t),o=e(6835),s=e.n(o),l=e(10753),f=e(47406),d=e(82410),r=e(67483);const c=(i,p)=>(0,r.v9)(i)?i:typeof i=="string"?a(i,p):u(i,p),a=(i,p)=>{if(i.indexOf("now")!==-1)return(0,f.isValid)(i)&&(0,f.parse)(i,p?.roundUp,p?.timeZone,p?.fiscalYearStartMonth)||s()();const g=(0,l.Z)(p),y=s().tz.zone(g),E=p?.format??d.U6.fullDate;if(y&&y.name)return s().tz(i,E,y.name);switch((0,t.lowerCase)(g)){case"utc":return s().utc(i,E);default:return s()(i,E)}},u=(i,p)=>{const g=i,y=(0,l.Z)(p),E=s().tz.zone(y);if(E&&E.name)return s().tz(g,E.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(g);default:return s()(g)}}},47891:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{calculateInterval:()=>D,convertRawToRange:()=>y,describeInterval:()=>M,describeTextRange:()=>u,describeTimeRange:()=>i,describeTimeRangeAbbreviation:()=>g,intervalToMs:()=>A,intervalToSeconds:()=>x,isFiscal:()=>h,isRelativeTimeRange:()=>v,isValidTimeSpan:()=>p,msRangeToTimeString:()=>m,relativeToTimeRange:()=>U,roundInterval:()=>T,secondsToHms:()=>C,timeRangeToRelative:()=>S});var t=e(82897),n=e.n(t),o=e(47406),s=e(77258),l=e(67483),f=e(29826);const d={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},r=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],c=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],a={};(0,t.each)(r,R=>{a[R.from+" to "+R.to]=R}),(0,t.each)(c,R=>{a[R.from+" to "+R.to]=R});function u(R){const F=R.indexOf("+")!==0;R.indexOf("now")===-1&&(R=(F?"now-":"now")+R);let B=a[R+" to now"];if(B)return B;F?B={from:R,to:"now"}:B={from:"now",to:R};const K=/^now([-+])(\d+)(\w)/.exec(R);if(K){const L=K[3],N=parseInt(K[2],10),z=d[L];z&&(B.display=F?"Last ":"Next ",B.display+=N+" "+z.display,B.section=z.section,N>1&&(B.display+="s"))}else B.display=B.from+" to "+B.to,B.invalid=!0;return B}function i(R,F){const B=a[R.from.toString()+" to "+R.to.toString()];if(B)return B.display;const K={timeZone:F};if((0,l.v9)(R.from)&&(0,l.v9)(R.to))return(0,s.dq)(R.from,K)+" to "+(0,s.dq)(R.to,K);if((0,l.v9)(R.from)){const L=o.parse(R.to,!0,"utc");return L?(0,s.dq)(R.from,K)+" to "+(0,s.E8)(L,K):""}if((0,l.v9)(R.to)){const L=o.parse(R.from,!1,"utc");return L?(0,s.E8)(L,K)+" to "+(0,s.dq)(R.to,K):""}return R.to.toString()==="now"?u(R.from).display:R.from.toString()+" to "+R.to.toString()}const p=R=>R.indexOf("$")===0||R.indexOf("+$")===0?!0:u(R).invalid!==!0,g=(R,F)=>{if((0,l.v9)(R.from))return(0,s.Hk)(R.from,{timeZone:F});const B=o.parse(R.from,!0);return B?(0,s.Hk)(B,{timeZone:F}):""},y=(R,F,B,K)=>{const L=(0,f.J)(R.from,{roundUp:!1,timeZone:F,fiscalYearStartMonth:B,format:K}),N=(0,f.J)(R.to,{roundUp:!0,timeZone:F,fiscalYearStartMonth:B,format:K});return o.isMathString(R.from)||o.isMathString(R.to)?{from:L,to:N,raw:R}:{from:L,to:N,raw:{from:L,to:N}}};function E(R){return typeof R=="string"?R.indexOf("now")>=0:!1}function h(R){return typeof R.raw.from=="string"&&R.raw.from.indexOf("f")>0?!0:typeof R.raw.to=="string"&&R.raw.to.indexOf("f")>0}function v(R){return E(R.from)||E(R.to)}function C(R){const F=Math.floor(R/31536e3);if(F)return F+"y";const B=Math.floor(R%31536e3/86400);if(B)return B+"d";const K=Math.floor(R%31536e3%86400/3600);if(K)return K+"h";const L=Math.floor(R%31536e3%86400%3600/60);if(L)return L+"m";const N=Math.floor(R%31536e3%86400%3600%60);if(N)return N+"s";const z=Math.floor(R*1e3);return z?z+"ms":"less than a millisecond"}function m(R){const F=Number((R/1e3).toFixed()),B=Math.floor(F/60/60),K=Math.floor(F/60)-B*60,L=Number((F%60).toFixed());let N=B?B+"h":"",z=K?K+"min":"",G=L?L+"sec":"";return N&&z?N=N+" ":N=N,(z||N)&&G?z=z+" ":z=z,N+z+G||"less than 1sec"}function D(R,F,B){let K=1;B&&(K=A(B));let L=T((R.to.valueOf()-R.from.valueOf())/F);return K>L&&(L=K),{intervalMs:L,interval:C(L/1e3)}}const P=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,b={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(R){if(Number(R))return{sec:b.s,type:"s",count:parseInt(R,10)};const F=R.match(P);if(!F||!(0,t.has)(b,F[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(b).join(", ")}"`);return{sec:b[F[2]],type:F[2],count:parseInt(F[1],10)}}function x(R){const F=M(R);return F.sec*F.count}function A(R){const F=M(R);return F.sec*1e3*F.count}function T(R){switch(!0){case R<10:return 1;case R<15:return 10;case R<35:return 20;case R<75:return 50;case R<150:return 100;case R<350:return 200;case R<750:return 500;case R<1500:return 1e3;case R<3500:return 2e3;case R<7500:return 5e3;case R<12500:return 1e4;case R<17500:return 15e3;case R<25e3:return 2e4;case R<45e3:return 3e4;case R<9e4:return 6e4;case R<21e4:return 12e4;case R<45e4:return 3e5;case R<75e4:return 6e5;case R<105e4:return 9e5;case R<15e5:return 12e5;case R<27e5:return 18e5;case R<54e5:return 36e5;case R<9e6:return 72e5;case R<162e5:return 108e5;case R<324e5:return 216e5;case R<864e5:return 432e5;case R<6048e5:return 864e5;case R<18144e5:return 6048e5;case R<36288e5:return 2592e6;default:return 31536e6}}function S(R,F=(0,l.CQ)()){const B=F.unix()-R.from.unix(),K=F.unix()-R.to.unix();return{from:B,to:K}}function U(R,F=(0,l.CQ)()){const B=(0,l.CQ)(F).subtract(R.from,"s"),K=R.to===0?(0,l.CQ)(F):(0,l.CQ)(F).subtract(R.to,"s");return{from:B,to:K,raw:{from:B,to:K}}}},56808:(Y,O,e)=>{"use strict";e.d(O,{$8:()=>a,Pr:()=>r,RQ:()=>f,Vs:()=>d,ZV:()=>c});var t=e(82897),n=e.n(t),o=e(6835),s=e.n(o),l=e(10753),f=(E=>(E.default="",E.localBrowserTime="browser",E.utc="utc",E))(f||{});const d=E=>{switch((0,l.Z)({timeZone:E})){case"browser":return"Local browser time";case"utc":return"UTC";default:return E}},r=(E,h)=>{const v=u(E,h);return v||p(E,h)},c=(0,t.memoize)((E=!1)=>{const h=[];return E===!0?h.push("","browser","utc"):E&&h.push(...E),s().tz.names().reduce((v,C)=>{const m=y[C];return!Array.isArray(m)||m.length===0||v.push(C),v},h)}),a=(0,t.memoize)((E=!1)=>{const v=c(E).reduce((C,m)=>{const D=m.indexOf("/");if(D===-1){const b="";return C[b]=C[b]??[],C[b].push(m),C}const P=m.slice(0,D);return C[P]=C[P]??[],C[P].push(m),C},{});return Object.keys(v).map(C=>({name:C,zones:v[C]}))}),u=(E,h)=>{switch(E){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:E,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const v=(0,l.Z)(),m=(v==="browser"||v==="utc"?u(v,h):p(v,h))??{};return{countries:y[v]??[],abbreviation:"",offsetInMins:0,...m,ianaName:m.ianaName,name:"Default",zone:E}}case"browser":{const v=s().tz.guess(!0),C=p(v,h)??{};return{countries:y[v]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...C,name:"Browser Time",ianaName:C.ianaName,zone:E}}default:return}},i=E=>/^(\+|\-).+/.test(E)?"":E,p=(E,h)=>{const v=s().tz.zone(E);if(v)return{name:E,ianaName:v.name,zone:E,countries:y[E]??[],abbreviation:i(v.abbr(h)),offsetInMins:v.utcOffset(h)}},g={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((E,h)=>s().tz.zonesForCountry(h).reduce((C,m)=>{C[m]||(C[m]=[]);const D=g[h];return D&&C[m].push({code:h,name:D}),C},E),{}))()},50444:(Y,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(53943),n=e(84946),o=e(90801);class s{constructor(){this.subscribers=new Map,this.emitter=new t.Z}publish(d){this.emitter.emit(d.type,d)}subscribe(d,r){return this.getStream(d).subscribe({next:r})}getStream(d){return new n.y(r=>{const c=a=>{r.next(a)};return this.emitter.on(d.type,c),this.subscribers.set(c,r),()=>{this.emitter.off(d.type,c),this.subscribers.delete(c)}})}newScopedBus(d,r){return new l([d],this,r)}emit(d,r){typeof d=="string"?this.emitter.emit(d,{type:d,payload:r}):this.emitter.emit(d.name,{type:d.name,payload:r})}on(d,r,c){if(r.wrapper=a=>{r(a.payload)},typeof d=="string"?this.emitter.on(d,r.wrapper):this.emitter.on(d.name,r.wrapper),c){const a=c.$on("$destroy",()=>{this.off(d,r),a()})}}off(d,r){if(typeof d=="string"){this.emitter.off(d,r.wrapper);return}this.emitter.off(d.name,r.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[d,r]of this.subscribers)r.complete(),this.subscribers.delete(d)}}class l{constructor(d,r,c){this.path=d,this.eventBus=r,this.filter=a=>this.filterConfig.onlyLocal?a.origin===this:!0,this.filterConfig=c??{onlyLocal:!1}}publish(d){d.origin||(d.origin=this),this.eventBus.publish(d)}getStream(d){return this.eventBus.getStream(d).pipe((0,o.h)(this.filter))}subscribe(d,r){return this.getStream(d).subscribe({next:r})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(d,r){return new l([...this.path,d],this,r)}}},23588:(Y,O,e)=>{"use strict";e.d(O,{Pl:()=>f,es:()=>n,n1:()=>l,v9:()=>s,xH:()=>o});var t=e(55391);class n extends t.R{}n.type="data-hover";class o extends t.m{}o.type="data-hover-clear";class s extends t.R{}s.type="data-select";class l extends t.R{}l.type="annotation-event";class f extends t.R{}f.type="dashboard-loaded"},84336:(Y,O,e)=>{"use strict";e.d(O,{X:()=>n});const t=new Set;function n(o){if(t.has(o))throw new Error(`There is already an event defined with type '${o}'`);return t.add(o),{name:o}}},69616:(Y,O,e)=>{"use strict";e.d(O,{Fb:()=>o.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(84336),n=e(55391),o=e(50444),s=e(23588)},55391:(Y,O,e)=>{"use strict";e.d(O,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},96949:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(53908);class n extends t.B{}},6194:(Y,O,e)=>{"use strict";e.d(O,{U_:()=>i,gE:()=>y,je:()=>g});var t=e(82897),n=e.n(t),o=e(83881),s=e(29826),l=e(67483),f=e(99098),d=e(31290),r=e(2576),c=e(2703),a=e(99601);const u={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function i(h){if(!h||(0,t.isEmpty)(h)||!h.field)return p;const v=h.field,C=v.config??{};let m=C.unit,D=m&&(u[m]||m.startsWith("time:")),P=!1;if(v.type===f.fS.time&&!D){if(m="dateTimeAsSystem",D=!0,v.values&&v.values.length>1){let R=v.values[0],F=v.values[v.values.length-1];typeof R=="string"?(R=(0,s.J)(R).unix(),F=(0,s.J)(F).unix()):(R/=1e3,F/=1e3),P=Math.abs(F-R)<60}}else if(v.type===f.fS.boolean)(0,c.br)(m)||(m="bool");else if(!m&&v.type===f.fS.string)m="string";else if(v.type===f.fS.enum)return g(h.theme,C.type?.enum);const b=m?.startsWith("currency"),M=(0,c.br)(m),x=v.type===f.fS.number,T=!D&&!b&&!M&&!(m==="locale")&&x&&C.decimals==null,S=(0,c.Cf)(m||"none"),U=(0,a.NI)(v,h.theme);return(R,F)=>{const{mappings:B}=C,K=m==="string";D&&typeof R=="string"&&(R=(0,l.zh)(R).valueOf());let L=K?NaN:(0,d.I)(R),N,z,G,I,V,H;if(B&&B.length>0){const oe=(0,r.vh)(B,R);oe&&(oe.text!=null&&(N=oe.text),oe.color!=null&&(I=h.theme.visualization.getColorByName(oe.color)),oe.icon!=null&&(V=oe.icon))}if(!Number.isNaN(L)){if(N==null&&!(0,t.isBoolean)(R)){let oe;T&&F!=null?(oe=S(L,F,null,h.timeZone,P),oe.text=+oe.text+""):oe=S(L,C.decimals,null,h.timeZone,P),N=oe.text,G=oe.suffix,z=oe.prefix}if(I==null){const oe=U(L);I=oe.color,H=oe.percent}}if(N==null&&(0,t.isArray)(R)&&(N=(0,t.join)(R,", ")),N==null&&(N=(0,t.toString)(R),N||(C.noValue?N=C.noValue:N="")),!I){const oe=U(-1/0);I=oe.color,H=oe.percent}const Q={text:N,numeric:L,prefix:z,suffix:G,color:I};return V!=null&&(Q.icon=V),H!=null&&(Q.percent=H),Q}}function p(h){return{text:(0,t.toString)(h),numeric:(0,d.I)(h)}}function g(h,v){const C={text:v?.text??[],color:v?.color??[]};return C.color=C.color.map(m=>h.visualization.getColorByName(m)),m=>{if(m==null)return{text:"",numeric:NaN};const D=+m;let P=C.text[D];P==null&&(P=`${m}`);let b=C.color[D];if(b==null){const{palette:M}=h.visualization;b=M[D%M.length],C.color[D]=b}return{text:P,numeric:D,color:b}}}function y(){return h=>({text:(0,o.DP)(h)==="other"?`${JSON.stringify(h,E())}`:`${h}`,numeric:null})}const E=()=>{const h=new WeakSet;return(v,C)=>{if(typeof C=="object"&&C!==null){if(h.has(C))return;h.add(C)}return C}}},72990:(Y,O,e)=>{"use strict";e.d(O,{QY:()=>g,WO:()=>u,YO:()=>y,fD:()=>p});var t=e(32701),n=e(24593),o=e.n(n),s=e(28550),l=e(5680),f=e(33750),d=e(53768),r=e(53908),c=e(99601),a=e(92103);const u=new r.B(()=>[{id:d.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:E},{id:d.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:h},{id:d.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(v,C)=>(m,D,P)=>{const b=P??a.yM;return C.visualization.getColorByName(b.color)}},new i({id:d.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:v=>v.visualization.palette}),new i({id:d.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:v=>v.visualization.palette.filter(C=>l.getContrastRatio(v.visualization.getColorByName(C),v.colors.background.primary)>=v.colors.contrastThreshold)}),new i({id:d.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:v=>["green","yellow","red"]}),new i({id:d.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:v=>["red","yellow","green"]}),new i({id:d.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:v=>["dark-blue","super-light-yellow","dark-red"]}),new i({id:d.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:v=>["super-light-yellow","dark-red"]}),new i({id:d.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:v=>["blue","purple"]}),new i({id:d.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:v=>["super-light-yellow","dark-blue"]}),new i({id:d.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-blue"]}),new i({id:d.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-red"]}),new i({id:d.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-green"]}),new i({id:d.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:v=>["panel-bg","dark-purple"]})]);class i{constructor(C){this.id=C.id,this.name=C.name,this.description=C.description,this.getNamedColors=C.getColors,this.isContinuous=C.isContinuous,this.isByValue=C.isByValue,this.useSeriesName=C.useSeriesName}getColors(C){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===C?this.colorCache:(this.colorCache=this.getNamedColors(C).map(C.visualization.getColorByName),this.colorCacheTheme=C,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(C,m){const D=this.getColors(m);return this.isByValue?this.isContinuous?(P,b,M)=>this.getInterpolator()(b):(P,b,M)=>D[b*(D.length-1)]:this.useSeriesName?(P,b,M)=>D[Math.abs(o()(C.name))%D.length]:(P,b,M)=>{const x=C.state?.seriesIndex??0;return D[x%D.length]}}}function p(v){return u.get(v.config.color?.mode??d.S.Thresholds)}function g(v){return u.get(v??d.S.Thresholds)}function y(v,C){const m=p(v);if(!m.isByValue)return{color:m.getCalculator(v,C)(0,0),threshold:a.yM,percent:1};const D=(0,c.NI)(v,C),P=v.config.color?.seriesBy??"last",M=(0,f.Kx)({field:v,reducers:[P]})[P]??0;return D(M)}function E(v,C){return()=>C.visualization.getColorByName(v.config.color?.fixedColor??d.R)}function h(v,C){return()=>{const m=C.visualization.getColorByName(v.config.color?.fixedColor??d.R),D=[m],P=6,b=10,M=35,x=35;for(let T=1;T<P;T++)D.push((0,s.Z)(m).spin(T/P*b).brighten(T/P*M).toHexString()),D.push((0,s.Z)(m).spin(-(T/P)*b).darken(T/P*x).toHexString());const A=v.state?.seriesIndex??0;return D[A%D.length]}}},92156:(Y,O,e)=>{"use strict";e.d(O,{E1:()=>p,HU:()=>u,cB:()=>E,dE:()=>y,gG:()=>D,nG:()=>h,n_:()=>i,pZ:()=>g,r5:()=>x,sg:()=>P});var t=e(82897),n=e.n(t),o=e(12115),s=e(83881),l=e(50035),f=e(33750),d=e(90748),r=e(99098),c=e(6194),a=e(30471);const u="__series.name",i="__field.displayName",p="__field.labels",g="__calc",y="__cell_",E=25,h=T=>{const{replaceVariables:S,reduceOptions:U,timeZone:R,theme:F}=T,B=U.calcs.length?U.calcs:[f.gz.last],K=[],L=(0,l.sq)(U.fields?{id:d.mi.byRegexp,options:U.fields}:{id:d.mi.numeric}),N=T.data??[],z=U.limit?U.limit:E;let G=!1;for(let I=0;I<N.length&&!G;I++){const V=N[I],{timeField:H}=(0,s.sV)(V),Q=new o.U(V);for(let oe=0;oe<V.fields.length&&!G;oe++){const se=V.fields[oe],ie=se.getLinks;if(!L(se,V,N))continue;let j=se.config;se.state?.range&&(j={...j,...se.state?.range});let de=se.config.displayName??"";const ce=se.display??(0,c.U_)({field:se,theme:T.theme,timeZone:R});if(U.values)for(let ee=0;ee<se.values.length;ee++){se.state=C(se,K.length);const le=A(se,ee),q=ce(se.values[ee]),fe=v(V,se,ee,S,le),Z=m(fe,T.fieldConfig,F);if(K.push({name:"",field:j,display:{...q,title:fe,color:Z??q.color},view:Q,colIndex:oe,rowIndex:ee,getLinks:ie?()=>ie({valueRowIndex:ee}):()=>[],hasLinks:D(se)}),K.length>=z){G=!0;break}}else{const ee=(0,f.Kx)({field:se,reducers:B});for(const le of B){const q=se.state?.scopedVars??{};q[g]={value:le,text:le};const fe=ce(ee[le]);de!==""?fe.title=S(de,q):fe.title=(0,a.CZ)(se,V,N);let Z;T.sparkline&&(Z={y:V.fields[oe],x:H},le===f.gz.last?Z.highlightIndex=Z.y.values.length-1:le===f.gz.first&&(Z.highlightIndex=0)),K.push({name:le,field:j,display:fe,sparkline:Z,view:Q,colIndex:oe,getLinks:ie?()=>ie({calculatedValue:fe}):()=>[],hasLinks:D(se)})}}}}return K.length===0&&K.push(b(T)),K};function v(T,S,U,R,F){const B=S.config.displayName;if(B)return B.indexOf(y)?R(x(B),F):R(B,F);let K=[],L=0;for(const N of T.fields)if(N!==S)if(N.type===r.fS.string){const z=N.values[U]??"",G=N.display?N.display(z).text:z;G.length>0&&K.push(G)}else N.type===r.fS.number&&L++;return(L||K.length===0)&&K.push((0,a.CZ)(S,T)),K.join(" ")}function C(T,S){return{...T.state,seriesIndex:S}}function m(T,S,U){for(const R of S.overrides)if(R.matcher.id==="byName"&&R.matcher.options===T){for(const F of R.properties)if(F.id==="color"&&F.value)return U.visualization.getColorByName(F.value.fixedColor)}return null}function D(T){return T.config?.links?.length?T.config.links.length>0:!1}function P(T){let S="",U="",R="",F="";for(let B=0;B<T.length;B++){const K=T[B].display;K.text&&K.text.length>U.length&&(U=K.text),K.title&&K.title.length>S.length&&(S=K.title),K.prefix&&K.prefix.length>R.length&&(R=K.prefix),K.suffix&&K.suffix.length>F.length&&(F=K.suffix)}return{text:U,title:S,suffix:F,prefix:R}}function b(T){const S="No data",{fieldConfig:U,timeZone:R}=T,{defaults:F}=U,K=(0,c.U_)({field:{type:r.fS.other,config:F},theme:T.theme,timeZone:R})(null),L=M(K,S);return{name:S,field:{...F,max:F.max??0,min:F.min??0},display:{text:L,numeric:0,color:K.color},hasLinks:!1}}function M(T,S){return!T||(0,t.isEmpty)(T.text)?S:T.text}function x(T){return T.replace(/\${__cell_(\d+)}|\[\[__cell_(\d+)\]\]|\$__cell_(\d+)/g,(S,U,R,F)=>`\${__data.fields[${U??R??F}]}`)}function A(T,S){return T.state?.scopedVars?.__dataContext?{...T.state?.scopedVars,__dataContext:{value:{...T.state?.scopedVars?.__dataContext.value,rowIndex:S}}}:T.state?.scopedVars}},76095:(Y,O,e)=>{"use strict";e.d(O,{Cc:()=>A,Of:()=>x,SM:()=>v,Xu:()=>h,gb:()=>b,oB:()=>M});var t=e(82897),n=e.n(t),o=e(66111),s=e(83272),l=e(40538),f=e(83881),d=e(96905),r=e(5680),c=e(33750),a=e(50035),u=e(99098),i=e(53768),p=e(72196),g=e(94976),y=e(6194),E=e(30779);function h(S){let U=null,R=null;const F=[c.gz.min,c.gz.max];for(const B of S)for(const K of B.fields)if(K.type===u.fS.number){const L=(0,c.Kx)({field:K,reducers:F}),N=L[c.gz.min],z=L[c.gz.max];(U===null||N<U)&&(U=N),(R===null||z>R)&&(R=z)}return{min:U,max:R,delta:(R??0)-(U??0)}}function v(S){if(!S.data)return[];const U=S.fieldConfig;if(!U)return S.data;const R=S.fieldConfigRegistry??E.N;let F=0,B;const K=[];if(U.overrides)for(const L of U.overrides){const N=a.Ls.get(L.matcher.id);N&&K.push({match:N.get(L.matcher.options),properties:L.properties})}return S.data.map((L,N)=>{const z={...L};z.fields=z.fields.map(G=>({...G,config:(0,t.cloneDeep)(G.config),state:{...G.state}}));for(const G of z.fields){const I=G.config;G.state.scopedVars={__dataContext:{value:{data:S.data,frame:z,frameIndex:N,field:G}}};const V={field:G,data:S.data,dataFrameIndex:N,replaceVariables:S.replaceVariables,fieldConfigRegistry:R};D(I,U.defaults,V);for(const oe of K)if(oe.match(G,z,S.data))for(const se of oe.properties)m(I,se,V);let H=G.type;if(!H||H===u.fS.other){const oe=(0,f.fu)(G);oe&&(H=oe)}let Q;if(G.type===u.fS.number){!B&&(!(0,t.isNumber)(I.min)||!(0,t.isNumber)(I.max))&&(B=h(S.data));const oe=I.min??B.min,se=I.max??B.max;Q={min:oe,max:se,delta:se-oe}}G.state.seriesIndex=F,G.state.range=Q,G.type=H,G.type!==u.fS.time&&F++,G.display=(0,y.U_)({field:G,theme:S.theme,timeZone:S.timeZone}),G.config.unit!=="dateTimeFromNow"&&(G.display=C(G.display,2500)),G.getLinks=M(z,G,G.state.scopedVars,V.replaceVariables,S.timeZone)}return z})}function C(S,U=2500){const R=new Map;for(let F=-1;F<=15;F++)R.set(F,new Map);return(F,B)=>{let K=R.get(B??-1),L=K.get(F);return L||(K.size===U&&K.clear(),L=S(F,B),L.color&&(L.color=(0,r.asHexString)(L.color)),K.set(F,L)),L}}function m(S,U,R){const B=R.fieldConfigRegistry.getIfExists(U.id);if(!B)return;const K=B.process(U.value,R,B.settings);K==null?B.isCustom&&S.custom?(0,t.unset)(S.custom,B.path):(0,t.unset)(S,B.path):B.isCustom?(S.custom||(S.custom={}),(0,t.set)(S.custom,B.path,K)):(0,t.set)(S,B.path,K)}function D(S,U,R){S.links&&U.links&&(S.links=[...S.links,...U.links]);for(const F of R.fieldConfigRegistry.list())F.isCustom&&!S.custom&&(S.custom={}),P(F.isCustom?S.custom:S,F.isCustom?U.custom:U,F,R);b(S)}function P(S,U,R,F){const B=(0,t.get)(S,R.path);if(B==null){const K=F.fieldConfigRegistry.getIfExists(R.id);if(!K)return;if(K&&K.shouldApply(F.field)){const L=K.process((0,t.get)(U,K.path),F,K.settings);L!=null&&(0,t.set)(S,K.path,L)}}}function b(S){const{thresholds:U}=S;if(S.color?S.color.mode||delete S.color:U&&(S.color={mode:i.S.Thresholds}),S.hasOwnProperty("min")&&S.hasOwnProperty("max")&&S.min>S.max){const R=S.max;S.max=S.min,S.min=R}}const M=(S,U,R,F,B)=>K=>!U.config.links||U.config.links.length===0?[]:U.config.links.map(L=>{const N=T(S,U,R),z={...R,__dataContext:N},G=(H,Q,oe)=>F(H,{...z,...Q},oe);if(K.valueRowIndex!==void 0&&!isNaN(K.valueRowIndex)?N.value.rowIndex=K.valueRowIndex:N.value.calculatedValue=K.calculatedValue,L.onClick)return{href:L.url,title:F(L.title||"",z),target:L.targetBlank?"_blank":void 0,onClick:(H,Q)=>{L.onClick({origin:Q??U,e:H,replaceVariables:G})},origin:U};if(L.internal)return(0,g._)({link:L,internalLink:L.internal,scopedVars:z,field:U,range:L.internal.range??{},replaceVariables:F});let I=L.onBuildUrl?L.onBuildUrl({origin:U,replaceVariables:G}):L.url;return I&&(I=p.u.assureBaseUrl(I.replace(/\n/g,"")),I=F(I,z,l.b8.UriEncode),I=p.u.processUrl(I)),{href:I,title:F(L.title||"",z),target:L.targetBlank?"_blank":void 0,origin:U}});function x(S){if(!S||S.length===0)return[];const U=[...S],R=(0,y.gE)();for(let F=0;F<U.length;F++){const B={...U[F]},K=[...B.fields];for(let L=0;L<K.length;L++)K[L]={...K[L],display:R};U[F]={...B,fields:K}}return U}function A(S,U,R,F,B,K){const L=S?.fieldConfigRegistry,N=(0,o.useRef)(0),z=(0,s.Z)(R?.series);return(0,o.useMemo)(()=>{if(!L||!U||!R)return;const G=R?.series;return R.structureRev==null&&G&&z&&!(0,d.nl)(G,z,d.Ch)&&N.current++,{structureRev:N.current,...R,series:v({data:G,fieldConfig:U,fieldConfigRegistry:L,replaceVariables:K,theme:B,timeZone:F})}},[L,U,R,z,F,B,K])}function T(S,U,R){return R?.__dataContext?{value:{...R.__dataContext.value}}:{value:{frame:S,field:U,data:[S]}}}},30471:(Y,O,e)=>{"use strict";e.d(O,{$w:()=>l,CZ:()=>s,nf:()=>o});var t=e(99098),n=e(7569);function o(r,c){if(r.name)return r.name;const a=[];for(const u of r.fields)u.labels&&Object.keys(u.labels).length>0&&a.push(u);return a.length===1?(0,n.aA)(a[0].labels):c===void 0?r.fields.filter(u=>u.type!==t.fS.time).map(u=>s(u,r)).join(", "):r.refId?`Series (${r.refId})`:`Series (${c})`}function s(r,c,a){const u=r.state?.displayName,i=Boolean(a&&a.length>1);if(u&&i===r.state?.multipleFrames)return u;const p=l(r,c,a);return r.state=r.state||{},r.state.displayName=p,r.state.multipleFrames=i,p}function l(r,c,a){const u=r.config?.displayName&&r.config?.displayName.length;let i=u?r.config.displayName:r.name;if(u)return i;if(c&&r.config?.displayNameFromDS)return r.config.displayNameFromDS;if(r.type===t.fS.time&&!r.labels)return i??t.Ls;let p=[],g=!1;if(a&&a.length>1){for(let h=1;h<a.length;h++)if(a[h].name!==a[h-1].name){g=!0;break}}let y=!1,E=!1;if(g&&c?.name&&(p.push(c.name),y=!0),r.name&&r.name!==t.M5&&p.push(r.name),r.labels&&c){let h=d(a??[c]);if(h)r.labels[h]&&(p.push(r.labels[h]),E=!0);else{let v=(0,n.aA)(r.labels);v&&(p.push(v),E=!0)}}return c&&!y&&!E&&r.name===t.M5&&c.name&&c.name.length>0&&(p.push(c.name),y=!0),p.length?i=p.join(" "):r.name?i=r.name:i=t.M5,i===r.name&&(i=f(r,c)),i}function f(r,c){let a=0,u=!1;if(c)for(let i=0;i<c.fields.length;i++){const p=c.fields[i];if(r===p){if(u=!0,a>0){a++;break}}else if(r.name===p.name&&(a++,u))break}return a?`${r.name} ${a}`:r.name}function d(r){let c=null;for(let a=0;a<r.length;a++){const u=r[a];for(const i of u.fields)if(i.labels){for(const p in i.labels)if(c===null)c=p;else if(p!==c)return null}}return c}},72769:(Y,O,e)=>{"use strict";e.d(O,{z:()=>l});var t=e(82897),n=e.n(t),o=e(2703),s=e(6194);function l(f){return new Proxy({},{get:(d,r)=>{let c=f.frame.fields.find(p=>r===p.name);if(!c){const p=(0,t.toNumber)(r);c=f.frame.fields[p]}if(c||(c=f.frame.fields.find(p=>r===p.config.displayName)),c||(c=f.frame.fields.find(p=>p.labels?r===p.labels.name:!1)),!c)return;const a=c.display??(0,s.U_)(),u=c.values[f.rowIndex],i=a(u);return i.toString=()=>(0,o.zc)(i),i}})}},99928:(Y,O,e)=>{"use strict";e.d(O,{AE:()=>s.AE,CZ:()=>a.CZ,Cc:()=>r.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>o.N,NI:()=>u.NI,NN:()=>s.NN,Of:()=>r.Of,Oh:()=>s.Oh,QY:()=>l.QY,SM:()=>r.SM,SO:()=>o.S,U_:()=>n.U_,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>l.WO,YO:()=>l.YO,ZD:()=>f.Z,ZN:()=>s.ZN,bP:()=>d.bP,cB:()=>t.cB,dE:()=>t.dE,dz:()=>u.dz,fD:()=>l.fD,gE:()=>n.gE,gG:()=>t.gG,gb:()=>r.gb,je:()=>n.je,kG:()=>s.kG,m1:()=>d.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>a.nf,op:()=>s.op,pZ:()=>t.pZ,r5:()=>t.r5,sg:()=>t.sg,uj:()=>s.uj,xD:()=>u.xD,zv:()=>c.z});var t=e(92156),n=e(6194),o=e(30779),s=e(72293),l=e(72990),f=e(96949),d=e(92103),r=e(76095),c=e(72769),a=e(30471),u=e(99601)},72293:(Y,O,e)=>{"use strict";e.d(O,{AE:()=>f,NN:()=>s,Oh:()=>n,VB:()=>c,W0:()=>o,W4:()=>a,ZN:()=>r,kG:()=>t,op:()=>d,uj:()=>l});const t=(u,i,p)=>u,n=(u,i,p)=>{if(u!=null)return parseFloat(u)},o=(u,i,p)=>(delete i.field?.state?.displayName,d(u,i,p)),s=(u,i,p)=>u,l=(u,i,p)=>u,f=(u,i,p)=>u,d=(u,i,p)=>u==null?u:p&&p.expandTemplateVars&&i.replaceVariables?i.replaceVariables(u,i.field.state.scopedVars):`${u}`,r=(u,i,p)=>u,c=(u,i,p)=>u,a=(u,i,p)=>u},99601:(Y,O,e)=>{"use strict";e.d(O,{NI:()=>d,dz:()=>c,xD:()=>a});var t=e(82897),n=e.n(t),o=e(33750),s=e(99098),l=e(72990),f=e(92103);function d(u,i){if(u.type===s.fS.boolean)return r(u,i);const g=(0,l.fD)(u).getCalculator(u,i),y=u.state?.range??c(u);return E=>{let h=0;E!==-1/0&&(h=(E-y.min)/y.delta,Number.isNaN(h)&&(h=0));const v=(0,f.pD)(u,E,h);return{percent:h,threshold:v,color:g(E,h,v)}}}function r(u,i){const p={color:i.visualization.getColorByName("green"),percent:1,threshold:void 0},g={color:i.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,l.fD)(u);if(y.isContinuous&&y.getColors){const E=y.getColors(i);p.color=E[E.length-1],g.color=E[0]}return E=>Boolean(E)?p:g}function c(u){if(u.type!==s.fS.number)return{min:0,max:100,delta:100};let i=u.config.min,p=u.config.max;if(!(0,t.isNumber)(i)||!(0,t.isNumber)(p))if(u.values&&u.values.length){const g=(0,o.Kx)({field:u,reducers:[o.gz.min,o.gz.max]});(0,t.isNumber)(i)||(i=g[o.gz.min]),(0,t.isNumber)(p)||(p=g[o.gz.max])}else i=0,p=100;return{min:i,max:p,delta:p-i}}function a(u,i){const{config:p}=u;let{min:g,max:y}=p;return(0,t.isNumber)(g)&&(0,t.isNumber)(y)?p:i||!u.state?.range?{...p,...c(u)}:{...p,...u.state.range}}},30779:(Y,O,e)=>{"use strict";e.d(O,{N:()=>o,S:()=>s});var t=e(53908),n=e(96949);const o=new n.Z,s=new t.B},92103:(Y,O,e)=>{"use strict";e.d(O,{bP:()=>f,m1:()=>s,pD:()=>l,yM:()=>o});var t=e(53768),n=e(69098);const o={value:0,color:t.R};function s(d,r){if(!r||r.length===0)return o;let c=r[0];for(const a of r)if(d>=a.value)c=a;else break;return c}function l(d,r,c){const{thresholds:a}=d.config;return a?.mode===n.H.Percentage?s(c*100,a?.steps):s(r,a?.steps)}function f(d){return d.sort((r,c)=>r.value-c.value)}},82360:(Y,O,e)=>{"use strict";e.d(O,{q:()=>t.q1});var t=e(40538)},38412:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{AnnotationChangeEvent:()=>u.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>l.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>u.mA,BusEventWithPayload:()=>u.R_,ByNamesMatcherMode:()=>f.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>l.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>a.cB,DashboardLoadedEvent:()=>u.Pl,DataFrameView:()=>l.US,DataHoverClearEvent:()=>u.xH,DataHoverEvent:()=>u.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>u.v9,DataSourcePluginContextProvider:()=>m.n,DataTransformerID:()=>f.Wk,DocsId:()=>t.xV,EventBusSrv:()=>u.Fb,FieldCache:()=>l.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>a.ZD,FieldMatcherID:()=>f.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>g.q,FrameMatcherID:()=>f.E4,ISO_8601:()=>d.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>d.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,MISSING_VALUE:()=>l.Yi,MatcherID:()=>f.Ff,MutableDataFrame:()=>l.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>E.c,PluginContextProvider:()=>C.b,ReducerID:()=>f.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>d.zf,VAR_CALC:()=>a.pZ,VAR_CELL_PREFIX:()=>a.dE,VAR_FIELD_LABELS:()=>a.E1,VAR_FIELD_NAME:()=>a.n_,VAR_SERIES_NAME:()=>a.HU,ValueMatcherID:()=>f.mE,addDurationToDate:()=>d.Ks,anySeriesWithTimeField:()=>l.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>a.SM,applyRawFieldOverrides:()=>a.Of,arrayToDataFrame:()=>l.Pc,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>a.W4,booleanValueFormatter:()=>c.IR,buildHistogram:()=>f.gY,classicColors:()=>t.ZC,colorManipulator:()=>i.r,compareArrayValues:()=>l.nl,compareDataFrameStructures:()=>l.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>l.q2,createFieldConfigRegistry:()=>v.j,createTheme:()=>i.j,dataFrameFromJSON:()=>l.vP,dataFrameToJSON:()=>l.Y,dataLinksOverrideProcessor:()=>a.NN,dateMath:()=>d.Rn,dateTime:()=>d.CQ,dateTimeAsMoment:()=>d.C_,dateTimeForTimeZone:()=>d.GY,dateTimeFormat:()=>d.dq,dateTimeFormatISO:()=>d.lf,dateTimeFormatTimeAgo:()=>d.E8,dateTimeFormatWithAbbrevation:()=>d.Fm,dateTimeParse:()=>d.J,decodeFieldValueEntities:()=>l.Jy,decodeFieldValueEnums:()=>l.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>a.W0,doStandardCalcs:()=>f.uP,durationToMilliseconds:()=>d.iX,ensureTimeField:()=>f.J_,escapeRegex:()=>r.yI,escapeStringForRegex:()=>r.GE,eventFactory:()=>u.Xw,fieldColorModeRegistry:()=>a.WO,fieldMatchers:()=>f.Ls,fieldReducers:()=>f.TB,filterFieldConfigOverrides:()=>h.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>r.Xt,findMatchesInText:()=>r.lu,findUniqueLabels:()=>t.IU,fixCellTemplateExpressions:()=>a.r5,formatLabels:()=>t.aA,formattedValueToString:()=>c.zc,frameMatchers:()=>f.Ac,getActiveThreshold:()=>a.m1,getAllValuesFromDimension:()=>l.r7,getColumnFromDimension:()=>l.$q,getColumnsFromDimension:()=>l.GV,getDataFrameRow:()=>l.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>l.YP,getDisplayProcessor:()=>a.U_,getDisplayValueAlignmentFactors:()=>a.sg,getEnumDisplayProcessor:()=>a.je,getFieldColorMode:()=>a.QY,getFieldColorModeForField:()=>a.fD,getFieldConfigWithMinMax:()=>a.xD,getFieldDisplayName:()=>a.CZ,getFieldDisplayValues:()=>a.nG,getFieldDisplayValuesProxy:()=>a.zv,getFieldMatcher:()=>f.sq,getFieldSeriesColor:()=>a.YO,getFieldTypeFromValue:()=>l.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>a.nf,getFrameMatchers:()=>f.b9,getHistogramFields:()=>f.qr,getLinksSupplier:()=>b.oB,getLocale:()=>d.Kd,getLocaleData:()=>d.k4,getMinMaxAndDelta:()=>a.dz,getPanelOptionsWithDefaults:()=>h.d4,getProcessedDataFrames:()=>l.F9,getRawDisplayProcessor:()=>a.gE,getScaleCalculator:()=>a.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>l.sV,getTimeZone:()=>d.Ze,getTimeZoneGroups:()=>d.$8,getTimeZoneInfo:()=>d.Pr,getTimeZones:()=>d.ZV,getValueFormat:()=>c.Cf,getValueFormats:()=>c.QW,getValueFormatterIndex:()=>c.Td,getValueFromDimension:()=>l.jC,getValueMatcher:()=>f.IG,getWeekdayIndex:()=>d.ig,getWeekdayIndexByEnglishName:()=>d.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>l.fu,guessFieldTypeFromNameAndValue:()=>l._m,guessFieldTypeFromValue:()=>l.LI,guessFieldTypes:()=>l.SX,hasLinks:()=>a.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>f.Zi,histogramFieldInfo:()=>f.py,histogramFieldsToFrame:()=>f.zM,histogramFrameBucketMaxFieldName:()=>f.cO,histogramFrameBucketMinFieldName:()=>f.wL,histogramTransformer:()=>f.Op,identityOverrideProcessor:()=>a.kG,incrRound:()=>f.Jz,incrRoundDn:()=>f.mB,incrRoundUp:()=>f.UO,intervalToAbbreviatedDurationString:()=>d.vT,isBooleanUnit:()=>c.br,isCustomFieldProp:()=>h.Lc,isDataFrame:()=>l.aY,isDataSourcePluginContext:()=>P.v,isDataSourceRef:()=>t.cv,isDateTime:()=>d.v9,isDateTimeInput:()=>d.D2,isEmptyObject:()=>t.Qr,isHistogramFrameBucketMaxFieldName:()=>f.kl,isHistogramFrameBucketMinFieldName:()=>f.Ok,isLikelyAscendingVector:()=>f.lP,isStandardFieldProp:()=>h._k,isTableData:()=>l.Ji,isTimeSeriesFrame:()=>l.pP,isTimeSeriesFrames:()=>l.xI,isValidDate:()=>d.qb,isValidDuration:()=>d.jO,isValidGoDuration:()=>d.IA,localTimeFormat:()=>d.Ji,locale:()=>c.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>p.F,numberOverrideProcessor:()=>a.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>f.JP,parseDuration:()=>d.RA,parseFlags:()=>r.TL,parseLabels:()=>t.J8,preProcessPanelData:()=>l.zR,rangeUtil:()=>d.cT,readCSV:()=>t.uP,reduceField:()=>f.Kx,renderMarkdown:()=>r.ap,renderTextPanelMarkdown:()=>r.xH,restoreCustomOverrideRules:()=>h.__,reverseDataFrame:()=>l.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>c.Qj,selectOverrideProcessor:()=>a.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>d.i_,setTimeZoneResolver:()=>d.K7,setWeekStart:()=>d.Ls,shallowCompare:()=>l.Vv,simpleCountUnit:()=>c.SR,sortDataFrame:()=>l.aK,sortThresholds:()=>a.bP,standardEditorsRegistry:()=>a.SO,standardFieldConfigEditorRegistry:()=>a.N6,standardTransformers:()=>f.YR,standardTransformersRegistry:()=>f.Ze,stringFormater:()=>c.vb,stringOverrideProcessor:()=>a.op,stringStartsAsRegEx:()=>r.oH,stringToJsRegex:()=>r.jO,stringToMs:()=>r.e0,systemDateFormats:()=>d.U6,textUtil:()=>r.QX,thresholdsOverrideProcessor:()=>a.ZN,timeZoneAbbrevation:()=>d.Hk,timeZoneFormatUserFriendly:()=>d.Vs,toCSV:()=>t.MJ,toDataFrame:()=>l.g0,toDataFrameDTO:()=>l.og,toDuration:()=>d.np,toFilteredDataFrameDTO:()=>l.Aw,toFixed:()=>c.FH,toFixedScaled:()=>c.bn,toFixedUnit:()=>c.q2,toFloatOrUndefined:()=>r.dz,toIntegerOrUndefined:()=>r.By,toLegacyResponseData:()=>l.Zr,toNumberString:()=>r.PF,toOption:()=>t.Er,toPascalCase:()=>r.Mh,toUtc:()=>d.zh,transformDataFrame:()=>f.Hz,unEscapeStringFromRegex:()=>r.x6,unitOverrideProcessor:()=>a.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>a.Cc,usePluginContext:()=>D.g,validateFieldConfig:()=>a.gb,valueMappingsOverrideProcessor:()=>a.uj,valueMatchers:()=>f.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(42827),n=e(2263),o={};for(const M in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","anyToNumber","arrayUtils","binaryOperators","classicColors","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(M)<0&&(o[M]=()=>n[M]);e.d(O,o);var s=e(2988),l=e(2033),f=e(13095),d=e(44540),r=e(63418),c=e(22078),a=e(99928),u=e(69616),i=e(99358),p=e(46646),g=e(82360),y=e(89974),E=e(36873),h=e(16936),v=e(59472),C=e(75363),m=e(47956),D=e(81129),P=e(58556),b=e(76095)},46646:(Y,O,e)=>{"use strict";e.d(O,{F:()=>t.F});var t=e(8488)},8488:(Y,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(53908);const n=new t.B},36873:(Y,O,e)=>{"use strict";e.d(O,{c:()=>r});var t=e(82897),n=e.n(t),o=e(96949),s=e(59250),l=e(55024),f=e(91353),d=e(59472);class r extends s.Sg{constructor(a){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new o.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=a}get defaults(){let a=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const u=new f.rt;this.optionsSupplier(u,{data:[]});for(const i of u.getItems())i.defaultValue!=null&&(0,t.set)(a,i.path,i.defaultValue)}return a}get fieldConfigDefaults(){const a=this._fieldConfigDefaults.defaults;a.custom={};for(const u of this.fieldConfigRegistry.list())u.defaultValue!==void 0&&(0,t.set)(a,u.id,u.defaultValue);return{defaults:{...a},overrides:this._fieldConfigDefaults.overrides}}setDefaults(a){return(0,l.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=a,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(a){return(0,l.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=a,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(a){return this.onPanelMigration=a,this}setPanelChangeHandler(a){return this.onPanelTypeChanged=a,this}setPanelOptions(a){return this.optionsSupplier=a,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(a){return this.dataSupport={...this.dataSupport,...a},this}useFieldConfig(a={}){return this._initConfigRegistry=()=>(0,d.j)(a,this.meta.name),this}setSuggestionsSupplier(a){return this.suggestionsSupplier=a,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(a){return this.meta.id===a}}},16936:(Y,O,e)=>{"use strict";e.d(O,{Lc:()=>g,__:()=>p,_k:()=>y,aS:()=>c,d4:()=>d});var t=e(82897),n=e.n(t),o=e(72990),s=e(53768),l=e(3947),f=e(69098);function d({plugin:E,currentOptions:h,currentFieldConfig:v,isAfterPluginChange:C}){const m=(0,t.mergeWith)({},E.defaults,h||{},(b,M)=>{if((0,t.isArray)(M))return M}),D=r(v,E),P=u(E,D,C);return{options:m,fieldConfig:P}}function r(E,h){const v=h.fieldConfigDefaults,C={defaults:(0,t.mergeWith)({},v.defaults,E?E.defaults:{},(m,D)=>{if((0,t.isArray)(D))return D}),overrides:E?.overrides??[]};a(C.defaults,"",h.fieldConfigRegistry),C.defaults.thresholds&&i(C.defaults.thresholds),C.overrides=c(C.overrides,m=>h.fieldConfigRegistry.getIfExists(m.id)!==void 0);for(const m of C.overrides)for(const D of m.properties)D.id==="thresholds"&&i(D.value);return C}function c(E,h){return E.map(v=>{const C=v.properties.filter(h);return{...v,properties:C}}).filter(v=>v.properties.length>0)}function a(E,h,v){let C=!1;for(const m of Object.keys(E)){const D=E[m],P=`${h}${m}`,b=!!v.getIfExists(P);if(b){C=!0;continue}(0,t.isArray)(D)||!(0,t.isObject)(D)?b||(0,t.unset)(E,m):a(D,`${P}.`,v)||(0,t.unset)(E,m)}return C}function u(E,h,v){if(!v)return h;const C=E.fieldConfigRegistry.getIfExists(l.qb.Color);if(C&&C.settings){const m=C.settings,D=o.WO.getIfExists(h.defaults.color?.mode);if(!m.byValueSupport&&(!D||D.isByValue))return h.defaults.color={mode:s.S.PaletteClassic},h;if(m.byValueSupport&&m.preferThresholdsMode&&D?.id!==s.S.Fixed&&(!D||!D.isByValue))return h.defaults.color={mode:s.S.Thresholds},h;if(m.bySeriesSupport&&D?.isByValue)return h.defaults.color={mode:s.S.PaletteClassic},h}return h}function i(E){E.mode||(E.mode=f.H.Absolute),E.steps?E.steps.length&&(E.steps[0].value=-1/0):E.steps=[]}function p(E,h){const v={defaults:{...E.defaults,custom:h.defaults.custom},overrides:[...E.overrides]};for(const C of h.overrides)for(const m of C.properties)if(g(m)){const D=v.overrides.find(P=>(0,t.isEqual)(P.matcher,C.matcher));D?D!==C&&D.properties.push(m):v.overrides.push(C)}return v}function g(E){return E.id.startsWith("custom.")}function y(E){return!g(E)}},59472:(Y,O,e)=>{"use strict";e.d(O,{j:()=>s});var t=e(96949),n=e(30779),o=e(91353);function s(f={},d){const r=new t.Z,c=n.N.list(),a={};if(f.useCustomConfig){const u=new o.vo;f.useCustomConfig(u);for(const i of u.getRegistry().list())if(i.isCustom=!0,i.id="custom."+i.id,l(i,c)){const p=a[i.category[0]]??[];p.push(i),a[i.category[0]]=p}else r.register(i)}for(let u of c)if(!(f.disableStandardOptions&&f.disableStandardOptions.indexOf(u.id)>-1)){if(f.standardOptions){const i=f.standardOptions[u.id]?.defaultValue,p=f.standardOptions[u.id]?.settings;i&&(u={...u,defaultValue:i}),p&&(u={...u,settings:u.settings?{...u.settings,...p}:p})}if(r.register(u),u.category&&a[u.category[0]])for(let i of a[u.category[0]])r.register(i)}for(const u of r.list())if(u.path.indexOf("[")>0)throw new Error(`[${d}] Field config paths do not support arrays: ${u.id}`);return r}function l(f,d){return Boolean(d.find(r=>f.category&&r.category&&f.category[0]===r.category[0]))}},63418:(Y,O,e)=>{"use strict";e.d(O,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>l,TL:()=>o.TL,Xt:()=>o.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>o.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(79086),n=e(2631),o=e(52216),s=e(95304);const l={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm,sanitizeSVGContent:s.Is,sanitizeTrustedTypes:s.cd,sanitizeTrustedTypesRSS:s.pQ}},2631:(Y,O,e)=>{"use strict";e.d(O,{a:()=>l,x:()=>f});var t=e(27986),n=e(95304);let o=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function l(d,r){o||(t.TU.setOptions({...s}),o=!0);let c;r?.breaks&&(c={...s,breaks:!0});const a=(0,t.TU)(d||"",c);return r?.noSanitize?a:(0,n.he)(a)}function f(d,r){o||(t.TU.setOptions({...s}),o=!0);const c=(0,t.TU)(d||"");return r?.noSanitize?c:(0,n.he)(c)}},95304:(Y,O,e)=>{"use strict";e.d(O,{Is:()=>i,Nm:()=>p,Nw:()=>r,Xv:()=>y,cd:()=>a,he:()=>u,oT:()=>g,pQ:()=>c});var t=e(2397),n=e(97692),o=e.n(n),s=e(99731),l=e.n(s);const f=Object.keys(s.whiteList).reduce((E,h)=>(E[h]=s.whiteList[h]?.concat(["class","style"]),E),{}),d=new s.FilterXSS({whiteList:f,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function r(E){try{return o().sanitize(E,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",E),y(E)}}function c(E){return o().sanitize(E,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function a(E){return o().sanitize(E,{RETURN_TRUSTED_TYPE:!0})}function u(E){try{return d.process(E)}catch{return console.error("String could not be sanitized",E),"Text string could not be sanitized"}}function i(E){return o().sanitize(E,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function p(E){return(0,t.N)(E)}function g(E){return/\u001b\[\d{1,2}m/.test(E)}function y(E){return String(E).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},79086:(Y,O,e)=>{"use strict";e.d(O,{By:()=>p,GE:()=>d,Mh:()=>y,PF:()=>i,dz:()=>g,e0:()=>u,jO:()=>a,oH:()=>c,x6:()=>r,yI:()=>E});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",l=new RegExp(s,"g"),f=new RegExp("(\\\\)"+s,"g");function d(h){return h&&h.replace(l,"\\$1")}function r(h){return h&&h.replace(f,"$2")}function c(h){return h?h[0]==="/":!1}function a(h){if(!c(h))return new RegExp(`^${h}$`);const v=h.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!v)throw new Error(`'${h}' is not a valid regular expression.`);return new RegExp(v[1],v[2])}function u(h){if(!h)return 0;const v=parseInt(h,10),C=h.slice(String(v).length),m=1e3,D=m*60,P=D*60,b=P*24;switch(C){case"s":return v*m;case"m":return v*D;case"h":return v*P;case"d":return v*b;default:if(!C)return isNaN(v)?0:v;throw new Error("Not supported unit: "+C)}}function i(h){return h!=null&&Number.isFinite(h)?h.toString():""}function p(h){if(!h)return;const v=parseInt(h,10);return isNaN(v)?void 0:v}function g(h){if(!h)return;const v=parseFloat(h);return isNaN(v)?void 0:v}function y(h){const v=(0,t.camelCase)(h);return v.charAt(0).toUpperCase()+v.substring(1)}function E(h){return h.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},52216:(Y,O,e)=>{"use strict";e.d(O,{TL:()=>f,Xt:()=>t,lu:()=>o});function t({searchWords:d,textToHighlight:r}){const c=[];for(const a of d)c.push(...o(r,a));return c}const n=d=>d.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function o(d,r){if(!d||!r)return[];const c=[],{cleaned:a,flags:u}=f(n(r));let i;try{i=new RegExp(`(?:${a})`,u)}catch{return c}return d.replace(i,(p,...g)=>{if(p){const y=g[g.length-2];c.push({text:p,start:y,length:p.length,end:y+p.length})}return""}),c}const s="-",l=/\(\?([ims-]+)\)/g;function f(d){const r=new Set(["g"]);return{cleaned:d.replace(l,(a,u)=>{const i=u.startsWith(s);for(let p=0;p<u.length;++p){const g=u.charAt(p);i||u.charAt(p-1)===s?r.delete(g):g!==s&&r.add(g)}return""}),flags:Array.from(r).join("")}}},5680:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{alpha:()=>g,asHexString:()=>f,asRgbString:()=>d,darken:()=>y,decomposeColor:()=>c,emphasize:()=>p,getContrastRatio:()=>u,getLuminance:()=>i,hexToRgb:()=>o,hslToRgb:()=>r,lighten:()=>E,recomposeColor:()=>a,rgbToHex:()=>l});var t=e(28550);function n(h,v=0,C=1){return Math.min(Math.max(v,h),C)}function o(h){h=h.slice(1);const v=new RegExp(`.{1,${h.length>=6?2:1}}`,"g");let C=h.match(v);return C&&C[0].length===1&&(C=C.map(m=>m+m)),C?`rgb${C.length===4?"a":""}(${C.map((m,D)=>D<3?parseInt(m,16):Math.round(parseInt(m,16)/255*1e3)/1e3).join(", ")})`:""}function s(h){const v=h.toString(16);return v.length===1?`0${v}`:v}function l(h){if(h.indexOf("#")===0)return h;const{values:v}=c(h);return`#${v.map(C=>s(C)).join("")}`}function f(h){if(h[0]==="#")return h;const v=(0,t.Z)(h);return v.getAlpha()===1?v.toHexString():v.toHex8String()}function d(h){return h.startsWith("rgb")?h:(0,t.Z)(h).toRgbString()}function r(h){const v=c(h),{values:C}=v,m=C[0],D=C[1]/100,P=C[2]/100,b=D*Math.min(P,1-P),M=(T,S=(T+m/30)%12)=>P-b*Math.max(Math.min(S-3,9-S,1),-1);let x="rgb";const A=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return v.type==="hsla"&&(x+="a",A.push(C[3])),a({type:x,values:A})}function c(h){if(typeof h!="string")return h;if(h.charAt(0)==="#")return c(o(h));const v=h.indexOf("("),C=h.substring(0,v);if(["rgb","rgba","hsl","hsla","color"].indexOf(C)===-1)throw new Error(`Unsupported '${h}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let m=h.substring(v+1,h.length-1),D;if(C==="color"){if(m=m.split(" "),D=m.shift(),m.length===4&&m[3].charAt(0)==="/"&&(m[3]=m[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(D)===-1)throw new Error(`Unsupported ${D} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else m=m.split(",");return m=m.map(P=>parseFloat(P)),{type:C,values:m,colorSpace:D}}function a(h){const{type:v,colorSpace:C}=h;let m=h.values;return v.indexOf("rgb")!==-1?m=m.map((D,P)=>P<3?parseInt(D,10):D):v.indexOf("hsl")!==-1&&(m[1]=`${m[1]}%`,m[2]=`${m[2]}%`),v.indexOf("color")!==-1?m=`${C} ${m.join(" ")}`:m=`${m.join(", ")}`,`${v}(${m})`}function u(h,v,C){const m=i(h),D=i(v,C);return(Math.max(m,D)+.05)/(Math.min(m,D)+.05)}function i(h,v){const C=c(h);let m=C.type==="hsl"?c(r(h)).values:C.values;if(v&&C.type==="rgba"){const P=c(v),b=m[3];m[0]=m[0]*b+P.values[0]*(1-b),m[1]=m[1]*b+P.values[1]*(1-b),m[2]=m[2]*b+P.values[2]*(1-b)}const D=m.map(P=>(C.type!=="color"&&(P/=255),P<=.03928?P/12.92:((P+.055)/1.055)**2.4));return Number((.2126*D[0]+.7152*D[1]+.0722*D[2]).toFixed(3))}function p(h,v=.15){return i(h)>.5?y(h,v):E(h,v)}function g(h,v){if(h==="")return"#000000";if(v=n(v),h[0]==="#"){if(h.length===9)h=h.substring(0,7);else if(h.length<=5){let m="#";for(let D=1;D<4;D++)m+=h[D]+h[D];h=m}return h+Math.round(v*255).toString(16).padStart(2,"0")}else{if(h[3]==="(")return h.replace(")",`, ${v})`);if(h[4]==="(")return h.substring(0,h.lastIndexOf(","))+`, ${v})`}const C=c(h);return C.type==="color"?C.values[3]=`/${v}`:C.values[3]=v,a(C)}function y(h,v){const C=c(h);if(v=n(v),C.type.indexOf("hsl")!==-1)C.values[2]*=1-v;else if(C.type.indexOf("rgb")!==-1||C.type.indexOf("color")!==-1)for(let m=0;m<3;m+=1)C.values[m]*=1-v;return a(C)}function E(h,v){const C=c(h);if(v=n(v),C.type.indexOf("hsl")!==-1)C.values[2]+=(100-C.values[2])*v;else if(C.type.indexOf("rgb")!==-1)for(let m=0;m<3;m+=1)C.values[m]+=(255-C.values[m])*v;else if(C.type.indexOf("color")!==-1)for(let m=0;m<3;m+=1)C.values[m]+=(1-C.values[m])*v;return a(C)}},21544:(Y,O,e)=>{"use strict";e.d(O,{j:()=>B});function t(){const L=["xs","sm","md","lg","xl","xxl"],N="px",z={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function G(V){return`@media (min-width:${typeof V=="number"?V:z[V]}${N})`}function I(V){return`@media (max-width:${(typeof V=="number"?V:z[V])-5/100}${N})`}return{values:z,up:G,down:I,keys:L,unit:N}}var n=e(82897),o=e(5680);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class l{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class f{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function d(K){const L=new l,N=new f,z=(K.mode??"dark")==="dark"?L:N,{primary:G=z.primary,secondary:I=z.secondary,info:V=z.info,warning:H=z.warning,success:Q=z.success,error:oe=z.error,tonalOffset:se=z.tonalOffset,hoverFactor:ie=z.hoverFactor,contrastThreshold:j=z.contrastThreshold,...de}=K;function ce(le,q=j){return(0,o.getContrastRatio)(L.text.maxContrast,le,z.background.primary)>=q?L.text.maxContrast:N.text.maxContrast}const ee=({color:le,name:q})=>{if(le={...le,name:q},!le.main)throw new Error(`Missing main color for ${q}`);return le.text||(le.text=le.main),le.border||(le.border=le.text),le.shade||(le.shade=z.mode==="light"?(0,o.darken)(le.main,se):(0,o.lighten)(le.main,se)),le.transparent||(le.transparent=(0,o.alpha)(le.main,.15)),le.contrastText||(le.contrastText=ce(le.main)),le};return(0,n.merge)({...z,primary:ee({color:G,name:"primary"}),secondary:ee({color:I,name:"secondary"}),info:ee({color:V,name:"info"}),error:ee({color:oe,name:"error"}),success:ee({color:Q,name:"success"}),warning:ee({color:H,name:"warning"}),getContrastText:ce,emphasize:(le,q)=>(0,o.emphasize)(le,q??ie)},de)}function r(K,L){const N={padding:1,headerHeight:4,background:K.background.primary,borderColor:K.border.weak,boxShadow:"none"},z={borderColor:K.border.medium,borderHover:K.border.strong,text:K.text.primary,background:K.mode==="dark"?K.background.canvas:K.background.primary};return{height:{sm:3,md:4,lg:6},input:z,panel:N,dropdown:{background:z.background},tooltip:{background:K.background.secondary,text:K.text.primary},dashboard:{background:K.background.canvas,padding:1},overlay:{background:K.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:K.warning.contrastText,background:K.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:K.emphasize(K.background.primary,.03)}}}function c(K){return K.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function a(K){const L=K.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:G=>`${(G??1)*L}px`}}function u(K={}){const{gridSize:L=8}=K,N=G=>typeof G=="string"?G:G*L,z=(...G)=>(G.length===0&&(G[0]=1),G.map(I=>{const V=N(I);return typeof V=="number"?`${V}px`:V}).join(" "));return z.gridSize=L,z}const i={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function g(K=["all"],L={}){const{duration:N=p.standard,easing:z=i.easeInOut,delay:G=0}=L;return(Array.isArray(K)?K:[K]).map(I=>`${I} ${typeof N=="string"?N:E(N)} ${z} ${typeof G=="string"?G:E(G)}`).join(",")}function y(K){if(!K)return 0;const L=K/36;return Math.round((4+15*L**.25+L/5)*10)}function E(K){return`${Math.round(K)}ms`}function h(){return{create:g,duration:p,easing:i,getAutoHeightDuration:y}}const v='"Inter", "Helvetica", "Arial", sans-serif',C="'Roboto Mono', monospace";function m(K,L={}){const{fontFamily:N=v,fontFamilyMonospace:z=C,fontSize:G=14,fontWeightLight:I=300,fontWeightRegular:V=400,fontWeightMedium:H=500,fontWeightBold:Q=500,htmlFontSize:oe=14}=L,se=G/14,ie=ee=>`${ee/oe*se}rem`,j=(ee,le,q,fe,Z)=>{if(q%2!==0||le%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:N,fontWeight:ee,fontSize:ie(le),lineHeight:q/le,...N===v?{letterSpacing:`${D(fe/le)}em`}:{},...Z}},de={h1:j(V,28,32,-.25),h2:j(V,24,28,0),h3:j(V,22,24,0),h4:j(V,18,22,.25),h5:j(V,16,22,0),h6:j(H,14,22,.15),body:j(V,G,22,.15),bodySmall:j(V,12,18,.15)};return{htmlFontSize:oe,pxToRem:ie,fontFamily:N,fontFamilyMonospace:z,fontSize:G,fontWeightLight:I,fontWeightRegular:V,fontWeightMedium:H,fontWeightBold:Q,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...de}}function D(K){return Math.round(K*1e5)/1e5}var P=e(33536);function b(K){const L={name:"Grafana Default",typography:{fontFamily:{sansSerif:K.typography.fontFamily,monospace:K.typography.fontFamilyMonospace},size:{base:`${K.typography.fontSize}px`,xs:K.typography.size.xs,sm:K.typography.size.sm,md:K.typography.size.md,lg:K.typography.size.lg},heading:{h1:K.typography.h1.fontSize,h2:K.typography.h2.fontSize,h3:K.typography.h3.fontSize,h4:K.typography.h4.fontSize,h5:K.typography.h5.fontSize,h6:K.typography.h6.fontSize},weight:{light:K.typography.fontWeightLight,regular:K.typography.fontWeightRegular,semibold:K.typography.fontWeightMedium,bold:K.typography.fontWeightBold},lineHeight:{xs:K.typography.bodySmall.lineHeight,sm:K.typography.bodySmall.lineHeight,md:K.typography.body.lineHeight,lg:K.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${K.breakpoints.values.xs}px`,sm:`${K.breakpoints.values.sm}px`,md:`${K.breakpoints.values.md}px`,lg:`${K.breakpoints.values.lg}px`,xl:`${K.breakpoints.values.xl}px`,xxl:`${K.breakpoints.values.xxl}px`},spacing:{base:K.spacing.gridSize,insetSquishMd:K.spacing(.5,1),d:K.spacing(2),xxs:K.spacing(.25),xs:K.spacing(.5),sm:K.spacing(1),md:K.spacing(2),lg:K.spacing(3),xl:K.spacing(4),gutter:K.spacing(4),formSpacingBase:K.spacing.gridSize,formMargin:`${K.spacing.gridSize*4}px`,formFieldsetMargin:`${K.spacing.gridSize*2}px`,formInputHeight:K.spacing.gridSize*4,formButtonHeight:K.spacing.gridSize*4,formInputPaddingHorizontal:`${K.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${K.spacing.gridSize/2}px`,formInputMargin:`${K.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${K.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:K.shape.borderRadius(1),md:K.shape.borderRadius(2),lg:K.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:K.spacing.gridSize*K.components.height.sm,md:K.spacing.gridSize*K.components.height.md,lg:K.spacing.gridSize*K.components.height.lg},panelPadding:K.components.panel.padding*K.spacing.gridSize,panelHeaderHeight:K.spacing.gridSize*K.components.panel.headerHeight,zIndex:K.zIndex},N={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},z={bg1:K.colors.background.primary,bg2:K.colors.background.secondary,bg3:K.colors.action.hover,dashboardBg:K.colors.background.canvas,bgBlue1:K.colors.primary.main,bgBlue2:K.colors.primary.shade},G={border1:K.colors.border.weak,border2:K.colors.border.medium,border3:K.colors.border.strong},I={textStrong:K.colors.text.maxContrast,textHeading:K.colors.text.primary,text:K.colors.text.primary,textSemiWeak:K.colors.text.secondary,textWeak:K.colors.text.secondary,textFaint:K.colors.text.disabled,textBlue:K.colors.primary.text},V={formLabel:K.colors.text.primary,formDescription:K.colors.text.secondary,formInputBg:K.components.input.background,formInputBgDisabled:K.colors.action.disabledBackground,formInputBorder:K.components.input.borderColor,formInputBorderHover:K.components.input.borderHover,formInputBorderActive:K.colors.primary.border,formInputBorderInvalid:K.colors.error.border,formInputPlaceholderText:K.colors.text.disabled,formInputText:K.components.input.text,formInputDisabledText:K.colors.action.disabledText,formFocusOutline:K.colors.primary.main,formValidationMessageText:K.colors.error.contrastText,formValidationMessageBg:K.colors.error.main};return{...L,type:K.colors.mode==="dark"?P.Q.Dark:P.Q.Light,isDark:K.isDark,isLight:K.isLight,name:K.name,palette:{...N,brandPrimary:N.orange,brandSuccess:K.colors.success.main,brandWarning:K.colors.warning.main,brandDanger:K.colors.error.main,queryRed:K.colors.error.text,queryGreen:K.colors.success.text,queryPurple:"#fe85fc",queryOrange:N.orange,online:K.colors.success.main,warn:K.colors.success.main,critical:K.colors.success.main},colors:{...z,...G,...V,...I,bodyBg:K.colors.background.canvas,panelBg:K.components.panel.background,panelBorder:K.components.panel.borderColor,pageHeaderBg:K.colors.background.canvas,pageHeaderBorder:K.colors.background.canvas,dropdownBg:V.formInputBg,dropdownShadow:N.black,dropdownOptionHoverBg:z.bg2,link:K.colors.text.primary,linkDisabled:K.colors.text.disabled,linkHover:K.colors.text.maxContrast,linkExternal:K.colors.text.link},shadows:{listItem:"none"},visualization:K.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var x=e(53768);function A(K){const L=K.mode==="light"?S():T(),N={};for(const I of L)for(const V of I.shades)if(N[V.name]=V.color,V.aliases)for(const H of V.aliases)N[H]=V.color;N.transparent="rgba(0,0,0,0)",N["panel-bg"]=K.background.primary,N.text=K.text.primary;const z=I=>{if(!I)return x.R;const V=N[I];if(V)return V;if(I[0]==="#"||I.indexOf("rgb")>-1)return I;const H=R[I.toLowerCase()];return H?(N[I]=H,H):I},G=U();return{hues:L,palette:G,getColorByName:z}}function T(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function S(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function U(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const R={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},F={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function B(K={}){const{colors:L={},spacing:N={},shape:z={},typography:G={}}=K,I=d(L),V=t(),H=u(N),Q=a(z),oe=m(I,G),se=c(I),ie=h(),j=r(I,se),de=A(I),ce={name:I.mode==="dark"?"Dark":"Light",isDark:I.mode==="dark",isLight:I.mode==="light",colors:I,breakpoints:V,spacing:H,shape:Q,components:j,typography:oe,shadows:se,transitions:ie,visualization:de,zIndex:{...F},flags:{}};return{...ce,v1:b(ce)}}},99358:(Y,O,e)=>{"use strict";e.d(O,{j:()=>t.j,r:()=>n});var t=e(21544),n=e(5680)},33750:(Y,O,e)=>{"use strict";e.d(O,{Kx:()=>d,TB:()=>r,gz:()=>f,uP:()=>c});var t=e(82897),n=e.n(t),o=e(52666),s=e(99098),l=e(53908),f=(h=>(h.sum="sum",h.max="max",h.min="min",h.logmin="logmin",h.mean="mean",h.variance="variance",h.stdDev="stdDev",h.last="last",h.first="first",h.count="count",h.range="range",h.diff="diff",h.diffperc="diffperc",h.delta="delta",h.step="step",h.firstNotNull="firstNotNull",h.lastNotNull="lastNotNull",h.changeCount="changeCount",h.distinctCount="distinctCount",h.allIsZero="allIsZero",h.allIsNull="allIsNull",h.allValues="allValues",h.uniqueValues="uniqueValues",h))(f||{});function d(h){const{field:v,reducers:C}=h;if(!v||!C||C.length<1)return{};if(v.state?.calcs){const A=[];for(const T of C)v.state.calcs.hasOwnProperty(T)||A.push(T);if(A.length<1)return{...v.state.calcs}}v.state||(v.state={});const m=r.list(C);if(v.values.length<1){const A={...v.state.calcs};for(const T of m)A[T.id]=T.emptyInputResult!==null?T.emptyInputResult:null;return v.state.calcs=A}const{nullValueMode:P}=v.config,b=P===o.Gl.Ignore,M=P===o.Gl.AsZero;if(m.length===1&&m[0].reduce){const A=m[0].reduce(v,b,M);return v.state.calcs={...v.state.calcs,...A},A}let x=c(v,b,M);for(const A of m)!x.hasOwnProperty(A.id)&&A.reduce&&(x={...x,...A.reduce(v,b,M)});return v.state.calcs={...v.state.calcs,...x},x}const r=new l.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:p},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:i},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:u},{id:"first",name:"First",description:"First Value",standard:!0,reduce:a},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:g},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:g},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:E},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:h=>({allValues:h.values})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:h=>({uniqueValues:[...new Set(h.values)]})}]);function c(h,v,C){const m={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},D=h.values;m.count=v?D.length:D.filter(b=>b!=null).length;const P=h.type===s.fS.number||s.fS.time;for(let b=0;b<D.length;b++){let M=D[b];if(b===0&&(m.first=M),m.last=M,M===null){if(v)continue;C&&(M=0)}if(M!=null){const x=m.firstNotNull===null;if(x&&(m.firstNotNull=M),P){if(m.sum+=M,m.allIsNull=!1,m.nonNullCount++,!x){const A=M-m.lastNotNull;m.step>A&&(m.step=A),m.lastNotNull>M?(m.previousDeltaUp=!1,b===D.length-1&&(m.delta+=M)):(m.previousDeltaUp?m.delta+=A:m.delta+=M,m.previousDeltaUp=!0)}M>m.max&&(m.max=M),M<m.min&&(m.min=M),M<m.logmin&&M>0&&(m.logmin=M)}M!==0&&(m.allIsZero=!1),m.lastNotNull=M}}return m.max===-Number.MAX_VALUE&&(m.max=null),m.min===Number.MAX_VALUE&&(m.min=null),m.step===Number.MAX_VALUE&&(m.step=null),m.nonNullCount>0&&(m.mean=m.sum/m.nonNullCount),m.allIsNull&&(m.allIsZero=!1),m.max!==null&&m.min!==null&&(m.range=m.max-m.min),(0,t.isNumber)(m.firstNotNull)&&(0,t.isNumber)(m.lastNotNull)&&(m.diff=m.lastNotNull-m.firstNotNull),(0,t.isNumber)(m.firstNotNull)&&(0,t.isNumber)(m.diff)&&(m.diffperc=m.diff/m.firstNotNull),m}function a(h,v,C){return{first:h.values[0]}}function u(h,v,C){const m=h.values;for(let D=0;D<m.length;D++){const P=m[D];if(P!=null&&P!==void 0)return{firstNotNull:P}}return{firstNotNull:null}}function i(h,v,C){const m=h.values;return{last:m[m.length-1]}}function p(h,v,C){const m=h.values;let D=m.length-1;for(;D>=0;){const P=m[D--];if(P!=null&&P!==void 0)return{lastNotNull:P}}return{lastNotNull:null}}function g(h,v,C){if(!(h.type===s.fS.number||h.type===s.fS.time))return{variance:0,stdDev:0};let m=0,D=0,P=0;const b=h.values;for(let M=0;M<b.length;M++){const x=b[M];if(x!=null){P++;let A=D;D+=(x-A)/P,m+=(x-A)*(x-D)}}if(P>0){const M=m/P;return{variance:M,stdDev:Math.sqrt(M)}}return{variance:0,stdDev:0}}function y(h,v,C){const m=h.values;let D=0,P=!0,b=null;for(let M=0;M<m.length;M++){let x=m[M];if(x===null){if(v)continue;C&&(x=0)}!P&&b!==x&&D++,P=!1,b=x}return{changeCount:D}}function E(h,v,C){const m=h.values,D=new Set;for(let P=0;P<m.length;P++){let b=m[P];if(b===null){if(v)continue;C&&(b=0)}D.add(b)}return{distinctCount:D.size}}},13095:(Y,O,e)=>{"use strict";e.d(O,{Ac:()=>o.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>f.H,IG:()=>o.IG,JP:()=>c._9,J_:()=>u.J_,Jz:()=>a.Jz,Kx:()=>l.Kx,Ls:()=>o.Ls,Ok:()=>a.Ok,Op:()=>a.Op,TB:()=>l.TB,U8:()=>o.U8,UO:()=>a.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>r.Ys,Ze:()=>d.Z,Zi:()=>a.Zi,b9:()=>o.b9,cO:()=>a.cO,gY:()=>a.gY,gz:()=>l.gz,kl:()=>a.kl,lP:()=>c.lP,mB:()=>a.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>a.py,qr:()=>a.qr,sq:()=>o.sq,uP:()=>l.uP,wL:()=>a.wL,zM:()=>a.zM});var t=e(90748),n=e(13512),o=e(50035),s=e(50928),l=e(33750),f=e(13946),d=e(2653),r=e(73567),c=e(17587),a=e(75133),u=e(49052)},50035:(Y,O,e)=>{"use strict";e.d(O,{Ac:()=>g,IG:()=>v,Ls:()=>p,U8:()=>y,b9:()=>h,sq:()=>E});var t=e(53908),n=e(60096),o=e(11733),s=e(73567),l=e(33369),f=e(46933),d=e(71586),r=e(25249),c=e(16176),a=e(97792),u=e(88254),i=e(66088);const p=new t.B(()=>[...(0,l.Ty)(),...(0,n.N)(),...(0,s.Lk)(),...(0,d.z)(),o.b]),g=new t.B(()=>[...(0,l.fX)(),...(0,s.cC)(),...(0,f.n)()]),y=new t.B(()=>[...(0,c.a)(),...(0,a.H)(),...(0,r.T)(),...(0,u.G)(),...(0,i.G)()]);function E(C){const m=p.get(C.id);if(!m)throw new Error("Unknown field matcher: "+C.id);return m.get(C.options)}function h(C){const m=g.get(C.id);if(!m)throw new Error("Unknown frame matcher: "+C.id);return m.get(C.options)}function v(C){const m=y.get(C.id);if(!m)throw new Error("Unknown value matcher: "+C.id);return m.get(C.options)}},73567:(Y,O,e)=>{"use strict";e.d(O,{Lk:()=>g,Ys:()=>l,cC:()=>y});var t=e(30471),n=e(79086),o=e(99098),s=e(90748),l=(E=>(E.exclude="exclude",E.include="include",E))(l||{});const f={id:s.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:E=>{const v=r(new Set([E]));return(C,m,D)=>E===C.name||E===(0,t.CZ)(C,m,D)||Boolean(v&&v(C,m,D))},getOptionsDisplayText:E=>`Field name: ${E}`},d={id:s.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:E=>{const{names:h,mode:v="include"}=E,C=new Set(h??[]),m=r(C),D=(P,b,M)=>C.has(P.name)||C.has((0,t.CZ)(P,b,M))||Boolean(m&&m(P,b,M));return v==="exclude"?(P,b,M)=>!D(P,b,M):D},getOptionsDisplayText:E=>{const{names:h,mode:v}=E,C=(h??[]).join(", ");return v==="exclude"?`All except: ${C}`:`All of: ${C}`}};function r(E){let h;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(E.has(o.M5)?h=(C,m)=>Boolean(C.labels)&&C.labels?.__name__===C.name:(E.has("Time")||E.has("time"))&&(h=(C,m)=>m.meta?.typeVersion==null&&C.type===o.fS.time)),h}const c={id:s.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:E=>{const h=i(E);return(v,C,m)=>{const D=(0,t.CZ)(v,C,m);return!!h&&h.test(D)}},getOptionsDisplayText:E=>`Field name by pattern: ${E}`},a={id:s.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:E=>(h,v,C)=>v.refId===E,getOptionsDisplayText:E=>`Math all fields returned by query with reference ID: ${E}`},u={id:s.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:E=>{const h=c.get(E?.pattern||""),v=d.get({mode:"include",names:E?.names??[]});return(C,m,D)=>v(C,m,D)||h(C,m,D)},getOptionsDisplayText:E=>{const h=E?.pattern??"",v=E?.names?.join(",")??"";return`Field name by pattern: ${h} or names: ${v}`}},i=E=>{if(E)try{return(0,n.jO)(E)}catch(h){console.error(h);return}},p={id:s.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:E=>{const h=(0,n.jO)(E);return v=>h.test(v.name||"")},getOptionsDisplayText:E=>`Frame name: ${E}`};function g(){return[f,c,d,u,a]}function y(){return[p]}},33369:(Y,O,e)=>{"use strict";e.d(O,{Qw:()=>p,Ty:()=>C,fX:()=>m,m3:()=>a});var t=e(99098),n=e(50035),o=e(90748);const s={id:o.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(b=>(0,n.sq)(b));return(b,M,x)=>{for(const A of P)if(A(b,M,x))return!0;return!1}},getOptionsDisplayText:D=>{let P="";for(const b of D){P.length>0&&(P+=" OR ");const M=n.Ls.get(b.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return P}},l={id:o.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(b=>(0,n.b9)(b));return b=>{for(const M of P)if(M(b))return!0;return!1}},getOptionsDisplayText:D=>{let P="";for(const b of D){P.length>0&&(P+=" OR ");const M=n.Ac.get(b.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return P}},f={id:o.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(b=>(0,n.sq)(b));return(b,M,x)=>{for(const A of P)if(!A(b,M,x))return!1;return!0}},getOptionsDisplayText:D=>{let P="";for(const b of D){P.length>0&&(P+=" AND ");const M=n.Ls.get(b.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return P}},d={id:o.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(b=>(0,n.b9)(b));return b=>{for(const M of P)if(!M(b))return!1;return!0}},getOptionsDisplayText:D=>{let P="";for(const b of D){P.length>0&&(P+=" AND ");const M=n.Ac.get(b.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return P}},r={id:o.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:D=>{const P=(0,n.sq)(D);return(b,M,x)=>!P(b,M,x)},getOptionsDisplayText:D=>{const P=n.Ls.get(D.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(D.options):P.name)}},c={id:o.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:D=>{const P=(0,n.b9)(D);return b=>!P(b)},getOptionsDisplayText:D=>{const P=n.Ac.get(D.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(D.options):P.name)}},a=D=>!0,u=D=>!0,i=D=>!1,p=D=>D.type!==t.fS.time,g=D=>!1,y={id:o.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:D=>a,getOptionsDisplayText:D=>"Always"},E={id:o.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:D=>u,getOptionsDisplayText:D=>"Always"},h={id:o.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:D=>i,getOptionsDisplayText:D=>"Never"},v={id:o.Ff.neverMatch,name:"No Frames",description:"Never Match",get:D=>g,getOptionsDisplayText:D=>"Never"};function C(){return[s,f,r,y,h]}function m(){return[l,d,c,E,v]}},2653:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(53908);const n=new t.B},13946:(Y,O,e)=>{"use strict";e.d(O,{H:()=>c});var t=e(59980),n=e(39859),o=e(9471),s=e(50035),l=e(2653);const f=(u,i)=>p=>{const g=l.Z.get(u.id);if(!g)return p;const E={...g.transformation.defaultOptions??{},...u.options},h=u.filter?.options?(0,s.b9)(u.filter):void 0;return p.pipe((0,n.z)(v=>(0,t.of)(d(v,h)).pipe(g.transformation.operator(E,i),r(v,g,h))))};function d(u,i){return i?u.filter(p=>i(p)):u}const r=(u,i,p)=>g=>g.pipe((0,o.U)(y=>{if(y===u)return y;for(const E of y)E.meta||(E.meta={}),E.meta.transformations?E.meta.transformations=[...E.meta.transformations,i.id]:E.meta.transformations=[i.id];if(p){let E=0;const h=u.filter((v,C)=>{const m=!p(v);return m&&!E&&(E=C),m});h.length&&y.splice(E,0,...h)}return y}));function c(u,i,p){const g=(0,t.of)(i);if(!u.length)return g;const y=[],E=p??{interpolate:h=>h};for(let h=0;h<u.length;h++){const v=u[h];if(a(v))y.push(v(E));else{if(v.disabled)continue;y.push(f(v,E))}}return g.pipe.apply(g,y)}function a(u){return typeof u=="function"}},50928:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>fe});var t=e(62294),n=e(32302),o=e(49052),s=e(44449),l=e(51907),f=e(98294),d=e(90748),r=e(13512);const c={id:r.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(Z,ne)=>re=>{const ve={};return Z.include&&(ve.include={id:d.E4.byRefId,options:Z.include}),Z.exclude&&(ve.exclude={id:d.E4.byRefId,options:Z.exclude}),re.pipe(l.u.operator(ve,ne))}};var a=e(91603),u=e(61171),i=e(9471),p=e(53678),g=e(30471),y=e(90834),E=e(99098),h=e(50035);const v="Time",C="Time",m="Value",D=y.U.Empty,P=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,b={id:r.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:v,rowField:C,valueField:m},operator:Z=>ne=>ne.pipe((0,i.U)(re=>{const ve=Z.columnField||v,me=Z.rowField||C,Ie=Z.valueField||m,Ge=Z.emptyValue||D;if(re.length!==1)return re;const gt=re[0],Te=x(gt,ve),Le=x(gt,me),Ye=x(gt,Ie),it=`${me}\\${ve}`;if(!Te||!Le||!Ye)return re;const ht=M(Te.values),Re=M(Le.values),ye={};for(let be=0;be<Ye.values.length;be++){const We=Te.values[be],Qe=Le.values[be],mt=Ye.values[be];ye[We]||(ye[We]={}),ye[We][Qe]=mt}const Ce=new p.v;Ce.addField({name:it,values:Re,type:E.fS.string});for(const be of ht){let We=[];for(const Qe of Re){const mt=ye[be][Qe]??A(Ge);We.push(mt)}P&&typeof be=="number"&&(Ye.config={...Ye.config,displayNameFromDS:void 0}),Ce.addField({name:be.toString(),values:We,config:Ye.config,type:Ye.type})}return[Ce]}))};function M(Z){const ne=new Set;for(let re=0;re<Z.length;re++)ne.add(Z[re]);return Array.from(ne)}function x(Z,ne){for(let re=0;re<Z.fields.length;re++){const ve=Z.fields[re];let me;if(P?me=h.Ls.get(d.mi.byName).get(ne)(ve,Z,[Z]):me=ne===(0,g.CZ)(ve),me)return ve}return null}function A(Z){switch(Z){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var T=e(75133),S=e(13221),U=e(31568);const R=10,F={id:r.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:R},operator:Z=>ne=>ne.pipe((0,i.U)(re=>{const ve=Z.limitField||R;return re.map(me=>me.length>ve?{...me,fields:me.fields.map(Ie=>({...Ie,values:Ie.values.slice(0,ve)})),length:ve}:me)}))};var B=e(18820),K=e(43137),L=e(74700);const N={id:r.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:Z=>ne=>ne.pipe((0,i.U)(re=>{const ve=z(Z.renameByName);return!Array.isArray(re)||re.length===0?re:re.map(me=>({...me,fields:ve(me)}))}))},z=Z=>ne=>!Z||Object.keys(Z).length===0?ne.fields:ne.fields.map(re=>{const ve=(0,g.CZ)(re,ne),me=Z[ve];return typeof me!="string"||me.length===0?re:{...re,config:{...re.config,displayName:me},state:{...re.state,displayName:me}}}),G={id:r.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(Z,ne)=>re=>re.pipe(f.w.operator({exclude:{names:I(Z.excludeByName)}},ne),L.t.operator(Z,ne),N.operator(Z,ne))},I=Z=>Z?Object.keys(Z).filter(ne=>Z[ne]):[];var V=e(27742),H=e(79086);const Q={id:r.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:Z=>ne=>ne.pipe((0,i.U)(re=>!Array.isArray(re)||re.length===0?re:re.map(oe(Z))))},oe=Z=>ne=>{const re=(0,H.jO)(Z.regex),ve=ne.fields.map(me=>{const Ie=(0,g.CZ)(me,ne);if(!re.test(Ie))return me;const Ge=Ie.replace(re,Z.renamePattern);return{...me,config:{...me.config,displayName:Ge},state:{...me.state,displayName:Ge}}});return{...ne,fields:ve}};var se=e(82897),ie=e(83881),j=e(19447);const de={id:r.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:Z=>ne=>ne.pipe((0,i.U)(re=>{if(!Array.isArray(re)||re.length<=1||!(0,j.xI)(re))return re;const ve={},me=new Set,Ie=new p.v,Ge={name:E.rN,values:[],config:{},type:E.fS.string};for(let gt=0;gt<re.length;gt++){const Te=re[gt];for(let Le=0;Le<Te.fields.length;Le++){const Ye=Te.fields[Le];if(Ye.type===E.fS.time){ve[gt]=Le,me.has(E.Ls)||(Ie.addField(ce(Ye,E.Ls)),Ie.addField(Ge),me.add(E.Ls));continue}me.has(E.M5)||(Ie.addField(ce(Ye,E.M5)),me.add(E.M5))}}for(let gt=0;gt<re.length;gt++){const Te=re[gt];for(let Le=0;Le<Te.length;Le++){const Ye=ve[gt],it=Ye===0?1:0;Ie.add({[E.Ls]:Te.fields[Ye].values[Le],[E.rN]:(0,g.nf)(Te),[E.M5]:Te.fields[it].values[Le]})}}return[(0,ie.aK)(Ie,0,!0)]}))},ce=(Z,ne)=>({...(0,se.omit)(Z,["values","state","labels","config","name"]),name:ne,values:[],config:{...(0,se.omit)(Z.config,["displayName","displayNameFromDS"])}}),ee={id:r.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:Z=>ne=>ne.pipe((0,i.U)(re=>!Array.isArray(re)||re.length===0||!Z?.sort?.length?re:le(re,Z.sort)))};function le(Z,ne){return Z.map(re=>{const ve=q(re,ne);return ve.length&&ve[0].index!=null?(0,ie.aK)(re,ve[0].index,ve[0].desc):re})}function q(Z,ne){return ne.map(re=>re.index!=null?re:{...re,index:Z.fields.findIndex(ve=>re.field===(0,g.CZ)(ve,Z))})}const fe={noopTransformer:K.d,filterFieldsTransformer:l.P,filterFieldsByNameTransformer:f.w,filterFramesTransformer:l.u,filterFramesByRefIdTransformer:c,filterByValueTransformer:a.JA,orderFieldsTransformer:L.t,organizeFieldsTransformer:G,reduceTransformer:V.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:S.M,seriesToColumnsTransformer:S.M,seriesToRowsTransformer:de,renameFieldsTransformer:N,labelsToFieldsTransformer:U.r,ensureColumnsTransformer:s.W,groupByTransformer:u.i,sortByTransformer:ee,mergeTransformer:B.R,renameByRegexTransformer:Q,histogramTransformer:T.Op,convertFieldTypeTransformer:o.mg,groupingToMatrixTransformer:b,limitTransformer:F}},62294:(Y,O,e)=>{"use strict";e.d(O,{U:()=>v,h:()=>P,ie:()=>y});var t=e(82897),n=e.n(t),o=e(9471),s=e(83881),l=e(30471),f=e(99098),d=e(52666),r=e(66392),c=e(33750),a=e(50035),u=e(90748),i=e(44449),p=e(13512),g=e(43137),y=(b=>(b.ReduceRow="reduceRow",b.BinaryOperation="binary",b.Index="index",b))(y||{});const E={reducer:c.gz.sum},h={left:"",operator:r.L.Add,right:""},v={id:p.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:c.gz.sum}},operator:(b,M)=>x=>{const A=b&&b.timeSeries!==!1?i.W.operator(null,M):g.d.operator({},M);return b.alias!=null&&(b.alias=M.interpolate(b.alias)),x.pipe(A,(0,o.U)(T=>{const S=b.mode??"reduceRow";let U;if(S==="reduceRow")U=C((0,t.defaults)(b.reduce,E),T);else if(S==="binary"){const R={...b.binary,left:M.interpolate(b.binary?.left),right:M.interpolate(b.binary?.right)};U=D((0,t.defaults)(R,h),T)}else if(S==="index")return T.map(R=>{const F={name:b.alias??"Row",type:f.fS.number,values:[...Array(R.length).keys()],config:{}};return{...R,fields:b.replaceFields?[F]:[...R.fields,F]}});return U?T.map(R=>{const F=U(R);if(!F)return R;const B={name:P(b),type:f.fS.number,config:{},values:F};let K=[];if(b.replaceFields){const{timeField:L}=(0,s.sV)(R);L&&b.timeSeries!==!1?K=[L,B]:K=[B]}else K=[...R.fields,B];return{...R,fields:K}}):T}))}};function C(b,M){let x=(0,a.sq)({id:u.mi.numeric});b.include&&b.include.length&&(x=(0,a.sq)({id:u.mi.byNames,options:{names:b.include}}));const A=c.TB.get(b.reducer);if(!A)throw new Error(`Unknown reducer: ${b.reducer}`);const T=A.reduce??c.uP,S=b.nullValueMode===d.Gl.Ignore,U=b.nullValueMode===d.Gl.AsZero;return R=>{const F=[];for(const N of R.fields)x(N,R,M)&&F.push(N.values);const B=F.length,K={name:"temp",values:new Array(B),type:f.fS.number,config:{}},L=[];for(let N=0;N<R.length;N++){for(let z=0;z<B;z++)K.values[z]=F[z][N];L.push(T(K,S,U)[b.reducer])}return L}}function m(b,M,x){if(!M)return;for(const T of b.fields)if(M===(0,l.CZ)(T,b,x))return T.type===f.fS.boolean?T.values.map(S=>S?1:0):T.values;const A=parseFloat(M);if(!isNaN(A))return new Array(b.length).fill(A)}function D(b,M){const x=r.n.getIfExists(b.operator);return A=>{const T=m(A,b.left,M),S=m(A,b.right,M);if(!T||!S||!x)return;const U=new Array(T.length);for(let R=0;R<U.length;R++)U[R]=x.operation(T[R],S[R]);return U}}function P(b){if(b.alias?.length)return b.alias;switch(b.mode){case"binary":{const{binary:M}=b;return`${M?.left??""} ${M?.operator??""} ${M?.right??""}`}case"reduceRow":{const M=c.TB.getIfExists(b.reduce?.reducer);if(M)return M.name}break;case"index":return"Row"}return"math"}},32302:(Y,O,e)=>{"use strict";e.d(O,{HO:()=>s,aE:()=>l});var t=e(9471),n=e(99098),o=e(13512),s=(d=>(d.Drop="drop",d.FieldName="field",d.Label="label",d))(s||{});const l={id:o.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:d=>r=>r.pipe((0,t.U)(c=>!Array.isArray(c)||c.length<2?c:[f(c,d)]))};function f(d,r){let c=!0,a=d[0].length;const u=r.frameNameLabel??"frame";let i=[];for(const p of d){a!==p.length&&(c=!1,a=Math.max(a,p.length));for(const g of p.fields){const y={...g};y.state=void 0,p.name&&(r.frameNameMode==="drop"||(r.frameNameMode==="label"?(y.labels={...g.labels},y.labels[u]=p.name):!y.name||y.name===n.M5?y.name=p.name:y.name=`${p.name} \xB7 ${g.name}`)),i.push(y)}}return c||(i=i.map(p=>{if(p.values.length===a)return p;const g=p.values;return g.length=a,{...p,values:g}})),{fields:i,length:a}}},49052:(Y,O,e)=>{"use strict";e.d(O,{J_:()=>E,mg:()=>d,p8:()=>c});var t=e(9471),n=e(29826),o=e(99098),s=e(50035),l=e(90748),f=e(13512);const d={id:f.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(v,C)=>m=>m.pipe((0,t.U)(D=>d.transformer(v,C)(D))),transformer:v=>C=>!Array.isArray(C)||C.length===0?C:r(v,C)??[]};function r(v,C){if(!v.conversions.length)return C;const m=C.map(D=>({...D}));for(const D of v.conversions){if(!D.targetField)continue;const P=s.Ls.get(l.mi.byName).get(D.targetField);for(const b of m)b.fields=b.fields.map(M=>P(M,b,m)?c(M,D):M)}return m}function c(v,C){switch(C.destinationType){case o.fS.time:return E(v,C.dateFormat);case o.fS.number:return i(v);case o.fS.string:return g(v,C.dateFormat);case o.fS.boolean:return p(v);case o.fS.enum:return h(v,C.enumConfig);case o.fS.other:return y(v);default:return v}}const a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function u(v,C){let m=C?{format:C}:void 0;const D=v.values.slice();let P=D.find(M=>M!=null),b=typeof P=="string"&&a.test(P);for(let M=0;M<D.length;M++)if(D[M]){let x=b?Date.parse(D[M]):(0,n.J)(D[M],m).valueOf();D[M]=Number.isFinite(x)?x:null}else D[M]=null;return{...v,type:o.fS.time,values:D}}function i(v){const C=v.values.slice(),m=C.some(D=>typeof D=="string");for(let D=0;D<C.length;D++){let P=C[D];m&&P!=null&&typeof P=="string"&&(P=P.replace(/,/g,""));const b=+P;C[D]=Number.isFinite(b)?b:null}return{...v,type:o.fS.number,values:C}}function p(v){const C=v.values.slice();for(let m=0;m<C.length;m++)C[m]=Boolean(!!C[m]);return{...v,type:o.fS.boolean,values:C}}function g(v,C){let m=v.values;switch(v.type){case o.fS.time:m=m.map(D=>(0,n.J)(D).format(C));break;case o.fS.other:m=m.map(D=>JSON.stringify(D));break;default:m=m.map(D=>`${D}`)}return{...v,type:o.fS.string,values:m}}function y(v){const C=v.values.slice();for(let m=0;m<C.length;m++)try{C[m]=JSON.parse(C[m])}catch{C[m]=null}return{...v,type:o.fS.other,values:C}}function E(v,C){const m=typeof v.values[0]=="number";return v.type===o.fS.time&&m?v:m?{...v,type:o.fS.time}:u(v,C)}function h(v,C){const m={...C},D=v.values.slice(),P=new Map;if(m.text)for(let b=0;b<m.text.length;b++)P.set(m.text[b],b);else m.text=[];for(let b=0;b<D.length;b++){const M=D[b];P.has(M)||(m.text[P.size]=M,P.set(M,P.size)),D[b]=P.get(M)}return{...v,config:{...v.config,type:{enum:m}},type:o.fS.enum,values:D}}},44449:(Y,O,e)=>{"use strict";e.d(O,{W:()=>l});var t=e(9471),n=e(83881),o=e(13512),s=e(13221);const l={id:o.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(d,r)=>c=>c.pipe((0,t.U)(a=>l.transformer(d,r)(a))),transformer:(d,r)=>c=>{const a=f(c);return c.length>1&&a?s.M.transformer({byField:a},r)(c):c}};function f(d){let r;for(const c of d){const{timeField:a}=(0,n.sV)(c);if(!a)return;if(!r)r=a.name;else if(r!==a.name)return}return r}},51907:(Y,O,e)=>{"use strict";e.d(O,{P:()=>l,u:()=>f});var t=e(9471),n=e(50035),o=e(13512),s=e(43137);const l={id:o.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(d,r)=>c=>!d.include&&!d.exclude?c.pipe(s.d.operator({},r)):(typeof d.include?.options=="string"?d.include.options=r.interpolate(d.include?.options):typeof d.include?.options?.pattern=="string"&&(d.include.options.pattern=r.interpolate(d.include?.options.pattern)),typeof d.exclude?.options=="string"?d.exclude.options=r.interpolate(d.exclude?.options):typeof d.exclude?.options?.pattern=="string"&&(d.exclude.options.pattern=r.interpolate(d.exclude?.options.pattern)),c.pipe((0,t.U)(a=>{const u=d.include?(0,n.sq)(d.include):null,i=d.exclude?(0,n.sq)(d.exclude):null,p=[];for(const g of a){const y=[];for(let h=0;h<g.fields.length;h++){const v=g.fields[h];if(i){if(i(v,g,a))continue;u||y.push(v)}u&&u(v,g,a)&&y.push(v)}if(!y.length)continue;const E={...g,fields:y};p.push(E)}return p})))},f={id:o.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(d,r)=>c=>!d.include&&!d.exclude?c.pipe(s.d.operator({},r)):c.pipe((0,t.U)(a=>{const u=d.include?(0,n.b9)(d.include):null,i=d.exclude?(0,n.b9)(d.exclude):null,p=[];for(const g of a){if(i){if(i(g))continue;u||p.push(g)}u&&u(g)&&p.push(g)}return p}))}},98294:(Y,O,e)=>{"use strict";e.d(O,{f:()=>l,w:()=>s});var t=e(90748),n=e(51907),o=e(13512);const s={id:o.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(f,d)=>r=>r.pipe(n.P.operator({include:l(f.include),exclude:l(f.exclude)},d))},l=f=>{if(!f)return;const{names:d,pattern:r}=f;if(!((!Array.isArray(d)||d.length===0)&&!r))return r?!Array.isArray(d)||d.length===0?{id:t.mi.byRegexp,options:r}:{id:t.mi.byRegexpOrNames,options:f}:{id:t.mi.byNames,options:{names:d}}}},91603:(Y,O,e)=>{"use strict";e.d(O,{ER:()=>d,JA:()=>r,PQ:()=>f});var t=e(9471),n=e(30471),o=e(50035),s=e(13512),l=e(43137),f=(u=>(u.exclude="exclude",u.include="include",u))(f||{}),d=(u=>(u.all="all",u.any="any",u))(d||{});const r={id:s.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(u,i)=>p=>{const g=u.filters,y=u.match==="all",E=u.type==="include";return!Array.isArray(g)||g.length===0?p.pipe(l.d.operator({},i)):p.pipe((0,t.U)(h=>{if(!Array.isArray(h)||h.length===0)return h;const v=new Set;for(const D of h){const P=a(D,h),b=c(g,P);for(let M=0;M<D.length;M++){if(v.has(M))continue;let x=!0;for(const A of b){const T=A(M,D,h);if(!y&&T){x=!0;break}if(y&&!T){x=!1;break}x=T}x&&v.add(M)}}const C=[],m=E?v.size:h[0].length-v.size;for(const D of h){const P=[];for(const b of D.fields){const M=[];for(let x=0;x<D.length;x++){if(E&&v.has(x)){M.push(b.values[x]);continue}if(!E&&!v.has(x)){M.push(b.values[x]);continue}}P.push({...b,values:M,state:{}})}C.push({...D,fields:P,length:m})}return C}))}},c=(u,i)=>{const p=()=>!1;return u.map(g=>{const y=i[g.fieldName]??-1;if(y<0)return console.warn(`[FilterByValue] Could not find index for field name: ${g.fieldName}`),p;const E=(0,o.IG)(g.config);return(h,v,C)=>E(h,v.fields[y],v,C)})},a=(u,i)=>u.fields.reduce((p,g,y)=>{const E=(0,n.CZ)(g,u,i);return p[E]=y,p},{})},61171:(Y,O,e)=>{"use strict";e.d(O,{i:()=>r,x:()=>d});var t=e(9471),n=e(83881),o=e(30471),s=e(99098),l=e(33750),f=e(13512),d=(i=>(i.aggregate="aggregate",i.groupBy="groupby",i))(d||{});const r={id:f.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:i=>p=>p.pipe((0,t.U)(g=>{if(!Object.keys(i.fields).find(h=>i.fields[h].operation==="groupby"))return g;const E=[];for(const h of g){const v=[];for(const D of h.fields)c(D,i)&&v.push(D);if(v.length===0)continue;const C=new Map;for(let D=0;D<h.length;D++){const P=String(v.map(M=>M.values[D])),b=C.get(P)??{};C.has(P)||C.set(P,b);for(let M of h.fields){const x=(0,o.CZ)(M);b[x]||(b[x]={name:x,type:M.type,config:{...M.config},values:[]}),b[x].values.push(M.values[D])}}const m=[];for(const D of v){const P=[],b=(0,o.CZ)(D);C.forEach(M=>{P.push(M[b].values[0])}),m.push({name:D.name,type:D.type,config:{...D.config},values:P})}for(const D of h.fields){if(!a(D,i))continue;const P=(0,o.CZ)(D),b=i.fields[P].aggregations,M={};C.forEach(x=>{const A=x[P],T=(0,l.Kx)({field:A,reducers:b});for(const S of b)Array.isArray(M[S])||(M[S]=[]),M[S].push(T[S])});for(const x of b){const A={name:`${P} (${x})`,values:M[x],type:s.fS.other,config:{}};A.type=u(x,D,A),m.push(A)}}E.push({fields:m,length:C.size})}return E}))},c=(i,p)=>{const g=(0,o.CZ)(i);return p?.fields[g]?.operation==="groupby"},a=(i,p)=>{const g=(0,o.CZ)(i);return p?.fields[g]?.operation==="aggregate"&&Array.isArray(p?.fields[g].aggregations)&&p?.fields[g].aggregations.length>0},u=(i,p,g)=>{switch(i){case l.gz.allIsNull:return s.fS.boolean;case l.gz.last:case l.gz.lastNotNull:case l.gz.first:case l.gz.firstNotNull:return p.type;default:return(0,n.fu)(g)??s.fS.string}}},75133:(Y,O,e)=>{"use strict";e.d(O,{Jz:()=>D,Ok:()=>y,Op:()=>p,UO:()=>P,Zi:()=>c,cO:()=>E,gY:()=>m,kl:()=>h,mB:()=>b,py:()=>i,qr:()=>v,wL:()=>g,zM:()=>x});var t=e(9471),n=e(6194),o=e(21544),s=e(39393),l=e(99098),f=e(56190),d=e(13512),r=e(17587);const c=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],a=[null],u=(A,T)=>A-T,i={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:d.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(A,T)=>S=>S.pipe((0,t.U)(U=>p.transformer(A,T)(U))),transformer:A=>T=>{if(!Array.isArray(T)||T.length===0)return T;const S=m(T,A);return S==null?[]:[x(S)]}},g="xMin";function y(A){return A===g||A==="BucketMin"}const E="xMax";function h(A){return A===E||A==="BucketMax"}function v(A){let T,S;const U=[];for(const R of A.fields)y(R.name)?T=R:h(R.name)?S=R:R.type===l.fS.number&&U.push(R);if(!S&&T&&T.values.length>1){let R=T.values,F=(0,f.O)(R[1]-R[0],6);S={...T,name:E,values:R.map(B=>B+F)}}if(!T&&S&&S?.values.length>1){let R=S.values,F=(0,f.O)(R[1]-R[0],6);T={...S,name:g,values:R.map(B=>B-F)}}if(T&&S&&U.length)return{xMin:T,xMax:S,counts:U}}const C=20;function m(A,T){let S=T?.bucketSize,U=T?.bucketOffset??0;if(!S||S<0){let I=[];for(const ie of A)for(const j of ie.fields)j.type===l.fS.number&&(I=I.concat(j.values));I=I.filter(ie=>ie!=null),I.sort((ie,j)=>ie-j);let V=1/0;if(I.length===1)V=1;else for(let ie=1;ie<I.length;ie++){let j=I[ie]-I[ie-1];j!==0&&(V=Math.min(V,j))}let H=I[0];const se=(I[I.length-1]-H)/C;for(let ie=0;ie<c.length;ie++){let j=c[ie];if(se<j&&j>=V){S=j;break}}}const R=I=>b(I-U,S)+U;let F=((""+S).match(/\.\d+$/)??["."])[0].length-1,B=[],K=[],L;for(const I of A)for(const V of I.fields)if(V.type===l.fS.number){let H=M(V.values,R,a,u);B.push(H),K.push({...V,config:{...V.config,unit:V.config.unit==="short"?"short":void 0}}),!L&&V.config.unit&&(L=V.config)}if(!K.length)return null;let N=(0,r.v_)(B);for(let I=1;I<N.length;I++){let V=N[I];for(let H=0;H<V.length;H++)V[H]==null&&(V[H]=0)}const z={name:g,values:N[0],type:l.fS.number,state:void 0,config:F===0?L??{}:{...L,decimals:F}},G={...z,name:E,values:N[0].map(I=>I+S)};if(T?.combine){const I=new Array(N[0].length).fill(0);for(let V=1;V<N.length;V++)for(let H=0;H<I.length;H++)I[H]+=N[V][H];K=[{...K[0],name:"count",values:I,type:l.fS.number,state:void 0}]}else K.forEach((I,V)=>{I.values=N[V+1]});return{xMin:z,xMax:G,counts:K}}function D(A,T){return Math.round(A/T)*T}function P(A,T){return Math.ceil(A/T)*T}function b(A,T){return Math.floor(A/T)*T}function M(A,T,S,U){let R=new Map;for(let L=0;L<A.length;L++){let N=A[L];N!=null&&(N=T(N));let z=R.get(N);z?z.count++:R.set(N,{value:N,count:1})}S&&S.forEach(L=>R.delete(L));let F=[...R.values()];U&&F.sort((L,N)=>U(L.value,N.value));let B=Array(F.length),K=Array(F.length);for(let L=0;L<F.length;L++)B[L]=F[L].value,K[L]=F[L].count;return[B,K]}function x(A,T){if(!A.xMin.display){const S=(0,n.U_)({field:A.xMin,theme:T??(0,o.j)()});A.xMin.display=S,A.xMax.display=S}return A.counts[0].display=(0,n.U_)({field:A.counts[0],theme:T??(0,o.j)()}),{length:A.xMin.values.length,meta:{type:s.P.Histogram},fields:[A.xMin,A.xMax,...A.counts]}}},13221:(Y,O,e)=>{"use strict";e.d(O,{M:()=>d,c:()=>f});var t=e(9471),n=e(50035),o=e(90748),s=e(13512),l=e(17587),f=(r=>(r.outer="outer",r.inner="inner",r))(f||{});const d={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(r,c)=>a=>a.pipe((0,t.U)(u=>d.transformer(r,c)(u))),transformer:r=>{let c;return a=>{if(a.length>1){r.byField&&!c&&(c=n.Ls.get(o.mi.byName).get(r.byField));const u=(0,l._9)({frames:a,joinBy:c,mode:r.mode});if(u)return[u]}return a}}}},17587:(Y,O,e)=>{"use strict";e.d(O,{Y3:()=>c,_9:()=>a,lP:()=>E,v_:()=>y});var t=e(39963),n=e(83881),o=e(99098),s=e(50035),l=e(90748),f=e(13221);function d(h){const{timeField:v}=(0,n.sV)(h[0]);if(v)return s.Ls.get(l.mi.firstTimeField).get({});let C=[];for(const m of h[0].fields)m.type===o.fS.number&&C.push(m.name);for(let m=1;m<h.length;m++){const D=[];for(const P of h[0].fields)P.type===o.fS.number&&D.push(P.name);C=C.filter(P=>!D.includes(P))}return s.Ls.get(l.mi.byName).get(C[0])}function r(h){return h.joinBy??d(h.frames)}function c(h,v){if(v>=0){let C=h.fields[v];C.type!==o.fS.string&&!E(C.values)&&(h=(0,n.aK)(h,v))}return h}function a(h){if(!h.frames?.length)return;if(h.frames.length===1){let b=h.frames[0],M=b;const x=r(h);let A=M.fields.findIndex(T=>x(T,M,h.frames));if(h.keepOriginIndices&&(M={...b,fields:b.fields.map((T,S)=>{const U={...T},R={frameIndex:0,fieldIndex:S};return U.state?U.state.origin=R:U.state={origin:R},U})},A>0)){const T=M.fields[A],S=M.fields.filter((U,R)=>R!==A);S.unshift(T),M.fields=S,A=0}if(A>=0&&(M=c(M,A)),h.keep){let T=M.fields.filter((S,U)=>U===A||h.keep(S,M,h.frames));b!==M?M.fields=T:M={...b,fields:T}}return M}const v=[],C=[],m=[],D=r(h);for(let b=0;b<h.frames.length;b++){const M=h.frames[b];if(!M||!M.fields?.length)continue;const x=[u];let A,T=[];for(let U=0;U<M.fields.length;U++){const R=M.fields[U];if(R.state=R.state||{},!A&&D(R,M,h.frames))A=R;else{if(h.keep&&!h.keep(R,M,h.frames))continue;let F=R.config.custom?.spanNulls;x.push(F===!0?u:F===-1?i:p);let B=R.labels??{};M.name&&(B={...B,name:M.name}),T.push({...R,labels:B})}h.keepOriginIndices&&(R.state.origin={frameIndex:b,fieldIndex:U})}if(!A)continue;m.length===0&&m.push(A),v.push(x);const S=[A.values];for(const U of T)S.push(U.values),m.push(U),delete U.state?.displayName;C.push(S)}const P=y(C,v,h.mode);return{length:P[0].length,fields:m.map((b,M)=>({...b,values:P[M]}))}}const u=0,i=1,p=2;function g(h,v,C){for(let m=0,D,P=-1;m<v.length;m++){let b=v[m];if(b>P){for(D=b-1;D>=0&&h[D]==null;)h[D--]=null;for(D=b+1;D<C&&h[D]==null;)h[P=D++]=null}}}function y(h,v,C=f.c.outer){let m;if(C===f.c.inner)m=new Set((0,t.Z)(h.map(M=>M[0])));else{m=new Set;for(let M=0;M<h.length;M++){let A=h[M][0],T=A.length;for(let S=0;S<T;S++)m.add(A[S])}}let D=[Array.from(m).sort((M,x)=>M-x)],P=D[0].length,b=new Map;for(let M=0;M<P;M++)b.set(D[0][M],M);for(let M=0;M<h.length;M++){let x=h[M],A=x[0];for(let T=1;T<x.length;T++){let S=x[T],U=Array(P).fill(void 0),R=v?v[M][T]:i,F=[];for(let B=0;B<S.length;B++){let K=S[B],L=b.get(A[B]);K===null?R!==u&&(U[L]=K,R===p&&F.push(L)):U[L]=K}g(U,F,P),D.push(U)}}return D}function E(h,v=50){const C=h.length;if(C<=1)return!0;let m=0,D=C-1;for(;m<=D&&h[m]==null;)m++;for(;D>=m&&h[D]==null;)D--;if(D<=m)return!0;const P=Math.max(1,Math.floor((D-m+1)/v));for(let b=h[m],M=m+P;M<=D;M+=P){const x=h[M];if(x!=null){if(x<=b)return!1;b=x}}return!0}},31568:(Y,O,e)=>{"use strict";e.d(O,{k:()=>l,r:()=>f});var t=e(9471),n=e(30471),o=e(99098),s=e(13512),l=(r=>(r.Columns="columns",r.Rows="rows",r))(l||{});const f={id:s.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(r,c)=>a=>a.pipe((0,t.U)(u=>f.transformer(r,c)(u))),transformer:r=>c=>{if(r.mode==="rows")return d(c,r.keepLabels);const a=[],u=r.keepLabels?.length?new Set(r.keepLabels):void 0;for(const i of c){const p=[],g={};for(const y of i.fields){if(!y.labels){p.push(y);continue}const E={...y,config:{...y.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};p.push(E);for(const h of Object.keys(y.labels)){if(u&&!u.has(h))continue;if(r.valueLabel===h){E.name=y.labels[h];continue}(g[h]??(g[h]=new Set)).add(y.labels[h])}}for(const y in g)for(const E of g[y]){const h=new Array(i.length).fill(E);p.push({name:y,type:o.fS.string,values:h,config:{}})}a.push({...i,fields:p,length:i.length})}return a}};function d(r,c){const a=[];for(const u of r)for(const i of u.fields)if(i.labels){const p=[],g=[];if(c)for(const y of c)p.push(y),g.push(i.labels[y]);else for(const[y,E]of Object.entries(i.labels))p.push(y),g.push(E);g.length&&a.push({...u,name:(0,n.CZ)(i,u,r),fields:[{name:"label",type:o.fS.string,config:{},values:p},{name:"value",type:o.fS.string,config:{},values:g}],length:g.length})}return a}},18820:(Y,O,e)=>{"use strict";e.d(O,{R:()=>f});var t=e(82897),n=e.n(t),o=e(9471),s=e(53678),l=e(13512);const f={id:l.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:p=>g=>g.pipe((0,o.U)(y=>{if(!Array.isArray(y)||y.length<=1)return y;const E=y.filter(x=>x.fields.length>0);if(E.length===0)return[y[0]];const h=new Set,v={},C=[],m=new s.v;for(let x=0;x<E.length;x++){const A=E[x];for(let T=0;T<A.fields.length;T++){const S=A.fields[T];h.has(S.name)||(m.addField(d(S)),h.add(S.name)),v[S.name]=v[S.name]||{},v[S.name][x]=T,E.length-1===x&&u(v,S,E)&&C.push(S.name)}}if(C.length===0)return y;const D={},P=[],b=r(E,v,C),M=c(E,h,v);for(let x=0;x<E.length;x++){const A=E[x];for(let T=0;T<A.length;T++){const S=b(x,T),U=M(x,T);if(!Array.isArray(D[S])){D[S]=[U],P.push(i(S,D));continue}let R=!1;D[S]=D[S].map(F=>a(F,U)?(R=!0,{...F,...U}):F),R||(D[S].push(U),P.push(i(S,D)))}}for(const x of P){const A=D[x.key][x.index];A&&m.add(A)}return[m]}))},d=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(p.config,"displayName")}}),r=(p,g,y)=>{const E=y.reduce((h,v)=>Object.keys(g[v]).reduce((C,m)=>(C[m]=C[m]||[],C[m].push(g[v][m]),C),h),{});return(h,v)=>E[h].reduce((C,m)=>C+p[h].fields[m].values[v],"")},c=(p,g,y)=>(E,h)=>{const v={},C=Array.from(g);for(const m of C){const D=y[m];if(!D)continue;const P=D[E];if(typeof P!="number")continue;const b=p[E];if(!b||!b.fields)continue;const M=b.fields[P];!M||!M.values||(v[m]=M.values[h])}return v},a=(p,g)=>{let y=!0;for(const E in g)if(!(typeof p[E]>"u")&&p[E]!==null&&p[E]!==g[E]){y=!1;break}return y},u=(p,g,y)=>Object.keys(p[g.name]).length===y.length,i=(p,g)=>({key:p,index:g[p].length-1})},43137:(Y,O,e)=>{"use strict";e.d(O,{d:()=>n});var t=e(13512);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:o=>s=>s,transformer:o=>s=>s}},74700:(Y,O,e)=>{"use strict";e.d(O,{$:()=>d,t:()=>f});var t=e(82897),n=e.n(t),o=e(9471),s=e(30471),l=e(13512);const f={id:l.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:a=>u=>u.pipe((0,o.U)(i=>{const p=r(a.indexByName);return!Array.isArray(i)||i.length===0?i:i.map(g=>({...g,fields:p(g.fields,i,g)}))}))},d=a=>(u,i)=>c(u,a)-c(i,a),r=a=>(u,i,p)=>{if(!Array.isArray(u)||u.length===0||!a||Object.keys(a).length===0)return u;const g=d(a);return(0,t.clone)(u).sort((y,E)=>g((0,s.CZ)(y,p,i),(0,s.CZ)(E,p,i)))},c=(a,u)=>Number.isInteger(u[a])?u[a]:Number.MAX_SAFE_INTEGER},27742:(Y,O,e)=>{"use strict";e.d(O,{AL:()=>c,mf:()=>a});var t=e(9471),n=e(83881),o=e(30471),s=e(99098),l=e(33750),f=e(50035),d=e(33369),r=e(13512),c=(y=>(y.SeriesToRows="seriesToRows",y.ReduceFields="reduceFields",y))(c||{});const a={id:r.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[l.gz.max]},operator:y=>E=>E.pipe((0,t.U)(h=>{if(!y?.reducers?.length)return h;const v=y.fields?(0,f.sq)(y.fields):y.includeTimeField&&y.mode==="reduceFields"?d.m3:d.Qw;if(y.mode==="reduceFields")return g(h,v,y.reducers);const C=u(h,v,y.reducers,y.labelsToFields);return C?[C]:[]}))};function u(y,E,h,v){const C=l.TB.list(h),m=C.map(b=>b.id),D=[],P=v?i(y):[];for(const b of y){const M=b.fields.filter(R=>E(R,b,y)),x=M.length,A=[],T=new Array(x);A.push({name:"Field",type:s.fS.string,values:T,config:{}});const S={};if(v)for(const R of P)S[R]=new Array(x),A.push({name:R,type:s.fS.string,values:S[R],config:{}});const U={};for(const R of C)U[R.id]=new Array(x),A.push({name:R.name,type:s.fS.other,values:U[R.id],config:{}});for(let R=0;R<M.length;R++){const F=M[R],B=(0,l.Kx)({field:F,reducers:m});if(v){if(T[R]=F.name,F.labels)for(const K of Object.keys(F.labels))S[K][R]=F.labels[K]}else T[R]=(0,o.CZ)(F,b,y);for(const K of C){const L=B[K.id];U[K.id][R]=L}}for(const R of A)if(R.type===s.fS.other){const F=(0,n.fu)(R);F&&(R.type=F)}D.push({...b,fields:A,length:x})}return p(D)}function i(y){const E=new Set;for(const h of y)for(const v of h.fields)if(v.labels)for(const C of Object.keys(v.labels))E.add(C);return[...E]}function p(y){if(!y?.length)return;const E=y[0];for(let h=1;h<y.length;h++){const v=y[h];for(let C=0;C<E.fields.length;C++){const m=E.fields[C];for(let D=0;D<v.fields.length;D++){const P=v.fields[D],b=C===0&&D===0,M=m.type===P.type&&m.name===P.name;if(b||M){const x=m.values,A=P.values;m.values=x.concat(A)}}}}return E.name=void 0,E.length=E.fields[0].values.length,E}function g(y,E,h){const C=l.TB.list(h).map(D=>D.id),m=[];for(const D of y){const P=[];for(const b of D.fields)if(E(b,D,y)){const M=(0,l.Kx)({field:b,reducers:C});for(const x of C){const A=M[x],T={...b,values:[A]};T.state=void 0,C.length>1&&(T.labels||(T.labels={}),T.labels.reducer=l.TB.get(x).name),P.push(T)}}P.length&&m.push({...D,fields:P,length:1})}return m}},89653:()=>{"use strict"},2925:()=>{"use strict"},97865:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},39834:(Y,O,e)=>{"use strict";e.d(O,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},206:(Y,O,e)=>{"use strict";e.d(O,{CQ:()=>l,k8:()=>s,zj:()=>o});var t=e(59250),n=e(22623),o=(f=>(f.CloudAlerting="cloud-alerting",f.UnifiedAlerting="unified-alerting",f.Dashboard="dashboard",f.Explore="explore",f.Correlations="correlations",f.Unknown="unknown",f.PanelEditor="panel-editor",f.PanelViewer="panel-viewer",f))(o||{});class s extends t.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(d){}setRootPage(d){return this.root=d,this}setComponentsFromLegacyExports(d){if(d.ConfigCtrl&&(this.angularConfigCtrl=d.ConfigCtrl),this.meta&&this.meta.includes){for(const r of this.meta.includes)if(r.type===t.$_.page&&r.component&&!d[r.component]){console.warn("App Page uses unknown component: ",r.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(d){return this._extensionConfigs.push({...d,type:n.D.link}),this}}var l=(f=>(f.alpha="alpha",f.beta="beta",f))(l||{})},59959:(Y,O,e)=>{"use strict";e.d(O,{e:()=>t});var t=(n=>(n.OpenSource="Open Source",n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},18111:(Y,O,e)=>{"use strict";e.d(O,{Hx:()=>t,Z3:()=>n,bm:()=>o});const t=0,n=100,o="SAML"},56632:(Y,O,e)=>{"use strict";e.d(O,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},52666:(Y,O,e)=>{"use strict";e.d(O,{Gl:()=>o,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(l=>(l.NotStarted="NotStarted",l.Loading="Loading",l.Streaming="Streaming",l.Done="Done",l.Error="Error",l))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var o=(l=>(l.Null="null",l.Ignore="connected",l.AsZero="null as zero",l))(o||{});const s=l=>Boolean(l)},99098:(Y,O,e)=>{"use strict";e.d(O,{Ls:()=>o,M5:()=>n,fS:()=>t,rN:()=>s});var t=(l=>(l.time="time",l.number="number",l.string="string",l.boolean="boolean",l.trace="trace",l.geo="geo",l.enum="enum",l.other="other",l.frame="frame",l))(t||{});const n="Value",o="Time",s="Metric"},39393:(Y,O,e)=>{"use strict";e.d(O,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},3281:(Y,O,e)=>{"use strict";e.d(O,{L8:()=>o,n1:()=>t,o3:()=>s,sN:()=>n});var t=(l=>(l.Datasource="Datasource",l.Correlations="Correlations",l))(t||{}),n=(l=>(l.Regex="regex",l.Logfmt="logfmt",l))(n||{}),o=(l=>(l.Series="series",l.Field="field",l.Fields="fields",l.Value="value",l.BuiltIn="built-in",l.Template="template",l))(o||{}),s=(l=>(l.Values="values",l))(s||{})},89424:(Y,O,e)=>{"use strict";e.d(O,{MF:()=>s,Ru:()=>l,eA:()=>f,hf:()=>o,iL:()=>d});var t=e(85194),n=e(59250);class o extends n.Sg{constructor(c){super(),this.DataSourceClass=c,this.components={}}setConfigEditor(c){return this.components.ConfigEditor=c,this}setConfigCtrl(c){return this.angularConfigCtrl=c,this}setQueryCtrl(c){return this.components.QueryCtrl=c,this}setAnnotationQueryCtrl(c){return this.components.AnnotationsQueryCtrl=c,this}setQueryEditor(c){return this.components.QueryEditor=c,this}setExploreQueryField(c){return this.components.ExploreQueryField=c,this}setExploreMetricsQueryField(c){return this.components.ExploreMetricsQueryField=c,this}setExploreLogsQueryField(c){return this.components.ExploreLogsQueryField=c,this}setQueryEditorHelp(c){return this.components.QueryEditorHelp=c,this}setExploreStartPage(c){return this.setQueryEditorHelp(c)}setVariableQueryEditor(c){return this.components.VariableQueryEditor=c,this}setMetadataInspector(c){return this.components.MetadataInspector=c,this}setComponentsFromLegacyExports(c){this.angularConfigCtrl=c.ConfigCtrl,this.components.QueryCtrl=c.QueryCtrl,this.components.AnnotationsQueryCtrl=c.AnnotationsQueryCtrl,this.components.ExploreQueryField=c.ExploreQueryField,this.components.QueryEditor=c.QueryEditor,this.components.QueryEditorHelp=c.QueryEditorHelp,this.components.VariableQueryEditor=c.VariableQueryEditor}}class s{constructor(c){this.name=c.name,this.id=c.id,this.type=c.type,this.meta=c.meta,this.cachingConfig=c.cachingConfig,this.uid=c.uid}getRef(){return{type:this.type,uid:this.uid}}}var l=(r=>(r.Logs="Logs",r.Metrics="Metrics",r.Tracing="Tracing",r))(l||{}),f=(r=>(r.Cancelled="cancelled",r.Timeout="timeout",r.Unknown="unknown",r))(f||{});class d{}d=(0,t.s)(d),s=(0,t.s)(s)},93830:()=>{"use strict"},19836:()=>{"use strict"},53768:(Y,O,e)=>{"use strict";e.d(O,{R:()=>n,S:()=>t});var t=(o=>(o.Thresholds="thresholds",o.PaletteClassic="palette-classic",o.PaletteClassicByName="palette-classic-by-name",o.PaletteSaturated="palette-saturated",o.ContinuousGrYlRd="continuous-GrYlRd",o.ContinuousRdYlGr="continuous-RdYlGr",o.ContinuousBlYlRd="continuous-BlYlRd",o.ContinuousYlRd="continuous-YlRd",o.ContinuousBlPu="continuous-BlPu",o.ContinuousYlBl="continuous-YlBl",o.ContinuousBlues="continuous-blues",o.ContinuousReds="continuous-reds",o.ContinuousGreens="continuous-greens",o.ContinuousPurples="continuous-purples",o.Fixed="fixed",o.Shades="shades",o))(t||{});const n="#808080"},3947:(Y,O,e)=>{"use strict";e.d(O,{Y4:()=>t,qb:()=>o,v3:()=>n});function t(s){return l=>l.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var o=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(o||{})},90076:()=>{"use strict"},77907:()=>{"use strict"},83008:()=>{"use strict"},84559:(Y,O,e)=>{"use strict";e.d(O,{Mo:()=>n,_S:()=>t,iJ:()=>o});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function o(s){if(n(s))return s}},2263:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{AbstractLabelOperator:()=>d.K2,AlertState:()=>j.Z,AnnotationEventFieldSource:()=>r.L,AppEvents:()=>V.SI,AppPlugin:()=>x.k8,CoreApp:()=>x.zj,CustomVariableSupport:()=>Q.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>f.m,DataFrameType:()=>s.P,DataLinkConfigOrigin:()=>l.n1,DataQueryErrorType:()=>A.eA,DataSourceApi:()=>A.MF,DataSourcePlugin:()=>A.hf,DataSourceVariableSupport:()=>Q.gv,DataTopic:()=>d.w5,DefaultTimeZone:()=>p.Ys,ExploreMode:()=>A.Ru,FALLBACK_COLOR:()=>R.R,FeatureState:()=>x.CQ,FieldColorModeId:()=>R.S,FieldConfigProperty:()=>b.qb,FieldType:()=>o.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>S.Sg,GrafanaThemeType:()=>F.Q,LanguageProvider:()=>A.iL,LegacyGraphHoverClearEvent:()=>V.oi,LegacyGraphHoverEvent:()=>V.IA,LiveChannelConnectionState:()=>H.yS,LiveChannelEventType:()=>H.FU,LiveChannelScope:()=>H.z,LiveChannelType:()=>H.SK,LoadingState:()=>n.Gu,LogLevel:()=>c.in,LogRowContextQueryDirection:()=>c.M4,LogsDedupDescription:()=>c.Uv,LogsDedupStrategy:()=>c.Y4,LogsMetaKind:()=>c.Ku,LogsSortOrder:()=>c.UV,LogsVolumeType:()=>c.o8,MappingType:()=>y.H,NavMenuItemType:()=>a.V,NullValueMode:()=>n.Gl,OrgRole:()=>B.B,PageLayoutType:()=>a.Q,PanelEvents:()=>V.Kh,PluginErrorCode:()=>S.w2,PluginExtensionPoints:()=>Z.y,PluginExtensionTypes:()=>Z.D,PluginIncludeType:()=>S.$_,PluginSignatureStatus:()=>S.Xy,PluginSignatureType:()=>S._Z,PluginState:()=>S.BV,PluginType:()=>S.zV,SpecialValue:()=>P.U,SpecialValueMatch:()=>y.e,StandardVariableSupport:()=>Q.v6,SupplementaryQueryType:()=>c.v8,SupportedTransformationType:()=>l.sN,TIME_FORMAT:()=>p.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>o.rN,TIME_SERIES_TIME_FIELD_NAME:()=>o.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>o.M5,ThresholdsMode:()=>g.H,VariableHide:()=>U.bU,VariableOrigin:()=>l.L8,VariableRefresh:()=>U.Bd,VariableSort:()=>U.$U,VariableSuggestionsScope:()=>l.o3,VariableSupportBase:()=>Q.Tq,VariableSupportType:()=>Q.j2,VisualizationSuggestionScore:()=>T._,VisualizationSuggestionsBuilder:()=>T.mi,VisualizationSuggestionsListAppender:()=>T.sf,VizOrientation:()=>T.wm,availableIconsIndex:()=>fe._S,getDefaultRelativeTimeRange:()=>p.Rr,getDefaultTimeRange:()=>p.JK,hasLogsContextSupport:()=>c.Q4,hasLogsContextUiSupport:()=>c.xW,hasQueryExportSupport:()=>d.p,hasQueryImportSupport:()=>d.CZ,hasSupplementaryQuerySupport:()=>c.mN,isIconName:()=>fe.Mo,isLiveChannelJoinEvent:()=>H.mx,isLiveChannelLeaveEvent:()=>H.gH,isLiveChannelMessageEvent:()=>H.RL,isLiveChannelStatusEvent:()=>H.se,isSystemOverride:()=>b.v3,isSystemOverrideWithRef:()=>b.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>ie.x,isValidLiveChannelAddress:()=>H.nU,makeArrayIndexableVector:()=>M.U,parseLiveChannelAddress:()=>H.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>fe.iJ,toLiveChannelId:()=>H.Aj});var t=e(18111),n=e(52666),o=e(99098),s=e(39393),l=e(3281),f=e(56632),d=e(89749),r=e(39834),c=e(13787),a=e(77346),u=e(10540),i=e.n(u),q={};for(const ne in u)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType"].indexOf(ne)<0&&(q[ne]=()=>u[ne]);e.d(O,q);var p=e(75849),g=e(69098),y=e(32195),E=e(93830),h=e.n(E),q={};for(const ne in E)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(q[ne]=()=>E[ne]);e.d(O,q);var v=e(83008),C=e.n(v),q={};for(const ne in v)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(q[ne]=()=>v[ne]);e.d(O,q);var m=e(89653),D=e.n(m),q={};for(const ne in m)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(q[ne]=()=>m[ne]);e.d(O,q);var P=e(90834),b=e(3947),M=e(23845),x=e(206),A=e(89424),T=e(82229),S=e(59250),U=e(69273),R=e(53768),F=e(33536),B=e(49969),K=e(90076),L=e.n(K),q={};for(const ne in K)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(q[ne]=()=>K[ne]);e.d(O,q);var N=e(5273),z=e.n(N),q={};for(const ne in N)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(q[ne]=()=>N[ne]);e.d(O,q);var G=e(19836),I=e.n(G),q={};for(const ne in G)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(q[ne]=()=>G[ne]);e.d(O,q);var V=e(4063),H=e(8891),Q=e(48976),oe=e(77907),se=e.n(oe),q={};for(const ne in oe)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(ne)<0&&(q[ne]=()=>oe[ne]);e.d(O,q);var ie=e(53940),j=e(97865),de=e(21366),ce=e.n(de),q={};for(const ne in de)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(q[ne]=()=>de[ne]);e.d(O,q);var ee=e(2925),le=e.n(ee),q={};for(const ne in ee)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(q[ne]=()=>ee[ne]);e.d(O,q);var fe=e(84559),Z=e(22623)},89974:(Y,O,e)=>{"use strict";e.d(O,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},4063:(Y,O,e)=>{"use strict";e.d(O,{IA:()=>l,Kh:()=>s,SI:()=>o,oi:()=>f});var t=e(84336),n=e(55391);const o={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class l extends n.R{}l.type="graph-hover";class f extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}f.type="graph-hover-clear"},8891:(Y,O,e)=>{"use strict";e.d(O,{Aj:()=>u,FU:()=>s,H7:()=>c,RL:()=>r,SK:()=>n,gH:()=>d,mx:()=>f,nU:()=>a,se:()=>l,yS:()=>o,z:()=>t});var t=(i=>(i.DataSource="ds",i.Plugin="plugin",i.Grafana="grafana",i.Stream="stream",i))(t||{}),n=(i=>(i.DataStream="stream",i.DataFrame="frame",i.JSON="json",i))(n||{}),o=(i=>(i.Pending="pending",i.Connected="connected",i.Connecting="connecting",i.Disconnected="disconnected",i.Shutdown="shutdown",i.Invalid="invalid",i))(o||{}),s=(i=>(i.Status="status",i.Join="join",i.Leave="leave",i.Message="message",i))(s||{});function l(i){return i.type==="status"}function f(i){return i.type==="join"}function d(i){return i.type==="leave"}function r(i){return i.type==="message"}function c(i){if(i?.length){let p=i.trim().split("/");if(p.length>=3)return{scope:p[0],namespace:p[1],path:p.slice(2).join("/")}}}function a(i){return!!(i?.path&&i.namespace&&i.scope)}function u(i){if(!i.scope)return"";let p=i.scope;return!i.namespace||(p+="/"+i.namespace,!i.path)?p:p+"/"+i.path}},13787:(Y,O,e)=>{"use strict";e.d(O,{Ku:()=>o,M4:()=>l,Q4:()=>f,UV:()=>t.UV,Uv:()=>s,Y4:()=>t.Y4,in:()=>n,mN:()=>c,o8:()=>r,v8:()=>d,xW:()=>a});var t=e(40538),n=(u=>(u.emerg="critical",u.fatal="critical",u.alert="critical",u.crit="critical",u.critical="critical",u.warn="warning",u.warning="warning",u.err="error",u.eror="error",u.error="error",u.info="info",u.information="info",u.informational="info",u.notice="info",u.dbug="debug",u.debug="debug",u.trace="trace",u.unknown="unknown",u))(n||{}),o=(u=>(u[u.Number=0]="Number",u[u.String=1]="String",u[u.LabelsMap=2]="LabelsMap",u[u.Error=3]="Error",u))(o||{}),s=(u=>(u.none="No de-duplication",u.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",u.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",u.signature="De-duplication of successive lines that have identical punctuation and whitespace.",u))(s||{}),l=(u=>(u.Backward="BACKWARD",u.Forward="FORWARD",u))(l||{});const f=u=>{if(!u)return!1;const i=u;return i.getLogRowContext!==void 0&&i.showContextToggle!==void 0};var d=(u=>(u.LogsVolume="LogsVolume",u.LogsSample="LogsSample",u))(d||{}),r=(u=>(u.FullRange="FullRange",u.Limited="Limited",u))(r||{});const c=(u,i)=>{if(!u)return!1;const p=u;return p.getDataProvider!==void 0&&p.getSupplementaryQuery!==void 0&&p.getSupportedSupplementaryQueryTypes().includes(i)},a=u=>u?u.getLogRowContextUi!==void 0:!1},77346:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>n,V:()=>t});var t=(o=>(o.Section="section",o.Item="item",o))(t||{}),n=(o=>(o[o.Standard=0]="Standard",o[o.Canvas=1]="Canvas",o[o.Custom=2]="Custom",o))(n||{})},49969:(Y,O,e)=>{"use strict";e.d(O,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},82229:(Y,O,e)=>{"use strict";e.d(O,{_:()=>l,mi:()=>f,sf:()=>d,wm:()=>s});var t=e(82897),n=e.n(t),o=e(99098),s=(r=>(r.Auto="auto",r.Vertical="vertical",r.Horizontal="horizontal",r))(s||{}),l=(r=>(r[r.Best=100]="Best",r[r.Good=70]="Good",r[r.OK=50]="OK",r))(l||{});class f{constructor(c,a){this.list=[],this.data=c,this.panel=a,this.dataSummary=this.computeDataSummary()}getListAppender(c){return new d(this.list,c)}computeDataSummary(){const c=this.data?.series||[];let a=0,u=0,i=0,p=0,g=0,y=0,E;for(const h of c){p+=h.length,h.meta?.preferredVisualisationType&&(E=h.meta.preferredVisualisationType);for(const v of h.fields)switch(y++,v.type){case o.fS.number:a+=1;break;case o.fS.time:u+=1;break;case o.fS.string:i+=1;break}h.length>g&&(g=h.length)}return{numberFieldCount:a,timeFieldCount:u,stringFieldCount:i,rowCountTotal:p,rowCountMax:g,fieldCount:y,preferredVisualisationType:E,frameCount:c.length,hasData:p>0,hasTimeField:u>0,hasNumberField:a>0,hasStringField:i>0}}getList(){return this.list}}class d{constructor(c,a){this.list=c,this.defaults=a}append(c){this.list.push((0,t.defaultsDeep)(c,this.defaults))}}},59250:(Y,O,e)=>{"use strict";e.d(O,{$_:()=>f,BV:()=>t,Sg:()=>d,Xy:()=>o,_Z:()=>s,w2:()=>l,zV:()=>n});var t=(r=>(r.alpha="alpha",r.beta="beta",r.stable="stable",r.deprecated="deprecated",r))(t||{}),n=(r=>(r.panel="panel",r.datasource="datasource",r.app="app",r.renderer="renderer",r.secretsmanager="secretsmanager",r))(n||{}),o=(r=>(r.internal="internal",r.valid="valid",r.invalid="invalid",r.modified="modified",r.missing="missing",r))(o||{}),s=(r=>(r.grafana="grafana",r.commercial="commercial",r.community="community",r.private="private",r.core="core",r))(s||{}),l=(r=>(r.missingSignature="signatureMissing",r.invalidSignature="signatureInvalid",r.modifiedSignature="signatureModified",r))(l||{}),f=(r=>(r.dashboard="dashboard",r.page="page",r.panel="panel",r.datasource="datasource",r))(f||{});class d{addConfigPage(c){return this.configPages||(this.configPages=[]),this.configPages.push(c),this}setChannelSupport(c){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},22623:(Y,O,e)=>{"use strict";e.d(O,{D:()=>t,y:()=>n});var t=(o=>(o.link="link",o))(t||{}),n=(o=>(o.DashboardPanelMenu="grafana/dashboard/panel/menu",o))(n||{})},53940:(Y,O,e)=>{"use strict";e.d(O,{x:()=>n});var t=e(59250);function n(o){return o&&o!==t.Xy.valid&&o!==t.Xy.internal}},89749:(Y,O,e)=>{"use strict";e.d(O,{CZ:()=>o,K2:()=>n,p:()=>s,w5:()=>t});var t=(l=>(l.Annotations="annotations",l))(t||{}),n=(l=>(l.Equal="Equal",l.NotEqual="NotEqual",l.EqualRegEx="EqualRegEx",l.NotEqualRegEx="NotEqualRegEx",l))(n||{});const o=l=>l.importFromAbstractQueries!==void 0,s=l=>l.exportToAbstractQueries!==void 0},10540:()=>{"use strict"},21366:()=>{"use strict"},69273:(Y,O,e)=>{"use strict";e.d(O,{$U:()=>n,Bd:()=>t,bU:()=>o});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),o=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(o||{})},33536:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},69098:(Y,O,e)=>{"use strict";e.d(O,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},75849:(Y,O,e)=>{"use strict";e.d(O,{JK:()=>l,Rr:()=>f,T_:()=>s,Ys:()=>o});var t=e(40538),n=e(67483);const o=t.iT,s="YYYY-MM-DD HH:mm:ss";function l(){const d=(0,n.CQ)();return{from:(0,n.CQ)(d).subtract(6,"hour"),to:d,raw:{from:"now-6h",to:"now"}}}function f(){return{from:600,to:0}}},5273:()=>{"use strict"},90834:(Y,O,e)=>{"use strict";e.d(O,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},32195:(Y,O,e)=>{"use strict";e.d(O,{H:()=>t,e:()=>n});var t=(o=>(o.ValueToText="value",o.RangeToText="range",o.RegexToText="regex",o.SpecialValue="special",o))(t||{}),n=(o=>(o.True="true",o.False="false",o.Null="null",o.NaN="nan",o.NullAndNaN="null+nan",o.Empty="empty",o))(n||{})},48976:(Y,O,e)=>{"use strict";e.d(O,{Mg:()=>s,Tq:()=>n,gv:()=>l,j2:()=>t,v6:()=>o});var t=(f=>(f.Legacy="legacy",f.Standard="standard",f.Custom="custom",f.Datasource="datasource",f))(t||{});class n{}class o extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class l extends n{getType(){return"datasource"}}},23845:(Y,O,e)=>{"use strict";e.d(O,{U:()=>t}),Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!1,enumerable:!1,configurable:!1},set:{value:function(n,o){this[n]=o},writable:!1,enumerable:!1,configurable:!1},add:{value:function(n){this.push(n)},writable:!1,enumerable:!1,configurable:!1},toArray:{value:function(){return this},writable:!1,enumerable:!1,configurable:!1}});function t(n){return new Proxy(n,{get(o,s,l){if(typeof s!="symbol"){const f=+s;if(String(f)===s)return o.get(f)}return Reflect.get(o,s,l)},set(o,s,l,f){if(typeof s!="symbol"){const d=+s;if(String(d)===s)return o.set(d,l),!0}return Reflect.set(o,s,l,f)}})}},91353:(Y,O,e)=>{"use strict";e.d(O,{vo:()=>l,rt:()=>r,j:()=>d});var t=e(30779),n=e(72293),o=e(53908);class s{constructor(){this.properties=[]}addCustomEditor(a){return this.properties.push(a),this}getRegistry(){return new o.B(()=>this.properties)}getItems(){return this.properties}}class l extends s{addNumberInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSelect(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addRadio(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}}class f{constructor(a){this.cfg=a,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=u=>{const i=this.cfg.values;return i?i(u):{getValue:p=>u.getValue(`${this.path}.${p}`),onChange:(p,g)=>u.onChange(`${this.path}.${p}`,g)}},this.path=a.path,this.category=a.category,this.defaultValue=a.defaultValue}}function d(c){return c.id==="nested-panel-options"}class r extends s{addNestedOptions(a){const u=new f(a);return this.addCustomEditor(u)}addNumberInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("number").editor})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("slider").editor})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("text").editor})}addStringArray(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("strings").editor})}addSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("select").editor})}addMultiSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("multi-select").editor})}addRadio(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("radio").editor})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,settings:a.settings||{}})}addTimeZonePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("timezone").editor,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor})}addDashboardPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("dashboard-uid").editor})}}},31290:(Y,O,e)=>{"use strict";e.d(O,{I:()=>o});var t=e(82897),n=e.n(t);function o(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},574:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{moveItemImmutably:()=>n,sortValues:()=>l});var t=e(40538);function n(f,d,r){const c=[...f];return Array.prototype.splice.call(c,r,0,Array.prototype.splice.call(c,d,1)[0]),c}const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(f,d)=>f-d;function l(f){return(d,r)=>{if(d===r)return 0;if(r==null||typeof r=="string"&&r.trim()==="")return-1;if(d==null||typeof d=="string"&&d?.trim()==="")return 1;let c=o.compare;return typeof d=="number"&&typeof r=="number"&&(c=s),f===t.As.Descending?c(r,d):c(d,r)}}},66392:(Y,O,e)=>{"use strict";e.d(O,{L:()=>n,n:()=>o});var t=e(53908),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const o=new t.B(()=>[{id:"+",name:"Add",operation:(s,l)=>s+l},{id:"-",name:"Subtract",operation:(s,l)=>s-l},{id:"*",name:"Multiply",operation:(s,l)=>s*l},{id:"/",name:"Divide",operation:(s,l)=>s/l}])},76015:(Y,O,e)=>{"use strict";e.d(O,{MJ:()=>v,QM:()=>p,uP:()=>u,x5:()=>a});var t=e(82897),n=e.n(t),o=e(26389),s=e.n(o),l=e(53678),f=e(83881),d=e(30471),r=e(99098),c=e(2703),a=(C=>(C[C.full=0]="full",C[C.name=1]="name",C[C.none=2]="none",C))(a||{});function u(C,m){return new p(m).readCSV(C)}var i=(C=>(C[C.Starting=0]="Starting",C[C.InHeader=1]="InHeader",C[C.ReadingRows=2]="ReadingRows",C))(i||{});class p{constructor(m){this.chunk=(D,P)=>{for(let b=0;b<D.data.length;b++){const M=D.data[b];if(M.length<1)continue;const x=M[0];if(x){if(x.startsWith("#")){const A=x.indexOf("#",2);if(A>0){const T=x.slice(1,A),S=T==="name";if(S||{unit:"#"}.hasOwnProperty(T)){this.state===2&&(this.current=new l.v({fields:[]}),this.data.push(this.current));const R=x.slice(A+1);if(S){this.current.addFieldFor(void 0,R);for(let F=1;F<M.length;F++)this.current.addFieldFor(void 0,M[F])}else{const{fields:F}=this.current;for(let B=0;B<F.length;B++){F[B].config||(F[B].config={});const K=F[B].config;K[T]=B===0?R:M[B]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,f.LI)(x)===r.fS.string){for(const T of M)this.current.addFieldFor(void 0,T);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:A}=this.current;for(let T=A.length;T<M.length;T++)this.current.addFieldFor(M[T]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},m||(m={}),this.config=m.config||{},this.callback=m.callback,this.current=new l.v({fields:[]}),this.state=0,this.data=[]}readCSV(m){this.current=new l.v({fields:[]}),this.data=[this.current];const D={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(m,D),this.data}}function g(C,m){if(C==null)return"";const D=C.toString();return D.includes('"')?m.quoteChar+D.replace(/"/gi,'""')+m.quoteChar:D.includes(`
`)||m.delimiter&&D.includes(m.delimiter)?m.quoteChar+D+m.quoteChar:D}function y(C,m){return C.display?D=>{const P=C.display(D);return g((0,c.zc)(P),m)}:D=>g(D,m)}function E(C,m,D){const P=C==="name",b=C==="type";for(const M of m){const x=M.config;if(P||b||x&&x.hasOwnProperty(C)){let A="#"+C+"#";for(let T=0;T<m.length;T++){T>0&&(A=A+D.delimiter);let S=m[T].name;b?S=m[T].type:P||(S=m[T].config[C]),S&&(A=A+g(S,D))}return A+D.newline}}return""}function h(){const C=["x","y"];return C.toLocaleString?C.toLocaleString().charAt(1):","}function v(C,m){if(!C)return"";m=(0,t.defaults)(m,{delimiter:h(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let D=m.useExcelHeader?`sep=${m.delimiter}${m.newline}`:"";for(const P of C){const{fields:b}=P;if(b.length===0)continue;if(m.headerStyle===0)D=D+E("name",b,m)+E("type",b,m)+E("unit",b,m)+E("dateFormat",b,m);else if(m.headerStyle===1){for(let x=0;x<b.length;x++)x>0&&(D+=m.delimiter),D+=`"${(0,d.CZ)(b[x],P).replace(/"/g,'""')}"`;D+=m.newline}const M=b[0].values.length;if(M>0){const x=b.map(A=>y(A,m));for(let A=0;A<M;A++){for(let T=0;T<b.length;T++){T>0&&(D=D+m.delimiter);const S=b[T].values[A];S!==null&&(D=D+x[T](S))}D=D+m.newline}}D=D+m.newline}return D}},94976:(Y,O,e)=>{"use strict";e.d(O,{W:()=>o,_:()=>s});var t=e(72196),n=e(49187);const o={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(r){const{onClickFn:c,replaceVariables:a,link:u,scopedVars:i,range:p,field:g,internalLink:y}=r,E=f(u.internal?.query,i,a),h=f(u.internal?.panelsState,i,a),v=u.title?u.title:y.datasourceName;return{title:a(v,i),href:l(y.datasourceUid,E,p,h),onClick:c?()=>{c({datasourceUid:y.datasourceUid,query:E,panelsState:h,range:p})}:void 0,target:u?.targetBlank?"_blank":"_self",origin:g}}function l(r,c,a,u){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:a.raw,datasource:r,queries:[c],panelsState:u}))}`)}function f(r,c,a){if(!r)return r;if(typeof r=="string")return a(r,c);const u=JSON.parse(JSON.stringify(r));return d(u,c,a)}function d(r,c,a){for(const u of Object.keys(r))typeof r[u]=="string"?r[u]=a(r[u],c):typeof r[u]=="object"&&r[u]!==null&&(r[u]=d(r[u],c,a));return r}},73446:(Y,O,e)=>{"use strict";e.d(O,{BT:()=>l,HD:()=>i,Mf:()=>E,TX:()=>u,_R:()=>d,cv:()=>s,fd:()=>p,fi:()=>r,hz:()=>a,iU:()=>o,nx:()=>c,tp:()=>g,uw:()=>y,z_:()=>f});var t=e(82897),n=e.n(t);function o(h){return{uid:h.uid,type:h.type}}function s(h){return typeof h=="object"&&typeof h?.uid=="string"}function l(h){if(s(h))return h.uid;if((0,t.isString)(h))return h}const f=(h,v)=>C=>{p(h,v,C.currentTarget.value)},d=(h,v)=>C=>{g(h,v,C.currentTarget.value)},r=(h,v)=>C=>{y(h,v,C.currentTarget.value)},c=(h,v)=>C=>{g(h,v,C.value)},a=(h,v)=>C=>{g(h,v,C.currentTarget.checked)},u=(h,v)=>C=>{y(h,v,C.value)},i=(h,v)=>C=>{E(h,v)};function p(h,v,C){const m=h.options;h.onOptionsChange({...m,[v]:C})}const g=(h,v,C)=>{const m=h.options;h.onOptionsChange({...m,jsonData:{...m.jsonData,[v]:C}})},y=(h,v,C)=>{const m=h.options;h.onOptionsChange({...m,secureJsonData:{...m.secureJsonData?m.secureJsonData:{},[v]:C}})},E=(h,v)=>{const C=h.options;h.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[v]:""},secureJsonFields:{...C.secureJsonFields,[v]:!1}})}},55024:(Y,O,e)=>{"use strict";e.d(O,{d:()=>n});const t={},n=(o,s,l)=>{let f=`[Deprecation warning] ${o}: ${s} is deprecated`;l&&(f+=`. Use ${l} instead`);const d=Date.now(),r=t[f];(!r||d-r>1e4)&&(console.warn(f),t[f]=d)}},65180:(Y,O,e)=>{"use strict";e.d(O,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},44103:(Y,O,e)=>{"use strict";e.d(O,{H:()=>o,k:()=>n});var t=e(52666);function n({xField:s,yField:l,nullValueMode:f}){const d=s.values,r=l.values,c=d.length;if(r.length!==c)throw new Error("Unexpected field length");const a=f===t.Gl.Ignore,u=f===t.Gl.AsZero,i=[];for(let p=0;p<c;p++){const g=d[p];let y=r[p];if(y===null){if(a)continue;u&&(y=0)}g!==null&&i.push([g,y])}return i}function o(s,l){if(!l.from||!l.to||!s||s.length===0)return[];const f=l.from.valueOf(),d=l.to.valueOf(),r=s[0][1];return[[f,r],[d,r]]}},42827:(Y,O,e)=>{"use strict";e.d(O,{LH:()=>u.L,x5:()=>l.x5,QM:()=>l.QM,WC:()=>v.W,xV:()=>C.x,vo:()=>g.vo,HU:()=>b.HU,zG:()=>i.z,rt:()=>g.rt,Bz:()=>n.B,IX:()=>D.I,sq:()=>t,nk:()=>u.n,ZC:()=>c,Jb:()=>b.Jb,d9:()=>s.d,FT:()=>f.FT,IU:()=>f.IU,aA:()=>f.aA,iU:()=>o.iU,BT:()=>o.BT,k8:()=>y.k,HE:()=>y.H,e4:()=>a.e,dP:()=>d.d,fp:()=>a.f,cv:()=>o.cv,Qr:()=>r.Q,uT:()=>E.u,s2:()=>m.s,_N:()=>v._,VS:()=>f.VS,Hh:()=>r.H,_R:()=>o._R,hz:()=>o.hz,nx:()=>o.nx,z_:()=>o.z_,HD:()=>o.HD,fi:()=>o.fi,TX:()=>o.TX,J8:()=>f.J8,uP:()=>l.uP,O9:()=>d.O,S:()=>h.S,MJ:()=>l.MJ,Er:()=>p.E,tp:()=>o.tp,fd:()=>o.fd,Mf:()=>o.Mf,uw:()=>o.uw,Cj:()=>h.Cj,xc:()=>P.x});var t=e(574),n=e(53908),o=e(73446),s=e(55024),l=e(76015),f=e(7569),d=e(56190),r=e(61618);const c=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];var a=e(99227),u=e(66392),i=e(92468),p=e(13572),g=e(91353),y=e(44103),E=e(72196),h=e(49187),v=e(94976),C=e(65180),m=e(85194),D=e(31290),P=e(32921),b=e(2576)},7569:(Y,O,e)=>{"use strict";e.d(O,{FT:()=>o,IU:()=>s,J8:()=>n,VS:()=>l,aA:()=>f});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(d){const r={};return d.replace(t,(c,a,u,i)=>(r[a]=i,"")),r}function o(d){return d.reduce((r,c)=>{if(!c)throw new Error("Need parsed labels to find common labels.");return Object.keys(c).forEach(a=>{(r[a]===void 0||r[a]!==c[a])&&delete r[a]}),Object.keys(r).forEach(a=>{c[a]===void 0&&delete r[a]}),r},{...d[0]})}function s(d,r){const c={...d};return Object.keys(r).forEach(a=>{delete c[a]}),c}function l(d,r){if(!d)return!0;for(const[c,a]of Object.entries(d))if(!r||r[c]!==a)return!1;return!0}function f(d,r="",c){if(!d||Object.keys(d).length===0)return r;const u=Object.keys(d).sort().map(i=>`${i}="${d[i]}"`).join(", ");return c?u:["{",u,"}"].join("")}},72196:(Y,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(63418),n=e(49187);let o={appSubUrl:""},s,l;const f=i=>{try{return new URL(i)}catch{return}},d=i=>{const p=f(i);if(p&&p.origin!==window.location.origin)return i;const g=o.appSubUrl??"",y=g.endsWith("/")?1:0,E=i.startsWith("http");let h=g;return(!i.startsWith("/")||E)&&(h=`${window.location.origin}${g}`),i.length>0&&i.indexOf(h)===0?i.slice(h.length-y):i},r=i=>i.startsWith("/")?`${o.appSubUrl}${d(i)}`:i,u={initialize:i=>{o=i.config,s=i.getTimeRangeForUrl,l=i.getVariablesUrlParams},stripBaseFromUrl:d,assureBaseUrl:r,updateSearchParams:(i,p)=>{const g=new URLSearchParams(p);try{const y=new URL(i);return g.forEach((E,h)=>y.searchParams.set(h,E)),y.href}catch{const y=new URLSearchParams(i);return g.forEach((E,h)=>{y.set(h,E)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:i=>{if(!l)return null;const p=l(i);return n.Cj.toUrlParams(p)},getUrlForPartial:(i,p)=>{const g=n.Cj.parseKeyValue(i.search.startsWith("?")?i.search.substring(1):i.search);for(const y of Object.keys(p))p[y]===null||p[y]===void 0?delete g[y]:g[y]=p[y];return r(n.Cj.renderUrl(i.pathname,g))},processUrl:i=>o.disableSanitizeHtml?i:t.QX.sanitizeUrl(i)}},85194:(Y,O,e)=>{"use strict";e.d(O,{s:()=>t});function t(n){return new Proxy(n,{apply(o,s,l){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(o,l,s.constructor)}})}},92468:(Y,O,e)=>{"use strict";e.d(O,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n))(t||{})},56190:(Y,O,e)=>{"use strict";e.d(O,{O:()=>t,d:()=>n});function t(o,s=0){if(Number.isInteger(o))return o;let l=10**s,f=o*l*(1+Number.EPSILON);return Math.round(f)/l}function n(o){return((""+o).split(".")[1]||"").length}},61618:(Y,O,e)=>{"use strict";e.d(O,{H:()=>t,Q:()=>n});const t=o=>Object.keys(o).reduce((s,l)=>(o[l]!==void 0&&(s[l]=o[l]),s),{}),n=o=>typeof o=="object"&&o!==null&&Object.keys(o).length===0},13572:(Y,O,e)=>{"use strict";e.d(O,{E:()=>t});const t=n=>({label:n,value:n})},99227:(Y,O,e)=>{"use strict";e.d(O,{e:()=>t,f:()=>n});const t=o=>{let s,l,f=Number.MAX_VALUE;for(let d=0;d<o.values.length;d++){const r=o.values[d];if(s!==void 0){const c=r-s;l===void 0&&(f=c),c<f&&(f=c)}s=r}return f},n=o=>{for(let s=0;s<o.values.length;s++){const l=o.values[s];if(l!=null){const f=l.toString();if(f.length===13&&f%1e3!==0)return!0}}return!1}},49187:(Y,O,e)=>{"use strict";e.d(O,{Cj:()=>r,S:()=>c});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(a,u){return u&&Object.keys(u).length>0&&(a+="?"+o(u)),a}function n(a,u){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,u?"%20":"+").replace(/[!'()*]/g,function(i){return"%"+i.charCodeAt(0).toString(16).toUpperCase()})}function o(a){const u=[],i=/\[\]$/,p=E=>Object.prototype.toString.call(E)==="[object Array]",g=(E,h)=>{if(h=typeof h=="function"?h():h===null||h===void 0?"":h,typeof h!="boolean")u[u.length]=n(E,!0)+"="+n(h,!0);else{const v=h?"":"="+n("false",!0);u[u.length]=n(E,!0)+v}},y=(E,h)=>{let v,C,m;if(E)if(p(h))for(v=0,C=h.length;v<C;v++)i.test(E)?g(E,h[v]):y(E,h[v]);else if(h&&String(h)==="[object Object]")for(m in h)y(E+"["+m+"]",h[m]);else g(E,h);else if(p(h))for(v=0,C=h.length;v<C;v++)g(h[v].name,h[v].value);else for(m in h)y(m,h[m]);return u};return y("",a).join("&")}function s(a,u){if(u!=null&&u!==""){const i=a.indexOf("?");i!==-1?a.length-i>1&&(a+="&"):a+="?",a+=u}return a}function l(){const u=window.location.search.substring(1).split("&"),i={};for(const p of u){const g=p.split("=");if(g.length>1){const y=decodeURIComponent(g[0]),E=decodeURIComponent(g[1]);y in i?i[y]=[...i[y],E]:i[y]=[E]}else if(g.length===1){const y=decodeURIComponent(g[0]);i[y]=!0}}return i}function f(a){const u={},i=(a||"").split("&");for(let p of i){let g,y,E;if(p&&(y=p=p.replace(/\+/g,"%20"),g=p.indexOf("="),g!==-1&&(y=p.substring(0,g),E=p.substring(g+1)),y=d(y),y!==void 0)){E=E!==void 0?d(E):!0;let h;typeof E=="string"&&E!==""?h=E==="true"||E==="false"?E==="true":E:h=E,u.hasOwnProperty(y)?Array.isArray(u[y])?u[y].push(E):u[y]=[u[y],isNaN(h)?E:h]:u[y]=isNaN(h)?E:h}}return u}function d(a){try{return decodeURIComponent(a)}catch{return}}const r={renderUrl:t,toUrlParams:o,appendQueryToUrl:s,getUrlSearchParams:l,parseKeyValue:f};function c(a,u){return u!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(a)}},2576:(Y,O,e)=>{"use strict";e.d(O,{HU:()=>f,Jb:()=>d,vh:()=>s});var t=e(92103),n=e(79086),o=e(32195);function s(c,a){for(const u of c)switch(u.type){case o.H.ValueToText:if(a==null)continue;const i=u.options[a];if(i)return i;break;case o.H.RangeToText:if(a==null)continue;const p=parseFloat(a);if(isNaN(p)||!isNaN(u.options.from)&&p<u.options.from||!isNaN(u.options.to)&&p>u.options.to)continue;return u.options.result;case o.H.RegexToText:if(a==null||typeof a!="string")continue;const E=(0,n.jO)(u.options.pattern);if(a.match(E)){const h={...u.options.result};return h.text!=null&&(h.text=a.replace(E,u.options.result.text||"")),h}case o.H.SpecialValue:switch(u.options.match){case o.e.Null:{if(a==null)return u.options.result;break}case o.e[NaN]:{if(isNaN(a))return u.options.result;break}case o.e.NullAndNaN:{if(isNaN(a)||a==null)return u.options.result;break}case o.e.True:{if(a===!0||a==="true")return u.options.result;break}case o.e.False:{if(a===!1||a==="false")return u.options.result;break}case o.e.Empty:{if(a==="")return u.options.result;break}}}return null}function l(c){return(typeof c=="number"||typeof c=="string"&&c.trim()!=="")&&!isNaN(c)}var f=(c=>(c[c.ValueToText=1]="ValueToText",c[c.RangeToText=2]="RangeToText",c))(f||{});function d(c,a){const u=[];let i=c.mappingType;if(c.mappingType||(c.valueMaps&&c.valueMaps.length?i=1:c.rangeMaps&&c.rangeMaps.length&&(i=2)),i===1)for(let p=0;p<c.valueMaps.length;p++){const g=c.valueMaps[p];u.push(r({...g,id:p,type:o.H.ValueToText},c.fieldConfig?.defaults?.thresholds||a))}else if(i===2)for(let p=0;p<c.rangeMaps.length;p++){const g=c.rangeMaps[p];u.push(r({...g,id:p,type:o.H.RangeToText},c.fieldConfig?.defaults?.thresholds||a))}return u}function r(c,a){const u={type:o.H.ValueToText,options:{}},i=[];let p;const g=parseFloat(c.text);if(a&&!isNaN(g)){const y=(0,t.m1)(g,a.steps);y&&y.color&&(p=y.color)}switch(c.type){case 1:case o.H.ValueToText:c.value!=null&&(c.value==="null"?i.push({type:o.H.SpecialValue,options:{match:o.e.Null,result:{text:c.text,color:p}}}):u.options[String(c.value)]={text:c.text,color:p});break;case 2:case o.H.RangeToText:c.from==="null"||c.to==="null"?i.push({type:o.H.SpecialValue,options:{match:o.e.Null,result:{text:c.text,color:p}}}):i.push({type:o.H.RangeToText,options:{from:+c.from,to:+c.to,result:{text:c.text,color:p}}});break}return Object.keys(u.options).length>0&&i.unshift(u),i[0]}},32921:(Y,O,e)=>{"use strict";e.d(O,{x:()=>l});var t=e(12877),n=e(25740),o=e(46978),s=e(82615);function l({whileLoading:f,source:d}){return(0,t.T)((0,n.H)(200).pipe((0,o.h)(f),(0,s.R)(d)),d)}},22078:(Y,O,e)=>{"use strict";e.d(O,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(2703)},7897:(Y,O,e)=>{"use strict";e.d(O,{Aq:()=>n,Yh:()=>d,dT:()=>l,i7:()=>r});var t=e(2703);function n(c,a){const u=["","K","M","B","T"],i=(0,t.Qj)(1e3,u);return(p,g,y)=>{if(p==null)return{text:""};const E=p<0;E&&(p=Math.abs(p));const h=i(p,g,y);return a?h.suffix=h.suffix!==void 0?`${h.suffix}${c}`:void 0:h.prefix=c,E&&(h.prefix=`-${h.prefix?.length?h.prefix:""}`),h}}const o=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=o.indexOf("");function l(c){const a=o.findIndex(u=>u.normalize("NFKD")===c.normalize("NFKD"));return a<0?0:a-s}const f=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function d(c,a=0){const u=f.map(i=>" "+i+c);return(0,t.Qj)(1024,u,a)}function r(c,a=0){const u=o.map(i=>" "+i+c);return(0,t.Qj)(1e3,u,s+a)}},2703:(Y,O,e)=>{"use strict";e.d(O,{IR:()=>q,zc:()=>Q,Cf:()=>Ie,QW:()=>gt,Td:()=>Ge,br:()=>le,SP:()=>ne,Qj:()=>Z,SR:()=>re,vb:()=>ve,FH:()=>j,bn:()=>ce,q2:()=>ee});var t=e(82897);function n(Te,Le){return Te===null?{text:""}:{text:j(Te,Le),suffix:"%"}}function o(Te,Le){return Te===null?{text:""}:{text:j(100*Te,Le),suffix:"%"}}function s(Te,Le){if(Te==null)return{text:""};const Ye=l(Te,Le);return Ye.text.substring(0,1)==="-"?Ye.text="-0x"+Ye.text.substring(1):Ye.text="0x"+Ye.text,Ye}function l(Te,Le){return Te==null?{text:""}:{text:parseFloat(j(Te,Le)).toString(16).toUpperCase()}}function f(Te,Le){return Te==null?{text:""}:{text:Te.toExponential(Le??void 0)}}var d=e(77258),r=e(82410),c=e(67483),a=(Te=>(Te.Year="year",Te.Month="month",Te.Week="week",Te.Day="day",Te.Hour="hour",Te.Minute="minute",Te.Second="second",Te.Millisecond="millisecond",Te))(a||{});const u=["year","month","week","day","hour","minute","second","millisecond"],i={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function p(Te,Le){return Te===null?{text:""}:Math.abs(Te)<1e3?{text:j(Te,Le),suffix:" ns"}:Math.abs(Te)<1e6?ce(Te/1e3,Le," \xB5s"):Math.abs(Te)<1e9?ce(Te/1e6,Le," ms"):Math.abs(Te)<6e10?ce(Te/1e9,Le," s"):Math.abs(Te)<36e11?ce(Te/6e10,Le," min"):Math.abs(Te)<864e11?ce(Te/36e11,Le," hour"):ce(Te/864e11,Le," day")}function g(Te,Le){return Te===null?{text:""}:Math.abs(Te)<1e3?{text:j(Te,Le),suffix:" \xB5s"}:Math.abs(Te)<1e6?ce(Te/1e3,Le," ms"):ce(Te/1e6,Le," s")}function y(Te,Le,Ye){return Te===null?{text:""}:Math.abs(Te)<1e3?{text:j(Te,Le),suffix:" ms"}:Math.abs(Te)<6e4?ce(Te/1e3,Le," s"):Math.abs(Te)<36e5?ce(Te/6e4,Le," min"):Math.abs(Te)<864e5?ce(Te/36e5,Le," hour"):Math.abs(Te)<31536e6?ce(Te/864e5,Le," day"):ce(Te/31536e6,Le," year")}function E(Te,Le){if(Te!=null&&Le!==null&&Le!==void 0)return Te-Le}function h(Te,Le){return Te===null?{text:""}:Te===0?{text:"0",suffix:" s"}:Math.abs(Te)<1e-6?ce(Te*1e9,Le," ns"):Math.abs(Te)<.001?ce(Te*1e6,Le," \xB5s"):Math.abs(Te)<1?ce(Te*1e3,Le," ms"):Math.abs(Te)<60?{text:j(Te,Le),suffix:" s"}:Math.abs(Te)<3600?ce(Te/60,Le," min"):Math.abs(Te)<86400?ce(Te/3600,Le," hour"):Math.abs(Te)<604800?ce(Te/86400,Le," day"):Math.abs(Te)<31536e3?ce(Te/604800,Le," week"):ce(Te/31556900,Le," year")}function v(Te,Le){return Te===null?{text:""}:Math.abs(Te)<60?{text:j(Te,Le),suffix:" min"}:Math.abs(Te)<1440?ce(Te/60,Le," hour"):Math.abs(Te)<10080?ce(Te/1440,Le," day"):Math.abs(Te)<604800?ce(Te/10080,Le," week"):ce(Te/525948,Le," year")}function C(Te,Le){return Te===null?{text:""}:Math.abs(Te)<24?{text:j(Te,Le),suffix:" hour"}:Math.abs(Te)<168?ce(Te/24,Le," day"):Math.abs(Te)<8760?ce(Te/168,Le," week"):ce(Te/8760,Le," year")}function m(Te,Le){return Te===null?{text:""}:Math.abs(Te)<7?{text:j(Te,Le),suffix:" day"}:Math.abs(Te)<365?ce(Te/7,Le," week"):ce(Te/365,Le," year")}function D(Te,Le,Ye){if(Te===null)return{text:""};if(Te===0)return{text:"0",suffix:" "+Ye+"s"};if(Te<0){const ye=D(-Te,Le,Ye);return ye.suffix||(ye.suffix=""),ye.suffix+=" ago",ye}Te*=i[Ye]*1e3;const it=[];let ht=!1,Re=0;Le!=null&&(Re=Le);for(let ye=0;ye<u.length&&Re>=0;ye++){const Ce=i[u[ye]]*1e3,be=Te/Ce;if(be>=1||ht){ht=!0;const We=Math.floor(be),Qe=u[ye]+(We!==1?"s":"");it.push(We+" "+Qe),Te=Te%Ce,Re--}}return{text:it.join(", ")}}function P(Te,Le){if(Te===null)return{text:""};if(Te<1e3)return{text:(0,c.zh)(Te).format("SSS\\m\\s")};if(Te<6e4){let Re="ss\\s:SSS\\m\\s";return Le===0&&(Re="ss\\s"),{text:(0,c.zh)(Te).format(Re)}}if(Te<36e5){let Re="mm\\m:ss\\s:SSS\\m\\s";return Le===0?Re="mm\\m":Le===1&&(Re="mm\\m:ss\\s"),{text:(0,c.zh)(Te).format(Re)}}let Ye="mm\\m:ss\\s:SSS\\m\\s";const it=`${("0"+Math.floor((0,c.Ks)(Te,"milliseconds").asHours())).slice(-2)}h`;return Le===0?Ye="":Le===1?Ye="mm\\m":Le===2&&(Ye="mm\\m:ss\\s"),{text:Ye?`${it}:${(0,c.zh)(Te).format(Ye)}`:it}}function b(Te,Le){return D(Te,Le,"millisecond")}function M(Te,Le){return D(Te,Le,"second")}function x(Te){if(Te<0){const Re=x(-Te);return Re.suffix||(Re.suffix=""),Re.suffix+=" ago",Re}const Le=[],Ye=Math.floor(Te/3600),it=Math.floor(Te%3600/60),ht=Math.floor(Te%3600%60);return Ye>9?Le.push(""+Ye):Le.push("0"+Ye),it>9?Le.push(""+it):Le.push("0"+it),ht>9?Le.push(""+ht):Le.push("0"+ht),{text:Le.join(":")}}function A(Te){if(Te<0){const ht=A(-Te);return ht.suffix||(ht.suffix=""),ht.suffix+=" ago",ht}let Le="";const Ye=Math.floor(Te/(24*3600));Ye>0&&(Le=Ye+" d ");const it=x(Te-Ye*24*3600);return{text:Le+it.text}}function T(Te,Le){return h(Te/100,Le)}function S(Te,Le){return P(Te,Le)}function U(Te,Le){return P(Te*1e3,Le)}function R(Te,Le){return(Ye,it,ht,Re)=>Le&&(0,c.CQ)().isSame(Ye,"day")?{text:(0,d.dq)(Ye,{format:Le,timeZone:Re})}:{text:(0,d.dq)(Ye,{format:Te,timeZone:Re})}}const F=R("YYYY-MM-DD HH:mm:ss"),B=R("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),K=R("MM/DD/YYYY h:mm:ss a"),L=R("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function N(){return R((0,r.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function z(){return R((0,r.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,r.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function G(Te,Le,Ye,it,ht){return{text:(0,d.dq)(Te,{format:ht?r.U6.fullDateMS:r.U6.fullDate,timeZone:it})}}function I(Te,Le,Ye,it){return{text:(0,d.E8)(Te,{timeZone:it})}}var V=e(7897);const H=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ee("")},{name:"String",id:"string",fn:ve},{name:"short",id:"short",fn:Z(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:o},{name:"Humidity (%H)",id:"humidity",fn:ee("%H")},{name:"Decibel",id:"dB",fn:ee("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:l},{name:"Scientific notation",id:"sci",fn:f},{name:"Locale format",id:"locale",fn:ne},{name:"Pixels",id:"pixel",fn:ee("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ee("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ee("f/sec\xB2")},{name:"G unit",id:"accG",fn:ee("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ee("\xB0")},{name:"Radians",id:"radian",fn:ee("rad")},{name:"Gradian",id:"grad",fn:ee("grad")},{name:"Arc Minutes",id:"arcmin",fn:ee("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ee("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ee("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ee("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ee("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,V.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,V.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,V.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,V.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,V.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,V.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,V.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,V.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ee("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ee("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ee("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ee("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ee("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ee("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ee("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ee("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ee("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ee("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ee("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ee("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,V.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,V.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,V.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,V.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,V.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,V.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,V.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,V.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,V.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,V.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,V.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,V.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,V.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,V.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,V.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,V.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,V.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,V.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,V.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,V.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,V.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,V.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,V.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,V.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,V.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,V.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,V.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,V.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,V.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,V.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,V.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,V.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,V.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,V.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,V.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,V.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,V.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,V.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,V.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,V.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,V.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,V.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,V.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,V.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,V.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,V.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,V.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,V.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,V.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,V.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,V.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,V.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,V.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,V.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,V.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,V.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,V.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,V.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,V.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,V.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,V.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,V.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:F},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:B},{name:"Datetime US",id:"dateTimeAsUS",fn:K},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:L},{name:"Datetime local",id:"dateTimeAsLocal",fn:N()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:z()},{name:"Datetime default",id:"dateTimeAsSystem",fn:G},{name:"From Now",id:"dateTimeFromNow",fn:I}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,V.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,V.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,V.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,V.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,V.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ee("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,V.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,V.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,V.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,V.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,V.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,V.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,V.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,V.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,V.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,V.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,V.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,V.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,V.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,V.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,V.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,V.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,V.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,V.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,V.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,V.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,V.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,V.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,V.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,V.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,V.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,V.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,V.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,V.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,V.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,V.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,V.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,V.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ee("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ee("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ee("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ee("cfm")},{name:"Litre/hour",id:"litreh",fn:ee("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ee("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ee("mL/min")},{name:"Lux (lx)",id:"lux",fn:ee("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,V.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,V.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,V.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,V.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,V.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,V.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,V.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,V.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,V.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,V.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,V.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,V.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,V.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ee("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,V.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ee("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,V.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ee("in")},{name:"feet (ft)",id:"lengthft",fn:ee("ft")},{name:"meter (m)",id:"lengthm",fn:(0,V.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,V.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ee("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,V.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,V.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,V.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,V.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ee("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ee("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ee('"Hg')},{name:"PSI",id:"pressurepsi",fn:Z(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,V.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,V.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,V.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,V.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,V.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,V.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,V.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,V.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,V.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,V.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,V.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,V.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,V.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ee("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,V.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:ee("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ee("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ee("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ee("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ee("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,V.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:p},{name:"microseconds (\xB5s)",id:"\xB5s",fn:g},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:h},{name:"minutes (m)",id:"m",fn:v},{name:"hours (h)",id:"h",fn:C},{name:"days (d)",id:"d",fn:m},{name:"duration (ms)",id:"dtdurationms",fn:b},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:x},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:A},{name:"Timeticks (s/100)",id:"timeticks",fn:T},{name:"clock (ms)",id:"clockms",fn:S},{name:"clock (s)",id:"clocks",fn:U}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:re("c/s")},{name:"ops/sec (ops)",id:"ops",fn:re("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:re("req/s")},{name:"reads/sec (rps)",id:"rps",fn:re("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:re("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:re("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:re("c/m")},{name:"ops/min (opm)",id:"opm",fn:re("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:re("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:re("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:re("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ee("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ee("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ee("mph")},{name:"knot (kn)",id:"velocityknot",fn:ee("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,V.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,V.i7)("L")},{name:"cubic meter",id:"m3",fn:ee("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ee("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ee("dm\xB3")},{name:"gallons",id:"gallons",fn:ee("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:q("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:q("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:q("On","Off")}]}];function Q(Te){return`${Te.prefix??""}${Te.text}${Te.suffix??""}`}let oe=[];const se={};let ie=!1;function j(Te,Le){if(Te===null)return"";if(Te===Number.NEGATIVE_INFINITY||Te===Number.POSITIVE_INFINITY)return Te.toLocaleString();if(Le==null&&(Le=de(Te)),Te===0)return Te.toFixed(Le);const Ye=Le?Math.pow(10,Math.max(0,Le)):1,it=String(Math.round(Te*Ye)/Ye);if(it.indexOf("e")!==-1||Te===0)return it;const ht=it.indexOf("."),Re=ht===-1?0:it.length-ht-1;return Re<Le?(Re?it:it+".")+String(Ye).slice(1,Le-Re+1):it}function de(Te){const Le=Math.abs(Te);let it=-Math.floor(Math.log(Le)/Math.LN10)+1;const ht=Math.pow(10,-it);return Le/ht>2.25&&++it,Te%1===0&&(it=0),Math.max(0,it)}function ce(Te,Le,Ye){return{text:j(Te,Le),suffix:Ye}}function ee(Te,Le){return(Ye,it)=>{if(Ye===null)return{text:""};const ht=j(Ye,it);return Te?Le?{text:ht,prefix:Te}:{text:ht,suffix:" "+Te}:{text:ht}}}function le(Te){return Te&&Te.startsWith("bool")}function q(Te,Le){return Ye=>({text:Ye?Te:Le})}const fe=(Te,Le)=>Math.log10(Le)/Math.log10(Te);function Z(Te,Le,Ye=0){return(it,ht)=>{if(it==null)return{text:""};if(it===Number.NEGATIVE_INFINITY||it===Number.POSITIVE_INFINITY||isNaN(it))return{text:it.toLocaleString()};const Re=it===0?0:Math.floor(fe(Te,Math.abs(it))),ye=Le[(0,t.clamp)(Ye+Re,0,Le.length-1)];return{text:j(it/Te**(0,t.clamp)(Re,-Ye,Le.length-Ye-1),ht),suffix:ye}}}function ne(Te,Le){return Te==null?{text:""}:{text:Te.toLocaleString(void 0,{maximumFractionDigits:Le??void 0})}}function re(Te){const Ye=Z(1e3,["","K","M","B","T"]);return(it,ht,Re)=>{if(it===null)return{text:""};const ye=Ye(it,ht,Re);return ye.suffix+=" "+Te,ye}}function ve(Te){return{text:`${Te}`}}function me(){oe=H();for(const Te of oe)for(const Le of Te.formats)se[Le.id]=Le.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Te=>{const Le=se[Te.to];Le&&(se[Te.from]=Le)}),ie=!0}function Ie(Te){if(!Te)return ee("");ie||me();const Le=se[Te];if(!Le&&Te){let Ye=Te.indexOf(":");if(Ye>0){const it=Te.substring(0,Ye),ht=Te.substring(Ye+1);if(it==="prefix")return ee(ht,!0);if(it==="suffix")return ee(ht,!1);if(it==="time")return R(ht);if(it==="si"){const Re=(0,V.dT)(ht.charAt(0)),ye=Re===0?ht:ht.substring(1);return(0,V.i7)(ye,Re)}if(it==="count")return re(ht);if(it==="currency")return(0,V.Aq)(ht);if(it==="bool"){if(Ye=ht.indexOf("/"),Ye>=0){const Re=ht.substring(0,Ye),ye=ht.substring(Ye+1);return q(Re,ye)}return q(ht,"-")}}return ee(Te)}return Le}function Ge(){return ie||me(),se}function gt(){return ie||me(),oe.map(Te=>({text:Te.name,submenu:Te.formats.map(Le=>({text:Le.name,value:Le.id}))}))}},35906:(Y,O,e)=>{"use strict";e.d(O,{G:()=>t});class t extends Array{get buffer(){return this}set buffer(o){this.length=0;const s=o?.length;if(s){let l=65e3,f=Math.ceil(s/l);for(let d=0;d<f;d++)this.push.apply(this,o.slice(d*l,(d+1)*l))}}constructor(o){super(),this.buffer=o??[]}toJSON(){return[...this]}}},74911:(Y,O,e)=>{"use strict";e.d(O,{d:()=>o});var t=e(23845),n=e(21570);class o extends n.G{constructor(l){return super(),this.buffer=l.buffer||[],this.capacity=this.buffer.length,this.tail=l.append!=="head",this.index=0,this.add=this.getAddFunction(),l.capacity&&this.setCapacity(l.capacity),(0,t.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?l=>{this.buffer.push(l),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:l=>{this.buffer.unshift(l),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?l=>{this.buffer[this.index]=l,this.index=(this.index+1)%this.buffer.length}:l=>{let f=this.index-1;f<0&&(f=this.buffer.length-1),this.buffer[f]=l,this.index=f}}setCapacity(l){if(this.capacity===l)return;const f=this.toArray();if(l>this.length)this.buffer=f;else if(l<this.capacity){const d=this.length-l;this.tail?this.buffer=f.slice(d,f.length):this.buffer=f.slice(0,f.length-d)}this.capacity=l,this.index=0,this.add=this.getAddFunction()}setAppendMode(l){const f=l!=="head";f!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=f,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(l){return this.buffer[(l+this.index)%this.buffer.length]}set(l,f){this.buffer[(l+this.index)%this.buffer.length]=f}get length(){return this.buffer.length}}},21570:(Y,O,e)=>{"use strict";e.d(O,{G:()=>n,s:()=>s});var t=e(77747);class n{*iterator(){for(let f=0;f<this.length;f++)yield this.get(f)}set(f,d){throw"unsupported operation"}add(f){throw"unsupported operation"}push(...f){for(const d of f)this.add(d);return this.length}[Symbol.iterator](){return this.iterator()}forEach(f){return s(this).forEach(f)}map(f){return s(this).map(f)}filter(f){return s(this).filter(f)}at(f){return this.get(f)}toArray(){return(0,t.n)(this)}join(f){return this.toArray().join(f)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...f){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(f){throw new Error("Method not implemented.")}splice(f,d,...r){throw new Error("Method not implemented.")}unshift(...f){throw new Error("Method not implemented.")}fill(f,d,r){throw new Error("Method not implemented.")}copyWithin(f,d,r){throw new Error("Method not implemented.")}[Symbol.unscopables](){throw new Error("Method not implemented.")}slice(f,d){return this.toArray().slice(f,d)}indexOf(f,d){return this.toArray().indexOf(f,d)}lastIndexOf(f,d){return this.toArray().lastIndexOf(f,d)}every(f,d){return this.toArray().every(f,d)}some(f,d){return this.toArray().some(f,d)}reduce(f,d){throw new Error("Method not implemented.")}reduceRight(f,d){throw new Error("Method not implemented.")}find(f,d){return this.toArray().find(f,d)}findIndex(f,d){return this.toArray().findIndex(f,d)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(f,d){return this.toArray().includes(f,d)}flatMap(f,d){return this.toArray().flatMap(f,d)}flat(f){throw new Error("Method not implemented.")}}const o=[];function s(l){return{*[Symbol.iterator](){for(let f=0;f<l.length;f++)yield l.get(f)},forEach(f){for(let d=0;d<l.length;d++)f(l.get(d),d,o)},map(f){const d=[];for(let r=0;r<l.length;r++)d.push(f(l.get(r),r,o));return d},filter(f){const d=[];let r=0;for(const c of this)f(c,r++,o)&&d.push(c);return d}}}},88971:(Y,O,e)=>{"use strict";e.d(O,{o:()=>s});var t=e(23845),n=e(21570),o=e(77747);class s extends n.G{constructor(f,d){return super(),this.source=f,this.order=d,(0,t.U)(this)}get length(){return this.source.length}get(f){return this.source.get(this.order[f])}toArray(){return(0,o.n)(this)}toJSON(){return(0,o.n)(this)}getOrderArray(){return this.order}}},2988:(Y,O,e)=>{"use strict";e.d(O,{l$:()=>s,Gt:()=>l.G,sq:()=>g,rM:()=>r,dV:()=>f.d,uI:()=>d,$Y:()=>u,rm:()=>p,oH:()=>c.o,sD:()=>n.s});var t=e(23845),n=e(21570),o=e(77747);class s extends n.G{constructor(E=0){return super(),this.length=0,this.source=[],this.length=E,(0,t.U)(this)}setLength(E){if(E>this.length)this.length=E;else if(E<this.length){const h=[];for(const v of this.source)if(h.push(v),v.end>E){v.end=E;break}this.source=h,this.length=E}}append(E){const h={start:this.length,end:this.length+E.length,values:E};return this.length=h.end,this.source.push(h),h}get(E){for(let h=0;h<this.source.length;h++){const v=this.source[h];if(E>=v.start&&E<v.end)return v.values[E-v.start]}}toArray(){return(0,o.n)(this)}toJSON(){return(0,o.n)(this)}}var l=e(35906),f=e(74911);class d extends Array{constructor(E,h){return super(),new Array(h).fill(E)}}class r extends Array{constructor(E,h,v){super();const C=new Array(E.length);for(let m=0;m<C.length;m++)C[m]=v(E[m],h[m]);return C}}var c=e(88971),a=e(2703);class u extends Array{constructor(E,h){return super(),E.map(v=>(0,a.zc)(h(v)))}}var i=e(99098);class p extends Array{constructor(E){super();const h=new Array(E);for(let v=0;v<E;v++)h[v]=v;return h}static newField(E){return{name:"",values:new p(E),type:i.fS.number,config:{min:0,max:E-1}}}}class g extends Array{constructor(E){return super(),E.map(h=>+h)}}},77747:(Y,O,e)=>{"use strict";e.d(O,{n:()=>t});function t(n){const o=Array(n.length);for(let s=0;s<n.length;s++)o[s]=n.get(s);return o}},75552:(Y,O,e)=>{"use strict";e.d(O,{Si:()=>n,ct:()=>t,fV:()=>o,mR:()=>s});var t=(l=>(l.DashboardView="dashboard-view",l.DataRequest="data-request",l))(t||{});const n=l=>Boolean(l.payload.page),o=l=>Boolean(l.payload.interactionName),s=l=>Boolean(l.payload.experimentId)},41818:(Y,O,e)=>{"use strict";e.d(O,{SZ:()=>d,ff:()=>f,r_:()=>s,sm:()=>l});var t=e(35645),n=e(37932),o=e(5494);const s=r=>{(0,o.RP)().addEvent({type:o.ee.MetaAnalytics,payload:r})},l=()=>{const r=n.E1.getLocation(),c=`${t.v.appSubUrl??""}${r.pathname}${r.search}${r.hash}`;(0,o.RP)().addEvent({type:o.ee.Pageview,payload:{page:c}})},f=(r,c)=>{(0,o.RP)().addEvent({type:o.ee.Interaction,payload:{interactionName:r,properties:c}})},d=(r,c,a)=>{(0,o.RP)().addEvent({type:o.ee.ExperimentView,payload:{experimentId:r,experimentGroup:c,experimentVariant:a}})}},53117:(Y,O,e)=>{"use strict";e.d(O,{q:()=>a});var t=e(66111),n=e(73446),o=e(53940),s=e(68183),l=e(8581),f=e(52081),d=e(51613),r=e(86647),c=e(22069);class a extends t.PureComponent{constructor(i){super(i),this.dataSourceSrv=(0,r.F)(),this.state={},this.onChange=(p,g)=>{if(g.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(p.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:i}=this.props;this.dataSourceSrv.getInstanceSettings(i)||this.setState({error:"Could not find data source "+i})}getCurrentValue(){const{current:i,hideTextValue:p,noDefault:g}=this.props;if(!i&&g)return;const y=this.dataSourceSrv.getInstanceSettings(i);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:p,meta:y.meta};const E=(0,n.BT)(i);return E===c.hr.uid||E===c.hr.name?{label:E,value:E,hideText:p}:{label:(E??"no name")+" - not found",value:E??void 0,imgUrl:"",hideText:p}}getDataSourceOptions(){const{alerting:i,tracing:p,metrics:g,mixed:y,dashboard:E,variables:h,annotations:v,pluginId:C,type:m,filter:D,logs:P}=this.props;return this.dataSourceSrv.getList({alerting:i,tracing:p,metrics:g,logs:P,dashboard:E,mixed:y,variables:h,annotations:v,pluginId:C,filter:D,type:m}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:i,onBlur:p,onClear:g,openMenuOnFocus:y,placeholder:E,width:h,inputId:v,disabled:C=!1,isLoading:m=!1}=this.props,{error:D}=this.state,P=this.getDataSourceOptions(),b=this.getCurrentValue(),M=typeof g=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.wl.components.DataSourcePicker.container},t.createElement(l.Ph,{isLoading:m,disabled:C,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:v||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:P,autoFocus:i,onBlur:p,width:h,openMenuOnFocus:y,maxMenuHeight:500,placeholder:E,noOptionsMessage:"No datasources found",value:b??null,invalid:Boolean(D)||Boolean(this.props.invalid),getOptionLabel:x=>x.meta&&(0,o.x)(x.meta.signature)&&x!==b?t.createElement(f.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,x.label)," ",t.createElement(d.o,{status:x.meta.signature})):x.label||""}))}}a.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(Y,O,e)=>{"use strict";e.d(O,{$:()=>o,Z:()=>n});var t=e(66111);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function o(s){n=s}},98825:(Y,O,e)=>{"use strict";e.d(O,{$:()=>n,L:()=>o});var t=e(66111);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function o(s){n=s}},87221:(Y,O,e)=>{"use strict";e.d(O,{T:()=>n,t:()=>o});var t=e(66111);let n=({children:s})=>t.createElement("div",null,s);function o(s){n=s}},35645:(Y,O,e)=>{"use strict";e.d(O,{O:()=>l,v:()=>u});var t=e(82897),n=e.n(t),o=e(82410),s=e(21544);class l{constructor(p){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.bootData=p.bootData,this.bootData.user.lightTheme=f(p)==="light",this.isPublicDashboardView=p.bootData.settings.isPublicDashboardView;const g={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,g,p),this.buildInfo=p.buildInfo||g.buildInfo,this.dateFormats&&o.U6.update(this.dateFormats),r(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.j)(d(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function f(i){let p="dark";const g=i.bootData.user.theme;return g==="light"||g==="dark"?p=g:g==="system"&&(p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),p}function d(i){return{colors:{mode:i.bootData.user.lightTheme?"light":"dark"}}}function r(i){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((g,y)=>{if(y.startsWith("__feature.")){const E=i.featureToggles,h=y.substring(10),v=g==="true"||g==="";v!==E[y]&&(E[h]=v,console.log(`Setting feature toggle ${h} = ${v}`))}})}const c=window.grafanaBootData||{settings:{},user:{},navTree:[]},a=c.settings;a.bootData=c;const u=new l(a)},35670:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{CopyPanelEvent:()=>a.EK,DataSourcePicker:()=>A.q,DataSourceWithBackend:()=>C.CK,EchoEventType:()=>l.ee,FakeEchoSrv:()=>l.rX,GrafanaBootConfig:()=>p.O,HealthCheckError:()=>C.ZA,HealthStatus:()=>C.QO,HistoryWrapper:()=>c._i,MetaAnalyticsEventName:()=>g.ct,PanelDataErrorView:()=>P.Z,PanelRenderer:()=>D.$,PluginPage:()=>x.T,RefreshEvent:()=>a.U5,StreamingFrameAction:()=>r.T0,SystemJS:()=>y.i3,ThemeChangedEvent:()=>a.hD,TimeRangeUpdatedEvent:()=>a.md,config:()=>p.v,createDataSourcePluginEventProperties:()=>S,createPluginEventProperties:()=>T,createQueryRunner:()=>M.AQ,featureEnabled:()=>h.v,frameToMetricFindValue:()=>m.S9,getAngularLoader:()=>n.w,getAppEvents:()=>a.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>o.F,getEchoSrv:()=>l.RP,getGrafanaLiveSrv:()=>r.gj,getLegacyAngularInjector:()=>d.V,getLocationSrv:()=>s.w,getPluginExtensions:()=>u.I,getPluginImportUtils:()=>y.bP,getRunRequest:()=>M.Pl,getTemplateSrv:()=>f.J,isExperimentViewEvent:()=>g.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>g.fV,isPageviewEvent:()=>g.Si,isPluginExtensionLink:()=>i.c,loadPluginCss:()=>y.iS,locationSearchToObject:()=>c.Ox,locationService:()=>c.E1,logDebug:()=>v.o7,logError:()=>v.H,logInfo:()=>v.PN,logWarning:()=>v.KE,navigationLogger:()=>c.GQ,registerEchoBackend:()=>l.e6,reportExperimentView:()=>E.SZ,reportInteraction:()=>E.ff,reportMetaAnalytics:()=>E.r_,reportPageview:()=>E.sm,setAngularLoader:()=>n.W,setAppEvents:()=>a.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>o.w,setEchoSrv:()=>l.tz,setGrafanaLiveSrv:()=>r.cA,setLegacyAngularInjector:()=>d.t,setLocationService:()=>c.ZG,setLocationSrv:()=>s.x,setPluginExtensionGetter:()=>u.o,setPluginImportUtils:()=>y.Qf,setQueryRunnerFactory:()=>M.pD,setRunRequest:()=>M.Iw,setTemplateSrv:()=>f.l,toDataQueryError:()=>b.P,toDataQueryResponse:()=>m.z1,usePluginInteractionReporter:()=>K});var t=e(54899),n=e(11484),o=e(86647),s=e(47458),l=e(5494),f=e(20308),d=e(70926),r=e(75118),c=e(37932),a=e(82378),u=e(54665),i=e(36032),p=e(35645),g=e(75552),y=e(19920),E=e(41818),h=e(66121),v=e(54408),C=e(22069),m=e(32689),D=e(98825),P=e(87670),b=e(77599),M=e(36535),x=e(87221),A=e(53117);function T(N){return{grafana_version:p.v.buildInfo.version,plugin_type:String(N.type),plugin_version:N.info.version,plugin_id:N.id,plugin_name:N.name}}function S(N){return{...T(N.meta),datasource_uid:N.uid}}var U=e(66111),R=e(81129),F=e(58556);const B="grafana_plugin_";function K(){const N=(0,R.g)();return(0,U.useMemo)(()=>{const z=(0,F.v)(N)?S(N.instanceSettings):T(N.meta);return(G,I)=>{if(!L(G))throw new Error(`Interactions reported in plugins should start with: "${B}".`);return(0,E.ff)(G,{...I,...z})}},[N])}function L(N){return N.startsWith(B)&&N.length>B.length}},11484:(Y,O,e)=>{"use strict";e.d(O,{W:()=>n,w:()=>o});let t;function n(s){t=s}function o(){return t}},5494:(Y,O,e)=>{"use strict";e.d(O,{RP:()=>s,e6:()=>l,ee:()=>t,rX:()=>f,tz:()=>o});var t=(d=>(d.Performance="performance",d.MetaAnalytics="meta-analytics",d.Sentry="sentry",d.Pageview="pageview",d.Interaction="interaction",d.ExperimentView="experimentview",d.GrafanaJavascriptAgent="grafana-javascript-agent",d))(t||{});let n;function o(d){n=d}function s(){return n||(n=new f),n}const l=d=>{s().addBackend(d)};class f{constructor(){this.events=[]}flush(){this.events=[]}addBackend(r){}addEvent(r,c){this.events.push(r)}}},37932:(Y,O,e)=>{"use strict";e.d(O,{E1:()=>c,GQ:()=>i,Ox:()=>r,ZG:()=>a,_i:()=>d});var t=e(97594),n=e(49187),o=e(55024),s=e(88383),l=e(73289),f=e(35645);class d{constructor(g){this.history=g||t.lX({basename:f.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(g,y){const E=this.history.location,h=this.getSearchObject();for(const C of Object.keys(g))g[C]===null||g[C]===void 0?delete h[C]:h[C]=g[C];const v=n.Cj.renderUrl(E.pathname,h);y?this.history.replace(v,this.history.location.state):this.history.push(v,this.history.location.state)}push(g){this.history.push(g)}replace(g){this.history.replace(g)}reload(){const g=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:g?g+1:1}})}getLocation(){return this.history.location}getSearchObject(){return r(this.history.location.search)}update(g){if((0,o.d)("LocationSrv","update","partial, push or replace"),g.partial&&g.query)this.partial(g.query,g.partial);else{const y={pathname:g.path};g.query&&(y.search=n.Cj.toUrlParams(g.query)),g.replace?this.replace(y):this.push(y)}}}function r(p){let g=typeof p=="number"?String(p):p;return g.length>0?g.startsWith("?")?n.Cj.parseKeyValue(g.substring(1)):n.Cj.parseKeyValue(g):{}}let c=new d;const a=p=>{throw new Error("locationService can be only overriden in test environment")},u=(0,s.h)("Router"),i=u.logger;(0,l.x)("location",c,u)},47458:(Y,O,e)=>{"use strict";e.d(O,{w:()=>o,x:()=>n});let t;function n(s){t=s}function o(){return t}},36535:(Y,O,e)=>{"use strict";e.d(O,{AQ:()=>o,Iw:()=>l,Pl:()=>f,pD:()=>n});let t;const n=d=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=d},o=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function l(d){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=d}function f(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(Y,O,e)=>{"use strict";e.d(O,{EK:()=>l,N$:()=>r,U5:()=>n,Xw:()=>d,hD:()=>o,md:()=>s});var t=e(55391);class n extends t.m{}n.type="refresh";class o extends t.R{}o.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class l extends t.R{}l.type="copy-panel";let f;function d(c){f=c}function r(){return f}},54899:(Y,O,e)=>{"use strict";e.d(O,{i:()=>s,jW:()=>o,kW:()=>t});function t(l){return typeof l=="object"&&l!==null&&"status"in l&&"data"in l}let n;const o=l=>{n=l},s=()=>n},86647:(Y,O,e)=>{"use strict";e.d(O,{F:()=>o,w:()=>n});let t;function n(s){t=s}function o(){return t}},70926:(Y,O,e)=>{"use strict";e.d(O,{V:()=>o,t:()=>n});let t;const n=s=>{t=s},o=()=>t},75118:(Y,O,e)=>{"use strict";e.d(O,{T0:()=>t,cA:()=>o,gj:()=>s});var t=(l=>(l.Append="append",l.Replace="replace",l))(t||{});let n;const o=l=>{n=l},s=()=>n},54665:(Y,O,e)=>{"use strict";e.d(O,{I:()=>s,o:()=>n});let t;function n(l){if(t)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");t=l}function o(){if(!t)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return t}const s=l=>o()(l)},36032:(Y,O,e)=>{"use strict";e.d(O,{c:()=>n});var t=e(22623);function n(o){return o?o.type===t.D.link&&("path"in o||"onClick"in o):!1}},20308:(Y,O,e)=>{"use strict";e.d(O,{J:()=>o,l:()=>n});let t;const n=s=>{t=s},o=()=>t},22069:(Y,O,e)=>{"use strict";e.d(O,{B9:()=>P,CK:()=>D,PI:()=>b,Pr:()=>h,QO:()=>C,ZA:()=>v,hr:()=>E});var t=e(59980),n=e(65583),o=e(12877),s=e(53704),l=e(59724),f=e(89424),d=e(73446),r=e(8891),c=e(59957),a=e(85194),u=e(35645),i=e(86647),p=e(75118),g=e(54899),y=e(32689);const E=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function h(M){if(!M)return!1;const x=typeof M=="string"?M:M.type;return x===E.type||x===E.name||x==="-100"}class v extends Error{constructor(x,A){super(x),this.details=A,this.name="HealthCheckError"}}var C=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(C||{}),m=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M.QueryGroupID="X-Query-Group-Id",M.FromExpression="X-Grafana-From-Expr",M))(m||{});class D extends f.MF{constructor(x){super(x),this.streamOptionsProvider=b}query(x){const{intervalMs:A,maxDataPoints:T,queryCachingTTL:S,range:U,requestId:R,hideFromInspector:F=!1}=x;let B=x.targets;this.filterQuery&&(B=B.filter(H=>this.filterQuery(H)));let K=!1;const L=new Set,N=new Set,z=B.map(H=>{let Q=this.getRef(),oe=this.id,se=!0;if(h(H.datasource))return K=!0,{...H,datasource:E};if(H.datasource){const ie=(0,i.F)().getInstanceSettings(H.datasource,x.scopedVars);if(!ie)throw new Error(`Unknown Datasource: ${JSON.stringify(H.datasource)}`);const j=ie.rawRef??(0,d.iU)(ie),de=ie.id;(j.uid!==Q.uid||oe!==de)&&(Q=j,oe=de,se=!1)}return Q.type?.length&&L.add(Q.type),Q.uid?.length&&N.add(Q.uid),{...se?this.applyTemplateVariables(H,x.scopedVars):H,datasource:Q,datasourceId:oe,intervalMs:A,maxDataPoints:T,queryCachingTTL:S}});if(!z.length)return(0,t.of)({data:[]});const G={queries:z};if(U&&(G.range=U,G.from=U.from.valueOf().toString(),G.to=U.to.valueOf().toString()),u.v.featureToggles.queryOverLive)return(0,p.gj)().getQueryData({request:x,body:G});const I={};I["X-Plugin-Id"]=Array.from(L).join(", "),I["X-Datasource-Uid"]=Array.from(N).join(", ");let V="/api/ds/query?ds_type="+this.type;return K&&(I["X-Grafana-From-Expr"]="true",V+="&expression=true"),R&&(V+=`&requestId=${R}`),x.dashboardUID&&(I["X-Dashboard-Uid"]=x.dashboardUID),x.panelId&&(I["X-Panel-Id"]=`${x.panelId}`),x.queryGroupId&&(I["X-Query-Group-Id"]=`${x.queryGroupId}`),(0,g.i)().fetch({url:V,method:"POST",data:G,requestId:R,hideFromInspector:F,headers:I}).pipe((0,s.w)(H=>{const Q=(0,y.z1)(H,z);return Q.data?.length&&Q.data.find(oe=>oe.meta?.channel)?P(Q,x,this.streamOptionsProvider):(0,t.of)(Q)}),(0,l.K)(H=>(0,t.of)((0,y.z1)(H))))}getRequestHeaders(){const x={};return x["X-Plugin-Id"]=this.type,x["X-Datasource-Uid"]=this.uid,x}interpolateVariablesInQueries(x,A){return x.map(T=>this.applyTemplateVariables(T,A))}applyTemplateVariables(x,A){return x}async getResource(x,A,T){const S=this.getRequestHeaders();return(await(0,n.n)((0,g.i)().fetch({...T,method:"GET",headers:T?.headers?{...T.headers,...S}:S,params:A??T?.params,url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async postResource(x,A,T){const S=this.getRequestHeaders();return(await(0,n.n)((0,g.i)().fetch({...T,method:"POST",headers:T?.headers?{...T.headers,...S}:S,data:A??{...A},url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async callHealthCheck(){return(0,n.n)((0,g.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(x=>x.data).catch(x=>x.data)}async testDatasource(){return this.callHealthCheck().then(x=>x.status==="OK"?{status:"success",message:x.message}:Promise.reject({status:"error",message:x.message,error:new v(x.message,x.details)}))}}function P(M,x,A){const T=(0,p.gj)();if(!T)return(0,t.of)(M);const S=[],U=[];for(const R of M.data){const F=(0,r.H7)(R.meta?.channel);if(F){const B=R;U.push(T.getDataStream({addr:F,buffer:A(x,B),frame:(0,c.Y)(R)}))}else S.push(R)}return S.length&&U.push((0,t.of)({...M,data:S})),U.length===1?U[0]:(0,o.T)(...U)}const b=(M,x)=>{const A={maxLength:M.maxDataPoints??500,action:p.T0.Append};return M.rangeRaw?.to==="now"&&(A.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),A};D=(0,a.s)(D)},66121:(Y,O,e)=>{"use strict";e.d(O,{v:()=>n});var t=e(35645);const n=o=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[o]}},54408:(Y,O,e)=>{"use strict";e.d(O,{H:()=>c,KE:()=>d,PN:()=>f,o7:()=>r});var t=e(37916),n=e(48606),o=e(53843),s=e(56986),l=e(35645);function f(a,u){l.v.grafanaJavascriptAgent.enabled&&o.s.api.pushLog([a],{level:s.in.INFO,context:u}),l.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Info,contexts:u})}function d(a,u){l.v.grafanaJavascriptAgent.enabled&&o.s.api.pushLog([a],{level:s.in.WARN,context:u}),l.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Warning,contexts:u})}function r(a,u){l.v.grafanaJavascriptAgent.enabled&&o.s.api.pushLog([a],{level:s.in.DEBUG,context:u}),l.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Debug,contexts:u})}function c(a,u){l.v.grafanaJavascriptAgent.enabled&&o.s.api.pushError(a),l.v.sentry.enabled&&(0,t.Tb)(a,{contexts:u})}},19920:(Y,O,e)=>{"use strict";e.d(O,{Qf:()=>d,bP:()=>r,i3:()=>s,iS:()=>l});var t=e(59587),n=e.n(t),o=e(35645);const s=n();function l(c){const a=o.v.bootData.user.lightTheme?c.light:c.dark;return s.import(`${a}!css`)}let f;function d(c){if(f)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");f=c}function r(){if(!f)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return f}},32689:(Y,O,e)=>{"use strict";e.d(O,{S9:()=>u,z1:()=>d});var t=e(52666),n=e(59957),o=e(83881),s=e(99098),l=e(77599);const f={severity:"info",text:"Cached response"};function d(i,p){const g={data:[],state:t.Gu.Done},y="traceId"in i?i.traceId:void 0;if(y!=null&&(g.traceIds=[y]),i.data?.results){const E=i.data.results,h=p?.length?p.map(m=>m.refId):Object.keys(E),v=r(i),C=[];for(const m of h){const D=E[m];D&&(D.refId=m,C.push(D))}for(const m of C){if(m.error){const D={refId:m.refId,message:m.error,status:m.status};y!=null&&(D.traceId=y),g.error||(g.error={...D}),g.errors?g.errors.push({...D}):g.errors=[{...D}],g.state=t.Gu.Error}if(m.frames?.length){for(let D of m.frames){v&&(D=c(D));const P=(0,n.vP)(D);P.refId||(P.refId=m.refId),g.data.push(P)}continue}if(m.series?.length)for(const D of m.series)D.refId||(D.refId=m.refId),g.data.push((0,o.g0)(D));if(m.tables?.length)for(const D of m.tables)D.refId||(D.refId=m.refId),g.data.push((0,o.g0)(D))}}return i.status&&i.status!==200&&(g.state!==t.Gu.Error&&(g.state=t.Gu.Error),g.error||(g.error=(0,l.P)(i))),g}function r(i){const p=i?.headers;return!p||!p.get?!1:p.get("X-Cache")==="HIT"}function c(i){return{...i,schema:{...i.schema,fields:[...i.schema?.fields??[]],meta:{...i.schema?.meta,notices:[...i.schema?.meta?.notices??[],f],isCachedResponse:!0}}}}function a(i){const p=d(i);if(p.error?.data?.message)return{status:"error",message:p.error.data.message,details:p.error?.data?.error?{message:p.error.data.error}:void 0};if(p.error?.refId&&p.error?.message)return{status:"error",message:p.error.message};throw i}function u(i){if(!i||!i.length)return[];const p=[];let g=i.fields.find(y=>y.type===s.fS.string);if(g||(g=i.fields.find(y=>y.type!==s.fS.time)),g)for(let y=0;y<g.values.length;y++)p.push({text:""+g.values[y]});return p}},45253:(Y,O,e)=>{"use strict";e.d(O,{b:()=>r});var t=e(9892),n=e(66111),o=e(28550),s=e(68183),l=e(72648),f=e(31403),d=e(39904);const r=n.forwardRef(({title:u,onRemove:i,children:p,buttonContent:g,elevated:y,bottomSpacing:E,topSpacing:h,className:v,severity:C="error",...m},D)=>{const P=(0,l.l4)(),b=Boolean(u),M=a(P,C,b,y,E,h),x={error:"alert",warning:"alert",info:"status",success:"status"},A=m.role||x[C],T=m["aria-label"]||u;return n.createElement("div",{ref:D,className:(0,t.cx)(M.alert,v),"data-testid":s.wl.components.Alert.alertV2(C),role:A,"aria-label":T,...m},n.createElement("div",{className:M.icon},n.createElement(d.J,{size:"xl",name:c(C)})),n.createElement("div",{className:M.body},n.createElement("div",{className:M.title},u),p&&n.createElement("div",{className:M.content},p)),i&&!g&&n.createElement("div",{className:M.close},n.createElement(f.zx,{"aria-label":"Close alert",icon:"times",onClick:i,type:"button",fill:"text",variant:"secondary"})),i&&g&&n.createElement("div",{className:M.buttonWrapper},n.createElement(f.zx,{"aria-label":"Close alert",variant:"secondary",onClick:i,type:"button"},g)))});r.displayName="Alert";const c=u=>{switch(u){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},a=(u,i,p,g,y,E)=>{const h=u.colors[i],v=u.shape.borderRadius(),C=(0,o.Z)(h.border).setAlpha(.2).toString();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${v};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${h.transparent};
      box-shadow: ${g?u.shadows.z3:"none"};
      padding: ${u.spacing(1,2)};
      border: 1px solid ${C};
      margin-bottom: ${u.spacing(y??2)};
      margin-top: ${u.spacing(E??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${u.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${u.spacing(1,2,0,0)};
      color: ${h.text};
      display: flex;
    `,title:(0,t.css)({fontWeight:u.typography.fontWeightMedium}),body:t.css`
      padding: ${u.spacing(1,0)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      padding-top: ${p?u.spacing(.5):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      margin-left: ${u.spacing(1)};
      display: flex;
      align-items: center;
      align-self: center;
    `,close:t.css`
      position: relative;
      color: ${u.colors.text.secondary};
      background: none;
      display: flex;
      top: -6px;
      right: -14px;
    `}}},30532:(Y,O,e)=>{"use strict";e.d(O,{h:()=>p});var t=e(9892),n=e(82897),o=e(66111),s=e(72648),l=e(24799),f=e(4784);const d=o.memo(()=>{const y=(0,s.wW)(r);return o.createElement("div",{className:y.ellipsis},o.createElement("span",{className:y.firstDot},"."),o.createElement("span",{className:y.secondDot},"."),o.createElement("span",{className:y.thirdDot},"."))});d.displayName="EllipsisAnimated";const r=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${c} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${a} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${u} 2s linear infinite`})}),c=t.keyframes`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,a=t.keyframes`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,u=t.keyframes`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,i=2*1e3;function p(y){const{invalid:E,loading:h,onFinishChange:v,saveErrorMessage:C="Error saving this value",error:m,children:D,disabled:P,...b}=y,[M,x]=o.useState({isLoading:!1,showSuccess:!1,showError:E}),A=(0,o.useRef)(null);o.useEffect(()=>{let F;if(M.showSuccess){const B=M.showError?0:i;F=setTimeout(()=>{x({...M,showSuccess:!1})},B)}return()=>{window.clearTimeout(F)}},[M]);const T=(0,o.useCallback)(F=>{E||(x({...M,isLoading:!0,showSuccess:!1}),v(F).then(()=>{x({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{x({...M,isLoading:!1,showError:!0})}))},[E,M,v]),S=(0,o.useMemo)(()=>(0,n.debounce)(T,600,{leading:!1}),[T]),U=E||M.showError||void 0,R=(0,s.wW)(g);return o.createElement(o.Fragment,null,o.createElement(l.g,{...b,loading:h||void 0,invalid:U,disabled:P,error:m||M.showError&&C,ref:A,className:R.widthFitContent},o.cloneElement(D(F=>{S(F)}))),M.isLoading&&o.createElement(f.K,{referenceElement:A.current,placement:"right",alternativePlacement:"bottom"},"Saving ",o.createElement(d,null)),M.showSuccess&&o.createElement(f.K,{suffixIcon:"check",referenceElement:A.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}p.displayName="AutoSaveField";const g=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},19985:(Y,O,e)=>{"use strict";e.d(O,{C:()=>d});var t=e(9892),n=e(66111),o=e(28550),s=e(72648),l=e(39904),f=e(61860);const d=n.memo(({icon:c,color:a,text:u,tooltip:i,className:p,...g})=>{const y=(0,s.wW)((0,n.useCallback)(h=>r(h,a),[a])),E=n.createElement("div",{className:(0,t.cx)(y.wrapper,p),...g},c&&n.createElement(l.J,{name:c,size:"sm"}),u);return i?n.createElement(f.u,{content:i,placement:"auto"},E):E});d.displayName="Badge";const r=(c,a)=>{let u=c.visualization.getColorByName(a),i="",p="",g="";return c.isDark?(p=(0,o.Z)(u).setAlpha(.15).toString(),i=(0,o.Z)(u).darken(30).toString(),g=(0,o.Z)(u).lighten(15).toString()):(p=(0,o.Z)(u).setAlpha(.15).toString(),i=(0,o.Z)(u).lighten(20).toString(),g=(0,o.Z)(u).darken(20).toString()),{wrapper:t.css`
      display: inline-flex;
      padding: 1px 4px;
      border-radius: ${c.shape.radius.default};
      background: ${p};
      border: 1px solid ${i};
      color: ${g};
      font-weight: ${c.typography.fontWeightRegular};
      gap: 2px;
      font-size: ${c.typography.bodySmall.fontSize};
      line-height: ${c.typography.bodySmall.lineHeight};
      align-items: center;
    `}}},19670:(Y,O,e)=>{"use strict";e.d(O,{xf:()=>D});var t=e(9892),n=e(66111),o=e(28550),s=e(18111),l=e(82229),f=e(69098),d=e(2703),r=e(53768),c=e(72990),a=e(68183),u=e(40538),i=e(4176),p=e(31403),g=e(72777);const y=18,E=50,h=150,v=1.5,C=1,m=10;class D extends n.PureComponent{render(){const{onClick:K,className:L,theme:N}=this.props,{title:z}=this.props.value,G=M(this.props);return K?n.createElement("button",{type:"button",style:G.wrapper,onClick:K,className:(0,t.cx)((0,p.gN)(N),L)},n.createElement("div",{style:G.title},z),this.renderBarAndValue()):n.createElement("div",{style:G.wrapper,className:L},z&&n.createElement("div",{style:G.title},z),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:K,showUnfilled:L,valueDisplayMode:N}=this.props,z=S(this.props);return n.createElement("div",{style:z.wrapper},N!==u.M8.Hidden&&n.createElement(g.W,{"data-testid":a.wl.components.Panels.Visualization.BarGauge.valueV2,value:K,style:z.value}),L&&n.createElement("div",{style:z.emptyBar}),n.createElement("div",{style:z.bar}))}renderRetroBars(){const{display:K,field:L,value:N,itemSpacing:z,alignmentFactors:G,orientation:I,lcdCellWidth:V,text:H,valueDisplayMode:Q,theme:oe}=this.props,{valueHeight:se,valueWidth:ie,maxBarHeight:j,maxBarWidth:de,wrapperWidth:ce,wrapperHeight:ee}=x(this.props),le=L.min??s.Hx,q=L.max??s.Z3,fe=P(I),Z=q-le,ne=fe?j:de,re=z,ve=Math.floor(ne/V),me=Math.floor((ne-re*ve)/ve),Ie=R(this.props),gt=F(G||N,Ie,ie,se,I,H),Te={width:`${ce}px`,height:`${ee}px`,display:"flex"};fe?(Te.flexDirection="column-reverse",Te.alignItems="center"):(Te.flexDirection="row",Te.alignItems="center",gt.justifyContent="flex-end");const Le=[];for(let Ye=0;Ye<ve;Ye++){const it=le+Z/ve*Ye,ht=A(it,N,K),Re={borderRadius:oe.shape.radius.default};ht.isLit?Re.backgroundImage=`radial-gradient(${ht.background} 10%, ${ht.backgroundShade})`:Re.backgroundColor=ht.background,fe?(Re.height=`${me}px`,Re.width=`${de}px`,Re.marginTop=`${re}px`):(Re.width=`${me}px`,Re.height=`${j}px`,Re.marginRight=`${re}px`),Le.push(n.createElement("div",{key:Ye.toString(),style:Re}))}return n.createElement("div",{style:Te},Le,Q!==u.M8.Hidden&&n.createElement(g.W,{"data-testid":a.wl.components.Panels.Visualization.BarGauge.valueV2,value:N,style:gt}))}}D.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:u.QH.Gradient,orientation:l.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function P(B){return B===l.wm.Vertical}function b(B){const{height:K,width:L,alignmentFactors:N,orientation:z,text:G}=B,I=N?N.title:B.value.title;if(!I)return{fontSize:0,width:0,height:0,placement:"above"};if(P(z)){const ie=G?.titleSize??14;return{fontSize:ie,width:L,height:ie*v,placement:"below"}}if(K>40){if(G?.titleSize)return{fontSize:G?.titleSize,width:0,height:G.titleSize*v,placement:"above"};const j=Math.max(Math.min(K*.45,E),17);return{fontSize:j/v,width:0,height:j,placement:"above"}}const Q=Math.max(K*.6,y)/v,oe=(0,i.X1)(I,Q),se=Math.min(oe.width+15,L*.4);return{fontSize:G?.titleSize??Q,height:0,width:se,placement:"left"}}function M(B){const K={display:"flex",overflow:"hidden",width:"100%"},L=b(B),N={fontSize:`${L.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return P(B.orientation)?(K.flexDirection="column-reverse",N.textAlign="center"):L.placement==="above"?K.flexDirection="column":(K.flexDirection="row",N.width=`${L.width}px`,N.textAlign="right",N.paddingRight="10px"),{wrapper:K,title:N}}function x(B){const{height:K,width:L,orientation:N,text:z,alignmentFactors:G,valueDisplayMode:I}=B,V=b(B),H=G??B.value,Q=(0,d.zc)(H);let oe=0,se=0,ie=0,j=0,de=0,ce=0;const ee=z?.valueSize??Math.max(V.fontSize,12),q=(0,i.X1)(Q,ee).width+m*2;return P(N)?(z?.valueSize?ie=z.valueSize*C:ie=Math.min(Math.max(K*.1,y),E),j=L,I===u.M8.Hidden&&(ie=0,j=0),oe=K-(V.height+ie),se=L,de=L,ce=K-V.height):(I===u.M8.Hidden?(ie=0,j=0):(ie=K-V.height,j=Math.max(Math.min(L*.2,h),q)),oe=K-V.height,se=L-j-V.width,V.placement==="above"?(de=L,ce=K-V.height):(de=L-V.width,ce=K)),{valueWidth:j,valueHeight:ie,maxBarWidth:se,maxBarHeight:oe,wrapperHeight:ce,wrapperWidth:de}}function A(B,K,L){if(B===null)return{background:r.R,border:r.R};const N=L?L(B).color:null;return N?K===null||isNaN(K.numeric)||B!==null&&B>K.numeric?{background:(0,o.Z)(N).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,o.Z)(N).setAlpha(.95).toRgbString(),backgroundShade:(0,o.Z)(N).setAlpha(.55).toRgbString(),border:(0,o.Z)(N).setAlpha(.9).toRgbString(),isLit:!0}:{background:r.R,border:r.R}}function T(B,K,L){const N=Math.min((B-K)/(L-K),1);return isNaN(N)?0:N}function S(B){const{displayMode:K,field:L,value:N,alignmentFactors:z,orientation:G,theme:I,text:V}=B,{valueWidth:H,valueHeight:Q,maxBarHeight:oe,maxBarWidth:se}=x(B),ie=L.min??s.Hx,j=L.max??s.Z3,de=T(N.numeric,ie,j),ce=R(B),ee=N.color??r.R,q=F(z||N,ce,H,Q,G,V),fe=K==="basic",Z={display:"flex",flexGrow:1},ne={borderRadius:I.shape.radius.default,position:"relative",zIndex:1},re={background:I.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:I.shape.radius.default,position:"relative"};if(P(G)){const ve=Math.max(de*oe,1);Z.flexDirection="column",Z.justifyContent="flex-end",ne.transition="height 1s",ne.height=`${ve}px`,ne.width=`${se}px`,re.bottom="-3px",re.width=`${H}px`,fe?(ne.background=`${(0,o.Z)(ee).setAlpha(.35).toRgbString()}`,ne.borderTop=`2px solid ${ee}`):ne.background=U(B,oe)}else{const ve=Math.max(de*se,1);Z.flexDirection="row-reverse",Z.justifyContent="flex-end",Z.alignItems="stretch",ne.transition="width 1s",ne.height=`${oe}px`,ne.width=`${ve}px`,re.left="-3px",re.height=`${Q}px`,fe?(ne.background=`${(0,o.Z)(ee).setAlpha(.35).toRgbString()}`,ne.borderRight=`2px solid ${ee}`):ne.background=U(B,se)}return{wrapper:Z,bar:ne,value:q,emptyBar:re}}function U(B,K){const{field:L,value:N,orientation:z,theme:G}=B,I=P(z)?"0deg":"90deg",V=L.min,H=L.max;let Q="",oe=0,se=(0,c.QY)(L.color?.mode);if(se.id===r.S.Thresholds){const ie=L.thresholds;for(let j=0;j<ie.steps.length;j++){const de=ie.steps[j],ce=B.theme.visualization.getColorByName(de.color),ee=ie.mode===f.H.Percentage?de.value/100:T(de.value,V,H),le=ee*K,q=Math.round(le-(le-oe)/2),fe=ie.mode===f.H.Percentage?V+(H-V)*ee:de.value;if(Q==="")Q=`linear-gradient(${I}, ${ce}, ${ce}`;else{if(N.numeric<fe)break;oe=le,Q+=` ${q}px, ${ce}`}}return Q+")"}if(se.isContinuous&&se.getColors){const ie=se.getColors(G);for(let j=0;j<ie.length;j++){const de=ie[j];if(Q==="")Q=`linear-gradient(${I}, ${de} 0px`;else{const ee=j/(ie.length-1)*K;Q+=`, ${de} ${ee}px`}}return Q+")"}return N.color??r.R}function R(B){if(B.valueDisplayMode==="text")return B.theme.colors.text.primary;const{value:K}=B;return K.color?K.color:r.R}function F(B,K,L,N,z,G){const I={color:K,height:`${N}px`,width:`${L}px`,display:"flex",alignItems:"center",lineHeight:C};let V=L;const H=(0,d.zc)(B);return P(z)?(I.fontSize=G?.valueSize??(0,i.MX)(H,V,N,C),I.justifyContent="center"):(I.fontSize=G?.valueSize??(0,i.MX)(H,V-m*2,N,C),I.justifyContent="flex-end",I.paddingLeft=`${m}px`,I.paddingRight=`${m}px`,V-=m),I}},57426:(Y,O,e)=>{"use strict";e.d(O,{w6:()=>S,pc:()=>M,IG:()=>x,ap:()=>A,jG:()=>T});var t=e(9892),n=e(66111),o=e(31403),s=e(72777),l=e(28550),f=e(82229),d=e(99098),r=e(2703),c=e(40538),a=e(16514),u=e(4176),i=e(67307);const p=1.2,g=30,y=500;class E{constructor(R){this.props=R;const{width:F,height:B,value:K,text:L}=R;this.valueColor=K.color??"gray",this.panelPadding=B>100?12:8,this.textValues=b(R),this.justifyCenter=P(R.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=F-this.panelPadding*2,this.maxTextHeight=B-this.panelPadding*2,L&&(L.titleSize&&(this.titleFontSize=L.titleSize,this.titleToAlignTo=void 0),L.valueSize&&(this.valueFontSize=L.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const R={fontSize:`${this.titleFontSize}px`,lineHeight:p};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(R.paddingRight="0.75ch"),(this.props.colorMode===M.Background||this.props.colorMode===M.BackgroundSolid)&&(R.color=(0,a.bM)(this.valueColor,this.props.theme.isDark)),R}getValueStyles(){const R={fontSize:this.valueFontSize,fontWeight:y,lineHeight:p,position:"relative",zIndex:1};switch(this.justifyCenter&&(R.textAlign="center"),this.props.colorMode){case M.Value:R.color=this.valueColor;break;case M.Background:case M.BackgroundSolid:R.color=(0,a.bM)(this.valueColor,this.props.theme.isDark);break;case M.None:R.color=this.props.theme.colors.text.primary;break}return R}getValueAndTitleContainerStyles(){const R={display:"flex"};return this.justifyCenter&&(R.alignItems="center",R.justifyContent="center",R.flexGrow=1),R}getPanelStyles(){const{width:R,height:F,theme:B,colorMode:K}=this.props,L={width:`${R}px`,height:`${F}px`,padding:`${this.panelPadding}px`,borderRadius:B.shape.borderRadius(),position:"relative",display:"flex"},N=B.isDark?1:-.7;switch(K){case M.Background:const z=(0,l.Z)(this.valueColor).darken(15*N).spin(8).toRgbString(),G=(0,l.Z)(this.valueColor).darken(5*N).spin(-8).toRgbString();L.background=`linear-gradient(120deg, ${z}, ${G})`;break;case M.BackgroundSolid:L.background=(0,l.Z)(this.valueColor).toString();break;case M.Value:L.background="transparent";break}return this.justifyCenter&&(L.alignItems="center",L.flexDirection="row"),L}renderChart(){const{sparkline:R,colorMode:F}=this.props;if(!R||R.y?.type!==d.fS.number)return null;let B,K;switch(F){case M.Background:case M.BackgroundSolid:B="rgba(255,255,255,0.4)",K=(0,l.Z)(this.valueColor).brighten(40).toRgbString();break;case M.None:case M.Value:default:K=this.valueColor,B=(0,l.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const L={custom:{drawStyle:c.l8.Line,lineWidth:1,fillColor:B,lineColor:K}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(i.b,{height:this.chartHeight,width:this.chartWidth,sparkline:R,config:L,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class h extends E{constructor(R){super(R);const F=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth*F,this.maxTextHeight,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,p,g),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.alignItems="center",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}class v extends E{constructor(R){super(R);const{width:F,height:B}=R,K=.5,L=.6,N=1-L,z=.4;this.chartWidth=F,this.chartHeight=B*K,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth*L,this.maxTextHeight*z,p,g)),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth*N,this.maxTextHeight*K,p,void 0,y))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="row",R.justifyContent="space-between",R}}class C extends E{constructor(R){super(R);const{width:F,height:B}=R,K=.15,L=.25;let N=0;this.chartHeight=B*L,this.chartWidth=F,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth,B*K,p,g),N=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-N,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=B-this.titleFontSize*p-this.valueFontSize*p}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.justifyContent="center",R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="column",R}}class m extends E{constructor(R){super(R);const{height:F}=R,B=.15;let K=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth,F*B,p,g),K=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-K,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.flexGrow=1,R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}function D(U){const{width:R,height:F,sparkline:B}=U;return R/F>2.5?F>50&&B&&B.y.values.length>1?new v(U):new h(U):F>100&&B&&B.y.values.length>1?new C(U):new m(U)}function P(U,R){return U===A.Center?!0:(R??"").length===0}function b(U){const{value:R,alignmentFactors:F,count:B}=U;let{textMode:K}=U;const L=F?F.title:R.title,N=(0,r.zc)(F||R);switch(K===T.Auto&&(B??1)===1&&(K=T.Value),K){case T.Name:return{...R,title:void 0,prefix:void 0,suffix:void 0,text:R.title||"",titleToAlignTo:void 0,valueToAlignTo:L??"",tooltip:(0,r.zc)(R)};case T.Value:return{...R,title:void 0,titleToAlignTo:void 0,valueToAlignTo:N,tooltip:R.title};case T.None:return{numeric:R.numeric,color:R.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${R.title}
Value: ${(0,r.zc)(R)}`};case T.ValueAndName:default:return{...R,titleToAlignTo:L,valueToAlignTo:N}}}var M=(U=>(U.Background="background",U.BackgroundSolid="background_solid",U.None="none",U.Value="value",U))(M||{}),x=(U=>(U.None="none",U.Line="line",U.Area="area",U))(x||{}),A=(U=>(U.Auto="auto",U.Center="center",U))(A||{}),T=(U=>(U.Auto="auto",U.Value="value",U.ValueAndName="value_and_name",U.Name="name",U.None="none",U))(T||{});class S extends n.PureComponent{render(){const{onClick:R,className:F,hasLinks:B,theme:K}=this.props,L=D(this.props),N=L.getPanelStyles(),z=L.getValueAndTitleContainerStyles(),G=L.getValueStyles(),I=L.getTitleStyles(),V=L.textValues,H=B?void 0:V.tooltip;return R?n.createElement("button",{type:"button",className:(0,t.cx)((0,o.gN)(K),F),style:N,onClick:R,title:H},n.createElement("div",{style:z},V.title&&n.createElement("div",{style:I},V.title),n.createElement(s.W,{value:V,style:G})),L.renderChart()):n.createElement("div",{className:F,style:N,title:H},n.createElement("div",{style:z},V.title&&n.createElement("div",{style:I},V.title),n.createElement(s.W,{value:V,style:G})),L.renderChart())}}S.defaultProps={justifyMode:"auto"}},85951:(Y,O,e)=>{"use strict";e.d(O,{_:()=>d});var t=e(9892),n=e(66111),o=e(55271),s=e.n(o),l=e(72648),f=e(69636);const d=(0,n.forwardRef)(({name:c,value:a,hidden:u,facets:i,onClick:p,className:g,loading:y,searchTerm:E,active:h,style:v,title:C,highlightParts:m,...D},P)=>{const b=(0,l.l4)(),M=r(b),x=E?[E]:[],A=(0,n.useCallback)(S=>{p&&!u&&p(c,a,S)},[p,c,u,a]);let T=a||c;return i&&(T=`${T} (${i})`),n.createElement("button",{key:T,ref:P,onClick:A,style:v,title:C||T,type:"button",role:"option","aria-selected":!!h,className:(0,t.cx)(M.base,h&&M.active,y&&M.loading,u&&M.hidden,g,p&&!u&&M.hover),...D},m!==void 0?n.createElement(f.H,{text:T,highlightClassName:M.matchHighLight,highlightParts:m}):n.createElement(s(),{textToHighlight:T,searchWords:x,autoEscape:!0,highlightClassName:M.matchHighLight}))});d.displayName="Label";const r=c=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${c.typography.size.sm};
    line-height: ${c.typography.bodySmall.lineHeight};
    background-color: ${c.colors.background.secondary};
    color: ${c.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${c.spacing(.5)};
    border-radius: ${c.shape.borderRadius()};
    border: none;
    margin-right: ${c.spacing(1)};
    margin-bottom: ${c.spacing(.5)};
  `,loading:t.css`
    font-weight: ${c.typography.fontWeightMedium};
    background-color: ${c.colors.primary.shade};
    color: ${c.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${c.colors.text.primary};
      }
      50% {
        color: ${c.colors.text.secondary};
      }
      100% {
        color: ${c.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${c.typography.fontWeightMedium};
    background-color: ${c.colors.primary.main};
    color: ${c.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${c.components.textHighlight.text};
    background-color: ${c.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(Y,O,e)=>{"use strict";e.d(O,{Qj:()=>u,_7:()=>h,c9:()=>y,fW:()=>i,gN:()=>E,zx:()=>a});var t=e(9892),n=e(66111),o=e(72648),s=e(85419),l=e(73267),f=e(39904),d=e(61860);const r=null,c=null,a=n.forwardRef(({variant:v="primary",size:C="md",fill:m="solid",icon:D,fullWidth:P,children:b,className:M,type:x="button",tooltip:A,tooltipPlacement:T,...S},U)=>{const R=(0,o.l4)(),F=i({theme:R,size:C,variant:v,fill:m,fullWidth:P,iconOnly:!b}),B=n.createElement("button",{className:(0,t.cx)(F.button,M),type:x,...S,ref:A?void 0:U},D&&n.createElement(f.J,{name:D,size:C,className:F.icon}),b&&n.createElement("span",{className:F.content},b));return A?n.createElement(d.u,{ref:U,content:A,placement:T},B):B});a.displayName="Button";const u=n.forwardRef(({variant:v="primary",size:C="md",fill:m="solid",icon:D,fullWidth:P,children:b,className:M,onBlur:x,onFocus:A,disabled:T,tooltip:S,tooltipPlacement:U,...R},F)=>{const B=(0,o.l4)(),K=i({theme:B,fullWidth:P,size:C,variant:v,fill:m,iconOnly:!b}),L=(0,t.cx)(K.button,{[(0,t.css)(K.disabled,{pointerEvents:"none"})]:T},M),N=n.createElement("a",{className:L,...R,tabIndex:T?-1:0,ref:S?void 0:F},D&&n.createElement(f.J,{name:D,size:C,className:K.icon}),b&&n.createElement("span",{className:K.content},b));return S?n.createElement(d.u,{ref:F,content:S,placement:U},N):N});u.displayName="LinkButton";const i=v=>{const{theme:C,variant:m,fill:D="solid",size:P,iconOnly:b,fullWidth:M}=v,{height:x,padding:A,fontSize:T}=(0,l.iL)(P,C),S=y(C,m,D),U=g(C,m,D),R=(0,s.getFocusStyles)(C),F=C.spacing.gridSize*A-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:T,fontWeight:C.typography.fontWeightMedium,fontFamily:C.typography.fontFamily,padding:`0 ${F}px`,height:C.spacing(x),lineHeight:`${C.spacing.gridSize*x-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:C.shape.borderRadius(1),"&:focus":R,"&:focus-visible":R,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(C),...M&&{flexGrow:1,justifyContent:"center"},...S,":disabled":U,"&[disabled]":U}),disabled:(0,t.css)(U),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${C.spacing(0,1,0,.5)};
    `,icon:b?(0,t.css)({marginRight:C.spacing(-A/2),marginLeft:C.spacing(-A/2)}):(0,t.css)({marginRight:C.spacing(A/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function p(v,C,m){let D=C.border,P="transparent",b="transparent";return C.name==="secondary"&&(P=C.border,b=v.colors.emphasize(C.border,.25),D=v.colors.border.strong),m==="outline"?{background:"transparent",color:C.text,border:`1px solid ${D}`,transition:v.transitions.create(["background-color","border-color","color"],{duration:v.transitions.duration.short}),"&:hover":{background:C.transparent,borderColor:v.colors.emphasize(D,.25),color:C.text}}:m==="text"?{background:"transparent",color:C.text,border:"1px solid transparent",transition:v.transitions.create(["background-color","color"],{duration:v.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:C.transparent,textDecoration:"none"}}:{background:C.main,color:C.contrastText,border:`1px solid ${P}`,transition:v.transitions.create(["background-color","box-shadow","border-color","color"],{duration:v.transitions.duration.short}),"&:hover":{background:C.shade,color:C.contrastText,boxShadow:v.shadows.z1,borderColor:b}}}function g(v,C,m){const D={cursor:"not-allowed",boxShadow:"none",color:v.colors.text.disabled,transition:"none"};return m==="text"?{...D,background:"transparent",border:"1px solid transparent"}:m==="outline"?{...D,background:"transparent",border:`1px solid ${v.colors.border.weak}`}:{...D,background:v.colors.action.disabledBackground,border:"1px solid transparent"}}function y(v,C,m){switch(C){case"secondary":return p(v,v.colors.secondary,m);case"destructive":return p(v,v.colors.error,m);case"success":return p(v,v.colors.success,m);case"primary":default:return p(v,v.colors.primary,m)}}const E=v=>t.css`
    background: transparent;
    color: ${v.colors.text.primary};
    border: none;
    padding: 0;
  `,h=v=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(Y,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=(0,n.forwardRef)(({className:f,children:d,...r},c)=>{const a=(0,o.wW)(l);return n.createElement("div",{ref:c,className:(0,t.cx)("button-group",a.wrapper,f),...r},d)});s.displayName="ButtonGroup";const l=f=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(Y,O,e)=>{"use strict";e.d(O,{f:()=>s});var t=e(9892),n=e(66111),o=e(7804);const s=({className:f,children:d})=>{const r=l();return n.createElement("div",{className:(0,t.cx)(r,f)},d)},l=(0,o.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(Y,O,e)=>{"use strict";e.d(O,{O:()=>a});var t=e(9892),n=e(81494),o=e(66111),s=e(7804),l=e(72648),f=e(31403),d=e(94229),r=e(39904);const c=(0,s.B)(u=>({popup:t.css`
      label: popup;
      z-index: ${u.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),a=u=>{const{onChange:i,className:p,loadData:g,icon:y,buttonProps:E,hideDownIcon:h,variant:v,disabled:C,...m}=u,D=(0,l.l4)(),P=c(D);let b=u.children;return h||(b=[u.children,o.createElement(r.J,{key:"down-icon",name:"angle-down",className:P.icons.right})]),o.createElement(n.Z,{onChange:(0,d.K)(i),loadData:(0,d.p)(g),dropdownClassName:P.popup,...m,expandIcon:null},o.createElement(f.zx,{icon:y,disabled:C,variant:v,...E??{}},b))};a.displayName="ButtonCascader"},97097:(Y,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({message:f,callToActionElement:d,footer:r,className:c})=>{const a=(0,o.wW)(l);return n.createElement("div",{className:(0,t.cx)([a.wrapper,c])},f&&n.createElement("div",{className:a.message},f),d,r&&n.createElement("div",{className:a.footer},r))},l=f=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${f.spacing(3)};
    background: ${f.colors.background.secondary};
    border-radius: ${f.shape.radius.default};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${f.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${f.spacing(3)}};
  `})},72948:(Y,O,e)=>{"use strict";e.d(O,{L:()=>P,Z:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(85419),l=e(35633);const f=n.createContext(null),d=({disabled:b,href:M,onClick:x,children:A,isSelected:T,className:S,...U})=>{const R=(0,n.useMemo)(()=>n.Children.toArray(A).some(N=>n.isValidElement(N)&&N.type.displayName===r.displayName),[A]),F=b||!x&&!M,B=x&&!b?x:void 0,K=(0,o.l4)(),L=(0,l.$)(K,b,F,T);return n.createElement(l._,{disableEvents:b,disableHover:F,isSelected:T,className:(0,t.cx)(L.container,S),...U},n.createElement(f.Provider,{value:{href:M,onClick:B,disabled:b,isSelected:T}},!R&&n.createElement(r,null),A))},r=({children:b,className:M,"aria-label":x})=>{const A=(0,n.useContext)(f),T=(0,o.wW)(c),{href:S,onClick:U,isSelected:R}=A??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(T.heading,M)},S?n.createElement("a",{href:S,className:T.linkHack,"aria-label":x,onClick:U},b):U?n.createElement("button",{onClick:U,className:T.linkHack,"aria-label":x,type:"button"},b):n.createElement(n.Fragment,null,b),R!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:R}))};r.displayName="Heading";const c=b=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:b.typography.size.md,letterSpacing:"inherit",lineHeight:b.typography.body.lineHeight,color:b.colors.text.primary,fontWeight:b.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:b.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(b),zIndex:1}}})}),a=({children:b,className:M})=>{const x=(0,o.wW)(u);return n.createElement("div",{className:(0,t.cx)(x.tagList,M)},b)};a.displayName="Tags";const u=b=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),i=({children:b,className:M})=>{const x=(0,o.wW)(p);return n.createElement("p",{className:(0,t.cx)(x.description,M)},b)};i.displayName="Description";const p=b=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:b.spacing(1,0,0),color:b.colors.text.secondary,lineHeight:b.typography.body.lineHeight})}),g=({children:b,align:M="start",className:x})=>{const A=(0,o.wW)(y);return n.createElement("div",{className:(0,t.cx)(A.media,x,t.css`
          align-self: ${M};
        `)},b)};g.displayName="Figure";const y=b=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:b.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),E=(0,n.memo)(({children:b,className:M,separator:x="|"})=>{const A=(0,o.wW)(h);let T=b;const S=n.Children.toArray(b).filter(Boolean);return S.length?(T=S.map((U,R)=>n.createElement("div",{key:`element_${R}`,className:A.metadataItem},U)),S.length>1&&x&&(T=S.reduce((U,R,F)=>[U,n.createElement("span",{key:`separator_${F}`,className:A.separator},x),R])),n.createElement("div",{className:(0,t.cx)(A.metadata,M)},T)):null});E.displayName="Meta";const h=b=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:b.typography.size.sm,color:b.colors.text.secondary,margin:b.spacing(.5,0,0),lineHeight:b.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${b.spacing(1)}`})}),v=({children:b,disabled:M,variant:x,className:A})=>{const T=(0,o.wW)(C),U=(0,n.useContext)(f)?.disabled||M,R=x==="primary"?T.actions:T.secondaryActions;return n.createElement("div",{className:(0,t.cx)(R,A)},n.Children.map(b,F=>n.isValidElement(F)?(0,n.cloneElement)(F,{disabled:U,...F.props}):null))},C=b=>({actions:(0,t.css)({gridArea:"Actions",marginTop:b.spacing(2),"& > *":{marginRight:b.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:b.colors.text.secondary,marginTtop:b.spacing(2),"& > *":{marginRight:`${b.spacing(1)} !important`}})}),m=({children:b,disabled:M,className:x})=>n.createElement(v,{variant:"primary",disabled:M,className:x},b);m.displayName="Actions";const D=({children:b,disabled:M,className:x})=>n.createElement(v,{variant:"secondary",disabled:M,className:x},b);D.displayName="SecondaryActions";const P=b=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...c(b),...h(b),...p(b),...y(b),...C(b),...u(b)});d.Heading=r,d.Tags=a,d.Figure=g,d.Meta=E,d.Actions=m,d.SecondaryActions=D,d.Description=i},35633:(Y,O,e)=>{"use strict";e.d(O,{$:()=>c,_:()=>r});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(85419);const f=({children:a,href:u})=>{const{inner:i}=(0,o.wW)(d);return u?n.createElement("a",{className:i,href:u},a):n.createElement(n.Fragment,null,a)},d=a=>({inner:(0,t.css)({display:"flex",width:"100%",padding:a.spacing(2)})}),r=({children:a,disableEvents:u,disableHover:i,isSelected:p,className:g,href:y,...E})=>{const h=(0,o.l4)(),{oldContainer:v}=c(h,u,i,p);return n.createElement("div",{...E,className:(0,t.cx)(v,g)},n.createElement(f,{href:y},a))},c=(0,s.B)((a,u=!1,i=!1,p)=>{const g=p!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:a.spacing(2),background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),marginBottom:"8px",pointerEvents:u?"none":"auto",transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!i&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":l.getFocusStyles(a)},...g&&{cursor:"pointer"},...p&&{outline:`solid 2px ${a.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),position:"relative",pointerEvents:u?"none":"auto",marginBottom:a.spacing(1),transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!i&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":l.getFocusStyles(a)}})}})},95093:(Y,O,e)=>{"use strict";e.d(O,{v:()=>u});var t=e(9892),n=e(58635),o=e(81494),s=e(66111),l=e(39904),f=e(46967),d=e(8581),r=e(94229);const c=(0,t.css)(`
&:focus{
  outline: none;
}
`),a="/";class u extends s.PureComponent{constructor(p){super(p),this.flattenOptions=(h,v=[])=>{let C=[];for(const m of h){const D=[...v];D.push(m),m.items?C=[...C,...this.flattenOptions(m.items,D)]:C.push({singleLabel:D[D.length-1].label,label:D.map(P=>P.label).join(this.props.separator||` ${a} `),value:D.map(P=>P.value)})}return C},this.getSearchableOptions=(0,n.Z)(h=>this.flattenOptions(h)),this.onChange=(h,v)=>{const C=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?v.map(m=>m.label).join(this.props.separator||a):v[v.length-1].label;this.setState({rcValue:h,focusCascade:!0,activeLabel:C}),this.props.onSelect(v[v.length-1].value)},this.onSelect=h=>{const v=h.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?h.label:h.singleLabel||"",rcValue:v,isSearching:!1}),this.props.onSelect(v[v.length-1])},this.onCreateOption=h=>{this.setState({activeLabel:h,rcValue:[],isSearching:!1}),this.props.onSelect(h)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=h=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(h.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=h=>{h===""&&this.setState({isSearching:!1})};const g=this.getSearchableOptions(p.options),{rcValue:y,activeLabel:E}=this.setInitialValue(g,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:E}}setInitialValue(p,g){if(!g)return{rcValue:[],activeLabel:""};for(const y of p){const E=y.value||[];if(E.indexOf(g)===E.length-1)return{rcValue:E,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:g}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:g,placeholder:y,width:E,changeOnSelect:h,options:v}=this.props,{focusCascade:C,isSearching:m,rcValue:D,activeLabel:P}=this.state,b=this.getSearchableOptions(v);return s.createElement("div",null,m?s.createElement(d.Ph,{allowCustomValue:p,placeholder:y,autoFocus:!C,onChange:this.onSelect,onBlur:this.onBlur,options:b,onCreateOption:this.onCreateOption,formatCreateLabel:g,width:E,onInputChange:this.onSelectInputChange}):s.createElement(o.Z,{onChange:(0,r.K)(this.onChange),options:v,changeOnSelect:h,value:D.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:c},s.createElement(f.I,{autoFocus:this.props.autoFocus,width:E,placeholder:y,onBlur:this.onBlurCascade,value:P,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:C?s.createElement(l.J,{name:"angle-up"}):s.createElement(l.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}u.defaultProps={changeOnSelect:!0}},94229:(Y,O,e)=>{"use strict";e.d(O,{K:()=>t,p:()=>n});const t=l=>(f,d)=>{l&&l(f.map(r=>String(r)),o(d))},n=l=>f=>{l&&l(o(f))},o=l=>l.map(s),s=l=>({value:l.value??"",label:l.label})},94437:(Y,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(66111);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const l=this.myRef.current;(!l||!l.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(Y,O,e)=>{"use strict";e.d(O,{m:()=>c});var t=e(9892),n=e(66111),o=e(37951),s=e(72648),l=e(31403),f=e(39904),d=e(4784);const r=2*1e3;function c({onClipboardCopy:i,onClipboardError:p,children:g,getText:y,icon:E,variant:h,...v}){const C=(0,s.wW)(u),[m,D]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return m&&(M=setTimeout(()=>{D(!1)},r)),()=>{window.clearTimeout(M)}},[m]);const P=(0,n.useRef)(null),b=(0,n.useCallback)(async()=>{const M=y();try{await a(M,P),D(!0),i?.(M)}catch(x){p?.(M,x)}},[y,i,p]);return n.createElement(n.Fragment,null,m&&n.createElement(d.K,{placement:"top",referenceElement:P.current},n.createElement(o.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(l.zx,{onClick:b,icon:E,variant:m?"success":h,"aria-label":m?"Copied":void 0,...v,className:(0,t.cx)(C.button,m&&C.successButton,v.className),ref:P},g,m&&n.createElement("div",{className:C.successOverlay},n.createElement(f.J,{name:"check"}))))}const a=async(i,p)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(i);{const g=document.createElement("textarea");p.current?.appendChild(g),g.value=i,g.focus(),g.select(),document.execCommand("copy"),g.remove()}},u=i=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(Y,O,e)=>{"use strict";e.d(O,{s:()=>c});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(67487),f=e(39904),d=e(72648),r=e(85419);const c=({label:u,isOpen:i,onToggle:p,className:g,contentClassName:y,children:E,labelId:h,loading:v=!1,headerDataTestId:C,contentDataTestId:m})=>{const[D,P]=(0,s.useState)(i),b=(0,d.wW)(a),M=T=>{T.target instanceof HTMLElement&&T.target.tagName==="A"||(T.preventDefault(),T.stopPropagation(),p?.(!D),P(!D))},{current:x}=(0,s.useRef)((0,n.uniqueId)()),A=h??`collapse-label-${x}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(b.header,g)},s.createElement("button",{type:"button",id:`collapse-button-${x}`,className:b.button,onClick:M,"aria-expanded":D&&!v,"aria-controls":`collapse-content-${x}`,"aria-labelledby":A},v?s.createElement(l.$,{className:b.spinner}):s.createElement(f.J,{name:D?"angle-up":"angle-down",className:b.icon})),s.createElement("div",{className:b.label,id:`collapse-label-${x}`,"data-testid":C},u)),D&&s.createElement("div",{id:`collapse-content-${x}`,className:(0,t.cx)(b.content,y),"data-testid":m},E))},a=u=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:u.typography.size.lg,padding:`${u.spacing(.5)} 0`,"&:focus-within":(0,r.getFocusStyles)(u)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:u.colors.text.secondary}),content:(0,t.css)({padding:`${u.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:u.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(Y,O,e)=>{"use strict";e.d(O,{U:()=>r,y:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(39904);const f=c=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${c.spacing(1)};
    background-color: ${c.colors.background.primary};
    border: 1px solid ${c.colors.border.weak};
    position: relative;
    border-radius: ${c.shape.radius.default};
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${c.spacing(c.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${c.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${c.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${c.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${c.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${c.typography.fontWeightMedium};
    margin-right: ${c.spacing(1)};
    font-size: ${c.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${c.spacing(.25,1,0,-1)};
  `}),d=({isOpen:c,onToggle:a,...u})=>{const[i,p]=(0,n.useState)(c);return n.createElement(r,{isOpen:i,collapsible:!0,...u,onToggle:()=>{p(!i),a&&a(!i)}})},r=({isOpen:c,label:a,loading:u,collapsible:i,onToggle:p,className:g,children:y})=>{const E=(0,o.wW)(s.gN),h=(0,o.wW)(f),v=()=>{p&&p(!c)},C=(0,t.cx)([h.collapse,g]),m=u?(0,t.cx)([h.loader,h.loaderActive]):(0,t.cx)([h.loader]),D=i?(0,t.cx)([h.header]):(0,t.cx)([h.headerCollapsed]);return n.createElement("div",{className:C},n.createElement("button",{type:"button",className:(0,t.cx)(E,D),onClick:v},i&&n.createElement(l.J,{className:h.icon,name:c?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([h.headerLabel])},a)),c&&n.createElement("div",{className:(0,t.cx)([h.collapseBody])},n.createElement("div",{className:m}),n.createElement("div",{className:h.bodyContentWrapper},y)))};r.displayName="Collapse"},76161:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>c});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(28550),f=e(72648),d=e(46967);const r=(0,s.forwardRef)(({color:i,onChange:p,isClearable:g=!1,onClick:y,onBlur:E,disabled:h,buttonAriaLabel:v,...C},m)=>{const[D,P]=(0,s.useState)(i),[b,M]=(0,s.useState)(i),x=(0,s.useMemo)(()=>(0,n.debounce)(p,100),[]);(0,s.useEffect)(()=>{const S=(0,l.Z)(i);S.isValid()&&i!==b&&(P(S.toString()),M(i))},[i,b]);const A=S=>{const{value:U}=S.currentTarget;if(P(U),U===""&&g){x(U);return}const R=(0,l.Z)(U);R.isValid()&&x(R.toString())},T=S=>{(0,l.Z)(D).isValid()||P(i),E?.(S)};return s.createElement(d.I,{...C,value:D,onChange:A,disabled:h,onClick:y,onBlur:T,addonBefore:s.createElement(a,{onClick:y,ariaLabel:v,disabled:h,color:i}),ref:m})});r.displayName="ColorInput";const c=r,a=({color:i,onClick:p,disabled:g,ariaLabel:y})=>{const E=(0,f.wW)(u);return s.createElement("button",{type:"button",onClick:p,"aria-label":y,disabled:g||!p,className:(0,t.cx)(E,t.css`
          background-color: ${i};
        `)})},u=i=>t.css`
  height: 100%;
  width: ${i.spacing.gridSize*4}px;
  border-radius: ${i.shape.borderRadius()} 0 0 ${i.shape.borderRadius()};
  border: 1px solid ${i.colors.border.medium};
`},90208:(Y,O,e)=>{"use strict";e.d(O,{sp:()=>p,zH:()=>i});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(66120),f=e(56921),d=e(39604),r=e(560),c=e(98671),a=e(43598);const u=(y,E="ColorPicker")=>{var h;return h=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:v,children:C,onChange:m}=this.props,D=g(v),P=n.createElement(y,{...this.props,children:null,onChange:m});return n.createElement(d.D,{content:P,hideAfter:300},(b,M,x)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(f.J,{...x,referenceElement:this.pickerTriggerRef.current,wrapperClassName:D.colorPicker,onMouseLeave:M,onMouseEnter:b,onKeyDown:A=>(0,l.i)(A,M)}),C?C({ref:this.pickerTriggerRef,showColorPicker:b,hideColorPicker:M}):n.createElement(c.b,{ref:this.pickerTriggerRef,onClick:b,onMouseLeave:M,color:v.visualization.getColorByName(this.props.color||"#000000")})))}},h.displayName=E,h},i=(0,o.HE)(u(r.h,"ColorPicker")),p=(0,o.HE)(u(a.j,"SeriesColorPicker")),g=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(Y,O,e)=>{"use strict";e.d(O,{T:()=>a});var t=e(9892),n=e(66111),o=e(72317),s=e(193),l=e(5680),f=e(72648),d=e(94437),r=e(76161),c=e(96639);const a=(0,n.forwardRef)(({value:i="",onChange:p,returnColorAs:g="rgb",...y},E)=>{const[h,v]=(0,n.useState)(i),[C,m]=(0,n.useState)(!1),D=(0,f.l4)(),P=(0,f.wW)(u),b=(0,f.wW)(c.W);return(0,s.Z)(M=>{if(M===i)return;if(!M){p("");return}const x=D.visualization.getColorByName(M);p(g==="rgb"?l.asRgbString(x):l.asHexString(x))},500,[h]),n.createElement(d.L,{onClick:()=>m(!1)},n.createElement("div",{className:P.wrapper},C&&!y.disabled&&n.createElement(o.ef,{"data-testid":"color-popover",color:h,onChange:v,className:(0,t.cx)(b.root,P.picker)}),n.createElement(r.Z,{...y,theme:D,color:h,onChange:v,buttonAriaLabel:"Open color picker",onClick:()=>m(!0),onBlur:()=>m(!1),ref:E,isClearable:!0})))});a.displayName="ColorPickerInput";const u=i=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(Y,O,e)=>{"use strict";e.d(O,{h:()=>h});var t=e(9892),n=e(83962),o=e(66111),s=e(5680),l=e(72648),f=e(7804),d=e(98671),r=e(82897);function c(C,m){const D=new Array(C.length);for(let P=0;P<C.length;P++){const b=C.length-1-P;D[P]=m(C[b],b,C)}return D}const u=({hue:C,selectedColor:m,onColorSelect:D,...P})=>{const b=(0,r.upperFirst)(C.name),M=(0,l.wW)(i);return o.createElement("div",{className:M.colorRow},o.createElement("div",{className:M.colorLabel},b),o.createElement("div",{...P,className:M.swatchRow},c(C.shades,x=>o.createElement(d.b,{key:x.name,"aria-label":x.name,variant:x.primary?d.$.Large:d.$.Small,isSelected:x.name===m,color:x.color,onClick:()=>D(x.name)}))))},i=C=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${C.spacing(2)};
      padding: ${C.spacing(.5,0)};

      &:hover {
        background: ${C.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${C.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),p=({color:C,onChange:m})=>{const D=(0,l.l4)(),P=(0,l.wW)(g),b=[];for(const M of D.visualization.hues)b.push(o.createElement(u,{key:M.name,selectedColor:C,hue:M,onColorSelect:m}));return o.createElement(o.Fragment,null,o.createElement("div",{className:P.swatches},b),o.createElement("div",{className:P.extraColors},o.createElement(d.b,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>m("transparent")}),o.createElement(d.b,{isSelected:C==="text",color:D.colors.text.primary,label:"Text color",onClick:()=>m("text")})))},g=C=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(96639);class E extends o.Component{constructor(m){super(m),this.getTabClassName=D=>{const{activePicker:P}=this.state;return`ColorPickerPopover__tab ${P===D&&"ColorPickerPopover__tab--active"}`},this.handleChange=D=>{const{onChange:P,enableNamedColors:b,theme:M}=this.props;if(b)return P(D);P(s.asHexString(M.visualization.getColorByName(D)))},this.onTabChange=D=>()=>this.setState({activePicker:D}),this.renderPicker=()=>{const{activePicker:D}=this.state,{color:P}=this.props;switch(D){case"spectrum":return o.createElement(y.Z,{color:P,onChange:this.handleChange});case"palette":return o.createElement(p,{color:P,onChange:this.handleChange});default:return this.renderCustomPicker(D)}},this.renderCustomPicker=D=>{const{customPickers:P,color:b,theme:M}=this.props;return P?o.createElement(P[D].tabComponent,{color:b,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:D}=this.props;return D?o.createElement(o.Fragment,null,Object.keys(D).map(P=>o.createElement("button",{className:this.getTabClassName(P),onClick:this.onTabChange(P),key:P},D[P].name))):null},this.state={activePicker:"palette"}}render(){const{theme:m}=this.props,D=v(m);return o.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},o.createElement("div",{tabIndex:-1,className:D.colorPickerPopover},o.createElement("div",{className:D.colorPickerPopoverTabs},o.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),o.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),o.createElement("div",{className:D.colorPickerPopoverContent},this.renderPicker())))}}const h=(0,l.HE)(E);h.displayName="ColorPickerPopover";const v=(0,f.B)(C=>({colorPickerPopover:t.css`
      border-radius: ${C.shape.borderRadius()};
      box-shadow: ${C.shadows.z3};
      background: ${C.colors.background.primary};
      border: 1px solid ${C.colors.border.weak};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${C.spacing(1,0)};
        background: ${C.colors.background.secondary};
        color: ${C.colors.text.secondary};
        font-size: ${C.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${C.colors.text.primary};
        font-weight: ${C.typography.fontWeightMedium};
        background: ${C.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${C.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${C.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${C.shape.borderRadius()} ${C.shape.borderRadius()} 0 0;
    `}))},98671:(Y,O,e)=>{"use strict";e.d(O,{$:()=>d,b:()=>r});var t=e(9892),n=e(83962),o=e(66111),s=e(28550),l=e(68183),f=e(72648),d=(a=>(a.Small="small",a.Large="large",a))(d||{});const r=o.forwardRef(({color:a,label:u,variant:i="small",isSelected:p,"aria-label":g,...y},E)=>{const h=(0,f.l4)(),{isFocusVisible:v,focusProps:C}=(0,n.Fx)(),m=c(h,i,a,v,p),D=!!u,P=`${g||u} color`;return o.createElement("div",{ref:E,className:m.wrapper,"data-testid":l.wl.components.ColorSwatch.name,...y},D&&o.createElement("span",{className:m.label},u),o.createElement("button",{className:m.swatch,...C,"aria-label":P}))}),c=(a,u,i,p,g)=>{const y=(0,s.Z)(i),h=u==="small"?"16px":"32px";let v="none";return y.getAlpha()<.1&&(v=`2px solid ${a.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:a.spacing(1)}),swatch:(0,t.css)({width:h,height:h,background:`${i}`,border:v,borderRadius:"50%",outlineOffset:"1px",outline:p?`2px solid  ${a.colors.primary.main}`:"none",boxShadow:g?`inset 0 0 0 2px ${i}, inset 0 0 0 4px ${a.colors.getContrastText(i)}`:"none",transition:a.transitions.create(["transform"],{duration:a.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};r.displayName="ColorSwatch"},43598:(Y,O,e)=>{"use strict";e.d(O,{j:()=>f,q:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(18979),l=e(560);const f=c=>{const a=(0,o.wW)(r),{yaxis:u,onToggleAxis:i,color:p,...g}=c,y=i?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:a.colorPickerAxisSwitch,labelClass:a.colorPickerAxisSwitchLabel,checked:u===2,onChange:()=>{i&&i()}})}}}:void 0;return n.createElement(l.h,{...g,color:p||"#000000",customPickers:y})},d=(0,o.HE)(f),r=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(Y,O,e)=>{"use strict";e.d(O,{W:()=>a,Z:()=>u});var t=e(9892),n=e(66111),o=e(72317),s=e(193),l=e(28550),f=e(5680),d=e(72648),r=e(76161);const c=({color:i,onChange:p})=>{const[g,y]=(0,n.useState)(i);(0,s.Z)(C=>{p(f.asHexString(E.visualization.getColorByName(C)))},500,[g]);const E=(0,d.l4)(),h=(0,d.wW)(a),v=(0,n.useMemo)(()=>g.startsWith("rgba")?g:(0,l.Z)(E.visualization.getColorByName(i)).toRgbString(),[g,E,i]);return n.createElement("div",{className:h.wrapper},n.createElement(o.ef,{className:h.root,color:v,onChange:y}),n.createElement(r.Z,{theme:E,color:v,onChange:y,className:h.colorInput}))},a=i=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${i.shape.borderRadius(1)} ${i.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${i.shape.borderRadius(1)} ${i.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${i.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${i.spacing(2)};
        width: ${i.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${i.spacing(2)};
  `}),u=c},71657:(Y,O,e)=>{"use strict";e.d(O,{p:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(31403);class f extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=a=>{a&&a.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=a=>{a&&a.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=a=>{a&&a.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:a,className:u,size:i,disabled:p,confirmText:g,confirmVariant:y,children:E}=this.props,h=r(a),v=(0,t.cx)(u,this.state.showConfirm?h.buttonHide:h.buttonShow,p&&h.buttonDisabled),C=(0,t.cx)(h.confirmButton,this.state.showConfirm?h.confirmButtonShow:h.confirmButtonHide),m=p?()=>{}:this.onClickButton;return n.createElement("span",{className:h.buttonContainer},n.createElement("div",{className:(0,t.cx)(p&&h.disabled)},typeof E=="string"?n.createElement("span",{className:v},n.createElement(l.zx,{size:i,fill:"text",onClick:m,ref:this.mainButtonRef},E)):n.createElement("span",{className:v,onClick:m},E)),n.createElement("span",{className:C},n.createElement(l.zx,{size:i,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},g),n.createElement(l.zx,{size:i,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const d=(0,o.HE)(f),r=(0,s.B)(c=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${c.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${c.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));d.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},d.displayName="ConfirmButton"},13626:(Y,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(66111),n=e(31403),o=e(71657);const s=({size:l,disabled:f,onConfirm:d,"aria-label":r,closeOnConfirm:c})=>t.createElement(o.p,{confirmText:"Delete",confirmVariant:"destructive",size:l||"md",disabled:f,onConfirm:d,closeOnConfirm:c},t.createElement(n.zx,{"aria-label":r,variant:"destructive",icon:"times",size:l||"sm"}))},98102:(Y,O,e)=>{"use strict";e.d(O,{s:()=>c});var t=e(9892),n=e(66111),o=e(68183),s=e(52081),l=e(46967),f=e(72648),d=e(31403),r=e(35029);const c=({isOpen:u,title:i,body:p,description:g,confirmText:y,confirmVariant:E="destructive",confirmationText:h,dismissText:v="Cancel",dismissVariant:C="secondary",alternativeText:m,modalClass:D,icon:P="exclamation-triangle",onConfirm:b,onDismiss:M,onAlternative:x,confirmButtonVariant:A="destructive"})=>{const[T,S]=(0,n.useState)(Boolean(h)),U=(0,f.wW)(a),R=(0,n.useRef)(null),F=B=>{S(h?.localeCompare(B.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{u&&R.current?.focus()},[u]),(0,n.useEffect)(()=>{u&&S(Boolean(h))},[u,h]),n.createElement(r.u,{className:(0,t.cx)(U.modal,D),title:i,icon:P,isOpen:u,onDismiss:M},n.createElement("div",{className:U.modalText},p,g?n.createElement("div",{className:U.modalDescription},g):null,h?n.createElement("div",{className:U.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(l.I,{placeholder:`Type ${h} to confirm`,onChange:F}))):null),n.createElement(r.u.ButtonRow,null,n.createElement(d.zx,{variant:C,onClick:M},v),n.createElement(d.zx,{variant:A,onClick:b,disabled:T,ref:R,"data-testid":o.wl.pages.ConfirmModal.delete},y),x?n.createElement(d.zx,{variant:"primary",onClick:x},m):null))},a=u=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:u.typography.h5.fontSize,color:u.colors.text.primary}),modalDescription:(0,t.css)({fontSize:u.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:u.spacing(1)})})},30909:(Y,O,e)=>{"use strict";e.d(O,{x:()=>f});var t=e(66111),n=e(17650),o=e(68183),s=e(95130),l=e(85511);const f=t.memo(({x:d,y:r,onClose:c,focusOnOpen:a=!0,renderMenuItems:u,renderHeader:i})=>{const p=(0,t.useRef)(null),[g,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const m=p.current;if(m){const D=m.getBoundingClientRect(),P=5,b={right:window.innerWidth<d+D.width,bottom:window.innerHeight<r+D.height+P};y({position:"fixed",left:b.right?d-D.width-P:d-P,top:b.bottom?r-D.height-P:r+P})}},[d,r]),(0,n.Z)(p,()=>{c?.()});const E=i?.(),h=u?.(),v=m=>{a&&m(0)},C=m=>{m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),c?.())};return t.createElement(l.h_,null,t.createElement(s.v,{header:E,ref:p,style:g,ariaLabel:o.wl.components.Menu.MenuComponent("Context"),onOpen:v,onClick:c,onKeyDown:C},h))});f.displayName="ContextMenu"},74285:(Y,O,e)=>{"use strict";e.d(O,{z:()=>o});var t=e(66111),n=e(30909);const o=({children:s,renderMenuItems:l,focusOnOpen:f=!0})=>{const[d,r]=(0,t.useState)(!1),[c,a]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:u=>{r(!0),a({x:u.pageX,y:u.pageY})}}),d&&t.createElement(n.x,{onClose:()=>r(!1),x:c.x,y:c.y,renderMenuItems:l,focusOnOpen:f}))}},68226:(Y,O,e)=>{"use strict";e.d(O,{$:()=>a,Z:()=>u});var t=e(9892),n=e(66111),o=e(32439),s=e(72648),l=e(9085),f=e.n(l),d=e(39904);const r=({children:p})=>{const[g,y]=(0,n.useState)(!1),[E,h]=(0,n.useState)(!1),v=(0,n.useRef)(null),C=(0,n.useRef)(null),m=(0,s.wW)(c);return(0,n.useEffect)(()=>{const D=new IntersectionObserver(P=>{P.forEach(b=>{b.target===v.current?y(!b.isIntersecting):b.target===C.current&&h(!b.isIntersecting)})});return[v,C].forEach(P=>{P.current&&D.observe(P.current)}),()=>D.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(m.scrollIndicator,m.scrollTopIndicator,{[m.scrollIndicatorVisible]:g})},n.createElement(d.J,{className:f()(m.scrollIcon,m.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:m.scrollContent},n.createElement("div",{ref:v}),p,n.createElement("div",{ref:C})),n.createElement("div",{className:(0,t.cx)(m.scrollIndicator,m.scrollBottomIndicator,{[m.scrollIndicatorVisible]:E})},n.createElement(d.J,{className:f()(m.scrollIcon,m.scrollBottomIcon),name:"angle-down"})))},c=p=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:p.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:p.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${p.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${p.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),a=({autoHide:p=!1,autoHideTimeout:g=200,setScrollTop:y,className:E,testId:h,autoHeightMin:v="0",autoHeightMax:C="100%",hideTracksWhenNotNeeded:m=!1,hideHorizontalTrack:D,hideVerticalTrack:P,scrollRefCallback:b,showScrollIndicators:M=!1,updateAfterMountMs:x,scrollTop:A,onScroll:T,children:S})=>{const U=(0,n.useRef)(null),R=(0,s.wW)(i);(0,n.useEffect)(()=>{U.current&&b&&b(U.current.view)},[U,b]),(0,n.useEffect)(()=>{U.current&&A!=null&&U.current.scrollTop(A)},[A]),(0,n.useEffect)(()=>{x&&setTimeout(()=>{const I=U.current;I?.update&&I.update()},x)},[x]);function F(I,V,H){return H.style&&V&&(H.style.display="none"),n.createElement("div",{...H,className:I})}const B=(0,n.useCallback)(I=>F("track-horizontal",D,I),[D]),K=(0,n.useCallback)(I=>F("track-vertical",P,I),[P]),L=(0,n.useCallback)(I=>n.createElement("div",{...I,className:"thumb-horizontal"}),[]),N=(0,n.useCallback)(I=>n.createElement("div",{...I,className:"thumb-vertical"}),[]),z=(0,n.useCallback)(I=>(I.style&&I.style.WebkitOverflowScrolling==="touch"&&(I.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...I,className:"scrollbar-view"})),[]),G=(0,n.useCallback)(()=>{U.current&&y&&y(U.current.getValues())},[y]);return n.createElement(o.ZP,{"data-testid":h,ref:U,className:(0,t.cx)(R.customScrollbar,E,{[R.scrollbarWithScrollIndicators]:M}),onScrollStop:G,autoHeight:!0,autoHide:p,autoHideTimeout:g,hideTracksWhenNotNeeded:m,autoHeightMax:C,autoHeightMin:v,renderTrackHorizontal:B,renderTrackVertical:K,renderThumbHorizontal:L,renderThumbVertical:N,renderView:z,onScroll:T},M?n.createElement(r,null,S):S)},u=a,i=p=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${p.shape.borderRadius(2)};
        width: ${p.spacing(1)} !important;
        right: 0px;
        bottom: ${p.spacing(.25)};
        top: ${p.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${p.shape.borderRadius(2)};
        height: ${p.spacing(1)} !important;
        right: ${p.spacing(.25)};
        bottom: ${p.spacing(.25)};
        left: ${p.spacing(.25)};
      }
      .thumb-vertical {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(Y,O,e)=>{"use strict";e.d(O,{k:()=>o});var t=e(66111),n=e(31403);function o({link:s,buttonProps:l}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?f=>{!(f.ctrlKey||f.metaKey||f.shiftKey)&&s.onClick&&(f.preventDefault(),s.onClick(f))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...l},s.title))}},35919:(Y,O,e)=>{"use strict";e.d(O,{v:()=>S});var t=e(9892),n=e(57706),o=e.n(n),s=e(66111),l=e(14760),f=e(83272),d=e(43809),r=e(56975),c=e(3281),a=e(94976),u=e(12724),i=e(67660),p=e(72648),g=e(68226),y=e(46967),E=e(85511),h=e(82897),v=e(53165),C=e(56766);const m=R=>({list:t.css`
      border-bottom: 1px solid ${R.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${R.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${R.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${R.colors.action.hover};
      }
    `,label:t.css`
      color: ${R.colors.text.secondary};
    `,activeItem:t.css`
      background: ${R.colors.background.secondary};
      &:hover {
        background: ${R.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${R.typography.fontFamilyMonospace};
      font-size: ${R.typography.size.sm};
    `}),D=({suggestions:R,...F})=>{const B=(0,s.useRef)(null);(0,v.Z)(B,()=>{F.onClose&&F.onClose()});const K=(0,s.useMemo)(()=>(0,h.groupBy)(R,N=>N.origin),[R]),L=(0,p.wW)(m);return s.createElement("div",{role:"menu",ref:B,className:L.wrapper},Object.keys(K).map((N,z)=>{const G=z===0?0:Object.keys(K).reduce((I,V,H)=>H>=z?I:I+K[V].length,0);return s.createElement(P,{...F,suggestions:K[N],label:`${(0,h.capitalize)(N)}`,activeIndex:F.activeIndex,activeIndexOffset:G,key:N})}))};D.displayName="DataLinkSuggestions";const P=s.memo(({activeIndex:R,activeIndexOffset:F,label:B,onClose:K,onSuggestionSelect:L,suggestions:N,activeRef:z})=>{const G=(0,p.wW)(m);return s.createElement(s.Fragment,null,s.createElement(C.a,{className:G.list,items:N,renderItem:(I,V)=>{const H=V+F===R;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(G.item,H&&G.activeItem),ref:H?z:void 0,onClick:()=>{L(I)},title:I.documentation},s.createElement("span",{className:G.itemValue},s.createElement("span",{className:G.label},B)," ",I.label))}}))});P.displayName="DataLinkSuggestionsList";class b{getBoundingClientRect(){const F=window.getSelection(),B=F&&F.anchorNode;return B&&B.parentElement?B.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const M=(R,F)=>R-F*Math.floor(R/F),x={builtInVariable:{pattern:/(\${\S+?})/}},A=[(0,i.Z)({onlyIn:R=>R.type==="code_block",getSyntax:()=>"links"},{...o().languages,links:x})],T=R=>({input:(0,y.H)({theme:R,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${R.colors.success.text};
    }
    .token.variable {
      color: ${R.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${R.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),S=(0,s.memo)(({value:R,onChange:F,suggestions:B,placeholder:K="http://your-grafana.com/d/000000010/annotations"})=>{const L=(0,s.useRef)(null),N=(0,p.wW)(T),[z,G]=(0,s.useState)(!1),[I,V]=(0,s.useState)(0),[H,Q]=(0,s.useState)((0,u.l1)(R)),oe=(0,f.Z)(H),[se,ie]=(0,s.useState)(0),j=(0,s.useRef)({showingSuggestions:z,suggestions:B,suggestionsIndex:I,linkUrl:H,onChange:F});j.current={showingSuggestions:z,suggestions:B,suggestionsIndex:I,linkUrl:H,onChange:F};const de=(0,s.useRef)(null);(0,s.useEffect)(()=>{ie(U(de.current,I))},[I]);const ce=(0,s.useMemo)(()=>new b,[]),ee=s.useCallback((Z,ne)=>{if(!j.current.showingSuggestions)return Z.key==="="||Z.key==="$"||Z.keyCode===32&&Z.ctrlKey?G(!0):ne();switch(Z.key){case"Backspace":case"Escape":return G(!1),V(0);case"Enter":return Z.preventDefault(),q(j.current.suggestions[j.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":Z.preventDefault();const re=Z.key==="ArrowDown"?1:-1;return V(ve=>M(ve+re,j.current.suggestions.length));default:return ne()}},[]);(0,s.useEffect)(()=>{oe&&oe.selection.isFocused&&!H.selection.isFocused&&j.current.onChange(d.Z.serialize(H))},[H,oe]);const le=s.useCallback(({value:Z})=>{Q(Z)},[]),q=(Z,ne=L.current)=>{const ve=fe()==="$";Z.origin!==c.L8.Template||Z.value===a.W.includeVars?ne.insertText(`${ve?"":"$"}{${Z.value}}`):ne.insertText(`${ve?"":"$"}{${Z.value}:queryparam}`),Q(ne.value),G(!1),V(0),j.current.onChange(d.Z.serialize(ne.value))},fe=()=>{const Z=document.getElementById("data-link-input");let ne="",re,ve;return window.getSelection&&(re=window.getSelection(),re&&re.rangeCount>0&&(ve=re.getRangeAt(0).cloneRange(),ve.collapse(!0),ve.setStart(Z,0),ne=ve.toString().slice(-1))),ne};return s.createElement("div",{className:N.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},z&&s.createElement(E.h_,null,s.createElement(l.r,{referenceElement:ce,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:Z,style:ne,placement:re})=>s.createElement("div",{ref:Z,style:ne,"data-placement":re,className:N.suggestionsWrapper},s.createElement(g.Z,{scrollTop:se,autoHeightMax:"300px",setScrollTop:({scrollTop:ve})=>ie(ve)},s.createElement(D,{activeRef:de,suggestions:j.current.suggestions,onSuggestionSelect:q,onClose:()=>G(!1),activeIndex:I}))))),s.createElement(r.ML,{schema:u.Yi,ref:L,placeholder:K,value:j.current.linkUrl,onChange:le,onKeyDown:(Z,ne,re)=>ee(Z,re),plugins:A,className:(0,t.cx)(N.editor,N.input,t.css`
                  padding: 3px 8px;
                `)}))))});S.displayName="DataLinkInput";function U(R,F){return(R?.clientHeight??0)*F}},18543:(Y,O,e)=>{"use strict";e.d(O,{V:()=>r});var t=e(9892),n=e(66111),o=e(68183),s=e(79406),l=e(74285),f=e(14391),d=e(42044);const r=({children:c,links:a,style:u})=>{const i=[{items:(0,s.R)(a),label:"Data links"}],p=i[0].items.length,g=()=>i.map((E,h)=>n.createElement(f.k,{key:`${E.label}${h}`,label:E.label},(E.items||[]).map(v=>n.createElement(d.s,{key:v.label,url:v.url,label:v.label,target:v.target,icon:v.icon,active:v.active,onClick:v.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(p>1)return n.createElement(l.z,{renderMenuItems:g},({openMenu:E})=>c({openMenu:E,targetClassName:y}));{const E=a()[0];return n.createElement("a",{href:E.href,onClick:E.onClick,target:E.target,title:E.title,style:{...u,overflow:"hidden",display:"flex"},"aria-label":o.wl.components.DataLinksContextMenu.singleLink},c({}))}}},68037:(Y,O,e)=>{"use strict";e.d(O,{d:()=>m});var t=e(9892),n=e(82897),o=e(66111),s=e(72648),l=e(7804),f=e(31403),d=e(35029),r=e(79406),c=e(24799),a=e(46967),u=e(8944),i=e(35919);const p=P=>({listItem:t.css`
    margin-bottom: ${P.spacing()};
  `,infoText:t.css`
    padding-bottom: ${P.spacing(2)};
    margin-left: 66px;
    color: ${P.colors.text.secondary};
  `}),g=o.memo(({index:P,value:b,onChange:M,suggestions:x,isLast:A})=>{const T=(0,s.wW)(p),S=(F,B)=>{M(P,{...b,url:F},B)},U=F=>{M(P,{...b,title:F.target.value})},R=()=>{M(P,{...b,targetBlank:!b.targetBlank})};return o.createElement("div",{className:T.listItem},o.createElement(c.g,{label:"Title"},o.createElement(a.I,{value:b.title,onChange:U,placeholder:"Show details"})),o.createElement(c.g,{label:"URL",invalid:(0,r.g)(b.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},o.createElement(i.v,{value:b.url,onChange:S,suggestions:x})),o.createElement(c.g,{label:"Open in new tab"},o.createElement(u.r,{value:b.targetBlank||!1,onChange:R})),A&&o.createElement("div",{className:T.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});g.displayName="DataLinkEditor";const y=({link:P,index:b,getSuggestions:M,onSave:x,onCancel:A})=>{const[T,S]=(0,o.useState)(P);return o.createElement(o.Fragment,null,o.createElement(g,{value:T,index:b,isLast:!1,suggestions:M(),onChange:(U,R)=>{S(R)}}),o.createElement(d.u.ButtonRow,null,o.createElement(f.zx,{variant:"secondary",onClick:()=>A(b),fill:"outline"},"Cancel"),o.createElement(f.zx,{onClick:()=>{x(b,T)}},"Save")))};var E=e(57227),h=e(8180);const v=({link:P,onEdit:b,onRemove:M})=>{const x=(0,s.l4)(),A=C(x),{title:T="",url:S=""}=P,U=T.trim()!=="",R=S.trim()!=="",F=(0,r.g)(S);return o.createElement("div",{className:A.wrapper},o.createElement("div",{className:A.titleWrapper},o.createElement("div",{className:(0,t.cx)(A.url,!R&&A.notConfigured,F&&A.errored)},U?T:"Data link title not provided"),o.createElement("div",{className:A.actionButtons},o.createElement(h.h,{name:"pen",onClick:b}),o.createElement(h.h,{name:"times",onClick:M}))),o.createElement("div",{className:(0,t.cx)(A.url,!R&&A.notConfigured,F&&A.errored),title:S},R?S:"Data link url not provided"),F&&o.createElement(E.S,null,"Explore data link may not work in the future. Please edit."))},C=(0,l.B)(P=>({wrapper:t.css`
      margin-bottom: ${P.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${P.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${P.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${P.colors.text.primary};
      font-size: ${P.typography.size.sm};
      font-weight: ${P.typography.fontWeightMedium};
    `,url:t.css`
      color: ${P.colors.text.secondary};
      font-size: ${P.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),m=({links:P,onChange:b,getSuggestions:M,data:x})=>{const A=(0,s.l4)(),[T,S]=(0,o.useState)(null),[U,R]=(0,o.useState)(!1),F=D(A),B=P??[],K=T!==null,L=(I,V)=>{if(U)if(V.title.trim()===""&&V.url.trim()===""){R(!1),S(null);return}else S(null),R(!1);const H=(0,n.cloneDeep)(B);H[I]=V,b(H),S(null)},N=()=>{let I=(0,n.cloneDeep)(B);S(I.length),R(!0)},z=I=>{U&&R(!1),S(null)},G=I=>{const V=(0,n.cloneDeep)(B);V.splice(I,1),b(V)};return o.createElement(o.Fragment,null,B.length>0&&o.createElement("div",{className:F.wrapper},B.map((I,V)=>o.createElement(v,{key:`${I.title}/${V}`,index:V,link:I,onChange:L,onEdit:()=>S(V),onRemove:()=>G(V),data:x}))),K&&T!==null&&o.createElement(d.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{z(T)}},o.createElement(y,{index:T,link:U?{title:"",url:""}:B[T],data:x,onSave:L,onCancel:z,getSuggestions:M})),o.createElement(f.zx,{size:"sm",icon:"plus",onClick:N,variant:"secondary"},"Add link"))},D=(0,l.B)(P=>({wrapper:t.css`
      margin-bottom: ${P.spacing(2)};
    `}))},45576:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(39904),l=e(89719);function f({links:r}){const c=(0,o.wW)(d);if(r.length===1)return n.createElement(l.k,{link:r[0]});const a=r.filter(i=>i.target==="_blank"),u=r.filter(i=>i.target==="_self");return n.createElement(n.Fragment,null,u.map((i,p)=>n.createElement(l.k,{key:p,link:i})),n.createElement("div",{className:c.wrapper},n.createElement("p",{className:c.externalLinksHeading},"External links"),a.map((i,p)=>n.createElement("a",{key:p,href:i.href,target:i.target,className:c.externalLink},n.createElement(s.J,{name:"external-link-alt"}),i.title))))}const d=r=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${r.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${r.colors.text.secondary};
    font-weight: ${r.typography.fontWeightRegular};
    font-size: ${r.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${r.colors.text.link};
    font-weight: ${r.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${r.spacing(1)};
    }
  `})},64260:(Y,O,e)=>{"use strict";e.d(O,{O:()=>s});var t=e(66111),n=e(8944),o=e(81764);function s({options:l,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(o._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:l.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.x,{value:l.jsonData.manageAlerts!==!1,onChange:d=>f({...l,jsonData:{...l.jsonData,manageAlerts:d.currentTarget.checked}})}))))))}},85615:(Y,O,e)=>{"use strict";e.d(O,{W:()=>d});var t=e(66111),n=e(31403),o=e(81764),s=e(11543),l=e(46967),f=e(97379);const d=({hasCert:r,label:c,onChange:a,onClick:u,placeholder:i})=>t.createElement(s.Z,null,t.createElement(o._,{label:c,labelWidth:14,disabled:r},r?t.createElement(l.I,{type:"text",value:"configured",width:24}):t.createElement(f.K,{rows:7,onChange:a,placeholder:i,required:!0})),r&&t.createElement(n.zx,{variant:"secondary",onClick:u,style:{marginLeft:4}},"Reset"))},92099:(Y,O,e)=>{"use strict";e.d(O,{H:()=>i});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(7804),f=e(31403),d=e(95569),r=e(39904),c=e(34517);const a=(0,l.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),u=({header:g,onBlur:y,onChange:E,onRemove:h,onReset:v})=>{const C=a();return s.createElement("div",{className:C.layout},s.createElement(d.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:g.name||"",onChange:m=>E({...g,name:m.target.value}),onBlur:y}),s.createElement(c.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:g.configured,value:g.value,labelWidth:5,inputWidth:g.configured?11:12,placeholder:"Header Value",onReset:()=>v(g.id),onChange:m=>E({...g,value:m.target.value}),onBlur:y}),s.createElement(f.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:m=>h(g.id)},s.createElement(r.J,{name:"trash-alt"})))};u.displayName="CustomHeaderRow";class i extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:C}=this.state,m=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([P,b])=>!P.startsWith("httpHeaderName"))),D=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([P,b])=>!P.startsWith("httpHeaderValue")));for(const[P,b]of C.entries())m[`httpHeaderName${P+1}`]=b.name,b.configured||(D[`httpHeaderValue${P+1}`]=b.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:m,secureJsonData:D})},this.onHeaderAdd=()=>{this.setState(C=>({headers:[...C.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(C,m)=>{this.setState(({headers:D})=>({headers:D.map((P,b)=>C!==b?P:{...m})}))},this.onHeaderReset=C=>{this.setState(({headers:m})=>({headers:m.map((D,P)=>D.id!==C?D:{...D,value:"",configured:!1})}))},this.onHeaderRemove=C=>{this.setState(({headers:m})=>({headers:m.filter(D=>D.id!==C)}),this.updateSettings)};const{jsonData:E,secureJsonData:h,secureJsonFields:v}=this.props.dataSourceConfig;this.state={headers:Object.keys(E).sort().filter(C=>C.startsWith("httpHeaderName")).map((C,m)=>({id:(0,n.uniqueId)(),name:E[C],value:h!==void 0?h[C]:"",configured:v&&v[`httpHeaderValue${m+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:E}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((h,v)=>s.createElement(u,{key:h.id,header:h,onChange:C=>{this.onHeaderChange(v,C)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!E.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(f.zx,{variant:"secondary",icon:"plus",type:"button",onClick:h=>{this.onHeaderAdd()}},"Add header")))}}var p=null},12006:(Y,O,e)=>{"use strict";e.d(O,{E:()=>M});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(95569),f=e(19426),d=e(81764),r=e(50869),c=e(39904),a=e(8581),u=e(8944),i=e(43339),p=e(34517);const g=({dataSourceConfig:x,onChange:A})=>{const T=x.secureJsonData?x.secureJsonData.basicAuthPassword:"",S=()=>{A({...x,secureJsonData:{...x.secureJsonData,basicAuthPassword:""},secureJsonFields:{...x.secureJsonFields,basicAuthPassword:!1}})},U=R=>{A({...x,secureJsonData:{...x.secureJsonData,basicAuthPassword:R.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(d._,{disabled:x.readOnly},n.createElement(l.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:x.basicAuthUser,onChange:R=>A({...x,basicAuthUser:R.currentTarget.value})})),n.createElement(d._,{disabled:x.readOnly},n.createElement(p.c,{isConfigured:!!(x.secureJsonFields&&x.secureJsonFields.basicAuthPassword),value:T||"",inputWidth:18,labelWidth:10,onReset:S,onChange:U})))};var y=e(92099);const E=26,h=({dataSourceConfig:x,onChange:A,showForwardOAuthIdentityOption:T=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"TLS Client Auth",labelWidth:E,disabled:x.readOnly},n.createElement(u.x,{id:"http-settings-tls-client-auth",value:x.jsonData.tlsAuth||!1,onChange:S=>A({...x.jsonData,tlsAuth:S.currentTarget.checked})})),n.createElement(d._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:E,disabled:x.readOnly},n.createElement(u.x,{id:"http-settings-ca-cert",value:x.jsonData.tlsAuthWithCACert||!1,onChange:S=>A({...x.jsonData,tlsAuthWithCACert:S.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Skip TLS Verify",labelWidth:E,disabled:x.readOnly},n.createElement(u.x,{id:"http-settings-skip-tls-verify",value:x.jsonData.tlsSkipVerify||!1,onChange:S=>A({...x.jsonData,tlsSkipVerify:S.currentTarget.checked})}))),T&&n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:E,disabled:x.readOnly},n.createElement(u.x,{id:"http-settings-forward-oauth",value:x.jsonData.oauthPassThru||!1,onChange:S=>A({...x.jsonData,oauthPassThru:S.currentTarget.checked})}))));var v=e(12580),C=e(23622);const m=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],D={label:"Server (default)",value:"proxy"},P=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),b=26,M=x=>{const{defaultUrl:A,dataSourceConfig:T,onChange:S,showAccessOptions:U,sigV4AuthToggleEnabled:R,showForwardOAuthIdentityOption:F,azureAuthSettings:B,renderSigV4Editor:K,secureSocksDSProxyEnabled:L,urlLabel:N,urlDocs:z}=x,[G,I]=(0,n.useState)(!1),V=(0,s.l4)();let H;const Q=(0,n.useCallback)(ee=>{S({...T,...ee})},[T,S]);switch(T.access){case"direct":H=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",z);break;case"proxy":H=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",z);break;default:H=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",z)}const oe=n.createElement(a.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:m,value:m.filter(ee=>ee.value===T.access)[0]||D,onChange:ee=>Q({access:ee.value}),disabled:T.readOnly}),se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(T.url),ie=t.css`
    box-shadow: inset 0 0px 5px ${V.v1.palette.red};
  `,j=(0,t.cx)({["width-20"]:!0,[ie]:!se}),de=n.createElement(r.I,{className:j,placeholder:A,value:T.url,"aria-label":o.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ee=>Q({url:ee.currentTarget.value}),disabled:T.readOnly}),ce=B?.azureAuthSupported&&B.getAzureAuthEnabled(T)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(l.W,{interactive:!!z,label:N??"URL",labelWidth:13,tooltip:H,inputEl:de})),U&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(l.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:oe})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>I(ee=>!ee)},"Help\xA0",n.createElement(c.J,{name:G?"angle-down":"angle-right",style:{marginBottom:0}})))),G&&n.createElement(P,null)),T.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(f.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(i.B,{tags:T.jsonData.keepCookies,width:40,onChange:ee=>Q({jsonData:{...T.jsonData,keepCookies:ee}}),disabled:T.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(l.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:T.jsonData.timeout,onChange:ee=>{Q({jsonData:{...T.jsonData,timeout:parseInt(ee.currentTarget.value,10)}})},disabled:T.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Basic auth",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-basic-auth",value:T.basicAuth,onChange:ee=>{Q({basicAuth:ee.currentTarget.checked})}})),n.createElement(d._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-with-credentials",value:T.withCredentials,onChange:ee=>{Q({withCredentials:ee.currentTarget.checked})}}))),B?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-azure-auth",value:ce,onChange:ee=>{Q(B.setAzureAuthEnabled(T,ee.currentTarget.checked))}}))),R&&n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"SigV4 auth",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-sigv4-auth",value:T.jsonData.sigV4Auth||!1,onChange:ee=>{Q({jsonData:{...T.jsonData,sigV4Auth:ee.currentTarget.checked}})}}))),T.access==="proxy"&&n.createElement(h,{dataSourceConfig:T,onChange:ee=>Q({jsonData:ee}),showForwardOAuthIdentityOption:F})),T.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(g,{...x}))),B?.azureAuthSupported&&ce&&B.azureSettingsUI&&n.createElement(B.azureSettingsUI,{dataSourceConfig:T,onChange:S}),T.jsonData.sigV4Auth&&R&&K,(T.jsonData.tlsAuth||T.jsonData.tlsAuthWithCACert)&&n.createElement(C.s,{dataSourceConfig:T,onChange:S}),T.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:T,onChange:S})),L&&n.createElement(v.i,{options:T,onOptionsChange:S}))}},12580:(Y,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(66111),n=e(8944),o=e(81764);function s({options:l,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(o._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:l.jsonData.enableSecureSocksProxy??!1,onChange:d=>f({...l,jsonData:{...l.jsonData,enableSecureSocksProxy:d.currentTarget.checked}})}))))))}},23622:(Y,O,e)=>{"use strict";e.d(O,{s:()=>d});var t=e(9892),n=e(66111),o=e(95569),s=e(39904),l=e(61860),f=e(85615);const d=({dataSourceConfig:r,onChange:c})=>{const a=r.secureJsonFields&&r.secureJsonFields.tlsCACert,u=r.secureJsonFields&&r.secureJsonFields.tlsClientCert,i=r.secureJsonFields&&r.secureJsonFields.tlsClientKey,p=r.jsonData&&r.jsonData.serverName,g=h=>v=>{v.preventDefault();const C={...r.secureJsonFields};C[h]=!1,c({...r,secureJsonFields:C})},y=h=>v=>{const C={...r.secureJsonData};C[h]=v.currentTarget.value,c({...r,secureJsonData:C})},E=h=>{const v={...r.jsonData,serverName:h.currentTarget.value};c({...r,jsonData:v})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(l.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,r.jsonData.tlsAuthWithCACert&&n.createElement(f.W,{hasCert:!!a,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:g("tlsCACert")}),r.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(o.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:p&&r.jsonData.serverName,onChange:E})),n.createElement(f.W,{hasCert:!!u,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:g("tlsClientCert")}),n.createElement(f.W,{hasCert:!!i,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:g("tlsClientKey")}))))}},77239:(Y,O,e)=>{"use strict";e.d(O,{M:()=>r});var t=e(9892),n=e(66111),o=e(74363),s=e(72648),l=e(94437),f=e(39904),d=e(36290);const r=(0,n.memo)(u=>{const i=(0,s.wW)(a),{isOpen:p,onClose:g}=u;return p?n.createElement(l.L,{useCapture:!0,includeButtonPress:!1,onClick:g},n.createElement("div",{className:i.modal,"data-testid":"date-picker"},n.createElement(c,{...u}))):null});r.displayName="DatePicker";const c=(0,n.memo)(({value:u,minDate:i,maxDate:p,onChange:g})=>{const y=(0,s.wW)(d.mg);return n.createElement(o.ZP,{className:y.body,tileClassName:y.title,value:u||new Date,minDate:i,maxDate:p,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:E=>{Array.isArray(E)||g(E)},locale:"en"})});c.displayName="Body";const a=u=>({modal:t.css`
      z-index: ${u.zIndex.modal};
      position: absolute;
      box-shadow: ${u.shadows.z3};
      background-color: ${u.colors.background.primary};
      border: 1px solid ${u.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${u.colors.text.disabled};
      }
    `})},86348:(Y,O,e)=>{"use strict";e.d(O,{d:()=>r});var t=e(9892),n=e(66111),o=e(67483),s=e(72648),l=e(46967),f=e(77239);const d=a=>(0,o.CQ)(a).format("L"),r=({value:a,minDate:u,maxDate:i,onChange:p,closeOnSelect:g,placeholder:y="Date",...E})=>{const[h,v]=n.useState(!1),C=(0,s.wW)(c);return n.createElement("div",{className:C.container},n.createElement(l.I,{type:"text",autoComplete:"off",placeholder:y,value:a&&d(a),onClick:()=>v(!0),onChange:m=>{m.target.value===""&&p("")},className:C.input,...E}),n.createElement(f.M,{isOpen:h,value:a&&typeof a!="string"?a:(0,o.CQ)().toDate(),minDate:u,maxDate:i,onChange:m=>{p(m),g&&v(!1)},onClose:()=>v(!1)}))},c=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(Y,O,e)=>{"use strict";e.d(O,{x:()=>M});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(66111),f=e(74363),d=e(10092),r=e(92268),c=e(77258),a=e(67483),u=e(85511),i=e(31403),p=e(81764),g=e(46967),y=e(39904),E=e(52081),h=e(72648),v=e(27581),C=e(91942),m=e(36290),D=e(47406),P=e(29826);function b(S,U,R){return(0,a.v9)(S)?S.isValid():D.isMathString(S)?D.isValid(S):(0,P.J)(S,{roundUp:U,timeZone:R}).isValid()}const M=({date:S,maxDate:U,minDate:R,label:F,onChange:B,disabledHours:K,disabledMinutes:L,disabledSeconds:N,showSeconds:z=!0})=>{const[G,I]=(0,l.useState)(!1),V=(0,l.useRef)(null),{overlayProps:H,underlayProps:Q}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:G,shouldCloseOnInteractOutside:re=>{const ve=document.getElementsByClassName(C.F)[0];return!(ve&&ve.contains(re))}},V),{dialogProps:oe}=(0,n.R)({},V),se=(0,h.l4)(),{modalBackdrop:ie}=(0,v.J)(se),j=(0,r.Z)(`(min-width: ${se.breakpoints.values.lg}px)`),de=(0,h.wW)(T),[ce,ee]=(0,l.useState)(),[le,q]=(0,l.useState)(),fe=(0,d.D)(ce,le,{placement:"bottom-start"}),Z=(0,l.useCallback)(re=>{I(!1),B(re)},[B]),ne=(0,l.useCallback)(re=>{re.preventDefault(),I(!0)},[I]);return l.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},l.createElement(x,{date:S,onChange:B,isFullscreen:j,onOpen:ne,label:F,ref:ee,showSeconds:z}),G?j?l.createElement(u.h_,null,l.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:V,...H,...oe},l.createElement(A,{date:S,onChange:Z,isFullscreen:!0,onClose:()=>I(!1),maxDate:U,minDate:R,ref:q,style:fe.styles.popper,showSeconds:z,disabledHours:K,disabledMinutes:L,disabledSeconds:N})))):l.createElement(u.h_,null,l.createElement("div",{className:ie,...Q}),l.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:V,...H,...oe},l.createElement("div",{className:de.modal},l.createElement(A,{date:S,maxDate:U,minDate:R,onChange:Z,isFullscreen:!1,onClose:()=>I(!1),showSeconds:z,disabledHours:K,disabledMinutes:L,disabledSeconds:N}))))):null)},x=l.forwardRef(({date:S,label:U,onChange:R,isFullscreen:F,onOpen:B,showSeconds:K=!0},L)=>{const N=K?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[z,G]=(0,l.useState)(()=>({value:S?(0,c.dq)(S):(0,c.dq)((0,a.CQ)()),invalid:!1}));(0,l.useEffect)(()=>{S&&G({invalid:!b((0,c.dq)(S,{format:N})),value:(0,a.v9)(S)?(0,c.dq)(S,{format:N}):S})},[S,N]);const I=(0,l.useCallback)(Q=>{const oe=!b(Q.currentTarget.value);G({value:Q.currentTarget.value,invalid:oe})},[]),V=(0,l.useCallback)(()=>{(0,a.v9)(z.value)&&R((0,a.CQ)(z.value))},[z.value,R]),H=l.createElement(i.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:B});return l.createElement(p._,{label:U,invalid:!!(z.value&&z.invalid),className:t.css`
          margin-bottom: 0;
        `},l.createElement(g.I,{onChange:I,addonAfter:H,value:z.value,onBlur:V,"data-testid":"date-time-input",placeholder:"Select date/time",ref:L}))});x.displayName="DateTimeInput";const A=l.forwardRef(({date:S,onClose:U,onChange:R,isFullscreen:F,maxDate:B,minDate:K,style:L,showSeconds:N=!0,disabledHours:z,disabledMinutes:G,disabledSeconds:I},V)=>{const H=(0,h.wW)(m.mg),Q=(0,h.wW)(T),[oe,se]=(0,l.useState)(()=>S&&S.isValid()?S.toDate():new Date),ie=(0,l.useCallback)(de=>{Array.isArray(de)||se(ce=>(de.setHours(ce.getHours()),de.setMinutes(ce.getMinutes()),de.setSeconds(ce.getSeconds()),de))},[]),j=(0,l.useCallback)(de=>{se(de.toDate())},[]);return l.createElement("div",{className:(0,t.cx)(Q.container,{[Q.fullScreen]:F}),style:L,ref:V},l.createElement(f.ZP,{next2Label:null,prev2Label:null,value:oe,nextLabel:l.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:l.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:ie,locale:"en",className:H.body,tileClassName:H.title,maxDate:B,minDate:K}),l.createElement("div",{className:Q.time},l.createElement(C.y,{showSeconds:N,onChange:j,value:(0,a.CQ)(oe),disabledHours:z,disabledMinutes:G,disabledSeconds:I})),l.createElement(E.Lh,null,l.createElement(i.zx,{type:"button",onClick:()=>R((0,a.CQ)(oe))},"Apply"),l.createElement(i.zx,{variant:"secondary",type:"button",onClick:U},"Cancel")))});A.displayName="DateTimeCalendar";const T=S=>({container:t.css`
    padding: ${S.spacing(1)};
    border: 1px ${S.colors.border.weak} solid;
    border-radius: ${S.shape.borderRadius(1)};
    background-color: ${S.colors.background.primary};
    z-index: ${S.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${S.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${S.zIndex.modal};
    max-width: 280px;
  `})},19115:(Y,O,e)=>{"use strict";e.d(O,{x:()=>D});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(66111),f=e(10092),d=e(72648),r=e(37951),c=e(31403),a=e(68226),u=e(24799),i=e(39904),p=e(46967),g=e(85511),y=e(61860),E=e(65012),h=e(98574),v=e(21356),C=e(25482);const m=v.r.filter(A=>(0,C.jD)(A.from));function D(A){const{timeRange:T,onChange:S}=A,[U,R]=(0,l.useState)(!1),F=(0,l.useCallback)(()=>R(!1),[]),B=(0,C.C_)(T),[K,L]=(0,l.useState)({value:B.from,validation:(0,C.x5)(B.from)}),[N,z]=(0,l.useState)({value:B.to,validation:(0,C.x5)(B.to)}),G=(0,l.useRef)(null),{overlayProps:I,underlayProps:V}=(0,s.Ir)({onClose:()=>R(!1),isDismissable:!0,isOpen:U},G),{dialogProps:H}=(0,n.R)({},G),[Q,oe]=(0,l.useState)(null),[se,ie]=(0,l.useState)(null),j=(0,f.D)(Q,se,{placement:"auto-start"}),de=(0,d.wW)(M(K.validation.errorMessage,N.validation.errorMessage)),ce=q=>{const fe=(0,C.aw)(q);fe&&(F(),L({...K,value:q.from}),z({...N,value:q.to}),S(fe))},ee=(0,l.useCallback)(q=>{q.stopPropagation(),q.preventDefault(),R(!U)},[U]),le=q=>{if(q.preventDefault(),!N.validation.isValid||!K.validation.isValid)return;const fe=(0,C.aw)({from:K.value,to:N.value,display:""});fe&&(S(fe),R(!1))};return l.createElement("div",{className:de.container,ref:oe},l.createElement("button",{className:de.pickerInput,type:"button",onClick:ee},l.createElement("span",{className:de.clockIcon},l.createElement(i.J,{name:"clock-nine"})),l.createElement("span",null,B.from," to ",B.to),l.createElement("span",{className:de.caretIcon},l.createElement(i.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&l.createElement(g.h_,null,l.createElement("div",{role:"presentation",className:de.backdrop,...V}),l.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:G,...I,...H},l.createElement("div",{className:de.content,ref:ie,style:j.styles.popper,...j.attributes},l.createElement("div",{className:de.body},l.createElement(a.Z,{className:de.leftSide,hideHorizontalTrack:!0},l.createElement(h.V,{title:(0,r.t)("time-picker.time-range.example-title","Example time ranges"),options:m,onChange:ce,value:B})),l.createElement("div",{className:de.rightSide},l.createElement("div",{className:de.title},l.createElement(E.r,null,l.createElement(y.u,{content:l.createElement(P,null),placement:"bottom",theme:"info"},l.createElement("div",null,l.createElement(r.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",l.createElement(i.J,{name:"info-circle"})))))),l.createElement(u.g,{label:"From",invalid:!K.validation.isValid,error:K.validation.errorMessage},l.createElement(p.I,{onClick:q=>q.stopPropagation(),onBlur:()=>L({...K,validation:(0,C.x5)(K.value)}),onChange:q=>L({...K,value:q.currentTarget.value}),value:K.value})),l.createElement(u.g,{label:"To",invalid:!N.validation.isValid,error:N.validation.errorMessage},l.createElement(p.I,{onClick:q=>q.stopPropagation(),onBlur:()=>z({...N,validation:(0,C.x5)(N.value)}),onChange:q=>z({...N,value:q.currentTarget.value}),value:N.value})),l.createElement(c.zx,{"aria-label":"TimePicker submit button",onClick:le},"Apply time range"))))))))}const P=()=>{const A=(0,d.wW)(b);return l.createElement(l.Fragment,null,l.createElement("div",{className:A.supported},"Supported formats: ",l.createElement("code",{className:A.tooltip},"now-[digit]s/m/h/d/w")),l.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),l.createElement("code",{className:A.tooltip},"From: now-10m To: now"),l.createElement("div",{className:A.link},"For more information see"," ",l.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",l.createElement(i.J,{name:"external-link-alt"})),"."))},b=A=>({supported:t.css`
    margin-bottom: ${A.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${A.spacing(1)};
  `}),M=(A,T)=>S=>{const U=(0,p.H)({theme:S,invalid:!1}),F=250+x(S,A)+x(S,T);return{backdrop:t.css`
      position: fixed;
      z-index: ${S.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(U.input,U.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${S.spacing.gridSize*S.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(U.suffix,t.css`
        position: relative;
        margin-left: ${S.spacing(.5)};
      `),clockIcon:(0,t.cx)(U.prefix,t.css`
        position: relative;
        margin-right: ${S.spacing(.5)};
      `),content:t.css`
      background: ${S.colors.background.primary};
      box-shadow: ${S.shadows.z3};
      position: absolute;
      z-index: ${S.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: ${S.shape.radius.default};
      border: 1px solid ${S.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${F}px;
    `,description:t.css`
      color: ${S.colors.text.secondary};
      font-size: ${S.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${S.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${S.spacing(1)};
    `,title:t.css`
      margin-bottom: ${S.spacing(1)};
    `}};function x(A,T){return T?T.length>34?A.spacing.gridSize*6.5:A.spacing.gridSize*4:0}},25482:(Y,O,e)=>{"use strict";e.d(O,{C_:()=>o,aw:()=>n,jD:()=>l,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=c=>({from:f(c.from),to:f(c.to)}),o=c=>{const a=r(c.from),u=r(c.to);return{from:a,to:u,display:`${a} to ${u}`}},s=(c,a=Date.now())=>l(c)?f(c)>Math.ceil(a/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},l=c=>t.test(c),f=c=>{const a=t.exec(c);if(!a||a.length!==3)return 0;const[,u,i]=a,p=parseInt(u,10);return isNaN(p)?0:p*d[i]},d={w:604800,d:86400,h:3600,m:60,s:1},r=c=>c<=0?"now":c>=d.w&&c%d.w===0?`now-${c/d.w}w`:c>=d.d&&c%d.d===0?`now-${c/d.d}d`:c>=d.h&&c%d.h===0?`now-${c/d.h}h`:c>=d.m&&c%d.m===0?`now-${c/d.m}m`:`now-${c}s`},91942:(Y,O,e)=>{"use strict";e.d(O,{F:()=>c,y:()=>a});var t=e(9892),n=e(72505),o=e(66111),s=e(67483),l=e(72648),f=e(39904),d=e(85419),r=e(73267);const c="time-of-day-picker-panel",a=({minuteStep:p=1,showHour:g=!0,showSeconds:y=!1,onChange:E,value:h,size:v="auto",disabled:C,disabledHours:m,disabledMinutes:D,disabledSeconds:P})=>{const b=(0,l.wW)(i);return o.createElement(n.Z,{className:(0,t.cx)((0,r.ht)()[v],b.input),popupClassName:(0,t.cx)(b.picker,c),defaultValue:(0,s.C_)(),onChange:M=>E((0,s.CQ)(M)),allowEmpty:!1,showSecond:y,value:(0,s.C_)(h),showHour:g,minuteStep:p,inputIcon:o.createElement(u,{wrapperStyle:b.caretWrapper}),disabled:C,disabledHours:m,disabledMinutes:D,disabledSeconds:P})},u=({wrapperStyle:p=""})=>o.createElement("div",{className:p},o.createElement(f.J,{name:"angle-down"})),i=p=>{const g=p.components.input.background,y=p.v1.palette.black,E=p.colors.background.secondary,h=p.shape.borderRadius(1),v=p.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${p.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${g};
        border-color: ${v};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${p.v1.palette.orange};
            border-radius: ${h};
          }

          &:hover {
            background: ${E};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${p.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${y};
        background-color: ${g};
        border-color: ${v};
        border-radius: ${h};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${g};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${g};
        border-radius: ${h};
        border-color: ${v};
        height: ${p.spacing(4)};

        &:focus {
          ${(0,d.focusCss)(p)}
        }

        &:disabled {
          background-color: ${p.colors.action.disabledBackground};
          color: ${p.colors.action.disabledText};
          border: 1px solid ${p.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(Y,O,e)=>{"use strict";e.d(O,{K:()=>h});var t=e(9892),n=e(66111),o=e(47406),s=e(67483),l=e(75849),f=e(68183),d=e(7804),r=e(72648),c=e(94437),a=e(39904),u=e(46967),i=e(3630),p=e(99489),g=e(21356);const y=C=>o.isValid(C.from)&&o.isValid(C.to),E=()=>{},h=({value:C,onChange:m,onChangeTimeZone:D=E,clearable:P,hideTimeZone:b=!0,timeZone:M="browser",placeholder:x="Select time range",isReversed:A=!0,hideQuickRanges:T=!1,disabled:S=!1})=>{const[U,R]=(0,n.useState)(!1),F=(0,r.l4)(),B=v(F,S),K=G=>{G.stopPropagation(),G.preventDefault(),!S&&R(!U)},L=()=>{R(!1)},N=G=>{L(),m(G)},z=G=>{G.stopPropagation();const I=(0,s.CQ)(null),V=(0,s.CQ)(null);m({from:I,to:V,raw:{from:I,to:V}})};return n.createElement("div",{className:B.container},n.createElement("button",{type:"button",className:B.pickerInput,"aria-label":f.wl.components.TimePicker.openButton,onClick:K},y(C)?n.createElement(i.sU,{value:C,timeZone:M}):n.createElement("span",{className:B.placeholder},x),!S&&n.createElement("span",{className:B.caretIcon},y(C)&&P&&n.createElement(a.J,{className:B.clearIcon,name:"times",size:"lg",onClick:z}),n.createElement(a.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&n.createElement(c.L,{includeButtonPress:!1,onClick:L},n.createElement(p.x,{timeZone:M,value:y(C)?C:(0,l.JK)(),onChange:N,quickOptions:g.r,onChangeTimeZone:D,className:B.content,hideTimeZone:b,isReversed:A,hideQuickRanges:T})))},v=(0,d.B)((C,m=!1)=>{const D=(0,u.H)({theme:C,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
      position: absolute;
      top: 116%;
      z-index: ${C.zIndex.dropdown};
    `,pickerInput:(0,t.cx)(D.input,m&&D.inputDisabled,D.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${C.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(D.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${C.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${C.spacing(.5)};
      &:hover {
        color: ${C.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${C.colors.text.disabled};
      opacity: 1;
    `}})},3630:(Y,O,e)=>{"use strict";e.d(O,{IF:()=>P,Xc:()=>m,sU:()=>b});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(66111),f=e(67483),d=e(77258),r=e(56808),c=e(47891),a=e(47406),u=e(68183),i=e(72648),p=e(37951),g=e(26202),y=e(27581),E=e(64319),h=e(61860),v=e(99489),C=e(21356);function m(T){const[S,U]=(0,l.useState)(!1),{value:R,onMoveBackward:F,onMoveForward:B,onZoom:K,timeZone:L,fiscalYearStartMonth:N,timeSyncButton:z,isSynced:G,history:I,onChangeTimeZone:V,onChangeFiscalYearStartMonth:H,hideQuickRanges:Q,widthOverride:oe,isOnCanvas:se}=T,ie=Ie=>{T.onChange(Ie),U(!1)},j=Ie=>{Ie.stopPropagation(),Ie.preventDefault(),U(!S)},de=()=>{U(!1)},ce=(0,l.createRef)(),{overlayProps:ee,underlayProps:le}=(0,s.Ir)({onClose:de,isDismissable:!0,isOpen:S},ce),{dialogProps:q}=(0,n.R)({},ce),fe=(0,i.l4)(),Z=(0,i.wW)(x),{modalBackdrop:ne}=(0,y.J)(fe),re=(0,f.v9)(R.raw.from)||(0,f.v9)(R.raw.to),ve=G?"active":se?"canvas":"default",me=M(R,L);return l.createElement(g.h,{className:Z.container},re&&l.createElement(E.h,{"aria-label":(0,p.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:ve,onClick:F,icon:"angle-left",narrow:!0}),l.createElement(h.u,{content:l.createElement(P,{timeRange:R,timeZone:L}),placement:"bottom",interactive:!0},l.createElement(E.h,{"data-testid":u.wl.components.TimePicker.openButton,"aria-label":(0,p.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:me}),"aria-controls":"TimePickerContent",onClick:j,icon:"clock-nine",isOpen:S,variant:ve},l.createElement(b,{...T}))),S&&l.createElement("div",null,l.createElement("div",{role:"presentation",className:(0,t.cx)(ne,Z.backdrop),...le}),l.createElement(o.MT,{contain:!0,autoFocus:!0},l.createElement("section",{className:Z.content,ref:ce,...ee,...q},l.createElement(v.x,{timeZone:L,fiscalYearStartMonth:N,value:R,onChange:ie,quickOptions:C.r,history:I,showHistory:!0,widthOverride:oe,onChangeTimeZone:V,onChangeFiscalYearStartMonth:H,hideQuickRanges:Q})))),z,re&&l.createElement(E.h,{"aria-label":(0,p.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:B,icon:"angle-right",narrow:!0,variant:ve}),l.createElement(h.u,{content:D,placement:"bottom"},l.createElement(E.h,{"aria-label":(0,p.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:K,icon:"search-minus",variant:ve})))}m.displayName="TimeRangePicker";const D=()=>l.createElement(l.Fragment,null,l.createElement(p.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",l.createElement("br",null)," CTRL+Z")),P=({timeRange:T,timeZone:S})=>{const U=(0,i.wW)(A);return l.createElement(l.Fragment,null,(0,d.dq)(T.from,{timeZone:S}),l.createElement("div",{className:"text-center"},l.createElement(p.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,d.dq)(T.to,{timeZone:S}),l.createElement("div",{className:"text-center"},l.createElement("span",{className:U.utc},(0,r.Vs)(S))))},b=(0,l.memo)(({hideText:T,value:S,timeZone:U})=>{const R=(0,i.wW)(A);return T?null:l.createElement("span",{className:R.container},l.createElement("span",null,M(S,U)),l.createElement("span",{className:R.utc},c.describeTimeRangeAbbreviation(S,U)))});b.displayName="TimePickerButtonLabel";const M=(T,S)=>{const U={to:a.isMathString(T.raw.to)?T.raw.to:T.to,from:a.isMathString(T.raw.from)?T.raw.from:T.from};return c.describeTimeRange(U,S)},x=T=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[T.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:T.zIndex.dropdown,[T.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:T.zIndex.modal}})}),A=T=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${T.v1.palette.orange};
      font-size: ${T.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${T.typography.fontWeightMedium};
    `})},36290:(Y,O,e)=>{"use strict";e.d(O,{mg:()=>i,uT:()=>r});var t=e(9892),n=e(66111),o=e(74363),s=e(67483),l=e(29826),f=e(72648),d=e(39904);function r({onChange:p,from:g,to:y,timeZone:E}){const h=c(g,y),v=a(p,E),C=(0,f.wW)(i);return n.createElement(o.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:C.body,tileClassName:C.title,value:h,nextLabel:n.createElement(d.J,{name:"angle-right"}),prevLabel:n.createElement(d.J,{name:"angle-left"}),onChange:v,locale:"en"})}r.displayName="Body";function c(p,g,y=new Date){const E=p.toDate(),h=g.toDate(),v=(0,s.CQ)(E).isValid()?E:y,C=(0,s.CQ)(h).isValid()?h:y;return v>C?[C,v]:[v,C]}function a(p,g){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const E=(0,l.J)(u(y[0]),{timeZone:g}),h=(0,l.J)(u(y[1]),{timeZone:g});p(E,h)},[p,g])}function u(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const i=p=>{const g=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.primary};
      font-size: ${p.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }

      &:disabled {
        color: ${p.colors.action.disabledText};
      }
    `,body:t.css`
      z-index: ${p.zIndex.modal};
      background-color: ${p.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${p.colors.text.primary};
        border: 0;
        font-weight: ${p.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${p.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${g},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};

        abbr {
          background-color: ${p.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${g},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${g},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(Y,O,e)=>{"use strict";e.d(O,{x:()=>ve});var t=e(9892),n=e(66111),o=e(67483),s=e(47891),l=e(68183),f=e(14747),d=e(72648),r=e(7804),c=e(85419),a=e(37951),u=e(68226),i=e(39904),p=e(82897),g=e(56808),y=e(2594),E=e(24799),h=e(8581),v=e(31403),C=e(52566),m=e(64612),D=e(4883),P=e(10516),b=e(21356);const M=Re=>{const{timeZone:ye,fiscalYearStartMonth:Ce,timestamp:be=Date.now(),onChangeTimeZone:We,onChangeFiscalYearStartMonth:Qe}=Re,[mt,vt]=(0,n.useState)(!1),[rt,Ot]=(0,n.useState)("tz"),Et=(0,n.useCallback)(Ne=>{Ne&&Ne.stopPropagation(),vt(!mt)},[mt,vt]),Mt=(0,d.l4)(),ue=x(Mt);if(!(0,p.isString)(ye))return null;const De=(0,g.Pr)(ye,be);return De?n.createElement("div",null,n.createElement("section",{"aria-label":(0,a.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:ue.container},n.createElement("div",{className:ue.timeZoneContainer},n.createElement("div",{className:ue.timeZone},n.createElement(P.d,{title:De.name}),n.createElement("div",{className:ue.spacer}),n.createElement(m.K,{info:De})),n.createElement(D.v,{timeZone:ye,timestamp:be})),n.createElement("div",{className:ue.spacer}),n.createElement(v.zx,{variant:"secondary",onClick:Et,size:"sm"},n.createElement(a.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),mt?n.createElement("div",{className:ue.editContainer},n.createElement("div",null,n.createElement(y.S,{value:rt,options:[{label:(0,a.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,a.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:Ot})),rt==="tz"?n.createElement("section",{"data-testid":l.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ue.timeZoneContainer,ue.timeSettingContainer)},n.createElement(C.O,{includeInternal:!0,onChange:Ne=>{Et(),(0,p.isString)(Ne)&&We(Ne)},onBlur:Et})):n.createElement("section",{"aria-label":l.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ue.timeZoneContainer,ue.timeSettingContainer)},n.createElement(E.g,{className:ue.fiscalYearField,label:(0,a.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(h.Ph,{value:Ce,menuShouldPortal:!1,options:b.E,onChange:Ne=>{Qe&&Qe(Ne.value??0)}})))):null):null},x=(0,r.B)(Re=>({container:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Re.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var A=e(65012),T=e(29826),S=e(77258),U=e(47406),R=e(61860),F=e(46967),B=e(29952),K=e(83962),L=e(86922),N=e(27581),z=e(36290);function G({onClose:Re,onApply:ye}){const Ce=(0,d.wW)(I);return n.createElement("div",{className:Ce.container},n.createElement(v.zx,{className:Ce.apply,onClick:ye},n.createElement(a.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(v.zx,{variant:"secondary",onClick:Re},n.createElement(a.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}G.displayName="Footer";const I=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function V({onClose:Re}){const ye=(0,d.wW)(H);return n.createElement("div",{className:ye.container},n.createElement(A.r,null,n.createElement(a.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(v.zx,{"aria-label":l.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Re}))}V.displayName="Header";const H=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),Q=(Re,ye=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${ye?"left":"right"}: 544px;
      box-shadow: ${Re.shadows.z3};
      background-color: ${Re.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Re.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Re.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${ye?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Re.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Re.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Re.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function oe(Re){const ye=(0,d.l4)(),{modalBackdrop:Ce}=(0,N.J)(ye),be=Q(ye,Re.isReversed),{isOpen:We,isFullscreen:Qe,onClose:mt}=Re,vt=n.createRef(),{dialogProps:rt}=(0,B.R)({"aria-label":l.wl.components.TimePicker.calendar.label},vt),{overlayProps:Ot}=(0,L.Ir)({isDismissable:!0,isOpen:We,onClose:mt},vt);return We?Qe?n.createElement(K.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:be.container,ref:vt,...Ot,...rt},n.createElement(V,{...Re}),n.createElement(z.uT,{...Re}))):n.createElement(L.Xj,null,n.createElement("div",{className:Ce}),n.createElement(K.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:be.modal,ref:vt,...Ot,...rt},n.createElement("div",{className:be.content,"aria-label":l.wl.components.TimePicker.calendar.label},n.createElement(V,{...Re}),n.createElement(z.uT,{...Re}),n.createElement(G,{...Re}))))):null}const se=(0,n.memo)(oe);oe.displayName="TimePickerCalendar";const ie={default:()=>(0,a.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,a.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},j=Re=>{const{value:ye,isFullscreen:Ce=!1,timeZone:be,onApply:We,isReversed:Qe,fiscalYearStartMonth:mt}=Re,[vt,rt]=ce(ye.raw.from,ye.raw.to,be),Ot=(0,d.wW)(q),[Et,Mt]=(0,n.useState)(vt),[ue,De]=(0,n.useState)(rt),[Ne,tt]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[bt,Pt]=ce(ye.raw.from,ye.raw.to,be);Mt(bt),De(Pt)},[ye.raw.from,ye.raw.to,be]);const et=(0,n.useCallback)(bt=>{bt.preventDefault(),tt(!0)},[tt]),Ue=(0,n.useCallback)(()=>{if(ue.invalid||Et.invalid)return;const bt={from:Et.value,to:ue.value},Pt=s.convertRawToRange(bt,be,mt);We(Pt)},[Et.invalid,Et.value,We,be,ue.invalid,ue.value,mt]),Fe=(0,n.useCallback)((bt,Pt)=>{const[Je,Dt]=ce(bt,Pt,be);Mt(Je),De(Dt)},[be]),Ee=bt=>{bt.key==="Enter"&&Ue()},Me=s.convertRawToRange({from:"now/fy",to:"now/fy"},be,mt),He=(0,a.t)("time-picker.range-content.fiscal-year","Fiscal year"),Ze=n.createElement("div",{className:Ot.tooltip},s.isFiscal(ye)?n.createElement(R.u,{content:`${He}: ${Me.from.format("MMM-DD")} - ${Me.to.format("MMM-DD")}`},n.createElement(i.J,{name:"info-circle"})):null),lt=n.createElement(v.zx,{"aria-label":l.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:et});return n.createElement("div",null,n.createElement("div",{className:Ot.fieldContainer},n.createElement(E.g,{label:(0,a.t)("time-picker.range-content.from-input","From"),invalid:Et.invalid,error:Et.errorMessage},n.createElement(F.I,{onClick:bt=>bt.stopPropagation(),onChange:bt=>Fe(bt.currentTarget.value,ue.value),addonAfter:lt,onKeyDown:Ee,"aria-label":l.wl.components.TimePicker.fromField,value:Et.value})),Ze),n.createElement("div",{className:Ot.fieldContainer},n.createElement(E.g,{label:(0,a.t)("time-picker.range-content.to-input","To"),invalid:ue.invalid,error:ue.errorMessage},n.createElement(F.I,{onClick:bt=>bt.stopPropagation(),onChange:bt=>Fe(Et.value,bt.currentTarget.value),addonAfter:lt,onKeyDown:Ee,"aria-label":l.wl.components.TimePicker.toField,value:ue.value})),Ze),n.createElement(v.zx,{"data-testid":l.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Ue},n.createElement(a.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(se,{isFullscreen:Ce,isOpen:Ne,from:(0,T.J)(Et.value),to:(0,T.J)(ue.value),onApply:Ue,onClose:()=>tt(!1),onChange:Fe,timeZone:be,isReversed:Qe}))};function de(Re,ye,Ce){const be={from:Re,to:ye},We=s.convertRawToRange(be,Ce);return!(We.from.isSame(We.to)||We.from.isBefore(We.to))}function ce(Re,ye,Ce){const be=ee(Re,Ce),We=ee(ye,Ce),Qe=!le(be,!1,Ce),mt=!le(We,!0,Ce),vt=de(be,We,Ce)&&!mt;return[{value:be,invalid:Qe||vt,errorMessage:vt&&!Qe?ie.range():ie.default()},{value:We,invalid:mt,errorMessage:ie.default()}]}function ee(Re,ye){return(0,o.v9)(Re)?(0,S.dq)(Re,{timeZone:ye}):Re}function le(Re,ye,Ce){return(0,o.v9)(Re)?Re.isValid():U.isMathString(Re)?U.isValid(Re):(0,T.J)(Re,{roundUp:ye,timeZone:Ce}).isValid()}function q(Re){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Re.spacing(1)};
      padding-top: ${Re.spacing(3)};
    `}}var fe=e(98574);const Z=(Re,ye)=>s.convertRawToRange({from:Re.from,to:Re.to},ye),ne=(Re,ye)=>{const Ce=(0,S.dq)(Re.from,{timeZone:ye}),be=(0,S.dq)(Re.to,{timeZone:ye});return{from:Ce,to:be,display:`${Ce} to ${be}`}},re=Re=>{const{quickOptions:ye=[],isReversed:Ce,isFullscreen:be,hideQuickRanges:We,timeZone:Qe,fiscalYearStartMonth:mt,value:vt,onChange:rt,history:Ot,showHistory:Et,className:Mt,hideTimeZone:ue,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Ne}=Re,tt=!Ot?.length,et=be&&Et||!be&&(Et&&!tt||!We),Ue=(0,d.l4)(),Fe=Le(Ue,Ce,We,et,be),Ee=gt(Ot,Qe),Me=Te(vt.raw,ye),[He,Ze]=(0,n.useState)(""),lt=ye.filter(Pt=>Pt.display.toLowerCase().includes(He.toLowerCase())),bt=Pt=>rt(Z(Pt));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Fe.container,Mt)},n.createElement("div",{className:Fe.body},(!be||!We)&&n.createElement("div",{className:Fe.rightSide},n.createElement("div",{className:Fe.timeRangeFilter},n.createElement(f.H,{width:0,autoFocus:!0,value:He,onChange:Ze,placeholder:(0,a.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(u.$,null,!be&&n.createElement(me,{...Re,historyOptions:Ee}),!We&&n.createElement(fe.V,{options:lt,onChange:bt,value:Me}))),be&&n.createElement("div",{className:Fe.leftSide},n.createElement(Ie,{...Re,historyOptions:Ee}))),!ue&&be&&n.createElement(M,{timeZone:Qe,fiscalYearStartMonth:mt,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Ne}))},ve=Re=>{const{widthOverride:ye}=Re,Ce=(0,d.l4)(),be=(ye||window.innerWidth)>=Ce.breakpoints.values.lg;return n.createElement(re,{...Re,isFullscreen:be})},me=Re=>{const{value:ye,hideQuickRanges:Ce,onChange:be,timeZone:We,historyOptions:Qe=[],showHistory:mt}=Re,vt=(0,d.l4)(),rt=Ye(vt),Ot=(0,o.v9)(ye.raw.from)||(0,o.v9)(ye.raw.to),[Et,Mt]=(0,n.useState)(!Ot),ue=Ce?!1:Et,De=Ne=>be(Z(Ne,We));return n.createElement("fieldset",null,n.createElement("div",{className:rt.header},n.createElement("button",{type:"button",className:rt.expandButton,onClick:()=>{Ce||Mt(!ue)},"data-testid":l.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!ue,"aria-controls":"expanded-timerange"},n.createElement(A.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Ce&&n.createElement(i.J,{name:ue?"angle-down":"angle-up"}))),!ue&&n.createElement("div",{className:rt.body,id:"expanded-timerange"},n.createElement("div",{className:rt.form},n.createElement(j,{value:ye,onApply:be,timeZone:We,isFullscreen:!1})),mt&&n.createElement(fe.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Qe,onChange:De,placeholderEmpty:null})))},Ie=Re=>{const{onChange:ye,value:Ce,timeZone:be,fiscalYearStartMonth:We,isReversed:Qe,historyOptions:mt}=Re,vt=(0,d.l4)(),rt=it(vt,Re.hideQuickRanges),Ot=Et=>ye(Z(Et,be));return n.createElement(n.Fragment,null,n.createElement("div",{className:rt.container},n.createElement("div",{className:rt.title,"data-testid":l.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(A.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(j,{value:Ce,timeZone:be,fiscalYearStartMonth:We,onApply:ye,isFullscreen:!0,isReversed:Qe})),Re.showHistory&&n.createElement("div",{className:rt.recent},n.createElement(fe.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:mt||[],onChange:Ot,placeholderEmpty:n.createElement(Ge,null)})))},Ge=(0,n.memo)(()=>{const Re=(0,d.l4)(),ye=ht(Re);return n.createElement("div",{className:ye.container},n.createElement(a.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:ye.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function gt(Re,ye){return!Array.isArray(Re)||Re.length===0?[]:Re.map(Ce=>ne(Ce,ye))}Ge.displayName="EmptyRecentList";const Te=(Re,ye)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Re))return ye.find(Ce=>Ce.from===Re.from&&Ce.to===Re.to)},[Re,ye]),Le=(0,r.B)((Re,ye,Ce,be,We)=>({container:t.css`
      background: ${Re.colors.background.primary};
      box-shadow: ${Re.shadows.z3};
      width: ${We?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Re.colors.border.weak};
      ${ye?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${be?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${ye?"none":`1px solid ${Re.colors.border.weak}`};
      width: ${Ce?"100%":"60%"};
      overflow: hidden;
      order: ${ye?1:0};
    `,rightSide:t.css`
      width: ${We?"40%":"100%"}; !important;
      border-right: ${ye?`1px solid ${Re.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Re.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),Ye=(0,r.B)(Re=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Re.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,c.getFocusStyles)(Re)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Re.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),it=(0,r.B)((Re,ye)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${ye?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Re.spacing(1)};
    `})),ht=(0,r.B)(Re=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Re.colors.text.link};
    `}))},65012:(Y,O,e)=>{"use strict";e.d(O,{r:()=>l});var t=e(9892),n=e(66111),o=e(72648);const s=f=>({text:t.css`
      font-size: ${f.typography.size.md};
      font-weight: ${f.typography.fontWeightMedium};
      color: ${f.colors.text.primary};
      margin: 0;
      display: flex;
    `}),l=(0,n.memo)(({children:f})=>{const d=(0,o.wW)(s);return n.createElement("h3",{className:d.text},f)});l.displayName="TimePickerTitle"},98574:(Y,O,e)=>{"use strict";e.d(O,{V:()=>p});var t=e(9892),n=e(66111),o=e(7804),s=e(37951),l=e(65012),f=e(44288),d=e(72648),r=e(85419);const c=h=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${h.colors.action.selected};
      font-weight: ${h.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,r.getFocusStyles)(h)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${h.colors.action.hover};
        cursor: pointer;
      }
    `}),a=(0,n.memo)(({value:h,onSelect:v,selected:C=!1,name:m})=>{const D=(0,d.wW)(c),P=(0,f.Z)();return n.createElement("li",{className:(0,t.cx)(D.container,C&&D.selected)},n.createElement("input",{className:D.radio,checked:C,name:m,type:"checkbox",id:P,onChange:()=>v(h)}),n.createElement("label",{className:D.label,htmlFor:P},h.display))});a.displayName="TimeRangeOption";const u=(0,o.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),i=(0,o.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),p=h=>{const v=u(),{title:C,options:m,placeholderEmpty:D}=h;return typeof D<"u"&&m.length<=0?n.createElement(n.Fragment,null,D):C?n.createElement("section",{"aria-label":C},n.createElement("fieldset",null,n.createElement("div",{className:v.title},n.createElement(l.r,null,C)),n.createElement(g,{...h}))):n.createElement(g,{...h})},g=({options:h,value:v,onChange:C,title:m})=>{const D=i();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},h.map((P,b)=>n.createElement(a,{key:y(P,b),value:P,selected:E(P,v),onSelect:C,name:m??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:D.grow}))};function y(h,v){return`${h.from}-${h.to}-${v}`}function E(h,v){return!v||!h?!1:v.from===h.from&&v.to===h.to}},52566:(Y,O,e)=>{"use strict";e.d(O,{O:()=>C});var t=e(82897),n=e(66111),o=e(56808),s=e(37951),l=e(8581),f=e(9892),d=e(72648);const r=x=>{const{children:A,label:T}=x,S=(0,d.wW)(c);return T?n.createElement("div",null,n.createElement("div",{className:S.header},n.createElement("span",{className:S.label},T)),A):n.createElement("div",null,A)},c=x=>({header:f.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${x.colors.border.weak};
      text-transform: capitalize;
    `,label:f.css`
      font-size: ${x.typography.size.sm};
      color: ${x.colors.text.secondary};
      font-weight: ${x.typography.fontWeightMedium};
    `});var a=e(4883),u=e(7804),i=e(39904),p=e(64612),g=e(10516);const y="tz-utc-offset",E=x=>{const{children:A,innerProps:T,innerRef:S,data:U,isSelected:R,isFocused:F}=x,B=(0,d.l4)(),K=v(B),L=Date.now(),N=(0,f.cx)(K.container,F&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const z=(0,o.Pr)(U.value,L);return n.createElement("div",{className:N,...T,ref:S,"aria-label":"Select option"},n.createElement("div",{className:(0,f.cx)(K.leftColumn,K.row)},n.createElement("div",{className:(0,f.cx)(K.leftColumn,K.wideRow)},n.createElement(g.d,{title:A}),n.createElement("div",{className:K.spacer}),n.createElement(p.K,{info:z})),n.createElement("div",{className:K.rightColumn},n.createElement(a.v,{timeZone:z?.ianaName||U.value,timestamp:L,className:y}),R&&n.createElement("span",null,n.createElement(i.J,{name:"check"})))))},h=x=>{const{children:A,innerProps:T,innerRef:S,data:U,isSelected:R,isFocused:F}=x,B=(0,d.l4)(),K=v(B),L=Date.now(),N=(0,f.cx)(K.container,F&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const z=(0,o.Pr)(U.value,L);return n.createElement("div",{className:N,...T,ref:S,"aria-label":"Select option"},n.createElement("div",{className:K.body},n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(g.d,{title:A})),n.createElement("div",{className:K.rightColumn},R&&n.createElement("span",null,n.createElement(i.J,{name:"check"})))),n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(p.K,{info:z})),n.createElement("div",{className:K.rightColumn},n.createElement(a.v,{timestamp:L,timeZone:z?.ianaName||U.value,className:y})))))},v=(0,u.B)(x=>({container:f.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${x.colors.action.hover};
      }
    `,containerFocused:f.css`
      background: ${x.colors.action.hover};
    `,body:f.css`
      display: flex;
      font-weight: ${x.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:f.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:f.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:f.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:f.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:f.css`
      margin-left: 6px;
    `})),C=x=>{const{onChange:A,width:T,autoFocus:S=!1,onBlur:U,value:R,includeInternal:F=!1,disabled:B=!1,inputId:K,menuShouldPortal:L=!1,openMenuOnFocus:N=!0}=x,z=m(F),G=D(z,R),I=b(),V=T&&T<=45?h:E,H=(0,n.useCallback)(Q=>{if(!Q||!(0,t.isString)(Q.value))return A(R);A(Q.value)},[A,R]);return n.createElement(l.Ph,{inputId:K,value:G,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:S,menuShouldPortal:L,openMenuOnFocus:N,width:T,filterOption:I,options:z,onChange:H,onBlur:U,components:{Option:V,Group:r},disabled:B,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},m=x=>{const A=Date.now();return(0,o.$8)(x).map(S=>{const U=S.zones.reduce((R,F)=>{const B=(0,o.Pr)(F,A);return B&&R.push({label:B.name,value:B.zone,searchIndex:M(B,A)}),R},[]);return{label:S.name,options:U}})},D=(x,A)=>(0,n.useMemo)(()=>{if(A===void 0)return;const T=(0,t.toLower)(A);return x.find(U=>U.label?T.startsWith((0,t.toLower)(U.label)):P(T))?.options.find(U=>(0,t.isEmpty)(T)?U.value===o.RQ.default:(0,t.toLower)(U.value)===T)},[x,A]),P=x=>{switch(x){case o.RQ.default:case o.RQ.localBrowserTime:case o.RQ.utc:return!0;default:return!1}},b=()=>(0,n.useCallback)((x,A)=>!A||!x.data||!x.data.searchIndex?!0:x.data.searchIndex.indexOf((0,t.toLower)(A))>-1,[]),M=(x,A)=>{const T=[(0,t.toLower)(x.name),(0,t.toLower)(x.abbreviation),(0,t.toLower)((0,a.k)(A,x.zone))];for(const S of x.countries)T.push((0,t.toLower)(S.name)),T.push((0,t.toLower)(S.code));return T.join("|")}},64612:(Y,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({info:d})=>{const r=(0,o.wW)(f),c=l(d);return d?n.createElement("div",{className:r.description},c):null},l=d=>(0,n.useMemo)(()=>{const r=[];if(!d)return"";if(d.countries.length>0){const c=d.countries[0];r.push(c.name)}return d.abbreviation&&r.push(d.abbreviation),r.join(", ")},[d]),f=d=>({description:t.css`
      font-weight: normal;
      font-size: ${d.typography.size.sm};
      color: ${d.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(Y,O,e)=>{"use strict";e.d(O,{k:()=>r,v:()=>d});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(77258),f=e(72648);const d=a=>{const{timestamp:u,timeZone:i,className:p}=a,g=(0,f.wW)(c);return(0,n.isString)(i)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(g.offset,p)},r(u,i))):null},r=(a,u)=>{const i=(0,l.dq)(a,{timeZone:u,format:"Z"});return i==="+00:00"?"UTC":`UTC${i}`},c=a=>{const u=t.css`
    font-weight: normal;
    font-size: ${a.typography.size.sm};
    color: ${a.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${u};
      color: ${a.colors.text.primary};
      background: ${a.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(Y,O,e)=>{"use strict";e.d(O,{d:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({title:f})=>{const d=(0,o.wW)(l);return f?n.createElement("span",{className:d.title},f):null},l=f=>({title:t.css`
      font-weight: ${f.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(Y,O,e)=>{"use strict";e.d(O,{z:()=>l});var t=e(66111),n=e(68183),o=e(8581);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],l=f=>{const{onChange:d,width:r,autoFocus:c=!1,onBlur:a,value:u,disabled:i=!1,inputId:p}=f,g=(0,t.useCallback)(y=>{y.value!==void 0&&d(y.value)},[d]);return t.createElement(o.Ph,{inputId:p,value:s.find(y=>y.value===u)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:c,openMenuOnFocus:!0,width:r,options:s,onChange:g,onBlur:a,disabled:i})}},21356:(Y,O,e)=>{"use strict";e.d(O,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(Y,O,e)=>{"use strict";e.d(O,{d:()=>p});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(6756),f=e(66111),d=e(17650),r=e(68183),c=e(72648),a=e(31403),u=e(68226),i=e(17937);function p({children:h,onClose:v,closeOnMaskClick:C=!0,scrollableContent:m=!1,title:D,subtitle:P,width:b,size:M="md",tabs:x}){const A=(0,c.wW)(E),T=f.useRef(null),{dialogProps:S,titleProps:U}=(0,n.R)({},T),{overlayProps:R}=(0,s.Ir)({isDismissable:!1,isOpen:!0,onClose:v},T);y(),(0,d.Z)(T,C?v:g);const F=(0,t.cx)(A.drawer,!b&&A.sizes[M]),B=f.createElement("div",{className:A.content},h);return f.createElement(l.Z,{open:!0,onClose:v,placement:"right",width:b??"",getContainer:".main-view",className:A.drawerContent,rootClassName:F,motion:{motionAppear:!0,motionName:A.drawerMotion},maskClassName:A.mask,maskClosable:C,maskMotion:{motionAppear:!0,motionName:A.maskMotion}},f.createElement(o.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},f.createElement("div",{"aria-label":typeof D=="string"?r.wl.components.Drawer.General.title(D):r.wl.components.Drawer.General.title("no title"),className:A.container,...R,...S,ref:T},typeof D=="string"&&f.createElement("div",{className:(0,t.cx)(A.header,Boolean(x)&&A.headerWithTabs)},f.createElement("div",{className:A.actions},f.createElement(a.zx,{icon:"times",variant:"secondary",fill:"text",onClick:v,"aria-label":r.wl.components.Drawer.General.close})),f.createElement("div",{className:A.titleWrapper},f.createElement(i.x,{as:"h3",...U},D),P&&f.createElement("div",{className:A.subtitle},P),x&&f.createElement("div",{className:A.tabsWrapper},x))),typeof D!="string"&&D,f.createElement("div",{className:A.contentScroll},m?f.createElement(u.$,{autoHeightMin:"100%"},B):B))))}function g(){}function y(){(0,f.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const E=h=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .main-view & {
        top: 81px;
      }

      .main-view--search-bar-hidden & {
        top: 41px;
      }

      .rc-drawer-content-wrapper {
        box-shadow: ${h.shadows.z3};

        ${h.breakpoints.down("sm")} {
          width: calc(100% - ${h.spacing(2)}) !important;
          min-width: 0 !important;
        }
      }
    `,sizes:{sm:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:h.spacing(48)}}),md:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:h.spacing(60)}}),lg:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"75vw",minWidth:h.spacing(93),[h.breakpoints.down("md")]:{width:`calc(100% - ${h.spacing(2)}) !important`,minWidth:0}}})},drawerContent:t.css`
      background-color: ${h.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${h.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${h.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${h.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${h.transitions.create("opacity")};
        }
      }
    `,header:(0,t.css)({flexGrow:0,padding:h.spacing(3,2),borderBottom:`1px solid ${h.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:h.spacing(1),top:h.spacing(2)}),titleWrapper:t.css`
      overflow-wrap: break-word;
    `,subtitle:(0,t.css)({color:h.colors.text.secondary,paddingTop:h.spacing(1)}),content:(0,t.css)({padding:h.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:h.spacing(2),margin:h.spacing(2,-1,-3,-3)})})},44342:(Y,O,e)=>{"use strict";e.d(O,{d:()=>g});var t=e(9892),n=e(88962),o=e(83962),s=e(61781),l=e(61960),f=e(66111),d=e(72648),r=e(26202),c=e(94437),a=e(95130),u=e(42044),i=e(64319);const p=E=>{const{className:h,options:v,value:C,onChange:m,narrow:D,variant:P,...b}=E,M=(0,d.wW)(y),x=(0,l.W)({}),A=f.useRef(null),{menuTriggerProps:T,menuProps:S}=(0,s.u4)({},x,A),{buttonProps:U}=(0,n.U)(T,A),R=F=>{m(F),x.close()};return f.createElement(r.h,{className:M.wrapper},f.createElement(i.h,{className:h,isOpen:x.isOpen,narrow:D,variant:P,ref:A,...U,...b},C?.label||(C?.value!=null?String(C?.value):null)),x.isOpen&&f.createElement("div",{className:M.menuWrapper},f.createElement(c.L,{onClick:x.close,parent:document,includeButtonPress:!1},f.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},f.createElement(a.v,{tabIndex:-1,onClose:x.close,...S},v.map(F=>f.createElement(u.s,{key:`${F.value}`,label:F.label??String(F.value),onClick:()=>R(F),active:F.value===C?.value,ariaChecked:F.value===C?.value,ariaLabel:F.ariaLabel||F.label,role:"menuitemradio"})))))))};p.displayName="ButtonSelect";const g=f.memo(p),y=E=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${E.zIndex.dropdown};
      top: ${E.spacing(4)};
      right: 0;
    `})},71698:(Y,O,e)=>{"use strict";e.d(O,{L:()=>r});var t=e(9892),n=e(83962),o=e(66111),s=e(27480),l=e(79288),f=e(61970),d=e(85511);const r=o.memo(({children:a,overlay:u,placement:i,offset:p,onVisibleChange:g})=>{const[y,E]=(0,o.useState)(!1),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{g?.(y)},[g,y]);const{getArrowProps:v,getTooltipProps:C,setTooltipRef:m,setTriggerRef:D,visible:P}=(0,s.O)({visible:y,placement:i,onVisibleChange:E,interactive:!0,delayHide:0,delayShow:0,offset:p??[0,8],trigger:["click"]}),b=150,M=c(b),x=()=>{E(!1)},A=T=>{(T.key==="Escape"||T.key==="Tab")&&E(!1)};return o.createElement(o.Fragment,null,o.cloneElement(a,{ref:D}),P&&o.createElement(d.h_,null,o.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},o.createElement("div",{ref:m,...C(),onClick:x,onKeyDown:A},o.createElement("div",{...v({className:"tooltip-arrow"})}),o.createElement(l.Z,{nodeRef:h,appear:!0,in:!0,timeout:{appear:b,exit:0,enter:0},classNames:M},o.createElement("div",{ref:h},f.renderOrCallToRender(u,{})))))))});r.displayName="Dropdown";const c=a=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${a}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${a}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(Y,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f})=>{const d=(0,o.wW)(l);return n.createElement("div",{className:d.container},f)},l=f=>({container:t.css`
      border-left: 3px solid ${f.colors.info.main};
      background-color: ${f.colors.background.secondary};
      padding: ${f.spacing(2)};
      min-width: 350px;
      border-radius: ${f.shape.radius.default};
      margin-bottom: ${f.spacing(4)};
    `})},53546:(Y,O,e)=>{"use strict";e.d(O,{Pf:()=>r,SV:()=>f,z4:()=>d});var t=e(37916),n=e(66111),o=e(53843),s=e(45253),l=e(39198);class f extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(a,u){(0,t.Tb)(a,{contexts:{react:{componentStack:u.componentStack}}}),o.s?.api?.pushError(a),this.setState({error:a,errorInfo:u}),this.props.onError&&this.props.onError(a)}componentDidUpdate(a){const{dependencies:u,onRecover:i}=this.props;if(this.state.error&&u&&a.dependencies){for(let p=0;p<u.length;p++)if(u[p]!==a.dependencies[p]){this.setState({error:null,errorInfo:null}),i&&i();break}}}render(){const{children:a}=this.props,{error:u,errorInfo:i}=this.state;return a({error:u,errorInfo:i})}}class d extends n.PureComponent{render(){const{title:a,children:u,style:i,dependencies:p}=this.props;return n.createElement(f,{dependencies:p},({error:g,errorInfo:y})=>y?i==="alertbox"?n.createElement(s.b,{title:a||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),y.componentStack)):n.createElement(l.X,{title:a||"",error:g,errorInfo:y}):u)}}d.defaultProps={title:"An unexpected error happened",style:"alertbox"};function r(c,a={}){const u=i=>n.createElement(d,{...a},n.createElement(c,{...i}));return u.displayName="WithErrorBoundary",u}},39198:(Y,O,e)=>{"use strict";e.d(O,{X:()=>l});var t=e(9892),n=e(66111),o=e(7804);const s=(0,o.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),l=({error:f,errorInfo:d,title:r})=>n.createElement("div",{className:s()},n.createElement("h2",null,r),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},f&&f.toString(),n.createElement("br",null),d&&d.componentStack));l.displayName="ErrorWithStack"},30784:(Y,O,e)=>{"use strict";e.d(O,{A_:()=>y,Yo:()=>i});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(85191),f=e(92138),d=e(2703),r=e(72648),c=e(45253),a=e(39904),u=e(27119);function i({options:m,children:D,readAs:P,onLoad:b,fileListRenderer:M,onFileRemove:x}){const[A,T]=(0,s.useState)([]),[S,U]=(0,s.useState)([]),R=(0,d.Cf)("decbytes")(m?.maxSize?m?.maxSize:0),F=(0,s.useCallback)((se,ie)=>{T(j=>j.map(de=>(de.id===se.id&&ie(de),de)))},[]),B=(0,s.useCallback)((se,ie,j)=>{let de=se.map(v);if(m?.multiple===!1?T(de):T(ce=>[...ce,...de]),H(ie),m?.onDrop)m.onDrop(se,ie,j);else for(const ce of de){const ee=new FileReader,le=()=>{P?ee[P](ce.file):ee.readAsText(ce.file)};F(ce,q=>{q.abortUpload=()=>{ee.abort()},q.retryUpload=()=>{F(ce,fe=>{fe.error=null,fe.progress=void 0}),le()}}),ee.onabort=()=>{F(ce,q=>{q.error=new DOMException("Aborted")})},ee.onprogress=q=>{F(ce,fe=>{fe.progress=q.loaded})},ee.onload=()=>{b?.(ee.result)},ee.onerror=()=>{F(ce,q=>{q.error=ee.error})},le()}},[b,m,P,F]),K=se=>{const ie=A.filter(j=>se.id!==j.id);T(ie),x?.(se)},{getRootProps:L,getInputProps:N,isDragActive:z}=(0,l.uI)({...m,useFsAccessApi:!1,onDrop:B,accept:g(m?.accept)}),G=(0,r.l4)(),I=C(G,z),V=A.map(se=>M?M(se,K):s.createElement(u.K,{key:se.id,file:se,removeFile:K})),H=se=>{let ie=[];se.map(j=>{j.errors.map(de=>{ie.findIndex(ce=>ce.code===de.code&&ce.message===de.message)===-1&&ie.push(de)})}),U(ie)},Q=se=>s.createElement("div",{className:I.errorAlert},s.createElement(c.b,{title:"Upload failed",severity:"error",onRemove:oe},se.map(ie=>{switch(ie.code){case f.jK.FileTooLarge:return s.createElement("div",{key:ie.message+ie.code},"File is larger than ",(0,d.zc)(R));default:return s.createElement("div",{key:ie.message+ie.code},ie.message)}}))),oe=()=>{U([])};return s.createElement("div",{className:I.container},s.createElement("div",{"data-testid":"dropzone",...L({className:I.dropzone})},s.createElement("input",{...N()}),D??s.createElement(y,{primaryText:E(A,m)})),S.length>0&&Q(S),s.createElement("small",{className:(0,t.cx)(I.small,I.acceptContainer)},m?.maxSize&&`Max file size: ${(0,d.zc)(R)}`,m?.maxSize&&m?.accept&&s.createElement("span",{className:I.acceptSeparator},"|"),m?.accept&&h(m.accept)),V)}function p(m){return["txt","json","csv","xls","yml"].some(D=>m.match(D))?"text/plain":"application/octet-stream"}function g(m){return(0,n.isString)(m)?{[p(m)]:[m]}:Array.isArray(m)?m.reduce((D,P)=>{const b=p(P);return D[b]=D[b]?[...D[b],P]:[P],D},{}):m}function y({primaryText:m="Drop file here or click to upload",secondaryText:D=""}){const P=(0,r.l4)(),b=C(P);return s.createElement("div",{className:(0,t.cx)(b.defaultDropZone)},s.createElement(a.J,{className:(0,t.cx)(b.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(b.primaryText)},m),s.createElement("small",{className:b.small},D))}function E(m,D){return D?.multiple===void 0||D?.multiple?"Upload file":m.length?"Replace file":"Upload file"}function h(m){return(0,n.isString)(m)?`Accepted file type: ${m}`:Array.isArray(m)?`Accepted file types: ${m.join(", ")}`:`Accepted file types: ${Object.values(m).flat().join(", ")}`}function v(m){return{id:(0,n.uniqueId)("file"),file:m,error:null}}function C(m,D){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
      padding: ${m.spacing(2)};
      border-radius: 2px;
      border: 1px dashed ${m.colors.border.strong};
      background-color: ${D?m.colors.background.secondary:m.colors.background.primary};
      cursor: pointer;
      align-items: center;
      justify-content: center;
    `,dropzone:t.css`
      display: flex;
      flex-direction: column;
    `,defaultDropZone:t.css`
      text-align: center;
    `,icon:t.css`
      margin-bottom: ${m.spacing(1)};
    `,primaryText:t.css`
      margin-bottom: ${m.spacing(1)};
    `,acceptContainer:t.css`
      text-align: center;
      margin: 0;
    `,acceptSeparator:t.css`
      margin: 0 ${m.spacing(1)};
    `,small:t.css`
      color: ${m.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(Y,O,e)=>{"use strict";e.d(O,{K:()=>a});var t=e(9892),n=e(66111),o=e(2703),s=e(72648),l=e(39027),f=e(31403),d=e(39904),r=e(8180);const c="Remove file";function a({file:i,removeFile:p}){const g=(0,s.wW)(u),{file:y,progress:E,error:h,abortUpload:v,retryUpload:C}=i,m=()=>h?n.createElement(n.Fragment,null,n.createElement("span",{className:g.error},h.message),C&&n.createElement(r.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:C}),p&&n.createElement(r.h,{className:C?g.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>p(i),tooltip:c,"aria-label":c})):E&&y.size>E?n.createElement(n.Fragment,null,n.createElement("progress",{className:g.progressBar,max:y.size,value:E}),n.createElement("span",{className:g.paddingLeft},Math.round(E/y.size*100),"%"),v&&n.createElement(f.zx,{variant:"secondary",type:"button",fill:"text",onClick:v},"Cancel upload")):p&&n.createElement(r.h,{name:"trash-alt",onClick:()=>p(i),tooltip:c,"aria-label":c,type:"button",tooltipPlacement:"top"}),D=(0,o.Cf)("decbytes")(y.size);return n.createElement("div",{className:g.fileListContainer},n.createElement("span",{className:g.fileNameWrapper},n.createElement(d.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:g.padding},(0,l.O)(y.name)),n.createElement("span",null,(0,o.zc)(D))),n.createElement("div",{className:g.fileNameWrapper},m()))}function u(i){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${i.spacing(2)};
      border: 1px dashed ${i.colors.border.medium};
      background-color: ${i.colors.background.secondary};
      margin-top: ${i.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${i.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${i.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${i.spacing(1)};
    `,error:t.css`
      padding-right: ${i.spacing(2)};
      color: ${i.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${i.shape.radius.default};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${i.colors.border.weak};
        border-radius: ${i.shape.radius.default};
      }
      ::-webkit-progress-value {
        background-color: ${i.colors.primary.main};
        border-radius: ${i.shape.radius.default};
      }
    `}}},47556:(Y,O,e)=>{"use strict";e.d(O,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(Y,O,e)=>{"use strict";e.d(O,{p:()=>a});var t=e(9892),n=e(66111),o=e(44288),s=e(68183),l=e(72648),f=e(85419),d=e(39027),r=e(31403),c=e(39904);const a=({onFileUpload:i,className:p,children:g="Upload file",accept:y="*",size:E="md",showFileName:h})=>{const v=(0,l.wW)(u(E)),[C,m]=(0,n.useState)(""),D=(0,o.Z)(),P=(0,n.useCallback)(b=>{const M=b.currentTarget?.files?.[0];M&&m(M.name??""),i(b)},[i]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:D,className:v.fileUpload,onChange:P,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:D,className:(0,t.cx)(v.labelWrapper,p)},n.createElement(c.J,{name:"upload",className:v.icon}),g),h&&C&&n.createElement("span",{"aria-label":"File name",className:v.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,d.O)(C)))},u=i=>p=>{const g=(0,r.fW)({theme:p,variant:"primary",size:i,iconOnly:!1}),y=(0,f.getFocusStyles)(p);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:g.button,icon:g.icon,fileName:(0,t.css)({marginLeft:p.spacing(.5)})}}},14747:(Y,O,e)=>{"use strict";e.d(O,{H:()=>d});var t=e(66111),n=e(79086);function o(...r){const c=t.useRef(null);return t.useEffect(()=>{r.forEach(a=>{a&&(typeof a=="function"?a(c.current):a.current=c.current)})},[r]),c}var s=e(31403),l=e(39904),f=e(46967);const d=t.forwardRef(({value:r,width:c,onChange:a,escapeRegex:u=!0,...i},p)=>{const g=t.useRef(null),y=o(p,g),E=r!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:h=>{g.current?.focus(),a(""),h.stopPropagation()}},"Clear"):null;return t.createElement(f.I,{prefix:t.createElement(l.J,{name:"search"}),suffix:E,width:c,type:"text",value:u?(0,n.x6)(r??""):r,onChange:h=>a(u?(0,n.GE)(h.currentTarget.value):h.currentTarget.value),...i,ref:y})});d.displayName="FilterInput"},41165:(Y,O,e)=>{"use strict";e.d(O,{B:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(39904);const f=({label:r,selected:c,onClick:a,icon:u="check"})=>{const i=(0,o.wW)(d),p=(0,o.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(p,i.wrapper,c&&i.selected),onClick:a},n.createElement("span",null,r),c&&n.createElement(l.J,{name:u,className:i.icon}))},d=r=>({wrapper:t.css`
      background: ${r.colors.background.secondary};
      border-radius: ${r.shape.borderRadius(8)};
      padding: ${r.spacing(0,2)};
      font-size: ${r.typography.bodySmall.fontSize};
      font-weight: ${r.typography.fontWeightMedium};
      line-height: ${r.typography.bodySmall.lineHeight};
      color: ${r.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${r.colors.action.hover};
        color: ${r.colors.text.primary};
      }
    `,selected:t.css`
      color: ${r.colors.text.primary};
      background: ${r.colors.action.selected};

      &:hover {
        background: ${r.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${r.spacing(.5)};
    `})},95569:(Y,O,e)=>{"use strict";e.d(O,{W:()=>l});var t=e(9892),n=e(66111),o=e(19426);const s={labelWidth:6,inputWidth:12},l=({label:d,tooltip:r,labelWidth:c,inputWidth:a,inputEl:u,className:i,interactive:p,...g})=>{const y=f();return n.createElement("div",{className:(0,t.cx)(y.formField,i)},n.createElement(o.c,{width:c,tooltip:r,interactive:p},d),u||n.createElement("input",{type:"text",className:`gf-form-input ${a?`width-${a}`:""}`,...g,disabled:g.disabled}))};l.displayName="FormField",l.defaultProps=s;const f=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(Y,O,e)=>{"use strict";e.d(O,{c:()=>d});var t=e(9085),n=e.n(t),o=e(66111),s=e(39904),l=e(61860);const d=({children:r,isFocused:c,isInvalid:a,className:u,htmlFor:i,tooltip:p,width:g,interactive:y,...E})=>{const h=n()(u,`gf-form-label width-${g||"10"}`,{"gf-form-label--is-focused":c,"gf-form-label--is-invalid":a});return o.createElement("label",{className:h,...E,htmlFor:i},r,p&&o.createElement(l.u,{placement:"top",content:p,theme:"info",interactive:y},o.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(Y,O,e)=>{"use strict";e.d(O,{W:()=>o});var t=e(66111);function n(s){return s<20?.9:s<26?.8:.6}const o=({value:s,className:l,style:f,...d})=>{const r=(s.prefix??"").length>0,c=(s.suffix??"").length>0;let a;if(f&&f.fontSize&&typeof f.fontSize=="number"){const u=f.fontSize,i=n(u);a={fontSize:u*i}}return t.createElement("div",{className:l,style:f,...d},t.createElement("div",null,r&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),c&&t.createElement("span",{style:a},s.suffix)))};o.displayName="FormattedDisplayValue"},58255:(Y,O,e)=>{"use strict";e.d(O,{X:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(85419),f=e(64353);const d=n.forwardRef(({label:c,description:a,value:u,htmlValue:i,onChange:p,disabled:g,className:y,indeterminate:E,...h},v)=>{const C=(0,n.useCallback)(P=>{p&&p(P)},[p]),m=(0,o.wW)(r),D=E?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(m.wrapper,y)},n.createElement("div",{className:m.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(m.input,E&&m.inputIndeterminate),checked:u,disabled:g,onChange:C,value:i,"aria-checked":D,...h,ref:v}),n.createElement("span",{className:m.checkmark})),c&&n.createElement("span",{className:m.label},c),a&&n.createElement("span",{className:m.description},a))}),r=(0,s.B)(c=>{const a=(0,f.F)(c),u=2,i=1;return{wrapper:t.css`
      display: inline-grid;
      align-items: center;
      column-gap: ${c.spacing(i)};
      grid-template-columns: auto 1fr;
      grid-template-rows: auto auto;
      position: relative;
      vertical-align: middle;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,l.getFocusStyles)(c)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,l.getMouseFocusStyles)(c)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: ${c.colors.primary.main};
        border: none;

        &:hover {
          background: ${c.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${c.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${c.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${c.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${c.colors.action.disabledText};
        }
      }
    `,inputIndeterminate:t.css`
      &[aria-checked='mixed'] + span {
        border: none;
        background: ${c.colors.primary.main};

        &:hover {
          background: ${c.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 3px;
          right: 3px;
          top: calc(50% - 1.5px);
          height: 3px;
          border: 1.5px solid ${c.colors.primary.contrastText};
          background-color: ${c.colors.primary.contrastText};
          width: auto;
          transform: none;
        }
      }
      &:disabled[aria-checked='mixed'] + span {
        background-color: ${c.colors.action.disabledBackground};

        &:after {
          border-color: ${c.colors.action.disabledText};
        }
      }
    `,checkboxWrapper:t.css`
      display: flex;
      align-items: center;
      grid-column-start: 1;
      grid-row-start: 1;
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${c.spacing(u)};
      height: ${c.spacing(u)};
      border-radius: ${c.shape.borderRadius()};
      background: ${c.components.input.background};
      border: 1px solid ${c.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${c.components.input.borderHover};
      }
    `,label:(0,t.cx)(a.label,t.css`
        grid-column-start: 2;
        grid-row-start: 1;
        position: relative;
        z-index: 2;
        cursor: pointer;
        max-width: fit-content;
        line-height: ${c.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(a.description,t.css`
        grid-column-start: 2;
        grid-row-start: 2;
        line-height: ${c.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});d.displayName="Checkbox"},24799:(Y,O,e)=>{"use strict";e.d(O,{g:()=>c});var t=e(9892),n=e(66111),o=e(7804),s=e(72648),l=e(61970),f=e(57227),d=e(64353);const r=(0,o.B)(u=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${u.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${u.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),c=n.forwardRef(({label:u,description:i,horizontal:p,invalid:g,loading:y,disabled:E,required:h,error:v,children:C,className:m,validationMessageHorizontalOverflow:D,htmlFor:P,...b},M)=>{const x=(0,s.l4)(),A=r(x),T=P??(0,l.getChildId)(C),S=typeof u=="string"?n.createElement(d._,{htmlFor:T,description:i},`${u}${h?" *":""}`):u,U=a({invalid:g,disabled:E,loading:y});return n.createElement("div",{className:(0,t.cx)(A.field,p&&A.fieldHorizontal,m),...b},S,n.createElement("div",null,n.createElement("div",{ref:M},n.cloneElement(C,U)),g&&v&&!p&&n.createElement("div",{className:(0,t.cx)(A.fieldValidationWrapper,{[A.validationMessageHorizontalOverflow]:!!D})},n.createElement(f.S,null,v))),g&&v&&p&&n.createElement("div",{className:(0,t.cx)(A.fieldValidationWrapper,A.fieldValidationWrapperHorizontal,{[A.validationMessageHorizontalOverflow]:!!D})},n.createElement(f.S,null,v)))});c.displayName="Field";function a(u){for(const i in u)u[i]===void 0&&delete u[i];return u}},70132:(Y,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(66698);const n=({name:o,control:s,children:l,...f})=>{const{fields:d,append:r,prepend:c,remove:a,swap:u,move:i,insert:p}=(0,t.Dq)({control:s,name:o,...f});return l({fields:d,append:r,prepend:c,remove:a,swap:u,move:i,insert:p})}},13393:(Y,O,e)=>{"use strict";e.d(O,{C:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(19825);const f=({label:r,children:c,className:a,...u})=>{const i=(0,o.l4)(),p=d(i);return n.createElement("fieldset",{className:(0,t.cx)(p.wrapper,a),...u},r&&n.createElement(l.D,null,r),c)},d=(0,s.B)(r=>({wrapper:t.css`
      margin-bottom: ${r.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(Y,O,e)=>{"use strict";e.d(O,{S:()=>d});var t=e(9892),n=e(66111),o=e(7804),s=e(72648),l=e(39904);const f=(0,o.B)(r=>{const c=`
      font-size: ${r.typography.size.sm};
      font-weight: ${r.typography.fontWeightMedium};
      padding: ${r.spacing(.5,1)};
      color: ${r.colors.error.contrastText};
      background: ${r.colors.error.main};
      border-radius: ${r.shape.borderRadius()};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${r.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${c}
      margin: ${r.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${r.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${c}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${r.spacing()};
    `}}),d=({children:r,horizontal:c,className:a})=>{const u=(0,s.l4)(),i=f(u),p=(0,t.cx)(c?i.horizontal:i.vertical,a);return n.createElement("div",{role:"alert",className:p},n.createElement(l.J,{className:i.fieldValidationMessageIcon,name:"exclamation-triangle"}),r)}},94270:(Y,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(9892),n=e(66111),o=e(66698);function s({defaultValues:l,onSubmit:f,validateOnMount:d=!1,validateFieldsOnMount:r,children:c,validateOn:a="onSubmit",maxWidth:u=600,...i}){const{handleSubmit:p,trigger:g,formState:y,...E}=(0,o.cI)({mode:a,defaultValues:l});return(0,n.useEffect)(()=>{d&&g(r)},[g,r,d]),n.createElement("form",{className:t.css`
        max-width: ${u!=="none"?u+"px":u};
        width: 100%;
      `,onSubmit:p(f),...i},c({errors:y.errors,formState:y,...E}))}},81764:(Y,O,e)=>{"use strict";e.d(O,{_:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(61970),l=e(57227),f=e(77117);const d=({children:c,label:a,tooltip:u,labelWidth:i="auto",invalid:p,loading:g,disabled:y,required:E,className:h,htmlFor:v,grow:C,shrink:m,error:D,transparent:P,interactive:b,...M})=>{const x=(0,o.l4)(),A=r(x,C,m),T=v??(0,s.getChildId)(c),S=typeof a=="string"?n.createElement(f.W,{interactive:b,width:i,tooltip:u,htmlFor:T,transparent:P},`${a}${E?" *":""}`):a;return n.createElement("div",{className:(0,t.cx)(A.container,h),...M},S,n.createElement("div",{className:A.childContainer},n.cloneElement(c,{invalid:p,disabled:y,loading:g}),p&&D&&n.createElement("div",{className:(0,t.cx)(A.fieldValidationWrapper)},n.createElement(l.S,null,D))))};d.displayName="InlineField";const r=(c,a,u)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${a?1:0} ${u?1:0} auto;
      margin: 0 ${c.spacing(.5)} ${c.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${a?1:0} ${u?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${c.spacing(.5)};
    `})},11543:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f,className:d,...r})=>{const c=(0,o.wW)(l);return n.createElement("div",{className:(0,t.cx)(c.container,d),...r},f)},l=f=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${f.spacing(.5)};
    `})},77117:(Y,O,e)=>{"use strict";e.d(O,{W:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(39904),l=e(61860);const f=({children:r,className:c,tooltip:a,width:u,transparent:i,interactive:p,as:g="label",...y})=>{const E=(0,o.wW)((0,n.useCallback)(h=>d(h,i,u),[i,u]));return n.createElement(g,{className:(0,t.cx)(E.label,c),...y},r,a&&n.createElement(l.u,{interactive:p,placement:"top",content:a,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:E.icon})))},d=(r,c=!1,a)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${r.spacing(1)};
      font-weight: ${r.typography.fontWeightMedium};
      font-size: ${r.typography.size.sm};
      background-color: ${c?"transparent":r.colors.background.secondary};
      height: ${r.spacing(r.components.height.md)};
      line-height: ${r.spacing(r.components.height.md)};
      margin-right: ${r.spacing(.5)};
      border-radius: ${r.shape.radius.default};
      border: none;
      width: ${a?a!=="auto"?`${8*a}px`:a:"100%"};
      color: ${r.colors.text.primary};
    `,icon:t.css`
      color: ${r.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${r.colors.text.primary};
      }
    `})},62157:(Y,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f,className:d,grow:r,...c})=>{const a=(0,o.wW)(u=>l(u,r));return n.createElement("div",{className:(0,t.cx)(a.container,d),...c},f)};s.displayName="InlineSegmentGroup";const l=(f,d)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${d?1:0} 0 auto;
      margin-bottom: ${f.spacing(.5)};
    `})},64353:(Y,O,e)=>{"use strict";e.d(O,{F:()=>f,_:()=>d});var t=e(9892),n=e(66111),o=e(7804),s=e(72648),l=e(39904);const f=(0,o.B)(r=>({label:t.css`
      label: Label;
      font-size: ${r.typography.size.sm};
      font-weight: ${r.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${r.spacing(.5)};
      color: ${r.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.size.sm};
      font-weight: ${r.typography.fontWeightRegular};
      margin-top: ${r.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${r.spacing(.25)};
    `})),d=({children:r,description:c,className:a,category:u,...i})=>{const p=(0,s.l4)(),g=f(p),y=u?.map((E,h)=>n.createElement("span",{className:g.categories,key:`${E}/${h}`},n.createElement("span",null,E),n.createElement(l.J,{name:"angle-right",className:g.chevron})));return n.createElement("div",{className:(0,t.cx)(g.label,a)},n.createElement("label",{...i},n.createElement("div",{className:g.labelContent},y,r),c&&n.createElement("span",{className:g.description},c)))}},50869:(Y,O,e)=>{"use strict";e.d(O,{G:()=>l,I:()=>f});var t=e(9085),n=e.n(t),o=e(66111),s=e(97291),l=(d=>(d.Invalid="invalid",d.Valid="valid",d))(l||{});class f extends o.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=r=>c=>{const a=(0,s.Gu)(c.target.value,r);this.setState(u=>({...u,error:a?a[0]:null}))},this.populateEventPropsWithStatus=(r,c)=>{const a={...r};return c&&Object.keys(s.JU).forEach(u=>{((0,s.z3)(u,c)||r[u])&&(a[u]=async i=>{i.persist(),(0,s.z3)(u,c)&&await this.validatorAsync(c[u]).apply(this,[i]),r[u]&&r[u].apply(null,[i,this.status])})}),a}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:r,className:c,hideErrorMessage:a,inputRef:u,...i}=this.props,{error:p}=this.state,g=n()("gf-form-input",{invalid:this.isInvalid},c),y=this.populateEventPropsWithStatus(i,r);return o.createElement("div",{style:{flexGrow:1}},o.createElement("input",{...y,ref:u,className:g}),p&&!a&&o.createElement("span",null,p))}}f.defaultProps={className:""}},21662:(Y,O,e)=>{"use strict";e.d(O,{B:()=>s,Z:()=>l});var t=e(66111),n=e(44800),o=e(39904);const s=f=>{const d=f.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...f},t.createElement(o.J,{name:d?"angle-up":"angle-down",style:{marginTop:"7px"}}))},l=s},76603:(Y,O,e)=>{"use strict";e.d(O,{P:()=>o,Z:()=>s});var t=e(66111),n=e(44800);const o=l=>{const{children:f}=l;return t.createElement(n.c.NoOptionsMessage,{...l},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},f)))},s=o},29418:(Y,O,e)=>{"use strict";e.d(O,{qb:()=>P,Ph:()=>D});var t=e(9085),n=e.n(t),o=e(66111),s=e(44800),l=e(58839),f=e(51306),d=e(81658),r=e(72648),c=e(68226),a=e(874),u=e(24901),i=e(54897),p=e(61860),g=e(21662),y=e(76603),E=e(39904);const h=x=>{const{children:A,isSelected:T,data:S}=x;return o.createElement(s.c.Option,{...x},o.createElement("div",{className:"gf-form-select-box__desc-option"},S.imgUrl&&o.createElement("img",{className:"gf-form-select-box__desc-option__img",src:S.imgUrl,alt:""}),o.createElement("div",{className:"gf-form-select-box__desc-option__body"},o.createElement("div",null,A),S.description&&o.createElement("div",{className:"gf-form-select-box__desc-option__desc"},S.description)),T&&o.createElement(E.J,{name:"check","aria-hidden":"true"})))},v=null,C=x=>o.createElement(s.c.MenuList,{...x},o.createElement(c.$,{autoHide:!1,autoHeightMax:"inherit"},x.children)),m=class extends o.PureComponent{render(){const{defaultValue:x,getOptionLabel:A,getOptionValue:T,onChange:S,options:U,placeholder:R,width:F,value:B,className:K,isDisabled:L,isLoading:N,isSearchable:z,isClearable:G,backspaceRemovesValue:I,isMulti:V,autoFocus:H,openMenuOnFocus:Q,onBlur:oe,maxMenuHeight:se,noOptionsMessage:ie,isOpen:j,components:de,tooltipContent:ce,tabSelectsValue:ee,onCloseMenu:le,onOpenMenu:q,allowCustomValue:fe,formatCreateLabel:Z,"aria-label":ne}=this.props;let re="";F&&(re="width-"+F);let ve=l.ZP;const me={};fe&&(ve=d.Z,me.formatCreateLabel=Z??(gt=>gt));const Ie=n()("gf-form-input","gf-form-input--form-dropdown",re,K),Ge={...m.defaultProps.components,...de};return o.createElement(b,{onCloseMenu:le,onOpenMenu:q,tooltipContent:ce,isOpen:j},(gt,Te)=>o.createElement(ve,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Ie,components:Ge,defaultValue:x,value:B,getOptionLabel:A,getOptionValue:T,menuShouldScrollIntoView:!1,isSearchable:z,onChange:S,options:U,placeholder:R||"Choose",styles:(0,i.Z)(this.context),isDisabled:L,isLoading:N,isClearable:G,autoFocus:H,onBlur:oe,openMenuOnFocus:Q,maxMenuHeight:se,noOptionsMessage:ie,isMulti:V,backspaceRemovesValue:I,menuIsOpen:j,onMenuOpen:gt,onMenuClose:Te,tabSelectsValue:ee,"aria-label":ne,...me}))}};let D=m;D.contextType=r.Ni,D.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:h,SingleValue:u.P,IndicatorsContainer:g.Z,MenuList:C,Group:a.n}};class P extends o.PureComponent{render(){const{defaultValue:A,getOptionLabel:T,getOptionValue:S,onChange:U,placeholder:R,width:F,value:B,className:K,loadOptions:L,defaultOptions:N,isLoading:z,loadingMessage:G,noOptionsMessage:I,isDisabled:V,isSearchable:H,isClearable:Q,backspaceRemovesValue:oe,autoFocus:se,onBlur:ie,openMenuOnFocus:j,maxMenuHeight:de,isMulti:ce,tooltipContent:ee,onCloseMenu:le,onOpenMenu:q,isOpen:fe}=this.props;let Z="";F&&(Z="width-"+F);const ne=n()("gf-form-input","gf-form-input--form-dropdown",Z,K);return o.createElement(b,{onCloseMenu:le,onOpenMenu:q,tooltipContent:ee,isOpen:fe},(re,ve)=>o.createElement(f.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:ne,components:{Option:h,SingleValue:u.P,IndicatorsContainer:g.Z,NoOptionsMessage:y.Z},defaultValue:A,value:B,getOptionLabel:T,getOptionValue:S,menuShouldScrollIntoView:!1,onChange:U,loadOptions:L,isLoading:z,defaultOptions:N,placeholder:R||"Choose",styles:(0,i.Z)(this.context),loadingMessage:G,noOptionsMessage:I,isDisabled:V,isSearchable:H,isClearable:Q,autoFocus:se,onBlur:ie,openMenuOnFocus:j,maxMenuHeight:de,isMulti:ce,backspaceRemovesValue:oe}))}}P.contextType=r.Ni,P.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class b extends o.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:A}=this.props;A&&A(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:A}=this.props;A&&A(),this.setState({isOpenInternal:!1})}}render(){const{children:A,isOpen:T,tooltipContent:S}=this.props,{isOpenInternal:U}=this.state;let R;return(U||T)&&(R=!1),S?o.createElement(p.u,{show:R,content:S,placement:"bottom"},o.createElement("div",null,A(this.onOpenMenu,this.onCloseMenu))):o.createElement("div",null,A(this.onOpenMenu,this.onCloseMenu))}}const M=null},18979:(Y,O,e)=>{"use strict";e.d(O,{r:()=>f});var t=e(82897),n=e.n(t),o=e(66111),s=e(39904),l=e(61860);class f extends o.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=r=>{r.stopPropagation(),this.props.onChange(r)}}render(){const{labelClass:r="",switchClass:c="",label:a,checked:u,disabled:i,transparent:p,className:g,tooltip:y,tooltipPlacement:E}=this.props,h=this.state.id,v=`gf-form-label ${r} ${p?"gf-form-label--transparent":""} pointer`,C=`gf-form-switch ${c} ${p?"gf-form-switch--transparent":""}`;return o.createElement("div",{className:"gf-form-switch-container-react"},o.createElement("label",{htmlFor:h,className:`gf-form gf-form-switch-container ${g||""}`},a&&o.createElement("div",{className:v},a,y&&o.createElement(l.u,{placement:E||"auto",content:y,theme:"info"},o.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},o.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),o.createElement("div",{className:C},o.createElement("input",{disabled:i,id:h,type:"checkbox",checked:u,onChange:this.internalOnChange}),o.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(Y,O,e)=>{"use strict";e.d(O,{D:()=>l});var t=e(9892),n=e(66111),o=e(72648);const s=f=>({legend:t.css`
      font-size: ${f.typography.h3.fontSize};
      font-weight: ${f.typography.fontWeightRegular};
      margin: 0 0 ${f.spacing(2)} 0;
    `}),l=({children:f,className:d,...r})=>{const c=(0,o.wW)(s);return n.createElement("legend",{className:(0,t.cx)(c.legend,d),...r},f)}},2594:(Y,O,e)=>{"use strict";e.d(O,{S:()=>i});var t=e(9892),n=e(82897),o=e(66111),s=e(84559),l=e(72648),f=e(39904),d=e(7804),r=e(85419),c=e(73267);const a=o.forwardRef(({children:g,active:y=!1,disabled:E=!1,size:h="md",onChange:v,onClick:C,id:m,name:D=void 0,description:P,fullWidth:b,"aria-label":M},x)=>{const A=(0,l.l4)(),T=u(A,h,b);return o.createElement(o.Fragment,null,o.createElement("input",{type:"radio",className:T.radio,onChange:v,onClick:C,disabled:E,id:m,checked:y,name:D,"aria-label":M,ref:x}),o.createElement("label",{className:T.radioLabel,htmlFor:m,title:P},g))});a.displayName="RadioButton";const u=(0,d.B)((g,y,E)=>{const{fontSize:h,height:v,padding:C}=(0,c.iL)(y,g),m=g.colors.text.secondary,D=g.colors.text.primary,P=v*g.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${g.colors.text.primary};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,r.getFocusStyles)(g)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,r.getMouseFocusStyles)(g)}
      }

      &:disabled + label {
        color: ${g.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${h};
      height: ${P}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${P}px;
      color: ${m};
      padding: ${g.spacing(0,C)};
      border-radius: ${g.shape.borderRadius()};
      background: ${g.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${E?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${D};
      }
    `}});function i({options:g,value:y,onChange:E,onClick:h,disabled:v,disabledOptions:C,size:m="md",id:D,className:P,fullWidth:b=!1,autoFocus:M=!1}){const x=(0,o.useCallback)(F=>()=>{E&&E(F.value)},[E]),A=(0,o.useCallback)(F=>()=>{h&&h(F.value)},[h]),T=D??(0,n.uniqueId)("radiogroup-"),S=(0,o.useRef)(T),U=(0,l.wW)(p),R=(0,o.useRef)(null);return(0,o.useEffect)(()=>{M&&R.current&&R.current.focus()},[M]),o.createElement("div",{className:(0,t.cx)(U.radioGroup,b&&U.fullWidth,P)},g.map((F,B)=>{const K=C&&F.value&&C.includes(F.value),L=F.icon?(0,s.iJ)(F.icon):void 0;return o.createElement(a,{size:m,disabled:K||v,active:y===F.value,key:`o.label-${B}`,"aria-label":F.ariaLabel,onChange:x(F),onClick:A(F),id:`option-${F.value}-${T}`,name:S.current,description:F.description,fullWidth:b,ref:y===F.value?R:void 0},L&&o.createElement(f.J,{name:L,className:U.icon}),F.imgUrl&&o.createElement("img",{src:F.imgUrl,alt:F.label,className:U.img}),F.label," ",F.component?o.createElement(F.component,null):null)}))}i.displayName="RadioButtonGroup";const p=g=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${g.components.input.borderColor}`,borderRadius:g.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${g.spacing(2)};
      height: ${g.spacing(2)};
      margin-right: ${g.spacing(1)};
    `})},29395:(Y,O,e)=>{"use strict";e.d(O,{x:()=>d});var t=e(9892),n=e(82897),o=e(66111),s=e(72648);const l=({id:c,name:a,label:u,checked:i,disabled:p,description:g,onChange:y})=>{const E=(0,s.wW)(f);return o.createElement("label",{title:g,className:E.label},o.createElement("input",{id:c,name:a,type:"radio",checked:i,disabled:p,className:E.input,onChange:()=>y&&y(c)}),u)},f=c=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${c.colors.background.canvas};
    margin: 0;
    width: ${c.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same  */
    height: ${c.spacing(2)};
    border: 1px solid ${c.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${c.v1.palette.white};
      border: 5px solid ${c.colors.primary.main};
    }

    :disabled {
      background-color: ${c.colors.action.disabledBackground} !important;
      border-color: ${c.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${c.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${c.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${c.colors.background.canvas}, 0 0 0 3px ${c.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${c.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${c.spacing(2)} auto;
    gap: ${c.spacing(1)};
  `});function d({name:c,id:a,options:u,value:i,onChange:p,className:g,disabled:y,disabledOptions:E=[]}){const h=(0,s.wW)(r),v=a??(0,n.uniqueId)("radiogroup-list-");return o.createElement("div",{id:a,className:(0,t.cx)(h.container,g),role:"radiogroup"},u.map((C,m)=>{const D=`${v}-${m}`,P=i&&i===C.value,b=y||E.some(x=>x===C.value),M=()=>p&&C.value&&p(C.value);return o.createElement(l,{key:D,id:D,name:c,label:C.label,description:C.description,checked:P,disabled:b,onChange:M})}))}const r=c=>({container:t.css`
    display: grid;
    gap: ${c.spacing(1)};
  `})},73267:(Y,O,e)=>{"use strict";e.d(O,{GL:()=>o,RK:()=>s,ht:()=>f,iL:()=>r,nf:()=>l});var t=e(9892),n=e(85419);const o=c=>t.css`
  &:focus {
    ${(0,n.focusCss)(c)}
  }
`,s=(c,a=!1)=>{const u=a?c.colors.error.border:c.components.input.borderColor,i=a?c.colors.error.shade:c.components.input.borderHover,p=c.components.input.background,g=c.components.input.text,y=c.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(l(c),t.css`
      background: ${p};
      line-height: ${c.typography.body.lineHeight};
      font-size: ${c.typography.size.md};
      color: ${g};
      border: 1px solid ${u};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${g} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${c.colors.background.primary}, 0 0 0px 4px ${c.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${g} !important;
      }

      &:hover {
        border-color: ${i};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${c.colors.action.disabledBackground};
        color: ${c.colors.action.disabledText};
        border: 1px solid ${c.colors.action.disabledBackground};

        &:hover {
          border-color: ${u};
        }
      }

      &::placeholder {
        color: ${c.colors.text.disabled};
        opacity: 1;
      }
    `)},l=c=>t.css`
    padding: ${c.spacing(0,1,0,1)};
  `,f=()=>({sm:t.css`
      width: ${d("sm")};
    `,md:t.css`
      width: ${d("md")};
    `,lg:t.css`
      width: ${d("lg")};
    `,auto:t.css`
      width: ${d("auto")};
    `}),d=c=>{switch(c){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function r(c,a){switch(c){case"sm":return{padding:1,fontSize:a.typography.size.sm,height:a.components.height.sm};case"lg":return{padding:3,fontSize:a.typography.size.lg,height:a.components.height.lg};case"md":default:return{padding:2,fontSize:a.typography.size.md,height:a.components.height.md}}}},69823:(Y,O,e)=>{"use strict";e.d(O,{a:()=>g});var t=e(24259),n=e.n(t),o=e(66111),s=e(2703),l=e(18111),f=e(69098),d=e(4176),r=e(31403),c=e(53768),a=e(92103);const u={mode:f.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function i(y,E,h){const v=h!=null,C=Math.min(y*.15/1.5,20),m=C*1.5,D=v?E-m:E,P=Math.min(D,y);return{showLabel:v,gaugeHeight:P,titleFontSize:C}}function p(y,E,h,v){if(E.color?.mode!==c.S.Thresholds)return[{value:E.min??l.Hx,color:h.color??c.R}];const C=E.thresholds??u,m=C.mode===f.H.Percentage,D=C.steps;let P=E.min??l.Hx,b=E.max??l.Z3;m&&(P=0,b=100);const M=(0,a.m1)(P,D),x=(0,a.m1)(b,D),A=[{value:+P.toFixed(y),color:v.visualization.getColorByName(M.color)}];let T=!0;for(let S=0;S<D.length;S++){const U=D[S];if(T){M===U&&(T=!1);continue}const R=D[S-1];if(A.push({value:U.value,color:v.visualization.getColorByName(R.color)}),U===x)break}return A.push({value:+b.toFixed(y),color:v.visualization.getColorByName(x.color)}),A}class g extends o.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:E,value:h,height:v,onClick:C,text:m,theme:D}=this.props,P=i(E,v,h.title),b=o.createElement("div",{style:{height:`${P.gaugeHeight}px`,width:"100%"},ref:M=>this.canvasElement=M});return o.createElement(o.Fragment,null,C?o.createElement("button",{className:(0,r.gN)(D),type:"button",onClick:C},b):b,P.showLabel&&o.createElement("div",{style:{textAlign:"center",fontSize:m?.titleSize??P.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},h.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:E,showThresholdLabels:h,showThresholdMarkers:v,width:C,height:m,theme:D,value:P}=this.props,b=i(C,m,P.title),M=Math.min(C,b.gaugeHeight),x=D.colors.background.secondary,A=h?1.5:1,T=Math.min(M/5.5,40)/A,S=T/5,U=(0,s.zc)(P),F=Math.min(C,M*1.3)*.9-((T+(v?S:0)+(h?10:0))*2+10),B=this.props.text?.valueSize??(0,d.MX)(U,F,M,1,T*1.7),K=Math.max(B/2.5,12);let L=E.min??l.Hx,N=E.max??l.Z3,z=P.numeric;E.thresholds?.mode===f.H.Percentage&&(L=0,N=100,P.percent===void 0?z=(z-L)/(N-L)*100:z=P.percent*100);const G=E.decimals===void 0?2:E.decimals;v&&(L=+L.toFixed(G),N=+N.toFixed(G));const I={series:{gauges:{gauge:{min:L,max:N,neutralValue:E.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:T},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(G,E,P,D),label:{show:h,margin:S+1,font:{size:K}},show:v,width:S},value:{color:P.color,formatter:()=>U,font:{size:B,family:D.typography.fontFamily}},show:!0}}},V={data:[[0,z]],label:P.title};try{this.canvasElement&&n().plot(this.canvasElement,[V],I)}catch(H){console.error("Gauge rendering error",H,I,P)}}render(){return o.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}g.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:u}}},87691:(Y,O,e)=>{"use strict";e.d(O,{k:()=>E});var t=e(24259),n=e.n(t),o=e(82897),s=e(66111),l=e(61113),f=e(40538),d=e(24505),r=e(65987),c=e(50800),a=e(31438);const u=({dimensions:v,activeDimensions:C,pos:m,timeZone:D})=>{let P=null;if(C.xAxis===null)return null;C.yAxis&&(P=C.yAxis[0]);const b=C.xAxis[1]?(0,l.jC)(v.xAxis,C.xAxis[0],C.xAxis[1]):m.x,M=(0,a.wu)(v.yAxis.columns,v.xAxis.columns,b,D),x=M.time,A=M.results.map((T,S)=>({color:T.color,label:T.label,value:T.value,isActive:P===S}));return s.createElement(c.c,{series:A,timestamp:x})};u.displayName="MultiModeGraphTooltip";var i=e(2703),p=e(30471);const g=({dimensions:v,activeDimensions:C,timeZone:m})=>{if(C.yAxis===null||C.yAxis[1]===void 0||C.xAxis===null||C.xAxis[1]===void 0)return null;const D=(0,l.jC)(v.xAxis,C.xAxis[0],C.xAxis[1]),P=(0,l.$q)(v.xAxis,C.xAxis[0]),b=P.display?(0,i.zc)(P.display(D)):D,M=(0,l.$q)(v.yAxis,C.yAxis[0]),x=(0,l.jC)(v.yAxis,C.yAxis[0],C.yAxis[1]),A=M.display,T=A(x);return s.createElement(c.c,{series:[{color:T.color,label:(0,p.CZ)(M),value:(0,i.zc)(T)}],timestamp:b})};g.displayName="SingleModeGraphTooltip";const y=({mode:v=f.f3.Single,dimensions:C,activeDimensions:m,pos:D,timeZone:P})=>!m||!m.xAxis?null:v==="single"?s.createElement(g,{dimensions:C,activeDimensions:m,timeZone:P}):s.createElement(u,{dimensions:C,activeDimensions:m,pos:D,timeZone:P});y.displayName="GraphTooltip";class E extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(C,m)=>{const{onHorizontalRegionSelected:D}=this.props;D&&D(m.xaxis.from,m.xaxis.to)},this.onPlotHover=(C,m,D)=>{this.setState({isTooltipVisible:!0,activeItem:D,pos:m})},this.onPlotClick=(C,m,D)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:D,contextPos:m})},this.renderTooltip=()=>{const{children:C,series:m,timeZone:D}=this.props,{pos:P,activeItem:b,isTooltipVisible:M}=this.state;let x=null;if(!M||!P||m.length===0||(s.Children.forEach(C,L=>{if(x)return;(L&&L.type&&(L.type.displayName||L.type.name))===d.I.displayName&&(x=L)}),!x))return null;const A=x.props,T=A.mode||"single";if(!b&&T==="single")return null;const S=A.tooltipComponent||y,U=b?b.series.seriesIndex:0,R=b?b.dataIndex:void 0,F={xAxis:[U,R],yAxis:b?[b.series.seriesIndex,b.dataIndex]:null},B={dimensions:{xAxis:(0,l.q2)("xAxis",m.map(L=>L.timeField)),yAxis:(0,l.q2)("yAxis",m.map(L=>L.valueField))},activeDimensions:F,pos:P,mode:A.mode||f.f3.Single,timeZone:D},K=s.createElement(S,{...B});return s.cloneElement(x,{content:K,position:{x:P.pageX,y:P.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:C}=this.props,{contextPos:m,contextItem:D,isContextVisible:P}=this.state;if(!P||!m||!D||C.length===0)return null;const b=D?D.series.seriesIndex:0,M=D?D.dataIndex:void 0,x={xAxis:[b,M],yAxis:D?[D.series.seriesIndex,D.dataIndex]:null},A={xAxis:(0,l.q2)("xAxis",C.map(R=>R.timeField)),yAxis:(0,l.q2)("yAxis",C.map(R=>R.valueField))},T=()=>this.setState({isContextVisible:!1}),S=()=>({datapoint:D.datapoint,dataIndex:D.dataIndex,series:D.series,seriesIndex:D.series.seriesIndex,pageX:m.pageX,pageY:m.pageY}),U={x:m.pageX,y:m.pageY,onClose:T,getContextMenuSource:S,timeZone:this.props.timeZone,dimensions:A,contextDimensions:x};return s.createElement(r.w,{...U})},this.getBarWidth=()=>{const{series:C}=this.props;return Math.min(...C.map(m=>m.timeStep))}}componentDidUpdate(C,m){C!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(C){return C.length===0?[{show:!0,min:-1,max:1}]:(0,o.uniqBy)(C.map(m=>{const D=m.yAxis?m.yAxis.index:1,P=m.yAxis&&m.yAxis.min&&!isNaN(m.yAxis.min)?m.yAxis.min:null,b=m.yAxis&&m.yAxis.tickDecimals&&!isNaN(m.yAxis.tickDecimals)?m.yAxis.tickDecimals:null;return{show:!0,index:D,position:D===1?"left":"right",min:P,tickDecimals:b}}),m=>m.index)}draw(){if(this.element===null)return;const{width:C,series:m,timeRange:D,showLines:P,showBars:b,showPoints:M,isStacked:x,lineWidth:A,timeZone:T,onHorizontalRegionSelected:S}=this.props;if(!C)return;const U=C/100,R=D.from.valueOf(),F=D.to.valueOf(),B=this.getYAxes(m),K={legend:{show:!1},series:{stack:x,lines:{show:P,lineWidth:A,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:b,fill:1,barWidth:b?this.getBarWidth()/1.5:1,zero:!1,lineWidth:A},shadowSize:0},xaxis:{timezone:T,show:!0,mode:"time",min:R,max:F,label:"Datetime",ticks:U,timeformat:(0,a.mc)(U,R,F),tickFormatter:a.sV},yaxes:B,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:S?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,m.filter(L=>L.isVisible),K)}catch(L){throw console.error("Graph rendering error",L,K,m),new Error("Error rendering panel")}}render(){const{ariaLabel:C,height:m,width:D,series:P}=this.props,b=P.length===0,M=this.renderTooltip(),x=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":C},s.createElement("div",{className:"graph-panel__chart",ref:A=>this.element=A,style:{height:m,width:D},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),b&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,x)}}E.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const h=null},65987:(Y,O,e)=>{"use strict";e.d(O,{b:()=>p,w:()=>i});var t=e(9892),n=e(66111),o=e(61113),s=e(77258),l=e(72648),f=e(30909),d=e(72777),r=e(52081),c=e(14391),a=e(42044),u=e(6264);const i=({getContextMenuSource:y,timeZone:E,itemsGroup:h,dimensions:v,contextDimensions:C,...m})=>{const D=y(),P=h?h.map(x=>({...x,items:x.items?.filter(A=>A.label)})):[],b=()=>{if(!D)return null;let x;if(v?.yAxis&&C?.yAxis?.[1]){const T=(0,o.jC)(v.yAxis,C.yAxis[0],C.yAxis[1]),S=D.series.valueField.display;x=S(T)}const A=(0,s.dq)(D.datapoint[0],{defaultWithMS:D.series.hasMsResolution,timeZone:E});return n.createElement(p,{timestamp:A,seriesColor:D.series.color,displayName:D.series.alias||D.series.label,displayValue:x})},M=()=>P?.map((x,A)=>n.createElement(c.k,{key:`${x.label}${A}`,label:x.label},(x.items||[]).map(T=>n.createElement(a.s,{key:`${T.label}`,url:T.url,label:T.label,target:T.target,icon:T.icon,active:T.active,onClick:T.onClick}))));return n.createElement(f.x,{...m,renderMenuItems:M,renderHeader:b})},p=({timestamp:y,seriesColor:E,displayName:h,displayValue:v})=>{const C=(0,l.wW)(g);return n.createElement("div",{className:C.wrapper},n.createElement("strong",null,y),n.createElement(r.Lh,null,n.createElement("div",null,n.createElement(u.F,{color:E}),n.createElement("span",{className:C.displayName},h)),v&&n.createElement(d.W,{value:v})))};function g(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},56506:(Y,O,e)=>{"use strict";e.d(O,{U:()=>s});var t=e(82897),n=e.n(t),o=e(66111);class s extends o.Component{constructor(f){super(f),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:f.series}}componentDidUpdate(f){const{series:d}=this.props;(0,t.isEqual)(f.series,d)||this.setState({hiddenSeries:[],toggledSeries:d})}onSeriesToggle(f,d){const{series:r,onHiddenSeriesChanged:c}=this.props,{hiddenSeries:a}=this.state;if(d.ctrlKey||d.metaKey||d.shiftKey){const g=a.indexOf(f)>-1?a.filter(E=>E!==f):a.concat([f]),y=r.map(E=>({...E,isVisible:g.indexOf(E.label)===-1}));this.setState({hiddenSeries:g,toggledSeries:y},()=>c?c(g):void 0);return}const u=r.map(g=>g.label),i=a.length+1===u.length?[]:(0,t.difference)(u,[f]),p=r.map(g=>({...g,isVisible:i.indexOf(g.label)===-1}));this.setState({hiddenSeries:i,toggledSeries:p},()=>c?c(i):void 0)}render(){const{children:f}=this.props,{toggledSeries:d}=this.state;return f({onSeriesToggle:this.onSeriesToggle,toggledSeries:d})}}},29781:(Y,O,e)=>{"use strict";e.d(O,{U:()=>c});var t=e(9892),n=e(66111),o=e(7804),s=e(68226),l=e(78056),f=e(87691);const d=(0,o.B)(({placement:a})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${a==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${a==="bottom"?"35%":"none"};
  `})),r=(a,u=!1,i=!1)=>{const p=a.reduce((y,E)=>y+(E[1]||0),0)===0,g=!a.reduce((y,E)=>y&&E[1]!==null,!0);return u&&g||i&&p},c=a=>{const{series:u,timeRange:i,width:p,height:g,showBars:y,showLines:E,showPoints:h,sortLegendBy:v,sortLegendDesc:C,legendDisplayMode:m,legendVisibility:D,placement:P,onSeriesToggle:b,onToggleSort:M,hideEmpty:x,hideZero:A,isStacked:T,lineWidth:S,onHorizontalRegionSelected:U,timeZone:R,children:F,ariaLabel:B}=a,{graphContainer:K,wrapper:L,legendContainer:N}=d(a),z=u.reduce((G,I)=>r(I.data,x,A)?G:G.concat([{label:I.label,color:I.color||"",disabled:!I.isVisible,yAxis:I.yAxis.index,getDisplayValues:()=>I.info||[]}]),[]);return n.createElement("div",{className:L,"aria-label":B},n.createElement("div",{className:K},n.createElement(f.k,{series:u,timeRange:i,timeZone:R,showLines:E,showPoints:h,showBars:y,width:p,height:g,isStacked:T,lineWidth:S,onHorizontalRegionSelected:U},F)),D&&n.createElement("div",{className:N},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(l.l,{items:z,displayMode:m,placement:P,sortBy:v,sortDesc:C,onLabelClick:(G,I)=>{b&&b(G.label,I)},onToggleSort:M}))))}},31438:(Y,O,e)=>{"use strict";e.d(O,{mc:()=>r,sV:()=>d,wu:()=>f});var t=e(2703),n=e(30471),o=e(77258),s=e(82410);const l=(c,a)=>{let u=0,i=c.values.length-1,p;for(;;){if(u>i)return Math.max(i,0);p=Math.floor((u+i)/2);const g=c.values[p];if(g===a)return p;g&&g<a?u=p+1:i=p-1}},f=(c,a,u,i)=>{let p,g,y,E,h;const v=[];let C,m;for(p=0;p<c.length;p++){g=c[p];const D=a[p];y=l(D,u),E=u-D.values[y],h=D.values[y],(C===void 0||E>=0&&(E<C||C<0)||E<0&&E>C)&&(C=E,m=D.display?(0,t.zc)(D.display(h)):h);const P=g.display(g.values[y]);v.push({value:(0,t.zc)(P),datapointIndex:y,seriesIndex:p,color:P.color,label:(0,n.CZ)(g),time:D.display?(0,t.zc)(D.display(h)):h})}return{results:v,time:m}},d=(c,a)=>(0,o.dq)(c,{format:a?.options?.timeformat,timeZone:a?.options?.timezone}),r=(c,a,u)=>{if(a&&u&&c){const i=u-a,p=i/c/1e3,g=86400010,y=31536e6;return p<=10?s.U6.interval.millisecond:p<=45?s.U6.interval.second:i<=g?s.U6.interval.minute:p<=8e4?s.U6.interval.hour:i<=y?s.U6.interval.day:p<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(Y,O,e)=>{"use strict";e.d(O,{d:()=>y,j:()=>p});var t=e(66111),n=e(53376),o=e(98803),s=e(50035),l=e(90748),f=e(23588),d=e(4063),r=e(60325),c=e(729),a=e(3200),u=e(2445),i=e(86979);const p="__fixed";function g(E,h,v=[]){for(const C of v)if(typeof C=="function"){if(!C(E,h))return!1}else if(h[C]!==E[C])return!1;return!0}class y extends t.Component{constructor(h){super(h),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let v=this.prepState(h);v.alignedData=v.config.prepData([v.alignedFrame]),this.state=v,this.plotInstance=t.createRef()}prepState(h,v=!0){let C=null;const{frames:m,fields:D,preparePlotFrame:P}=h,M=(P||i.R)(m,D||{x:s.Ls.get(l.mi.firstTimeField).get({}),y:s.Ls.get(l.mi.numeric).get({})},h.timeRange);if((0,u.Zp)("GraphNG",!1,"data aligned",M),M){let x=this.state?.config;v&&(x=h.prepConfig(M,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config prepared",x)),C={alignedFrame:M,config:x},(0,u.Zp)("GraphNG",!1,"data prepared",C.alignedData)}return C}handleCursorUpdate(h){const v=h.payload?.point?.time,C=this.plotInstance.current;if(C&&v){const m=C.valToPos(v,"x");let D;if(m&&(D=(0,u.ah)(C,C.posToIdx(m))),!D||!m)return;C.setCursor({left:m,top:D})}}componentDidMount(){this.panelContext=this.context;const{eventBus:h}=this.panelContext;this.subscription.add(h.getStream(f.es).pipe((0,o.p)(50)).subscribe({next:v=>{h!==v.origin&&this.handleCursorUpdate(v)}})),this.subscription.add(h.getStream(d.IA).pipe((0,o.p)(50)).subscribe({next:v=>this.handleCursorUpdate(v)})),this.subscription.add(h.getStream(f.xH).pipe((0,o.p)(50)).subscribe({next:()=>{const v=this.plotInstance?.current;v&&v.setCursor({left:-10,top:-10})}}))}componentDidUpdate(h){const{frames:v,structureRev:C,timeZone:m,propsToDiff:D}=this.props,P=!g(h,this.props,D);if(v!==h.frames||P||m!==h.timeZone){let b=this.prepState(this.props,!1);b&&((this.state.config===void 0||m!==h.timeZone||C!==h.structureRev||!C||P)&&(b.config=this.props.prepConfig(b.alignedFrame,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config recreated",b.config)),b.alignedData=b.config.prepData([b.alignedFrame]),this.setState(b))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:h,height:v,children:C,timeRange:m,renderLegend:D}=this.props,{config:P,alignedFrame:b,alignedData:M}=this.state;return P?t.createElement(c.AY,{width:h,height:v,legend:D(P)},(x,A)=>t.createElement(a.N,{config:P,data:M,width:x,height:A,timeRange:m,plotRef:T=>this.plotInstance.current=T},C?C(P,b):null)):null}}y.contextType=r.bb},16566:(Y,O,e)=>{"use strict";e.d(O,{z:()=>o});var t=e(66111);const n=t.createContext({}),o=()=>{const{data:s,dimFields:l,mapSeriesIndexToDataFrameFieldIndex:f}=(0,t.useContext)(n),d=(0,t.useCallback)(()=>{const r=l.x;let c=null;for(let a=0;a<s.fields.length;a++)if(r(s.fields[a],s,[s])){c=s.fields[a];break}return c},[s,l]);return{dimFields:l,mapSeriesIndexToDataFrameFieldIndex:f,getXAxisField:d,alignedData:s}}},45778:(Y,O,e)=>{"use strict";e.d(O,{w:()=>o});var t=e(99098);const n={threshold:(l,f,d)=>l+d,midpoint:(l,f,d)=>(l+f)/2,plusone:(l,f,d)=>l+1};function o(l){if(l.frame.length===0)return l.frame;let f=!0,{frame:d,refFieldName:r,refFieldPseudoMax:c,refFieldPseudoMin:a,insertMode:u}=l;u||(u=n.threshold);const i=d.fields.find(y=>r!=null?y.name===r:y.type===t.fS.time);if(i==null)return d;i.state={...i.state,nullThresholdApplied:!0};const p=d.fields.map(y=>y.config.custom?.insertNulls??i.config.interval??null),g=new Set(p);if(g.delete(null),g.size===0)return d;if(g.size===1){const y=g.values().next().value;if(y<=0)return d;const E=i.values,h=d.fields.map(C=>C.values),v=s(E,h,y,a,c,u,f);return v===h?d:{...d,length:v[0].length,fields:d.fields.map((C,m)=>({...C,values:v[m]}))}}return d}function s(l,f,d,r=null,c=null,a,u){const i=l.length,p=[];if(r!=null&&r<l[0]){let h=Math.ceil((l[0]-r)/d),v=l[0]-h*d;for(;v<l[0];)p.push(a(v-d,v,d)),v+=d}p.push(l[0]);let g=l[0];for(let h=1;h<i;h++){const v=l[h];for(;v-g>d&&(p.push(a(g,v,d)),g+=d,!!u););p.push(v),g=v}if(c!=null&&c>g)for(;g+d<c;)p.push(a(g,c,d)),g+=d;const y=p.length;if(y===i)return f;const E=[];for(let h of f){let v;if(h!==l){v=Array(y);for(let C=0,m=0;C<y;C++)v[C]=l[m]===p[C]?h[m++]:null}else v=p;E.push(v)}return E}},45389:(Y,O,e)=>{"use strict";e.d(O,{I:()=>t});function t(n){return{...n,fields:n.fields.map(o=>{const s=+o.config?.noValue;if(Number.isNaN(s))return o;{const l=o.values.slice();for(let f=0;f<l.length;f++)l[f]===null&&(l[f]=s);return{...o,values:l}}})}}},86979:(Y,O,e)=>{"use strict";e.d(O,{z:()=>a,R:()=>c});var t=e(99098),n=e(17587),o=e(40538),s=e(72269),l=e(45778);function f(i,p,g){let y,E;for(let h=0;h<p.length;h++)if(p[h]==null)E==null&&y!=null&&(E=h);else{if(E!=null){if(i[h]-y<g)for(;E<h;)p[E++]=void 0;E=null}y=i[h]}return p}function d(i){return i.type===t.fS.number&&i.config.custom?.drawStyle===o.l8.Bars&&!i.config.custom?.hideFrom?.viz}function r(i){let p=i.fields.find(y=>y.type===t.fS.time),g=p?.values;for(let y=0;y<i.fields.length;y++){let E=i.fields[y];if(E===p||d(E))continue;let h=E.config.custom?.spanNulls;typeof h=="number"&&h!==-1&&(E.values=f(g,E.values,h))}return i}function c(i,p,g){i=i.map(v=>v.fields[0].state?.nullThresholdApplied?v:(0,l.w)({frame:v,refFieldName:null,refFieldPseudoMin:g?.from.valueOf(),refFieldPseudoMax:g?.to.valueOf()}));let y=0;i.forEach(v=>{v.fields.forEach(C=>{d(C)&&(C.config.custom={...C.config.custom,spanNulls:-1},y++)})});let E=1/0;y>1&&i.forEach(v=>{if(!v.fields.some(d))return;const C=v.fields[0].values;for(let m=0;m<C.length;m++)m>0&&(E=Math.min(E,C[m]-C[m-1]))});let h=(0,n._9)({frames:i,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return h?(h=r(h),E!==1/0&&(h.fields.forEach((v,C)=>{let m=v.values;if(C===0){let D=m[m.length-1];m.push(D+E,D+2*E)}else d(v)?m.push(null,null):m.push(void 0,void 0)}),h.length+=2),h):null}function a(i){const p="na",g=`${i.min!==void 0?i.min:p}-${i.max!==void 0?i.max:p}`,y=`${i.custom?.axisSoftMin!==void 0?i.custom.axisSoftMin:p}-${i.custom?.axisSoftMax!==void 0?i.custom.axisSoftMax:p}`,E=`${i.custom?.axisPlacement!==void 0?i.custom?.axisPlacement:o.LB.Auto}`,h=i.unit??s.j,v=i.custom?.scaleDistribution?u(i.custom.scaleDistribution):o.wf.Linear,C=Boolean(i.custom?.axisLabel)?i.custom.axisLabel:p;return`${h}/${g}/${y}/${E}/${v}/${C}`}function u(i){return i.type===o.wf.Log?`${i.type}${i.log}`:i.type}},39904:(Y,O,e)=>{"use strict";e.d(O,{J:()=>tn});var t=e(9892),n=e(66111),o=e(81910),s=e(84559),l=e(72648),f=e(79161),d=e(94654),r=e(70726),c=e(30735),a=e(97048),u=e(43053),i=e(76059),p=e(41477),g=e(25173),y=e(89833),E=e(59658),h=e(85429),v=e(26925),C=e(22346),m=e(85334),D=e(10958),P=e(84060),b=e(92270),M=e(7803),x=e(26183),A=e(94526),T=e(49893),S=e(79691),U=e(35644),R=e(47255),F=e(76375),B=e(88921),K=e(59622),L=e(35988),N=e(63536),z=e(65976),G=e(69343),I=e(38958),V=e(95e3),H=e(53505),Q=e(45299),oe=e(65774),se=e(39239),ie=e(53516),j=e(94149),de=e(62373),ce=e(42601),ee=e(39295),le=e(19570),q=e(369),fe=e(71942),Z=e(97623),ne=e(7955),re=e(41429),ve=e(88447),me=e(61501),Ie=e(47069),Ge=e(48509),gt=e(43305),Te=e(16584),Le=e(42644),Ye=e(79603),it=e(65291),ht=e(45230),Re=e(7835),ye=e(63050),Ce=e(62216),be=e(49024),We=e(67226),Qe=e(49162),mt=e(88297),vt=e(70973),rt=e(26055),Ot=e(56271),Et=e(5810),Mt=e(3408),ue=e(67628),De=e(50778),Ne=e(7274),tt=e(70471),et=e(75603),Ue=e(91196),Fe=e(48411),Ee=e(16243),Me=e(78372),He=e(8380),Ze=e(48578),lt=e(83143),bt=e(18625),Pt=e(91157),Je=e(24062),Dt=e(35548),Ve=e(26407),Xe=e(23841),st=e(19827),ut=e(5386),xt=e(60093),Kt=e(69980),Jt=e(50319),On=e(67743),Nn=e(27207),jn=e(7532),ya=e(6127),Lt=e(61449),ft=e(79748),Ht=e(80384),$t=e(51164),zt=e(58929),Wt=e(98723),jt=e(90577),sn=e(52677),pn=e(98851),Pn=e(20323),Mn=e(2533),Cn=e(51284),Hn=e(63742),_n=e(35398),oa=e(57710),Gt=e(91290),Bt=e(27714),on=e(42148),rn=e(1316),In=e(39423),Ln=e(31277),Un=e(71580),qn=e(71171),da=e(36746),ha=e(4403),Ta=e(80579),Wa=e(3802),cs=e(22465),is=e(11774),Ha=e(98361),$a=e(45453),ss=e(99703),Oa=e(52370),Ia=e(34924),ys=e(40159),la=e(76419),Ts=e(26216),bs=e(96864),ds=e(83507),Us=e(88043),Za=e(95428),Ks=e(87784),dn=e(72461),ln=e(39228),Tn=e(59619),zn=e(43743),ga=e(24099),va=e(55054),Ga=e(8),qa=e(3265),es=e(13965),us=e(6666),hs=e(97091),$s=e(34604),tr=e(75864),mr=e(28122),ur=e(48491),sr=e(97612),er=e(32411),ks=e(36319),Er=e(96861),Vs=e(25169),Tr=e(34052),pr=e(88175),yr=e(36277),Cr=e(62695),Or=e(65023),fr=e(51433),Js=e(46558);let Os=!1,lr="public/img/icons/";function fn(Dn,kn){o.V[lr+kn]={content:Dn,status:"loaded"}}function qe(){Os=!0;const Dn=typeof window<"u"&&window.__grafana_public_path__;Dn&&(lr=Dn+"img/icons/"),fn(f,"unicons/at.svg"),fn(d,"unicons/adjust-circle.svg"),fn(r,"unicons/angle-double-down.svg"),fn(c,"unicons/angle-double-right.svg"),fn(a,"unicons/angle-down.svg"),fn(u,"unicons/angle-left.svg"),fn(i,"unicons/angle-right.svg"),fn(p,"unicons/angle-up.svg"),fn(g,"unicons/apps.svg"),fn(y,"unicons/arrow.svg"),fn(E,"unicons/arrow-down.svg"),fn(h,"unicons/arrow-from-right.svg"),fn(v,"unicons/arrow-left.svg"),fn(C,"unicons/arrow-random.svg"),fn(m,"unicons/arrow-right.svg"),fn(D,"unicons/arrow-to-right.svg"),fn(P,"unicons/arrow-up.svg"),fn(b,"unicons/arrows-h.svg"),fn(M,"unicons/backward.svg"),fn(x,"unicons/bars.svg"),fn(A,"unicons/bell.svg"),fn(T,"unicons/bell-slash.svg"),fn(S,"unicons/bolt.svg"),fn(U,"unicons/book.svg"),fn(R,"unicons/book-open.svg"),fn(F,"unicons/brackets-curly.svg"),fn(B,"unicons/bug.svg"),fn(K,"unicons/building.svg"),fn(L,"unicons/calculator-alt.svg"),fn(N,"unicons/calendar-alt.svg"),fn(z,"unicons/calendar-slash.svg"),fn(G,"unicons/camera.svg"),fn(I,"unicons/channel-add.svg"),fn(V,"unicons/chart-line.svg"),fn(H,"unicons/check.svg"),fn(Q,"unicons/check-circle.svg"),fn(oe,"unicons/circle.svg"),fn(se,"unicons/clipboard-alt.svg"),fn(ie,"unicons/clock-nine.svg"),fn(j,"unicons/cloud.svg"),fn(de,"unicons/cloud-download.svg"),fn(ce,"unicons/code-branch.svg"),fn(ee,"unicons/cog.svg"),fn(le,"unicons/columns.svg"),fn(q,"unicons/comment-alt.svg"),fn(fe,"unicons/comment-alt-share.svg"),fn(Z,"unicons/comments-alt.svg"),fn(ne,"unicons/compass.svg"),fn(re,"unicons/copy.svg"),fn(ve,"unicons/corner-down-right-alt.svg"),fn(me,"unicons/cube.svg"),fn(Ie,"unicons/dashboard.svg"),fn(Ge,"unicons/database.svg"),fn(gt,"unicons/document-info.svg"),fn(Te,"unicons/download-alt.svg"),fn(Le,"unicons/draggabledots.svg"),fn(Ye,"unicons/edit.svg"),fn(it,"unicons/ellipsis-v.svg"),fn(ht,"unicons/ellipsis-h.svg"),fn(Re,"unicons/envelope.svg"),fn(ye,"unicons/exchange-alt.svg"),fn(Ce,"unicons/exclamation-circle.svg"),fn(be,"unicons/exclamation-triangle.svg"),fn(We,"unicons/external-link-alt.svg"),fn(Qe,"unicons/eye.svg"),fn(mt,"unicons/eye-slash.svg"),fn(vt,"unicons/file-alt.svg"),fn(rt,"unicons/file-blank.svg"),fn(Ot,"unicons/filter.svg"),fn(Et,"unicons/folder.svg"),fn(Mt,"unicons/folder-open.svg"),fn(ue,"unicons/folder-plus.svg"),fn(De,"unicons/folder-upload.svg"),fn(Ne,"unicons/forward.svg"),fn(tt,"unicons/graph-bar.svg"),fn(et,"unicons/history.svg"),fn(Ue,"unicons/home-alt.svg"),fn(Fe,"unicons/import.svg"),fn(Ee,"unicons/info.svg"),fn(Me,"unicons/info-circle.svg"),fn(He,"unicons/k6.svg"),fn(Ze,"unicons/key-skeleton-alt.svg"),fn(lt,"unicons/keyboard.svg"),fn(bt,"unicons/link.svg"),fn(Pt,"unicons/list-ul.svg"),fn(Je,"unicons/lock.svg"),fn(Dt,"unicons/minus.svg"),fn(Ve,"unicons/minus-circle.svg"),fn(Xe,"unicons/mobile-android.svg"),fn(st,"unicons/monitor.svg"),fn(ut,"unicons/pause.svg"),fn(xt,"unicons/pen.svg"),fn(Kt,"unicons/play.svg"),fn(Jt,"unicons/plug.svg"),fn(On,"unicons/plus.svg"),fn(Nn,"unicons/plus-circle.svg"),fn(jn,"unicons/power.svg"),fn(ya,"unicons/presentation-play.svg"),fn(Lt,"unicons/process.svg"),fn(ft,"unicons/question-circle.svg"),fn(Ht,"unicons/repeat.svg"),fn($t,"unicons/rocket.svg"),fn(zt,"unicons/rss.svg"),fn(Wt,"unicons/save.svg"),fn(jt,"unicons/search.svg"),fn(sn,"unicons/search-minus.svg"),fn(pn,"unicons/search-plus.svg"),fn(Pn,"unicons/share-alt.svg"),fn(Mn,"unicons/shield.svg"),fn(Cn,"unicons/signal.svg"),fn(Hn,"unicons/signin.svg"),fn(_n,"unicons/signout.svg"),fn(oa,"unicons/sitemap.svg"),fn(Gt,"unicons/slack.svg"),fn(Bt,"unicons/sliders-v-alt.svg"),fn(on,"unicons/sort-amount-down.svg"),fn(rn,"unicons/sort-amount-up.svg"),fn(In,"unicons/square-shape.svg"),fn(Ln,"unicons/star.svg"),fn(Un,"unicons/step-backward.svg"),fn(qn,"unicons/sync.svg"),fn(da,"unicons/table.svg"),fn(ha,"unicons/tag-alt.svg"),fn(Ta,"unicons/times.svg"),fn(Wa,"unicons/trash-alt.svg"),fn(cs,"unicons/unlock.svg"),fn(is,"unicons/upload.svg"),fn(Ha,"unicons/user.svg"),fn($a,"unicons/users-alt.svg"),fn(ss,"unicons/wrap-text.svg"),fn(Oa,"unicons/cloud-upload.svg"),fn(Ia,"unicons/credit-card.svg"),fn(ys,"unicons/file-copy-alt.svg"),fn(la,"unicons/fire.svg"),fn(Ts,"unicons/hourglass.svg"),fn(bs,"unicons/layer-group.svg"),fn(ds,"unicons/layers-alt.svg"),fn(Us,"unicons/line-alt.svg"),fn(Za,"unicons/list-ui-alt.svg"),fn(Ks,"unicons/message.svg"),fn(dn,"unicons/palette.svg"),fn(ln,"unicons/percentage.svg"),fn(Tn,"unicons/shield-exclamation.svg"),fn(zn,"unicons/plus-square.svg"),fn(ga,"unicons/x.svg"),fn(va,"unicons/capture.svg"),fn(Ga,"custom/gf-grid.svg"),fn(qa,"custom/gf-landscape.svg"),fn(es,"custom/gf-layout-simple.svg"),fn(us,"custom/gf-portrait.svg"),fn(hs,"custom/gf-bar-alignment-after.svg"),fn($s,"custom/gf-bar-alignment-before.svg"),fn(tr,"custom/gf-bar-alignment-center.svg"),fn(mr,"custom/gf-interpolation-linear.svg"),fn(ur,"custom/gf-interpolation-smooth.svg"),fn(sr,"custom/gf-interpolation-step-after.svg"),fn(er,"custom/gf-interpolation-step-before.svg"),fn(ks,"custom/gf-logs.svg"),fn(Er,"custom/gf-movepane-left.svg"),fn(Vs,"custom/gf-movepane-right.svg"),fn(Tr,"mono/favorite.svg"),fn(pr,"mono/grafana.svg"),fn(yr,"mono/heart.svg"),fn(Cr,"mono/heart-break.svg"),fn(Or,"mono/panel-add.svg"),fn(fr,"mono/library-panel.svg"),fn(Js,"unicons/record-audio.svg")}var Ct=e(37532);const At=Dn=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${Dn.v1.palette.orange};
    `}),tn=n.forwardRef(({size:Dn="md",type:kn="default",name:aa,className:Qn,style:ia,title:ja="",...Tt},Be)=>{const Ae=(0,l.wW)(At);if(aa?.startsWith("fa fa-"))return n.createElement("i",{className:Rn(aa,Qn),...Tt,style:ia});if(Os||qe(),(0,s.Mo)(aa)||console.warn("Icon component passed an invalid icon name",aa),!aa||aa.includes(".."))return n.createElement("div",{ref:Be},"invalid icon name");const nt=(0,Ct.B)(Dn),ct=nt,wt=aa.startsWith("gf-bar-align")?16:aa.startsWith("gf-interp")?30:nt,_t=(0,Ct.y)(aa,kn),Nt=`${lr}${_t}/${aa}.svg`;return n.createElement("div",{className:Ae.container,...Tt,ref:Be},n.createElement(o.Z,{src:Nt,width:wt,height:ct,title:ja,className:(0,t.cx)(Ae.icon,Qn,kn==="mono"?{[Ae.orange]:aa==="favorite"}:""),style:ia}))});tn.displayName="Icon";function Rn(Dn,kn){return(0,t.cx)(Dn,{"fa-spin":Dn==="fa fa-spinner"},kn)}},37532:(Y,O,e)=>{"use strict";e.d(O,{B:()=>o,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,l){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":l==="default"?"unicons":l==="solid"?"solid":"mono"}function o(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(Y,O,e)=>{"use strict";e.d(O,{h:()=>a});var t=e(9892),n=e(66111),o=e(5680),s=e(72648),l=e(85419),f=e(7804),d=e(39904),r=e(37532),c=e(61860);const a=n.forwardRef(({name:i,size:p="md",iconType:g,tooltip:y,tooltipPlacement:E,ariaLabel:h,className:v,variant:C="secondary",...m},D)=>{const P=(0,s.l4)(),b=u(P,p,C),M=typeof y=="string"?y:"",x=n.createElement("button",{ref:y?void 0:D,"aria-label":h||M,...m,className:(0,t.cx)(b.button,v)},n.createElement(d.J,{name:i,size:p,className:b.icon,type:g}));return y?n.createElement(c.u,{ref:D,content:y,placement:E},x):x});a.displayName="IconButton";const u=(0,f.B)((i,p,g)=>{const y=(0,r.B)(p),E=Math.max(y/3,8);let h=i.colors.text.primary;return g==="primary"?h=i.colors.primary.text:g==="destructive"&&(h=i.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${h};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${i.shape.borderRadius()};
      z-index: 0;
      margin-right: ${i.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${i.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${E}px;
        left: -${E}px;
        right: -${E}px;
        top: -${E}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,l.getFocusStyles)(i)}
      }

      &:focus:not(:focus-visible) {
        ${(0,l.getMouseFocusStyles)(i)}
      }

      &:hover {
        color: ${h};

        &:before {
          background-color: ${g==="secondary"?i.colors.action.hover:o.alpha(h,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>d,a:()=>c});var t=e(9892),n=e(66111),o=e(206),s=e(72648),l=e(19985),f=e(17784);const d=n.memo(n.forwardRef(({title:u,featureState:i,...p},g)=>{const y=(0,s.wW)(r),E=i?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(c,{featureState:i})),n.createElement("h3",null,u)):n.createElement("h3",null,u);return n.createElement(f.v,{branded:!0,title:E,urlTitle:"Read documentation",ref:g,...p})}));d.displayName="FeatureInfoBox";const r=u=>({badge:t.css`
      margin-bottom: ${u.spacing(1)};
    `}),c=({featureState:u,tooltip:i})=>{const p=a(u);return n.createElement(l.C,{text:p.text,color:p.color,icon:p.icon,tooltip:i})};function a(u){switch(u){case o.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(Y,O,e)=>{"use strict";e.d(O,{v:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(45253),f=e(39904);const d=n.memo(n.forwardRef(({title:c,className:a,children:u,branded:i,url:p,urlTitle:g,onDismiss:y,severity:E="info",...h},v)=>{const C=(0,o.wW)(r);return n.createElement(l.b,{severity:E,className:a,...h,ref:v,title:c},n.createElement("div",null,u),p&&n.createElement("a",{href:p,className:(0,t.cx)("external-link",C.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(f.J,{name:"book"})," ",g||"Read more"))}));d.displayName="InfoBox";const r=(0,s.B)(c=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${c.spacing(2)};
    `}))},4784:(Y,O,e)=>{"use strict";e.d(O,{K:()=>d});var t=e(9892),n=e(66111),o=e(10092),s=e(72648),l=e(39904),f=e(85511);function d({referenceElement:i,children:p,suffixIcon:g,placement:y,alternativePlacement:E}){const[h,v]=(0,n.useState)(null),[C,m]=(0,n.useState)(y),D=(0,o.D)(i,h,{placement:C}),P=(0,s.wW)(r),b=(0,s.wW)(u);return n.useEffect(()=>{E&&c(y,h,i)&&m(E)},[E,y,h,i]),n.createElement(f.h_,null,n.createElement("div",{style:{display:"inline-block",...D.styles.popper},...D.attributes.popper,ref:v,"aria-live":"polite"},n.createElement("span",{className:(0,t.cx)(P.root,b[C])},p&&n.createElement("span",null,p),g&&n.createElement(l.J,{name:g}))))}const r=i=>({root:(0,t.css)({...i.typography.bodySmall,willChange:"transform",background:i.components.tooltip.background,color:i.components.tooltip.text,padding:i.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:i.spacing(.5),alignItems:"center"})}),c=(i,p,g)=>{const y=p?.getBoundingClientRect(),E=g?.getBoundingClientRect();if(!y||!E)return!1;switch(i){case"right":return y.width+E.right>window.innerWidth;case"bottom":return y.height+E.bottom>window.innerHeight;case"left":return E.left-y.width<0;case"top":return E.top-y.height<0;default:return!1}},a=(i,p)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${i}, ${p})`},to:{opacity:1,transform:"translate(0, 0px)"}}),u=i=>{const g=a(0,i.spacing(1)),y=a(0,i.spacing(1*-1)),E=a(i.spacing(1),0),h=a(i.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:i.spacing(1),animation:`${g} ease-out 100ms`}),bottom:(0,t.css)({marginTop:i.spacing(1),animation:`${y} ease-out 100ms`}),left:(0,t.css)({marginRight:i.spacing(1),animation:`${E} ease-out 100ms`}),right:(0,t.css)({marginLeft:i.spacing(1),animation:`${h} ease-out 100ms`})}}},68668:(Y,O,e)=>{"use strict";e.d(O,{H:()=>s});var t=e(66111),n=e(4176),o=e(46967);const s=t.forwardRef((f,d)=>{const{defaultValue:r="",minWidth:c=10,maxWidth:a,onCommitChange:u,onKeyDown:i,onBlur:p,...g}=f,[y,E]=t.useState(r),[h,v]=t.useState(c);return(0,t.useEffect)(()=>{v(l(y.toString(),c,a))},[y,a,c]),t.createElement(o.I,{...g,ref:d,value:y.toString(),onChange:C=>{E(C.currentTarget.value)},width:h,onBlur:C=>{p?p(C):u&&u(C)},onKeyDown:C=>{i?i(C):C.key==="Enter"&&u&&u(C)},"data-testid":"autosize-input"})});function l(f,d,r){if(!f)return d;const c=3,a=(0,n.X1)(f.toString(),14).width/8+c;return d&&a<d?d:r&&a>r?r:a}s.displayName="AutoSizeInput"},46967:(Y,O,e)=>{"use strict";e.d(O,{H:()=>c,I:()=>r});var t=e(9892),n=e(66111),o=e(62326),s=e(72648),l=e(7804),f=e(73267),d=e(67487);const r=n.forwardRef((a,u)=>{const{className:i,addonAfter:p,addonBefore:g,prefix:y,suffix:E,invalid:h,loading:v,width:C=0,...m}=a,[D,P]=(0,o.Z)(),[b,M]=(0,o.Z)(),x=(0,s.l4)(),A=c({theme:x,invalid:!!h,width:C});return n.createElement("div",{className:(0,t.cx)(A.wrapper,i),"data-testid":"input-wrapper"},!!g&&n.createElement("div",{className:A.addon},g),n.createElement("div",{className:A.inputWrapper},y&&n.createElement("div",{className:A.prefix,ref:D},y),n.createElement("input",{ref:u,className:A.input,...m,style:{paddingLeft:y?P.width+12:void 0,paddingRight:E||v?M.width+12:void 0}}),(E||v)&&n.createElement("div",{className:A.suffix,ref:b},v&&n.createElement(d.$,{className:A.loadingIndicator,inline:!0}),E)),!!p&&n.createElement("div",{className:A.addon},p))});r.displayName="Input";const c=(0,l.B)(({theme:a,invalid:u=!1,width:i})=>{const p="28px",g=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${a.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${p};
    color: ${a.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${i?`${a.spacing(i)}`:"100%"};
        height: ${a.spacing(a.components.height.md)};
        border-radius: ${a.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${u?a.colors.error.border:a.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${p};
        }
        &:not(:last-child) {
          padding-right: ${p};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,f.GL)(a),(0,f.RK)(a,u),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${a.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${a.colors.action.disabledBackground};
      color: ${a.colors.action.disabledText};
      border: 1px solid ${a.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(g,t.css`
        label: input-prefix;
        padding-left: ${a.spacing(1)};
        padding-right: ${a.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(g,t.css`
        label: input-suffix;
        padding-left: ${a.spacing(1)};
        padding-right: ${a.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${a.spacing(.5)};
      }
    `}})},63619:(Y,O,e)=>{"use strict";e.d(O,{g:()=>n});var t=e(66698);const n=t.Qr},65455:(Y,O,e)=>{"use strict";e.d(O,{e:()=>g});var t=e(9892),n=e(82897),o=e(66111),s=e(9827),l=e(52666),f=e(72648),d=e(39904),r=e(8180);const c=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function a({row:v,__rowID:C}){return o.createElement("div",{className:c},o.createElement(r.h,{tooltip:"toggle row expanded","aria-controls":C,name:v.isExpanded?"angle-down":"angle-right","aria-expanded":v.isExpanded,...v.getToggleRowExpandedProps()}))}const u="__expander";function i(v){return[{id:u,Cell:a,disableSortBy:!0,width:0},...v.map(C=>({id:C.id,accessor:C.id,Header:C.header||(()=>null),sortType:C.sortType||"alphanumeric",disableSortBy:!Boolean(C.sortType),width:C.disableGrow?0:void 0,visible:C.visible,...C.cell&&{Cell:C.cell}}))]}const p=v=>{const C=v.colors.emphasize(v.colors.background.primary,.03);return{table:t.css`
      border-radius: ${v.shape.borderRadius()};
      width: 100%;

      td {
        padding: ${v.spacing(1)};
      }

      td,
      th {
        min-width: ${v.spacing(3)};
      }
    `,disableGrow:t.css`
      width: 0%;
    `,header:t.css`
      border-bottom: 1px solid ${v.colors.border.weak};
      &,
      & > button {
        position: relative;
        white-space: nowrap;
        padding: ${v.spacing(1)};
      }
      & > button {
        &:after {
          content: '\\00a0';
        }
        width: 100%;
        height: 100%;
        background: none;
        border: none;
        padding-right: ${v.spacing(2.5)};
        text-align: left;
        font-weight: ${v.typography.fontWeightMedium};
      }
    `,row:t.css`
      label: row;
      border-bottom: 1px solid ${v.colors.border.weak};

      &:hover {
        background-color: ${C};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,expandedRow:t.css`
      label: expanded-row-content;
      border-bottom: none;
    `,expandedContentRow:t.css`
      label: expanded-row-content;

      td {
        border-bottom: 1px solid ${v.colors.border.weak};
        position: relative;
        padding: ${v.spacing(2,2,2,5)};

        &:before {
          content: '';
          position: absolute;
          width: 1px;
          top: 0;
          left: 16px;
          bottom: ${v.spacing(2)};
          background: ${v.colors.border.medium};
        }
      }
    `,sortableHeader:t.css`
      /* increases selector's specificity so that it always takes precedence over default styles  */
      && {
        padding: 0;
      }
    `}};function g({data:v,className:C,columns:m,renderExpandedRow:D,getRowId:P}){const b=(0,f.wW)(p),M=(0,o.useMemo)(()=>i(m),[m]),x=y(),A=(0,o.useCallback)(B=>`${x}-${B.id}`.replace(/\s/g,""),[x]),{getTableProps:T,getTableBodyProps:S,headerGroups:U,rows:R,prepareRow:F}=(0,s.useTable)({columns:M,data:v,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:P,initialState:{hiddenColumns:[!D&&u,...M.filter(B=>!(!B.visible||B.visible(v))).map(B=>B.id).filter(l.fQ)].filter(l.fQ)}},s.useSortBy,s.useExpanded);return R.forEach(F),o.createElement("table",{...T(),className:(0,t.cx)(b.table,C)},o.createElement("thead",null,U.map(B=>{const{key:K,...L}=B.getHeaderGroupProps();return o.createElement("tr",{key:K,...L},B.headers.map(N=>{const{key:z,...G}=N.getHeaderProps();return o.createElement("th",{key:z,className:(0,t.cx)(b.header,{[b.disableGrow]:N.width===0,[b.sortableHeader]:N.canSort}),...G,...N.isSorted&&{"aria-sort":N.isSortedDesc?"descending":"ascending"}},o.createElement(h,{column:N}))}))})),o.createElement("tbody",{...S()},R.map(B=>{const{key:K,...L}=B.getRowProps(),N=A(B),z=B.isExpanded;return o.createElement(o.Fragment,{key:K},o.createElement("tr",{...L,className:(0,t.cx)(b.row,z&&b.expandedRow)},B.cells.map(G=>{const{key:I,...V}=G.getCellProps();return o.createElement("td",{key:I,...V},G.render("Cell",{__rowID:N}))})),z&&D&&o.createElement("tr",{...L,id:N,className:b.expandedContentRow},o.createElement("td",{colSpan:B.cells.length},D(B.original))))})))}const y=()=>(0,o.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),E=v=>({sortIcon:t.css`
    position: absolute;
    top: ${v.spacing(1)};
  `});function h({column:{canSort:v,render:C,isSorted:m,isSortedDesc:D,getSortByToggleProps:P}}){const b=(0,f.wW)(E),{onClick:M}=P(),x=o.createElement(o.Fragment,null,C("Header"),m&&o.createElement("span",{"aria-hidden":"true",className:b.sortIcon},o.createElement(d.J,{name:D?"angle-down":"angle-up"})));return v?o.createElement("button",{type:"button",onClick:M},x):x}},16065:(Y,O,e)=>{"use strict";e.d(O,{g:()=>o});var t=e(66111),n=e(73892);class o extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:l,config:f,open:d,onDidRender:r}=this.props,c=this.wrapperRef.current,a=new n.u(l,d,f);c.hasChildNodes()?c.replaceChild(a.render(),c.lastChild):c.appendChild(a.render()),r&&r(a.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:l}=this.props;return t.createElement("div",{className:l,ref:this.wrapperRef})}}o.defaultProps={open:3,config:{animateOpen:!0}}},73892:(Y,O,e)=>{"use strict";e.d(O,{u:()=>h});var t=e(82897);function n(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function o(v){return!!v&&typeof v==="object"}function s(v){if(v===void 0)return"";if(v===null||typeof v=="object"&&!v.constructor)return"Object";const m=/function ([^(]*)/.exec(v.constructor.toString());return m&&m.length>1?m[1]:""}function l(v){return v===null?"null":typeof v}function f(v,C){const m=l(v);return m==="null"||m==="undefined"?m:(m==="string"&&(C='"'+n(C)+'"'),m==="function"?v.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":C)}let d="";function r(v){return o(v)?(d=s(v),Array.isArray(v)&&(d+="["+v.length+"]")):d=f(v,v.toString()),d}function c(v){return`json-formatter-${v}`}function a(v,C,m){const D=document.createElement(v);return C&&D.classList.add(c(C)),m!==void 0&&(m instanceof Node?D.appendChild(m):D.appendChild(document.createTextNode(String(m)))),D}const u=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,i=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,g=10,y=typeof window<"u"&&window.requestAnimationFrame||(v=>(v(),0)),E={animateOpen:!0,animateClose:!0};class h{constructor(C,m=1,D=E,P){this.json=C,this.open=m,this.config=D,this.key=P,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(C){this._isOpen=C}get isDate(){return this.type==="string"&&(u.test(this.json)||p.test(this.json)||i.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return o(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return l(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(C=>C||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(c("open")))}openAtDepth(C=1){C<0||(this.open=C,this.isOpen=C!==0,this.element&&(this.removeChildren(!1),C===0?this.element.classList.remove(c("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(c("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const C=a("span");return C.appendChild(a("span","bracket","[")),this.isNumberArray()?(this.json.forEach((m,D)=>{D>0&&C.appendChild(a("span","array-comma",",")),C.appendChild(a("span","number",m))}),this.skipChildren=!0):C.appendChild(a("span","number",this.json.length)),C.appendChild(a("span","bracket","]")),C}render(C=!1){this.element=a("div","row");const m=a("a","toggler-link"),D=a("span","toggler");if(this.isObject&&m.appendChild(D),this.hasKey&&m.appendChild(a("span","key",`${this.key}:`)),this.isObject){const b=a("span","value"),M=a("span"),x=a("span","constructor-name",this.constructorName);if(M.appendChild(x),this.isArray){const A=this.renderArray();M.appendChild(A)}b.appendChild(M),m.appendChild(b)}else{const b=this.isUrl?a("a"):a("span");b.classList.add(c(this.type)),this.isDate&&b.classList.add(c("date")),this.isUrl&&(b.classList.add(c("url")),b.setAttribute("href",this.json));const M=f(this.json,this.json);b.appendChild(document.createTextNode(M)),m.appendChild(b)}const P=a("div","children");return this.isObject&&P.classList.add(c("object")),this.isArray&&P.classList.add(c("array")),this.isEmpty&&P.classList.add(c("empty")),this.config&&this.config.theme&&this.element.classList.add(c(this.config.theme)),this.isOpen&&this.element.classList.add(c("open")),C||this.element.appendChild(m),this.skipChildren?m.removeChild(D):this.element.appendChild(P),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&m.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(C=!1){const m=this.element&&this.element.querySelector(`div.${c("children")}`);if(!(!m||this.isEmpty))if(C){let D=0;const P=()=>{const b=this.keys[D],M=new h(this.json[b],this.open-1,this.config,b);m.appendChild(M.render()),D+=1,D<this.keys.length&&(D>g?P():y(P))};y(P)}else this.keys.forEach(D=>{const P=new h(this.json[D],this.open-1,this.config,D);m.appendChild(P.render())})}removeChildren(C=!1){const m=this.element&&this.element.querySelector(`div.${c("children")}`);if(C){let D=0;const P=()=>{m&&m.children.length&&(m.removeChild(m.children[0]),D+=1,D>g?P():y(P))};y(P)}else m&&(m.innerHTML="")}}},52081:(Y,O,e)=>{"use strict";e.d(O,{Ar:()=>l,Lh:()=>f,W2:()=>r,wc:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=(i=>(i[i.Horizontal=0]="Horizontal",i[i.Vertical=1]="Vertical",i))(s||{});const l=({children:i,orientation:p=0,spacing:g="sm",justify:y="flex-start",align:E="normal",wrap:h=!1,width:v="100%",height:C="100%",...m})=>{const D=(0,o.wW)((0,n.useCallback)(P=>c(P,p,g,y,E,h),[E,y,p,g,h]));return n.createElement("div",{className:D.layout,style:{width:v,height:C},...m},n.Children.toArray(i).filter(Boolean).map((P,b)=>n.createElement("div",{className:D.childWrapper,key:b},P)))},f=({children:i,spacing:p,justify:g,align:y="center",wrap:E,width:h,height:v})=>n.createElement(l,{spacing:p,justify:g,orientation:0,align:y,width:h,height:v,wrap:E},i),d=({children:i,spacing:p,justify:g,align:y,width:E,height:h})=>n.createElement(l,{spacing:p,justify:g,orientation:1,align:y,width:E,height:h},i),r=({children:i,padding:p,margin:g,grow:y,shrink:E})=>{const h=(0,o.wW)((0,n.useCallback)(v=>u(v,p,g),[p,g]));return n.createElement("div",{className:(0,t.cx)(h.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,E!==void 0&&t.css`
            flex-shrink: ${E};
          `)},i)},c=(i,p,g,y,E,h)=>{const v=g!=="none"?i.spacing(a[g]):0,C=p===0&&!h||p===1?0:`-${v}`,m=p===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${m};
      display: flex;
      flex-direction: ${p===1?"column":"row"};
      flex-wrap: ${h?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${E};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${C};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${p===0&&!h?0:v};
      margin-right: ${p===0?v:0};
      display: flex;
      align-items: ${E};

      &:last-child {
        margin-bottom: ${p===1&&0};
        margin-right: ${p===0&&0};
      }
    `}},a={none:0,xs:.5,sm:1,md:2,lg:3},u=(i,p,g)=>{const y=p&&p!=="none"&&i.spacing(a[p])||0,E=g&&g!=="none"&&i.spacing(a[g])||0;return{wrapper:t.css`
      label: container;
      margin: ${E};
      padding: ${y};
    `}}},29460:(Y,O,e)=>{"use strict";e.d(O,{r:()=>l});var t=e(66111),n=e(51947),o=e(72196),s=e(63418);const l=(0,t.forwardRef)(({href:f,children:d,...r},c)=>{const a=o.u.stripBaseFromUrl(s.QX.sanitizeUrl(f??""));return t.createElement(n.Link,{ref:c,to:a,...r},d)});l.displayName="Link"},398:(Y,O,e)=>{"use strict";e.d(O,{L:()=>l});var t=e(9892),n=e(66111),o=e(7804);const s=(0,o.B)((f=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${f&&"inline-block"||"block"};
  `}));class l extends n.PureComponent{constructor(d){super(d)}render(){const{items:d,renderItem:r,getItemKey:c,className:a,inline:u}=this.props,i=s(u);return n.createElement("ul",{className:(0,t.cx)(i.list,a)},d.map((p,g)=>n.createElement("li",{className:i.item,key:c?c(p):g},r(p,g))))}}},19882:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>o});var t=e(66111),n=e(398);class o extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(Y,O,e)=>{"use strict";e.d(O,{a:()=>o});var t=e(66111),n=e(398);class o extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(Y,O,e)=>{"use strict";e.d(O,{F:()=>d});var t=e(9892),n=e(66111),o=e(72648);const s=2.4,l=500,f=4e3;function d({width:c,ariaLabel:a="Loading bar"}){const u=(0,o.wW)(r),i=Math.min(Math.max(Math.round(c*s),l),f),p={width:"100%",animation:`${u.animation} ${i}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:p},n.createElement("div",{"aria-label":a,className:u.bar}))}const r=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},61744:(Y,O,e)=>{"use strict";e.d(O,{u:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(67487);const l=({text:d,className:r,...c})=>{const a=(0,o.wW)(f);return n.createElement("div",{className:(0,t.cx)(a.container,r),...c},d," ",n.createElement(s.$,{inline:!0}))},f=d=>({container:t.css`
      margin-bottom: ${d.spacing(4)};
    `})},15448:(Y,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(66111),n=e(8581),o=e(80760);const s=({value:l,onChange:f,context:d,item:r})=>{const c=r.settings??{},a=(0,o.IX)(d.data,c?.filter),u=(0,o.nw)(a,l),i=(0,t.useCallback)(g=>{if(!(g&&!(0,o.w3)(g.value,a)))return f(g?.value)},[a,f]),p=u.find(g=>g.value===l);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:p,placeholder:c.placeholderText??"Select field",options:u,onChange:i,noOptionsMessage:c.noFieldsMessage,width:c.width,isClearable:c.isClearable!==!1}))}},16453:(Y,O,e)=>{"use strict";e.d(O,{$w:()=>u,OL:()=>r});var t=e(66111),n=e(99098),o=e(90748),s=e(50035),l=e(50622),f=e(8581);const d=(0,t.memo)(i=>{const{data:p,options:g,onChange:y,id:E}=i,h=c(p),v=a(h,g),C=(0,t.useCallback)(D=>y(D.value),[y]),m=v.find(D=>D.value===g);return t.createElement(f.Ph,{inputId:E,value:m,options:v,onChange:C})});d.displayName="FieldTypeMatcherEditor";const r=[{value:n.fS.number,label:"Number",icon:(0,l.WZ)(n.fS.number)},{value:n.fS.string,label:"String",icon:(0,l.WZ)(n.fS.string)},{value:n.fS.time,label:"Time",icon:(0,l.WZ)(n.fS.time)},{value:n.fS.boolean,label:"Boolean",icon:(0,l.WZ)(n.fS.boolean)},{value:n.fS.trace,label:"Traces",icon:(0,l.WZ)(n.fS.trace)},{value:n.fS.enum,label:"Enum",icon:(0,l.WZ)(n.fS.enum)},{value:n.fS.other,label:"Other",icon:(0,l.WZ)(n.fS.other)}],c=i=>(0,t.useMemo)(()=>{const p=new Map;for(const g of r)p.set(g.value,0);for(const g of i)for(const y of g.fields){const E=y.type||n.fS.other;let h=p.get(E);h||(h=0),p.set(E,h+1)}return p},[i]),a=(i,p)=>(0,t.useMemo)(()=>{let g=!1;const y=[];for(const E of r){const h=i.get(E.value),v=p===E.value;(h||v)&&y.push({...E,label:`${E.label} (${i.get(E.value)})`}),v&&(g=!0)}return p&&!g&&y.push({value:p,label:`${p} (No matches)`}),y},[i,p]),u={id:o.mi.byType,component:d,matcher:s.Ls.get(o.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:i=>i}},92830:(Y,O,e)=>{"use strict";e.d(O,{J8:()=>a,fN:()=>g});var t=e(9892),n=e(66111),o=e(33750),s=e(90748),l=e(50035),f=e(40538),d=e(72648),r=e(46967),c=e(8581);const a=[{label:"==",value:f.Bd.EQ},{label:"!=",value:f.Bd.NEQ},{label:">",value:f.Bd.GT},{label:">=",value:f.Bd.GTE},{label:"<",value:f.Bd.LT},{label:"<=",value:f.Bd.LTE}];function u(y){return y===o.gz.allIsNull||y===o.gz.allIsZero}const i=({options:y,onChange:E})=>{const h=(0,d.wW)(p),v=(0,n.useMemo)(()=>o.TB.selectOptions([y?.reducer]),[y?.reducer]),C=(0,n.useCallback)(M=>E({...y,reducer:M.value}),[y,E]),m=(0,n.useCallback)(M=>E({...y,op:M.value}),[y,E]),D=(0,n.useCallback)(M=>{const x=M.currentTarget.valueAsNumber;return E({...y,value:x})},[y,E]),P=y??{},b=u(y.reducer);return n.createElement("div",{className:h.spot},n.createElement(c.Ph,{value:v.current,options:v.options,onChange:C,placeholder:"Select field reducer"}),P.reducer&&!b&&n.createElement(n.Fragment,null,n.createElement(c.Ph,{value:a.find(M=>M.value===P.op),options:a,onChange:m,"aria-label":"Comparison operator",width:19}),n.createElement(r.I,{type:"number",value:P.value,onChange:D})))},p=y=>({spot:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      gap: 4px;
    `}),g={id:s.mi.byValue,component:i,matcher:l.Ls.get(s.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:y=>`${y?.reducer} ${y?.op} ${y?.value}`}},43657:(Y,O,e)=>{"use strict";e.d(O,{O:()=>d,S:()=>a});var t=e(66111),n=e(30471),o=e(90748),s=e(50035),l=e(8581);const f=(u,i,p)=>{if(!p)return;let g=u.find(y=>!i.some(E=>y===E));if(g)return g};function d({value:u,data:i,onChange:p,placeholder:g}){const y=(0,t.useMemo)(()=>r(i),[i]),[E,h]=(0,t.useState)({refIds:[],value:void 0}),v=(0,t.useMemo)(()=>y.find(m=>m.value===u)??f(y,E.refIds,E.value),[u,y,E]),C=(0,t.useCallback)(m=>{p(m.value)},[p]);return(y!==E.refIds||v?.value!==E.value)&&h({refIds:y,value:v?.value}),t.createElement(l.Ph,{options:y,onChange:C,isClearable:!0,placeholder:g??"Select query refId",value:v})}function r(u){const i=new Map;for(const g of u){const y=g.refId??"",E=i.get(y)??[];E.length===0&&i.set(y,E),E.push(g)}const p=[];for(const[g,y]of i.entries())p.push({value:g,label:`Query: ${g??"(missing refId)"}`,description:c(y)});return p}function c(u){return`Frames (${u.length}):
    ${u.slice(0,Math.min(3,u.length)).map(i=>(0,n.nf)(i)).join(", ")} ${u.length>3?"...":""}`}const a={id:o.mi.byFrameRefID,component:u=>t.createElement(d,{value:u.options,data:u.data,onChange:u.onChange}),matcher:s.Ls.get(o.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:u=>u}},6058:(Y,O,e)=>{"use strict";e.d(O,{i:()=>h});var t=e(53908),n=e(66111),o=e(90748),s=e(50035),l=e(46967);const f=(0,n.memo)(v=>{const{options:C,onChange:m}=v,D=(0,n.useCallback)(P=>m(P.target.value),[m]);return n.createElement(l.I,{placeholder:"Enter regular expression",defaultValue:C,onBlur:D})});f.displayName="FieldNameByRegexMatcherEditor";const d={id:o.mi.byRegexp,component:f,matcher:s.Ls.get(o.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:v=>v};var r=e(8581),c=e(80760);const a=(0,n.memo)(v=>{const{data:C,options:m,onChange:D,id:P}=v,b=(0,c.IX)(C),M=(0,c.nw)(b,m),x=(0,n.useCallback)(T=>{if((0,c.w3)(T.value,b))return D(T.value)},[b,D]),A=M.find(T=>T.value===m);return n.createElement(r.Ph,{value:A,options:M,onChange:x,inputId:P})});a.displayName="FieldNameMatcherEditor";const u={id:o.mi.byName,component:a,matcher:s.Ls.get(o.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:v=>v},i=(0,n.memo)(v=>{const{data:C,options:m,onChange:D}=v,{readOnly:P,prefix:b}=m,M=(0,c.IX)(C),x=(0,c.nw)(M,void 0),A=(0,n.useCallback)(T=>{if(Array.isArray(T))return D({...m,names:T.reduce((S,U)=>((0,c.w3)(U.value,M)&&S.push(U.value),S),[])})},[M,D,m]);if(P){const T=(m.names??[]).join(", ");return n.createElement(l.I,{value:T,readOnly:!0,disabled:!0,prefix:b})}return n.createElement(r.NU,{value:m.names,options:x,onChange:A})});i.displayName="FieldNameMatcherEditor";const p={id:o.mi.byNames,component:i,matcher:s.Ls.get(o.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:v=>(v.names??[]).join(", "),excludeFromPicker:!0};var g=e(16453),y=e(92830),E=e(43657);const h=new t.B(()=>[u,d,g.$w,E.S,p,y.fN])},80760:(Y,O,e)=>{"use strict";e.d(O,{IX:()=>f,g2:()=>l,nw:()=>d,w3:()=>s});var t=e(66111),n=e(30471),o=e(50622);function s(r,c){return r?c.display.has(r)||c.raw.has(r):!1}function l(r,c){const a={display:new Set,raw:new Set,fields:new Map};for(const u of r)for(const i of u.fields){if(c&&!c(i))continue;const p=(0,n.CZ)(i,u,r);a.display.add(p),a.fields.set(p,i),i.name&&p!==i.name&&(a.raw.add(i.name),a.fields.set(i.name,i))}return a}function f(r,c){return(0,t.useMemo)(()=>l(r,c),[r,c])}function d(r,c,a,u){return(0,t.useMemo)(()=>{let i=!1;const p=[];a&&p.push(a);for(const g of r.display){!i&&g===c&&(i=!0);const y=r.fields.get(g);(!u||u===y?.type)&&p.push({value:g,label:g,icon:y?(0,o.e7)(y):void 0})}for(const g of r.raw)r.display.has(g)||(!i&&g===c&&(i=!0),p.push({value:g,label:`${g} (base field name)`}));return c&&!i&&p.push({value:c,label:`${c} (not found)`}),p},[r,c,a,u])}},95130:(Y,O,e)=>{"use strict";e.d(O,{v:()=>c});var t=e(9892),n=e(66111),o=e(72648),s=e(97456),l=e(14391),f=e(42044),d=e(69914);const r=n.forwardRef(({header:u,children:i,ariaLabel:p,onOpen:g,onClose:y,onKeyDown:E,...h},v)=>{const C=(0,o.wW)(a),m=(0,n.useRef)(null);(0,n.useImperativeHandle)(v,()=>m.current);const[D]=(0,d.d)({localRef:m,onOpen:g,onClose:y,onKeyDown:E});return n.createElement("div",{...h,tabIndex:-1,ref:m,className:C.wrapper,role:"menu","aria-label":p,onKeyDown:D},u&&n.createElement("div",{className:(0,t.cx)(C.header,Boolean(i)&&n.Children.toArray(i).length>0&&C.headerBorder)},u),i)});r.displayName="Menu";const c=Object.assign(r,{Item:f.s,Divider:s.R,Group:l.k}),a=u=>({header:(0,t.css)({padding:`${u.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${u.colors.border.weak}`}),wrapper:(0,t.css)({background:`${u.colors.background.primary}`,boxShadow:`${u.shadows.z3}`,display:"inline-block",borderRadius:`${u.shape.borderRadius()}`,padding:`${u.spacing(.5,0)}`})})},97456:(Y,O,e)=>{"use strict";e.d(O,{R:()=>s});var t=e(9892),n=e(66111),o=e(72648);function s(){const f=(0,o.wW)(l);return n.createElement("div",{className:f.divider})}const l=f=>({divider:(0,t.css)({height:1,backgroundColor:f.colors.border.weak,margin:f.spacing(.5,0)})})},14391:(Y,O,e)=>{"use strict";e.d(O,{k:()=>f});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(72648);const f=({label:r,ariaLabel:c,children:a})=>{const u=(0,l.wW)(d),i=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!c&&r?i:void 0,"aria-label":c},r&&s.createElement("label",{id:i,className:u.groupLabel,"aria-hidden":!0},r),a)};f.displayName="MenuGroup";const d=r=>({groupLabel:t.css`
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.size.sm};
      padding: ${r.spacing(.5,1)};
    `})},42044:(Y,O,e)=>{"use strict";e.d(O,{s:()=>u});var t=e(9892),n=e(66111),o=e(72648),s=e(85419),l=e(39904),f=e(68183),d=e(69914);const r=p=>{if(!p)return!1;const g=p.parentElement.getBoundingClientRect(),y=p.getBoundingClientRect();return y.width!==0&&g.right+y.width+10>window.innerWidth},c=n.memo(({items:p,isOpen:g,openedWithArrow:y,setOpenedWithArrow:E,close:h,customStyle:v})=>{const C=(0,o.wW)(a),m=(0,n.useRef)(null),[D]=(0,d.d)({localRef:m,isMenuOpen:g,openedWithArrow:y,setOpenedWithArrow:E,close:h}),[P,b]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{g&&m.current&&b(r(m.current))},[g]),n.createElement(n.Fragment,null,n.createElement("div",{className:C.iconWrapper,"aria-label":f.wl.components.Menu.SubMenu.icon},n.createElement(l.J,{name:"angle-right",className:C.icon,"aria-hidden":!0})),g&&n.createElement("div",{ref:m,className:(0,t.cx)(C.subMenu,{[C.pushLeft]:P}),"aria-label":f.wl.components.Menu.SubMenu.container,style:v},n.createElement("div",{tabIndex:-1,className:C.itemsWrapper,role:"menu",onKeyDown:D},p)))});c.displayName="SubMenu";const a=p=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${p.spacing(1)};
      color: ${p.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${p.colors.background.primary};
      box-shadow: ${p.shadows.z3};
      display: inline-block;
      border-radius: ${p.shape.borderRadius()};
    `,pushLeft:t.css`
      right: 100%;
      left: unset;
    `,subMenu:t.css`
      position: absolute;
      top: 0;
      left: 100%;
      z-index: ${p.zIndex.dropdown};
    `}),u=n.memo(n.forwardRef((p,g)=>{const{url:y,icon:E,label:h,ariaLabel:v,ariaChecked:C,target:m,onClick:D,className:P,active:b,disabled:M,destructive:x,childItems:A,role:T="menuitem",tabIndex:S=-1,customSubMenuContainerStyles:U,shortcut:R,testId:F}=p,B=(0,o.wW)(i),[K,L]=(0,n.useState)(b),[N,z]=(0,n.useState)(!1),[G,I]=(0,n.useState)(!1),V=(0,n.useCallback)(()=>{M||(z(!0),L(!0))},[M]),H=(0,n.useCallback)(()=>{M||(z(!1),L(!1))},[M]),Q=A&&A.length>0,oe=Q?"div":y===void 0?"button":"a",se=(0,t.cx)({[B.item]:!0,[B.active]:K,[B.disabled]:M,[B.destructive]:x&&!M},P),ie={[oe==="button"?"disabled":"aria-disabled"]:M,...oe==="a"&&M&&{href:void 0,onClick:void 0},...M&&{tabIndex:-1,["data-disabled"]:M}},j=(0,n.useRef)(null);(0,n.useImperativeHandle)(g,()=>j.current);const de=le=>{switch(le.key){case"ArrowRight":le.preventDefault(),le.stopPropagation(),Q&&(z(!0),I(!0),L(!0));break;default:break}},ce=()=>{z(!1),L(!1),j?.current?.focus()},ee=Boolean(R&&R.length>0);return n.createElement(oe,{target:m,className:se,rel:m==="_blank"?"noopener noreferrer":void 0,href:y,onClick:D,onMouseEnter:V,onMouseLeave:H,onKeyDown:de,role:y===void 0?T:void 0,"data-role":"menuitem",ref:j,"data-testid":F,"aria-label":v,"aria-checked":C,tabIndex:S,...ie},n.createElement(n.Fragment,null,E&&n.createElement(l.J,{name:E,className:B.icon,"aria-hidden":!0}),h,n.createElement("div",{className:(0,t.cx)(B.rightWrapper,{[B.withShortcut]:ee})},ee&&n.createElement("div",{className:B.shortcut},n.createElement(l.J,{name:"keyboard","aria-hidden":!0}),R),Q&&n.createElement(c,{items:A,isOpen:N,openedWithArrow:G,setOpenedWithArrow:I,close:ce,customStyle:U}))))}));u.displayName="MenuItem";const i=p=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${p.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${p.spacing(.5,2)};
      min-height: ${p.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.action.hover};
        color: ${p.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(p)}
      }
    `,active:t.css`
      background: ${p.colors.action.hover};
    `,destructive:t.css`
      color: ${p.colors.error.text};

      svg {
        color: ${p.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.error.main};
        color: ${p.colors.error.contrastText};

        svg {
          color: ${p.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${p.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${p.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${p.colors.text.secondary};
    `,rightWrapper:t.css`
      display: flex;
      align-items: center;
      margin-left: auto;
    `,shortcutIcon:t.css`
      margin-right: ${p.spacing(1)};
    `,withShortcut:t.css`
      min-width: ${p.spacing(10.5)};
    `,shortcut:t.css`
      display: flex;
      align-items: center;
      gap: ${p.spacing(1)};
      margin-left: ${p.spacing(2)};
      color: ${p.colors.text.secondary};
      opacity: 0.7;
    `})},69914:(Y,O,e)=>{"use strict";e.d(O,{d:()=>l});var t=e(66111),n=e(49380);const o=(f,d)=>(f%d+d)%d,s=-1,l=({localRef:f,isMenuOpen:d,openedWithArrow:r,setOpenedWithArrow:c,close:a,onOpen:u,onClose:i,onKeyDown:p})=>{const[g,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{d&&r&&(y(0),c?.(!1))},[d,r,c]),(0,t.useEffect)(()=>{const h=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');h?.[g]?.focus(),h?.forEach((v,C)=>{v.tabIndex=C===g?0:-1})},[f,g]),(0,n.Z)(()=>{u?.(y)}),[h=>{const v=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),C=v?.length??0;switch(h.key){case"ArrowUp":h.preventDefault(),h.stopPropagation(),y(o(g-1,C));break;case"ArrowDown":h.preventDefault(),h.stopPropagation(),y(o(g+1,C));break;case"ArrowLeft":h.preventDefault(),h.stopPropagation(),y(s),a?.();break;case"Home":h.preventDefault(),h.stopPropagation(),y(0);break;case"End":h.preventDefault(),h.stopPropagation(),y(C-1);break;case"Enter":h.preventDefault(),h.stopPropagation(),v?.[g]?.click();break;case"Escape":i?.();break;case"Tab":h.preventDefault(),i?.();break;default:break}p?.(h)}]}},35029:(Y,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(66111),f=e(72648),d=e(8180),r=e(52081),c=e(38894),a=e(27581);function u(g){const{title:y,children:E,isOpen:h=!1,closeOnEscape:v=!0,closeOnBackdropClick:C=!0,className:m,contentClassName:D,onDismiss:P,onClickBackdrop:b,trapFocus:M=!0}=g,x=(0,f.l4)(),A=(0,a.J)(x),T=(0,l.useRef)(null),{overlayProps:S,underlayProps:U}=(0,s.Ir)({isKeyboardDismissDisabled:!v,isOpen:h,onClose:P},T),{dialogProps:R,titleProps:F}=(0,n.R)({},T);if(!h)return null;const B=(0,t.cx)(A.modalHeader,typeof y!="string"&&A.modalHeaderWithTabs);return l.createElement(s.Xj,null,l.createElement("div",{role:"presentation",className:A.modalBackdrop,onClick:b||(C?P:void 0),...U}),l.createElement(o.MT,{contain:M,autoFocus:!0,restoreFocus:!0},l.createElement("div",{className:(0,t.cx)(A.modal,m),ref:T,...S,...R},l.createElement("div",{className:B},typeof y=="string"&&l.createElement(p,{...g,title:y,id:F.id}),typeof y!="string"&&y,l.createElement("div",{className:A.modalHeaderClose},l.createElement(d.h,{"aria-label":"Close dialog",name:"times",size:"xl",onClick:P}))),l.createElement("div",{className:(0,t.cx)(A.modalContent,D)},E))))}function i({leftItems:g,children:y}){const E=(0,f.l4)(),h=(0,a.J)(E);return g?l.createElement("div",{className:h.modalButtonRow},l.createElement(r.Lh,{justify:"space-between"},l.createElement(r.Lh,{justify:"flex-start",spacing:"md"},g),l.createElement(r.Lh,{justify:"flex-end",spacing:"md"},y))):l.createElement("div",{className:h.modalButtonRow},l.createElement(r.Lh,{justify:"flex-end",spacing:"md"},y))}u.ButtonRow=i;function p({icon:g,iconTooltip:y,title:E,id:h}){return l.createElement(c.x,{icon:g,iconTooltip:y,title:E,id:h})}},38894:(Y,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(66111),n=e(72648),o=e(27581);const s=({icon:l,iconTooltip:f,title:d,children:r,id:c})=>{const a=(0,n.wW)(o.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:a.modalHeaderTitle,id:c},d),r)}},72535:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>n});var t=e(66111);const n=({children:o})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},o)))},88683:(Y,O,e)=>{"use strict";e.d(O,{H:()=>l});var t=e(66111),n=e(79841),o=e(72142),s=e(38894);const l=({icon:f,title:d,tabs:r,activeTab:c,onChangeTab:a})=>t.createElement(s.x,{icon:f,title:d},t.createElement(o.J,{hideBorder:!0},r.map((u,i)=>t.createElement(n.O,{key:`${u.value}-${i}`,label:u.label,icon:u.icon,suffix:u.tabSuffix,active:u.value===c,onChangeTab:()=>a(u)}))))},5191:(Y,O,e)=>{"use strict";e.d(O,{$i:()=>o,JY:()=>l,Y0:()=>s,kr:()=>n});var t=e(66111);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class o extends t.Component{constructor(d){super(d),this.showModal=(r,c)=>{this.setState({component:r,props:c})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:d.component||null,props:d.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:f,props:d})=>f?t.createElement(f,{...d}):null),l=n.Consumer},27581:(Y,O,e)=>{"use strict";e.d(O,{J:()=>o});var t=e(9892),n=e(7804);const o=(0,n.B)(s=>{const l=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${l};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(Y,O,e)=>{"use strict";e.d(O,{p:()=>p});var t=e(9892),n=e(66111),o=e(8488),s=e(68183),l=e(72648),f=e(84128),d=e(10339);function r(y){for(let E=y.length-1;E>0;E--){const h=y.charAt(E);if(h==="$")return{index:E,prefix:y.substring(E)};if(h===" "||h==="	"||h==='"'||h==="'")return{index:E+1,prefix:y.substring(E+1)}}return{index:0,prefix:y}}function c(y,E,h,v){const C=[];for(const m of h)E&&!m.label.startsWith(E)||C.push({...m,kind:a(y,m.kind),range:v,insertText:m.insertText??m.label});return C}function a(y,E){switch(E){case d.k.Method:return y.languages.CompletionItemKind.Method;case d.k.Field:return y.languages.CompletionItemKind.Field;case d.k.Property:return y.languages.CompletionItemKind.Property;case d.k.Constant:return y.languages.CompletionItemKind.Constant;case d.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function u(y,E,h,v){if(!(!E||!h))return y.languages.registerCompletionItemProvider(E,{triggerCharacters:["$"],provideCompletionItems:(C,m,D)=>{if(C.id!==v)return;const P={startLineNumber:m.lineNumber,endLineNumber:m.lineNumber,startColumn:m.column,endColumn:m.column};if(D.triggerCharacter==="$")return P.startColumn=m.column-1,{suggestions:c(y,"$",h(),P)};const b=C.getValueInRange({startLineNumber:m.lineNumber,startColumn:1,endLineNumber:m.lineNumber,endColumn:m.column}),{index:M,prefix:x}=r(b);P.startColumn=M+1;const A=c(y,x,h(),P);if(A.length)return{suggestions:A}}})}class i extends n.PureComponent{constructor(E){super(E),this.loadCustomLanguage=()=>{const{language:h}=this.props,v=o.F.getIfExists(h);return v?v.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:h}=this.props;h&&h(this.getEditorValue())},this.onSave=()=>{const{onSave:h}=this.props;h&&h(this.getEditorValue())},this.handleBeforeMount=h=>{this.monaco=h;const{onBeforeEditorMount:v}=this.props;v?.(h)},this.handleOnMount=(h,v)=>{const{getSuggestions:C,language:m,onChange:D,onEditorDidMount:P}=this.props;this.modelId=h.getModel()?.id,this.getEditorValue=()=>h.getValue(),C&&this.modelId&&(this.completionCancel=u(v,m,C,this.modelId)),h.addCommand(v.KeyMod.CtrlCmd|v.KeyCode.KeyS,this.onSave);const b=this.loadCustomLanguage();P&&(b.then(()=>P(h,v)),h.getModel()?.onDidChangeContent(()=>D?.(h.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(E){const{getSuggestions:h,language:v}=this.props,C=E.language!==v;if(E.getSuggestions!==h||C){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}h&&this.modelId&&(this.completionCancel=u(this.monaco,v,h,this.modelId))}C&&this.loadCustomLanguage()}render(){const{theme:E,language:h,width:v,height:C,showMiniMap:m,showLineNumbers:D,readOnly:P,monacoOptions:b}=this.props,M=this.props.value??"",x=M.length>100,A=this.props.containerStyles??g(E).container,T={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:x&&m,renderCharacters:!1},readOnly:P,lineNumbersMinChars:4,lineDecorationsWidth:1*E.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*E.spacing.gridSize,bottom:.5*E.spacing.gridSize},fixedOverflowWidgets:!0};return D||(T.glyphMargin=!1,T.folding=!1,T.lineNumbers="off",T.lineNumbersMinChars=0),n.createElement("div",{className:A,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(f.o,{width:v,height:C,language:h,value:M,options:{...T,...b??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const p=(0,l.HE)(i),g=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},84128:(Y,O,e)=>{"use strict";e.d(O,{o:()=>f});var t=e(66111),n=e(61744),o=e(39198),s=e(59679);const l=d=>{const r=(0,s.Z)(async()=>await d);return{...r,dependency:r.value}},f=d=>{const{loading:r,error:c,dependency:a}=l(e.e(2462).then(e.bind(e,89852)));if(r)return t.createElement(n.u,{text:""});if(c)return t.createElement(o.X,{title:"React Monaco Editor failed to load",error:c,errorInfo:{componentStack:c?.stack||""}});const u=a.ReactMonacoEditor;return t.createElement(u,{...d})}},10339:(Y,O,e)=>{"use strict";e.d(O,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(Y,O,e)=>{"use strict";e.d(O,{T:()=>n});var t=e(10339);function n(o){const s="${"+o.value+"}",l=o.value===o.label?o.origin:`${o.label} / ${o.origin}`;return{label:s,kind:t.k.Property,detail:l,documentation:o.documentation}}},35224:(Y,O,e)=>{"use strict";e.d(O,{X:()=>a});var t=e(9892),n=e(66111),o=e(68183),s=e(29460),l=e(8125),f=e(72648),d=e(85419),r=e(39904),c=e(8180);const a=n.memo(({title:i,section:p,parent:g,pageIcon:y,onGoBack:E,children:h,titleHref:v,parentHref:C,leftItems:m,isFullscreen:D,className:P,"aria-label":b,buttonOverflowAlignment:M="right",forceShowLeftItems:x=!1})=>{const A=(0,f.wW)(u),T=(0,t.cx)("page-toolbar",A.toolbar,{["page-toolbar--fullscreen"]:D,[A.noPageIcon]:!y},P),S=n.createElement(n.Fragment,null,n.createElement("span",{className:A.truncateText},i),p&&n.createElement("span",{className:A.pre}," / ",p));return n.createElement("nav",{className:T,"aria-label":b},n.createElement("div",{className:A.leftWrapper},y&&!E&&n.createElement("div",{className:A.pageIcon},n.createElement(r.J,{name:y,size:"lg","aria-hidden":!0})),E&&n.createElement("div",{className:A.pageIcon},n.createElement(c.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":o.wl.components.BackButton.backArrow,onClick:E})),n.createElement("nav",{"aria-label":"Search links",className:A.navElement},g&&C&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${g} folder`,className:(0,t.cx)(A.titleText,A.parentLink,A.titleLink,A.truncateText),href:C},g," ",n.createElement("span",{className:A.parentIcon})),v&&n.createElement("span",{className:(0,t.cx)(A.titleText,A.titleDivider),"aria-hidden":!0},"/")),(i||Boolean(m?.length))&&n.createElement("div",{className:A.titleWrapper},i&&n.createElement("h1",{className:A.h1Styles},v?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(A.titleText,A.titleLink),href:v},S):n.createElement("div",{className:A.titleText},S)),m?.map((U,R)=>n.createElement("div",{className:(0,t.cx)(A.leftActionItem,{[A.forceShowLeftActionItems]:x}),key:R},U))))),n.createElement(l.R,{alignment:M},n.Children.toArray(h).filter(Boolean)))});a.displayName="PageToolbar";const u=i=>{const{spacing:p,typography:g}=i,y=(0,d.getFocusStyles)(i);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${i.colors.background.canvas};
      display: flex;
      gap: ${i.spacing(2)};
      justify-content: space-between;
      padding: ${i.spacing(1.5,2)};

      ${i.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${i.breakpoints.down("md")} {
        padding-left: ${i.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${i.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${i.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${p(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${i.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${g.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: ${i.shape.radius.default};
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${p(0,.5,0,.5)};
      display: none;
      ${i.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${i.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      align-items: center;
      padding-right: ${p(.5)};
      ${i.breakpoints.up("md")} {
        display: flex;
      }
    `,forceShowLeftActionItems:t.css`
      display: flex;
    `}}},78889:(Y,O,e)=>{"use strict";e.d(O,{t:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(39904);const f=({currentPage:r,numberOfPages:c,onNavigate:a,hideWhenSinglePage:u,showSmallVersion:i,className:p})=>{const g=(0,o.wW)(d),y=i?1:8,E=(0,n.useMemo)(()=>{const h=[...new Array(c).keys()],v=c>y,C=(m,D)=>n.createElement("li",{key:m,className:g.item},n.createElement(s.zx,{size:"sm",variant:D,onClick:()=>a(m)},m));return h.reduce((m,D)=>{const P=D+1,b=P===r?"primary":"secondary",M=y,x=c-y+1,A=x-M,T=P===1||P===c,S=A>-1&&r>=M&&r<=x,U=i?1:3,R=i?0:2;return v?T||r<M&&P<M||A>=0&&r>x&&P>x||A<0&&r>=M&&P>x||S&&P>=r-R&&P<=r+R?m.push(C(P,b)):(P===M&&r<M||P===x&&r>x||S&&(P===r-U||P===r+U))&&m.push(n.createElement("li",{key:P,className:g.item},n.createElement(l.J,{className:g.ellipsis,name:"ellipsis-v"}))):m.push(C(P,b)),m},[])},[r,c,a,y,i,g.ellipsis,g.item]);return u&&c<=1?null:n.createElement("div",{className:(0,t.cx)(g.container,p)},n.createElement("ol",null,n.createElement("li",{className:g.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>a(r-1),disabled:r===1},n.createElement(l.J,{name:"angle-left"}))),E,n.createElement("li",{className:g.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>a(r+1),disabled:r===c},n.createElement(l.J,{name:"angle-right"})))))},d=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(Y,O,e)=>{"use strict";e.d(O,{g:()=>a});var t=e(9892),n=e(66111),o=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},l=8,f={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:l,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:l,formMargin:`${l*4}px`,formFieldsetMargin:`${l*2}px`,formInputHeight:l*4,formButtonHeight:l*4,formInputPaddingHorizontal:`${l}px`,formInputAffixPaddingHorizontal:`${l/2}px`,formInputMargin:`${l*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${l/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},d=null;var r=e(39904),c=e(61860);const a=({error:i,onClick:p})=>{const g=(0,o.wW)(u);return i?n.createElement(c.u,{theme:"error",content:i},n.createElement(r.J,{onClick:p,className:(0,t.cx)(g.icon,{[g.clickable]:!!p}),size:"sm",name:"exclamation-triangle"})):null},u=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(Y,O,e)=>{"use strict";e.d(O,{T:()=>d});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(39904),f=e(61860);const d=({onCancel:c,loading:a})=>{const u=(0,s.wW)(r);return a?n.createElement(f.u,{content:"Cancel query"},n.createElement(l.J,{className:(0,t.cx)("spin-clockwise",{[u.clickable]:!!c}),name:"sync",size:"sm",onClick:c,"aria-label":o.wl.components.LoadingIndicator.icon})):null},r=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(Y,O,e)=>{"use strict";e.d(O,{R9:()=>l,_w:()=>s,bb:()=>o});var t=e(66111),n=e(50444);const o=t.createContext({eventBus:new n.F}),s=o.Provider,l=()=>t.useContext(o)},38208:(Y,O,e)=>{"use strict";e.d(O,{fm:()=>R});var t=e(99562),n=e(8861),o=e(9892),s=e(66111),l=e(52666),f=e(68183),d=e(72648);function r({children:F,delay:B}){const[K,L]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const N=setInterval(()=>{L(!0)},B);return()=>{clearInterval(N)}},[F,B]),s.createElement(s.Fragment,null,K?F:null)}var c=e(39904),a=e(74750),u=e(61860),i=e(71698),p=e(64319);function g({menu:F,title:B,placement:K="bottom",offset:L,dragClassCancel:N,menuButtonClass:z,onVisibleChange:G,onOpenMenu:I}){const V=B?f.wl.components.Panels.Panel.menu(B):"panel-menu-button",H=(0,s.useCallback)(Q=>(Q&&I&&I(),G),[I,G]);return s.createElement(i.L,{overlay:F,placement:K,offset:L,onVisibleChange:H},s.createElement(p.h,{"aria-label":`Menu for panel with ${B?`title ${B}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":V,className:(0,o.cx)(z,N)}))}function y({menu:F,title:B,dragClass:K,children:L,offset:N=-32,onOpenMenu:z}){const G=(0,d.wW)(E),I=(0,s.useRef)(null),V=f.wl.components.Panels.Panel.HoverWidget,H=(0,s.useCallback)(ie=>{I.current?.setPointerCapture(ie.pointerId)},[]),Q=(0,s.useCallback)(ie=>{I.current?.releasePointerCapture(ie.pointerId)},[]),[oe,se]=(0,s.useState)(!1);return L===void 0||s.Children.count(L)===0?null:s.createElement("div",{className:(0,o.cx)(G.container,{"show-on-hover":!oe}),style:{top:`${N}px`},"data-testid":V.container},K&&s.createElement("div",{className:(0,o.cx)(G.square,G.draggable,K),onPointerDown:H,onPointerUp:Q,ref:I,"data-testid":V.dragIcon},s.createElement(c.J,{name:"expand-arrows",className:G.draggableIcon})),!B&&s.createElement("h6",{className:(0,o.cx)(G.untitled,{[G.draggable]:!!K},K)},"Untitled"),L,F&&s.createElement(g,{menu:F,title:B,placement:"bottom",menuButtonClass:G.menuButton,onVisibleChange:se,onOpenMenu:z}))}function E(F){return{hidden:(0,o.css)({visibility:"hidden",opacity:"0"}),container:(0,o.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:F.colors.background.secondary,color:F.colors.text.primary,border:`1px solid ${F.colors.border.weak}`,borderRadius:F.shape.radius.default,height:F.spacing(4),boxShadow:F.shadows.z1}),square:(0,o.css)({display:"flex",justifyContent:"center",alignItems:"center",width:F.spacing(4),height:"100%"}),draggable:(0,o.css)({cursor:"move",[F.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,o.css)({background:"inherit",border:"none","&:hover":{background:F.colors.secondary.main}}),untitled:(0,o.css)({color:F.colors.text.disabled,fontStyle:"italic",padding:F.spacing(0,1),marginBottom:0}),draggableIcon:(0,o.css)({transform:"rotate(45deg)",color:F.colors.text.secondary,"&:hover":{color:F.colors.text.primary}})}}var h=e(85419),v=e(31403);const C=(0,s.forwardRef)(({className:F,children:B,href:K,onClick:L,target:N,title:z,...G},I)=>{const V=(0,d.wW)(m);return K?s.createElement("a",{ref:I,href:K,onClick:L,target:N,title:z,className:(0,o.cx)(V.linkItem,F),...G},B):L?s.createElement(v.zx,{ref:I,className:(0,o.cx)(V.item,F),variant:"secondary",fill:"text",onClick:L},B):s.createElement("span",{ref:I,className:(0,o.cx)(V.item,F),...G},B)});C.displayName="TitleItem";const m=F=>{const B=(0,o.css)({color:`${F.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${F.shape.borderRadius()}`,padding:`${F.spacing(0,1)}`,height:`${F.spacing(F.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,h.getFocusStyles)(F),zIndex:1},"&: focus:not(:focus-visible)":(0,h.getMouseFocusStyles)(F),"&:hover ":{boxShadow:`${F.shadows.z1}`,background:`${F.colors.background.secondary}`,color:`${F.colors.text.primary}`}});return{item:B,linkItem:(0,o.cx)(B,(0,o.css)({cursor:"pointer"}))}};function D({description:F,className:B}){const K=(0,d.wW)(P),L=()=>{const N=typeof F=="function"?F():F;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:N}}))};return F!==""?s.createElement(u.u,{interactive:!0,content:L},s.createElement(C,{className:(0,o.cx)(B,K.description)},s.createElement(c.J,{name:"info-circle",size:"md"}))):null}const P=F=>({description:(0,o.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function b({message:F,onClick:B,ariaLabel:K="status"}){const L=(0,d.wW)(M);return s.createElement(p.h,{className:L.buttonStyles,onClick:B,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:F||"","aria-label":K})}const M=F=>{const{headerHeight:B,padding:K}=F.components.panel;return{buttonStyles:(0,o.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:F.spacing(K),width:F.spacing(B),height:F.spacing(B),borderRadius:F.shape.radius.default})}};function x({width:F,height:B,children:K,padding:L="md",title:N="",description:z="",displayMode:G="default",titleItems:I,menu:V,dragClass:H,dragClassCancel:Q,hoverHeader:oe=!1,hoverHeaderOffset:se,loadingState:ie,statusMessage:j,statusMessageOnClick:de,leftItems:ce,actions:ee,onCancelQuery:le,onOpenMenu:q}){const fe=(0,d.l4)(),Z=(0,d.wW)(U),ne=!oe,re="show-on-hover",ve=T(fe,ne),{contentStyle:me,innerWidth:Ie,innerHeight:Ge}=S(L,fe,F,ve,B),gt={height:ve,cursor:H?"move":"auto"},Te={width:F,height:B};G==="transparent"&&(Te.backgroundColor="transparent",Te.border="none"),ce&&(ee=ce);const Le=N?f.wl.components.Panels.Panel.title(N):"Panel",Ye=s.createElement(s.Fragment,null,N&&s.createElement("h6",{title:N,className:Z.title},N),s.createElement("div",{className:(0,o.cx)(Z.titleItems,Q),"data-testid":"title-items-container"},s.createElement(D,{description:z,className:Q}),I),ie===l.Gu.Streaming&&s.createElement(u.u,{content:le?"Stop streaming":"Streaming"},s.createElement(C,{className:Q,"data-testid":"panel-streaming",onClick:le},s.createElement(c.J,{name:"circle-mono",size:"md",className:Z.streaming}))),ie===l.Gu.Loading&&le&&s.createElement(r,{delay:2e3},s.createElement(u.u,{content:"Cancel query"},s.createElement(C,{className:Q,"data-testid":"panel-cancel-query",onClick:le},s.createElement(c.J,{name:"sync-slash",size:"md"})))),s.createElement("div",{className:Z.rightAligned},ee&&s.createElement("div",{className:Z.rightActions},A(ee,it=>it))));return s.createElement("div",{className:Z.container,style:Te,"data-testid":Le},s.createElement("div",{className:Z.loadingBarContainer},ie===l.Gu.Loading?s.createElement(a.F,{width:F,ariaLabel:"Panel loading bar"}):null),oe&&s.createElement(s.Fragment,null,s.createElement(y,{menu:V,title:N,offset:se,dragClass:H,onOpenMenu:q},Ye),j&&s.createElement("div",{className:Z.errorContainerFloating},s.createElement(b,{message:j,onClick:de,ariaLabel:"Panel status"}))),ne&&s.createElement("div",{className:(0,o.cx)(Z.headerContainer,H),style:gt,"data-testid":"header-container"},j&&s.createElement("div",{className:Q},s.createElement(b,{message:j,onClick:de,ariaLabel:"Panel status"})),Ye,V&&s.createElement(g,{menu:V,title:N,placement:"bottom-end",menuButtonClass:(0,o.cx)(Z.menuItem,Q,re),onOpenMenu:q})),s.createElement("div",{className:Z.content,style:me},K(Ie,Ge)))}const A=(F,B)=>{const K=s.Children.toArray(F).filter(Boolean);return K.length>0?B(K):null},T=(F,B)=>B?F.spacing.gridSize*F.components.panel.headerHeight:0,S=(F,B,K,L,N)=>{const z=(F==="md"?B.components.panel.padding:0)*B.spacing.gridSize,G=z*2,I=1*2,V=K-G-I,H=N-L-G-I;return{contentStyle:{padding:z},innerWidth:V,innerHeight:H}},U=F=>{const{background:B,borderColor:K,padding:L}=F.components.panel;return{container:(0,o.css)({label:"panel-container",backgroundColor:B,border:`1px solid ${K}`,position:"relative",borderRadius:F.shape.borderRadius(1),height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1"}},"&:focus-visible":{outline:`1px solid ${F.colors.action.focus}`},"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,o.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,o.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,o.css)({label:"panel-header",display:"flex",alignItems:"center"}),streaming:(0,o.css)({label:"panel-streaming",marginRight:0,color:F.colors.success.text,"&:hover":{color:F.colors.success.text}}),title:(0,o.css)({label:"panel-title",marginBottom:0,padding:F.spacing(0,L),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:F.typography.h6.fontSize,fontWeight:F.typography.h6.fontWeight}),items:(0,o.css)({display:"flex"}),item:(0,o.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,o.css)({visibility:"hidden"}),menuItem:(0,o.css)({label:"panel-menu",border:"none",background:F.colors.secondary.main,"&:hover":{background:F.colors.secondary.shade}}),errorContainerFloating:(0,o.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:F.zIndex.tooltip}),rightActions:(0,o.css)({display:"flex",padding:F.spacing(0,L),gap:F.spacing(1)}),rightAligned:(0,o.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,o.css)({display:"flex",height:"100%"})}},R=x;R.LoadingIndicator=n.T,R.ErrorIndicator=t.g,R.TitleItem=C},17882:(Y,O,e)=>{"use strict";e.d(O,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(Y,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f,className:d,...r})=>{const c=(0,o.wW)(l);return n.createElement("div",{className:(0,t.cx)(c,d),...r},f)},l=f=>t.css`
    background-color: ${f.components.panel.background};
    border: 1px solid ${f.components.panel.borderColor};
    border-radius: ${f.shape.radius.default};
  `},51613:(Y,O,e)=>{"use strict";e.d(O,{o:()=>s});var t=e(66111),n=e(59250),o=e(19985);const s=({status:f,...d})=>{const r=l(f);return t.createElement(o.C,{text:r.text,color:r.color,icon:r.icon,tooltip:r.tooltip,...d})};s.displayName="PluginSignatureBadge";function l(f){switch(f||(f=n.Xy.invalid),f){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(Y,O,e)=>{"use strict";e.d(O,{RN:()=>l,h_:()=>s,lO:()=>f});var t=e(66111),n=e(15638),o=e(72648);function s(r){const{children:c,className:a,root:u,forwardedRef:i}=r,p=(0,o.l4)(),g=(0,t.useRef)(null),y=u??l();return g.current||(g.current=document.createElement("div"),a&&(g.current.className=a),g.current.style.position="relative",g.current.style.zIndex=`${p.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(g.current&&y.appendChild(g.current),()=>{g.current&&y.removeChild(g.current)}),[y]),n.createPortal(t.createElement("div",{ref:i},c),g.current)}function l(){return window.document.getElementById("grafana-portal-container")??document.body}function f(){return t.createElement("div",{id:"grafana-portal-container"})}const d=t.forwardRef((r,c)=>t.createElement(s,{...r,forwardedRef:c}));d.displayName="RefForwardingPortal"},69659:(Y,O,e)=>{"use strict";e.d(O,{q:()=>D});var t=e(9892),n=e(9085),o=e.n(n),s=e(82897),l=e.n(s),f=e(66111),d=e(43809),r=e(56975),c=e(68183),a=e(12724),u=e(73958),i=e(47838),p=e(9830),g=e(74778),y=e(71096),E=e(784),h=e(6464),v=e(72648),C=e(85419);class m extends f.PureComponent{constructor(M,x){super(M,x),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(R,F)=>{const B=R.document!==this.state.value.document,K=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(R),this.setState({value:R},()=>{if(B){const L=d.Z.serialize(K)!==d.Z.serialize(R);L&&F&&this.runOnChangeAndRunQuery(),L&&!F&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:R}=this.props,F=d.Z.serialize(this.state.value);R&&R(this.cleanText(F))},this.runOnRunQuery=()=>{const{onRunQuery:R}=this.props;R&&(R(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(R,F,B)=>{const{onBlur:K}=this.props;if(K)K();else{const L=this.lastExecutedValue?d.Z.serialize(this.lastExecutedValue):"",N=d.Z.serialize(F.value);L!==N&&this.runOnChangeAndRunQuery()}return B()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:A,cleanText:T,portalOrigin:S,onWillApplySuggestion:U}=M;this.plugins=[(0,u.b)({onTypeahead:A,cleanText:T,portalOrigin:S,onWillApplySuggestion:U}),(0,i.d)({handler:this.runOnChangeAndRunQuery}),(0,p.z)(),(0,g.G)(),(0,y.$)(),(0,E.R)(),(0,h.w)(),...M.additionalPlugins||[]].filter(R=>R),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,a.l1)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,x){const{query:A,syntax:T,syntaxLoaded:S}=this.props;if(!M.syntaxLoaded&&S&&this.editor){const R=this.editor.insertText(" ").deleteBackward(1);this.onChange(R.value,!0)}const{value:U}=this.state;A!==M.query&&A!==d.Z.serialize(U)&&this.setState({value:(0,a.l1)(A||"",T)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:x}=this.props,A=o()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),T=P(x);return f.createElement("div",{className:(0,t.cx)(A,T.wrapper)},f.createElement("div",{className:"slate-query-field","aria-label":c.wl.components.QueryField.container},f.createElement(r.ML,{ref:S=>this.editor=S,schema:a.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:S=>{this.onChange(S.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const D=(0,v.HE)(m),P=b=>{const M=(0,C.getFocusStyles)(b);return{wrapper:t.css`
      &:focus-within {
        ${M}
      }
    `}}},5562:(Y,O,e)=>{"use strict";e.d(O,{dP:()=>u,o5:()=>c});var t=e(14016),n=e(66111),o=e(76282),s=e(68183),l=e(37951),f=e(26202),d=e(44342),r=e(64319);const c=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],a=class extends n.PureComponent{constructor(g){super(g),this.onChangeSelect=y=>{const{onIntervalChanged:E}=this.props;E&&y.value!=null&&E(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:g,intervals:y,tooltip:E,value:h,text:v,isLoading:C,noIntervalPicker:m,width:D}=this.props,P=h||"",b=this.getVariant(),M=p({intervals:y}),x=M.find(({value:B})=>B===P),A=i(a.offOption.value);let T=x||A;T.label===A.label&&(T={value:""});const S=T.ariaLabel,U=(0,l.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:S}),R=(0,l.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),F=T.value===""?R:U;return n.createElement(f.h,{className:"refresh-picker"},n.createElement(r.h,{"aria-label":v,tooltip:E,onClick:g,variant:b,icon:C?"fa fa-spinner":"sync",style:D?{width:D}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},v),!m&&n.createElement(d.d,{value:T,options:M,onChange:this.onChangeSelect,variant:b,title:(0,l.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":F}))}};let u=a;u.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},u.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},u.isLive=g=>g===a.liveOption.value;function i(g){return g===u.liveOption.value?{label:(0,l.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,l.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,l.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,l.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function p({intervals:g=c}={}){const y=g.map(E=>{const h=(0,o.RA)(E),v=(0,t.Z)(h);return{label:E,value:E,ariaLabel:v}});return y.unshift(i(u.offOption.value)),y}},39856:(Y,O,e)=>{"use strict";e.d(O,{D:()=>o});var t=e(66111),n=e(63418);function o({component:s,content:l,...f}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(l)},...f})}},34517:(Y,O,e)=>{"use strict";e.d(O,{c:()=>r});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(31403),f=e(95569);const d=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),r=({label:c="Password",labelWidth:a,inputWidth:u=12,onReset:i,isConfigured:p,tooltip:g,placeholder:y="Password",interactive:E,...h})=>{const v=d();return s.createElement(f.W,{label:c,tooltip:g,interactive:E,labelWidth:a,inputEl:p?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${u}`,v.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(h,"value")}),s.createElement(l.zx,{onClick:i,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${u}`,placeholder:y,...h})})};r.displayName="SecretFormField"},52953:(Y,O,e)=>{"use strict";e.d(O,{m4:()=>d});var t=e(66111),n=e(31403),o=e(46967),s=e(52081);const l="configured",f="Reset",d=({isConfigured:r,onReset:c,...a})=>t.createElement(s.Lh,null,!r&&t.createElement(o.I,{...a,type:"password"}),r&&t.createElement(o.I,{...a,type:"text",disabled:!0,value:l}),r&&t.createElement(n.zx,{onClick:c,variant:"secondary"},f))},70862:(Y,O,e)=>{"use strict";e.d(O,{m:()=>t.m4});var t=e(52953)},30810:(Y,O,e)=>{"use strict";e.d(O,{Zk:()=>a});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(52081),f=e(97379);const d="configured",r="Reset",c=u=>({configuredStyle:t.css`
      min-height: ${u.spacing(u.components.height.md)};
      padding-top: ${u.spacing(.5)};
      resize: none;
    `}),a=({isConfigured:u,onReset:i,...p})=>{const g=(0,o.wW)(c);return n.createElement(l.Lh,null,!u&&n.createElement(f.K,{...p}),u&&n.createElement(f.K,{...p,rows:1,disabled:!0,value:d,className:(0,t.cx)(g.configuredStyle)}),u&&n.createElement(s.zx,{onClick:i,variant:"secondary"},r))}},88892:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>t.Zk});var t=e(30810)},70044:(Y,O,e)=>{"use strict";e.d(O,{X:()=>a});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(72648),f=e(77117),d=e(97924),r=e(28318),c=e(2357);function a({options:u,value:i,onChange:p,Component:g,className:y,allowCustomValue:E,allowEmptyValue:h,placeholder:v,disabled:C,inputMinWidth:m,inputPlaceholder:D,onExpandedChange:P,autofocus:b=!1,...M}){const[x,A,T,S]=(0,r._)(b,P),U=m?Math.max(m,A):A,R=(0,l.wW)(d.N);if(!T){const F=(0,n.isObject)(i)?i.label:i,B=F!=null?String(F):void 0;return s.createElement(x,{disabled:C,Component:g||s.createElement(f.W,{className:(0,t.cx)(R.segment,{[R.queryPlaceholder]:v!==void 0&&!i,[R.disabled]:C},y)},B||v)})}return s.createElement(c.V,{...M,value:i&&!(0,n.isObject)(i)?{value:i}:i,placeholder:D,options:u,width:U,onClickOutside:()=>S(!1),allowCustomValue:E,allowEmptyValue:h,onChange:F=>{S(!1),p(F)}})}},68118:(Y,O,e)=>{"use strict";e.d(O,{V:()=>i});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(13821),f=e(72648),d=e(37951),r=e(77117),c=e(2357),a=e(97924),u=e(28318);function i({value:g,onChange:y,loadOptions:E,reloadOptionsOnChange:h=!1,Component:v,className:C,allowCustomValue:m,allowEmptyValue:D,disabled:P,placeholder:b,inputMinWidth:M,inputPlaceholder:x,autofocus:A=!1,onExpandedChange:T,noOptionMessageHandler:S=p,...U}){const[R,F]=(0,l.Z)(E,[E]),[B,K,L,N]=(0,u._)(A,T),z=M?Math.max(M,K):K,G=(0,f.wW)(a.N);if(!L){const I=(0,n.isObject)(g)?g.label:g,V=I!=null?String(I):void 0;return s.createElement(B,{onClick:h?void 0:F,disabled:P,Component:v||s.createElement(r.W,{className:(0,t.cx)(G.segment,{[G.queryPlaceholder]:b!==void 0&&!g,[G.disabled]:P},C)},V||b)})}return s.createElement(c.V,{...U,value:g&&!(0,n.isObject)(g)?{value:g}:g,placeholder:x,options:R.value??[],loadOptions:h?F:void 0,width:z,noOptionsMessage:S(R),allowCustomValue:m,allowEmptyValue:D,onClickOutside:()=>{N(!1)},onChange:I=>{N(!1),y(I)}})}function p(g){return g.loading?(0,d.t)("grafana-ui.segment-async.loading","Loading options..."):g.error?(0,d.t)("grafana-ui.segment-async.error","Failed to load options"):!Array.isArray(g.value)||g.value.length===0?(0,d.t)("grafana-ui.segment-async.no-options","No options found"):""}},58564:(Y,O,e)=>{"use strict";e.d(O,{X:()=>a});var t=e(9892),n=e(66111),o=e(53165),s=e(72648),l=e(4176),f=e(77117),d=e(97924),r=e(28318);const c=14;function a({value:u,onChange:i,Component:p,className:g,placeholder:y,inputPlaceholder:E,disabled:h,autofocus:v=!1,onExpandedChange:C,...m}){const D=(0,n.useRef)(null),[P,b]=(0,n.useState)(u),[M,x]=(0,n.useState)((0,l.X1)((u||"").toString(),c).width),[A,,T,S]=(0,r._)(v,C),U=(0,s.wW)(d.N);if((0,o.Z)(D,()=>{S(!1),i(P)}),!T)return n.createElement(A,{disabled:h,Component:p||n.createElement(f.W,{className:(0,t.cx)(U.segment,{[U.queryPlaceholder]:y!==void 0&&!P,[U.disabled]:h},g)},u||y)});const R=t.css`
    width: ${Math.max(M+20,32)}px;
  `;return n.createElement("input",{...m,ref:D,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",R),value:P,placeholder:E,onChange:F=>{const{width:B}=(0,l.X1)(F.target.value,c);x(B),b(F.target.value)},onBlur:()=>{S(!1),i(P)},onKeyDown:F=>{[13,27].includes(F.keyCode)&&(S(!1),i(P))}})}},30991:(Y,O,e)=>{"use strict";e.d(O,{f:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(11543),l=e(77117);const f=({label:r,htmlFor:c,children:a,fill:u})=>{const i=(0,o.wW)(d);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(l.W,{htmlFor:c,width:12,className:i.label},r),a,u&&n.createElement("div",{className:i.fill},n.createElement(l.W,null,""))))},d=r=>({label:t.css`
    color: ${r.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${r.spacing(.5)};
  `})},2357:(Y,O,e)=>{"use strict";e.d(O,{V:()=>s});var t=e(66111),n=e(72648),o=e(8581);function s({value:l,placeholder:f="",options:d=[],onChange:r,onClickOutside:c,loadOptions:a=void 0,width:u,noOptionsMessage:i="",allowCustomValue:p=!1,allowEmptyValue:g=!1,...y}){const E=(0,t.useRef)(null),h=(0,n.l4)();let v=u>0?u/h.spacing.gridSize:void 0,C,m={};return a?(C=o.qb,m={loadOptions:a,defaultOptions:!0}):C=o.Ph,t.createElement("div",{...y,ref:E},t.createElement(C,{width:v,noOptionsMessage:i,placeholder:f,autoFocus:!0,isOpen:!0,onChange:r,options:d,value:l,closeMenuOnSelect:!1,onCloseMenu:()=>{if(E&&E.current){const D=E.current.querySelector('input[id^="react-select-"]');D&&(D.value||g)?r({value:D.value,label:D.value}):c()}},allowCustomValue:p,...m}))}},97924:(Y,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(9892);const n=o=>{const s="v1"in o?o.v1.palette:o.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(Y,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(66111),n=e(72648),o=e(31403);const s=(l,f)=>{const d=(0,t.useRef)(null),r=(0,n.wW)(o.gN),[c,a]=(0,t.useState)(l),[u,i]=(0,t.useState)(0),p=y=>{a(y),f&&f(y)};return[({Component:y,onClick:E,disabled:h})=>t.createElement("button",{type:"button",className:r,ref:d,disabled:h,onClick:()=>{p(!0),d&&d.current&&i(d.current.clientWidth*1.25),E?.()}},y),u,c,p]}},62997:(Y,O,e)=>{"use strict";e.d(O,{m:()=>o});var t=e(66111),n=e(39904);const o=({isOpen:s})=>{const l=s?"search":"angle-down",f=s?"sm":"md";return t.createElement(n.J,{name:l,size:f})}},8581:(Y,O,e)=>{"use strict";e.d(O,{M8:()=>ie,qb:()=>Q,gY:()=>se,NU:()=>H,Ph:()=>V,eI:()=>M,LT:()=>oe});var t=e(66111),n=e(58839),o=e(51306),s=e(7576),l=e(81658),f=e(13572),d=e(72648),r=e(39904),c=e(67487),a=e(62997),u=e(9892),i=e(46967);const p=t.forwardRef((j,de)=>{const{children:ce}=j,ee=(0,d.l4)(),le=(0,i.H)({theme:ee,invalid:!1});return t.createElement("div",{className:(0,u.cx)(le.suffix,u.css`
          position: relative;
        `),ref:de},ce)});p.displayName="IndicatorsContainer";var g=e(7804),y=e(73267);const E=(0,g.B)((j,de,ce)=>{const ee=(0,i.H)({theme:j,invalid:de});return{input:(0,u.cx)((0,y.nf)(j),u.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,ce&&u.css`
          padding-left: 0;
        `),prefix:(0,u.cx)(ee.prefix,u.css`
        position: relative;
      `)}}),h=t.forwardRef(function({focused:de,invalid:ce,disabled:ee,children:le,innerProps:q,prefix:fe,...Z},ne){const re=(0,d.l4)(),ve=E(re,ce,!!fe);return t.createElement("div",{className:ve.input,...q,ref:ne},fe&&t.createElement("div",{className:(0,u.cx)(ve.prefix)},fe),le)});var v=e(8180),C=e(27501);const m=({innerProps:j,children:de})=>{const ce=(0,d.l4)(),ee=(0,C.D)(ce);return t.createElement("div",{...j,className:ee.multiValueContainer},de)},D=({children:j,innerProps:de})=>{const ce=(0,d.l4)(),ee=(0,C.D)(ce);return t.createElement(v.h,{...de,name:"times",size:"sm",className:ee.multiValueRemove})};var P=e(44800),b=e(85419);const M=j=>{const{isDisabled:de,isFocused:ce,children:ee,selectProps:{invalid:le=!1}}=j,q=(0,d.l4)(),fe=x(q,ce,de,le);return t.createElement(P.c.SelectContainer,{...j,className:(0,u.cx)(fe.wrapper,j.className)},ee)},x=(0,g.B)((j,de,ce,ee)=>{const le=(0,i.H)({theme:j,invalid:ee});return{wrapper:(0,u.cx)(le.wrapper,(0,y.RK)(j,ee),de&&u.css`
            ${(0,b.focusCss)(j.v1)}
          `,ce&&le.inputDisabled,u.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${ce?"not-allowed":"pointer"};
        `)}});var A=e(64861),T=e(874),S=e(24901);class U extends t.Component{render(){const{children:de}=this.props,{selectProps:ce}=this.props;if(ce&&Array.isArray(de)&&Array.isArray(de[0])&&ce.maxVisibleValues!==void 0&&!(ce.showAllSelectedWhenOpen&&ce.menuIsOpen)){const[ee,...le]=de,q=ee.slice(0,ce.maxVisibleValues);return this.renderContainer([q,...le])}return this.renderContainer(de)}renderContainer(de){const{isMulti:ce,theme:ee}=this.props,le=(0,C.D)(ee),q=(0,u.cx)(le.valueContainer,ce&&le.valueContainerMulti);return t.createElement("div",{className:q},de)}}const R=(0,d.HE)(U);var F=e(54897);const B=(j,de)=>{if(Array.isArray(j)){const ce=j.filter(Boolean);return ce?.length?ce:void 0}if(typeof j=="object")return[j];if(typeof j=="string"||typeof j=="number"){const ce=K(j,de);if(ce)return[ce]}},K=(j,de)=>{for(const ce of de)if("options"in ce){let ee=K(j,ce.options);if(ee)return ee}else if("value"in ce&&ce.value===j)return ce;return null},L=j=>j.map(({description:de,...ce})=>ce),N=j=>{const{maxVisibleValues:de,selectedValuesCount:ce,menuIsOpen:ee,showAllSelectedWhenOpen:le}=j;return de!==void 0&&ce>de&&!(le&&ee)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",ce-de,")"):null},z=j=>{const{children:de,innerProps:ce,selectProps:{menuIsOpen:ee,onMenuClose:le,onMenuOpen:q},isFocused:fe,isMulti:Z,getValue:ne,innerRef:re}=j,ve=j.selectProps;return ve.renderControl?t.createElement(ve.renderControl,{isOpen:ee,value:Z?ne():ne()[0],ref:re,onClick:ee?le:q,onBlur:le,disabled:!!ve.disabled,invalid:!!ve.invalid}):t.createElement(h,{ref:re,innerProps:ce,prefix:ve.prefix,focused:fe,invalid:!!ve.invalid,disabled:!!ve.disabled},de)};function G({allowCustomValue:j=!1,allowCreateWhileLoading:de=!1,"aria-label":ce,autoFocus:ee=!1,backspaceRemovesValue:le=!0,blurInputOnSelect:q,cacheOptions:fe,className:Z,closeMenuOnSelect:ne=!0,components:re,createOptionPosition:ve="last",defaultOptions:me,defaultValue:Ie,disabled:Ge=!1,filterOption:gt,formatCreateLabel:Te,getOptionLabel:Le,getOptionValue:Ye,inputValue:it,invalid:ht,isClearable:Re=!1,id:ye,isLoading:Ce=!1,isMulti:be=!1,inputId:We,isOpen:Qe,isOptionDisabled:mt,isSearchable:vt=!0,loadOptions:rt,loadingMessage:Ot="Loading options...",maxMenuHeight:Et=300,minMenuHeight:Mt,maxVisibleValues:ue,menuPlacement:De="auto",menuPosition:Ne,menuShouldPortal:tt=!0,noOptionsMessage:et="No options found",onBlur:Ue,onChange:Fe,onCloseMenu:Ee,onCreateOption:Me,onInputChange:He,onKeyDown:Ze,onOpenMenu:lt,onFocus:bt,openMenuOnFocus:Pt=!1,options:Je=[],placeholder:Dt="Choose",prefix:Ve,renderControl:Xe,showAllSelectedWhenOpen:st=!0,tabSelectsValue:ut=!0,value:xt,virtualized:Kt=!1,width:Jt,isValidNewOption:On,formatOptionLabel:Nn,hideSelectedOptions:jn}){const ya=(0,d.l4)(),Lt=(0,C.D)(ya),ft=(0,t.useRef)(null),[Ht,$t]=(0,t.useState)(!1),zt=(0,F.O)(ya,Jt);(0,t.useEffect)(()=>{if(rt&&Qe&&ft.current&&ft.current.controlRef&&De==="auto"){const Hn=window.innerHeight-ft.current.controlRef.getBoundingClientRect().bottom;$t(Hn<Et)}},[Et,De,rt,Qe]);const Wt=(0,t.useCallback)((Hn,_n)=>{if(be&&Hn==null)return Fe([],_n);Fe(Hn,_n)},[be,Fe]);let jt=n.ZP;const sn={};let pn={},Pn;if(be&&rt)Pn=xt;else if(be&&xt&&Array.isArray(xt)&&!rt)Pn=xt.map(Hn=>{const _n=K(Hn.value??Hn,Je);return!j||_n?_n:typeof Hn=="string"?(0,f.E)(Hn):Hn});else if(rt){const Hn=Ie||xt;Pn=Hn?[Hn]:[]}else Pn=B(xt,Je);const Mn={"aria-label":ce,autoFocus:ee,backspaceRemovesValue:le,blurInputOnSelect:q,captureMenuScroll:!1,closeMenuOnSelect:ne,defaultValue:Ie,disabled:Ge,filterOption:gt,getOptionLabel:Le,getOptionValue:Ye,hideSelectedOptions:jn,inputValue:it,invalid:ht,isClearable:Re,id:ye,isDisabled:Ge,isLoading:Ce,isMulti:be,inputId:We,isOptionDisabled:mt,isSearchable:vt,maxMenuHeight:Et,minMenuHeight:Mt,maxVisibleValues:ue,menuIsOpen:Qe,menuPlacement:De==="auto"&&Ht?"top":De,menuPosition:Ne,menuShouldBlockScroll:!0,menuPortalTarget:tt&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Ue,onChange:Wt,onInputChange:He,onKeyDown:Ze,onMenuClose:Ee,onMenuOpen:lt,onFocus:bt,formatOptionLabel:Nn,openMenuOnFocus:Pt,options:Kt?L(Je):Je,placeholder:Dt,prefix:Ve,renderControl:Xe,showAllSelectedWhenOpen:st,tabSelectsValue:ut,value:be?Pn:Pn?.[0]};j&&(jt=l.Z,sn.allowCreateWhileLoading=de,sn.formatCreateLabel=Te??I,sn.onCreateOption=Me,sn.createOptionPosition=ve,sn.isValidNewOption=On),rt&&(jt=j?s.Z:o.Z,pn={loadOptions:rt,cacheOptions:fe,defaultOptions:me});const Cn=Kt?A.r4:A.SA;return t.createElement(t.Fragment,null,t.createElement(jt,{ref:ft,components:{MenuList:Cn,Group:T.n,ValueContainer:R,IndicatorsContainer(Hn){const{selectProps:_n}=Hn,{value:oa,showAllSelectedWhenOpen:Gt,maxVisibleValues:Bt,menuIsOpen:on}=_n;if(Bt!==void 0){const rn=oa.length,In=[...Hn.children];return In.splice(-1,0,N({maxVisibleValues:Bt,selectedValuesCount:rn,showAllSelectedWhenOpen:Gt,menuIsOpen:on})),t.createElement(p,{...Hn},In)}return t.createElement(p,{...Hn})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:z,Option:A.Qn,ClearIndicator(Hn){const{clearValue:_n}=Hn;return t.createElement(r.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Lt.singleValueRemove,onMouseDown:oa=>{oa.preventDefault(),oa.stopPropagation(),_n()}})},LoadingIndicator(){return t.createElement(c.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Lt.loadingMessage},Ot)},NoOptionsMessage(){return t.createElement("div",{className:Lt.loadingMessage,"aria-label":"No options provided"},et)},DropdownIndicator(Hn){return t.createElement(a.m,{isOpen:Hn.selectProps.menuIsOpen})},SingleValue(Hn){return t.createElement(S.P,{...Hn,disabled:Ge})},SelectContainer:M,MultiValueContainer:m,MultiValueRemove:Ge?()=>null:D,...re},styles:zt,className:Z,...Mn,...sn,...pn}))}function I(j){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,j),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function V(j){return t.createElement(G,{...j})}function H(j){return t.createElement(G,{...j,isMulti:!0})}function Q(j){return t.createElement(G,{...j})}function oe(j){return t.createElement(G,{virtualized:!0,...j})}function se(j){return t.createElement(G,{virtualized:!0,...j})}function ie(j){return t.createElement(G,{...j,isMulti:!0})}},64861:(Y,O,e)=>{"use strict";e.d(O,{Qn:()=>y,SA:()=>u,r4:()=>g});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(32436),f=e(84559),d=e(72648),r=e(68226),c=e(39904),a=e(27501);const u=({children:E,maxHeight:h,innerRef:v,innerProps:C})=>{const m=(0,d.l4)(),D=(0,a.D)(m);return s.createElement("div",{...C,className:D.menu,style:{maxHeight:h},"aria-label":"Select options menu"},s.createElement(r.$,{scrollRefCallback:v,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},E))};u.displayName="SelectMenu";const i=37,p=7,g=({children:E,maxHeight:h,options:v,getValue:C})=>{const m=(0,d.l4)(),D=(0,a.D)(m),[P]=C(),M=(P?v.findIndex(S=>S.value===P.value):0)*i;if(!Array.isArray(E))return null;const A=((0,n.max)(v.map(S=>S.label?.length))??0)*p,T=Math.min(v.length*i,h);return s.createElement(l.t7,{className:D.menu,height:T,width:A,"aria-label":"Select options menu",itemCount:E.length,itemSize:i,initialScrollOffset:M},({index:S,style:U})=>s.createElement("div",{style:{...U,overflow:"hidden"}},E[S]))};g.displayName="VirtualizedSelectMenu";const y=({children:E,data:h,innerProps:v,innerRef:C,isFocused:m,isSelected:D,renderOptionLabel:P})=>{const b=(0,d.l4)(),M=(0,a.D)(b),x=h.icon?(0,f.iJ)(h.icon):void 0;return s.createElement("div",{ref:C,className:(0,t.cx)(M.option,m&&M.optionFocused,D&&M.optionSelected,h.isDisabled&&M.optionDisabled),...v,"aria-label":"Select option",title:h.title},x&&s.createElement(c.J,{name:x,className:M.optionIcon}),h.imgUrl&&s.createElement("img",{className:M.optionImage,src:h.imgUrl,alt:h.label||h.value}),s.createElement("div",{className:M.optionBody},s.createElement("span",null,P?P(h):E),h.description&&s.createElement("div",{className:M.optionDescription},h.description),h.component&&s.createElement(h.component,null)))};y.displayName="SelectMenuOptions"},874:(Y,O,e)=>{"use strict";e.d(O,{n:()=>r});var t=e(9892),n=e(66111),o=e(7804),s=e(72648),l=e(39904);const f=(0,o.B)(c=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${c.colors.background.secondary};

      &:hover {
        color: ${c.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class d extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(a=>({expanded:!a.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:a}=this.props.selectProps.value;a&&this.props.options.some(u=>u.value===a)&&this.setState({expanded:!0})}}componentDidUpdate(a){a.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:a,label:u,theme:i}=this.props,{expanded:p}=this.state,g=f(i);return n.createElement("div",null,n.createElement("div",{className:g.header,onClick:this.onToggleChildren},n.createElement("span",{className:g.label},u),n.createElement(l.J,{className:g.icon,name:p?"angle-up":"angle-down"})," "),p&&a)}}const r=(0,s.HE)(d)},24901:(Y,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(9892),n=e(66111),o=e(44800),s=e(84559),l=e(72648);function f(g,y={}){const{duration:E=250,delay:h=250}=y,[v,C]=(0,n.useState)(g),m=(0,n.useRef)();return(0,n.useEffect)(()=>{let D;if(g)D=setTimeout(()=>{m.current=new Date,C(g)},h);else{const P=m.current?Date.now()-m.current.valueOf():0,b=()=>{m.current=void 0,C(g)};P>=E?b():D=setTimeout(b,E-P)}return()=>{D&&(clearTimeout(D),D=void 0)}},[g,E,h]),v}var d=e(39904),r=e(67487),c=e(19801),a=e(41200);const u=g=>({singleValue:t.css`
      label: singleValue;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
      grid-area: 1 / 1 / 2 / 3;
    `,spinnerWrapper:t.css`
      width: 16px;
      height: 16px;
      display: inline-block;
      margin-right: 10px;
      position: relative;
      vertical-align: middle;
      overflow: hidden;
    `,spinnerIcon:t.css`
      width: 100%;
      height: 100%;
      position: absolute;
    `,optionIcon:t.css`
      margin-right: ${g.spacing(1)};
      color: ${g.colors.text.secondary};
    `,disabled:t.css`
      color: ${g.colors.text.disabled};
    `,isOpen:t.css`
      color: ${g.colors.text.disabled};
    `}),i=g=>{const{children:y,data:E,isDisabled:h}=g,v=(0,l.wW)(u),C=f(E.loading||!1,{delay:250,duration:750}),m=E.icon?(0,s.iJ)(E.icon):void 0;return n.createElement(o.c.SingleValue,{...g,className:(0,t.cx)(v.singleValue,h&&v.disabled,g.selectProps.menuIsOpen&&v.isOpen)},E.imgUrl?n.createElement(p,{loading:C,imgUrl:E.imgUrl,styles:v,alt:E.label??E.value}):n.createElement(n.Fragment,null,n.createElement(a.R,{horizontal:!0,size:16,visible:C,duration:150},n.createElement("div",{className:v.spinnerWrapper},n.createElement(r.$,{className:v.spinnerIcon,inline:!0}))),m&&n.createElement(d.J,{name:m,role:"img",className:v.optionIcon})),!E.hideText&&y)},p=g=>n.createElement("div",{className:g.styles.spinnerWrapper},n.createElement(c.n,{duration:150,visible:g.loading},n.createElement(r.$,{className:g.styles.spinnerIcon,inline:!0})),n.createElement(c.n,{duration:150,visible:!g.loading},n.createElement("img",{className:g.styles.spinnerIcon,src:g.imgUrl,alt:g.alt})))},27501:(Y,O,e)=>{"use strict";e.d(O,{D:()=>o});var t=e(9892),n=e(7804);const o=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(Y,O,e)=>{"use strict";e.d(O,{O:()=>o,Z:()=>n});var t=e(66111);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(l){return{...l,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:l})=>({maxHeight:l}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:l=>({...l,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function o(s,l){return(0,t.useMemo)(()=>({...n(s),menuPortal:f=>({...f,zIndex:s.zIndex.portal}),menu:({top:f,bottom:d,position:r})=>({top:f,bottom:d,position:r,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:l?s.spacing(l):"100%",display:l==="auto"?"inline-flex":"flex"}),option:(f,d)=>({...f,opacity:d.isDisabled?.5:1})}),[s,l])}},60857:()=>{"use strict"},41490:(Y,O,e)=>{"use strict";e.d(O,{F:()=>p});var t=e(82897),n=e.n(t),o=e(66111),s=e(91017),l=e(59980),f=e(15402),d=e(24434),r=e(53704),c=e(71735),a=e(79086),u=e(5562);function i(g){return{label:g,value:stringToMs(g)}}class p extends o.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,r.w)(y=>u.dP.isLive(y.interval)?(0,l.of)({}):y.loading?f.C:(0,d.F)((0,a.e0)(y.interval))),(0,c.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){u.dP.isLive(y.interval)&&u.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},50954:(Y,O,e)=>{"use strict";e.d(O,{PR:()=>h,ZH:()=>u,rD:()=>p});var t=e(82897),n=e.n(t),o=e(33750),s=e(82229),l=e(69098),f=e(2576),d=e(53768),r=e(76095),c=e(92103);const a=["reduceOptions","orientation"];function u(v,C,m){let D=v.options;if(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},C==="singlestat"&&m.angular)return i(v,m);for(const P of a)m.hasOwnProperty(P)&&(D[P]=(0,t.cloneDeep)(m[P]));return D}function i(v,C){const m=C.angular,D=o.TB.getIfExists(m.valueName),P={reduceOptions:{calcs:[D?D.id:o.gz.mean]},orientation:s.wm.Horizontal},b={};if(m.format&&(b.unit=m.format),m.tableColumn&&(P.reduceOptions.fields=`/^${m.tableColumn}$/`),m.nullPointMode&&(b.nullValueMode=m.nullPointMode),m.nullText&&(b.noValue=m.nullText),(m.decimals||m.decimals===0)&&(b.decimals=m.decimals),m.thresholds&&m.colors){const x=m.thresholds.split(",").map(T=>Number(T.trim())),A=[];for(const T of m.colors){const S=A.length-1;S>=0?A.push({value:x[S],color:T}):A.push({value:-1/0,color:T})}b.thresholds={mode:l.H.Absolute,steps:A}}const M=(0,f.Jb)(m,b.thresholds);return M&&M.length&&(b.mappings=M),m.gauge&&m.gauge.show&&(b.min=m.gauge.minValue,b.max=m.gauge.maxValue),v.fieldConfig.defaults=b,P}function p(v){if(!v.options)return{};const C=parseFloat(v.pluginVersion||"6.1");let m=v.options;C<6.2&&(m=y(m)),C<6.3&&(m=g(m));const{fieldOptions:D}=m;if(C<6.6&&D){if(D&&D.override){const{override:M,...x}=m.fieldOptions;m={...m,fieldOptions:{...x,overrides:[]}}}let P=D?.defaults?.thresholds;P?delete D.defaults.thresholds:(P=D?.thresholds,delete D.thresholds),P&&(D.defaults.thresholds={mode:l.H.Absolute,steps:P});const{defaults:b}=D;b.color&&typeof b.color=="string"&&(b.color={mode:d.S.Fixed,fixedColor:b.color}),(0,r.gb)(b)}if(C<7&&(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},v.fieldConfig={defaults:D&&D.defaults?{...v.fieldConfig.defaults,...D.defaults}:v.fieldConfig.defaults,overrides:D&&D.overrides?[...v.fieldConfig.overrides,...D.overrides]:v.fieldConfig.overrides},D&&(m.reduceOptions={values:D.values,limit:D.limit,calcs:D.calcs}),delete m.fieldOptions),C<7.1){const P=v.fieldConfig.defaults.title;P!=null&&(v.fieldConfig.defaults.displayName=P,delete v.fieldConfig.defaults.title)}if(C<8){const P=v.fieldConfig?.defaults;let b=P?.unit;b==="percent"?((0,t.isNumber)(P.min)||(P.min=0),(0,t.isNumber)(P.max)||(P.max=100)):b==="percentunit"&&((0,t.isNumber)(P.min)||(P.min=0),(0,t.isNumber)(P.max)||(P.max=1))}return m}function g(v){const{fieldOptions:C}=v;if(!C)return v;const{mappings:m,...D}=v.fieldOptions;let P;return v.thresholds&&(P={mode:l.H.Absolute,steps:E(v.thresholds)}),{...v,fieldOptions:{...D,defaults:{...C.defaults,mappings:m,thresholds:P}}}}function y(v){const{valueOptions:C}=v;if(!C)return v;const m={},D={};if(m.mappings=v.valueMappings,m.thresholds=v.thresholds,m.defaults=D,D.unit=C.unit,D.decimals=C.decimals,C.stat){const b=o.TB.get(C.stat);b&&(m.calcs=[b.id])}D.min=v.minValue,D.max=v.maxValue;const P={...v,fieldOptions:m};return(0,t.omit)(P,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function E(v){if(!v||!v.length)return;const C=v.map(m=>({value:m.value===null?-1/0:m.value,color:m.color}));return(0,c.bP)(C),C[0].value=-1/0,C}function h(v){return(0,f.Jb)(v)}},70161:(Y,O,e)=>{"use strict";e.d(O,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(50954)},97759:(Y,O,e)=>{"use strict";e.d(O,{U:()=>u});var t=e(9892),n=e(65788),o=e(74560),s=e(66111),l=e(72648),f=e(89188);const d=i=>{const{value:p,children:g,visible:y,placement:E,tipFormatter:h,...v}=i,C=(0,s.useRef)(),m=(0,s.useRef)(null),D=(0,l.wW)(r);function P(){m.current!==null&&cancelAnimationFrame(m.current)}function b(){m.current=requestAnimationFrame(()=>{C.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?b():P(),P),[p,y]),s.createElement(f.Z,{overlayClassName:D.tooltip,placement:E,overlay:h??p,overlayInnerStyle:{minHeight:"auto"},ref:C,visible:y,...v},g)},r=i=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:i.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:i.zIndex.tooltip})}),c=d;var a=e(29571);const u=({min:i,max:p,onChange:g,onAfterChange:y,orientation:E="horizontal",reverse:h,step:v,formatTooltipResult:C,value:m,tooltipAlwaysVisible:D=!0})=>{const P=(0,s.useCallback)(S=>{g?.(typeof S=="number"?[S,S]:S)},[g]),b=(0,s.useCallback)(S=>{y?.(typeof S=="number"?[S,S]:S)},[y]),M=E==="horizontal",x=(0,l.l4)(),A=(0,a.W)(x,M),T=(S,U)=>s.createElement(c,{value:U.value,visible:D||U.dragging,tipFormatter:C?()=>C(U.value):void 0,placement:M?"top":"right"},S);return s.createElement("div",{className:(0,t.cx)(A.container,A.slider)},s.createElement(n.Global,{styles:A.tooltip}),s.createElement(o.Z,{min:i,max:p,step:v,defaultValue:m,range:!0,onChange:P,onAfterChange:b,vertical:!M,reverse:h,handleRender:T}))};u.displayName="RangeSlider"},90330:(Y,O,e)=>{"use strict";e.d(O,{i:()=>r});var t=e(9892),n=e(65788),o=e(74560),s=e(66111),l=e(72648),f=e(46967),d=e(29571);const r=({min:c,max:a,onChange:u,onAfterChange:i,orientation:p="horizontal",reverse:g,step:y,value:E,ariaLabelForHandle:h,marks:v,included:C})=>{const m=p==="horizontal",D=(0,l.l4)(),P=(0,d.W)(D,m,Boolean(v)),b=o.Z,[M,x]=(0,s.useState)(E??c),A=(0,s.useCallback)(B=>{const K=typeof B=="number"?B:B[0];x(K),u?.(K)},[x,u]),T=(0,s.useCallback)(B=>{let K=+B.target.value;Number.isNaN(K)&&(K=0),x(K),u&&u(K),i&&i(K)},[u,i]),S=(0,s.useCallback)(B=>{const K=+B.target.value;K>a?x(a):K<c&&x(c)},[a,c]),U=(0,s.useCallback)(B=>{const K=typeof B=="number"?B:B[0];i?.(K)},[i]),R=m?[]:[P.sliderInputVertical],F=m?[]:[P.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(P.container,P.slider)},s.createElement(n.Global,{styles:P.tooltip}),s.createElement("div",{className:(0,t.cx)(P.sliderInput,...R)},s.createElement(b,{min:c,max:a,step:y,defaultValue:E,value:M,onChange:A,onAfterChange:U,vertical:!m,reverse:g,ariaLabelForHandle:h,marks:v,included:C}),s.createElement(f.I,{type:"text",className:(0,t.cx)(P.sliderInputField,...F),value:M,onChange:T,onBlur:S,min:c,max:a})))};r.displayName="Slider"},29571:(Y,O,e)=>{"use strict";e.d(O,{W:()=>s});var t=e(9892),n=e(65788),o=e(7804);const s=(0,o.B)((l,f,d=!1)=>{const{spacing:r}=l,c=l.colors.border.strong,a=l.colors.primary.main,u=l.colors.primary.main,p=`box-shadow: 0px 0px 0px 6px ${l.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${f?"inherit":`${r(1,3,1,1)}`};
      padding-bottom: ${f&&d?l.spacing(1):"inherit"};
      height: ${f?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${l.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${l.colors.text.disabled};
        font-size: ${l.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${l.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${u};
        box-shadow: ${l.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${p};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${l.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${l.colors.text.primary};
        border-color: ${l.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${a};
      }
      .rc-slider-rail {
        background-color: ${c};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${l.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${l.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${l.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${l.spacing(3)} 0;
      order: 1;
    `}})},67307:(Y,O,e)=>{"use strict";e.d(O,{b:()=>y});var t=e(82897),n=e(66111),o=e(96905),s=e(99098),l=e(72990),f=e(40538),d=e(3200),r=e(13347),c=e(2445),a=e(17587),u=e(83881),i=e(45778);function p(E,h){const v=E.y.values.length,C={...E.y.config,...h},m=E.x??{name:"",values:[...Array(v).keys()],type:s.fS.number,config:{}};let D={refId:"sparkline",fields:[m,{...E.y,config:C}],length:v};return(0,a.lP)(m.values)||(D=(0,u.aK)(D,0)),(0,i.w)({frame:D})}const g={drawStyle:f.l8.Line,showPoints:f.Jp.Auto,axisPlacement:f.LB.Hidden,pointSize:2};class y extends n.PureComponent{constructor(h){super(h);const v=p(h.sparkline,h.config);this.state={data:(0,c.Bj)(v,(0,c.i7)(v)),alignedDataFrame:v,configBuilder:this.prepareConfig(v)}}static getDerivedStateFromProps(h,v){const C=p(h.sparkline,h.config);return C?{...v,data:(0,c.Bj)(C,(0,c.i7)(C)),alignedDataFrame:C}:{...v}}componentDidUpdate(h,v){const{alignedDataFrame:C}=this.state;if(!C)return;let m=!1;h.sparkline!==this.props.sparkline?m=!(0,o.Ch)(this.state.alignedDataFrame,v.alignedDataFrame):m=!(0,t.isEqual)(h.config,this.props.config),m&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(h){let{min:v,max:C}=this.state.alignedDataFrame.fields[1].state?.range;return v===C?(v===0?C=100:(v=0,C*=2),[v,C]):[Math.max(v,h.config.min??-1/0),Math.min(C,h.config.max??1/0)]}prepareConfig(h){const{theme:v}=this.props,C=new r.U;C.setCursor({show:!1,x:!1,y:!1});const m=h.fields[0];C.addScale({scaleKey:"x",orientation:f.wN.Horizontal,direction:f.bQ.Right,isTime:!1,range:()=>{const{sparkline:D}=this.props;if(D.x){if(D.timeRange&&D.x.type===s.fS.time)return[D.timeRange.from.valueOf(),D.timeRange.to.valueOf()];const P=D.x.values;return[P[0],P[P.length-1]]}return[0,D.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:v,placement:f.LB.Hidden});for(let D=0;D<h.fields.length;D++){const P=h.fields[D],b=P.config,M={...g,...b.custom};if(P===m||P.type!==s.fS.number)continue;const x=b.unit||"__fixed";C.addScale({scaleKey:x,orientation:f.wN.Vertical,direction:f.bQ.Up,range:()=>this.getYRange(P)}),C.addAxis({scaleKey:x,theme:v,placement:f.LB.Hidden});const A=(0,l.fD)(P),T=A.getCalculator(P,v)(0,0),S=M.drawStyle===f.l8.Points?f.Jp.Always:M.showPoints;C.addSeries({pxAlign:!1,scaleKey:x,theme:v,colorMode:A,thresholds:b.thresholds,drawStyle:M.drawStyle,lineColor:M.lineColor??T,lineWidth:M.lineWidth,lineInterpolation:M.lineInterpolation,showPoints:S,pointSize:M.pointSize,fillOpacity:M.fillOpacity,fillColor:M.fillColor,lineStyle:M.lineStyle,gradientMode:M.gradientMode})}return C}render(){const{data:h,configBuilder:v}=this.state,{width:C,height:m,sparkline:D}=this.props;return n.createElement(d.N,{data:h,config:v,width:C,height:m,timeRange:D.timeRange})}}},67487:(Y,O,e)=>{"use strict";e.d(O,{$:()=>f});var t=e(9892),n=e(66111),o=e(7804),s=e(39904);const l=(0,o.B)((d,r)=>({wrapper:t.css`
      font-size: ${d}px;
      ${r?t.css`
            display: inline-block;
          `:""}
    `})),f=({className:d,inline:r=!1,iconClassName:c,style:a,size:u=16})=>{const i=l(u,r);return n.createElement("div",{"data-testid":"Spinner",style:a,className:(0,t.cx)(i.wrapper,d)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",c),name:"fa fa-spinner"}))}},71294:(Y,O,e)=>{"use strict";e.d(O,{m:()=>f});var t=e(82897),n=e.n(t),o=e(66111),s=e(33750),l=e(8581);class f extends o.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:r,allowMultiple:c,defaultStat:a,onChange:u}=this.props,i=s.TB.list(r);if(i.length!==r.length){const p=i.map(y=>y.id),g=(0,t.difference)(r,p);console.warn("Unknown stats",g,r),u(i.map(y=>y.id))}!c&&r.length>1&&(console.warn("Removing extra stat",r),u([r[0]])),a&&r.length<1&&u([a])},this.onSelectionChange=r=>{const{onChange:c}=this.props;Array.isArray(r)?c(r.map(a=>a.value)):c(r&&r.value?[r.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(r){this.checkInput()}render(){const{stats:r,allowMultiple:c,defaultStat:a,placeholder:u,className:i,menuPlacement:p,width:g,inputId:y}=this.props,E=s.TB.selectOptions(r);return o.createElement(l.Ph,{value:E.current,className:i,isClearable:!a,isMulti:c,width:g,isSearchable:!0,options:E.options,placeholder:u,onChange:this.onSelectionChange,menuPlacement:p,inputId:y})}}f.defaultProps={allowMultiple:!1}},8944:(Y,O,e)=>{"use strict";e.d(O,{r:()=>c,x:()=>a});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(55024),f=e(72648),d=e(7804),r=e(85419);const c=s.forwardRef(({value:i,checked:p,onChange:g,id:y,label:E,disabled:h,...v},C)=>{p&&(0,l.d)("Switch","checked prop","value");const m=(0,f.l4)(),D=u(m),P=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(D.switch)},s.createElement("input",{type:"checkbox",disabled:h,checked:i,onChange:b=>{!h&&g?.(b)},id:P.current,...v,ref:C}),s.createElement("label",{htmlFor:P.current,"aria-label":E??"Toggle switch"}))});c.displayName="Switch";const a=s.forwardRef(({transparent:i,className:p,showLabel:g,label:y,value:E,id:h,...v},C)=>{const m=(0,f.l4)(),D=u(m,i);return s.createElement("div",{className:(0,t.cx)(D.inlineContainer,p,v.disabled&&D.disabled)},g&&s.createElement("label",{htmlFor:h,className:(0,t.cx)(D.inlineLabel,E&&D.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(c,{...v,id:h,label:y,ref:C,value:E}))});a.displayName="Switch";const u=(0,d.B)((i,p)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${i.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${i.colors.primary.main};
          border-color: ${i.colors.primary.main};

          &:hover {
            background: ${i.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${i.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,r.getFocusStyles)(i)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,r.getMouseFocusStyles)(i)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: ${i.shape.radius.pill};
        background: ${i.components.input.background};
        border: 1px solid ${i.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${i.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: ${i.shape.radius.circle};
          background: ${i.colors.text.secondary};
          box-shadow: ${i.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${i.spacing(0,1)};
      height: ${i.spacing(i.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${p?"transparent":i.components.input.background};
      border: 1px solid ${p?"transparent":i.components.input.borderColor};
      border-radius: ${i.shape.borderRadius()};

      &:hover {
        border: 1px solid ${p?"transparent":i.components.input.borderHover};

        .inline-switch-label {
          color: ${i.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${i.spacing(1)};
      color: ${i.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${i.colors.text.primary};
    `}))},18607:(Y,O,e)=>{"use strict";e.d(O,{W:()=>u});var t=e(9892),n=e(66111),o=e(72142),s=e(79841),l=e(8180),f=e(68226),d=e(94893),r=e(7804),c=e(72648);const a=(0,r.B)(i=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${i.spacing(2)};
      background-color: ${i.colors.background.primary};
      height: calc(100% - ${i.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${i.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${i.spacing(1)};
      border-color: ${i.colors.border.weak};
      ul {
        margin-left: ${i.spacing(2)};
      }
    `}));function u(i){const[p,g]=(0,n.useState)(i.tabs.some(D=>D.value===i.defaultTab)?i.defaultTab:i.tabs?.[0].value),y=D=>{g(D.value)},{tabs:E,onClose:h,closeIconTooltip:v}=i,C=(0,c.l4)(),m=a(C);return n.createElement("div",{className:m.container},n.createElement(o.J,{className:m.tabs},E.map(D=>n.createElement(s.O,{key:D.value,label:D.label,active:D.value===p,onChangeTab:()=>y(D),icon:D.icon})),n.createElement(l.h,{className:m.close,onClick:h,name:"times",title:v??"Close"})),n.createElement(f.$,{autoHeightMin:"100%"},n.createElement(d.I,{className:m.tabContent},E.find(D=>D.value===p)?.content)))}},89361:(Y,O,e)=>{"use strict";e.d(O,{i:()=>d,c:()=>c});var t=e(66111),n=e(33750),o=e(68183),s=e(9892);const l=a=>{const u=s.css`
    width: 100%;
    list-style: none;
  `,i=s.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return a.value&&!Array.isArray(a.value)?t.createElement("span",null,a.value):a.value&&Array.isArray(a.value)&&a.value.length>0?t.createElement("ul",{className:u},a.value.map((p,g)=>{const y=Object.keys(p)[0];return t.createElement("li",{className:i,key:g},t.createElement("span",null,y),t.createElement("span",null,p[y]))})):f},f=()=>t.createElement("span",null,"\xA0");function d(a){const{totalColumnsWidth:u,footerGroups:i,isPaginationVisible:p,tableStyles:g}=a,y=o.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:p?"relative":"absolute",width:u?`${u}px`:"100%",bottom:"0px"}},i.map(E=>{const{key:h,...v}=E.getFooterGroupProps();return t.createElement("div",{className:g.tfoot,...v,key:h,"data-testid":y.footer},E.headers.map(C=>r(C,g)))}))}function r(a,u){const i=a.getHeaderProps();return i?(i.style=i.style??{},i.style.position="absolute",i.style.justifyContent=a.justifyContent,t.createElement("div",{className:u.headerCell,...i},a.render("Footer"))):null}function c(a,u,i){if(u===void 0)return f;if(i){if(u[a]===void 0)return f;const p=n.TB.get(n.gz.count).name;return l({value:[{[p]:String(u[a])}]})}return l({value:u[a]})}},24115:(Y,O,e)=>{"use strict";e.d(O,{A:()=>c,U:()=>r});var t=e(66111),n=e(99601),o=e(99098),s=e(83881),l=e(40538),f=e(67307),d=e(48010);const r={drawStyle:l.l8.Line,lineInterpolation:l.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:l.FI.Hue,pointSize:2,barAlignment:l.pu.Center,showPoints:l.Jp.Never},c=i=>{const{field:p,innerWidth:g,tableStyles:y,cell:E,cellProps:h,timeRange:v}=i,C=a(E.value);if(!C)return t.createElement("div",{...h,className:y.cellContainer},"no data");const m=(0,n.dz)(C.y);C.y.config.min=m.min,C.y.config.max=m.max,C.y.state={range:m},C.timeRange=v;const D=u(p),P={color:p.config.color,custom:{...r,...D}};return t.createElement("div",{...h,className:y.cellContainer},t.createElement(f.b,{width:g,height:y.cellHeightInner,sparkline:C,config:P,theme:y.theme}))};function a(i){if(Array.isArray(i))return{y:{name:"test",type:o.fS.number,values:i,config:{}}};if((0,s.aY)(i)){const p=i.fields.find(y=>y.type===o.fS.time),g=i.fields.find(y=>y.type===o.fS.number);if(p&&g)return{x:p,y:g}}}function u(i){let p=(0,d.S_)(i);if(p.type===l.h2.Auto&&(p={...p,type:l.h2.Sparkline}),p.type===l.h2.Sparkline)return p;throw new Error(`Excpected options type ${l.h2.Sparkline} but got ${p.type}`)}},88144:(Y,O,e)=>{"use strict";e.d(O,{i:()=>ie});var t=e(66111),n=e(9827),o=e(32436),s=e(33750),l=e(40538),f=e(72648),d=e(68226),r=e(78889),c=e(89361),a=e(68183),u=e(50622),i=e(39904),p=e(9892),g=e(56921),y=e(94437),E=e(52081),h=e(64353),v=e(8180),C=e(31403),m=e(14747),D=e(58255),P=e(7804);const b=28,M=b*5,x=({options:j,values:de,caseSensitive:ce,onChange:ee})=>{const le=(0,f.l4)(),q=A(le),[fe,Z]=(0,t.useState)(""),ne=(0,t.useMemo)(()=>new RegExp(fe,ce?void 0:"i"),[fe,ce]),re=(0,t.useMemo)(()=>j.filter(gt=>gt.label===void 0?!1:ne.test(gt.label)),[j,ne]),ve=le.spacing.gridSize,me=(0,t.useMemo)(()=>Math.min(re.length*b,M)+ve,[ve,re.length]),Ie=(0,t.useCallback)(gt=>{Z(gt)},[Z]),Ge=(0,t.useCallback)(gt=>Te=>{const Le=Te.currentTarget.checked?de.concat(gt):de.filter(Ye=>Ye.value!==gt.value);ee(Le)},[ee,de]);return t.createElement(E.wc,{spacing:"md"},t.createElement(m.H,{placeholder:"Filter values",onChange:Ie,value:fe}),!re.length&&t.createElement(h._,null,"No values"),re.length&&t.createElement(o.t7,{height:me,itemCount:re.length,itemSize:b,width:"100%",className:q.filterList},({index:gt,style:Te})=>{const Le=re[gt],{value:Ye,label:it}=Le,ht=de.find(Re=>Re.value===Ye)!==void 0;return t.createElement("div",{className:q.filterListRow,style:Te,title:it},t.createElement(D.X,{value:ht,label:it,onChange:Ge(Le)}))}))},A=(0,P.B)(j=>({filterList:p.css`
    label: filterList;
  `,filterListRow:p.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${j.spacing(.5)};

    :hover {
      background-color: ${j.colors.action.hover};
    }
  `}));var T=e(48010);const S=({column:{preFilteredRows:j,filterValue:de,setFilter:ce},onClose:ee,field:le})=>{const q=(0,f.l4)(),fe=(0,t.useMemo)(()=>(0,T.AF)(j,le),[j,le]),Z=(0,t.useMemo)(()=>(0,T.mP)(fe),[fe]),ne=(0,t.useMemo)(()=>(0,T.n0)(Z,de),[Z,de]),[re,ve]=(0,t.useState)(ne),[me,Ie]=(0,t.useState)(!1),Ge=(0,t.useCallback)(it=>ee(),[ee]),gt=(0,t.useCallback)(it=>{const ht=re.length?re:void 0;ce(ht),ee()},[ce,re,ee]),Te=(0,t.useCallback)(it=>{ce(void 0),ee()},[ce,ee]),Le=(0,t.useMemo)(()=>de!==void 0,[de]),Ye=(0,f.wW)(U);return t.createElement(y.L,{onClick:Ge,useCapture:!0},t.createElement("div",{className:(0,p.cx)(Ye.filterContainer),onClick:R},t.createElement(E.wc,{spacing:"lg"},t.createElement(E.wc,{spacing:"xs"},t.createElement(E.Lh,{justify:"space-between",align:"center"},t.createElement(h._,{className:Ye.label},"Filter by values:"),t.createElement(v.h,{name:"text-fields",tooltip:"Match case",style:{color:me?q.colors.text.link:q.colors.text.disabled},onClick:()=>{Ie(it=>!it)}})),t.createElement("div",{className:(0,p.cx)(Ye.listDivider)}),t.createElement(x,{onChange:ve,values:re,options:Z,caseSensitive:me})),t.createElement(E.Lh,{spacing:"lg"},t.createElement(E.Lh,null,t.createElement(C.zx,{size:"sm",onClick:gt},"Ok"),t.createElement(C.zx,{size:"sm",variant:"secondary",onClick:Ge},"Cancel")),Le&&t.createElement(E.Lh,null,t.createElement(C.zx,{fill:"text",size:"sm",onClick:Te},"Clear filter"))))))},U=j=>({filterContainer:p.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${j.colors.background.primary};
    border: 1px solid ${j.colors.border.weak};
    padding: ${j.spacing(2)};
    margin: ${j.spacing(1)} 0;
    box-shadow: ${j.shadows.z3};
    border-radius: ${j.shape.radius.default};
  `,listDivider:p.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${j.colors.border.medium};
    padding: ${j.spacing(.5,2)};
  `,label:p.css`
    margin-bottom: 0;
  `}),R=j=>{j.stopPropagation()},F=({column:j,field:de,tableStyles:ce})=>{const ee=(0,t.useRef)(null),[le,q]=(0,t.useState)(!1),fe=(0,f.wW)(B),Z=(0,t.useMemo)(()=>Boolean(j.filterValue),[j.filterValue]),ne=(0,t.useCallback)(()=>q(!0),[q]),re=(0,t.useCallback)(()=>q(!1),[q]);return!de||!de.config.custom?.filterable?null:t.createElement("button",{className:(0,p.cx)(ce.headerFilter,Z?fe.filterIconEnabled:fe.filterIconDisabled),ref:ee,type:"button",onClick:ne},t.createElement(i.J,{name:"filter"}),le&&ee.current&&t.createElement(g.J,{content:t.createElement(S,{column:j,tableStyles:ce,field:de,onClose:re}),placement:"bottom-start",referenceElement:ee.current,show:!0}))},B=j=>({filterIconEnabled:p.css`
    label: filterIconEnabled;
    color: ${j.colors.primary.text};
  `,filterIconDisabled:p.css`
    label: filterIconDisabled;
    color: ${j.colors.text.disabled};
  `}),K=j=>{const{headerGroups:de,showTypeIcons:ce,tableStyles:ee}=j,le=a.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:ee.headerRow},de.map(q=>{const{key:fe,...Z}=q.getHeaderGroupProps();return t.createElement("div",{className:ee.thead,...Z,key:fe,"aria-label":le.header,role:"row"},q.headers.map((ne,re)=>L(ne,ee,ce)))}))};function L(j,de,ce){const ee=j.getHeaderProps(),le=j.field??null;return j.canResize&&(ee.style.userSelect=j.isResizing?"none":"auto"),ee.style.position="absolute",ee.style.justifyContent=j.justifyContent,t.createElement("div",{className:de.headerCell,...ee,role:"columnheader"},j.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...j.getSortByToggleProps(),className:de.headerCellLabel},ce&&t.createElement(i.J,{name:(0,u.e7)(le),title:le?.type,size:"sm",className:de.typeIcon}),t.createElement("div",null,j.render("Header")),j.isSorted&&(j.isSortedDesc?t.createElement(i.J,{size:"lg",name:"arrow-down",className:de.sortIcon}):t.createElement(i.J,{name:"arrow-up",size:"lg",className:de.sortIcon}))),j.canFilter&&t.createElement(F,{column:j,tableStyles:de,field:le})),!j.canSort&&j.render("Header"),!j.canSort&&j.canFilter&&t.createElement(F,{column:j,tableStyles:de,field:le}),j.canResize&&t.createElement("div",{...j.getResizerProps(),className:de.resizeHandle}))}var N=e(35316);function z(j,de){(0,t.useEffect)(()=>{const ce=j.current?.querySelector(".track-vertical"),ee=de.current?.firstChild;ee&&ce&&(ce?.remove(),ee.querySelector(":scope > .track-vertical")?.remove(),ee.append(ce))})}function G(j,de,ce){(0,t.useEffect)(()=>{if(j.lastExpandedIndex!==void 0){de.current?.resetAfterIndex(Math.max(j.lastExpandedIndex-1,0));return}},[j.lastExpandedIndex,j.toggleRowExpandedCounter,de,ce])}var I=e(30471);function V({onColumnResize:j,onSortByChange:de,data:ce}){return(0,t.useCallback)((ee,le)=>{switch(le.type){case"columnDoneResizing":if(j){const fe=ee.columnResizing.headerIdWidths[0][0],Z=parseInt(fe,10),ne=Math.round(ee.columnResizing.columnWidths[fe]),re=ce.fields[Z];if(!re)return ee;const ve=(0,I.CZ)(re,ce);j(ve,ne)}case"toggleSortBy":if(de){const q=[];for(const fe of ee.sortBy){const Z=ce.fields[parseInt(fe.id,10)];Z&&q.push({displayName:(0,I.CZ)(Z,ce),desc:fe.desc})}de(q)}case"toggleRowExpanded":if(le.id)return{...ee,lastExpandedIndex:parseInt(le.id,10),toggleRowExpandedCounter:ee.toggleRowExpandedCounter+1}}return ee},[ce,j,de])}function H(j,de){const ce={toggleRowExpandedCounter:0};if(j){ce.sortBy=[];for(const ee of j)for(const le of de)le.Header===ee.displayName&&ce.sortBy.push({id:le.id,desc:ee.desc})}return ce}var Q=e(12245);const oe=150,se=36,ie=(0,t.memo)(j=>{const{ariaLabel:de,data:ce,subData:ee,height:le,onCellFilterAdded:q,width:fe,columnMinWidth:Z=oe,noHeader:ne,resizable:re=!0,initialSortBy:ve,footerOptions:me,showTypeIcons:Ie,footerValues:Ge,enablePagination:gt,cellHeight:Te=l.Ss.Sm,timeRange:Le}=j,Ye=(0,t.useRef)(null),it=(0,t.useRef)(null),ht=(0,t.useRef)(null),Re=(0,f.l4)(),ye=(0,Q.p)(Re,Te),Ce=ne?0:ye.rowHeight,[be,We]=(0,t.useState)(Ge),Qe=(0,t.useMemo)(()=>{const xt=se;let Kt=0;if(!be)return 0;for(const Jt of be)Array.isArray(Jt)&&Jt.length>Kt&&(Kt=Jt.length);return Kt>1?xt*Kt:xt},[be]),mt=(0,t.useMemo)(()=>ce.fields.length?Array(ce.length).fill(0):[],[ce]),vt=Boolean(me?.countRows&&me.reducer&&me.reducer.length&&me.reducer[0]===s.gz.count),rt=(0,t.useMemo)(()=>(0,T.Pu)(ce,fe,Z,!!ee?.length,be,vt),[ce,fe,Z,be,ee,vt]),Ot=V(j),Et=(0,t.useMemo)(()=>({columns:rt,data:mt,disableResizing:!re,stateReducer:Ot,autoResetPage:!1,initialState:H(ve,rt),autoResetFilters:!1,sortTypes:{number:T.QT,"alphanumeric-insensitive":T.nl}}),[ve,rt,mt,re,Ot]),{getTableProps:Mt,headerGroups:ue,footerGroups:De,rows:Ne,prepareRow:tt,totalColumnsWidth:et,page:Ue,state:Fe,gotoPage:Ee,setPageSize:Me,pageOptions:He}=(0,n.useTable)(Et,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),Ze=Fe;(0,t.useEffect)(()=>{me||We(Ge)},[Ge,me]),(0,t.useEffect)(()=>{if(!me)return;if(!me.show){We(void 0);return}if(vt){const Kt=[];Kt[0]=ue[0]?.headers[0]?.filteredRows.length.toString()??ce.length.toString(),We(Kt);return}const xt=(0,T.jB)(ue[0].headers,(0,T.KF)(Ne),me,Re);We(xt)},[me,Re,Fe.filters,ce]);let lt=le-(Ce+Qe);gt&&(lt-=ye.cellHeight);const bt=Math.round(lt/ye.rowHeight)-1;(0,t.useEffect)(()=>{bt<=0||Me(bt)},[bt,Me]),G(Ze,Ye,ce),z(ht,it);const Pt=(0,t.useCallback)(xt=>{if(Fe.expanded[xt]){const Kt=ee?.find(Jt=>Jt.meta?.custom?.parentRowIndex===xt);if(Kt){const Jt=!!Kt.meta?.custom?.noHeader,On={height:ye.rowHeight*(Kt.length+(Jt?0:1)),background:Re.colors.emphasize(Re.colors.background.primary,.015),paddingLeft:T.bc,position:"absolute",bottom:0};return t.createElement("div",{style:On},t.createElement(ie,{data:Kt,width:fe-T.bc,height:ye.rowHeight*(Kt.length+1),noHeader:Jt}))}}return null},[Fe.expanded,ee,ye.rowHeight,Re.colors,fe]),Je=(0,t.useCallback)(({index:xt,style:Kt})=>{let Jt=Ne[xt];return gt&&(Jt=Ue[xt]),tt(Jt),t.createElement("div",{...Jt.getRowProps({style:Kt}),className:ye.row},Pt(xt),Jt.cells.map((On,Nn)=>t.createElement(N.p,{key:Nn,tableStyles:ye,cell:On,onCellFilterAdded:q,columnIndex:Nn,columnCount:Jt.cells.length,timeRange:Le})))},[q,Ue,gt,tt,Ne,ye,Pt,Le]),Dt=(0,t.useCallback)(xt=>{Ee(xt-1)},[Ee]),Ve=gt?Ue.length:Ne.length;let Xe=null;if(gt){const xt=Fe.pageIndex*Fe.pageSize+1;let Kt=xt+Fe.pageSize-1;const Jt=fe<550;Kt>ce.length&&(Kt=ce.length),Xe=t.createElement("div",{className:ye.paginationWrapper},t.createElement(r.t,{currentPage:Fe.pageIndex+1,numberOfPages:He.length,showSmallVersion:Jt,onNavigate:Dt}),Jt?null:t.createElement("div",{className:ye.paginationSummary},xt," - ",Kt," of ",ce.length," rows"))}const st=xt=>{if(Fe.expanded[xt]){const Kt=ee?.find(Jt=>Jt.meta?.custom?.parentRowIndex===xt);if(Kt){const Jt=!!Kt.meta?.custom?.noHeader;return ye.rowHeight*(Kt.length+1+(Jt?0:1))}}return ye.rowHeight},ut=xt=>{const{scrollTop:Kt}=xt.target;Ye.current!==null&&Ye.current.scrollTo(Kt)};return t.createElement("div",{...Mt(),className:ye.table,"aria-label":de,role:"table",ref:it,style:{width:fe,height:le}},t.createElement(d.$,{hideVerticalTrack:!0},t.createElement("div",{className:ye.tableContentWrapper(et)},!ne&&t.createElement(K,{headerGroups:ue,showTypeIcons:Ie,tableStyles:ye}),Ve>0?t.createElement("div",{ref:ht},t.createElement(d.$,{onScroll:ut,hideHorizontalTrack:!0},t.createElement(o.S_,{key:ye.rowHeight,height:lt,itemCount:Ve,itemSize:st,width:"100%",ref:Ye,style:{overflow:void 0}},Je))):t.createElement("div",{style:{height:le-Ce},className:ye.noData},"No data"),be&&t.createElement(c.i,{isPaginationVisible:Boolean(gt),footerValues:be,footerGroups:De,totalColumnsWidth:et,tableStyles:ye}))),Xe)});ie.displayName="Table"},35316:(Y,O,e)=>{"use strict";e.d(O,{p:()=>t});const t=({cell:n,tableStyles:o,onCellFilterAdded:s,timeRange:l,userProps:f})=>{const d=n.getCellProps(),r=n.column.field;if(!r?.display)return null;d.style&&(d.style.minWidth=d.style.width,d.style.justifyContent=n.column.justifyContent);let c=(n.column.width??24)-o.cellPadding*2;return n.render("Cell",{field:r,tableStyles:o,onCellFilterAdded:s,cellProps:d,innerWidth:c,timeRange:l,userProps:f})}},12245:(Y,O,e)=>{"use strict";e.d(O,{p:()=>n});var t=e(9892);function n(s,l){const f=s.colors.border.weak,d=s.colors.primary.border,r=6,c=o(s,l,r),a=c+2,u=28,i=(p,g,y)=>{const E={margin:s.spacing(0,-.5,0,.5)},h={position:"absolute",top:0,right:0,margin:"auto"},v={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${s.colors.primary.main}`,background:g??s.components.table.rowHoverBackground,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${r}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${a-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${f};

      ${p?`color: ${p};`:""};
      ${g?`background: ${g};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&v};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?E:h}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${s.spacing(1,.5,1,.5)};
        background: ${g?"none":s.colors.emphasize(s.colors.background.primary,.03)};

        svg {
          color: ${p};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:s,cellHeight:c,buildCellContainerStyle:i,cellPadding:r,cellHeightInner:c-r*2,rowHeight:a,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${u}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${u}px;
      border-top: 1px solid ${f};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${f};
    `,headerCell:t.css`
      height: 100%;
      padding: 0 ${r}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      align-items: center;
      font-weight: ${s.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${s.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${s.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellContainer:i(void 0,void 0,!0),cellContainerNoOverflow:i(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${s.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${s.colors.text.link};
      font-weight: ${s.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${s.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${c}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationSummary:t.css`
      color: ${s.colors.text.secondary};
      font-size: ${s.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      padding: ${s.spacing(0,1,0,2)};
    `,tableContentWrapper:p=>{const g=p!==void 0?`${p}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${g};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${f};

      &:hover {
        background-color: ${s.components.table.rowHoverBackground};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${d};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: ${s.shape.radius.default};
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${s.spacing(1)};
      color: ${s.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${a}px;
      cursor: pointer;
    `}}function o(s,l,f){const d=s.typography.fontSize,r=s.typography.body.lineHeight;switch(l){case"md":return 42;case"lg":return 48;case"sm":default:return f*2+d*r}}},13580:(Y,O,e)=>{"use strict";e.d(O,{PT:()=>t,tE:()=>n});const t="=",n="!="},48010:(Y,O,e)=>{"use strict";e.d(O,{bc:()=>de,AF:()=>fe,KF:()=>Le,S_:()=>it,Pu:()=>ee,n0:()=>ve,jB:()=>gt,E4:()=>ce,q7:()=>ht,nl:()=>me,QT:()=>Ie,mP:()=>ne});var t=e(82897),n=e(58635),o=e(99098),s=e(30471),l=e(83881),f=e(19447),d=e(2703),r=e(33750),c=e(6194),a=e(40538),u=e(66111),i=e(69098),p=e(99601),g=e(82229),y=e(19670),E=e(18543);const h={mode:i.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},v=ye=>{const{field:Ce,innerWidth:be,tableStyles:We,cell:Qe,cellProps:mt,row:vt}=ye,rt=Ce.display(Qe.value),Ot=it(Ce);let Et=(0,p.xD)(Ce,!1);Et.thresholds||(Et={...Et,thresholds:h});let Mt=a.QH.Gradient,ue;Ot.type===a.h2.Gauge&&(Mt=Ot.mode??a.QH.Gradient,ue=Ot.valueDisplayMode!==void 0?Ot.valueDisplayMode:a.M8.Text);const De=()=>(0,t.isFunction)(Ce.getLinks)?Ce.getLinks({valueRowIndex:vt.index}):[],Ne=Boolean(De().length),tt=C(Ce,rt,Qe.row.index),et=Ue=>{const{openMenu:Fe,targetClassName:Ee}=Ue;return u.createElement(y.xf,{width:be,height:We.cellHeightInner,field:Et,display:Ce.display,text:{valueSize:14},value:rt,orientation:g.wm.Horizontal,theme:We.theme,alignmentFactors:tt,onClick:Fe,className:Ee,itemSpacing:1,lcdCellWidth:8,displayMode:Mt,valueDisplayMode:ue})};return u.createElement("div",{...mt,className:We.cellContainer},Ne&&u.createElement(E.V,{links:De,style:{display:"flex",width:"100%"}},Ue=>et(Ue)),!Ne&&et({}))};function C(ye,Ce,be){let We=ye.state?.alignmentFactors;if(We)return We.text.length<Ce.text.length&&(We.text=Ce.text),We;{We={...Ce};const Qe=Math.min(ye.values.length,be+1e3);for(let mt=be+1;mt<Qe;mt++)ye.display(ye.values[mt]).text.length>We.text.length&&(We.text=Ce.text);return ye.state?ye.state.alignmentFactors=We:ye.state={alignmentFactors:We},We}}var m=e(9892),D=e(28550),P=e(72648),b=e(30901),M=e(16514),x=e(31403),A=e(8180),T=e(52081),S=e(94599),U=e(35029),R=e(9405);function F({value:ye,onDismiss:Ce,mode:be}){let We=ye;if((0,t.isString)(ye))try{ye=JSON.parse(ye)}catch{}else We=JSON.stringify(ye,null," ");let Qe=We;return be==="code"&&(Qe=JSON.stringify(ye,null," ")),u.createElement(U.u,{onDismiss:Ce,isOpen:!0,title:"Inspect value"},be==="code"?u.createElement(R.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Qe&&Qe.length)>100,value:Qe,readOnly:!0}):u.createElement("pre",null,Qe),u.createElement(U.u.ButtonRow,null,u.createElement(S.m,{icon:"copy",getText:()=>Qe},"Copy to Clipboard")))}var B=e(13580);function K({field:ye,cell:Ce,previewMode:be,showFilters:We,onCellFilterAdded:Qe}){const[mt,vt]=(0,u.useState)(!1),rt=ce(ye)==="flex-end",Ot=Boolean(ye.config.custom?.inspect),Et={size:"sm",tooltipPlacement:"top"},Mt=(0,u.useCallback)(De=>{Qe&&Qe({key:ye.name,operator:B.PT,value:Ce.value})},[Ce,ye,Qe]),ue=(0,u.useCallback)(De=>{Qe&&Qe({key:ye.name,operator:B.tE,value:Ce.value})},[Ce,ye,Qe]);return u.createElement(u.Fragment,null,u.createElement("div",{className:`cellActions ${rt?"cellActionsLeft":""}`},u.createElement(T.Lh,{spacing:"xs"},Ot&&u.createElement(A.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{vt(!0)},...Et}),We&&u.createElement(A.h,{name:"search-plus",onClick:Mt,tooltip:"Filter for value",...Et}),We&&u.createElement(A.h,{name:"search-minus",onClick:ue,tooltip:"Filter out value",...Et}))),mt&&u.createElement(F,{mode:be,value:Ce.value,onDismiss:()=>{vt(!1)}}))}const L=ye=>{const{field:Ce,cell:be,tableStyles:We,row:Qe,cellProps:mt}=ye,vt=Boolean(Ce.config.custom?.inspect),rt=Ce.display(be.value);let Ot;u.isValidElement(be.value)?Ot=be.value:Ot=(0,d.zc)(rt);const Et=ye.onCellFilterAdded&&Ce.config.filterable,Mt=Et&&be.value!==void 0||vt,ue=it(Ce),De=N(We,ue,rt,vt),Ne=Boolean((0,b.i)(Ce,Qe)?.length),tt=(0,P.wW)(x._7);return u.createElement("div",{...mt,className:De},!Ne&&u.createElement("div",{className:We.cellText},Ot),Ne&&u.createElement(E.V,{links:()=>(0,b.i)(Ce,Qe)||[]},et=>et.openMenu?u.createElement("button",{className:(0,m.cx)(tt,z(We,ue,et.targetClassName)),onClick:et.openMenu},Ot):u.createElement("div",{className:z(We,ue,et.targetClassName)},Ot)),Mt&&u.createElement(K,{...ye,previewMode:"text",showFilters:Et}))};function N(ye,Ce,be,We=!1){const Qe=ye.theme.isDark?1:-.7;let mt,vt;if(Ce.type===a.h2.ColorText)mt=be.color;else if(Ce.type===a.h2.ColorBackground){const rt=Ce.mode??a.v7.Gradient;if(rt===a.v7.Basic)mt=(0,M.bM)(be.color,ye.theme.isDark),vt=(0,D.Z)(be.color).toRgbString();else if(rt===a.v7.Gradient){const Ot=(0,D.Z)(be.color).darken(10*Qe).spin(5);mt=(0,M.bM)(be.color,ye.theme.isDark),vt=`linear-gradient(120deg, ${Ot.toRgbString()}, ${be.color})`}}return mt!==void 0||vt!==void 0?ye.buildCellContainerStyle(mt,vt,!We):We?ye.cellContainerNoOverflow:ye.cellContainer}function z(ye,Ce,be){return Ce.type===a.h2.Auto?(0,m.cx)(ye.cellLink,be):(0,m.cx)(ye.cellLinkForColoredCell,be)}var G=e(89361),I=e(56257),V=e(69377);function H(ye){const{cell:Ce,tableStyles:be,cellProps:We}=ye;let Qe="";return Ce.value instanceof V.Z?Qe=new I.Z().writeGeometry(Ce.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Ce.value!=null&&(Qe=`${Ce.value}`),u.createElement("div",{...We,className:be.cellContainer},u.createElement("div",{className:be.cellText,style:{fontFamily:"monospace"}},Qe))}const Q=ye=>{const{field:Ce,cell:be,tableStyles:We,row:Qe,cellProps:mt}=ye,vt=Ce.display(be.value),rt=Boolean((0,b.i)(Ce,Qe)?.length),Ot=(0,P.wW)(x._7);return u.createElement("div",{...mt,className:We.cellContainer},!rt&&u.createElement("img",{src:vt.text,className:We.imageCell,alt:""}),rt&&u.createElement(E.V,{style:{height:"100%"},links:()=>(0,b.i)(Ce,Qe)||[]},Et=>{const Mt=u.createElement("img",{src:vt.text,className:We.imageCell,alt:""});return Et.openMenu?u.createElement(x.zx,{className:(0,m.cx)(Ot),onClick:Et.openMenu},Mt):Mt}))};function oe(ye){const{cell:Ce,tableStyles:be,cellProps:We,field:Qe,row:mt}=ye,vt=Boolean(Qe.config.custom?.inspect),rt=m.css`
    cursor: pointer;
    font-family: monospace;
  `;let Ot=Ce.value,Et=Ot;if((0,t.isString)(Ot))try{Ot=JSON.parse(Ot)}catch{}else Et=JSON.stringify(Ot,null," ");const Mt=Boolean((0,b.i)(Qe,mt)?.length),ue=(0,P.wW)(x._7);return u.createElement("div",{...We,className:vt?be.cellContainerNoOverflow:be.cellContainer},u.createElement("div",{className:(0,m.cx)(be.cellText,rt)},!Mt&&u.createElement("div",{className:be.cellText},Et),Mt&&u.createElement(E.V,{links:()=>(0,b.i)(Qe,mt)||[]},De=>De.openMenu?u.createElement(x.zx,{className:(0,m.cx)(ue),onClick:De.openMenu},Et):u.createElement(u.Fragment,null,Et))),vt&&u.createElement(K,{...ye,previewMode:"code"}))}var se=e(39904);function ie({row:ye,tableStyles:Ce}){return u.createElement("div",{className:Ce.expanderCell,...ye.getToggleRowExpandedProps()},u.createElement(se.J,{"aria-label":ye.isExpanded?"Collapse row":"Expand row",name:ye.isExpanded?"angle-down":"angle-right",size:"xl"}))}var j=e(24115);const de=50;function ce(ye){if(!ye)return"flex-start";if(ye.config.custom)switch(ye.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ye.type===o.fS.number?"flex-end":"flex-start"}function ee(ye,Ce,be,We,Qe,mt){const vt=[];let rt=0;We&&(vt.push({Header:()=>null,id:"expander",Cell:ie,width:de,minWidth:de,filter:(Et,Mt,ue)=>[],justifyContent:"left",field:ye.fields[0],sortType:"basic"}),Ce-=de);for(const[Et,Mt]of ye.fields.entries()){const ue=Mt.config.custom||{};if(ue.hidden)continue;ue.width?Ce-=ue.width:rt++;const De=tt=>{switch(tt){case o.fS.number:return"number";case o.fS.time:return"basic";default:return"alphanumeric-insensitive"}},Ne=le(ue.cellOptions?.type,Mt);vt.push({Cell:Ne,id:Et.toString(),field:Mt,Header:(0,s.CZ)(Mt,ye),accessor:(tt,et)=>Mt.values[et],sortType:De(Mt.type),width:ue.width,minWidth:ue.minWidth??be,filter:(0,n.Z)(q(Mt)),justifyContent:ce(Mt),Footer:(0,G.c)(Et,Qe,mt)})}let Ot=Ce/rt;for(let Et=rt;Et>0;Et--)for(const Mt of vt)!Mt.width&&Mt.minWidth>Ot&&(Mt.width=Mt.minWidth,Ce-=Mt.width,rt-=1,Ot=Ce/rt);for(const Et of vt)Et.width||(Et.width=Ot),Et.minWidth=50;return vt}function le(ye,Ce){switch(ye){case a.h2.ColorText:case a.h2.ColorBackground:return L;case a.h2.Image:return Q;case a.h2.Gauge:return v;case a.h2.Sparkline:return j.A;case a.h2.JSONView:return oe}if(Ce.type===o.fS.geo)return H;if(Ce.type===o.fS.frame){const be=Ce.values[0];return(0,l.aY)(be)&&(0,f.pP)(be)?j.A:oe}return Ce.type===o.fS.other?oe:L}function q(ye){return function(Ce,be,We){return Ce.length===0||!We||!ye?Ce:Ce.filter(Qe=>{if(!Qe.values.hasOwnProperty(be))return!1;const mt=Z(Qe,ye);return We.find(vt=>vt.value===mt)!==void 0})}}function fe(ye,Ce){if(!Ce||ye.length===0)return{};const be={};for(let We=0;We<ye.length;We++){const Qe=Z(ye[We],Ce);be[Qe||"(Blanks)"]=Qe}return be}function Z(ye,Ce){if(!Ce||!ye)return"";const be=Ce.values[ye.index],We=Ce.display?Ce.display(be):be;return Ce.display?(0,d.zc)(We):We}function ne(ye){return Object.keys(ye).reduce((Ce,be)=>Ce.concat({value:ye[be],label:be}),[]).sort(re)}function re(ye,Ce){return ye.label===void 0&&Ce.label===void 0?0:ye.label===void 0&&Ce.label!==void 0?-1:ye.label!==void 0&&Ce.label===void 0?1:ye.label<Ce.label?-1:ye.label>Ce.label?1:0}function ve(ye,Ce){return Ce?ye.filter(be=>Ce.some(We=>We.value===be.value)):[]}function me(ye,Ce,be){return String(ye.values[be]).localeCompare(String(Ce.values[be]),void 0,{sensitivity:"base"})}function Ie(ye,Ce,be){const We=Ge(ye.values[be]),Qe=Ge(Ce.values[be]);return We===Qe?0:We>Qe?1:-1}function Ge(ye){return ye==null||ye===""||isNaN(ye)?Number.NEGATIVE_INFINITY:typeof ye=="number"?ye:Number(ye)}function gt(ye,Ce,be,We){return Re(ye),ye.map((Qe,mt)=>{if(Qe?.field?.type!==o.fS.number)return mt===0&&be.reducer&&be.reducer.length>0?r.TB.get(be.reducer[0]).name:void 0;let vt=(0,t.clone)(Qe.field);return vt.values=Ce[Qe.id],vt.state=void 0,Qe.field=vt,be.fields&&be.fields.length>0?be.fields.find(Ot=>Ot===Qe?.field?.name)?Te(Qe.field,be.reducer,We):void 0:Te(Qe.field,be.reducer||[],We)})}function Te(ye,Ce,be){const We=ye.display??(0,c.U_)({field:ye,theme:be}),Qe=Ce[0],mt=(0,r.Kx)({field:ye,reducers:Ce})[Qe];return(0,d.zc)(We(mt))}function Le(ye){const Ce=[];for(const be in ye)for(const[We,Qe]of Object.entries(ye[be].values))Ce[We]===void 0&&(Ce[We]=[]),Ce[We].push(Qe);return Ce}const Ye={type:a.h2.Auto};function it(ye){return ye.config.custom?.displayMode?ht(ye.config.custom?.displayMode):ye.config.custom?.cellOptions?ye.config.custom.cellOptions:Ye}function ht(ye){switch(ye){case"basic":case"gradient-gauge":case"lcd-gauge":let Ce=a.QH.Basic;return ye==="gradient-gauge"?Ce=a.QH.Gradient:ye==="lcd-gauge"&&(Ce=a.QH.Lcd),{type:a.h2.Gauge,mode:Ce};case"color-background":case"color-background-solid":let be=a.v7.Basic;return ye==="color-background"&&(be=a.v7.Gradient),{type:a.h2.ColorBackground,mode:be};default:return{type:ye}}}function Re(ye){const Ce=ye.findIndex((be,We)=>be?.id!==String(We));Ce!==-1&&(ye.splice(Ce,0,{id:String(Ce)}),Re(ye))}},91363:(Y,O,e)=>{"use strict";e.d(O,{w:()=>u});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(76015),f=e(72648),d=e(7804),r=e(39904),c=e(97379);class a extends s.PureComponent{constructor(g){super(g),this.readCSV=(0,n.debounce)(()=>{const{config:h}=this.props,{text:v}=this.state;this.setState({data:(0,l.uP)(v,{config:h})})},150),this.onTextChange=h=>{this.setState({text:h.target.value})};const{text:y,config:E}=g;this.state={text:y,data:(0,l.uP)(y,{config:E})}}componentDidUpdate(g,y){const{text:E}=this.state;(E!==y.text||this.props.config!==g.config)&&this.readCSV(),this.props.text!==g.text&&this.props.text!==E&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:g,height:y,theme:E}=this.props,{data:h}=this.state,v=i(E);return s.createElement("div",{className:v.tableInputCsv},s.createElement(c.K,{style:{width:g,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:v.textarea}),h&&s.createElement("footer",{className:v.footer},h.map((C,m)=>s.createElement("span",{key:m},"Rows:",C.length,", Columns:",C.fields.length," \xA0",s.createElement(r.J,{name:"check-circle"})))))}}const u=(0,f.HE)(a);u.displayName="TableInputCSV";const i=(0,d.B)(p=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${p.colors.success.main};
      padding: 1px ${p.spacing(.5)};
      font-size: 80%;
    `}))},51275:(Y,O,e)=>{"use strict";e.d(O,{A:()=>d});var t=e(9892),n=e(66111),o=e(2703),s=e(7804),l=e(72648);const f=(0,s.B)(r=>({counter:t.css`
      label: counter;
      margin-left: ${r.spacing(1)};
      border-radius: ${r.spacing(3)};
      background-color: ${r.colors.action.hover};
      padding: ${r.spacing(.25,1)};
      color: ${r.colors.text.secondary};
      font-weight: ${r.typography.fontWeightMedium};
      font-size: ${r.typography.size.sm};
    `})),d=({value:r})=>{const c=(0,l.wW)(f);return n.createElement("span",{className:c.counter},(0,o.SP)(r,0).text)}},79841:(Y,O,e)=>{"use strict";e.d(O,{O:()=>r});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(85419),f=e(39904),d=e(51275);const r=n.forwardRef(({label:a,active:u,icon:i,onChangeTab:p,counter:g,suffix:y,className:E,href:h,...v},C)=>{const m=(0,s.wW)(c),D=()=>n.createElement(n.Fragment,null,i&&n.createElement(f.J,{name:i}),a,typeof g=="number"&&n.createElement(d.A,{value:g}),y&&n.createElement(y,{className:m.suffix})),P=(0,t.cx)(m.link,u?m.activeStyle:m.notActive);return n.createElement("div",{className:m.item},n.createElement("a",{href:h||"#",className:P,...v,onClick:p,"aria-label":v["aria-label"]||o.wl.components.Tab.title(a),role:"tab","aria-selected":u,ref:C},D()))});r.displayName="Tab";const c=a=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
      white-space: nowrap;
    `,link:t.css`
      color: ${a.colors.text.secondary};
      padding: ${a.spacing(1.5,2,1)};
      display: block;
      height: 100%;

      svg {
        margin-right: ${a.spacing(1)};
      }

      &:focus-visible {
        ${(0,l.getFocusStyles)(a)}
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: ${a.shape.radius.default};
        bottom: 0px;
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${a.colors.text.primary};

        &::before {
          background-color: ${a.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${a.colors.text.primary};
      overflow: hidden;

      a {
        color: ${a.colors.text.primary};
      }

      &::before {
        background-image: ${a.colors.gradients.brandHorizontal};
      }
    `,suffix:t.css`
      margin-left: ${a.spacing(1)};
    `})},94893:(Y,O,e)=>{"use strict";e.d(O,{I:()=>f});var t=e(9892),n=e(66111),o=e(7804),s=e(72648);const l=(0,o.B)(d=>({tabContent:t.css`
      background: ${d.colors.background.primary};
    `})),f=({children:d,className:r,...c})=>{const a=(0,s.l4)(),u=l(a);return n.createElement("div",{...c,className:(0,t.cx)(u.tabContent,r)},d)}},72142:(Y,O,e)=>{"use strict";e.d(O,{J:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=n.forwardRef(({children:f,className:d,hideBorder:r=!1},c)=>{const a=(0,o.wW)(l);return n.createElement("div",{className:(0,t.cx)(a.tabsWrapper,r&&a.noBorder,d),ref:c},n.createElement("div",{className:a.tabs,role:"tablist"},f))}),l=f=>({tabsWrapper:t.css`
    border-bottom: 1px solid ${f.colors.border.weak};
    overflow-x: auto;
  `,noBorder:t.css`
    border-bottom: 0;
  `,tabs:t.css`
    position: relative;
    display: flex;
    height: ${f.components.menuTabs.height}px;
  `});s.displayName="TabsBar"},13026:(Y,O,e)=>{"use strict";e.d(O,{L:()=>d});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(39904),f=e(51275);const d=n.forwardRef(({label:c,active:a,icon:u,counter:i,className:p,suffix:g,onChangeTab:y,href:E,...h},v)=>{const C=(0,s.wW)(r),m=()=>n.createElement(n.Fragment,null,u&&n.createElement(l.J,{name:u}),c,typeof i=="number"&&n.createElement(f.A,{value:i}),g&&n.createElement(g,{className:C.suffix})),D=(0,t.cx)(C.link,a&&C.activeStyle);return n.createElement("a",{href:E,className:D,...h,onClick:y,"aria-label":h["aria-label"]||o.wl.components.Tab.title(c),role:"tab","aria-selected":a,ref:v},m())});d.displayName="Tab";const r=c=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${c.colors.text.primary};

      svg {
        margin-right: ${c.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${c.colors.text.maxContrast};
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${c.shape.radius.default};
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${c.spacing(1)};
    `})},34719:(Y,O,e)=>{"use strict";e.d(O,{V:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(3385),l=e(39904);const f=(0,n.forwardRef)(({name:r,onClick:c,icon:a,className:u,colorIndex:i,...p},g)=>{const y=(0,o.l4)(),E=d(y,r,i),h=C=>{C.preventDefault(),C.stopPropagation(),c?.(r,C)},v=(0,t.cx)(E.wrapper,u,{[E.hover]:c!==void 0});return c?n.createElement("button",{...p,className:v,onClick:h,ref:g},a&&n.createElement(l.J,{name:a}),r):n.createElement("span",{...p,className:v,ref:g},a&&n.createElement(l.J,{name:a}),r)});f.displayName="Tag";const d=(r,c,a)=>{let u;return a===void 0?u=(0,s.Bx)(c):u=(0,s.vm)(a),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${r.typography.fontWeightMedium};
      font-size: ${r.typography.size.sm};
      line-height: ${r.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${u.color};
      color: ${r.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${r.shape.radius.default};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(Y,O,e)=>{"use strict";e.d(O,{P:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(34719);const l=(0,n.memo)((0,n.forwardRef)(({displayMax:d,tags:r,icon:c,onClick:a,className:u,getAriaLabel:i},p)=>{const g=(0,o.l4)(),y=f(g,Boolean(d&&d>0)),E=r.length,h=d?r.slice(0,d):r;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,u),"aria-label":"Tags",ref:p},h.map((v,C)=>n.createElement("li",{className:y.li,key:v},n.createElement(s.V,{name:v,icon:c,onClick:a,"aria-label":i?.(v,C),"data-tag-id":C}))),d&&d>0&&E-d>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",E-d))}));l.displayName="TagList";const f=(d,r)=>({wrapper:t.css`
      position: relative;
      align-items: ${r?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${r?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${d.colors.text.secondary};
      font-size: ${d.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(Y,O,e)=>{"use strict";e.d(O,{B:()=>a});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(46967),f=e(3385),d=e(8180);const r=({name:i,disabled:p,onRemove:g})=>{const{color:y,borderColor:E}=(0,n.useMemo)(()=>(0,f.Bx)(i),[i]),h=(0,o.wW)(c);return n.createElement("li",{className:h.itemStyle,style:{backgroundColor:y,borderColor:E}},n.createElement("span",{className:h.nameStyle},i),n.createElement(d.h,{name:"times",size:"lg",disabled:p,ariaLabel:`Remove "${i}" tag`,onClick:()=>g(i),type:"button",className:h.buttonStyles}))},c=i=>{const p=i.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${p}px`,lineHeight:`${p-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:i.shape.radius.default,padding:`0 ${i.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:i.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},a=({placeholder:i="New tag (enter key to add)",tags:p=[],onChange:g,width:y,className:E,disabled:h,addOnBlur:v,invalid:C,id:m})=>{const[D,P]=(0,n.useState)(""),b=(0,o.wW)(u),M=(0,o.l4)(),x=(0,n.useCallback)(R=>{P(R.target.value)},[]),A=R=>{g(p.filter(F=>F!==R))},T=R=>{R?.preventDefault(),p.includes(D)||g(p.concat(D)),P("")},S=()=>{v&&D&&T()},U=R=>{R.key==="Enter"&&D!==""&&T(R)};return n.createElement("div",{className:(0,t.cx)(b.wrapper,E,y?(0,t.css)({width:M.spacing(y)}):"")},n.createElement(l.I,{id:m,disabled:h,placeholder:i,onChange:x,value:D,onKeyDown:U,onBlur:S,invalid:C,suffix:n.createElement(s.zx,{fill:"text",className:b.addButtonStyle,onClick:T,size:"md",disabled:D.length<=0},"Add")}),p?.length>0&&n.createElement("ul",{className:b.tags},p.map(R=>n.createElement(r,{key:R,name:R,onRemove:A,disabled:h}))))},u=i=>({wrapper:t.css`
    min-height: ${i.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${i.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${i.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${i.spacing(1)};
  `})},17937:(Y,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=n.forwardRef(({as:r,variant:c,weight:a,color:u,truncate:i,textAlignment:p,children:g},y)=>{const E=(0,o.wW)((0,n.useCallback)(h=>l(h,c,u,a,i,p),[u,p,i,a,c]));return(0,n.createElement)(r,{className:E,ref:y},g)});s.displayName="Text";const l=(r,c,a,u,i,p)=>(0,t.css)([c&&{...r.typography[c]},{margin:0,padding:0},a&&{color:d(a,r)},u&&{fontWeight:f(u,r)},i&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},p&&{textAlign:p}]),f=(r,c)=>{switch(r){case"bold":return c.typography.fontWeightBold;case"medium":return c.typography.fontWeightMedium;case"light":return c.typography.fontWeightLight;case"regular":case void 0:return c.typography.fontWeightRegular}},d=(r,c)=>{switch(r){case"error":return c.colors.error.text;case"success":return c.colors.success.text;case"info":return c.colors.info.text;case"warning":return c.colors.warning.text;default:return r?c.colors.text[r]:void 0}}},98699:(Y,O,e)=>{"use strict";e.d(O,{Dr:()=>a,H3:()=>l});var t=e(66111),n=e(17937);const o=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h1",...p,variant:p.variant||"h1",ref:g}));o.displayName="H1";const s=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h2",...p,variant:p.variant||"h2",ref:g}));s.displayName="H2";const l=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h3",...p,variant:p.variant||"h3",ref:g}));l.displayName="H3";const f=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h4",...p,variant:p.variant||"h4",ref:g}));f.displayName="H4";const d=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h5",...p,variant:p.variant||"h5",ref:g}));d.displayName="H5";const r=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h6",...p,variant:p.variant||"h6",ref:g}));r.displayName="H6";const c=t.forwardRef((p,g)=>t.createElement(n.x,{as:"p",...p,variant:p.variant||"body",ref:g}));c.displayName="P";const a=t.forwardRef((p,g)=>t.createElement(n.x,{as:"span",...p,variant:p.variant||"bodySmall",ref:g}));a.displayName="Span";const u=t.forwardRef((p,g)=>t.createElement(n.x,{as:"legend",...p,variant:p.variant||"bodySmall",ref:g}));u.displayName="Legend";const i=t.forwardRef((p,g)=>t.createElement(n.x,{as:"span",...p,ref:g}));i.displayName="TextModifier"},97379:(Y,O,e)=>{"use strict";e.d(O,{K:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(7804),l=e(73267);const f=n.forwardRef(({invalid:r,className:c,...a},u)=>{const i=(0,o.l4)(),p=d(i,r);return n.createElement("textarea",{...a,className:(0,t.cx)(p.textarea,c),ref:u})}),d=(0,s.B)((r,c=!1)=>({textarea:(0,t.cx)((0,l.RK)(r),(0,l.GL)(r),t.css`
        display: block;
        border-radius: ${r.shape.borderRadius()};
        padding: ${r.spacing.gridSize/4}px ${r.spacing.gridSize}px;
        width: 100%;
        border-color: ${c?r.colors.error.border:r.components.input.borderColor};
      `)}));f.displayName="TextArea"},68948:(Y,O,e)=>{"use strict";e.d(O,{p:()=>U});var t=e(66111),n=e(72648),o=e(72269),s=e(60325),l=e(68416),f=e(82897),d=e(75974),r=e(99098),c=e(2703),a=e(6194),u=e(72990),i=e(53768),p=e(30471),g=e(56632),y=e(23588),E=e(40538),h=e(86979),v=e(13347),C=e(52240),m=e(2445);const D=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),P=Array(53);for(let R=0;R<P.length;R++)P[R]=2**R;const b=(R,F=1)=>R==null?"-":R.toFixed(F),M={drawStyle:E.l8.Line,showPoints:E.Jp.Auto,axisPlacement:E.LB.Auto},x=({frame:R,theme:F,timeZones:B,getTimeRange:K,eventBus:L,sync:N,allFrames:z,renderers:G,tweakScale:I=H=>H,tweakAxis:V=H=>H})=>{const H=new v.U(B[0]);let Q;H.setPrepData(ne=>(Q=ne[0],(0,m.Bj)(ne[0],H.getStackingGroups())));const oe=R.fields[0];if(!oe)return H;const se="x";let ie="_x",j="";const de=oe.config.custom?.axisPlacement!==E.LB.Hidden?E.LB.Bottom:E.LB.Hidden,ce=oe.config.custom?.axisPlacement!==E.LB.Hidden;if(oe.type===r.fS.time){ie="time",H.addScale({scaleKey:se,orientation:E.wN.Horizontal,direction:E.bQ.Right,isTime:!0,range:()=>{const re=K();return[re.from.valueOf(),re.to.valueOf()]}});const ne=B.length>1?(re,ve)=>ve.map((me,Ie)=>Ie<2?null:me):void 0;for(let re=0;re<B.length;re++){const ve=B[re];H.addAxis({scaleKey:se,isTime:!0,placement:de,show:ce,label:oe.config.custom?.axisLabel,timeZone:ve,theme:F,grid:{show:re===0&&oe.config.custom?.axisGridShow},filter:ne})}B.length>1&&H.addHook("drawAxes",re=>{re.ctx.save(),re.ctx.fillStyle=F.colors.text.primary,re.ctx.textAlign="left",re.ctx.textBaseline="bottom";let ve=0;re.axes.forEach(me=>{if(me.side===2){let Ie=me._pos+me._size;re.ctx.fillText(B[ve],re.bbox.left,Ie*d.Z.pxRatio),ve++}}),re.ctx.restore()})}else oe.config.unit&&(ie=oe.config.unit),H.addScale({scaleKey:se,orientation:E.wN.Horizontal,direction:E.bQ.Right,range:(ne,re,ve)=>[oe.config.min??re,oe.config.max??ve]}),H.addAxis({scaleKey:se,placement:de,show:ce,label:oe.config.custom?.axisLabel,theme:F,grid:{show:oe.config.custom?.axisGridShow},formatValue:(ne,re)=>(0,c.zc)(oe.display(ne,re))});let ee=G?.flatMap(ne=>Object.values(ne.fieldMap).filter(re=>ne.indicesOnly.indexOf(re)===-1))??[],le;for(let ne=1;ne<R.fields.length;ne++){const re=R.fields[ne],ve={...re.config,custom:{...M,...re.config.custom}},me=ve.custom;if(re===oe||re.type!==r.fS.number)continue;let Ie=re.display??b;re.config.custom?.stacking?.mode===E.o0.Percent&&(Ie=(0,a.U_)({field:{...re,config:{...re.config,unit:"percentunit"}},theme:F}));const Ge=(0,h.z)(ve),gt=(0,u.fD)(re),Le=(0,u.YO)(re,F).color;if(H.addScale(I({scaleKey:Ge,orientation:E.wN.Vertical,direction:E.bQ.Up,distribution:me.scaleDistribution?.type,log:me.scaleDistribution?.log,linearThreshold:me.scaleDistribution?.linearThreshold,min:re.config.min,max:re.config.max,softMin:me.axisSoftMin,softMax:me.axisSoftMax,centeredZero:me.axisCenteredZero,range:me.stacking?.mode===E.o0.Percent?(be,We,Qe)=>(We=We<0?-1:0,Qe=Qe>0?1:0,[We,Qe]):void 0,decimals:re.config.decimals},re)),j||(j=Ge),me.axisPlacement!==E.LB.Hidden){let be;me.axisColorMode===E.yK.Series&&(gt.isByValue&&re.config.custom?.gradientMode===E.FI.Scheme&&gt.id===i.S.Thresholds?be=(0,C.P2)(1,F,gt,re.config.thresholds):be=Le);let We={};be&&(We={border:{show:!0,width:1,stroke:be},ticks:{stroke:be},color:me.axisColorMode===E.yK.Series?be:void 0});let Qe;D.has(ve.unit)&&(Qe=P),H.addAxis(V({scaleKey:Ge,label:me.axisLabel,size:me.axisWidth,placement:me.axisPlacement??E.LB.Auto,formatValue:(mt,vt)=>(0,c.zc)(Ie(mt,vt)),theme:F,grid:{show:me.axisGridShow},decimals:re.config.decimals,distr:me.scaleDistribution?.type,incrs:Qe,...We},re))}const Ye=me.drawStyle===E.l8.Points?E.Jp.Always:me.showPoints;let it=()=>null;me.spanNulls!==!0&&(it=(be,We,Qe,mt)=>{let vt=[],rt=be.series[We];if(!Qe&&mt&&mt.length){const[Ot,Et]=rt.idxs,Mt=be.data[0],ue=be.data[We],De=Math.round(be.valToPos(Mt[Ot],"x",!0)),Ne=Math.round(be.valToPos(Mt[Et],"x",!0));mt[0][0]===De&&vt.push(Ot);for(let tt=0;tt<mt.length;tt++){let et=mt[tt],Ue=mt[tt+1];if(Ue&&et[1]===Ue[0]){let Fe=be.posToIdx(et[1],!0);if(ue[Fe]==null)for(let Ee=1;Ee<100;Ee++){if(ue[Fe+Ee]!=null){Fe+=Ee;break}if(ue[Fe-Ee]!=null){Fe-=Ee;break}}vt.push(Fe)}}mt[mt.length-1][1]===Ne&&vt.push(Et)}return vt.length?vt:null});let{fillOpacity:ht}=me,Re=null,ye=null;if(re.state?.origin){le||(le=A(R,z));const be=z[re.state.origin.frameIndex],We=be?.fields[re.state.origin.fieldIndex],Qe=(0,p.CZ)(We??re,be,z);if(ee.indexOf(Qe)>=0)Re=()=>null,ye=()=>{};else if(me.transform===E.pR.Constant){const mt=d.Z.paths.linear();Re=(vt,rt)=>{const Ot=vt._data,Et=K();let Mt=[Et.from.valueOf(),Et.to.valueOf()],ue=Ot[rt].find(tt=>tt!=null),De=[ue,ue],Ne=Ot.slice();return Ne[0]=Mt,Ne[rt]=De,mt({...vt,_data:Ne},rt,0,1)}}if(me.fillBelowTo){const mt=R.fields.find(Et=>me.fillBelowTo===Et.name||me.fillBelowTo===Et.config?.displayNameFromDS||me.fillBelowTo===(0,p.CZ)(Et,R,z)),vt=mt?(0,p.CZ)(mt,R,z):me.fillBelowTo,rt=le.get(Qe),Ot=le.get(vt);(0,f.isNumber)(Ot)&&(0,f.isNumber)(rt)?(H.addBand({series:[rt,Ot],fill:void 0}),ht||(ht=35)):ht=0}}let Ce;gt.id===i.S.Thresholds&&(Ce=be=>(0,u.YO)(Q.fields[be],F).color),H.addSeries({pathBuilder:Re,pointsBuilder:ye,scaleKey:Ge,showPoints:Ye,pointsFilter:it,colorMode:gt,fillOpacity:ht,theme:F,dynamicSeriesColor:Ce,drawStyle:me.drawStyle,lineColor:me.lineColor??Le,lineWidth:me.lineWidth,lineInterpolation:me.lineInterpolation,lineStyle:me.lineStyle,barAlignment:me.barAlignment,barWidthFactor:me.barWidthFactor,barMaxWidth:me.barMaxWidth,pointSize:me.pointSize,spanNulls:me.spanNulls||!1,show:!me.hideFrom?.viz,gradientMode:me.gradientMode,thresholds:ve.thresholds,hardMin:re.config.min,hardMax:re.config.max,softMin:me.axisSoftMin,softMax:me.axisSoftMax,dataFrameFieldIndex:re.state?.origin}),me.thresholdsStyle&&ve.thresholds&&(me.thresholdsStyle.mode??E.i3.Off)!==E.i3.Off&&H.addThresholds({config:me.thresholdsStyle,thresholds:ve.thresholds,scaleKey:Ge,theme:F,hardMin:re.config.min,hardMax:re.config.max,softMin:me.axisSoftMin,softMax:me.axisSoftMax})}let q=(0,m.i7)(R);H.setStackingGroups(q),G?.forEach(ne=>{le||(le=A(R,z));let re={};for(let ve in ne.fieldMap){let me=ne.fieldMap[ve];re[ve]=le.get(me)}ne.init(H,re)}),H.scaleKeys=[se,j];const fe=15;let Z={dataIdx:(ne,re,ve,me)=>{let Ie=ne.data[re];if(Ie[ve]==null){let Ge=null,gt=null,Te;for(Te=ve;Ge==null&&Te-- >0;)Ie[Te]!=null&&(Ge=Te);for(Te=ve;gt==null&&Te++<Ie.length;)Ie[Te]!=null&&(gt=Te);let Le=ne.data[0],Ye=ne.valToPos(me,"x"),it=gt==null?1/0:ne.valToPos(Le[gt],"x"),ht=Ge==null?-1/0:ne.valToPos(Le[Ge],"x"),Re=Ye-ht,ye=it-Ye;Re<=ye?Re<=fe&&(ve=Ge):ye<=fe&&(ve=gt)}return ve}};if(N&&N()!==g.m.Off){const ne={point:{[se]:null,[j]:null},data:R},re=new y.es(ne);Z.sync={key:"__global_",filters:{pub:(ve,me,Ie,Ge,gt,Te,Le)=>N&&N()===g.m.Off?!1:(ne.rowIndex=Le,Ie<0&&Ge<0?(ne.point[ie]=null,ne.point[j]=null,L.publish(new y.xH)):(ne.point[ie]=me.posToVal(Ie,se),ne.point[j]=me.posToVal(Ge,j),ne.point.panelRelY=Ge>0?Ge/Te:1,L.publish(re),re.payload.down=void 0),!0)},scales:[se,j]}}return H.setSync(),H.setCursor(Z),H};function A(R,F){const B=new Map;return R.fields.forEach((K,L)=>{const N=K.state?.origin;if(N){const z=F[N.frameIndex]?.fields[N.fieldIndex];z&&B.set((0,p.CZ)(z,F[N.frameIndex],F),L)}}),B}const T=["legend","options","theme"];class S extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(F,B,K)=>{const{eventBus:L,sync:N}=this.context,{theme:z,timeZone:G,renderers:I,tweakAxis:V,tweakScale:H}=this.props;return x({frame:F,theme:z,timeZones:Array.isArray(G)?G:[G],getTimeRange:K,eventBus:L,sync:N,allFrames:B,renderers:I,tweakScale:H,tweakAxis:V})},this.renderLegend=F=>{const{legend:B,frames:K}=this.props;return!F||B&&!B.showLegend||!(0,l.o)(F,K)?null:t.createElement(l.l,{data:K,config:F,...B})}}render(){return t.createElement(o.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:T,renderLegend:this.renderLegend})}}S.contextType=s.bb;const U=(0,n.HE)(S);U.displayName="TimeSeries"},50819:(Y,O,e)=>{"use strict";e.d(O,{P:()=>d});var t=e(66111),n=e(27480),o=e(72648),s=e(21133),l=e(8180),f=e(85511);const d=t.memo(({children:c,theme:a="info",placement:u="auto",content:i,title:p,closeButton:g=!0,onClose:y,footer:E})=>{const v=(0,o.wW)(r)[a],C=(0,t.useRef)(null),[m,D]=t.useState(!1),P=(0,t.useCallback)(()=>{D(!1),y?.()},[y]);(0,t.useEffect)(()=>{if(m){const U=R=>{R.key==="Escape"&&P()};return document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}}},[m,P]);const{getArrowProps:b,getTooltipProps:M,setTooltipRef:x,setTriggerRef:A,visible:T,update:S}=(0,n.O)({visible:m,placement:u,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:U=>{D(U),U||y?.()}});return t.createElement(t.Fragment,null,t.cloneElement(c,{ref:A,tabIndex:0}),T&&t.createElement(f.h_,null,t.createElement("div",{"data-testid":"toggletip-content",ref:x,...M({className:v.container})},Boolean(p)&&t.createElement("div",{className:v.header},p),g&&t.createElement("div",{className:v.headerClose},t.createElement(l.h,{"aria-label":"Close Toggletip",name:"times",size:"md","data-testid":"toggletip-header-close",onClick:P})),t.createElement("div",{ref:C,...b({className:v.arrow})}),t.createElement("div",{className:v.body},(typeof i=="string"||t.isValidElement(i))&&i,typeof i=="function"&&S&&i({update:S})),Boolean(E)&&t.createElement("div",{className:v.footer},E))))});d.displayName="Toggletip";const r=c=>{const a=(0,s.k)(c,c.components.tooltip.background,c.components.tooltip.background,c.components.tooltip.text,{topBottom:3,rightLeft:3}),u=(0,s.k)(c,c.colors.error.main,c.colors.error.main,c.colors.error.contrastText,{topBottom:3,rightLeft:3});return{info:a,error:u}}},64319:(Y,O,e)=>{"use strict";e.d(O,{h:()=>a});var t=e(9892),n=e(66111),o=e(84559),s=e(68183),l=e(72648),f=e(85419),d=e(31403),r=e(39904),c=e(61860);const a=(0,n.forwardRef)(({tooltip:g,icon:y,iconSize:E,className:h,children:v,imgSrc:C,imgAlt:m,fullWidth:D,isOpen:P,narrow:b,variant:M="default",iconOnly:x,"aria-label":A,isHighlighted:T,...S},U)=>{const R=(0,l.wW)(p),F=(0,t.cx)({[R.button]:!0,[R.buttonFullWidth]:D,[R.narrow]:b},R[M],h),B=(0,t.cx)({[R.content]:!0,[R.contentWithIcon]:!!y,[R.contentWithRightIcon]:P!==void 0}),K=n.createElement("button",{ref:U,className:F,"aria-label":u(A,g),"aria-expanded":P,...S},i(y,E),C&&n.createElement("img",{className:R.img,src:C,alt:m??""}),v&&!x&&n.createElement("div",{className:B},v),P===!1&&n.createElement(r.J,{name:"angle-down"}),P===!0&&n.createElement(r.J,{name:"angle-up"}),T&&n.createElement("div",{className:R.highlight}));return g?n.createElement(c.u,{content:g,placement:"bottom"},K):K});a.displayName="ToolbarButton";function u(g,y){return g||(y?s.wl.components.PageToolbar.item(y):void 0)}function i(g,y){return g?(0,o.Mo)(g)?n.createElement(r.J,{name:g,size:`${y||"lg"}`}):g:null}const p=g=>{const y=(0,d.c9)(g,"primary","solid"),E=(0,d.c9)(g,"destructive","solid"),h=t.css`
    color: ${g.colors.text.primary};
    background: ${g.colors.secondary.main};

    &:hover {
      color: ${g.colors.text.primary};
      background: ${g.colors.secondary.shade};
      border: 1px solid ${g.colors.border.medium};
    }
  `,v=t.css`
    color: ${g.colors.text.secondary};
    background: transparent;
    border: 1px solid transparent;

    &:hover {
      color: ${g.colors.text.primary};
      background: ${g.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${g.spacing(g.components.height.md)};
      padding: ${g.spacing(0,1)};
      border-radius: ${g.shape.borderRadius()};
      line-height: ${g.components.height.md*g.spacing.gridSize-2}px;
      font-weight: ${g.typography.fontWeightMedium};
      border: 1px solid ${g.colors.secondary.border};
      white-space: nowrap;
      transition: ${g.transitions.create(["background","box-shadow","border-color","color"],{duration:g.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,f.getMouseFocusStyles)(g)}
      }

      &:hover {
        box-shadow: ${g.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${g.colors.action.disabledOpacity};
        background: ${g.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${g.colors.text.disabled};
          background: ${g.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:v,canvas:h,active:t.css`
      color: ${g.v1.palette.orangeDark};
      border-color: ${g.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${g.colors.text.primary};
        background: ${g.colors.emphasize(g.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(E),narrow:t.css`
      padding: 0 ${g.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${g.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${g.spacing(1)};

      @media ${f.mediaUp(g.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${g.spacing(.5)};
    `,highlight:t.css`
      background-color: ${g.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(Y,O,e)=>{"use strict";e.d(O,{R:()=>c});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(66111),f=e(72648),d=e(85511),r=e(64319);const c=(0,l.forwardRef)(({alignment:u="left",className:i,children:p,...g},y)=>{const E=l.Children.toArray(p).filter(U=>U!==null),[h,v]=(0,l.useState)(Array(E.length).fill(!0)),C=(0,l.useRef)(null),[m,D]=(0,l.useState)(!1),P=(0,l.useRef)(null),b=(0,l.createRef)(),{overlayProps:M}=(0,s.Ir)({onClose:()=>D(!1),isDismissable:!0,isOpen:m,shouldCloseOnInteractOutside:U=>{const R=(0,d.RN)();return!P.current?.contains(U)&&!R.contains(U)}},b),{dialogProps:x}=(0,n.R)({},b),A=(0,f.l4)(),T=u==="left"?h.indexOf(!1)-1:h.length,S=a(A,T,u);return(0,l.useLayoutEffect)(()=>{const U=new IntersectionObserver(R=>{R.forEach(F=>{if(F.target instanceof HTMLElement&&F.target.parentNode){const B=Array.prototype.indexOf.call(F.target.parentNode.children,F.target);v(K=>{const L=[...K];return L[B]=F.isIntersecting,L})}})},{threshold:1,root:C.current});return C.current&&Array.from(C.current.children).forEach(R=>{R instanceof HTMLElement&&R!==P.current&&U.observe(R)}),()=>U.disconnect()},[p]),l.createElement("div",{ref:C,className:(0,t.cx)(S.container,i),...g},E.map((U,R)=>l.createElement("div",{key:R,style:{order:R,visibility:h[R]?"visible":"hidden"},className:S.childWrapper},U)),h.includes(!1)&&l.createElement("div",{ref:P,className:S.overflowButton},l.createElement(r.h,{variant:m?"active":"default",tooltip:"Show more items",onClick:()=>D(!m),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),m&&l.createElement(o.MT,{contain:!0,autoFocus:!0},l.createElement("div",{className:S.overflowItems,ref:b,...M,...x},E.map((U,R)=>!h[R]&&U)))))});c.displayName="ToolbarButtonRow";const a=(u,i,p)=>({overflowButton:t.css`
    order: ${i};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${u.colors.background.primary};
    border-radius: ${u.shape.borderRadius()};
    box-shadow: ${u.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${u.spacing(1)};
    margin-top: ${u.spacing(1)};
    max-width: 80vw;
    padding: ${u.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${u.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${u.spacing(1)};
    justify-content: ${p==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${u.spacing(1)};
  `})},56921:(Y,O,e)=>{"use strict";e.d(O,{J:()=>r});var t=e(66111),n=e(69733),o=e(14760),s=e(66525),l=e(85511);const f={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},d={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class r extends t.PureComponent{render(){const{content:a,show:u,placement:i,onMouseEnter:p,onMouseLeave:g,className:y,wrapperClassName:E,renderArrow:h,referenceElement:v,onKeyDown:C}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:u,timeout:100,mountOnEnter:!0,unmountOnExit:!0},m=>t.createElement(l.h_,null,t.createElement(o.r,{placement:i,referenceElement:v,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:D,style:P,placement:b,arrowProps:M,update:x})=>t.createElement("div",{onMouseEnter:p,onMouseLeave:g,onKeyDown:C,ref:D,style:{...P,...f,...d[m]},"data-placement":b,className:`${E}`},t.createElement("div",{className:y},typeof a=="string"&&a,t.isValidElement(a)&&t.cloneElement(a),typeof a=="function"&&a({updatePopperPosition:x}),h&&h({arrowProps:M,placement:b})))))))}}},39604:(Y,O,e)=>{"use strict";e.d(O,{D:()=>n});var t=e(66111);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:l,placement:f="auto"}=this.props,{show:d}=this.state;return s(this.showPopper,this.hidePopper,{show:d,placement:f,content:l})}}},61860:(Y,O,e)=>{"use strict";e.d(O,{u:()=>f});var t=e(66111),n=e(27480),o=e(72648),s=e(21133),l=e(85511);const f=t.forwardRef(({children:r,theme:c,interactive:a,show:u,placement:i,content:p},g)=>{const[y,E]=t.useState(u);(0,t.useEffect)(()=>{if(y!==!1){const A=T=>{T.key==="Escape"&&E(!1)};return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}}else return},[y]);const{getArrowProps:h,getTooltipProps:v,setTooltipRef:C,setTriggerRef:m,visible:D,update:P}=(0,n.O)({visible:y,placement:i,interactive:a,delayHide:a?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:E}),M=(0,o.wW)(d)[c??"info"],x=(0,t.useCallback)(A=>{m(A),typeof g=="function"?g(A):g&&(g.current=A)},[g,m]);return t.createElement(t.Fragment,null,t.cloneElement(r,{ref:x,tabIndex:0}),D&&t.createElement(l.h_,null,t.createElement("div",{ref:C,...v({className:M.container})},t.createElement("div",{...h({className:M.arrow})}),typeof p=="string"&&p,t.isValidElement(p)&&t.cloneElement(p),typeof p=="function"&&P&&p({updatePopperPosition:P}))))});f.displayName="Tooltip";const d=r=>{const c=(0,s.k)(r,r.components.tooltip.background,r.components.tooltip.background,r.components.tooltip.text,{topBottom:.5,rightLeft:1}),a=(0,s.k)(r,r.colors.error.main,r.colors.error.main,r.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:c,["info-alt"]:c,error:a}}},69636:(Y,O,e)=>{"use strict";e.d(O,{H:()=>o});var t=e(66111);function n(s,l){const f=[];return s.forEach(d=>{f.push(d.start,d.end+1)}),f[0]!==0&&f.unshift(0),f[f.length-1]!==l&&f.push(l),f}const o=s=>{let{highlightParts:l,text:f,highlightClassName:d}=s;if(!l?.length)return null;let r=[],c=n(l,f.length),a=l[0].start===0;for(let u=1;u<c.length;u++){let i=c[u-1],p=c[u];r.push((0,t.createElement)(a?"mark":"span",{key:u-1,className:a?d:void 0},f.substring(i,p))),a=!a}return t.createElement("div",null,r)}},61227:(Y,O,e)=>{"use strict";e.d(O,{n:()=>l});var t=e(66111),n=e(2703),o=e(95093);function s(f){return`Custom unit: ${f}`}class l extends t.PureComponent{constructor(){super(...arguments),this.onChange=d=>{this.props.onChange(d.value)}}render(){const{value:d,width:r}=this.props;let c;const u=(0,n.QW)().map(i=>{const p=i.submenu.map(g=>{const y={label:g.text,value:g.value};return g.value===d&&(c=y),y});return{label:i.text,value:i.text,items:p}});return d&&!c&&(c={value:d,label:d}),t.createElement(o.v,{width:r,initialValue:c&&c.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:u,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(Y,O,e)=>{"use strict";e.d(O,{b:()=>f});var t=e(66111),n=e(68183),o=e(72648),s=e(31403),l=e(8581);function f({"aria-label":d,label:r,icon:c,options:a,onChange:u,variant:i,minWidth:p=16,size:g="sm",isFullWidth:y=!0,menuPlacement:E,fill:h,buttonCss:v}){const[C,m]=(0,t.useState)(!1),D=(0,o.l4)();return t.createElement(t.Fragment,null,!C&&t.createElement(s.zx,{size:g||"sm",className:v,icon:c||"plus",onClick:()=>m(!0),variant:i,fill:h,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(d??r)},r),C&&t.createElement("span",{style:{minWidth:D.spacing(p),flexGrow:y?1:void 0}},t.createElement(l.Ph,{placeholder:r,options:a,"aria-label":n.wl.components.ValuePicker.select(d??r),isOpen:!0,onCloseMenu:()=>m(!1),autoFocus:!0,onChange:P=>{m(!1),u(P)},menuPlacement:E})))}},729:(Y,O,e)=>{"use strict";e.d(O,{AY:()=>d});var t=e(9892),n=e(66111),o=e(27443),s=e(72648),l=e(85419),f=e(68226);const d=({width:a,height:u,legend:i,children:p})=>{const g=(0,s.l4)(),y=(0,s.wW)(r),E={display:"flex",width:`${a}px`,height:`${u}px`},[h,v]=(0,o.Z)();if(!i)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:E,className:y.viz},p(a,u)));let{placement:C,maxHeight:m="35%",maxWidth:D="60%"}=i.props;document.body.clientWidth<g.breakpoints.values.lg&&(C="bottom");let P=null;const b={};switch(C){case"bottom":E.flexDirection="column",b.maxHeight=m,v.height&&(P={width:a,height:u-v.height});break;case"right":E.flexDirection="row",b.maxWidth=D,v.width&&(P={width:a-v.width,height:u}),i.props.width&&(b.width=i.props.width,P={width:a-i.props.width,height:u});break}return P?.width===0&&(P.width=a),P?.height===0&&(P.height=u),n.createElement("div",{style:E},n.createElement("div",{tabIndex:0,className:y.viz},P&&p(P.width,P.height)),n.createElement("div",{style:b,ref:h},n.createElement(f.$,{hideHorizontalTrack:!0},i)))},r=a=>({viz:(0,t.css)({flexGrow:2,borderRadius:a.shape.borderRadius(1),"&:focus-visible":(0,l.getFocusStyles)(a)})}),c=({children:a})=>n.createElement(n.Fragment,null,a);d.Legend=c},6264:(Y,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(66111),n=e(72990),o=e(72648);const s=t.memo(t.forwardRef(({color:l,className:f,gradient:d,...r},c)=>{const a=(0,o.l4)();let u;if(d){const p=n.WO.get(d).getColors?.(a);p?.length?u=`linear-gradient(90deg, ${p.join(", ")})`:u=a.visualization.getColorByName("")}else u=l;const i={background:u,width:"14px",height:"4px",borderRadius:a.shape.radius.pill,display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:c,className:f,style:i,...r})}));s.displayName="SeriesIcon"},78056:(Y,O,e)=>{"use strict";e.d(O,{l:()=>M});var t=e(66111),n=e(23588),o=e(40538),s=e(60325),l=e(17882),f=e(9892),d=e(72648),r=e(19882),c=e(56766),a=e(46920);const u=({items:x,itemRenderer:A,onLabelMouseOver:T,onLabelMouseOut:S,onLabelClick:U,placement:R,className:F,readonly:B})=>{const K=(0,d.wW)(i);A||(A=N=>t.createElement(a.e,{item:N,onLabelClick:U,onLabelMouseOver:T,onLabelMouseOut:S,readonly:B}));const L=N=>`${N.getItemKey?N.getItemKey():N.label}`;switch(R){case"right":{const N=(z,G)=>t.createElement("span",{className:K.itemRight},A(z,G));return t.createElement("div",{className:(0,f.cx)(K.rightWrapper,F)},t.createElement(c.a,{items:x,renderItem:N,getItemKey:L}))}case"bottom":default:{const N=(z,G)=>t.createElement("span",{className:K.itemBottom},A(z,G));return t.createElement("div",{className:(0,f.cx)(K.bottomWrapper,F)},t.createElement("div",{className:K.section},t.createElement(r.Y,{items:x.filter(z=>z.yAxis===1),renderItem:N,getItemKey:L})),t.createElement("div",{className:(0,f.cx)(K.section,K.sectionRight)},t.createElement(r.Y,{items:x.filter(z=>z.yAxis!==1),renderItem:N,getItemKey:L})))}}};u.displayName="VizLegendList";const i=x=>{const A=f.css`
    padding-right: 10px;
    display: flex;
    font-size: ${x.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:A,itemRight:(0,f.cx)(A,f.css`
        margin-bottom: ${x.spacing(.5)};
      `),rightWrapper:f.css`
      padding-left: ${x.spacing(.5)};
    `,bottomWrapper:f.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${x.spacing(.5)};
    `,section:f.css`
      display: flex;
    `,sectionRight:f.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var p=e(82897),g=e(39904),y=e(2703),E=e(85419),h=e(59943);const v=({item:x,onLabelClick:A,onLabelMouseOver:T,onLabelMouseOut:S,className:U,readonly:R})=>{const F=(0,d.wW)(C),B=(0,t.useCallback)(N=>{T&&T(x,N)},[x,T]),K=(0,t.useCallback)(N=>{S&&S(x,N)},[x,S]),L=(0,t.useCallback)(N=>{A&&A(x,N)},[x,A]);return t.createElement("tr",{className:(0,f.cx)(F.row,U)},t.createElement("td",null,t.createElement("span",{className:F.itemWrapper},t.createElement(h.i,{color:x.color,seriesName:x.label,readonly:R}),t.createElement("button",{disabled:R,type:"button",title:x.label,onBlur:K,onFocus:B,onMouseOver:B,onMouseOut:K,onClick:R?void 0:L,className:(0,f.cx)(F.label,x.disabled&&F.labelDisabled)},x.label," ",x.yAxis===2&&t.createElement("span",{className:F.yAxisLabel},"(right y-axis)")))),x.getDisplayValues&&x.getDisplayValues().map((N,z)=>t.createElement("td",{className:F.value,key:`${N.title}-${z}`},(0,y.zc)(N))))};v.displayName="LegendTableItem";const C=x=>{const A=E.hoverColor(x.colors.background.primary,x);return{row:f.css`
      label: LegendRow;
      font-size: ${x.v1.typography.size.sm};
      border-bottom: 1px solid ${x.colors.border.weak};
      td {
        padding: ${x.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${A};
      }
    `,label:f.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
      max-width: 600px;
      text-overflow: ellipsis;
      overflow: hidden;
    `,labelDisabled:f.css`
      label: LegendLabelDisabled;
      color: ${x.colors.text.disabled};
    `,itemWrapper:f.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:f.css`
      text-align: right;
    `,yAxisLabel:f.css`
      color: ${x.colors.text.secondary};
    `}},m=({items:x,sortBy:A,sortDesc:T,itemRenderer:S,className:U,onToggleSort:R,onLabelClick:F,onLabelMouseOver:B,onLabelMouseOut:K,readonly:L})=>{const N=(0,d.wW)(D),z={};for(const I of x)if(I.getDisplayValues)for(const V of I.getDisplayValues())z[V.title??"?"]=V;const G=A?(0,p.orderBy)(x,I=>{if(I.getDisplayValues){const V=I.getDisplayValues().filter(H=>H.title===A)[0];return V&&V.numeric}},T?"desc":"asc"):x;return S||(S=(I,V)=>t.createElement(v,{key:`${I.label}-${V}`,item:I,onLabelClick:F,onLabelMouseOver:B,onLabelMouseOut:K,readonly:L})),t.createElement("table",{className:(0,f.cx)(N.table,U)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(z).map(I=>{const V=z[I];return t.createElement("th",{title:V.description,key:I,className:(0,f.cx)(N.header,R&&N.headerSortable,{[N.withIcon]:A===I}),onClick:()=>{R&&R(I)}},I,A===I&&t.createElement(g.J,{size:"xs",name:T?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,G.map(S)))},D=x=>({table:f.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${x.colors.border.weak};
    }
  `,header:f.css`
    color: ${x.colors.primary.text};
    font-weight: ${x.typography.fontWeightMedium};
    border-bottom: 1px solid ${x.colors.border.weak};
    padding: ${x.spacing(.25,1,.25,1)};
    font-size: ${x.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:f.css`
    padding-right: 4px;
  `,headerSortable:f.css`
    cursor: pointer;
  `});var P=e(26993);function b(x){return x.ctrlKey||x.metaKey||x.shiftKey?l.R.AppendToSelection:l.R.ToggleSelection}function M({items:x,displayMode:A,sortBy:T,seriesVisibilityChangeBehavior:S=P.Y.Isolate,sortDesc:U,onLabelClick:R,onToggleSort:F,placement:B,className:K,itemRenderer:L,readonly:N}){const{eventBus:z,onToggleSeriesVisibility:G,onToggleLegendSort:I}=(0,s.R9)(),V=(0,t.useCallback)((oe,se)=>{z?.publish({type:n.es.type,payload:{raw:se,x:0,y:0,dataId:oe.label}})},[z]),H=(0,t.useCallback)((oe,se)=>{z?.publish({type:n.xH.type,payload:{raw:se,x:0,y:0,dataId:oe.label}})},[z]),Q=(0,t.useCallback)((oe,se)=>{R&&R(oe,se),G&&G(oe.label,S===P.Y.Hide?l.R.AppendToSelection:b(se))},[G,R,S]);switch(A){case o.jK.Table:return t.createElement(m,{className:K,items:x,placement:B,sortBy:T,sortDesc:U,onLabelClick:Q,onToggleSort:F||I,onLabelMouseOver:V,onLabelMouseOut:H,itemRenderer:L,readonly:N});case o.jK.List:return t.createElement(u,{className:K,items:x,placement:B,onLabelMouseOver:V,onLabelMouseOut:H,onLabelClick:Q,itemRenderer:L,readonly:N});default:return null}}M.displayName="VizLegend"},46920:(Y,O,e)=>{"use strict";e.d(O,{e:()=>u});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(59943),f=e(82897),d=e(2703),r=e(19882);const c=({stats:p})=>{const g=(0,s.wW)(a);return p.length===0?null:n.createElement(r.Y,{className:g.list,items:p,renderItem:y=>n.createElement("div",{className:g.item,title:y.description},y.title&&`${(0,f.capitalize)(y.title)}:`," ",(0,d.zc)(y))})},a=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});c.displayName="VizLegendStatsList";const u=({item:p,onLabelClick:g,onLabelMouseOver:y,onLabelMouseOut:E,className:h,readonly:v})=>{const C=(0,s.wW)(i),m=(0,n.useCallback)(b=>{y&&y(p,b)},[p,y]),D=(0,n.useCallback)(b=>{E&&E(p,b)},[p,E]),P=(0,n.useCallback)(b=>{g&&g(p,b)},[p,g]);return n.createElement("div",{className:(0,t.cx)(C.itemWrapper,p.disabled&&C.itemDisabled,h),"aria-label":o.wl.components.VizLegend.seriesName(p.label)},n.createElement(l.i,{seriesName:p.label,color:p.color,gradient:p.gradient,readonly:v}),n.createElement("button",{disabled:v,type:"button",title:p.label,onBlur:D,onFocus:m,onMouseOver:m,onMouseOut:D,onClick:P,className:C.label},p.label),p.getDisplayValues&&n.createElement(c,{stats:p.getDisplayValues()}))};u.displayName="VizLegendListItem";const i=p=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
    max-width: 600px;
    text-overflow: ellipsis;
    overflow: hidden;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${p.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${p.v1.palette.gray2};
  `})},59943:(Y,O,e)=>{"use strict";e.d(O,{i:()=>l});var t=e(66111),n=e(90208),o=e(60325),s=e(6264);const l=t.memo(({seriesName:f,color:d,gradient:r,readonly:c})=>{const{onSeriesColorChange:a}=(0,o.R9)(),u=(0,t.useCallback)(i=>a(f,i),[f,a]);return f&&a&&d&&!c?t.createElement(n.sp,{color:d,onChange:u,enableNamedColors:!0},({ref:i,showColorPicker:p,hideColorPicker:g})=>t.createElement(s.F,{color:d,className:"pointer",ref:i,onClick:p,onMouseLeave:g})):t.createElement(s.F,{color:d,gradient:r})});l.displayName="VizLegendSeriesIcon"},26993:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>l});var t=e(66111),n=e(82229);const o=(d,r,c,a)=>{const u=s(d,r,a),i=s(r,d,a),p=Math.max(u,i);let g=Math.floor(d/p),y=Math.ceil(a/g);g=Math.ceil(a/y);const E=g-(g*y-a),h=d/E-c+c/E;return{width:d/g-c+c/g,height:r/y-c+c/y,widthOnLastRow:h,xCount:g,yCount:y}};function s(d,r,c){const a=Math.ceil(Math.sqrt(c*d/r));return Math.floor(a*r/d)*a<c?r/Math.ceil(a*r/d):d/a}class l extends t.PureComponent{constructor(r){super(r),this.state={values:r.getValues()}}componentDidUpdate(r){const{renderCounter:c,source:a}=this.props;(c!==r.renderCounter||a!==r.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:r,width:c,height:a}=this.props;return r===n.wm.Auto?c>a?n.wm.Vertical:n.wm.Horizontal:r}renderGrid(){const{renderValue:r,height:c,width:a,itemSpacing:u,getAlignmentFactors:i,orientation:p}=this.props,{values:g}=this.state,y=o(a,c,u,g.length),E=i?i(g,y.width,y.height):{};let h=0,v=0,C=[];for(let m=0;m<g.length;m++){const D=g[m],b=v===y.yCount-1?y.widthOnLastRow:y.width,M=y.height,x=h*b+u*h,A=v*M+u*v,T={position:"absolute",left:x,top:A,width:`${b}px`,height:`${M}px`};C.push(t.createElement("div",{key:m,style:T},r({value:D,width:b,height:M,alignmentFactors:E,orientation:p,count:g.length}))),h++,h===y.xCount&&(h=0,v++)}return t.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:r,height:c,width:a,itemSpacing:u,getAlignmentFactors:i,autoGrid:p,orientation:g,minVizWidth:y,minVizHeight:E}=this.props,{values:h}=this.state;if(p&&g===n.wm.Auto)return this.renderGrid();const v={display:"flex"},C={display:"flex",overflow:`${y?"auto":"hidden"} ${E?"auto":"hidden"}`};let m=c,D=a,P=this.getOrientation();switch(P){case n.wm.Horizontal:C.flexDirection="column",C.height=`${c}px`,v.marginBottom=`${u}px`,D=a,m=Math.max(c/h.length-u+u/h.length,E??0);break;case n.wm.Vertical:C.flexDirection="row",C.justifyContent="space-between",v.marginRight=`${u}px`,m=c,D=Math.max(a/h.length-u+u/h.length,y??0)}v.width=`${D}px`,v.height=`${m}px`;const b=i?i(h,D,m):{};return t.createElement("div",{style:C},h.map((M,x)=>t.createElement("div",{key:x,style:f(v,x,h.length)},r({value:M,width:D,height:m,alignmentFactors:b,orientation:P,count:h.length}))))}}l.defaultProps={itemSpacing:8};function f(d,r,c){return r===c-1?{...d,marginRight:0,marginBottom:0}:d}},50800:(Y,O,e)=>{"use strict";e.d(O,{V:()=>f,c:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(6264);const l=r=>({icon:t.css`
      margin-right: ${r.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${r.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${r.spacing(2)};
      text-align: right;
    `,activeSeries:t.css`
      font-weight: ${r.typography.fontWeightBold};
      color: ${r.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${r.typography.fontWeightBold};
      font-size: ${r.typography.bodySmall.fontSize};
    `}),f=({color:r,label:c,value:a,isActive:u})=>{const i=(0,o.wW)(l);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(i.seriesTableRow,u&&i.activeSeries)},r&&n.createElement("div",{className:i.seriesTableCell},n.createElement(s.F,{color:r,className:i.icon})),c&&n.createElement("div",{className:(0,t.cx)(i.seriesTableCell,i.label)},c),a&&n.createElement("div",{className:(0,t.cx)(i.seriesTableCell,i.value)},a))},d=({timestamp:r,series:c})=>{const a=(0,o.wW)(l);return n.createElement(n.Fragment,null,r&&n.createElement("div",{className:a.timestamp,"aria-label":"Timestamp"},r),c.map((u,i)=>n.createElement(f,{isActive:u.isActive,label:u.label,color:u.color,value:u.value,key:`${u.label}-${i}`})))}},24505:(Y,O,e)=>{"use strict";e.d(O,{I:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(85511),l=e(20888);const f=({content:r,position:c,offset:a})=>{const u=(0,o.wW)(d);return c?n.createElement(s.h_,{className:u.portal},n.createElement(l.S,{position:c,offset:a||{x:0,y:0}},r)):null};f.displayName="VizTooltip";const d=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(Y,O,e)=>{"use strict";e.d(O,{S:()=>d});var t=e(9892),n=e(66111),o=e(830),s=e(72648),l=e(85419);const f=(c=0,a=0,u=0,i=0,p=0,g=0,y=0,E=0)=>{let h=c,v=a;const C=Math.max(c+p+u-(y-p),0),m=Math.abs(Math.min(c-p-u-p,0)),D=C>0,P=m>0,b=Math.max(a+g+i-(E-g),0),M=Math.abs(Math.min(a-g-i-g,0)),x=b>0,A=M>0;return D&&P?h=C>m?p:y-p-u:D?h=c-p-u:h=c+p,x&&A?v=b>M?g:E-g-i:x?v=a-g-i:v=a+g,{x:h,y:v}},d=({position:{x:c,y:a},offset:{x:u,y:i},children:p,allowPointerEvents:g=!1,className:y,...E})=>{const h=(0,n.useRef)(null),[v,C]=(0,n.useState)({width:0,height:0}),{width:m,height:D}=(0,o.Z)(),[P,b]=(0,n.useState)({x:c+u,y:a+i}),M=(0,n.useMemo)(()=>new ResizeObserver(A=>{for(let T of A){const S=Math.floor(T.contentRect.width+16),U=Math.floor(T.contentRect.height+2*8);(v.width!==S||v.height!==U)&&C({width:Math.min(S,m),height:Math.min(U,D)})}}),[v,m,D]);(0,n.useLayoutEffect)(()=>(h.current&&M.observe(h.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(h&&h.current){const{x:A,y:T}=f(c,a,v.width,v.height,u,i,m,D);b({x:A,y:T})}},[m,D,c,u,a,i,v]);const x=(0,s.wW)(r);return n.createElement("div",{ref:h,style:{position:"fixed",left:0,pointerEvents:g?"auto":"none",top:0,transform:`translate(${P.x}px, ${P.y}px)`,transition:"transform ease-out 0.1s"},...E,className:(0,t.cx)(x.wrapper,y)},p)};d.displayName="VizTooltipContainer";const r=c=>({wrapper:t.css`
    ${(0,l.getTooltipContainerStyles)(c)}
  `})},14835:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{Alert:()=>bt.b,AlertingSettings:()=>Hn.O,AsyncMultiSelect:()=>Ga.M8,AsyncSelect:()=>Ga.qb,AsyncVirtualizedSelect:()=>Ga.gY,AutoSaveField:()=>oe.h,AutoSizeInput:()=>ks.H,Badge:()=>mr.C,BarGauge:()=>Et.xf,BarGaugeDisplayMode:()=>Le.QH,BigValue:()=>We.w6,BigValueColorMode:()=>We.pc,BigValueGraphMode:()=>We.IG,BigValueJustifyMode:()=>We.ap,BigValueTextMode:()=>We.jG,BrowserLabel:()=>_t._,Button:()=>$a.zx,ButtonCascader:()=>D.O,ButtonGroup:()=>ss.h,ButtonSelect:()=>Ct.d,CallToActionCard:()=>Kt._,Card:()=>lr.Z,CardContainer:()=>fn._,Cascader:()=>m.v,CertificationKey:()=>Gt.W,Checkbox:()=>yr.X,ClickOutsideWrapper:()=>ut.L,ClipboardButton:()=>C.m,CodeEditor:()=>le.p,CodeEditorSuggestionItemKind:()=>fe.k,CollapsableSection:()=>Dt.s,Collapse:()=>Je.U,ColorPicker:()=>x.zH,ColorPickerInput:()=>A.T,ConfirmButton:()=>a.p,ConfirmModal:()=>ce.s,Container:()=>tr.W2,ContextMenu:()=>Jt.x,ControlledCollapse:()=>Je.y,Counter:()=>Ce.A,CustomHeadersSettings:()=>Cn.H,CustomScrollbar:()=>h.$,DataLinkButton:()=>Ve.k,DataLinkInput:()=>ft.v,DataLinksContextMenu:()=>Ht.V,DataLinksInlineEditor:()=>Lt.d,DataSourceHttpSettings:()=>Mn.E,DatePicker:()=>z.M,DatePickerWithInput:()=>G.d,DateTimePicker:()=>I.x,DeleteButton:()=>u.m,Drawer:()=>ha.d,Dropdown:()=>At.L,DropdownIndicator:()=>qa.m,EmptySearchResult:()=>S.K,ErrorBoundary:()=>pn.SV,ErrorBoundaryAlert:()=>pn.z4,ErrorWithStack:()=>Pn.X,EventsCanvas:()=>ja.TZ,FIXED_UNIT:()=>Be.j,FadeTransition:()=>on.n,FeatureBadge:()=>Wt.a,FeatureInfoBox:()=>Wt.Z,Field:()=>ds.g,FieldArray:()=>ga.F,FieldLinkList:()=>Xe.Z,FieldSet:()=>Za.C,FieldValidationMessage:()=>Ks.S,FileDropzone:()=>fr.Yo,FileDropzoneDefaultChildren:()=>fr.A_,FileListItem:()=>fr.K$,FileUpload:()=>Or.p,FilterInput:()=>Er.H,FilterPill:()=>de.B,Form:()=>cs.l,FormattedValueDisplay:()=>qe.W,FullWidthButtonContainer:()=>st.f,Gauge:()=>mt.a,Graph:()=>vt.k,GraphContextMenu:()=>Ot.w,GraphContextMenuHeader:()=>Ot.b,GraphNG:()=>Be.d,GraphSeriesToggler:()=>Pt.U,GraphWithLegend:()=>rt.U,HorizontalGroup:()=>tr.Lh,Icon:()=>r.J,IconButton:()=>c.h,InfoBox:()=>zt.v,InlineField:()=>dn._,InlineFieldRow:()=>zn.Z,InlineFormLabel:()=>Rn.c,InlineLabel:()=>Tn.W,InlineSegmentGroup:()=>ln.m,InlineSwitch:()=>pr.x,InlineToast:()=>P.K,Input:()=>er.I,InputControl:()=>Ha.g,InteractiveTable:()=>H.e,JSONFormatter:()=>jt.g,JsonExplorer:()=>sn.u,KeyboardPlugin:()=>Tt.Cm,Label:()=>bs._,LegacyForms:()=>at,LegacyInputStatus:()=>n.G,Legend:()=>Us.D,Link:()=>Ts.r,LinkButton:()=>$a.Qj,List:()=>V.a,LoadingBar:()=>M.F,LoadingPlaceholder:()=>b.u,Marker:()=>ja.Jx,Menu:()=>On.v,MenuGroup:()=>Nn.k,MenuItem:()=>jn.s,Modal:()=>ne.u,ModalHeader:()=>re.x,ModalRoot:()=>Ie.Y0,ModalTabContent:()=>me.Q,ModalTabsHeader:()=>ve.H,ModalsContext:()=>Ie.kr,ModalsController:()=>Ie.JY,ModalsProvider:()=>Ie.$i,MultiSelect:()=>Ga.NU,PageToolbar:()=>Ge.X,Pagination:()=>se.t,PanelChrome:()=>et.fm,PanelChromeErrorIndicator:()=>Fe.g,PanelChromeLoadingIndicator:()=>Ue.T,PanelContainer:()=>Nt.l,PanelContextProvider:()=>Ee._w,PanelContextRoot:()=>Ee.bb,PlotLegend:()=>ia.l,PluginSignatureBadge:()=>tn.o,Popover:()=>g.J,PopoverController:()=>p.D,Portal:()=>E.h_,PortalContainer:()=>E.lO,QueryField:()=>ee.q,RadioButtonGroup:()=>ur.S,RadioButtonList:()=>sr.x,RangeSlider:()=>Wa.U,ReactMonacoEditor:()=>q.o,RefreshPicker:()=>F.dP,RelativeTimeRangePicker:()=>Os.x,RenderUserContentAsHTML:()=>be.D,ScaleDistribution:()=>Le.wf,SecretInput:()=>Vs.m,SecretTextArea:()=>Tr.Z,SecureSocksProxySettings:()=>_n.i,Segment:()=>In.X,SegmentAsync:()=>Ln.V,SegmentInput:()=>Un.X,SegmentSection:()=>da.f,SegmentSelect:()=>qn.V,Select:()=>Ga.Ph,SelectContainer:()=>Ga.eI,SeriesColorPicker:()=>x.sp,SeriesColorPickerPopover:()=>T.j,SeriesColorPickerPopoverWithTheme:()=>T.q,SeriesIcon:()=>$t.F,SeriesTable:()=>De.c,SeriesTableRow:()=>De.V,SeriesVisibilityChangeBehavior:()=>He.Y,SeriesVisibilityChangeMode:()=>wt.R,SetInterval:()=>gt.F,SlideOutTransition:()=>rn.R,Slider:()=>Ta.i,Sparkline:()=>Qe.b,Spinner:()=>Bt.$,StatsPicker:()=>R.m,Switch:()=>pr.r,TLSAuthSettings:()=>oa.s,Tab:()=>ht.O,TabContent:()=>ye.I,TabbedContainer:()=>v.W,Table:()=>Te.i,TableCellDisplayMode:()=>Le.h2,TableInputCSV:()=>Ye.w,TabsBar:()=>it.J,Tag:()=>ie.V,TagList:()=>j.P,TagsInput:()=>Q.B,TextArea:()=>Cr.K,TimeOfDayPicker:()=>K.y,TimePickerTooltip:()=>B.IF,TimeRangeInput:()=>Js.K,TimeRangePicker:()=>B.Xc,TimeSeries:()=>Ae.p,TimeZonePicker:()=>L.O,Toggletip:()=>y.P,ToolbarButton:()=>Oa.h,ToolbarButtonRow:()=>Ia.R,Tooltip:()=>i.u,TooltipPlugin:()=>Tt.ii,UPLOT_AXIS_FONT_SIZE:()=>aa.gD,UPlotChart:()=>Qn.N,UPlotConfigBuilder:()=>kn.U,UnitPicker:()=>U.n,ValuePicker:()=>ys.b,VerticalGroup:()=>tr.wc,VerticalTab:()=>Re.L,VirtualizedSelect:()=>Ga.LT,VizLayout:()=>Me.AY,VizLegend:()=>Ze.l,VizLegendListItem:()=>lt.e,VizRepeater:()=>Ne.Q,VizTooltip:()=>Mt.I,VizTooltipContainer:()=>ue.S,WeekStartPicker:()=>N.z,WithContextMenu:()=>ya.z,XYCanvas:()=>ja.K2,ZoomPlugin:()=>Tt.Rb,buildScaleKey:()=>ct.z,clearButtonStyles:()=>$a.gN,convertOldAngularValueMapping:()=>xt.PR,defaultIntervals:()=>F.o5,fieldMatchersUI:()=>la.i,getCardStyles:()=>lr.L,getInputStyles:()=>er.H,getPortalContainer:()=>E.RN,getSelectStyles:()=>es.D,graphFieldOptions:()=>Dn.q,graphTickFormatter:()=>tt.sV,graphTimeFormat:()=>tt.mc,preparePlotFrame:()=>ct.R,resetSelectStyles:()=>va.Z,sharedInputStyle:()=>is.RK,sharedSingleStatMigrationHandler:()=>xt.rD,sharedSingleStatPanelChangedHandler:()=>xt.ZH,useGraphNGContext:()=>nt.z,usePanelContext:()=>Ee.R9,variableSuggestionToCodeEditorSuggestion:()=>Z.T,withErrorBoundary:()=>pn.Pf});var t=e(95569),n=e(50869),o=e(21662),s=e(76603),l=e(29418),f=e(18979),d=e(34517),r=e(39904),c=e(8180),a=e(71657),u=e(13626),i=e(61860),p=e(39604),g=e(56921),y=e(50819),E=e(85511),h=e(68226),v=e(18607),C=e(94599),m=e(95093),D=e(19974),P=e(4784),b=e(61744),M=e(74750),x=e(90208),A=e(83957),T=e(43598),S=e(69097),U=e(61227),R=e(71294),F=e(5562),B=e(3630),K=e(91942),L=e(52566),N=e(80124),z=e(77239),G=e(86348),I=e(35575),V=e(56766),H=e(65455),Q=e(43339),oe=e(30532),se=e(78889),ie=e(34719),j=e(34807),de=e(41165),ce=e(98102),ee=e(69659),le=e(9405),q=e(84128),fe=e(10339),Z=e(25503),ne=e(35029),re=e(38894),ve=e(88683),me=e(72535),Ie=e(5191),Ge=e(35224),gt=e(41490),Te=e(88144),Le=e(40538),Ye=e(91363),it=e(72142),ht=e(79841),Re=e(13026),ye=e(94893),Ce=e(51275),be=e(39856),We=e(57426),Qe=e(67307),mt=e(69823),vt=e(87691),rt=e(29781),Ot=e(65987),Et=e(19670),Mt=e(24505),ue=e(20888),De=e(50800),Ne=e(4387),tt=e(31438),et=e(38208),Ue=e(8861),Fe=e(99562),Ee=e(60325),Me=e(729),He=e(26993),Ze=e(78056),lt=e(46920),bt=e(45253),Pt=e(56506),Je=e(2352),Dt=e(20941),Ve=e(89719),Xe=e(45576),st=e(97389),ut=e(94437),xt=e(70161),Kt=e(97097),Jt=e(30909),On=e(95130),Nn=e(14391),jn=e(42044),ya=e(74285),Lt=e(68037),ft=e(35919),Ht=e(18543),$t=e(6264),zt=e(17784),Wt=e(26338),jt=e(16065),sn=e(73892),pn=e(53546),Pn=e(39198),Mn=e(12006),Cn=e(92099),Hn=e(64260),_n=e(12580),oa=e(23622),Gt=e(85615),Bt=e(67487),on=e(19801),rn=e(41200),In=e(70044),Ln=e(68118),Un=e(58564),qn=e(2357),da=e(30991),ha=e(30979),Ta=e(90330),Wa=e(97759),cs=e(94270),is=e(73267),Ha=e(63619),$a=e(31403),ss=e(26202),Oa=e(64319),Ia=e(8125),ys=e(15670),la=e(6058),Ts=e(29460),bs=e(64353),ds=e(24799),Us=e(19825),Za=e(13393),Ks=e(57227),dn=e(81764),ln=e(62157),Tn=e(77117),zn=e(11543),ga=e(70132),va=e(54897),Ga=e(8581),qa=e(62997),es=e(27501),us=e(60857),hs=e.n(us),$s={};for(const An in us)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(An)<0&&($s[An]=()=>us[An]);e.d(O,$s);var tr=e(52081),mr=e(19985),ur=e(2594),sr=e(29395),er=e(46967),ks=e(68668),Er=e(14747),Vs=e(70862),Tr=e(88892),pr=e(8944),yr=e(58255),Cr=e(97379),Or=e(82381),fr=e(47556),Js=e(95794),Os=e(19115),lr=e(72948),fn=e(35633),qe=e(72777),Ct=e(44342),At=e(71698),tn=e(51613),Rn=e(19426),Dn=e(26372),kn=e(13347),aa=e(23888),Qn=e(3200),ia=e(68416),ja=e(56709),Tt=e(57989),Be=e(72269),Ae=e(68948),nt=e(16566),ct=e(86979),wt=e(17882),_t=e(85951),Nt=e(72080);const at={SecretFormField:d.c,FormField:t.W,Select:l.Ph,AsyncSelect:l.qb,IndicatorsContainer:o.B,NoOptionsMessage:s.P,Input:n.I,Switch:f.r}},19801:(Y,O,e)=>{"use strict";e.d(O,{n:()=>f});var t=e(9892),n=e(66111),o=e(79288),s=e(7804);const l=(0,s.B)(d=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${d}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${d}ms ease-out;
    `}));function f(d){const{visible:r,children:c,duration:a=250}=d,u=l(a);return n.createElement(o.Z,{in:r,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:u},c)}},41200:(Y,O,e)=>{"use strict";e.d(O,{R:()=>f});var t=e(9892),n=e(66111),o=e(79288),s=e(7804);const l=(0,s.B)((d,r,c)=>({enter:t.css`
      label: enter;
      ${r}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${r}: ${c}px;
      opacity: 1;
      transition: opacity ${d}ms ease-out, ${r} ${d}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${r}: ${c}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${r}: 0;
      transition: opacity ${d}ms ease-out, ${r} ${d}ms ease-out;
    `}));function f(d){const{visible:r,children:c,duration:a=250,horizontal:u,size:i}=d,p=l(a,u?"width":"height",i);return n.createElement(o.Z,{in:r,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:p},c)}},3200:(Y,O,e)=>{"use strict";e.d(O,{N:()=>r});var t=e(66111),n=e(75974),o=e(2445);function s(c,a){return a.width===c.width&&a.height===c.height}function l(c,a){return a.data===c.data}function f(c,a){return a.config===c.config}function d(c,a){let u=c.timeRange,i=a.timeRange;return u===i||i.from.valueOf()===u.from.valueOf()&&i.to.valueOf()===u.to.valueOf()}class r extends t.Component{constructor(a){super(a),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:a,height:u,plotRef:i}=this.props;if(this.state.plot?.destroy(),a===0&&u===0)return;this.props.config.addHook("setSize",y=>{y.over});const p={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,o.Zp)("UPlot",!1,"Reinitializing plot",p);const g=new n.Z(p,this.props.data,this.plotContainer.current);i&&i(g),this.setState({plot:g})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(a){let{plot:u}=this.state;s(a,this.props)?f(a,this.props)?l(a,this.props)?d(a,this.props)||u?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):u?.setData(this.props.data):this.reinitPlot():u?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(Y,O,e)=>{"use strict";e.d(O,{l:()=>i,o:()=>u});var t=e(66111),n=e(30471),o=e(72990),s=e(33750),l=e(6194),f=e(40538),d=e(72648),r=e(729),c=e(78056);const a=p=>p==null?"-":p.toFixed(1);function u(p,g){return p.getSeries().some(y=>{const E=y.props.dataFrameFieldIndex;if(!E)return!1;const h=g[E.frameIndex]?.fields[E.fieldIndex];return!(!h||h.config.custom?.hideFrom?.legend)})}const i=t.memo(({data:p,config:g,placement:y,calcs:E,displayMode:h,...v})=>{const C=(0,d.l4)(),m=g.getSeries().map(D=>{const P=D.props,b=P.dataFrameFieldIndex,M=g.getAxisPlacement(D.props.scaleKey);if(!b)return;const x=p[b.frameIndex]?.fields[b.fieldIndex];if(!x||x.config.custom?.hideFrom?.legend)return;const A=(0,n.CZ)(x,p[b.frameIndex],p),S=(0,o.YO)(x,C).color;return{disabled:!(P.show??!0),fieldIndex:b,color:S,label:A,yAxis:M===f.LB.Left||M===f.LB.Bottom?1:2,getDisplayValues:()=>{if(!E?.length)return[];const U=x.display??a;let R=null;const F=(0,s.Kx)({field:x,reducers:E});return E.map(B=>{const K=s.TB.get(B);let L=U;return K.id===s.gz.diffperc&&(L=(0,l.U_)({field:{...x,config:{...x.config,unit:"percentunit"}},theme:C})),(K.id===s.gz.count||K.id===s.gz.changeCount||K.id===s.gz.distinctCount)&&(R||(R=(0,l.U_)({field:{...x,config:{...x.config,unit:"none"}},theme:C})),L=R),{...L(F[B]),title:K.name,description:K.description}})},getItemKey:()=>`${A}-${b.frameIndex}-${b.fieldIndex}`}}).filter(D=>D!==void 0);return t.createElement(r.AY.Legend,{placement:y,...v},t.createElement(c.l,{placement:y,items:m,displayMode:h,sortBy:v.sortBy,sortDesc:v.sortDesc}))});i.displayName="PlotLegend"},26372:(Y,O,e)=>{"use strict";e.d(O,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(Y,O,e)=>{"use strict";e.d(O,{ff:()=>u,gD:()=>c,mr:()=>p});var t=e(2703),n=e(56190),o=e(82410),s=e(77258),l=e(40538),f=e(4176),d=e(13890),r=e(36562);const c=12,a=8;class u extends d.L{merge(E){this.props.size=(0,r.V)("max",this.props.size,E.size),this.props.label||(this.props.label=E.label),this.props.placement===l.LB.Auto&&(this.props.placement=E.placement)}calculateSpace(E,h,v,C,m){const D=E.axes[h],P=E.scales[D.scale];if(D.side!==2||!P)return 30;const b=40;if(P.time){const M=m/b,x=(C-v)/M,A=p(E,[v],h,b,x);return(0,f.X1)(A[0],c).width+18}return b}calculateAxisSize(E,h,v){const C=E.axes[v];let m=C.ticks.size;if(C.side===2)m+=C.gap+c;else if(h?.length){let D=h.reduce((b,M)=>Math.max(b,(0,f.X1)(M,c).width),0);const P=Math.min(E.width*.4,D);m+=C.gap+C.labelGap+P}return Math.ceil(m)}getConfig(){let{scaleKey:E,label:h,show:v=!0,placement:C=l.LB.Auto,grid:m={show:!0},ticks:D,space:P,filter:b,gap:M=5,formatValue:x,splits:A,values:T,incrs:S,isTime:U,timeZone:R,theme:F,tickLabelRotation:B,size:K,color:L,border:N,decimals:z,distr:G=l.wf.Linear}=this.props;const I=`${c}px ${F.typography.fontFamily}`,V=F.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(E)&&(A=[0,1]),z===0&&G===l.wf.Linear&&(b=(Q,oe)=>oe.map(se=>Number.isInteger(se)?se:null));let H={scale:E,show:v,stroke:L??F.colors.text.primary,side:g(C),font:I,size:K??((Q,oe,se)=>this.calculateAxisSize(Q,oe,se)),rotate:B,gap:M,labelGap:0,grid:{show:m.show,stroke:V,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:V,width:1/devicePixelRatio,size:4},D),splits:A,values:T,space:P??((Q,oe,se,ie,j)=>this.calculateSpace(Q,oe,se,ie,j)),filter:b,incrs:S};return N!=null&&(H.border=N),h!=null&&h.length>0&&(H.label=h,H.labelSize=c+a,H.labelFont=I,H.labelGap=a),T?H.values=T:U?H.values=p:x&&(H.values=(Q,oe,se,ie,j)=>{let de=(0,n.d)((0,n.O)(j,6));return oe.map(ce=>x(ce,de>0?de:void 0))}),H.timeZone=R,H}}const i={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function p(y,E,h,v,C){const m=y.axes[h].timeZone,D=y.scales.x,P=(D?.max??0)-(D?.min??0),b=Math.round(i.year/i.day)*i.day,M=Math.round(C/i.day)*i.day;let x=o.U6.interval.year;return C<i.second?x=o.U6.interval.millisecond:C<=i.minute?x=o.U6.interval.second:P<=i.day?x=o.U6.interval.minute:C<=i.day?x=o.U6.interval.hour:P<i.year?x=o.U6.interval.day:M===b?x=o.U6.interval.year:C<=i.year&&(x=o.U6.interval.month),E.map(A=>A==null?"":(0,s.dq)(A,{format:x,timeZone:m}))}function g(y){switch(y){case l.LB.Top:return 0;case l.LB.Right:return 1;case l.LB.Bottom:return 2;case l.LB.Left:}return 3}},13347:(Y,O,e)=>{"use strict";e.d(O,{U:()=>m});var t=e(82897),n=e(75974),o=e(75849),s=e(56808),l=e(40538),f=e(2445),d=e(23888),r=e(36562),c=e(53768),a=e(5680),u=e(13890),i=e(52240);class p extends u.L{getConfig(){const{facets:P,drawStyle:b,pathBuilder:M,pointsBuilder:x,pointsFilter:A,lineInterpolation:T,lineWidth:S,lineStyle:U,barAlignment:R,barWidthFactor:F,barMaxWidth:B,showPoints:K,pointSize:L,scaleKey:N,pxAlign:z,spanNulls:G,show:I=!0}=this.props;let V={},H=this.getLineColor();V.stroke=H,M!=null?(V.paths=M,V.width=S):b===l.l8.Points?V.paths=()=>null:b!=null&&(V.width=S,U&&U.fill!=="solid"&&(U.fill==="dot"&&(V.cap="round"),V.dash=U.dash??[10,10]),V.paths=(se,ie,j,de)=>y(b,T,R,F,B)(se,ie,j,de));const Q=typeof H=="string"?H:(se,ie)=>se.series[ie]._stroke,oe={points:{stroke:Q,fill:Q,size:!L||L<S?void 0:L,filter:A}};return x!=null?oe.points.show=x:b===l.l8.Points?oe.points.show=!0:K===l.Jp.Auto?b===l.l8.Bars&&(oe.points.show=!1):K===l.Jp.Never?oe.points.show=!1:K===l.Jp.Always&&(oe.points.show=!0),{scale:N,facets:P,spanGaps:typeof G=="number"?!1:G,value:()=>"",pxAlign:z,show:I,fill:this.getFill(),...V,...oe}}getLineColor(){const{lineColor:P,gradientMode:b,colorMode:M,thresholds:x,theme:A,hardMin:T,hardMax:S,softMin:U,softMax:R,dynamicSeriesColor:F}=this.props;return b===l.FI.None&&F?(B,K)=>F(K)??P??c.R:b===l.FI.Scheme&&M?.id!==c.S.Fixed?(0,i.P2)(1,A,M,x,T,S,U,R):P??c.R}getFill(){const{lineColor:P,fillColor:b,gradientMode:M,fillOpacity:x,colorMode:A,thresholds:T,theme:S,hardMin:U,hardMax:R,softMin:F,softMax:B,dynamicSeriesColor:K}=this.props;if(b)return b;const L=M??l.FI.None,N=(x??0)/100;if(L===l.FI.None&&K&&N>0)return(z,G)=>{let I=z.series[G]._stroke;return a.alpha(I??"",N)};switch(L){case l.FI.Opacity:return(0,i.DT)(b??P,N);case l.FI.Hue:return(0,i.oN)(b??P,N,S);case l.FI.Scheme:if(A?.id!==c.S.Fixed)return(0,i.P2)(N,S,A,T,U,R,F,B);default:if(N>0)return a.alpha(P??"",N)}}}let g;function y(D,P,b=0,M=.6,x=200){const A=n.Z.paths;if(g||(g={linear:A.linear(),smooth:A.spline(),stepBefore:A.stepped({align:-1}),stepAfter:A.stepped({align:1})}),D===l.l8.Bars){let T=`bars|${b}|${M}|${x}`;return g[T]||(g[T]=A.bars({size:[M,x],align:b})),g[T]}else if(D===l.l8.Line){if(P===l.KC.StepBefore)return g.stepBefore;if(P===l.KC.StepAfter)return g.stepAfter;if(P===l.KC.Smooth)return g.smooth}return g.linear}var E=e(28550),h=e(69098);function v(D){const P=D.config.mode===l.i3.Dashed||D.config.mode===l.i3.DashedAndArea?[10,10]:null;function b(K,L,N,z){let G=K.ctx,I=0;for(let V=0;V<N.length;V++)if(N[V].color==="transparent"){I=V;break}G.lineWidth=2,P&&G.setLineDash(P);for(let V=1;V<N.length;V++){const H=N[V];let Q;I>=V&&V>0?Q=(0,E.Z)(z.visualization.getColorByName(N[V-1].color)):Q=(0,E.Z)(z.visualization.getColorByName(H.color)),Q.getAlpha()===1&&Q.setAlpha(.7);let oe=Math.round(K.bbox.left),se=Math.round(K.valToPos(H.value,L,!0)),ie=Math.round(K.bbox.left+K.bbox.width),j=Math.round(K.valToPos(H.value,L,!0));G.beginPath(),G.moveTo(oe,se),G.lineTo(ie,j),G.strokeStyle=Q.toString(),G.stroke()}}function M(K,L,N,z){let G=K.ctx,I=(0,i.KV)(K,L,N.map(V=>{let H=(0,E.Z)(z.visualization.getColorByName(V.color));return H.getAlpha()===1&&H.setAlpha(.15),[V.value,H.toString()]}),!0);G.fillStyle=I,G.fillRect(K.bbox.left,K.bbox.top,K.bbox.width,K.bbox.height)}const{scaleKey:x,thresholds:A,theme:T,config:S,hardMin:U,hardMax:R,softMin:F,softMax:B}=D;return K=>{const L=K.ctx,{min:N,max:z}=K.scales.x,{min:G,max:I}=K.scales[x];if(N==null||z==null||G==null||I==null)return;let{steps:V,mode:H}=A;if(H===h.H.Percentage){let[Q,oe]=(0,i.A9)(K,x,U,R,F,B),se=oe-Q;V=V.map(ie=>({...ie,value:Q+se*(ie.value/100)}))}switch(L.save(),S.mode){case l.i3.Line:case l.i3.Dashed:b(K,x,V,T);break;case l.i3.Area:M(K,x,V,T);break;case l.i3.LineAndArea:case l.i3.DashedAndArea:M(K,x,V,T),b(K,x,V,T)}L.restore()}}const C={drag:{setScale:!1},points:{size:(D,P)=>D.series[P].points.size*2,width:(D,P,b)=>b/4},focus:{prox:30}};class m{constructor(P=o.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=b=>{let M=new Date(b);return this.tz?n.Z.tzDate(M,this.tz):M},this.tz=(0,s.Pr)(P,Date.now())?.ianaName}addHook(P,b){(0,f.Zp)("UPlotConfigBuilder",!1,"addHook",P),this.hooks[P]||(this.hooks[P]=[]),this.hooks[P].push(b)}addThresholds(P){this.thresholds[P.scaleKey]||(this.thresholds[P.scaleKey]=P,this.addHook("drawClear",v(P)))}addAxis(P){P.placement=P.placement??l.LB.Auto,P.grid=P.grid??{};let b=P.scaleKey;if(b==="x"&&(b+=P.timeZone??""),this.axes[b]){this.axes[b].merge(P);return}P.placement===l.LB.Auto&&(P.placement=this.hasLeftAxis?l.LB.Right:l.LB.Left),P.placement===l.LB.Left&&(this.hasLeftAxis=!0),P.placement===l.LB.Hidden&&(P.grid.show=!1,P.size=0),this.axes[b]=new d.ff(P)}getAxisPlacement(P){return this.axes[P]?.props.placement??l.LB.Left}setCursor(P){this.cursor=(0,t.merge)({},this.cursor,P)}setMode(P){this.mode=P}setSelect(P){this.select=P}addSeries(P){this.series.push(new p(P))}getSeries(){return this.series}addScale(P){const b=this.scales.find(M=>M.props.scaleKey===P.scaleKey);if(b){b.merge(P);return}this.scales.push(new r.I(P))}addBand(P){this.bands.push(P)}setStackingGroups(P){this.stackingGroups=P}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(P){this.tooltipInterpolator=P}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(P){this.prepData=b=>(this.frames=b,P(b,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(P){this.padding=P}getConfig(){const P={...f.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};P.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),P.series=[...P.series,...this.series.map(M=>M.getConfig())],P.scales=this.scales.reduce((M,x)=>({...M,...x.getConfig()}),{}),P.hooks=this.hooks,P.select=this.select;const b=(M="")=>(x,A)=>{let T=x.series[A].points._stroke;if(typeof T!="string"){let S=this.frames[0].fields[A];T=S.display(S.values[x.cursor.idxs[A]]).color}return T+M};return P.cursor=(0,t.merge)({},C,{points:{stroke:b("80"),fill:b()}},this.cursor),P.tzDate=this.tzDate,Array.isArray(this.padding)&&(P.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(M=>{(0,f.Kq)(M).forEach(x=>{this.addBand(x)})}),this.bands.length&&(P.bands=this.bands),P}ensureNonOverlappingAxes(P){const b=P.find(A=>A.props.scaleKey==="x"),M=P.filter(A=>A.props.grid?.show===void 0),x=M.findIndex(A=>A.props.placement===l.LB.Left||A.props.placement===l.LB.Right||A.props.placement===l.LB.Bottom&&A!==b);for(let A=0;A<M.length;A++)M[A]===b||A===x?M[A].props.grid.show=!0:M[A].props.grid.show=!1;return P}}},36562:(Y,O,e)=>{"use strict";e.d(O,{I:()=>f,V:()=>d});var t=e(75974),n=e(75133),o=e(2703),s=e(40538),l=e(13890);class f extends l.L{merge(c){this.props.min=d("min",this.props.min,c.min),this.props.max=d("max",this.props.max,c.max)}getConfig(){let{isTime:c,scaleKey:a,min:u,max:i,softMin:p,softMax:g,range:y,direction:E,orientation:h,centeredZero:v,decimals:C}=this.props;const m=this.props.distribution,D=c?{}:{distr:m===s.wf.Symlog?4:m===s.wf.Log?3:m===s.wf.Ordinal?2:1,log:m===s.wf.Log||m===s.wf.Symlog?this.props.log??2:void 0,asinh:m===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(m===s.wf.Log){let R=this.props.log,F=R===2?Math.log2:Math.log10;u!=null&&(u<=0?u=null:u=R**Math.floor(F(u))),i!=null&&(i<=0?i=null:i=R**Math.ceil(F(i))),p!=null&&(p<=0?p=null:p=R**Math.floor(F(p))),g!=null&&(g<=0?g=null:g=R**Math.ceil(F(g)))}let P=p==null?3:1,b=g==null?3:1;const M={min:{pad:.1,hard:u??-1/0,soft:p||0,mode:P},max:{pad:.1,hard:i??1/0,soft:g||0,mode:b}};let x=p==null&&u!=null,A=g==null&&i!=null,T=x&&A;const S=(R,F,B,K)=>{const L=R.scales[K];let N=[F,B];if(K==="x"&&!c||!T&&F==null&&B==null)return N;let z=L.log??10;if(L.distr===1||L.distr===2||L.distr===4){if(v){let G=Math.abs(F),I=Math.abs(B),V=Math.max(G,I);V===0&&(V=80),F=-V,B=V}L.distr===4?N=t.Z.rangeAsinh(F,B,z,!0):N=t.Z.rangeNum(x?u:F,A?i:B,M)}else L.distr===3&&(N=t.Z.rangeLog(u??F,i??B,z,!0));if(C===0)if(L.distr===1||L.distr===2)N[0]=(0,n.mB)(N[0],1),N[1]=(0,n.UO)(N[1],1);else if(L.distr===3){let G=L.log===2?Math.log2:Math.log10;if(N[0]<=1)N[0]=1;else{let V=Math.floor(G(N[0]));N[0]=z**V}let I=Math.ceil(G(N[1]));N[1]=z**I,N[0]===N[1]&&(N[1]*=z)}else L.distr===4&&(N[0]=(0,n.mB)(N[0],1),N[1]=(0,n.UO)(N[1],1));return(L.distr===1||L.distr===4)&&(x&&(N[0]=u),A&&(N[1]=i)),N[0]>=N[1]&&(N[0]=L.distr===3?1:0,N[1]=100),N};let U=!c&&!T;return(0,o.br)(a)&&(U=!1,y=[0,1]),{[a]:{time:c,auto:U,range:y??S,dir:E,ori:h,...D}}}}function d(r,c,a){const u=c!=null,i=a!=null;return u?i?r==="min"?c<a?c:a:c>a?c:a:c:a}},52240:(Y,O,e)=>{"use strict";e.d(O,{A9:()=>p,DT:()=>r,KV:()=>u,P2:()=>g,oN:()=>c});var t=e(28550),n=e(5680),o=e(53768),s=e(69098),l=e(40538),f=e(4176);function d(y,E,h){let v=0,C=0,m=0,D=0;return y===a.Down?(C=E.top,D=E.top+E.height):y===a.Left?(v=E.left+E.width,m=E.left):y===a.Up?(C=E.top+E.height,D=E.top):y===a.Right&&(v=E.left,m=E.left+E.width),h.createLinearGradient(v,C,m,D)}function r(y,E){return(h,v)=>{const C=(0,f.AE)(),m=d(h.scales.x.ori===l.wN.Horizontal?a.Down:a.Left,h.bbox,C);return m.addColorStop(0,n.alpha(y,E)),m.addColorStop(1,n.alpha(y,0)),m}}function c(y,E,h){return(v,C)=>{const m=(0,f.AE)(),D=d(v.scales.x.ori===l.wN.Horizontal?a.Down:a.Left,v.bbox,m),P=(0,t.Z)(y).spin(-15),b=(0,t.Z)(y).spin(15);return h.isDark?(D.addColorStop(0,b.lighten(10).setAlpha(E).toString()),D.addColorStop(1,P.darken(10).setAlpha(E).toString())):(D.addColorStop(0,b.lighten(10).setAlpha(E).toString()),D.addColorStop(1,P.setAlpha(E).toString())),D}}var a=(y=>(y[y.Right=0]="Right",y[y.Up=1]="Up",y[y.Left=2]="Left",y[y.Down=3]="Down",y))(a||{});function u(y,E,h,v=!1){let C=y.scales[E],m=null,D=null;for(let L=0;L<h.length;L++){let N=h[L][0];if((N<=C.min||m==null)&&(m=L),D=L,N>=C.max)break}if(m===D)return h[m][1];let P=h[m][0],b=h[D][0];P===-1/0&&(P=C.min),b===1/0&&(b=C.max);let M=Math.round(y.valToPos(P,E,!0)),x=Math.round(y.valToPos(b,E,!0)),A=M-x;if(A===0)return h[D][1];let T,S,U,R;y.scales.x.ori===l.wN.Horizontal?(T=U=0,S=M,R=x):(S=R=0,T=M,U=x);let B=(0,f.AE)().createLinearGradient(T,S,U,R),K;for(let L=m;L<=D;L++){let N=h[L],z=L===m?M:L===D?x:Math.round(y.valToPos(N[0],E,!0)),G=(M-z)/A;v&&L>m&&B.addColorStop(G,K),B.addColorStop(G,K=N[1])}return B}function i(y,E){let h=y.scales[E],v=1/0,C=-1/0;return y.series.forEach((m,D)=>{if(m.show&&m.scale===E)if(m.min==null){let P=y.data[D];for(let b=0;b<P.length;b++)P[b]!=null&&(v=Math.min(v,P[b]),C=Math.max(C,P[b]))}else v=Math.min(v,m.min),C=Math.max(C,m.max)}),C===v&&(v=h.min,C=h.max),[v,C]}function p(y,E,h,v,C,m){let D=h??C??null,P=v??m??null;if(D==null||P==null){let[b,M]=i(y,E);D=D??b??0,P=P??M??100}return[D,P]}function g(y,E,h,v,C,m,D,P){if(!h)throw Error("Missing colorMode required for color scheme gradients");if(!v)throw Error("Missing thresholds required for color scheme gradients");return(b,M)=>{let x=b.series[M].scale,A="";if(h.id===o.S.Thresholds)if(v.mode===s.H.Absolute){const T=v.steps.map(S=>[S.value,n.alpha(E.visualization.getColorByName(S.color),y)]);A=u(b,x,T,!0)}else{const[T,S]=p(b,x,C,m,D,P),U=S-T,R=v.steps.map(F=>[T+U*(F.value/100),n.alpha(E.visualization.getColorByName(F.color),y)]);A=u(b,x,R,!0)}else if(h.getColors){const T=h.getColors(E),[S,U]=p(b,x,C,m,D,P),R=U-S,F=T.map((B,K)=>[S+R*(K/(T.length-1)),n.alpha(E.visualization.getColorByName(B),y)]);A=u(b,x,F,!1)}return A}}},66243:(Y,O,e)=>{"use strict";e.d(O,{T:()=>l});var t=e(66111),n=e(41213),o=e(50215),s=e(45807);function l({id:f,events:d,renderEventMarker:r,mapEventToXYCoords:c,config:a}){const u=(0,t.useRef)(),[i,p]=(0,t.useState)(0),g=(0,n.Z)();(0,t.useLayoutEffect)(()=>{a.addHook("init",E=>{u.current=E}),a.addHook("draw",()=>{g()&&p(E=>E+1)})},[a,p]);const y=(0,t.useMemo)(()=>{const E=[];if(!u.current||d.length===0)return E;for(let h=0;h<d.length;h++){const v=d[h];for(let C=0;C<v.length;C++){const m=c(v,{fieldIndex:C,frameIndex:h});m&&E.push(t.createElement(o.J,{...m,key:`${f}-marker-${h}-${C}`},r(v,{fieldIndex:C,frameIndex:h})))}}return t.createElement(t.Fragment,null,E)},[d,r,i]);return u.current?t.createElement(s.K,{left:u.current.bbox.left/window.devicePixelRatio,top:u.current.bbox.top/window.devicePixelRatio},y):null}},50215:(Y,O,e)=>{"use strict";e.d(O,{J:()=>n});var t=e(66111);const n=({x:o,y:s,children:l})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${o}px`}},l)},45807:(Y,O,e)=>{"use strict";e.d(O,{K:()=>o});var t=e(9892),n=e(66111);const o=({children:s,left:l,top:f})=>{const d=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${l}px;
      top: ${f}px;
    `,[l,f]);return n.createElement("div",{className:d},s)}},56709:(Y,O,e)=>{"use strict";e.d(O,{Jx:()=>n.J,K2:()=>o.K,TZ:()=>t.T});var t=e(66243),n=e(50215),o=e(45807)},16366:(Y,O,e)=>{"use strict";e.d(O,{C:()=>r});var t=e(82897),n=e.n(t),o=e(66111);const s=.1,l=2,f=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),d=c=>{let a=c.root.closest("[tabindex]"),u=new Set,i=null,p=null;if(!a)return;const g=(D,P)=>{const{cursor:b}=c;if(b.left===void 0||b.top===void 0)return;const{width:M,height:x}=c.over.style,[A,T]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(x))];c.setCursor({left:(0,t.clamp)(b.left+D,0,A),top:(0,t.clamp)(b.top+P,0,T)})},y=D=>{if(u.size===0||!c){p=null;return}const M=(D-(p??D))*s;let x=0,A=0;u.has("ArrowUp")&&(A-=M),u.has("ArrowDown")&&(A+=M),u.has("ArrowLeft")&&(x-=M),u.has("ArrowRight")&&(x+=M),u.has("Shift")&&(x*=l,A*=l),g(x,A);const{cursor:T}=c;if(u.has(" ")&&T){const S=Number(c.over.style.height.slice(0,-2));c.setSelect({left:T.left<i?T.left:i,top:0,width:Math.abs(T.left-(i??T.left)),height:S},!1)}p=D,window.requestAnimationFrame(y)},E=D=>{if(D.key==="Tab"){c.setCursor({left:-5,top:-5});return}if(!f.has(D.key))return;if(D.preventDefault(),D.stopPropagation(),!u.has(D.key)){const b=u.size===0;u.add(D.key),i=D.key===" "&&i===null?c.cursor.left:i,b&&window.requestAnimationFrame(y)}},h=D=>{f.has(D.key)&&(u.delete(D.key),D.key===" "&&(D.preventDefault(),D.stopPropagation(),c.setSelect(c.select),i=null))},v=()=>{if(!a?.matches(":focus-visible"))return;const D=parseFloat(c.over.style.width),P=parseFloat(c.over.style.height);c.setCursor({left:D/2,top:P/2})},C=()=>{p=null,i=null,u.clear(),c.setSelect({left:0,top:0,width:0,height:0},!1)};a.addEventListener("keydown",E),a.addEventListener("keyup",h),a.addEventListener("focus",v),a.addEventListener("blur",C);const m=()=>{a?.removeEventListener("keydown",E),a?.removeEventListener("keyup",h),a?.removeEventListener("focus",v),a?.removeEventListener("blur",C),a=null};(c.hooks.destroy??=[]).push(m)},r=({config:c})=>((0,o.useLayoutEffect)(()=>c.addHook("init",d),[c]),null)},1105:(Y,O,e)=>{"use strict";e.d(O,{_:()=>C,i:()=>h});var t=e(66111),n=e(41213),o=e(56632),s=e(6194),l=e(53768),f=e(30471),d=e(2703),r=e(99098),c=e(574),a=e(40538),u=e(72648),i=e(85511),p=e(50800),g=e(20888),y=e(2445);const E=10,h=({mode:m=a.f3.Single,sortOrder:D=a.As.None,sync:P,timeZone:b,config:M,renderTooltip:x,...A})=>{const T=(0,t.useRef)(),S=(0,u.l4)(),[U,R]=(0,t.useState)(null),[F,B]=(0,t.useState)(null),[K,L]=(0,t.useState)([]),[N,z]=(0,t.useState)(null),[G,I]=(0,t.useState)(!1),V=(0,n.Z)(),H="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(H,!0,`Focused series: ${U}, focused point: ${F}`)},[F,U]),(0,t.useLayoutEffect)(()=>{let j;const de=()=>{V()&&(I(!0),T.current?.root.classList.add("plot-active"))},ce=()=>{V()&&(z(null),I(!1),T.current?.root.classList.remove("plot-active"))};M.addHook("syncRect",(le,q)=>j=q),M.addHook("init",le=>{T.current=le,le.root.parentElement?.addEventListener("focus",de),le.over.addEventListener("mouseenter",de),le.root.parentElement?.addEventListener("blur",ce),le.over.addEventListener("mouseleave",ce),P&&P()===o.m.Crosshair&&le.root.classList.add("shared-crosshair")});const ee=M.getTooltipInterpolator();return ee?M.addHook("setCursor",le=>{ee(R,B,q=>{if(q){z(null);return}if(!j)return;const{x:fe,y:Z}=C(le,j);fe!==void 0&&Z!==void 0&&z({x:fe,y:Z})},le)}):(M.addHook("setLegend",le=>{V()&&(B(le.legend.idx),L(le.legend.idxs.slice()))}),M.addHook("setCursor",le=>{if(!j||!V())return;const{x:q,y:fe}=C(le,j);z(q!==void 0&&fe!==void 0?{x:q,y:fe}:null)}),M.addHook("setSeries",(le,q)=>{V()&&R(q)})),()=>{z(null),T.current&&(T.current.over.removeEventListener("mouseleave",ce),T.current.over.removeEventListener("mouseenter",de),T.current.root.parentElement?.removeEventListener("focus",de),T.current.root.parentElement?.removeEventListener("blur",ce))}},[M,z,I,B,L]),F===null||!G&&P&&P()===o.m.Crosshair)return null;let Q=A.data.fields[0];if(!Q)return null;const oe=Q.display||(0,s.U_)({field:Q,timeZone:b,theme:S});let se=null,ie=oe(Q.values[F]).text;if(x)se=x(A.data,U,F);else{if(m===a.f3.Single&&U!==null){const j=A.data.fields[U];if(!j)return null;const de=K?.[U]??F;ie=oe(Q.values[de]).text;const ee=(j.display||(0,s.U_)({field:j,timeZone:b,theme:S}))(j.values[de]);se=t.createElement(p.c,{series:[{color:ee.color||l.R,label:(0,f.CZ)(j,A.data,A.frames),value:ee?(0,d.zc)(ee):null}],timestamp:ie})}if(m===a.f3.Multi){let j=[];const de=A.data,ce=de.fields,ee=[];for(let le=0;le<ce.length;le++){const q=de.fields[le];if(!q||q===Q||q.type===r.fS.time||q.type!==r.fS.number||q.config.custom?.hideFrom?.tooltip||q.config.custom?.hideFrom?.viz)continue;const fe=A.data.fields[le].values[K[le]],Z=q.display(fe);ee.push(fe),j.push({color:Z.color||l.R,label:(0,f.CZ)(q,de,A.frames),value:Z?(0,d.zc)(Z):null,isActive:U===le})}if(D!==a.As.None){const le=[...j],q=c.sortValues(D);j.sort((fe,Z)=>{const ne=le.indexOf(fe),re=le.indexOf(Z);return q(ee[ne],ee[re])})}se=t.createElement(p.c,{series:j,timestamp:ie})}}return t.createElement(i.h_,null,se&&N&&t.createElement(g.S,{position:{x:N.x,y:N.y},offset:{x:E,y:E}},se))};function v({left:m,top:D},P){return m===void 0||D===void 0?!1:m<0||m>P.width||D<0||D>P.height}function C(m,D){let P,b;const M=m.cursor.left||0,x=m.cursor.top||0;if(v(m.cursor,D)){const A=m.posToIdx(M);if(x<0||x>D.height){let T=(0,y.ah)(m,A);T&&(b=D.top+T,M>=0&&M<=D.width&&(P=D.left+m.valToPos(m.data[0][m.posToIdx(M)],m.series[0].scale)))}}else P=D.left+M,b=D.top+x;return{x:P,y:b}}},99375:(Y,O,e)=>{"use strict";e.d(O,{R:()=>s});var t=e(66111),n=e(2445);const o=5,s=({onZoom:l,config:f})=>{const[d,r]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(d){if((0,n.Zp)("ZoomPlugin",!1,"selected",d),d.bbox.width<o)return;l({from:d.min,to:d.max})}},[d]),(0,t.useLayoutEffect)(()=>{f.addHook("setSelect",c=>{const a=c.posToVal(c.select.left,"x"),u=c.posToVal(c.select.left+c.select.width,"x");r({min:a,max:u,bbox:{left:c.bbox.left/window.devicePixelRatio+c.select.left,top:c.bbox.top/window.devicePixelRatio,height:c.bbox.height/window.devicePixelRatio,width:c.select.width}}),c.setSelect({left:0,width:0},!1)})},[f]),null}},57989:(Y,O,e)=>{"use strict";e.d(O,{Cm:()=>o.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),o=e(16366)},13890:(Y,O,e)=>{"use strict";e.d(O,{L:()=>t});class t{constructor(o){this.props=o}}},2445:(Y,O,e)=>{"use strict";e.d(O,{Bj:()=>g,Kq:()=>i,Zp:()=>C,ah:()=>y,i7:()=>p,qt:()=>a});var t=e(99098),n=e(49052),o=e(40538),s=e(73289),l=e(88383),f=e(86979);const d=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function r(m){return m.replace(d,D=>`{${D}}`)}const c=(m,D,P)=>{let b=D%2?P[0]||P[2]:P[1]||P[3];return P[D]||!b?0:8},a={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[c,c,c,c],series:[],hooks:{}};var u=(m=>(m[m.Pos=1]="Pos",m[m.Neg=-1]="Neg",m))(u||{});function i(m){let D=[],{series:P,dir:b}=m,M=P.length-1,x=P.slice().reverse();return x.forEach((A,T)=>{if(T!==M){let S=x[T+1];D.push({series:[A,S],dir:-1*b})}}),D}function p(m){let D=new Map;return m.fields.forEach(({config:P,values:b},M)=>{if(M===0)return;let{custom:x}=P;if(x==null||x.hideFrom?.viz)return;let{stacking:A}=x;if(A==null)return;let{mode:T,group:S}=A;if(T===o.o0.None)return;let U=x.transform,R=E(U,b),F=x.drawStyle,B=F===o.l8.Bars?x.barAlignment:F===o.l8.Line?x.lineInterpolation:null,K=`${R}|${T}|${S}|${(0,f.z)(P)}|${F}|${B}`,L=D.get(K);L==null&&(L={series:[],dir:R},D.set(K,L)),L.series.push(M)}),[...D.values()]}function g(m,D,P){let b=Array(m.fields.length),M=D.length,x=m.length,A=M>0?Array(x).fill(0):[],T=M>0?Array(x).fill(!1):[],S=Array.from({length:M},()=>A.slice()),U=Array.from({length:M},()=>T.slice());if(D.forEach((R,F)=>{let B=U[F];R.series.forEach(K=>{let L=m.fields[K];if(L.config.custom?.hideFrom?.viz)return;let N=L.values;for(let z=0;z<x;z++)N[z]!=null&&(B[z]=!0)})}),m.fields.forEach((R,F)=>{let B=R.values;if(F===0){R.type===t.fS.time?b[F]=(0,n.J_)(R).values:b[F]=B;return}let{custom:K}=R.config;if(!K||K.hideFrom?.viz){b[F]=B;return}if(K.transform===o.pR.Constant){let N=B.findIndex(G=>G!=null),z=B[N];B=Array(B.length).fill(void 0),B[N]=z}else if(B=B.slice(),K.transform===o.pR.NegativeY)for(let N=0;N<B.length;N++)B[N]!=null&&(B[N]*=-1);let L=K.stacking?.mode;if(!L||L===o.o0.None)b[F]=B;else{let N=D.findIndex(V=>V.series.indexOf(F)>-1),z=S[N],G=U[N],I=b[F]=Array(x);for(let V=0;V<x;V++){let H=B[V];H!=null?I[V]=z[V]+=H:I[V]=G[V]?z[V]:H}}}),P){let R=b.map((F,B)=>{let K=D.findIndex(L=>L.series.indexOf(B)>-1);return K!==-1?S[K]:F});P({totals:R})}return m.fields.forEach((R,F)=>{if(F===0||R.config.custom?.hideFrom?.viz)return;if(R.config.custom?.stacking?.mode===o.o0.Percent){let K=D.findIndex(G=>G.series.indexOf(F)>-1),L=S[K],N=D[K],z=b[F];for(let G=0;G<x;G++){let I=z[G];I!=null&&(z[G]=L[G]===0?0:N.dir*(I/L[G]))}}}),b}function y(m,D){let P,b=1,M=1,x=m.data[1][D],A=m.data[1][D];for(let T=1;T<m.data.length;T++){const U=m.data[T][D];U!=null&&(x==null?x=U:U>x&&(x=m.data[T][D],b=T),A==null?A=U:U<A&&(A=m.data[T][D],M=T))}return A==null&&x==null?P=void 0:A!=null&&x!=null?P=(m.valToPos(A,m.series[M].scale)+m.valToPos(x,m.series[b].scale))/2:P=m.valToPos(A||x,m.series[b||M].scale),P!==void 0&&P<0&&(P=m.bbox.height/devicePixelRatio),P}function E(m,D){const P=h(D);return m===o.pR.NegativeY?P?1:-1:P?-1:1}function h(m,D=100){const P=m.length;if(P===0)return!1;let b=0,M=P-1;for(;b<=M&&m[b]==null;)b++;for(;M>=b&&m[M]==null;)M--;let x=0,A=0;if(M>=b){const T=Math.max(1,Math.floor((M-b+1)/D));for(let S=b;S<=M;S+=T){const U=m[S];U!=null&&(U<0||Object.is(U,-0)?x++:U>0&&A++)}if(x>A)return!0}return!1}const v=(0,l.h)("uPlot"),C=v.logger;(0,s.x)("graphng",void 0,v)},40419:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>r.LB,BarAlignment:()=>r.pu,BarValueVisibility:()=>r.eU,BracesPlugin:()=>d.hP,ClearPlugin:()=>d.Gp,ClipboardPlugin:()=>d.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>r.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>l.nz,GraphGradientMode:()=>r.FI,GraphTresholdsStyleMode:()=>r.i3,IndentationPlugin:()=>d.Rc,LegendDisplayMode:()=>r.jK,LineInterpolation:()=>r.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>d.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>r.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>d.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>r.bQ,ScaleOrientation:()=>r.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>d.$L,SlatePrism:()=>d.Ze,StackingMode:()=>r.o0,SuggestionsPlugin:()=>d.bm,ThemeContext:()=>l.Ni,TooltipDisplayMode:()=>r.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>f.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>l.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>l.Zu,mockThemeContext:()=>l.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>l.GU,stylesFactory:()=>l.Bb,useForceUpdate:()=>s.NW,useStyles:()=>l.yK,useStyles2:()=>l.wW,useTheme:()=>l.Fg,useTheme2:()=>l.l4,validate:()=>s.Gu,withTheme:()=>l.Zz,withTheme2:()=>l.HE});var t=e(14835),o={};for(const c in t)c!=="default"&&(o[c]=()=>t[c]);e.d(O,o);var n=e(24539),o={};for(const c in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSaveField","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","Toggletip","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(c)<0&&(o[c]=()=>n[c]);e.d(O,o);var s=e(13643),l=e(34726),f=e(59851),d=e(8659),r=e(49557)},34315:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>p,r:()=>a});var t=e(66111),n=e(99098),o=e(72293),s=e(40538),l=e(26372),f=e(2594),d=e(24799),r=e(8581),c=e(46967);function a(g,y,E){const h=["Axis"];g.addRadio({path:"axisPlacement",name:"Placement",category:h,defaultValue:l.q.axisPlacement[0].value,settings:{options:l.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:h,defaultValue:"",settings:{placeholder:"Optional text"},showIf:v=>v.axisPlacement!==s.LB.Hidden,shouldApply:v=>v.type!==n.fS.time&&v.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:h,settings:{placeholder:"Auto"},showIf:v=>v.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:h,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:h,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),g.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:h,editor:p,override:p,defaultValue:{type:s.wf.Linear},shouldApply:v=>v.type===n.fS.number,process:o.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:h,defaultValue:!1,showIf:v=>v.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:h,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:h,settings:{placeholder:"See: Standard options > Max"}})}const u=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],i=[{label:"2",value:2},{label:"10",value:10}],p=({value:g,onChange:y})=>{const E=g?.type??s.wf.Linear,h=g?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(f.S,{value:E,options:u,onChange:v=>{y({...g,type:v,log:v===s.wf.Linear?void 0:h})}})),(E===s.wf.Log||E===s.wf.Symlog)&&t.createElement(d.g,{label:"Log base"},t.createElement(r.Ph,{options:i,value:h,onChange:v=>{y({...g,log:v.value})}})),E===s.wf.Symlog&&t.createElement(d.g,{label:"Linear threshold"},t.createElement(c.I,{placeholder:"1",value:g?.linearThreshold,onChange:v=>{y({...g,linearThreshold:Number(v.currentTarget.value)})}})))}},91511:(Y,O,e)=>{"use strict";e.d(O,{B:()=>d});var t=e(82897),n=e.n(t),o=e(66111),s=e(52081),l=e(41165);const f=({value:r,onChange:c})=>{const a=(0,o.useCallback)(u=>{c({...r,[u]:!r[u]})},[r,c]);return o.createElement(s.Lh,{spacing:"xs"},Object.keys(r).map(u=>{const i=u;return o.createElement(l.B,{icon:r[i]?"eye-slash":"eye",onClick:()=>a(i),key:i,label:(0,t.startCase)(i),selected:r[i]})}))};function d(r){r.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:f,override:f,shouldApply:()=>!0,hideFromDefaults:!0,process:c=>c})}},31911:(Y,O,e)=>{"use strict";e.d(O,{J:()=>o});var t=e(30779),n=e(40538);function o(s,l=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:f=>f.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:f=>f.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:f=>f.legend.showLegend&&f.legend.placement==="right"}),l&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:f=>f.legend.showLegend!==!1})}},22110:(Y,O,e)=>{"use strict";e.d(O,{V:()=>i,n:()=>u});var t=e(66111),n=e(72293),o=e(99098),s=e(40538),l=e(52081),f=e(2594),d=e(46967),r=e(61860),c=e(8180),a=e(26372);const u=({value:p,context:g,onChange:y,item:E})=>t.createElement(l.Lh,null,t.createElement(f.S,{value:p?.mode||s.o0.None,options:E.settings.options,onChange:h=>{y({...p,mode:h})}}),g.isOverride&&p?.mode&&p?.mode!==s.o0.None&&t.createElement(d.I,{type:"text",placeholder:"Group",suffix:t.createElement(r.u,{content:"Name of the stacking group",placement:"top"},t.createElement(c.h,{name:"question-circle"})),defaultValue:p?.group,onChange:h=>{y({...p,group:h.currentTarget.value.trim()})}}));function i(p,g,y=["Graph styles"]){p.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:g,editor:u,override:u,settings:{options:a.q.stacking},process:n.kG,shouldApply:E=>E.type===o.fS.number})}},25272:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>t});function t(n,o=!0){o&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(Y,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(40538);function n(o,s=!1){const l=["Tooltip"],f=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],d=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];o.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:l,defaultValue:"single",settings:{options:f}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:l,defaultValue:t.As.None,showIf:r=>r.tooltip?.mode===t.f3.Multi,settings:{options:d}})}},59851:(Y,O,e)=>{"use strict";e.d(O,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>d.n,addAxisConfig:()=>n.r,addHideFrom:()=>o.B,addLegendOptions:()=>s.J,addStackingConfig:()=>d.V,addTextSizeOptions:()=>f.Z,addTooltipOptions:()=>l.L});var n=e(34315),o=e(91511),s=e(31911),l=e(77587),f=e(25272),d=e(22110)},49557:(Y,O,e)=>{"use strict";e.d(O,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(Y,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},o="brace_match";function s(){return{onKeyDown(l,f,d){const{value:r}=f;switch(l.key){case"(":case"{":case"[":{const{start:{offset:c,key:a},end:{offset:u,key:i},focus:{offset:p}}=r.selection,g=r.focusText.text;if(r.selection.isExpanded)return l.preventDefault(),f.insertTextByKey(a,c,l.key).insertTextByKey(i,u+1,n[l.key]).moveEndBackward(1),!0;if(p===g.length||g[p]===" "||Object.values(n).includes(g[p])){l.preventDefault();const y=n[l.key],E={key:`${o}-${(0,t.Z)()}`,type:`${o}-${y}`,anchor:{key:a,offset:c,object:"point"},focus:{key:i,offset:u+1,object:"point"},object:"annotation"};return f.insertText(l.key).insertText(y).addAnnotation(E).moveBackward(1),!0}break}case")":case"}":case"]":{const c=r.anchorText.text,a=r.selection.anchor.offset,u=c[a],i=l.key,p=`${o}-${i}`,g=r.annotations.find(y=>y?.type===p&&y.anchor.key===r.anchorText.key);if(g&&u===i&&!r.selection.isExpanded)return l.preventDefault(),f.moveFocusForward(1).removeAnnotation(g).moveAnchorForward(1),!0;break}case"Backspace":{const c=r.anchorText.text,a=r.selection.anchor.offset,u=c[a-1],i=c[a];if(n[u]&&n[u]===i)return l.preventDefault(),f.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return d()}}}},74778:(Y,O,e)=>{"use strict";e.d(O,{G:()=>t});function t(){return{onKeyDown(n,o,s){const l=o.value;if(l.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const f=l.anchorText.text,d=l.selection.anchor.offset,c=f.length-d;return o.deleteForward(c),!0}return s()}}}},6464:(Y,O,e)=>{"use strict";e.d(O,{w:()=>o});const t=(s,l,f)=>{if(!s.length)return;const d=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(l,d+f)},n=s=>s?.replace(/[\uFEFF]/g,"");function o(){const s={onCopy(l,f,d){l.preventDefault();const{document:r,selection:c}=f.value,{start:{offset:a},end:{offset:u}}=c,i=r.getLeafBlocksAtRange(c).toArray().map(g=>g.text),p=n(t(i,a,u));return p&&l.clipboardData&&l.clipboardData.setData("Text",p),!0},onPaste(l,f,d){if(l.preventDefault(),l.clipboardData){const c=n(l.clipboardData.getData("Text"))?.split(`
`);if(c&&c.length){f.insertText(c[0]);for(const a of c.slice(1))f.splitBlock().insertText(a)}}return!0}};return{...s,onCut(l,f,d){return s.onCopy(l,f,d),f.deleteAtRange(f.value.selection),!0}}}},784:(Y,O,e)=>{"use strict";e.d(O,{R:()=>a});var t=e(59641),n=e(95787),o=e(43809);const s=(0,t.TB)("mod+["),l=(0,t.TB)("shift+tab"),f=(0,t.TB)("mod+]"),d="  ",r=(u,i,p)=>{const{startBlock:g,endBlock:y,selection:{start:{offset:E,key:h},end:{offset:v,key:C}}}=i.value;if(o.Z.serialize(i.value)==="")return;u.preventDefault();const m=g.getFirstText();m&&E===0&&h===m.key&&v===m.text.length&&C===m.key||!g.equals(y)?c(i,"right"):i.insertText(d)},c=(u,i)=>{const p=u.value.selection,g=u.value.document.getLeafBlocksAtRange(p).toArray();if(i==="left")for(const y of g){const E=y.text.length-y.text.trimLeft().length,h=y.getFirstText().key,v={anchor:{key:h,offset:E,path:[]},focus:{key:h,offset:E,path:[]}};u.deleteBackwardAtRange(n.e6.create(v),Math.min(d.length,E))}else{const{startText:y}=u.value,E=y.text.slice(0,p.start.offset),h=/^\s*$/.test(E);for(const v of g)u.insertTextByKey(v.getFirstText().key,0,d);h&&u.moveStartBackward(d.length)}};function a(){return{onKeyDown(u,i,p){if(s(u)||l(u))u.preventDefault(),c(i,"left");else if(f(u))u.preventDefault(),c(i,"right");else if(u.key==="Tab")r(u,i,p);else return p();return!0}}}},8659:(Y,O,e)=>{"use strict";e.d(O,{$L:()=>d.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>r.Z,bm:()=>c.b,dv:()=>f.d,hP:()=>t.h,wl:()=>o.w,z2:()=>l.z});var t=e(13193),n=e(74778),o=e(6464),s=e(784),l=e(9830),f=e(47838),d=e(71096),r=e(67660),c=e(73958)},9830:(Y,O,e)=>{"use strict";e.d(O,{z:()=>n});function t(o){let s=o.length-o.trimLeft().length;if(s){let l=o[0];for(;--s;)l+=o[0];return l}return""}function n(){return{onKeyDown(o,s,l){const f=s.value;if(f.selection.isExpanded)return l();if(o.key==="Enter"){o.preventDefault();const{startBlock:d}=f,r=d.text,c=t(r);return s.splitBlock().insertText(c).focus()}return l()}}}},47838:(Y,O,e)=>{"use strict";e.d(O,{d:()=>t});function t({handler:n}){return{onKeyDown(o,s,l){return n&&o.key==="Enter"&&(o.shiftKey||o.ctrlKey)?(o.preventDefault(),n(o),s):l()}}}},71096:(Y,O,e)=>{"use strict";e.d(O,{$:()=>o});var t=e(59641);const n=(0,t.TB)("mod+l");function o(){return{onKeyDown(s,l,f){if(n(s)){s.preventDefault();const{focusBlock:d,document:r}=l.value;l.moveAnchorToStartOfBlock(),r.getNextBlock(d.key)?l.moveFocusToStartOfNextBlock():l.moveFocusToEndOfText()}else return f();return!0}}}},95514:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>n});const n="prism-token"},67660:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>i,a:()=>E});var t=e(57706),n=e.n(t),o=e(95787),s=e(95514),l=e(220),f=e(66111);function d(h){return h.object==="block"&&h.type==="code_block"}function r(h){return"javascript"}function c(h,v,C){const{decoration:m}=h;if(m.type!==s.Z)return C();const D=m.data.get("className");return f.createElement("span",{className:D},h.children)}class a extends(0,l.Record)({onlyIn:d,getSyntax:r,renderDecoration:c}){constructor(v){super(v)}}const u=a;function i(h={},v=n().languages){const C=new u(h);return{decorateNode:(m,D,P)=>{if(!C.onlyIn(m))return P();const b=o.gO.create(m),M=C.getSyntax(b),x=v[M];if(!x)return[];const T=b.getTexts().map(F=>F&&F.getText()).join(`
`),S=n().tokenize(T,x),U=E(S),R=D.value.data.set("tokens",U);return D.setData(R),p(C,S,b)},renderDecoration:(m,D,P)=>C.renderDecoration({children:m.children,decoration:m.decoration},D,P)}}function p(h,v,C){const m=C.getTexts(),D=[];let P=0,b=0;return m.forEach(M=>{b=P+M.getText().length;let x=0;function A(T,S){if(typeof T=="string"){if(S){const U=g({text:M,textStart:P,textEnd:b,start:x,end:x+T.length,className:`prism-token token ${S}`,block:C});U&&D.push(U)}x+=T.length}else if(S=`${S} ${T.type}`,T.alias&&(S+=" "+T.alias),typeof T.content=="string"){const U=g({text:M,textStart:P,textEnd:b,start:x,end:x+T.content.length,className:`prism-token token ${S}`,block:C});U&&D.push(U),x+=T.content.length}else for(let U=0;U<T.content.length;U+=1)A(T.content[U],S)}v.forEach(A),P=b+1}),D}function g({text:h,textStart:v,textEnd:C,start:m,end:D,className:P,block:b}){return m>=C||D<=v?null:(m=Math.max(m,v),D=Math.min(D,C),m-=v,D-=v,b.createDecoration({object:"decoration",anchor:{key:h.key,offset:m,object:"point"},focus:{key:h.key,offset:D,object:"point"},type:s.Z,data:{className:P}}))}function y(h){return typeof h=="string"?[{content:h,types:[],aliases:[]}]:Array.isArray(h)?h.flatMap(v=>y(v)):h instanceof n().Token?y(h.content).flatMap(v=>{let C=[];return typeof h.alias=="string"?C=[h.alias]:C=h.alias??[],{content:v.content,types:[h.type,...v.types],aliases:[...C,...v.aliases]}}):[]}function E(h){const v=y(h);if(!v.length)return[];const C=v[0];C.prev=null,C.next=v.length>=2?v[1]:null,C.offsets={start:0,end:C.content.length};for(let D=1;D<v.length-1;D++)v[D].prev=v[D-1],v[D].next=v[D+1],v[D].offsets={start:v[D-1].offsets.end,end:v[D-1].offsets.end+v[D].content.length};const m=v[v.length-1];return m.prev=v.length>=2?v[v.length-2]:null,m.next=null,m.offsets={start:v.length>=2?v[v.length-2].offsets.end:0,end:v.length>=2?v[v.length-2].offsets.end+m.content.length:m.content.length},v}},73958:(Y,O,e)=>{"use strict";e.d(O,{b:()=>R});var t=e(82897),n=e(66111),o=e(15638),s=e(32436),l=e(72648),f=e(26519),d=e(13265);const r=B=>B.reduce((K,{items:L,label:N})=>(K.push({label:N,kind:f.c.GroupTitle}),L.reduce((z,G)=>(z.push(G),z),K)),[]),c=B=>B.reduce((K,L)=>K.length<L.label.length?L.label:K,""),a=(B,K,L)=>{const N=(0,d.Z)(L,{font:B.typography.fontFamilyMonospace,fontSize:B.typography.bodySmall.fontSize,fontWeight:"normal"}),z=i(N.width,B),G=u(N.height,B),I=p(G,K);return{listWidth:z,listHeight:I,itemHeight:G}},u=(B,K)=>{const L=K.spacing.gridSize*2;return B+L},i=(B,K)=>{const L=K.spacing.gridSize*3,N=800;return Math.min(Math.max(B+L,200),N)},p=(B,K)=>{const L=Math.min(K.length,10),N=100,z=L*B;return Math.max(z,N)};var g=e(9892),y=e(2631);const E=(B,K,L)=>({typeaheadItem:g.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${B.spacing(1,1,1,2)};
      border: ${B.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${B.colors.background.secondary};
      color: ${B.colors.text};
      box-shadow: 0 0 20px ${B.v1.colors.dropdownShadow};
      visibility: ${L===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${K+parseInt(B.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),h=({item:B,height:K})=>{const L=B&&!!B.documentation,N=B?B.label:"",z=(0,y.a)(B?.documentation),G=(0,l.l4)(),I=E(G,K,L);return n.createElement("div",{className:(0,g.cx)([I.typeaheadItem])},n.createElement("b",null,N),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:z}}))};var v=e(55271),C=e.n(v),m=e(69636);const D=B=>({typeaheadItem:g.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${B.typography.fontFamilyMonospace};
    padding: ${B.spacing(1,1,1,2)};
    font-size: ${B.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:g.css`
    label: type-ahead-item-selected;
    background-color: ${B.colors.background.secondary};
  `,typeaheadItemMatch:g.css`
    label: type-ahead-item-match;
    color: ${B.v1.palette.yellow};
    border-bottom: 1px solid ${B.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:g.css`
    label: type-ahead-item-group-title;
    color: ${B.colors.text.secondary};
    font-size: ${B.typography.bodySmall.fontSize};
    line-height: ${B.typography.body.lineHeight};
    padding: ${B.spacing(1)};
  `}),P=B=>{const K=(0,l.wW)(D),{isSelected:L,item:N,prefix:z,style:G,onMouseEnter:I,onMouseLeave:V,onClickItem:H}=B,Q=L?(0,g.cx)([K.typeaheadItem,K.typeaheadItemSelected]):(0,g.cx)([K.typeaheadItem]),oe=(0,g.cx)([K.typeaheadItemMatch]),se=(0,g.cx)([K.typeaheadItemGroupTitle]),ie=N.label||"";return N.kind===f.c.GroupTitle?n.createElement("li",{className:se,style:G},n.createElement("span",null,ie)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:Q,style:G,onMouseDown:H,onMouseEnter:I,onMouseLeave:V,type:"button"},N.highlightParts!==void 0?n.createElement(m.H,{text:ie,highlightClassName:oe,highlightParts:N.highlightParts}):n.createElement(C(),{textToHighlight:ie,searchWords:[z??""],autoEscape:!0,highlightClassName:oe})))},b=(B,K)=>B-K*Math.floor(B/K);class M extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const K=r(this.props.groupedItems),L=c(K),{listWidth:N,listHeight:z,itemHeight:G}=a(this.context,K,L);this.setState({listWidth:N,listHeight:z,itemHeight:G,allItems:K})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(K,L)=>{if(this.state.typeaheadIndex!==null&&L.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(K.groupedItems,this.props.groupedItems)===!1){const N=r(this.props.groupedItems),z=c(N),{listWidth:G,listHeight:I,itemHeight:V}=a(this.context,N,z);this.setState({listWidth:G,listHeight:I,itemHeight:V,allItems:N,typeaheadIndex:null})}},this.onMouseEnter=K=>{this.setState({hoveredItem:K})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=K=>{const L=this.state.allItems.length;if(L){const N=this.state.typeaheadIndex||0;let z=b(N+K,L);this.state.allItems[z].kind===f.c.GroupTitle&&(z=b(z+K,L)),this.setState({typeaheadIndex:z});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const K=window.getSelection(),L=K&&K.anchorNode;if(L&&L.parentElement){const N=L.parentElement.getBoundingClientRect(),z=window.scrollX,G=window.scrollY;return`position: absolute; display: flex; top: ${N.top+G+N.height+6}px; left: ${N.left+z-2}px`}return""}render(){const{prefix:K,isOpen:L=!1,origin:N}=this.props,{allItems:z,listWidth:G,listHeight:I,itemHeight:V,hoveredItem:H,typeaheadIndex:Q}=this.state,oe=H||Q,se=z[H||Q||0];return n.createElement(x,{origin:N,isOpen:L,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:z.length,itemSize:V,itemKey:ie=>{const j=z&&z[ie];return j?`${ie}-${j.label}`:`${ie}`},width:G,height:I},({index:ie,style:j})=>{const de=z&&z[ie];return de?n.createElement(P,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(de):{},isSelected:Q===null?!1:z[Q]===de,item:de,prefix:K,style:j,onMouseEnter:()=>this.onMouseEnter(ie),onMouseLeave:this.onMouseLeave}):null})),oe&&n.createElement(h,{height:I,item:se}))}}M.contextType=l.Ni;class x extends n.PureComponent{constructor(K){super(K);const{index:L=0,origin:N="query",style:z}=K;this.node=document.createElement("div"),this.node.setAttribute("style",z),this.node.classList.add("slate-typeahead",`slate-typeahead-${N}-${L}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),o.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var A=e(12724),T=e(8644),S=e(95514);const U=250;function R({onTypeahead:B,cleanText:K,onWillApplySuggestion:L,portalOrigin:N}){let z,G={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const I=(0,t.debounce)(F,U),V=H=>{G={...G,...H}};return{onBlur:(H,Q,oe)=>(G={...G,groupedItems:[]},oe()),onClick:(H,Q,oe)=>(G={...G,groupedItems:[]},oe()),onKeyDown:(H,Q,oe)=>{const ie=G.groupedItems.length;switch(H.key){case"Escape":{if(ie)return H.preventDefault(),G={...G,groupedItems:[]},Q.insertText("");break}case"ArrowDown":case"ArrowUp":if(ie){H.preventDefault(),z.moveMenuIndex(H.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(H.shiftKey||H.ctrlKey)&&ie)return H.preventDefault(),z.insertSuggestion();break}case"Tab":{if(ie)return H.preventDefault(),z.insertSuggestion();break}default:{H.key.length===1&&I(Q,V,B,K);break}}return oe()},commands:{selectSuggestion:(H,Q)=>{const oe=G.groupedItems;if(!oe||!oe.length)return H;const se=H.applyTypeahead(Q);return I(H,V,B,K),se},applyTypeahead:(H,Q)=>{let oe=Q.insertText||Q.label;const se=Q.kind==="function",ie=Q.move||0,j=ie>0?ie:0,de=ie<0?-ie:0,{typeaheadPrefix:ce,typeaheadText:ee,typeaheadContext:le}=G;L&&(oe=L(oe,{groupedItems:G.groupedItems,typeaheadContext:le,typeaheadPrefix:ce,typeaheadText:ee}));const q=Q.deleteBackwards||ce.length,Z=(K?K(ee):ee).length-ce.length,ne=ee.indexOf(ce),ve=ce&&(Z>0&&ne>-1||oe===ee)&&!se?Z+ne:0;if(oe.match(/\n/)){const me=(0,A.xl)(oe);return H.deleteBackward(q).deleteForward(ve).insertFragment(me).focus(),H}return G={...G,groupedItems:[]},H.snapshotSelection().deleteBackward(q).deleteForward(ve).insertText(oe).moveForward(j).moveBackward(de).focus(),H}},renderEditor(H,Q,oe){if(Q.value.selection.isExpanded)return oe();const se=oe();return n.createElement(n.Fragment,null,se,n.createElement(M,{menuRef:ie=>z=ie,origin:N,prefix:G.typeaheadPrefix,isOpen:!!G.groupedItems.length,groupedItems:G.groupedItems,onSelectSuggestion:Q.selectSuggestion}))}}}const F=async(B,K,L,N)=>{if(!L)return;const{value:z}=B,{selection:G}=z,I=z.document.getClosestBlock(z.focusBlock.key),V=z.selection.start.offset-1,H=I&&I.getDecorations(B),Q=H?H.filter(fe=>fe.start.offset<=V&&fe.end.offset>V&&fe.type===S.Z).toArray():[],oe=H&&H.filter(fe=>fe.end.offset<=V&&fe.type===S.Z&&fe.data.get("className").includes("label-key")).last(),se=oe&&z.focusText.text.slice(oe.start.offset,oe.end.offset),ie=Q.map(fe=>fe.data.get("className")).join(" ").split(" ").filter(fe=>fe.length);let j=z.focusText.text,de=j.slice(0,G.focus.offset);Q.length&&(j=z.focusText.text.slice(Q[0].start.offset,Q[0].end.offset),de=z.focusText.text.slice(Q[0].start.offset,G.focus.offset));const ce=de.match(/(?:!?=~?"?|")(.*)/);ce?de=ce[1]:N&&(de=N(de));const{suggestions:ee,context:le}=await L({prefix:de,text:j,value:z,wrapperClasses:ie,labelKey:se||void 0,editor:B}),q=ee.map(fe=>{if(!fe.items)return fe;const Z=fe.searchFunctionType||(fe.prefixMatch?T.Z.Prefix:T.Z.Word),ne=T.n[Z];let re={...fe};return de&&(fe.skipFilter||(re.items=re.items.filter(ve=>(ve.filterText||ve.label).length>=de.length),re.items=ne(re.items,de)),re.items=re.items.filter(ve=>!(ve.insertText===de||(ve.filterText??ve.label)===de))),fe.skipSort||(re.items=(0,t.sortBy)(re.items,ve=>ve.sortText===void 0?ve.sortValue!==void 0?ve.sortValue:ve.label:ve.sortText||ve.label)),re}).filter(fe=>fe.items&&fe.items.length);K({groupedItems:q,typeaheadPrefix:de,typeaheadContext:le,typeaheadText:j}),B.blur().focus()}},29428:(Y,O,e)=>{"use strict";e.d(O,{n:()=>p});var t=e(65788),n=e(66111),o=e(72648);function s(g){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${g.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${g.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${g.colors.text.primary};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${g.colors.text.secondary};
      margin-right: ${g.spacing(1)};
      padding: ${g.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${g.spacing(1,2,1,4)};
    }
  `}function l(g){return t.css`
    .card-section {
      margin-bottom: ${g.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${g.colors.background.secondary};
      box-shadow: none;
      padding: ${g.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${g.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${g.spacing(2)};
    }

    .card-item-type {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${g.typography.size.sm};
    }

    .card-item-name {
      color: ${g.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${g.spacing(1)};
    }

    .card-item-sub-name {
      color: ${g.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${g.spacing(2)};
      font-size: ${g.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${g.typography.size.sm};
        display: inline-block;
        margin-left: ${g.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${g.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h3.fontSize};
      }

      ${g.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${g.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${g.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${g.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${g.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var f=e(85419);function d(g){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${g.typography.htmlFontSize}px;
      font-family: ${g.typography.fontFamily};
      line-height: ${g.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${g.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.canvas};
      ${r(g.typography.body)}
    }

    h1,
    .h1 {
      ${r(g.typography.h1)}
    }
    h2,
    .h2 {
      ${r(g.typography.h2)}
    }
    h3,
    .h3 {
      ${r(g.typography.h3)}
    }
    h4,
    .h4 {
      ${r(g.typography.h4)}
    }
    h5,
    .h5 {
      ${r(g.typography.h5)}
    }
    h6,
    .h6 {
      ${r(g.typography.h6)}
    }

    p {
      margin: 0 0 ${g.spacing(2)};
    }

    button {
      letter-spacing: ${g.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,f.getFocusStyles)(g)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${g.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${g.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${g.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${g.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${g.colors.text.primary};
    }

    .text-warning {
      color: ${g.colors.warning.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${g.colors.error.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${g.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${g.components.textHighlight.background};
      color: ${g.components.textHighlight.text};
      padding: 0;
    }
  `}function r(g){return`
    margin: 0;
    font-size: ${g.fontSize};
    line-height: ${g.lineHeight};
    font-weight: ${g.fontWeight};
    letter-spacing: ${g.letterSpacing};
    font-family: ${g.fontFamily};
    margin-bottom: 0.45em;
  `}function c(g){return t.css`
    // fix white background on intercom in dark mode
    iframe.intercom-borderless-frame {
      color-scheme: ${g.colors.mode};
    }
  `}function a(g){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${g.typography.body.fontSize};
      font-weight: ${g.typography.body.fontWeight};
      line-height: ${g.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${g.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${g.components.input.background};
      color: ${g.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function u(g){return t.css`
    // TODO copy from _utils.scss
  `}function i(g){const y=g.breakpoints.values.xxl+g.spacing.gridSize*2+g.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};

      ${g.breakpoints.up("sm")} {
        margin: ${g.spacing(0,1)};
      }

      ${g.breakpoints.up("md")} {
        margin: ${g.spacing(0,2)};
      }

      @media (min-width: ${y}px) {
        max-width: ${g.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${g.spacing(2)};
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};
    }

    .page-body {
      padding: ${g.spacing(1)};
      background: ${g.components.panel.background};
      border: 1px solid ${g.components.panel.borderColor};
      margin-bottom: 32px;

      ${g.breakpoints.up("md")} {
        padding: ${g.spacing(2)};
      }

      ${g.breakpoints.up("lg")} {
        padding: ${g.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${g.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${g.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${g.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${g.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${g.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${g.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${g.spacing(1)};
      margin-top: ${g.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function p(){const g=(0,o.l4)();return n.createElement(t.Global,{styles:[d(g),c(g),a(g),i(g),l(g),s(g),u(g)]})}},72648:(Y,O,e)=>{"use strict";e.d(O,{Fg:()=>u,HE:()=>a,Ni:()=>r,Zz:()=>c,l4:()=>i,sJ:()=>y,wW:()=>g,yK:()=>p});var t=e(24420),n=e.n(t),o=e(66111),s=e(21544),l=e(7804);let f=null;const d=new WeakMap,r=o.createContext((0,s.j)());r.displayName="ThemeContext";const c=E=>{const h=v=>{const C=f||r;return o.createElement(C.Consumer,null,m=>o.createElement(E,{...v,theme:m.v1}))};return h.displayName=`WithTheme(${E.displayName})`,n()(h,E),h},a=E=>{const h=v=>{const C=f||r;return o.createElement(C.Consumer,null,m=>o.createElement(E,{...v,theme:m}))};return h.displayName=`WithTheme(${E.displayName})`,n()(h,E),h};function u(){return(0,o.useContext)(f||r).v1}function i(){return(0,o.useContext)(f||r)}function p(E){const h=u();let v=d.get(E);return v||(v=(0,l.B)(E),d.set(E,v)),v(h)}function g(E){const h=i();let v=d.get(E);return v||(v=(0,l.B)(E),d.set(E,v)),v(h)}const y=E=>(f=o.createContext(E),()=>{f=null})},34726:(Y,O,e)=>{"use strict";e.d(O,{nz:()=>d.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>l,sJ:()=>t.sJ,GU:()=>r,Bb:()=>f.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(21544);let o;const s=(c="dark")=>o?o(c):(0,n.j)({colors:{mode:c}}).v1,l=c=>(o=c,()=>{o=null});var f=e(7804),d=e(29428),r=e(85419)},85419:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{cardChrome:()=>n,focusCss:()=>r,getFocusStyles:()=>a,getMouseFocusStyles:()=>c,getTooltipContainerStyles:()=>u,hoverColor:()=>o,listItem:()=>s,listItemSelected:()=>l,mediaUp:()=>f});var t=e(28550);function n(i){return`
    background: ${i.colors.background.secondary};
    &:hover {
      background: ${o(i.colors.background.secondary,i)};
    }
    box-shadow: ${i.components.panel.boxShadow};
    border-radius: ${i.shape.radius.default};
`}function o(i,p){return p.isDark?(0,t.Z)(i).brighten(2).toString():(0,t.Z)(i).darken(2).toString()}function s(i){return`
  background: ${i.colors.background.secondary};
  &:hover {
    background: ${o(i.colors.background.secondary,i)};
  }
  box-shadow: ${i.components.panel.boxShadow};
  border-radius: ${i.shape.radius.default};
`}function l(i){return`
    background: ${o(i.colors.background.secondary,i)};
    color: ${i.colors.text.maxContrast};
`}function f(i){return`only screen and (min-width: ${i})`}const d=i=>i.hasOwnProperty("v1"),r=i=>{const p=d(i),g=p?i.colors.background.canvas:i.colors.bodyBg,y=p?i.colors.primary.main:i.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${g}, 0 0 0px 4px ${y};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function c(i){return{outline:"none",boxShadow:"none"}}function a(i){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${i.colors.background.canvas}, 0 0 0px 4px ${i.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const u=i=>`
  overflow: hidden;
  background: ${i.colors.background.secondary};
  box-shadow: ${i.shadows.z2};
  max-width: 800px;
  padding: ${i.spacing(1)};
  border-radius: ${i.shape.radius.default};
  z-index: ${i.zIndex.tooltip};
`},7804:(Y,O,e)=>{"use strict";e.d(O,{B:()=>n});var t=e(58635);function n(o){return(0,t.Z)(o)}},26519:(Y,O,e)=>{"use strict";e.d(O,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(Y,O,e)=>{"use strict";e.d(O,{BI:()=>o,WZ:()=>l,e7:()=>s,iJ:()=>t.iJ});var t=e(84559),n=e(99098);const o=()=>Object.keys(t._S);function s(f){return l(f?.type)}function l(f){if(f)switch(f){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.enum:return"list-ol";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{CompletionItemKind:()=>l.c,getAvailableIcons:()=>r.BI,getFieldTypeIcon:()=>r.e7,getFieldTypeIconName:()=>r.WZ,toIconName:()=>r.iJ});var t=e(2729),n=e.n(t),y={};for(const E in t)E!=="default"&&(y[E]=()=>t[E]);e.d(O,y);var o=e(96590),s=e.n(o),y={};for(const E in o)E!=="default"&&(y[E]=()=>o[E]);e.d(O,y);var l=e(26519),f=e(5771),d=e.n(f),y={};for(const E in f)["default","CompletionItemKind"].indexOf(E)<0&&(y[E]=()=>f[E]);e.d(O,y);var r=e(50622),c=e(64343),a=e.n(c),y={};for(const E in c)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(E)<0&&(y[E]=()=>c[E]);e.d(O,y);var u=e(76891),i=e.n(u),y={};for(const E in u)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(E)<0&&(y[E]=()=>u[E]);e.d(O,y);var p=e(53581),g=e.n(p),y={};for(const E in p)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(E)<0&&(y[E]=()=>p[E]);e.d(O,y)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},2729:()=>{"use strict"},66120:(Y,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,o)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&o())}},16514:(Y,O,e)=>{"use strict";e.d(O,{Gc:()=>y,Jx:()=>l,O9:()=>u,Wm:()=>h,_V:()=>r,bM:()=>E,f7:()=>c,iV:()=>a,ns:()=>d,te:()=>f});var t=e(82897),n=e.n(t),o=e(28550);const s=4,l="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",d="rgba(237, 46, 24, 1)",r="rgba(150, 150, 150, 1)",c="rgba(247, 149, 32, 1)",a=.09,u=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function i(v){const C=(0,t.map)(v,p),m=(0,t.sortBy)(C,["h"]),D=(0,t.chunk)(m,s),P=(0,t.map)(D,M=>(0,t.sortBy)(M,"l")),b=(0,t.flattenDeep)((0,t.zip)(...P));return(0,t.map)(b,g)}function p(v){return(0,o.Z)(v).toHsl()}function g(v){return(0,o.Z)(v).toHexString()}function y(v){return(0,o.Z)(v).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function E(v,C){const m=(0,o.Z)(v),D=m.getBrightness();return m.getAlpha()<.3?C?"rgb(247, 248, 250)":"rgb(32, 34, 38)":D>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let h=i(u)},79406:(Y,O,e)=>{"use strict";e.d(O,{R:()=>t,g:()=>n});const t=o=>o().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=o=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(o)},73289:(Y,O,e)=>{"use strict";e.d(O,{x:()=>t});function t(n,o,s){}},39027:(Y,O,e)=>{"use strict";e.d(O,{O:()=>t});function t(n){const s=n.lastIndexOf("."),l=n.substring(s),f=n.substring(0,s);return f.length<16?n:`${f.substring(0,16)}...${l}`}},27303:(Y,O,e)=>{"use strict";e.d(O,{C:()=>o});var t=e(82897),n=e.n(t);function o(s,l){let f=0,d=s.indexOf(l);l=l.replace(/\s/g,"");const r=[];if(d!==-1)return{distance:0,found:!0,ranges:[{start:d,end:d+l.length-1}]};for(const c of l){const a=s.indexOf(c,d);if(a===-1)return{distance:1/0,ranges:[],found:!1};if(d!==-1&&(f+=a-d),d=a+1,r.length===0)r.push({start:a,end:a});else{const u=(0,t.last)(r);a===u.end+1?u.end++:r.push({start:a,end:a})}}return{distance:f,ranges:r,found:!0}}},37951:(Y,O,e)=>{"use strict";e.d(O,{c:()=>f,t:()=>r});var t=e(97925),n=e(66111),o=e(80332),s=e(89880);function l(){t.ZP.options.lng||t.ZP.use(o.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const f=c=>(l(),n.createElement(s.c,{...c})),d=t.ZP.t,r=(c,a,u)=>(l(),d(c,a,u))},13643:(Y,O,e)=>{"use strict";e.d(O,{ns:()=>l.ns,Jx:()=>l.Jx,Qi:()=>t,JU:()=>f.JU,_V:()=>l._V,zG:()=>v,te:()=>l.te,f7:()=>l.f7,iV:()=>l.iV,Ot:()=>s,Yi:()=>d.Yi,nu:()=>g.Z,_J:()=>y._J,xq:()=>h.x,MX:()=>i.MX,O9:()=>l.O9,hu:()=>E.h,C6:()=>C.C,AE:()=>i.AE,iu:()=>u.i,np:()=>a.n,vm:()=>c.vm,Bx:()=>c.Bx,bM:()=>l.bM,Gc:()=>l.Gc,z3:()=>f.z3,go:()=>r.g,Rc:()=>r.R,xl:()=>d.xl,l1:()=>d.l1,X1:()=>i.X1,FE:()=>f.FE,Wm:()=>l.Wm,NW:()=>p.N,Gu:()=>f.Gu});var t={};e.r(t),e.d(t,{getNextCharacter:()=>o,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(m){const D=(this.document||this.ownerDocument).querySelectorAll(m);let P=this,b;do{for(b=D.length;--b>=0&&D.item(b)!==P;);P=P.parentElement}while(b<0&&P);return P});function n(m,D){let P=m.parentElement.previousSibling,b;for(;P;){if(b=P.querySelector(D),b)return b;P=P.previousSibling}}function o(m){const D=(m||window).getSelection();if(!D||!D.anchorNode)return null;const P=D.getRangeAt(0),b=D.anchorNode.textContent,M=P.startOffset;return b.slice(M,M+1)}var s=e(61970),l=e(16514),f=e(97291),d=e(12724),r=e(79406),c=e(3385),a=e(90771),u=e(30901),i=e(4176),p=e(32434),g=e(8644),y=e(2525),E=e(88383),h=e(73289),v=(m=>(m.id="id",m.title="title",m.subTitle="subTitle",m.mainStat="mainStat",m.secondaryStat="secondaryStat",m.source="source",m.target="target",m.detail="detail__",m.arc="arc__",m.color="color",m))(v||{}),C=e(27303)},88383:(Y,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(82897),n=e.n(t);const o=(0,t.throttle)((...l)=>{console.log(...l)},500),s=l=>{let f=!1;return{logger:(d,r=!1,...c)=>{},enable:()=>f=!0,disable:()=>f=!1,isEnabled:()=>f}}},4176:(Y,O,e)=>{"use strict";e.d(O,{AE:()=>l,MX:()=>d,X1:()=>f});let t;const n=new Map,o=500;let s="";function l(){return t||(t=document.createElement("canvas").getContext("2d")),t}function f(r,c,a=400){const u=`${a} ${c}px 'Inter'`,i=r+u,p=n.get(i);if(p)return p;const g=l();s!==u&&(g.font=s=u);const y=g.measureText(r);return n.size===o&&n.clear(),n.set(i,y),y}function d(r,c,a,u,i,p){const g=f(r,14,p),y=c/(g.width+2)*14,E=a/u,h=Math.min(E,y);return Math.min(h,i??h)}},61970:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{getChildId:()=>n,renderOrCallToRender:()=>o});var t=e(66111);function n(s){let l;const f=t.Children.only(s);return"id"in f?.props?l=f.props.id:"inputId"in f.props&&(l=f?.props.inputId),typeof l=="string"?l:void 0}function o(s,l){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&l)return s(l);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(Y,O,e)=>{"use strict";e.d(O,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const o=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(l=>{o.style[l]=s[l]}),document.body.appendChild(o),t=o.offsetWidth-o.clientWidth,document.body.removeChild(o)}else t=0;return t||0}},8644:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>n,n:()=>f});var t=e(27303),n=(d=>(d.Word="Word",d.Prefix="Prefix",d.Fuzzy="Fuzzy",d))(n||{});const f={Word:(d,r)=>d.filter(c=>(c.filterText||c.label).includes(r)),Prefix:(d,r)=>d.filter(c=>(c.filterText||c.label).startsWith(r)),Fuzzy:(d,r)=>(r=r.toLowerCase(),d.filter(c=>{const{distance:a,ranges:u,found:i}=(0,t.C)(c.label.toLowerCase(),r);return i?(c.sortValue=a,c.highlightParts=u,!0):!1}))}},12724:(Y,O,e)=>{"use strict";e.d(O,{Yi:()=>n,l1:()=>s,xl:()=>o});var t=e(95787);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},o=(l,f)=>{const d=l.split(`
`).map(c=>t.gO.create({type:"code_line",nodes:[t.xv.create(c)]})),r=t.gO.create({data:{syntax:f},type:"code_block",nodes:d});return t.BB.create({nodes:[r]})},s=(l,f)=>{const d=o(l,f);return t.B4.create({document:d})}},30901:(Y,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,o)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:o.index})),!!s){for(let l=0;l<s?.length;l++)if(s[l].onClick){const f=s[l].onClick;s[l].onClick=d=>{d.ctrlKey||d.metaKey||d.shiftKey||(d.preventDefault(),f(d,{field:n,rowIndex:o.index}))}}return s}}},3385:(Y,O,e)=>{"use strict";e.d(O,{Bx:()=>o,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function o(d=""){const r=l(d.toLowerCase()),c=Math.abs(r%t.length);return s(c)}function s(d){return{color:t[d],borderColor:n[d]}}function l(d){let r=5381;for(let c=0;c<d.length;c++)r=(r<<5)+r+d.charCodeAt(c);return r}var f={getTagColorsFromName:o}},21133:(Y,O,e)=>{"use strict";e.d(O,{k:()=>o});var t=e(9892),n=e(5680);function o(s,l,f,d,r){return{arrow:t.css`
      height: 1rem;
      width: 1rem;
      position: absolute;
      pointer-events: none;

      &::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      &::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }
    `,container:t.css`
      background-color: ${l};
      border-radius: ${s.shape.radius.default};
      border: 1px solid ${f};
      box-shadow: ${s.shadows.z2};
      color: ${d};
      font-size: ${s.typography.bodySmall.fontSize};
      padding: ${s.spacing(r.topBottom,r.rightLeft)};
      transition: opacity 0.3s;
      z-index: ${s.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      &[data-popper-placement*='bottom'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-top: -7px;
        top: 0;

        &::before {
          border-color: transparent transparent ${f} transparent;
          border-width: 0 8px 7px 8px;
          position: absolute;
          top: -1px;
        }

        &::after {
          border-color: transparent transparent ${l} transparent;
          border-width: 0 8px 7px 8px;
        }
      }

      &[data-popper-placement*='top'] > div[data-popper-arrow='true'] {
        bottom: 0;
        left: 0;
        margin-bottom: -14px;

        &::before {
          border-color: ${f} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
          position: absolute;
          top: 1px;
        }

        &::after {
          border-color: ${l} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
        }
      }

      &[data-popper-placement*='right'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-left: -10px;

        &::before {
          border-color: transparent ${f} transparent transparent;
          border-width: 7px 6px 7px 0;
        }

        &::after {
          border-color: transparent ${l} transparent transparent;
          border-width: 6px 7px 7px 0;
          left: 2px;
          top: 1px;
        }
      }

      &[data-popper-placement*='left'] > div[data-popper-arrow='true'] {
        margin-right: -11px;
        right: 0;

        &::before {
          border-color: transparent transparent transparent ${f};
          border-width: 7px 0 6px 7px;
        }

        &::after {
          border-color: transparent transparent transparent ${l};
          border-width: 6px 0 5px 5px;
          left: 1px;
          top: 1px;
        }
      }

      code {
        border: none;
        display: inline;
        background: ${n.darken(l,.1)};
        color: ${d};
      }

      pre {
        background: ${n.darken(l,.1)};
        color: ${d};
      }

      a {
        color: ${d};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `,headerClose:t.css`
      color: ${s.colors.text.secondary};
      position: absolute;
      right: ${s.spacing(1)};
      top: ${s.spacing(1.5)};
      background-color: transparent;
      border: 0;
    `,header:t.css`
      padding-top: ${s.spacing(1)};
      padding-bottom: ${s.spacing(2)};
    `,body:t.css`
      padding-top: ${s.spacing(1)};
      padding-bottom: ${s.spacing(1)};
    `,footer:t.css`
      padding-top: ${s.spacing(2)};
      padding-bottom: ${s.spacing(1)};
    `}}},32434:(Y,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(66111);function n(){const[o,s]=(0,t.useState)(0);return()=>s(l=>l+1)}},97291:(Y,O,e)=>{"use strict";e.d(O,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>o});var t=(l=>(l.onBlur="onBlur",l.onFocus="onFocus",l.onChange="onChange",l))(t||{});const n=(l,f)=>{const d=f.reduce((r,c)=>c.rule(l)?r:r.concat(c.errorMessage),[]);return d.length>0?d:null},o=(l,f)=>f&&f[l],s=(l,f)=>({rule:d=>!!d.match(l),errorMessage:f||"Value is not valid"})},42879:(Y,O,e)=>{"use strict";e.d(O,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-test-id hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"}}},68183:(Y,O,e)=>{"use strict";e.d(O,{wl:()=>o});var t=e(42879);const o={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},BrowseDashbards:{table:{row:s=>`data-testid ${s} row`,checkbox:s=>`data-testid ${s} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}}},components:t.z}},40538:(Y,O,e)=>{"use strict";e.d(O,{As:()=>B,B5:()=>t,Bd:()=>oe,FI:()=>E,IG:()=>S,Jp:()=>u,KC:()=>g,LB:()=>c,M8:()=>N,Q8:()=>s,QH:()=>L,Ss:()=>V,UV:()=>r,Y4:()=>Q,ap:()=>U,b8:()=>H,bQ:()=>m,eK:()=>n,f3:()=>F,h2:()=>z,i3:()=>P,iT:()=>ie,jG:()=>R,jK:()=>b,kW:()=>f,kv:()=>d,l8:()=>i,o0:()=>h,pR:()=>p,pc:()=>T,pu:()=>v,q1:()=>l,v7:()=>G,wN:()=>C,wf:()=>y,wm:()=>x,xy:()=>o,yK:()=>a});var t=(j=>(j.Linear="linear",j.Quad="quad",j))(t||{}),n=(j=>(j.Clamped="clamped",j.Mod="mod",j))(n||{}),o=(j=>(j.Field="field",j.Fixed="fixed",j.Template="template",j))(o||{}),s=(j=>(j.Field="field",j.Fixed="fixed",j.Mapping="mapping",j))(s||{}),l=(j=>(j.Auto="auto",j.Coords="coords",j.Geohash="geohash",j.Lookup="lookup",j))(l||{}),f=(j=>(j.Count="count",j.Size="size",j))(f||{}),d=(j=>(j.auto="auto",j.ge="ge",j.le="le",j.unknown="unknown",j))(d||{}),r=(j=>(j.Ascending="Ascending",j.Descending="Descending",j))(r||{}),c=(j=>(j.Auto="auto",j.Bottom="bottom",j.Hidden="hidden",j.Left="left",j.Right="right",j.Top="top",j))(c||{}),a=(j=>(j.Series="series",j.Text="text",j))(a||{}),u=(j=>(j.Always="always",j.Auto="auto",j.Never="never",j))(u||{}),i=(j=>(j.Bars="bars",j.Line="line",j.Points="points",j))(i||{}),p=(j=>(j.Constant="constant",j.NegativeY="negative-Y",j))(p||{}),g=(j=>(j.Linear="linear",j.Smooth="smooth",j.StepAfter="stepAfter",j.StepBefore="stepBefore",j))(g||{}),y=(j=>(j.Linear="linear",j.Log="log",j.Ordinal="ordinal",j.Symlog="symlog",j))(y||{}),E=(j=>(j.Hue="hue",j.None="none",j.Opacity="opacity",j.Scheme="scheme",j))(E||{}),h=(j=>(j.None="none",j.Normal="normal",j.Percent="percent",j))(h||{}),v=(j=>(j[j.After=1]="After",j[j.Before=-1]="Before",j[j.Center=0]="Center",j))(v||{}),C=(j=>(j[j.Horizontal=0]="Horizontal",j[j.Vertical=1]="Vertical",j))(C||{}),m=(j=>(j[j.Down=-1]="Down",j[j.Left=-1]="Left",j[j.Right=1]="Right",j[j.Up=1]="Up",j))(m||{});const D={dash:[]};var P=(j=>(j.Area="area",j.Dashed="dashed",j.DashedAndArea="dashed+area",j.Line="line",j.LineAndArea="line+area",j.Off="off",j.Series="series",j))(P||{}),b=(j=>(j.Hidden="hidden",j.List="list",j.Table="table",j))(b||{});const M={calcs:[]};var x=(j=>(j.Auto="auto",j.Horizontal="horizontal",j.Vertical="vertical",j))(x||{});const A={timezone:[]};var T=(j=>(j.Background="background",j.BackgroundSolid="background_solid",j.None="none",j.Value="value",j))(T||{}),S=(j=>(j.Area="area",j.Line="line",j.None="none",j))(S||{}),U=(j=>(j.Auto="auto",j.Center="center",j))(U||{}),R=(j=>(j.Auto="auto",j.Name="name",j.None="none",j.Value="value",j.ValueAndName="value_and_name",j))(R||{}),F=(j=>(j.Multi="multi",j.None="none",j.Single="single",j))(F||{}),B=(j=>(j.Ascending="asc",j.Descending="desc",j.None="none",j))(B||{});const K={calcs:[]};var L=(j=>(j.Basic="basic",j.Gradient="gradient",j.Lcd="lcd",j))(L||{}),N=(j=>(j.Color="color",j.Hidden="hidden",j.Text="text",j))(N||{}),z=(j=>(j.Auto="auto",j.BasicGauge="basic",j.ColorBackground="color-background",j.ColorBackgroundSolid="color-background-solid",j.ColorText="color-text",j.Gauge="gauge",j.GradientGauge="gradient-gauge",j.Image="image",j.JSONView="json-view",j.LcdGauge="lcd-gauge",j.Sparkline="sparkline",j))(z||{}),G=(j=>(j.Basic="basic",j.Gradient="gradient",j))(G||{});const I={fields:[],reducer:[]};var V=(j=>(j.Lg="lg",j.Md="md",j.Sm="sm",j))(V||{}),H=(j=>(j.CSV="csv",j.Date="date",j.Distributed="distributed",j.DoubleQuote="doublequote",j.Glob="glob",j.HTML="html",j.JSON="json",j.Lucene="lucene",j.PercentEncode="percentencode",j.Pipe="pipe",j.QueryParam="queryparam",j.Raw="raw",j.Regex="regex",j.SQLString="sqlstring",j.SingleQuote="singlequote",j.Text="text",j.UriEncode="uriencode",j))(H||{}),Q=(j=>(j.exact="exact",j.none="none",j.numbers="numbers",j.signature="signature",j))(Q||{}),oe=(j=>(j.EQ="eq",j.GT="gt",j.GTE="gte",j.LT="lt",j.LTE="lte",j.NEQ="neq",j))(oe||{});const se={align:"auto",inspect:!1},ie="browser"},85596:(Y,O,e)=>{"use strict";e.d(O,{AU:()=>P,G_:()=>s,Gu:()=>c,H3:()=>p,Hi:()=>y,NU:()=>C,Ql:()=>M,SJ:()=>b,Vb:()=>m,ZM:()=>D,bn:()=>o,gW:()=>l,n5:()=>g});const t={tags:[]},n={exclude:!1,ids:[]},o={list:[]},s={enable:!0,hide:!1},l={id:"00000000-0000-0000-0000-000000000000",multi:!1,options:[],skipUrlSync:!1};var f=(x=>(x[x.never=0]="never",x[x.onDashboardLoad=1]="onDashboardLoad",x[x.onTimeRangeChanged=2]="onTimeRangeChanged",x))(f||{}),d=(x=>(x[x.dontHide=0]="dontHide",x[x.hideLabel=1]="hideLabel",x[x.hideVariable=2]="hideVariable",x))(d||{}),r=(x=>(x[x.alphabeticalAsc=1]="alphabeticalAsc",x[x.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",x[x.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",x[x.alphabeticalDesc=2]="alphabeticalDesc",x[x.disabled=0]="disabled",x[x.numericalAsc=3]="numericalAsc",x[x.numericalDesc=4]="numericalDesc",x))(r||{}),c=(x=>(x.Done="Done",x.Error="Error",x.Loading="Loading",x.NotStarted="NotStarted",x.Streaming="Streaming",x))(c||{});const a={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var u=(x=>(x.ContinuousBlPu="continuous-BlPu",x.ContinuousBlYlRd="continuous-BlYlRd",x.ContinuousBlues="continuous-blues",x.ContinuousGrYlRd="continuous-GrYlRd",x.ContinuousGreens="continuous-greens",x.ContinuousPurples="continuous-purples",x.ContinuousRdYlGr="continuous-RdYlGr",x.ContinuousReds="continuous-reds",x.ContinuousYlBl="continuous-YlBl",x.ContinuousYlRd="continuous-YlRd",x.Fixed="fixed",x.PaletteClassic="palette-classic",x.PaletteClassicByName="palette-classic-by-name",x.Shades="shades",x.Thresholds="thresholds",x))(u||{});const i={h:9,w:12,x:0,y:0};var p=(x=>(x.Absolute="absolute",x.Percentage="percentage",x))(p||{});const g={steps:[]};var y=(x=>(x.RangeToText="range",x.RegexToText="regex",x.SpecialValue="special",x.ValueToText="value",x))(y||{}),E=(x=>(x.Empty="empty",x.False="false",x.NaN="nan",x.Null="null",x.NullAndNan="null+nan",x.True="true",x))(E||{}),h=(x=>(x[x.Crosshair=1]="Crosshair",x[x.Off=0]="Off",x[x.Tooltip=2]="Tooltip",x))(h||{});const v=0,C={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},m={overrides:[]},D={id:""},P={links:[],mappings:[]},b={collapsed:!1,panels:[]},M={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(Y,O,e)=>{"use strict";e.d(O,{Ql:()=>o});var t=e(85596),n=(p=>(p[p.dontHide=0]="dontHide",p[p.hideLabel=1]="hideLabel",p[p.hideVariable=2]="hideVariable",p))(n||{});const o=t.Ql,s={...t.gW,description:null,hide:0,datasource:null},l=t.NU,f=t.SJ,d=t.AU,r=t.Vb,c=t.ZM,a=t.G_,u=t.bn,i=t.n5},37573:(Y,O,e)=>{"use strict";e.d(O,{Or:()=>Dr,b4:()=>Gs,nH:()=>Ir});var t=e(58166),n=e(66111),o=e(67948),s=e(56895),l=e(6260),f=e(37932),d=e(41818),r=e(35645),c=e(53546),a=e(5191),u=e(29428),i=e(85511),p=e(77501),g=e(3153);const y=n.forwardRef(($e,kt)=>n.createElement("div",{id:"ngRoot",ref:kt,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));y.displayName="AngularRoot";var E=e(55024),h=e(11484),v=e(70926),C=e(54899),m=e(86647),D=e(20308),P=e(77582),b=e(9398),M=e(19349),x=e(85385),A=e(64703);async function T(){if(r.v.angularSupportEnabled){const{AngularApp:$e}=await Promise.all([e.e(6093),e.e(2773),e.e(9974),e.e(4704)]).then(e.bind(e,62459)),kt=new $e;kt.init(),kt.bootstrap()}else(0,h.W)({load:($e,kt,Yt)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,v.t)({get:$e=>{switch($e){case"backendSrv":return(0,E.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,C.i)();case"contextSrv":return(0,E.d)("getLegacyAngularInjector","contextSrv"),P.Vt;case"dashboardSrv":return(0,E.d)("getLegacyAngularInjector","getDashboardSrv"),(0,b.h4)();case"datasourceSrv":return(0,E.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,m.F)();case"linkSrv":return(0,E.d)("getLegacyAngularInjector","linkSrv"),(0,A.Bq)();case"validationSrv":return(0,E.d)("getLegacyAngularInjector","validationSrv"),x.t;case"timeSrv":return(0,E.d)("getLegacyAngularInjector","timeSrv"),(0,M.$t)();case"templateSrv":return(0,E.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,D.J)()}throw"Angular is disabled.  Unable to expose: "+$e}})}var S=e(9892),U=e(9085),R=e.n(U),F=e(77346),B=e(72648),K=e(34177),L=e(29952),N=e(83962),z=e(86922),G=e(67487),I=e(39904),V=e(35287),H=e(57386),Q=e(56651);const oe=0,se=$e=>{const kt=n.useRef(null),Yt=n.useRef(null),un=n.useRef($e.items);un.current=$e.items;const yn=(0,Q.useVirtual)({size:un.current.length,parentRef:Yt}),{query:hn,search:Wn,currentRootActionId:fa,activeIndex:sa,options:ra}=(0,t.useKBar)(Va=>({search:Va.searchQuery,currentRootActionId:Va.currentRootActionId,activeIndex:Va.activeIndex}));n.useEffect(()=>{const Va=La=>{La.key==="ArrowUp"||La.ctrlKey&&La.key==="p"?(La.preventDefault(),hn.setActiveIndex(rs=>{let fs=rs>oe?rs-1:rs;if(typeof un.current[fs]=="string"){if(fs===0)return rs;fs-=1}return fs})):La.key==="ArrowDown"||La.ctrlKey&&La.key==="n"?(La.preventDefault(),hn.setActiveIndex(rs=>{let fs=rs<un.current.length-1?rs+1:rs;if(typeof un.current[fs]=="string"){if(fs===un.current.length-1)return rs;fs+=1}return fs})):La.key==="Enter"&&(La.preventDefault(),kt.current?.click())};return window.addEventListener("keydown",Va),()=>window.removeEventListener("keydown",Va)},[hn]);const{scrollToIndex:Aa}=yn;n.useEffect(()=>{Aa(sa,{align:sa<=1?"end":"auto"})},[sa,Aa]),n.useEffect(()=>{hn.setActiveIndex(typeof $e.items[oe]=="string"?oe+1:oe)},[Wn,fa,$e.items,hn]);const zs=n.useCallback((Va,La)=>{if(typeof La=="string")return;const rs=La.url;La.command?(La.command.perform(La),hn.toggle()):rs?Va.ctrlKey||Va.metaKey||Va.shiftKey||hn.toggle():(hn.setSearch(""),hn.setCurrentRootAction(La.id)),ra.callbacks?.onSelectAction?.(La)},[hn,ra]),Rs=(0,H.usePointerMovedSinceMount)();return n.createElement("div",{ref:Yt,style:{maxHeight:$e.maxHeight||400,position:"relative",overflow:"auto"}},n.createElement("div",{role:"listbox",id:t.KBAR_LISTBOX,style:{height:`${yn.totalSize}px`,width:"100%"}},yn.virtualItems.map(Va=>{const La=un.current[Va.index],{target:rs,url:fs}=La,Ur=typeof La!="string"&&{onPointerMove:()=>Rs&&sa!==Va.index&&hn.setActiveIndex(Va.index),onPointerDown:()=>hn.setActiveIndex(Va.index),onClick:Po=>zs(Po,La)},wr=Va.index===sa,Bi={id:(0,t.getListboxItemId)(Va.index),role:"option","aria-selected":wr,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Va.start}px)`},...Ur},Fo=n.cloneElement($e.onRender({item:La,active:wr}),{ref:Va.measureRef});return fs?n.createElement("a",{key:Va.index,href:fs,target:rs,ref:wr?kt:null,...Bi},Fo):n.createElement("div",{key:Va.index,ref:wr?kt:null,...Bi},Fo)})))},ie=n.forwardRef(({action:$e,active:kt,currentRootActionId:Yt},un)=>{const yn=n.useMemo(()=>{if(!Yt)return $e.ancestors;const sa=$e.ancestors.findIndex(ra=>ra.id===Yt);return $e.ancestors.slice(sa+1)},[$e.ancestors,Yt]),hn=(0,B.wW)(j);let Wn=$e.name;const fa=sa=>Boolean(sa.command?.perform||sa.url);return $e.children.length&&!fa($e)&&!Wn.endsWith("...")&&(Wn+="..."),n.createElement("div",{ref:un,className:(0,S.cx)(hn.row,kt&&hn.activeRow)},n.createElement("div",{className:hn.actionContainer},$e.icon,n.createElement("div",{className:hn.textContainer},yn.map(sa=>n.createElement(n.Fragment,{key:sa.id},!fa(sa)&&n.createElement(n.Fragment,null,n.createElement("span",{className:hn.breadcrumbAncestor},sa.name),n.createElement("span",{className:hn.breadcrumbSeparator},"\u203A")))),n.createElement("span",null,Wn)),$e.subtitle&&n.createElement("span",{className:hn.subtitleText},$e.subtitle)))});ie.displayName="ResultItem";const j=$e=>({row:(0,S.css)({padding:$e.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:$e.shape.radius.default,margin:$e.spacing(0,1)}),activeRow:(0,S.css)({color:$e.colors.text.maxContrast,background:$e.colors.emphasize($e.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:$e.spacing(.5),borderRadius:$e.shape.radius.default,backgroundImage:$e.colors.gradients.brandVertical}}),actionContainer:(0,S.css)({display:"flex",gap:$e.spacing(1),alignItems:"baseline",fontSize:$e.typography.fontSize,width:"100%"}),textContainer:(0,S.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,S.css)({color:$e.colors.text.secondary}),breadcrumbSeparator:(0,S.css)({color:$e.colors.text.secondary,marginLeft:$e.spacing(1),marginRight:$e.spacing(1)}),subtitleText:(0,S.css)({...$e.typography.bodySmall,color:$e.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var de=e(99151),ce=e.n(de),ee=e(82002),le=e(13019),q=e(82e3);const fe=5,Z=4,ne=3,re=2,ve=1,me=100,Ie=5,Ge=ce()(Te,200);async function gt(){if(!ee.Vt.user.isSignedIn)return[];const $e=(await le.Z.getDashboardOpened()).slice(0,Ie),Yt=(await(0,q.getGrafanaSearcher)().search({kind:["dashboard"],limit:Ie,uid:$e})).view.toArray();return Yt.sort((yn,hn)=>{const Wn=$e.indexOf(yn.uid),fa=$e.indexOf(hn.uid);return Wn-fa}),Yt.map(yn=>{const{url:hn,name:Wn}=yn;return{id:`recent-dashboards${hn}`,name:`${Wn}`,section:(0,V.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:fe,url:hn}})}async function Te($e){if($e.length===0||!ee.Vt.user.isSignedIn&&!r.v.bootData.settings.anonymousEnabled)return[];const kt=await(0,q.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:$e,limit:me});return kt.view.map(un=>{const{url:yn,name:hn,kind:Wn,location:fa}=un;return{id:`go/${Wn}${yn}`,name:`${hn}`,section:Wn==="dashboard"?(0,V.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,V.t)("command-palette.section.folder-search-results","Folders"),priority:ve,url:yn,subtitle:kt.view.dataFrame.meta?.custom?.locationInfo[fa]?.name}})}function Le($e,kt){const[Yt,un]=(0,n.useState)([]),[yn,hn]=(0,n.useState)(!1),Wn=(0,n.useRef)(0);return(0,n.useEffect)(()=>{const fa=Date.now();kt&&$e.length>0?(hn(!0),Ge($e).then(sa=>{fa>Wn.current&&(un(sa),hn(!1),Wn.current=fa)})):(un([]),hn(!1),Wn.current=fa)},[kt,$e]),{searchResults:Yt,isFetchingSearchResults:yn}}var Ye=e(27876),it=e(72196),ht=e(45984),Re=e(18271),ye=e(25337),Ce=e(41197);const be=$e=>{let kt=$e.children||[];if($e.id==="help"){const Yt=()=>{Re.Z.publish(new ht.Dn({component:Ce.B}))};$e.children=[...kt,...(0,ye.dP)(),...Et(),{id:"keyboard-shortcuts",text:(0,V.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:Yt}]}return $e},We=($e,kt)=>{const Yt=$e.onClick;return $e.onClick=()=>{(0,d.ff)("grafana_navigation_item_clicked",{path:$e.url??$e.id,state:kt?"expanded":"collapsed"}),Yt?.()},$e.children&&($e.children=$e.children.map(un=>We(un,kt))),$e},Qe=($e,kt)=>Boolean($e===kt||mt($e,kt)),mt=($e,kt)=>Boolean($e.children?.some(Yt=>Yt===kt?!0:mt(Yt,kt))),vt=$e=>$e?.split("?")[0]??"",rt=($e,kt)=>{const Yt=vt(kt?.url),un=vt($e.url);return un&&un.length>Yt?.length},Ot=($e,kt,Yt)=>{const un="/dashboards";for(const yn of $e){const hn=vt(yn.url),Wn=it.u.stripBaseFromUrl(hn);if(Wn&&yn.id!=="starred")if(Wn===kt){Yt=yn;break}else if(Wn!=="/"&&kt.startsWith(Wn))rt(yn,Yt)&&(Yt=yn);else if(Wn==="/alerting/list"&&kt.startsWith("/alerting/notification/")){Yt=yn;break}else Wn===un&&kt.startsWith("/d/")&&rt(yn,Yt)&&(Yt=yn);if(yn.children&&(Yt=Ot(yn.children,kt,Yt)),vt(Yt?.url)===kt)return Yt}return Yt};function Et(){const{buildInfo:$e,licenseInfo:kt}=r.v,Yt=kt.stateInfo?` (${kt.stateInfo})`:"",un=[];return un.push({target:"_blank",id:"version",text:`${$e.edition}${Yt}`,url:kt.licenseUrl,icon:"external-link-alt"}),$e.hasUpdate&&un.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),un}var Mt=e(5534);function ue($e){return"navModel."+$e.id}function De($e,kt=[]){const Yt=[];for(let un of $e){un.id==="help"&&(un=be({...un}),delete un.url);const{url:yn,target:hn,text:Wn,isCreateAction:fa,children:sa,onClick:ra}=un,Aa=Boolean(sa?.length);if(!(yn||ra||Aa))continue;const zs=fa?(0,V.t)("command-palette.section.actions","Actions"):(0,V.t)("command-palette.section.pages","Pages"),Rs=fa?Z:ne,Va=kt.map(rs=>rs.text).join(" > "),La={id:ue(un),name:Wn,section:zs,url:yn,target:hn,parent:kt.length>0&&!fa?ue(kt[kt.length-1]):void 0,perform:ra,priority:Rs,subtitle:fa?void 0:Va};if(Yt.push(La),sa?.length){const rs=De(sa,[...kt,un]);Yt.push(...rs)}}return Yt}const Ne=$e=>{const kt=[{id:"preferences/theme",name:(0,V.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,V.t)("command-palette.section.preferences","Preferences"),priority:re},{id:"preferences/dark-theme",name:(0,V.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,Mt.L)("dark"),parent:"preferences/theme",priority:re},{id:"preferences/light-theme",name:(0,V.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,Mt.L)("light"),parent:"preferences/theme",priority:re}],Yt=De($e);return[...kt,...Yt]};function tt($e){const[kt,Yt]=(0,n.useState)([]),[un,yn]=(0,n.useState)([]),{navBarTree:hn}=(0,Ye.useSelector)(Wn=>({navBarTree:Wn.navBarTree}));return(0,n.useEffect)(()=>{const Wn=Ne(hn);Yt(Wn)},[hn]),(0,n.useEffect)(()=>{$e||gt().then(Wn=>yn(Wn)).catch(Wn=>{console.error("Error loading recent dashboard actions",Wn)})},[$e]),$e?kt:[...un,...kt]}var et=e(22759);const Ue={name:"none",priority:t.Priority.NORMAL};function Fe($e,kt){return kt.priority-$e.priority}function Ee(){const{search:$e,actions:kt,rootActionId:Yt}=(0,t.useKBar)(Aa=>({search:Aa.searchQuery,actions:Aa.actions,rootActionId:Aa.currentRootActionId})),un=n.useMemo(()=>Object.keys(kt).reduce((Aa,zs)=>{const Rs=kt[zs];if(!Rs.parent&&!Yt&&Aa.push(Rs),Rs.id===Yt)for(let Va=0;Va<Rs.children.length;Va++)Aa.push(Rs.children[Va]);return Aa},[]).sort(Fe),[kt,Yt]),yn=n.useCallback(Aa=>{let zs=[];for(let Rs=0;Rs<Aa.length;Rs++)zs.push(Aa[Rs]);return function Rs(Va,La=zs){for(let rs=0;rs<Va.length;rs++)if(Va[rs].children.length>0){let fs=Va[rs].children;for(let Ur=0;Ur<fs.length;Ur++)La.push(fs[Ur]);Rs(Va[rs].children,La)}return La}(Aa)},[]),hn=!$e,Wn=n.useMemo(()=>hn?un:yn(un),[yn,un,hn]),fa=Me(Wn,$e),sa=n.useMemo(()=>{let Aa={},zs=[],Rs=[];for(let La=0;La<fa.length;La++){const rs=fa[La],fs=rs.action,Ur=rs.score||t.Priority.NORMAL,wr={name:typeof fs.section=="string"?fs.section:fs.section?.name||Ue.name,priority:typeof fs.section=="string"?Ur:fs.section?.priority||0+Ur};Aa[wr.name]||(Aa[wr.name]=[],zs.push(wr)),Aa[wr.name].push({priority:fs.priority+Ur,action:fs})}Rs=zs.sort(Fe).map(La=>({name:La.name,actions:Aa[La.name].sort(Fe).map(rs=>rs.action)}));let Va=[];for(let La=0;La<Rs.length;La++){let rs=Rs[La];rs.name!==Ue.name&&Va.push(rs.name);for(let fs=0;fs<rs.actions.length;fs++)Va.push(rs.actions[fs])}return Va},[fa]),ra=n.useMemo(()=>Yt,[sa]);return n.useMemo(()=>({results:sa,rootActionId:ra}),[ra,sa])}function Me($e,kt){const Yt=Ze(),un=n.useMemo(()=>({filtered:$e,search:kt}),[$e,kt]),{filtered:yn,search:hn}=(0,H.useThrottledValue)(un);return n.useMemo(()=>{if(hn.trim()==="")return yn.map(sa=>({score:0,action:sa}));const Wn=yn.map(({name:sa,keywords:ra,subtitle:Aa})=>`${sa} ${ra??""} ${Aa??""}`.toLowerCase()),fa=[];if(hn.length>He){const sa=hn.toLowerCase();for(let ra=0;ra<Wn.length;ra++){const zs=Wn[ra].indexOf(sa);if(zs>-1){const Rs=zs*-1,Va=yn[ra];fa.push({score:Rs,action:Va})}}}else{const sa=Yt.split(hn).length,ra=1/0,Aa=sa<5,[,zs,Rs]=Yt.search(Wn,hn,Aa,ra);if(zs&&Rs)for(let Va=0;Va<Rs.length;Va++){const La=Rs[Va],rs=Rs.length-Va,fs=yn[zs.idx[La]];fa.push({score:rs,action:fs})}}return fa},[yn,hn,Yt])}const He=25;function Ze(){const $e=n.useRef();return $e.current||($e.current=new et.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),$e.current}function lt(){const $e=(0,B.wW)(Pt),{query:kt,showing:Yt,searchQuery:un}=(0,t.useKBar)(Aa=>({showing:Aa.visualState===t.VisualState.showing,searchQuery:Aa.searchQuery})),yn=tt(un);(0,t.useRegisterActions)(yn,[yn]);const{searchResults:hn,isFetchingSearchResults:Wn}=Le(un,Yt),fa=(0,n.useRef)(null),{overlayProps:sa}=(0,z.Ir)({isOpen:Yt,onClose:()=>kt.setVisualState(t.VisualState.animatingOut)},fa),{dialogProps:ra}=(0,L.R)({},fa);return(0,n.useEffect)(()=>{Yt&&(0,d.ff)("command_palette_opened")},[Yt]),yn.length>0?n.createElement(t.KBarPortal,null,n.createElement(t.KBarPositioner,{className:$e.positioner},n.createElement(t.KBarAnimator,{className:$e.animator},n.createElement(N.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{...sa,...ra},n.createElement("div",{className:$e.searchContainer},Wn?n.createElement(G.$,{className:$e.spinner}):n.createElement(I.J,{name:"search",size:"md"}),n.createElement(t.KBarSearch,{defaultPlaceholder:(0,V.t)("command-palette.search-box.placeholder","Search or jump to..."),className:$e.search})),n.createElement("div",{className:$e.resultsContainer},n.createElement(bt,{searchResults:hn}))))))):null}const bt=({searchResults:$e})=>{const{results:kt,rootActionId:Yt}=Ee(),un=(0,B.wW)(Pt),yn=(0,V.t)("command-palette.section.dashboard-search-results","Dashboards"),hn=(0,V.t)("command-palette.section.folder-search-results","Folders"),Wn=(0,n.useMemo)(()=>$e.filter(ra=>ra.id.startsWith("go/dashboard")).map(ra=>new t.ActionImpl(ra,{store:{}})),[$e]),fa=(0,n.useMemo)(()=>$e.filter(ra=>ra.id.startsWith("go/folder")).map(ra=>new t.ActionImpl(ra,{store:{}})),[$e]),sa=(0,n.useMemo)(()=>{const ra=[...kt];return fa.length>0&&(ra.push(hn),ra.push(...fa)),Wn.length>0&&(ra.push(yn),ra.push(...Wn)),ra},[kt,yn,Wn,hn,fa]);return n.createElement(se,{items:sa,maxHeight:650,onRender:({item:ra,active:Aa})=>{const zs=sa[0]===ra;return typeof ra=="string"?n.createElement("div",{className:(0,S.cx)(un.sectionHeader,zs&&un.sectionHeaderFirst)},ra):n.createElement(ie,{action:ra,active:Aa,currentRootActionId:Yt})}})},Pt=$e=>({positioner:(0,S.css)({zIndex:$e.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:$e.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,S.css)({maxWidth:$e.breakpoints.values.md,width:"100%",background:$e.colors.background.primary,color:$e.colors.text.primary,borderRadius:$e.shape.radius.default,border:`1px solid ${$e.colors.border.weak}`,overflow:"hidden",boxShadow:$e.shadows.z3}),searchContainer:(0,S.css)({alignItems:"center",background:$e.components.input.background,borderBottom:`1px solid ${$e.colors.border.weak}`,display:"flex",gap:$e.spacing(1),padding:$e.spacing(1,2)}),search:(0,S.css)({fontSize:$e.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:$e.components.input.text}),spinner:(0,S.css)({height:"22px"}),resultsContainer:(0,S.css)({paddingBottom:$e.spacing(1)}),sectionHeader:(0,S.css)({padding:$e.spacing(1.5,2,2,2),fontSize:$e.typography.bodySmall.fontSize,fontWeight:$e.typography.fontWeightMedium,color:$e.colors.text.secondary,borderTop:`1px solid ${$e.colors.border.weak}`,marginTop:$e.spacing(1)}),sectionHeaderFirst:(0,S.css)({paddingBottom:$e.spacing(1),borderTop:"none",marginTop:0})});var Je=e(82897),Dt=e(79288),Ve=e(8180),Xe=e(68226),st=e(13211),ut=e(68183),xt=e(29460);function Kt({children:$e,icon:kt,isActive:Yt,isChild:un,onClick:yn,target:hn,url:Wn}){const fa=(0,B.l4)(),sa=Jt(fa,Yt,un),ra=n.createElement("div",{className:sa.linkContent},kt&&n.createElement(I.J,{"data-testid":"dropdown-child-icon",name:kt}),n.createElement("div",{className:sa.linkText},$e),hn==="_blank"&&n.createElement(I.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:sa.externalLinkIcon}));let Aa=n.createElement("button",{"data-testid":ut.wl.components.NavMenu.item,className:(0,S.cx)(sa.button,sa.element),onClick:yn},ra);return Wn&&(Aa=!hn&&Wn.startsWith("/")?n.createElement(xt.r,{"data-testid":ut.wl.components.NavMenu.item,className:sa.element,href:Wn,target:hn,onClick:yn},ra):n.createElement("a",{"data-testid":ut.wl.components.NavMenu.item,href:Wn,target:hn,className:sa.element,onClick:yn},ra)),n.createElement("li",{className:sa.listItem},Aa)}Kt.displayName="NavBarMenuItem";const Jt=($e,kt,Yt)=>({button:(0,S.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,S.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,S.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,S.css)({color:$e.colors.text.secondary}),element:(0,S.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:kt?$e.colors.text.primary:$e.colors.text.secondary,padding:$e.spacing(1,1,1,Yt?5:0),...Yt&&{borderRadius:$e.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...Yt&&{background:$e.colors.emphasize($e.colors.background.primary,.03)},textDecoration:"underline",color:$e.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${$e.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:kt?"block":"none",content:'" "',height:$e.spacing(3),position:"absolute",left:$e.spacing(1),top:"50%",transform:"translateY(-50%)",width:$e.spacing(.5),borderRadius:$e.shape.borderRadius(1),backgroundImage:$e.colors.gradients.brandVertical}}),listItem:(0,S.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...Yt&&{padding:$e.spacing(0,2)}})});var On=e(23934),Nn=e(31403),jn=e(40419),ya=e(36578);function Lt({link:$e}){const kt=(0,B.l4)(),Yt=ft(kt);if($e.icon==="grafana")return n.createElement(ya.c.MenuLogo,{className:Yt.img});if($e.icon){const un=(0,jn.toIconName)($e.icon);return n.createElement(I.J,{name:un??"link",size:"xl"})}else return n.createElement("img",{className:(0,S.cx)(Yt.img,$e.roundIcon&&Yt.round),src:$e.img,alt:""})}function ft($e){return{img:(0,S.css)({height:$e.spacing(3),width:$e.spacing(3)}),round:(0,S.css)({borderRadius:"50%"})}}const Ht=({children:$e})=>{const kt=(0,B.wW)($t);return n.createElement("div",null,$e,n.createElement("span",{className:kt.highlight}))},$t=$e=>({highlight:S.css`
      background-color: ${$e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function zt({link:$e,activeItem:kt,children:Yt,className:un,onClose:yn}){const hn=(0,B.wW)(Wt),Wn=$e.highlightText?Ht:n.Fragment,fa=$e===kt,sa=mt($e,kt),[ra,Aa]=(0,On.Z)(`grafana.navigation.expanded[${$e.text}]`,!1)??Boolean(sa);return n.createElement(n.Fragment,null,n.createElement("div",{className:(0,S.cx)(hn.collapsibleSectionWrapper,un)},n.createElement(Kt,{isActive:$e===kt,onClick:()=>{$e.onClick?.(),yn?.()},target:$e.target,url:$e.url},n.createElement("div",{className:(0,S.cx)(hn.labelWrapper,{[hn.isActive]:fa,[hn.hasActiveChild]:sa})},n.createElement(Wn,null,n.createElement(Lt,{link:$e})),$e.text)),Yt&&n.createElement(Nn.zx,{"aria-label":`${ra?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:hn.collapseButton,onClick:()=>Aa(!ra)},n.createElement(I.J,{name:ra?"angle-up":"angle-down",size:"xl"}))),ra&&Yt)}const Wt=$e=>({collapsibleSectionWrapper:(0,S.css)({alignItems:"center",display:"flex"}),collapseButton:(0,S.css)({color:$e.colors.text.disabled,padding:$e.spacing(0,.5),marginRight:$e.spacing(1)}),collapseWrapperActive:(0,S.css)({backgroundColor:$e.colors.action.disabledBackground}),collapseContent:(0,S.css)({padding:0}),labelWrapper:(0,S.css)({display:"grid",fontSize:$e.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${$e.spacing(7)} auto`,placeItems:"center",fontWeight:$e.typography.fontWeightMedium}),isActive:(0,S.css)({color:$e.colors.text.primary,"&::before":{display:"block",content:'" "',height:$e.spacing(3),position:"absolute",left:$e.spacing(1),top:"50%",transform:"translateY(-50%)",width:$e.spacing(.5),borderRadius:$e.shape.borderRadius(1),backgroundImage:$e.colors.gradients.brandVertical}}),hasActiveChild:(0,S.css)({color:$e.colors.text.primary})});function jt({link:$e,activeItem:kt,onClose:Yt}){const un=(0,B.wW)(sn);return $e.emptyMessage&&!pn($e)?n.createElement(zt,{onClose:Yt,link:$e,activeItem:kt},n.createElement("ul",{className:un.children},n.createElement("div",{className:un.emptyMessage},$e.emptyMessage))):n.createElement(zt,{onClose:Yt,link:$e,activeItem:kt},pn($e)&&n.createElement("ul",{className:un.children},$e.children.map(yn=>!yn.isCreateAction&&n.createElement(Kt,{key:`${$e.text}-${yn.text}`,isActive:Qe(yn,kt),isChild:!0,onClick:()=>{yn.onClick?.(),Yt()},target:yn.target,url:yn.url},yn.text))))}const sn=$e=>({children:(0,S.css)({display:"flex",flexDirection:"column"}),flex:(0,S.css)({display:"flex"}),itemWithoutMenu:(0,S.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,S.css)({height:"100%",width:"100%"}),iconContainer:(0,S.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,S.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${$e.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,S.css)({fontSize:$e.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,S.css)({color:$e.colors.text.secondary,fontStyle:"italic",padding:$e.spacing(1,1.5,1,7)})});function pn($e){return Boolean($e.children&&$e.children.length>0)}const Pn="350px";function Mn({activeItem:$e,navItems:kt,searchBarHidden:Yt,onClose:un}){const yn=(0,B.l4)(),hn=Cn(yn,Yt),Wn=yn.transitions.duration.shortest,fa=Hn(yn,Wn),{chrome:sa}=(0,K.p)(),ra=sa.useState(),Aa=(0,n.useRef)(null),zs=(0,n.useRef)(null),{dialogProps:Rs}=(0,L.R)({},Aa),[Va,La]=(0,n.useState)(!1),rs=()=>La(!1),{overlayProps:fs,underlayProps:Ur}=(0,z.Ir)({isDismissable:!0,isOpen:!0,onClose:rs},Aa);return(0,n.useEffect)(()=>{ra.megaMenuOpen&&La(!0)},[ra.megaMenuOpen]),n.createElement(z.Xj,null,n.createElement(Dt.Z,{nodeRef:Aa,in:Va,unmountOnExit:!0,classNames:fa.overlay,timeout:{enter:Wn,exit:0},onExited:un},n.createElement(N.MT,{contain:!0,autoFocus:!0},n.createElement("div",{"data-testid":"navbarmenu",ref:Aa,...fs,...Rs,className:hn.container},n.createElement("div",{className:hn.mobileHeader},n.createElement(I.J,{name:"bars",size:"xl"}),n.createElement(Ve.h,{"aria-label":"Close navigation menu",name:"times",onClick:rs,size:"xl",variant:"secondary"})),n.createElement("nav",{className:hn.content},n.createElement(Xe.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},n.createElement("ul",{className:hn.itemList},kt.map(wr=>n.createElement(jt,{link:wr,onClose:rs,activeItem:$e,key:wr.text})))))))),n.createElement(Dt.Z,{nodeRef:zs,in:Va,unmountOnExit:!0,classNames:fa.backdrop,timeout:{enter:Wn,exit:0}},n.createElement("div",{ref:zs,className:hn.backdrop,...Ur})))}Mn.displayName="NavBarMenu";const Cn=($e,kt)=>{const Yt=(kt?st.$:st.$*2)+1;return{backdrop:(0,S.css)({backdropFilter:"blur(1px)",backgroundColor:$e.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:kt?0:st.$,zIndex:$e.zIndex.modalBackdrop,[$e.breakpoints.up("md")]:{top:Yt}}),container:(0,S.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:$e.spacing(1.5),right:0,zIndex:$e.zIndex.modal,position:"fixed",top:kt?0:st.$,backgroundColor:$e.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[$e.breakpoints.up("md")]:{borderRight:`1px solid ${$e.colors.border.weak}`,right:"unset",top:Yt}}),content:(0,S.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,S.css)({display:"flex",justifyContent:"space-between",padding:$e.spacing(1,1,1,2),borderBottom:`1px solid ${$e.colors.border.weak}`,[$e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,S.css)({display:"grid",gridAutoRows:`minmax(${$e.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${Pn}, auto)`,minWidth:Pn})}},Hn=($e,kt)=>{const Yt={transitionDuration:`${kt}ms`,transitionTimingFunction:$e.transitions.easing.easeInOut,[$e.breakpoints.down("md")]:{overflow:"hidden"}},un={...Yt,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},yn={...Yt,transitionProperty:"opacity"},hn={width:"100%",[$e.breakpoints.up("md")]:{boxShadow:$e.shadows.z3,width:Pn}},Wn={boxShadow:"none",width:0},fa={opacity:1},sa={opacity:0};return{backdrop:{enter:(0,S.css)(sa),enterActive:(0,S.css)(yn,fa),enterDone:(0,S.css)(fa)},overlay:{enter:(0,S.css)(Wn),enterActive:(0,S.css)(un,hn),enterDone:(0,S.css)(hn)}}},_n=n.memo(({onClose:$e,searchBarHidden:kt})=>{const Yt=(0,Ye.useSelector)(ra=>ra.navBarTree),un=(0,B.l4)(),yn=oa(un),hn=(0,s.TH)(),fa=(0,Je.cloneDeep)(Yt).filter(ra=>ra.id!=="profile"&&ra.id!=="help").map(ra=>We(ra,!0)),sa=Ot(fa,hn.pathname);return n.createElement("div",{className:yn.menuWrapper},n.createElement(Mn,{activeItem:sa,navItems:fa,onClose:$e,searchBarHidden:kt}))});_n.displayName="MegaMenu";const oa=$e=>({menuWrapper:(0,S.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:$e.zIndex.sidemenu})});var Gt=e(42879),Bt=e(64319),on=e(14393);function rn({href:$e,isCurrent:kt,text:Yt}){const un=(0,B.wW)(In),yn=()=>{(0,d.ff)("grafana_breadcrumb_clicked",{url:$e})};return n.createElement("li",{className:un.breadcrumbWrapper},kt?n.createElement("span",{"data-testid":Gt.z.Breadcrumbs.breadcrumb(Yt),className:un.breadcrumb,"aria-current":"page"},Yt):n.createElement(n.Fragment,null,n.createElement("a",{onClick:yn,"data-testid":Gt.z.Breadcrumbs.breadcrumb(Yt),className:(0,S.cx)(un.breadcrumb,un.breadcrumbLink),href:$e},Yt),n.createElement("div",{className:un.separator,"aria-hidden":!0},n.createElement(I.J,{name:"angle-right"}))))}const In=$e=>{const kt=(0,S.css)({color:$e.colors.text.secondary});return{breadcrumb:(0,S.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:$e.spacing(0,.5),whiteSpace:"nowrap",color:$e.colors.text.secondary}),breadcrumbLink:(0,S.css)({color:$e.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,S.css)({alignItems:"center",color:$e.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[$e.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${kt}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${kt}`]:{display:"none"}}}}),separator:kt}};function Ln({breadcrumbs:$e,className:kt}){const Yt=(0,B.wW)(Un);return n.createElement("nav",{"aria-label":"Breadcrumbs",className:kt},n.createElement("ol",{className:Yt.breadcrumbs},$e.map((un,yn)=>n.createElement(rn,{...un,isCurrent:yn===$e.length-1,key:yn}))))}const Un=$e=>({breadcrumbs:(0,S.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var qn=e(67345),da=e(9956);function ha({actions:$e,searchBarHidden:kt,sectionNav:Yt,pageNav:un,onToggleMegaMenu:yn,onToggleSearchBar:hn,onToggleKioskMode:Wn}){const fa=(0,Ye.useSelector)(Aa=>Aa.navIndex)[on.Qz],sa=(0,B.wW)(Ta),ra=(0,qn.t)(Yt,un,fa);return n.createElement("div",{"data-testid":Gt.z.NavToolbar.container,className:sa.pageToolbar},n.createElement("div",{className:sa.menuButton},n.createElement(Ve.h,{name:"bars",tooltip:(0,V.t)("navigation.toolbar.toggle-menu","Toggle menu"),tooltipPlacement:"bottom",size:"xl",onClick:yn})),n.createElement(Ln,{breadcrumbs:ra,className:sa.breadcrumbs}),n.createElement("div",{className:sa.actions},$e,$e&&n.createElement(da.M,null),kt&&n.createElement(Bt.h,{onClick:Wn,narrow:!0,title:(0,V.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),n.createElement(Bt.h,{onClick:hn,narrow:!0,title:(0,V.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},n.createElement(I.J,{name:kt?"angle-down":"angle-up",size:"xl"}))))}const Ta=$e=>({breadcrumbs:(0,S.css)({maxWidth:"50%"}),pageToolbar:(0,S.css)({height:st.$,display:"flex",padding:$e.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,S.css)({display:"flex",alignItems:"center",marginRight:$e.spacing(1)}),actions:(0,S.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:$e.spacing(1),flexGrow:1,gap:$e.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function Wa({item:$e,isSectionRoot:kt=!1}){const Yt=(0,B.wW)(cs),un=$e.children?.filter(sa=>!sa.hideFromTabs),yn=kt&&Boolean($e.children[0].children?.length),hn=(0,S.cx)({[Yt.link]:!0,[Yt.activeStyle]:$e.active,[Yt.isSection]:Boolean(un?.length)||$e.isSection,[Yt.isSectionRoot]:kt,[Yt.noRootMargin]:yn});let Wn=null;$e.img?Wn=n.createElement("img",{"data-testid":"section-image",className:Yt.sectionImg,src:$e.img,alt:""}):$e.icon&&(Wn=n.createElement(I.J,{"data-testid":"section-icon",className:Yt.sectionImg,name:$e.icon}));const fa=()=>{(0,d.ff)("grafana_navigation_item_clicked",{path:$e.url??$e.id,sectionNav:!0})};return n.createElement(n.Fragment,null,n.createElement("a",{onClick:fa,href:$e.url,className:hn,"aria-label":ut.wl.components.Tab.title($e.text),role:"tab","aria-selected":$e.active},kt&&Wn,$e.text,$e.tabSuffix&&n.createElement($e.tabSuffix,{className:Yt.suffix})),un?.map((sa,ra)=>n.createElement(Wa,{item:sa,key:ra})))}const cs=$e=>({link:S.css`
      padding: ${$e.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${$e.shape.radius.default};
      gap: ${$e.spacing(1)};
      height: 100%;
      position: relative;
      color: ${$e.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:S.css`
      label: activeTabStyle;
      color: ${$e.colors.text.primary};
      font-weight: ${$e.typography.fontWeightMedium};
      background: ${$e.colors.emphasize($e.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${$e.shape.radius.default};
        background-image: ${$e.colors.gradients.brandVertical};
      }
    `,suffix:S.css`
      margin-left: ${$e.spacing(1)};
    `,sectionImg:(0,S.css)({margin:"6px 0",width:$e.spacing(2)}),isSectionRoot:(0,S.css)({fontSize:$e.typography.h4.fontSize,marginTop:0,marginBottom:$e.spacing(2),fontWeight:$e.typography.fontWeightMedium}),isSection:(0,S.css)({color:$e.colors.text.primary,fontSize:$e.typography.h5.fontSize,marginTop:$e.spacing(2),fontWeight:$e.typography.fontWeightMedium}),noRootMargin:(0,S.css)({marginBottom:0})}),is=({isExpanded:$e,onClick:kt})=>{const Yt=(0,B.l4)(),un=Ha(Yt);return n.createElement(Nn.zx,{title:"Toggle section navigation","aria-label":$e?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:R()(un.icon,{[un.iconExpanded]:$e}),variant:"secondary",fill:"text",size:"md",onClick:kt})};is.displayName="SectionNavToggle";const Ha=$e=>({icon:(0,S.css)({alignSelf:"center",margin:$e.spacing(1,0),transform:"rotate(90deg)",transition:$e.transitions.create("opacity"),color:$e.colors.text.secondary,zIndex:1,[$e.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:$e.spacing(0,0,0,1),top:$e.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,S.css)({rotate:"180deg",[$e.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function $a({model:$e}){const kt=(0,B.wW)(Oa),{isExpanded:Yt,onToggleSectionNav:un}=ss();return Boolean($e.main?.children?.length)?n.createElement("div",{className:kt.navContainer},n.createElement("nav",{className:(0,S.cx)(kt.nav,{[kt.navExpanded]:Yt})},n.createElement(Xe.$,{showScrollIndicators:!0},n.createElement("div",{className:kt.items,role:"tablist"},n.createElement(Wa,{item:$e.main,isSectionRoot:!0})))),n.createElement(is,{isExpanded:Yt,onClick:un})):null}function ss(){const $e=(0,B.l4)(),kt=window.matchMedia(`(max-width: ${$e.breakpoints.values.lg}px)`).matches,[Yt,un]=(0,On.Z)("grafana.sectionNav.expanded",!kt),[yn,hn]=(0,n.useState)(!kt&&Yt);return(0,n.useEffect)(()=>{const fa=window.matchMedia(`(max-width: ${$e.breakpoints.values.lg}px)`),sa=ra=>hn(ra.matches?!1:Yt);return fa.addEventListener("change",sa),()=>fa.removeEventListener("change",sa)},[Yt,$e.breakpoints.values.lg]),{isExpanded:yn,onToggleSectionNav:()=>{un(!yn),hn(!yn)}}}const Oa=$e=>({navContainer:(0,S.css)({display:"flex",flexDirection:"column",position:"relative",[$e.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,S.css)({display:"flex",flexDirection:"column",background:$e.colors.background.canvas,flexShrink:0,transition:$e.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[$e.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,S.css)({maxHeight:"50vh",visibility:"visible",[$e.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,S.css)({display:"flex",flexDirection:"column",padding:$e.spacing(2,1,2,2),minWidth:"250px",[$e.breakpoints.up("md")]:{padding:$e.spacing(4.5,1,2,2)}})});var Ia=e(63418),ys=e(71698),la=e(47694),Ts=e(95831),bs=e(30979),ds=e(98699),Us=e(6981),Za=e(27443),Ks=e(61744),dn=e(53764),ln=e(13724);function Tn({feedUrl:$e}){const kt=(0,B.wW)(zn),{state:Yt,getNews:un}=(0,ln.j)($e),[yn,hn]=(0,Za.Z)();return(0,n.useEffect)(()=>{un()},[un]),Yt.loading||Yt.error?n.createElement("div",{className:kt.innerWrapper},Yt.loading&&n.createElement(Ks.u,{text:"Loading..."}),Yt.error&&Yt.error.message):Yt.value?n.createElement("div",{ref:yn},hn.width>0&&Yt.value.map((Wn,fa)=>n.createElement(dn.S,{key:fa,index:fa,showImage:!0,width:hn.width,data:Yt.value})),n.createElement("div",{className:kt.grot},n.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},n.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})))):null}const zn=$e=>({innerWrapper:S.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,grot:(0,S.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:$e.spacing(5,0),img:{width:"186px",height:"186px"}})});function ga({className:$e}){const[kt,Yt]=(0,Ts.Z)(!1),un=(0,B.wW)(va);return n.createElement(n.Fragment,null,n.createElement(Bt.h,{className:$e,onClick:Yt,iconOnly:!0,icon:"rss","aria-label":"News"}),kt&&n.createElement(bs.d,{title:n.createElement("div",{className:un.title},n.createElement(ds.H3,null,(0,V.t)("news.title","Latest from the blog")),n.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:un.grot},n.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),n.createElement("div",{className:un.actions},n.createElement(Nn.zx,{icon:"times",variant:"secondary",fill:"text",onClick:Yt,"aria-label":ut.wl.components.Drawer.General.close}))),scrollableContent:!0,onClose:Yt,size:"md"},n.createElement(Tn,{feedUrl:Us.k})))}const va=$e=>({title:(0,S.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:$e.spacing(2),borderBottom:`1px solid ${$e.colors.border.weak}`}),grot:(0,S.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:$e.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,S.css)({position:"absolute",right:$e.spacing(1),top:$e.spacing(2)})});function Ga({breakpoint:$e,onChange:kt}){(0,n.useEffect)(()=>{const Yt=window.matchMedia(`(min-width: ${$e}px)`),un=yn=>kt(yn);return Yt.addEventListener("change",un),()=>Yt.removeEventListener("change",un)},[$e,kt])}var qa=e(2183),es=e(15670);function us({orgs:$e,onSelectChange:kt}){const Yt=(0,B.wW)(hs);return n.createElement(es.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:Yt.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:$e.map(un=>({label:un.name,description:un.role,value:un})),onChange:kt,icon:"building"})}const hs=$e=>({buttonCss:(0,S.css)({color:$e.colors.text.secondary,"&:hover":{color:$e.colors.text.primary}})});var $s=e(8581);function tr({orgs:$e,onSelectChange:kt}){const Yt=(0,B.wW)(mr),{orgName:un,orgId:yn,orgRole:hn}=ee.Vt.user,[Wn,fa]=(0,n.useState)(()=>({label:un,value:{role:hn,orgId:yn,name:un},description:hn})),sa=ra=>{fa(ra),kt(ra)};return n.createElement($s.Ph,{"aria-label":"Change organization",width:"auto",value:Wn,prefix:n.createElement(I.J,{className:"prefix-icon",name:"building"}),className:Yt.select,options:$e.map(ra=>({label:ra.name,description:ra.role,value:ra})),onChange:sa})}const mr=$e=>({select:(0,S.css)({border:"none",background:"none",color:$e.colors.text.secondary,"&:hover":{color:$e.colors.text.primary,"& .prefix-icon":(0,S.css)({color:$e.colors.text.primary})}})});function ur(){const $e=(0,B.l4)(),kt=(0,Ye.useDispatch)(),Yt=(0,Ye.useSelector)(sa=>sa.organization.userOrgs),un=sa=>{sa.value&&((0,qa.Q$)(sa.value.orgId),f.E1.push(`/?orgId=${sa.value.orgId}`),window.location.reload())};(0,n.useEffect)(()=>{ee.Vt.isSignedIn&&kt((0,qa.JE)())},[kt]);const yn=$e.breakpoints.values.sm,[hn,Wn]=(0,n.useState)(!window.matchMedia(`(min-width: ${yn}px)`).matches);if(Ga({breakpoint:yn,onChange:sa=>{Wn(!sa.matches)}}),Yt?.length<=1)return null;const fa=hn?us:tr;return n.createElement(fa,{orgs:Yt,onSelectChange:un})}var sr=e(95130);function er($e){const kt=[];for(const Yt of $e)Yt.isCreateAction&&kt.push(Yt),Yt.children&&kt.push(...er(Yt.children));return kt}const ks=({})=>{const $e=(0,B.wW)(Er),kt=(0,B.l4)(),Yt=(0,Ye.useSelector)(Aa=>Aa.navBarTree),un=kt.breakpoints.values.sm,[yn,hn]=(0,n.useState)(!1),[Wn,fa]=(0,n.useState)(!window.matchMedia(`(min-width: ${un}px)`).matches),sa=(0,n.useMemo)(()=>er(Yt),[Yt]);Ga({breakpoint:un,onChange:Aa=>{fa(!Aa.matches)}});const ra=()=>n.createElement(sr.v,null,sa.map((Aa,zs)=>n.createElement(sr.v.Item,{key:zs,url:Aa.url,label:Aa.text,onClick:()=>(0,d.ff)("grafana_menu_item_clicked",{url:Aa.url,from:"quickadd"})})));return sa.length>0?n.createElement(n.Fragment,null,n.createElement(ys.L,{overlay:ra,placement:"bottom-end",onVisibleChange:hn},n.createElement(Bt.h,{iconOnly:!0,icon:Wn?"plus-circle":"plus",isOpen:Wn?void 0:yn,"aria-label":"New"})),n.createElement(da.M,{className:$e.separator})):null},Er=$e=>({buttonContent:(0,S.css)({alignItems:"center",display:"flex"}),buttonText:(0,S.css)({[$e.breakpoints.down("md")]:{display:"none"}}),separator:(0,S.css)({[$e.breakpoints.down("sm")]:{display:"none"}})});function Vs(){const $e=(0,s.TH)(),kt=(0,B.wW)(Tr),Yt=Ia.QX.sanitizeUrl(it.u.getUrlForPartial($e,{forceLogin:"true"}));return n.createElement("a",{className:kt.link,href:Yt,target:"_self"},"Sign in")}const Tr=$e=>({link:(0,S.css)({paddingRight:$e.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var pr=e(42044);function yr({node:$e}){const kt=(0,B.wW)(Cr),Yt=We((0,Je.cloneDeep)($e),!1);return Yt?n.createElement(sr.v,{header:n.createElement("div",{onClick:un=>un.stopPropagation(),className:kt.header},n.createElement("div",null,Yt.text),Yt.subTitle&&n.createElement("div",{className:kt.subTitle},Yt.subTitle))},Yt.children?.map(un=>un.url?n.createElement(pr.s,{url:un.url,label:un.text,icon:un.icon,target:un.target,key:un.id}):n.createElement(pr.s,{icon:un.icon,onClick:un.onClick,label:un.text,key:un.id}))):null}const Cr=$e=>({header:(0,S.css)({fontSize:$e.typography.h5.fontSize,fontWeight:$e.typography.h5.fontWeight,padding:$e.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,S.css)({color:$e.colors.text.secondary,fontSize:$e.typography.bodySmall.fontSize})});var Or=e(46967),fr=e(85419),Js=e(43226);function Os(){const $e=(0,B.l4)(),{query:kt}=(0,t.useKBar)(Wn=>({kbarSearchQuery:Wn.searchQuery,kbarIsOpen:Wn.visualState===t.VisualState.showing})),Yt=$e.breakpoints.values.sm,[un,yn]=(0,n.useState)(!window.matchMedia(`(min-width: ${Yt}px)`).matches);Ga({breakpoint:Yt,onChange:Wn=>{yn(!Wn.matches)}});const hn=()=>{kt.toggle()};return un?n.createElement(Bt.h,{iconOnly:!0,icon:"search","aria-label":(0,V.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:hn}):n.createElement(lr,{onClick:hn})}function lr({onClick:$e}){const kt=(0,B.wW)(fn),Yt=(0,n.useMemo)(()=>(0,Js.vl)(),[]);return n.createElement("div",{className:kt.wrapper},n.createElement("div",{className:kt.inputWrapper},n.createElement("div",{className:kt.prefix},n.createElement(I.J,{name:"search"})),n.createElement("button",{className:kt.fakeInput,onClick:$e},(0,V.t)("nav.search.placeholderCommandPalette","Search or jump to...")),n.createElement("div",{className:kt.suffix},n.createElement(I.J,{name:"keyboard"}),n.createElement("span",{className:kt.shortcut},Yt,"+k"))))}const fn=$e=>{const kt=(0,Or.H)({theme:$e});return{wrapper:kt.wrapper,inputWrapper:kt.inputWrapper,prefix:kt.prefix,suffix:(0,S.css)([kt.suffix,{display:"flex",gap:$e.spacing(.5)}]),shortcut:(0,S.css)({fontSize:$e.typography.bodySmall.fontSize}),fakeInput:(0,S.css)([kt.input,{textAlign:"left",paddingLeft:28,color:$e.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":S.css`
          ${(0,fr.focusCss)($e)}
        `}]),button:(0,S.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function qe({children:$e,align:kt="left"}){const Yt=(0,B.wW)(Ct),yn=(0,B.l4)().breakpoints.values.sm,[hn,Wn]=(0,n.useState)(!window.matchMedia(`(min-width: ${yn}px)`).matches);return Ga({breakpoint:yn,onChange:fa=>{Wn(!fa.matches)}}),hn?n.createElement(n.Fragment,null,$e):n.createElement("div",{"data-test-id":"wrapper",className:(0,S.cx)(Yt.wrapper,{[Yt[kt]]:kt==="right"})},$e)}const Ct=$e=>({wrapper:(0,S.css)({display:"flex",gap:$e.spacing(.5),alignItems:"center"}),right:(0,S.css)({justifyContent:"flex-end"}),left:(0,S.css)({}),center:(0,S.css)({})}),At=n.memo(function(){const kt=(0,B.wW)(tn),Yt=(0,Ye.useSelector)(sa=>sa.navIndex),un=(0,s.TH)(),yn=(0,Je.cloneDeep)(Yt.help),hn=yn?be(yn):void 0,Wn=Yt.profile;let fa=la.vc.appSubUrl||"/";return!la.vc.bootData.user.isSignedIn&&!la.vc.anonymousEnabled&&(fa=Ia.QX.sanitizeUrl(it.u.getUrlForPartial(un,{forceLogin:"true"}))),n.createElement("div",{className:kt.layout},n.createElement(qe,null,n.createElement("a",{className:kt.logo,href:fa,title:"Go to home"},n.createElement(ya.c.MenuLogo,{className:kt.img})),n.createElement(ur,null)),n.createElement(qe,null,n.createElement(Os,null)),n.createElement(qe,{align:"right"},n.createElement(ks,null),hn&&n.createElement(ys.L,{overlay:()=>n.createElement(yr,{node:hn}),placement:"bottom-end"},n.createElement(Bt.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),n.createElement(ga,{className:kt.newsButton}),!P.Vt.user.isSignedIn&&n.createElement(Vs,null),Wn&&n.createElement(ys.L,{overlay:()=>n.createElement(yr,{node:Wn}),placement:"bottom-end"},n.createElement(Bt.h,{className:kt.profileButton,imgSrc:P.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),tn=$e=>({layout:(0,S.css)({height:st.$,display:"flex",gap:$e.spacing(1),alignItems:"center",padding:$e.spacing(0,1,0,2),borderBottom:`1px solid ${$e.colors.border.weak}`,justifyContent:"space-between",[$e.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,S.css)({height:$e.spacing(3),width:$e.spacing(3)}),logo:(0,S.css)({display:"flex"}),profileButton:(0,S.css)({padding:$e.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,S.css)({[$e.breakpoints.down("sm")]:{display:"none"}})});function Rn({children:$e}){const kt=(0,B.wW)(Dn),{chrome:Yt}=(0,K.p)(),un=Yt.useState(),yn=un.searchBarHidden||un.kioskMode===Ye.KioskMode.TV,hn=(0,S.cx)({[kt.content]:!0,[kt.contentNoSearchBar]:yn,[kt.contentChromeless]:un.chromeless});return n.createElement("main",{className:R()("main-view",yn&&"main-view--search-bar-hidden")},!un.chromeless&&n.createElement("div",{className:(0,S.cx)(kt.topNav)},!yn&&n.createElement(At,null),n.createElement(ha,{searchBarHidden:yn,sectionNav:un.sectionNav.node,pageNav:un.pageNav,actions:un.actions,onToggleSearchBar:Yt.onToggleSearchBar,onToggleMegaMenu:Yt.onToggleMegaMenu,onToggleKioskMode:Yt.onToggleKioskMode})),n.createElement("div",{className:hn},n.createElement("div",{className:kt.panes},un.layout===F.Q.Standard&&un.sectionNav&&n.createElement($a,{model:un.sectionNav}),n.createElement("div",{className:kt.pageContainer},$e))),!un.chromeless&&n.createElement(n.Fragment,null,n.createElement(_n,{searchBarHidden:yn,onClose:()=>Yt.setMegaMenu(!1)}),n.createElement(lt,null)))}const Dn=$e=>{const kt=$e.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,S.css)({display:"flex",flexDirection:"column",paddingTop:st.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,S.css)({paddingTop:st.$}),contentChromeless:(0,S.css)({paddingTop:0}),topNav:(0,S.css)({display:"flex",position:"fixed",zIndex:$e.zIndex.navbarFixed,left:0,right:0,boxShadow:kt,background:$e.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${$e.colors.border.weak}`}),panes:(0,S.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[$e.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,S.css)({label:"page-container",flexGrow:1,minHeight:0})}};var kn=e(4063),aa=e(52081),Qn=e(659),ia=e(98864),ja=e(60499),Tt=e(49380),Be=e(45253);function Ae({appNotification:$e,onClearNotification:kt}){const Yt=(0,B.wW)(nt);(0,Tt.Z)(()=>{setTimeout(()=>{kt($e.id)},Ye.timeoutMap[$e.severity])});const un=$e.component||$e.text||$e.traceId;return n.createElement(Be.b,{severity:$e.severity,title:$e.title,onRemove:()=>kt($e.id),elevated:!0},un&&n.createElement("div",{className:Yt.wrapper},n.createElement("span",null,$e.component||$e.text),$e.traceId&&n.createElement("span",{className:Yt.trace},"Trace ID: ",$e.traceId)))}function nt($e){return{wrapper:(0,S.css)({display:"flex",flexDirection:"column"}),trace:(0,S.css)({fontSize:$e.typography.pxToRem(10)})}}function ct(){const $e=(0,Ye.useSelector)(yn=>(0,ia.vo)(yn.appNotifications)),kt=(0,Ye.useDispatch)(),Yt=(0,B.wW)(wt);(0,n.useEffect)(()=>{Re.Z.on(kn.SI.alertWarning,yn=>kt((0,Qn.$l)((0,ja.ZR)(...yn)))),Re.Z.on(kn.SI.alertSuccess,yn=>kt((0,Qn.$l)((0,ja.AT)(...yn)))),Re.Z.on(kn.SI.alertError,yn=>kt((0,Qn.$l)((0,ja.t_)(...yn))))},[kt]);const un=yn=>{kt((0,Qn.ad)(yn))};return n.createElement("div",{className:Yt.wrapper},n.createElement(aa.wc,null,$e.map((yn,hn)=>n.createElement(Ae,{key:`${yn.id}-${hn}`,appNotification:yn,onClearNotification:un}))))}function wt($e){return{wrapper:(0,S.css)({label:"app-notifications-list",zIndex:$e.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var _t=e(13426),Nt=e.n(_t),at=e(39198),An=e(7804),Fn=e(8412);function Gn({error:$e,errorInfo:kt}){const Yt=(0,s.TH)(),un=$e?.name==="ChunkLoadError";return(0,n.useEffect)(()=>{un&&Yt.search.indexOf("chunkNotFound")===-1&&(window.location.href=it.u.getUrlForPartial(Yt,{chunkNotFound:!0}))},[Yt,un]),n.createElement(Fn.T,{navId:"error",layout:F.Q.Canvas},n.createElement("div",{className:$n()},un&&n.createElement("div",null,n.createElement("h2",null,"Unable to find application file"),n.createElement("br",null),n.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),n.createElement("br",null),n.createElement("div",{className:"gf-form-group"},n.createElement(Nn.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),n.createElement(at.X,{title:"Error details",error:$e,errorInfo:kt})),!un&&n.createElement(at.X,{title:"An unexpected error happened",error:$e,errorInfo:kt})))}const $n=(0,An.B)(()=>S.css`
    width: 500px;
    margin: 64px auto;
  `);function Ra(){const $e=(0,B.wW)(ts);return n.createElement("div",{className:$e.loadingPage},n.createElement(Ks.u,{text:"Loading..."}))}const ts=()=>({loadingPage:(0,S.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Ps($e){const{chrome:kt,keybindings:Yt}=(0,K.p)();return kt.setMatchedRoute($e.route),(0,n.useLayoutEffect)(()=>{Yt.clearAndInitGlobalBindings($e.route)},[Yt,$e.route]),(0,n.useEffect)(()=>(Es($e.route),ma(),(0,f.GQ)("GrafanaRoute",!1,"Mounted",$e.match),()=>{(0,f.GQ)("GrafanaRoute",!1,"Unmounted",$e.route),Es($e.route,!0)}),[]),(0,n.useEffect)(()=>{ma(),(0,d.sm)(),(0,f.GQ)("GrafanaRoute",!1,"Updated",$e)}),(0,f.GQ)("GrafanaRoute",!1,"Rendered",$e.route),n.createElement(c.SV,null,({error:un,errorInfo:yn})=>un?n.createElement(Gn,{error:un,errorInfo:yn}):n.createElement(n.Suspense,{fallback:n.createElement(Ra,null)},n.createElement($e.route.component,{...$e,queryParams:(0,f.Ox)($e.location.search)})))}function vs($e){return $e.pageClass?$e.pageClass.split(" "):[]}function Es($e,kt=!1){for(const Yt of vs($e))kt?document.body.classList.remove(Yt):document.body.classList.add(Yt)}function ma(){document.body.classList.remove("sidemenu-open--xs");const $e=document.getElementById("tooltip");$e?.parentElement?.removeChild($e);const kt=document.querySelectorAll(".tooltip");for(let Yt=0;Yt<kt.length;Yt++){const un=kt[Yt];un.parentElement?.removeChild(un)}for(const Yt of Nt().drops)Yt.destroy()}var ba=e(92973),as=e(75118);class ms extends n.PureComponent{constructor(){super(...arguments),this.styles=Ya(r.v.theme2),this.state={},this.initListener=()=>{const kt=(0,as.gj)();kt&&(this.subscription=kt.getConnectionState().subscribe({next:Yt=>{this.setState({show:!Yt})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:kt}=this.state;return kt?!ee.Vt.isSignedIn||!r.v.liveEnabled||ee.Vt.user.orgRole===""?null:n.createElement("div",{className:this.styles.foot},n.createElement(Be.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Ya=(0,An.B)($e=>({foot:S.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:S.css`
      max-width: 400px;
      margin: auto;
    `}));let Is=[],ws=[];function Gs($e){Is.push($e)}function Ir($e){ws.push($e)}class Dr extends n.Component{constructor(kt){super(kt),this.renderRoute=Yt=>{const un=Yt.roles?Yt.roles():[];return n.createElement(l.CompatRoute,{exact:Yt.exact===void 0?!0:Yt.exact,sensitive:Yt.sensitive===void 0?!1:Yt.sensitive,path:Yt.path,key:Yt.path,render:yn=>un?.length&&!un.some(hn=>ee.Vt.hasRole(hn))?n.createElement(s.l_,{to:"/"}):n.createElement(Ps,{...yn,route:Yt})})},this.state={}}async componentDidMount(){await T(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return n.createElement(s.rs,null,(0,p.eU)().map(kt=>this.renderRoute(kt)))}render(){const{app:kt}=this.props,{ready:Yt}=this.state;(0,f.GQ)("AppWrapper",!1,"rendering");const un=yn=>{(0,d.ff)("command_palette_action_selected",{actionId:yn.id,actionName:yn.name})};return n.createElement(o.Provider,{store:g.h},n.createElement(c.z4,{style:"page"},n.createElement(K.h.Provider,{value:kt.context},n.createElement(ba.f,{value:r.v.theme2},n.createElement(t.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:un}}},n.createElement(a.$i,null,n.createElement(u.n,null),n.createElement("div",{className:"grafana-app"},n.createElement(s.F0,{history:f.E1.getHistory()},n.createElement(l.CompatRouter,null,n.createElement(Rn,null,ws.map((yn,hn)=>n.createElement(yn,{key:hn.toString()})),n.createElement(y,null),n.createElement(ct,null),Yt&&this.renderRoutes(),Is.map((yn,hn)=>n.createElement(yn,{key:hn.toString()})))))),n.createElement(ms,null),n.createElement(a.Y0,null),n.createElement(i.lO,null)))))))}}},37219:(Y,O,e)=>{"use strict";e.d(O,{M:()=>l,Z:()=>o});var t=e(82897),n=e.n(t);class o{constructor(d){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",d){if(d.columns)for(const r of d.columns)this.addColumn(r);if(d.rows)for(const r of d.rows)this.addRow(r)}}sort(d){d.col===null||d.col===void 0||this.columns.length<=d.col||(this.rows.sort((r,c)=>(r=r[d.col],c=c[d.col],+(r==null)-+(c==null)||+(r>c)||-(r<c))),d.desc&&this.rows.reverse(),this.columns[d.col].sort=!0,this.columns[d.col].desc=d.desc)}addColumn(d){this.columnMap[d.text]||(this.columns.push(d),this.columnMap[d.text]=d)}addRow(d){this.rows.push(d)}}function s(f,d,r){let c=!1;for(let a=0;a<f.length;a++)if(d[a]!==void 0&&r[a]!==void 0){if(d[a]!==r[a])return!1}else(d[a]===void 0||r[a]===void 0)&&(c=!0);return c}function l(f,...d){const r=f||new o;if(arguments.length===1)return r;if(arguments.length===2)return r.columns=d[0].hasOwnProperty("columns")?[...d[0].columns]:[],r.rows=d[0].hasOwnProperty("rows")?[...d[0].rows]:[],r;const c=d.filter(E=>!!E.columns),a={},u=c.slice().reduce((E,h)=>(h.columns.forEach(v=>{const{text:C}=v;a[C]===void 0&&(a[C]=E.length,E.push(v))}),E),[]),i=c.map(E=>E.columns.map(h=>a[h.text])),p=c.reduce((E,h,v)=>{const C=i[v];return h.rows.forEach(m=>{const D=[];C.forEach((P,b)=>{D[P]=m[b]}),E.push(D)}),E},[]),g={},y=p.reduce((E,h,v)=>{if(!g[v]){let C=v+1;for(;C<p.length;){const m=(0,t.findIndex)(p,D=>s(u,h,D),C);if(m>-1){const D=p[m];for(let P=0;P<u.length;P++)h[P]===void 0&&D[P]!==void 0&&(h[P]=D[P]);g[m]=D,C=m+1}else break}E.push(h)}return E},[]);return r.columns=u,r.rows=y,r}},70431:(Y,O,e)=>{"use strict";e.d(O,{e:()=>n});var t=e(62992);const n=(0,t.PH)("core/cleanUpState")},659:(Y,O,e)=>{"use strict";e.d(O,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},18271:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>o,h:()=>n});var t=e(50444);const n=new t.F,o=n},73546:(Y,O,e)=>{"use strict";e.d(O,{P:()=>x});var t=e(82897),n=e(66111),o=e(31403),s=e(1108),l=e(29930),f=e(94270),d=e(52081),r=e(8581),c=e(50796),a=e(94080),u=e(28038),i=e(73757),p=(B=>(B.None="None",B.Team="Team",B.User="User",B.BuiltInRole="builtInRole",B))(p||{});const g=({title:B="Add Permission For",permissions:K,assignments:L,onAdd:N,onCancel:z})=>{const[G,I]=(0,n.useState)(p.None),[V,H]=(0,n.useState)(0),[Q,oe]=(0,n.useState)(0),[se,ie]=(0,n.useState)(""),[j,de]=(0,n.useState)(""),ce=(0,n.useMemo)(()=>{const le=[];return L.users&&le.push({value:p.User,label:"User"}),L.teams&&le.push({value:p.Team,label:"Team"}),L.builtInRoles&&le.push({value:p.BuiltInRole,label:"Role"}),le},[L]);(0,n.useEffect)(()=>{K.length>0&&de(K[0])},[K]);const ee=()=>G===p.Team&&V>0||G===p.User&&Q>0||p.BuiltInRole&&i.B5.hasOwnProperty(se);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(c.P,{onClick:z}),n.createElement("h5",null,B),n.createElement(f.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>N({userId:Q,teamId:V,builtInRole:se,permission:j,target:G})},()=>n.createElement(d.Lh,null,n.createElement(r.Ph,{"aria-label":"Role to add new permission to",value:G,options:ce,onChange:le=>I(le.value),disabled:ce.length===0}),G===p.User&&n.createElement(u.f,{onSelected:le=>oe(le.value||0),className:"width-20"}),G===p.Team&&n.createElement(a.c,{onSelected:le=>H(le.value?.id||0),className:"width-20"}),G===p.BuiltInRole&&n.createElement(r.Ph,{"aria-label":"Built-in role picker",options:Object.values(i.B5).map(le=>({value:le,label:le})),onChange:le=>ie(le.value||""),width:40}),n.createElement(r.Ph,{"aria-label":"Permission Level",width:25,value:K.find(le=>le===j),options:K.map(le=>({label:le,value:le})),onChange:le=>de(le.value||"")}),n.createElement(o.zx,{type:"submit",disabled:!ee()},"Save"))))};var y=e(61860),E=e(39904);const h=({item:B,permissionLevels:K,canSet:L,onRemove:N,onChange:z})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},v(B)),n.createElement("td",{style:{width:"90%"}},m(B)),n.createElement("td",null,B.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(r.Ph,{className:"width-20",disabled:!L||!B.isManaged,onChange:G=>z(B,G.value),value:K.find(G=>G===B.permission),options:K.map(G=>({value:G,label:G}))}))),n.createElement("td",null,n.createElement(y.u,{content:D(B)},n.createElement(E.J,{name:"info-circle"}))),n.createElement("td",null,B.isManaged?n.createElement(o.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!L,onClick:()=>N(B),"aria-label":`Remove permission for ${C(B)}`}):n.createElement(y.u,{content:B.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(o.zx,{size:"sm",icon:"lock"})))),v=B=>B.teamId?n.createElement("img",{className:"filter-table__avatar",src:B.teamAvatarUrl,alt:`Avatar for team ${B.teamId}`}):B.userId?n.createElement("img",{className:"filter-table__avatar",src:B.userAvatarUrl,alt:`Avatar for user ${B.userId}`}):n.createElement(E.J,{size:"xl",name:"shield"}),C=B=>B.userId?B.userLogin:B.teamId?B.team:B.builtInRole,m=B=>B.userId?n.createElement("span",{key:"name"},B.userLogin," "):B.teamId?n.createElement("span",{key:"name"},B.team," "):B.builtInRole?n.createElement("span",{key:"name"},B.builtInRole," "):n.createElement("span",{key:"name"}),D=B=>`Actions: ${[...new Set(B.actions)].sort().join(" ")}`,P=({title:B,items:K,compareKey:L,permissionLevels:N,canSet:z,onRemove:G,onChange:I})=>{const V=(0,n.useMemo)(()=>{const H={};for(let Q of K){const oe=Q[L];if(!H[oe]){H[oe]=Q;continue}Q.actions.length>H[oe].actions.length&&(H[oe]=Q)}return Object.keys(H).map(Q=>H[Q])},[K,L]);return V.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,B),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,V.map((H,Q)=>n.createElement(h,{item:H,onRemove:G,onChange:I,canSet:z,key:`${Q}-${H.userId}`,permissionLevels:N})))))},b="",M={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},x=({title:B="Permissions",buttonLabel:K="Add a permission",emptyLabel:L="There are no permissions",resource:N,resourceId:z,canSetPermissions:G,addPermissionTitle:I})=>{const[V,H]=(0,n.useState)(!1),[Q,oe]=(0,n.useState)([]),[se,ie]=(0,n.useState)(M),j=(0,n.useCallback)(()=>T(N,z).then(Z=>oe(Z)),[N,z]);(0,n.useEffect)(()=>{A(N).then(Z=>(ie(Z),j()))},[N,z,j]);const de=Z=>{let ne=null;Z.target===p.User?ne=S(N,z,Z.userId,Z.permission):Z.target===p.Team?ne=U(N,z,Z.teamId,Z.permission):Z.target===p.BuiltInRole&&(ne=R(N,z,Z.builtInRole,Z.permission)),ne!==null&&ne.then(j)},ce=Z=>{let ne=null;Z.userId?ne=S(N,z,Z.userId,b):Z.teamId?ne=U(N,z,Z.teamId,b):Z.builtInRole&&(ne=R(N,z,Z.builtInRole,b)),ne!==null&&ne.then(j)},ee=(Z,ne)=>{Z.permission!==ne&&(Z.userId?de({permission:ne,userId:Z.userId,target:p.User}):Z.teamId?de({permission:ne,teamId:Z.teamId,target:p.Team}):Z.builtInRole&&de({permission:ne,builtInRole:Z.builtInRole,target:p.BuiltInRole}))},le=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(Z=>Z.teamId),["team","isManaged"]),[Q]),q=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(Z=>Z.userId),["userLogin","isManaged"]),[Q]),fe=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(Z=>Z.builtInRole),["builtInRole","isManaged"]),[Q]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},B),n.createElement("div",{className:"page-action-bar__spacer"}),G&&n.createElement(o.zx,{variant:"primary",key:"add-permission",onClick:()=>H(!0)},K)),n.createElement("div",null,n.createElement(s.s,{in:V},n.createElement(g,{title:I,onAdd:de,permissions:se.permissions,assignments:se.assignments,onCancel:()=>H(!1)})),Q.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,L)))),n.createElement(P,{title:"Role",items:fe,compareKey:"builtInRole",permissionLevels:se.permissions,onChange:ee,onRemove:ce,canSet:G}),n.createElement(P,{title:"User",items:q,compareKey:"userLogin",permissionLevels:se.permissions,onChange:ee,onRemove:ce,canSet:G}),n.createElement(P,{title:"Team",items:le,compareKey:"team",permissionLevels:se.permissions,onChange:ee,onRemove:ce,canSet:G})))},A=async B=>{try{return await(0,l.i)().get(`/api/access-control/${B}/description`)}catch(K){return console.error("failed to load resource description: ",K),M}},T=(B,K)=>(0,l.i)().get(`/api/access-control/${B}/${K}`),S=(B,K,L,N)=>F(B,K,"users",L,N),U=(B,K,L,N)=>F(B,K,"teams",L,N),R=(B,K,L,N)=>F(B,K,"builtInRoles",L,N),F=(B,K,L,N,z)=>(0,l.i)().post(`/api/access-control/${B}/${K}/${L}/${N}`,{permission:z})},1108:(Y,O,e)=>{"use strict";e.d(O,{s:()=>f});var t=e(66111),n=e(66525);const o="200px",s=200,l={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},f=({children:d,in:r,maxHeight:c=o,style:a=l})=>{const u={exited:{maxHeight:0},entering:{maxHeight:c},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:r,timeout:s},i=>t.createElement("div",{style:{...a,...u[i]}},d))}},95379:(Y,O,e)=>{"use strict";e.d(O,{A:()=>o});var t=e(66111),n=e(34177);const o=t.memo(({actions:s})=>{const{chrome:l}=(0,n.p)();return(0,t.useLayoutEffect)(()=>{l.update({actions:s})}),null});o.displayName="TopNavUpdate"},99740:(Y,O,e)=>{"use strict";e.d(O,{L:()=>o,Y:()=>n});var t=e(35287);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");default:return}}function o(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},9956:(Y,O,e)=>{"use strict";e.d(O,{M:()=>s});var t=e(9892),n=e(66111),o=e(72648);function s({className:f,leftActionsSeparator:d}){const r=(0,o.wW)(l);return d?n.createElement("div",{className:(0,t.cx)(f,r.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(f,r.line)})}const l=f=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:f.colors.border.medium,height:24})})},13211:(Y,O,e)=>{"use strict";e.d(O,{$:()=>t});const t=40},36578:(Y,O,e)=>{"use strict";e.d(O,{c:()=>a});var t=e(9892),n=e(66111),o=e(5680),s=e(72648),l=e(85419);const f=({className:u,logo:i})=>n.createElement("img",{className:u,src:`${i||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),d=({className:u,children:i})=>{const p=(0,s.l4)(),g=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${p.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${l.mediaUp(p.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(g,u)},i)},r=({className:u})=>n.createElement("img",{className:u,src:"public/img/grafana_icon.svg",alt:"Grafana"}),c=()=>{const u=(0,s.l4)();return t.css`
    background: ${o.alpha(u.colors.background.primary,.7)};
    background-size: cover;
  `};class a{}a.LoginLogo=f,a.LoginBackground=d,a.MenuLogo=r,a.LoginBoxBackground=c,a.AppTitle="Grafana",a.LoginTitle="Welcome to Grafana",a.GetLoginSubTitle=()=>null},67345:(Y,O,e)=>{"use strict";e.d(O,{t:()=>t});function t(n,o,s){const l=[];let f=!1;function d(r){const c=new URLSearchParams(r.url?.split("?")[1]);let a=`${r.url?.split("?")[0]}`;c.has("editview")&&(a+=`?editview=${c.get("editview")}`),!f&&!r.hideFromBreadcrumbs&&(s&&a===s.url?(l.unshift({text:s.text,href:r.url??""}),f=!0):l.unshift({text:r.text,href:r.url??""})),r.parentItem&&d(r.parentItem)}if(o)if(o.url&&o.children){const r=o.children.find(c=>c.active);r&&(d(r),r.parentItem!==o&&d(o))}else d(o);return d(n),l}},52822:(Y,O,e)=>{"use strict";e.d(O,{x:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(39904);const l=n.forwardRef(({icon:d,children:r,onClick:c,...a},u)=>{const i=(0,o.wW)(f);return n.createElement("button",{...a,className:i.action,onClick:c},n.createElement(s.J,{name:d,size:"xl"}),r)});l.displayName="CardButton";const f=d=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${d.colors.background.secondary};
      border-radius: ${d.shape.borderRadius(1)};
      color: ${d.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${d.colors.emphasize(d.colors.background.secondary)};
      }
    `})},50796:(Y,O,e)=>{"use strict";e.d(O,{P:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(8180);const l=({onClick:d,"aria-label":r,style:c})=>{const a=(0,o.wW)(f);return n.createElement(s.h,{"aria-label":r??"Close",className:a,name:"times",onClick:d,style:c})},f=d=>t.css`
    position: absolute;
    right: ${d.spacing(.5)};
    top: ${d.spacing(1)};
  `},62911:(Y,O,e)=>{"use strict";e.d(O,{j:()=>o});var t=e(66111),n=e(31403);function o(s){const{hrefSuffix:l}=s,f="Learn more in the Grafana docs";return t.createElement(n.Qj,{"aria-label":f,icon:"external-link-alt",fill:"text",href:`https://grafana.com/docs/grafana/next/datasources/${l}`,variant:"secondary",size:"md",target:"_blank",tooltip:f,tooltipPlacement:"top"})}},69142:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>a});var t=e(9892),n=e(66111),o=e(68183),s=e(39904),l=e(31403),f=e(97097);const d=t.css`
  text-align: center;
`,r=t.css`
  max-width: 700px;
  margin: 0 auto;
`,a=({title:u,buttonIcon:i,buttonLink:p,buttonTitle:g,buttonDisabled:y,onClick:E,proTip:h,proTipLink:v,proTipLinkTitle:C,proTipTarget:m,infoBox:D,infoBoxTitle:P})=>{const b=()=>n.createElement(n.Fragment,null,h?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",h," "),v&&n.createElement("a",{href:v,target:m,className:"text-link"},C)):"",D?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${r}`},P&&n.createElement("h5",null,P),n.createElement("div",{dangerouslySetInnerHTML:D})):""),M=b()?"":t.css`
        margin-bottom: 20px;
      `,x=p?l.Qj:l.zx,A=n.createElement(x,{size:"lg",onClick:E,href:p,icon:i,className:M,"data-testid":o.wl.components.CallToActionCard.buttonV2(g),disabled:y},g);return n.createElement(f._,{className:d,message:u,footer:b(),callToActionElement:A})}},25337:(Y,O,e)=>{"use strict";e.d(O,{$_:()=>c,Dv:()=>r,dP:()=>l});var t=e(66111),n=e(35645),o=e(39904),s=e(35287);let l=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function f(u){return{hasReleaseNotes:!0,isBeta:u.includes("-beta")}}function d(){const{buildInfo:u,licenseInfo:i}=n.v,p=[],g=i.stateInfo?` (${i.stateInfo})`:"";if(p.push({target:"_blank",id:"license",text:`${u.edition}${g}`,url:i.licenseUrl}),u.hideVersion)return p;const{hasReleaseNotes:y}=f(u.version);return p.push({target:"_blank",id:"version",text:`v${u.version} (${u.commit})`,url:y?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),u.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p}function r(u){l=u}const c=t.memo(({customLinks:u})=>{const i=(u||l()).concat(d());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,i.map(p=>t.createElement("li",{key:p.text},t.createElement(a,{item:p}))))))});c.displayName="Footer";function a({item:u}){const i=u.url?t.createElement("a",{href:u.url,target:u.target,rel:"noopener noreferrer",id:u.id},u.text):u.text;return t.createElement(t.Fragment,null,u.icon&&t.createElement(o.J,{name:u.icon})," ",i)}},16534:(Y,O,e)=>{"use strict";e.d(O,{G:()=>a});var t=e(66111),n=e(68183),o=e(94270),s=e(24799),l=e(52081),f=e(31403),d=e(61860),r=e(5080),c=e(20787);const a=({onSubmit:u,onSkip:i})=>{const p=g=>{u(g.newPassword)};return t.createElement(o.l,{onSubmit:p},({errors:g,register:y,getValues:E})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!g.newPassword,error:g?.newPassword?.message},t.createElement(c.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!g.confirmNew,error:g?.confirmNew?.message},t.createElement(c.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:h=>h===E().newPassword||"Passwords must match!"})})),t.createElement(l.wc,null,t.createElement(f.zx,{type:"submit",className:r.F},"Submit"),i&&t.createElement(d.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(f.zx,{fill:"text",onClick:i,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(Y,O,e)=>{"use strict";e.d(O,{X:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(39904),l=e(46967),f=e(57227);const d=({name:c,onChange:a,verifyLayerNameUniqueness:u,overrideStyles:i})=>{const p=(0,o.wW)(r),[g,y]=(0,n.useState)(!1),[E,h]=(0,n.useState)(null),v=M=>{y(!0)},C=M=>{if(y(!1),E){h(null);return}c!==M&&a(M)},m=M=>{const x=M.currentTarget.value.trim();if(x.length===0){h("An empty layer name is not allowed");return}if(u&&!u(x)&&x!==c){h("Layer name already exists");return}E&&h(null)},D=M=>{C(M.currentTarget.value.trim())},P=M=>{M.key==="Enter"&&C(M.currentTarget.value)},b=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:p.wrapper},!g&&n.createElement("button",{className:p.layerNameWrapper,title:"Edit layer name",onClick:v,"data-testid":"layer-name-div"},n.createElement("span",{className:i?"":p.layerName},c),n.createElement(s.J,{name:"pen",className:p.layerEditIcon,size:"sm"})),g&&n.createElement(n.Fragment,null,n.createElement(l.I,{type:"text",defaultValue:c,onBlur:D,autoFocus:!0,onKeyDown:P,onFocus:b,invalid:E!==null,onChange:m,className:p.layerNameInput,"data-testid":"layer-name-input"}),E&&n.createElement(f.S,{horizontal:!0},E))))},r=c=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${c.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${c.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${c.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${c.colors.action.hover};
        border: 1px dashed ${c.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${c.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${c.typography.fontWeightMedium};
      color: ${c.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${c.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${c.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(Y,O,e)=>{"use strict";e.d(O,{G:()=>o});var t=e(66111),n=e(58379);const o=s=>{const{children:l,storageKey:f,defaultValue:d}=s,[r,c]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const i=p=>{p.key===f&&c({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}});const a=i=>{try{n.Z.setObject(f,i)}catch(p){console.error(p)}c({value:i})},u=()=>{try{n.Z.delete(f)}catch(i){console.log(i)}c({value:d})};return t.createElement(t.Fragment,null,l(r.value,a,u))}},86824:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(66111),n=e(4063),o=e(54899),s=e(18271),l=e(47694);const f=()=>!!l.ZP.oauth&&Object.keys(l.ZP.oauth).length>0;class d extends t.PureComponent{constructor(a){super(a),this.result={},this.changePassword=u=>{const i={newPassword:u,confirmNew:u,oldPassword:"admin"};if(this.props.resetCode){const p={code:this.props.resetCode,newPassword:u,confirmPassword:u};(0,o.i)().post("/api/user/password/reset",p).then(()=>{this.toGrafana()})}else(0,o.i)().put("/api/user/password",i).then(()=>{this.toGrafana()}).catch(p=>console.error(p))},this.login=u=>{this.setState({isLoggingIn:!0}),(0,o.i)().post("/login",u).then(i=>{if(this.result=i,u.password!=="admin"||l.ZP.ldapEnabled||l.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?l.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(l.ZP.appSubUrl)?window.location.assign(l.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(l.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},l.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",l.ZP.loginError])}render(){const{children:a}=this.props,{isLoggingIn:u,isChangingPassword:i}=this.state,{login:p,toGrafana:g,changePassword:y}=this,{loginHint:E,passwordHint:h,disableLoginForm:v,disableUserSignUp:C}=l.ZP;return t.createElement(t.Fragment,null,a({isOauthEnabled:f(),loginHint:E,passwordHint:h,disableLoginForm:v,disableUserSignUp:C,login:p,isLoggingIn:u,changePassword:y,skipPasswordChange:g,isChangingPassword:i}))}}const r=d},5080:(Y,O,e)=>{"use strict";e.d(O,{F:()=>a,U:()=>u});var t=e(9892),n=e(66111),o=e(68183),s=e(94270),l=e(24799),f=e(46967),d=e(31403),r=e(20787);const c=t.css`
  width: 100%;
  padding-bottom: 16px;
`,a=t.css`
  justify-content: center;
  width: 100%;
`,u=({children:i,onSubmit:p,isLoggingIn:g,passwordHint:y,loginHint:E})=>n.createElement("div",{className:c},n.createElement(s.l,{onSubmit:p,validateOn:"onChange"},({register:h,errors:v})=>n.createElement(n.Fragment,null,n.createElement(l.g,{label:"Email or username",invalid:!!v.user,error:v.user?.message},n.createElement(f.I,{...h("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:E,"aria-label":o.wl.pages.Login.username})),n.createElement(l.g,{label:"Password",invalid:!!v.password,error:v.password?.message},n.createElement(r.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...h("password",{required:"Password is required"})})),n.createElement(d.zx,{type:"submit","aria-label":o.wl.pages.Login.submit,className:a,disabled:g},g?"Logging in...":"Log in"),i)))},80472:(Y,O,e)=>{"use strict";e.d(O,{$s:()=>d,dd:()=>r,pJ:()=>a});var t=e(9892),n=e(66111),o=e(72648),s=e(85419),l=e(36578),f=e(25337);const d=({children:u,enterAnimation:i=!0})=>{const p=(0,o.wW)(a);return n.createElement("div",{className:(0,t.cx)(p.loginInnerBox,i&&p.enterAnimation)},u)},r=({children:u,branding:i})=>{const p=(0,o.wW)(a),[g,y]=(0,n.useState)(!1),E=i?.loginSubtitle??l.c.GetLoginSubTitle(),h=i?.loginTitle??l.c.LoginTitle,v=i?.loginBoxBackground||l.c.LoginBoxBackground(),C=i?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(l.c.LoginBackground,{className:(0,t.cx)(p.container,g&&p.loginAnim,i?.loginBackground)},n.createElement("div",{className:(0,t.cx)(p.loginContent,v,"login-content-box")},n.createElement("div",{className:p.loginLogoWrapper},n.createElement(l.c.LoginLogo,{className:p.loginLogo,logo:C}),n.createElement("div",{className:p.titleWrapper},n.createElement("h1",{className:p.mainTitle},h),E&&n.createElement("h3",{className:p.subTitle},E))),n.createElement("div",{className:p.loginOuterBox},u)),i?.hideFooter?n.createElement(n.Fragment,null):n.createElement(f.$_,{customLinks:i?.footerLinks}))},c=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,a=u=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${u.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${u.typography.size.md};
      color: ${u.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${u.shape.borderRadius(4)};
      padding: ${u.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${u.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${c} ease-out 0.2s;
    `})},45458:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>f});var t=e(82897),n=e.n(t),o=e(66111),s=e(46967),l=e(24799);class f extends o.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=o.createRef(),this.updateValue=()=>{const r=this.inputRef.current?.value;let c=!1,a="";const u=this.props.min,i=this.props.max;let p=r!==""?Number(r):void 0;p&&!Number.isNaN(p)&&(u!=null&&p<u?(a=u.toString(),c=!0):i!=null&&p>i?(a=i.toString(),c=!0):a=r??"",this.setState({text:a,inputCorrected:c})),c&&this.updateValueDebounced(),!Number.isNaN(p)&&p!==this.props.value&&this.props.onChange(p)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=r=>{this.setState({text:r.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=r=>{r.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(r){if(this.props.value!==r.value){const c=isNaN(this.props.value)?"":`${this.props.value}`;c!==this.state.text&&this.setState({text:c})}}renderInput(){return o.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width})}render(){const{inputCorrected:r}=this.state;if(r){let c="",{min:a,max:u}=this.props;return u==null?a!=null&&(c=`< ${a}`):a!=null?c=`${a} < > ${u}`:c=`> ${u}`,o.createElement(l.g,{invalid:r,error:`Out of range ${c}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(Y,O,e)=>{"use strict";e.d(O,{B:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(90208),l=e(8180),f=e(98671);const d=({value:c,settings:a,onChange:u,details:i})=>{const p=(0,o.l4)(),g=(0,o.wW)(r);return n.createElement(s.zH,{color:c??"",onChange:u,enableNamedColors:a?.enableNamedColors!==!1},({ref:y,showColorPicker:E,hideColorPicker:h})=>n.createElement("div",{className:g.spot},n.createElement("div",{className:g.colorPicker},n.createElement(f.b,{ref:y,onClick:E,onMouseLeave:h,color:c?p.visualization.getColorByName(c):p.components.input.borderColor})),i&&n.createElement(n.Fragment,null,c?n.createElement("span",{className:g.colorText,onClick:E},c):n.createElement("span",{className:g.placeholderText,onClick:E},a?.placeholder??"Select color"),a?.isClearable&&c&&n.createElement(l.h,{name:"times",onClick:()=>u(void 0)}))))},r=c=>({spot:t.css`
      cursor: pointer;
      color: ${c.colors.text};
      background: ${c.components.input.background};
      padding: 3px;
      height: ${c.v1.spacing.formInputHeight}px;
      border: 1px solid ${c.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${c.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${c.spacing(1)};
    `,colorText:t.css`
      flex-grow: 2;
    `,placeholderText:t.css`
      flex-grow: 2;
      color: ${c.colors.text.secondary};
    `})},12503:(Y,O,e)=>{"use strict";e.d(O,{w:()=>o});var t=e(66111),n=e(45458);const o=({value:s,onChange:l,item:f})=>{const{settings:d}=f,r=(0,t.useCallback)(c=>{l(d?.integer&&c!==void 0?Math.floor(c):c)},[l,d?.integer]);return t.createElement(n.Y,{value:s,min:d?.min,max:d?.max,step:d?.step,placeholder:d?.placeholder,onChange:r})}},52974:(Y,O,e)=>{"use strict";e.d(O,{u:()=>rt,l:()=>Ot});var t=e(66111),n=e(30779),o=e(72293),s=e(99098),l=e(69098),f=e(8944),d=e(2594),r=e(52566),c=e(15448),a=e(9892),u=e(82897),i=e(92103),p=e(16514),g=e(46967),y=e(90208),E=e(8180),h=e(72648),v=e(31403),C=e(64353),m=e(7804);const D=[{value:l.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:l.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class P extends t.PureComponent{constructor(Mt){super(Mt),this.onAddThreshold=()=>{const{steps:De}=this.state;let Ne=0;De.length>1&&(Ne=De[De.length-1].value+10);let tt=p.O9.filter(Fe=>!De.some(Ee=>Ee.color===Fe))[1];tt||(tt="#CCCCCC");const et={value:Ne,color:tt,key:b++},Ue=[...De,et];(0,i.bP)(Ue),this.setState({steps:Ue},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=De=>{const{steps:Ne}=this.state;Ne.length&&De.key!==Ne[0].key&&this.setState({steps:Ne.filter(tt=>tt.key!==De.key)},this.onChange)},this.onChangeThresholdValue=(De,Ne)=>{const tt=De.target.value.replace(/,/g,"."),et=parseFloat(tt),Ue=isNaN(et)?"":et,Fe=this.state.steps.map(Ee=>(Ee.key===Ne.key&&(Ee={...Ee,value:Ue}),Ee));Fe.length&&(Fe[0].value=-1/0),(0,i.bP)(Fe),this.setState({steps:Fe})},this.onChangeThresholdColor=(De,Ne)=>{const{steps:tt}=this.state,et=tt.map(Ue=>(Ue.key===De.key&&(Ue={...Ue,color:Ne}),Ue));this.setState({steps:et},this.onChange)},this.onBlur=()=>{const De=[...this.state.steps];(0,i.bP)(De),this.setState({steps:De},this.onChange)},this.onChange=()=>{this.props.onChange(x(this.props.thresholds,this.state.steps))},this.onModeChanged=De=>{this.props.onChange({...this.props.thresholds,mode:De})};const ue=M(Mt.thresholds.steps);ue[0].value=-1/0,this.state={steps:ue},this.latestThresholdInputRef=t.createRef()}renderInput(Mt,ue,De){const Ne=this.props.thresholds.mode===l.H.Percentage,tt=`Threshold ${De+1}`;return isFinite(Mt.value)?t.createElement(g.I,{type:"number",step:"0.0001",key:Ne.toString(),onChange:et=>this.onChangeThresholdValue(et,Mt),value:Mt.value,"aria-label":tt,ref:De===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ue.inputPrefix},t.createElement("div",{className:ue.colorPicker},t.createElement(y.zH,{color:Mt.color,onChange:et=>this.onChangeThresholdColor(Mt,et),enableNamedColors:!0})),Ne&&t.createElement("div",{className:ue.percentIcon},"%")),suffix:t.createElement(E.h,{"aria-label":`Remove ${tt}`,className:ue.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(Mt)})}):t.createElement(g.I,{type:"text",value:"Base","aria-label":tt,disabled:!0,prefix:t.createElement("div",{className:ue.colorPicker},t.createElement(y.zH,{color:Mt.color,onChange:et=>this.onChangeThresholdColor(Mt,et),enableNamedColors:!0}))})}render(){const{thresholds:Mt}=this.props,{steps:ue}=this.state;return t.createElement(h.Ni.Consumer,null,De=>{const Ne=A(De);return t.createElement("div",{className:Ne.wrapper},t.createElement(v.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Ne.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Ne.thresholds},ue.slice(0).reverse().map((tt,et)=>t.createElement("div",{className:Ne.item,key:`${tt.key}`},this.renderInput(tt,Ne,et)))),t.createElement("div",null,t.createElement(C._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(d.S,{options:D,onChange:this.onModeChanged,value:Mt.mode})))})}}let b=100;function M(Et){return(!Et||Et.length===0)&&(Et=[{value:-1/0,color:"green"}]),Et.filter((Mt,ue)=>(0,u.isNumber)(Mt.value)||ue===0).map(Mt=>({color:Mt.color,value:Mt.value===null?-1/0:Mt.value,key:b++}))}function x(Et,Mt){return{mode:Et.mode??l.H.Absolute,steps:Mt.map(De=>{const{key:Ne,...tt}=De;return tt})}}const A=(0,m.B)(Et=>({wrapper:a.css`
      display: flex;
      flex-direction: column;
    `,thresholds:a.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Et.spacing(2)};
    `,item:a.css`
      margin-bottom: ${Et.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:a.css`
      padding: 0 ${Et.spacing(1)};
    `,addButton:a.css`
      margin-bottom: ${Et.spacing(1)};
    `,percentIcon:a.css`
      font-size: ${Et.typography.bodySmall.fontSize};
      color: ${Et.colors.text.secondary};
    `,inputPrefix:a.css`
      display: flex;
      align-items: center;
    `,trashIcon:a.css`
      color: ${Et.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Et.colors.text};
      }
    `}));class T extends t.PureComponent{constructor(Mt){super(Mt)}render(){const{onChange:Mt}=this.props;let ue=this.props.value;return ue||(ue={mode:l.H.Percentage,steps:[]}),t.createElement(P,{thresholds:ue,onChange:Mt})}}var S=e(32195),U=e(52081),R=e(39904),F=e(35029),B=e(92484),K=e(26786),L=e(36826),N=e(15670),z=e(8581);function G({mapping:Et,index:Mt,onChange:ue,onRemove:De,onDuplicate:Ne,showIconPicker:tt}){const{key:et,result:Ue,id:Fe}=Et,Ee=(0,h.wW)(I),Me=(0,t.useRef)(null),He=(0,t.useCallback)(Kt=>{const Jt={...Et,result:{...Et.result}};Kt(Jt),ue(Mt,Jt)},[Et,Mt,ue]);(0,t.useEffect)(()=>{Me.current&&Et.isNew&&(Me.current.focus(),He(Kt=>{Kt.isNew=!1}))},[Et,Me,He]);const Ze=Kt=>{He(Jt=>{Jt.result.color=Kt})},lt=()=>{He(Kt=>{Kt.result.color=void 0})},bt=Kt=>{He(Jt=>{Jt.result.icon=Kt})},Pt=()=>{He(Kt=>{Kt.result.icon=void 0})},Je=Kt=>{He(Jt=>{Jt.key=Kt.currentTarget.value})},Dt=Kt=>{He(Jt=>{Jt.result.text=Kt.currentTarget.value})},Ve=Kt=>{He(Jt=>{Jt.from=parseFloat(Kt.currentTarget.value)})},Xe=Kt=>{He(Jt=>{Jt.to=parseFloat(Kt.currentTarget.value)})},st=Kt=>{He(Jt=>{Jt.pattern=Kt.currentTarget.value})},ut=Kt=>{He(Jt=>{Jt.specialMatch=Kt.value})},xt=[{label:"Null",value:S.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:S.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:S.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:S.e.True,description:"Boolean true values"},{label:"False",value:S.e.False,description:"Boolean false values"},{label:"Empty",value:S.e.Empty,description:"Empty string"}];return t.createElement(L._l,{key:Fe,draggableId:Fe,index:Mt},Kt=>t.createElement("tr",{className:Ee.dragRow,ref:Kt.innerRef,...Kt.draggableProps},t.createElement("td",null,t.createElement("div",{className:Ee.dragHandle,...Kt.dragHandleProps},t.createElement(R.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:Ee.typeColumn},Et.type),t.createElement("td",null,Et.type===S.H.ValueToText&&t.createElement(g.I,{ref:Me,type:"text",value:et??"",onChange:Je,placeholder:"Exact value to match"}),Et.type===S.H.RangeToText&&t.createElement("div",{className:Ee.rangeInputWrapper},t.createElement(g.I,{type:"number",value:Et.from??"",placeholder:"Range start",onChange:Ve,prefix:"From"}),t.createElement(g.I,{type:"number",value:Et.to??"",placeholder:"Range end",onChange:Xe,prefix:"To"})),Et.type===S.H.RegexToText&&t.createElement(g.I,{type:"text",value:Et.pattern??"",placeholder:"Regular expression",onChange:st}),Et.type===S.H.SpecialValue&&t.createElement(z.Ph,{value:xt.find(Jt=>Jt.value===Et.specialMatch),options:xt,onChange:ut})),t.createElement("td",null,t.createElement(g.I,{type:"text",value:Ue.text??"",onChange:Dt,placeholder:"Optional display text"})),t.createElement("td",{className:Ee.textAlignCenter},Ue.color&&t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:Ue.color,onChange:Ze,enableNamedColors:!0}),t.createElement(E.h,{name:"times",onClick:lt,tooltip:"Remove color",tooltipPlacement:"top"})),!Ue.color&&t.createElement(y.zH,{color:"gray",onChange:Ze,enableNamedColors:!0},Jt=>t.createElement(v.zx,{variant:"primary",fill:"text",onClick:Jt.showColorPicker,ref:Jt.ref,size:"sm"},"Set color"))),tt&&t.createElement("td",{className:Ee.textAlignCenter},t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(K.E,{onChange:bt,onClear:Pt,value:Ue.icon,size:B.zc.SMALL,folderName:B.QS.Icon,mediaType:B.DD.Icon,color:Ue.color}),Ue.icon&&t.createElement(E.h,{name:"times",onClick:Pt,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:Ee.textAlignCenter},t.createElement(U.Lh,{spacing:"sm"},t.createElement(E.h,{name:"copy",onClick:()=>Ne(Mt),"data-testid":"duplicate-value-mapping"}),t.createElement(E.h,{name:"trash-alt",onClick:()=>De(Mt),"data-testid":"remove-value-mapping"})))))}const I=Et=>({dragRow:(0,a.css)({position:"relative"}),dragHandle:(0,a.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Et.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:Et.spacing(2)}}),regexInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:Et.spacing(2)}}),typeColumn:(0,a.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,a.css)({textAlign:"center"})});function V({value:Et,onChange:Mt,onClose:ue,showIconPicker:De}){const Ne=(0,h.wW)(H),[tt,et]=(0,t.useState)([]);(0,t.useEffect)(()=>{et(j(Et))},[Et]);const Ue=bt=>{if(!Et||!bt.destination)return;const Pt=[...tt],Je=Pt[bt.source.index];Pt.splice(bt.source.index,1),Pt.splice(bt.destination.index,0,Je),et(Pt)},Fe=(bt,Pt)=>{const Je=[...tt];Je.splice(bt,1,Pt),et(Je)},Ee=bt=>{const Pt=[...tt];Pt.splice(bt,1),et(Pt)},Me=[{label:"Value",value:S.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:S.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:S.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:S.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],He=bt=>{et([...tt,oe({type:bt.value,result:{},isNew:!0})])},Ze=bt=>{const Pt=se(tt[bt]),Je=[...tt];Je.splice(bt,0,{...Pt});for(let Dt=bt;Dt<tt.length;Dt++)Je[Dt].result.index=Dt;et(Je)},lt=()=>{Mt(ie(tt)),ue()};return(0,t.useEffect)(()=>{Et?.length||He({value:S.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Ne.tableWrap},t.createElement("table",{className:Ne.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),De&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(L.Z5,{onDragEnd:Ue},t.createElement(L.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},bt=>t.createElement("tbody",{ref:bt.innerRef,...bt.droppableProps},tt.map((Pt,Je)=>t.createElement(G,{key:Pt.id,mapping:Pt,index:Je,onChange:Fe,onRemove:Ee,onDuplicate:Ze,showIconPicker:De})),bt.placeholder))))),t.createElement(F.u.ButtonRow,{leftItems:t.createElement(N.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:Me,onChange:He})},t.createElement(v.zx,{variant:"secondary",fill:"outline",onClick:ue},"Cancel"),t.createElement(v.zx,{variant:"primary",onClick:lt},"Update")))}const H=Et=>({tableWrap:a.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,a.css)({width:"100%",marginBottom:Et.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Et.colors.action.hover}," th, td":{padding:Et.spacing(1)}})});function Q(){return(0,u.uniqueId)("mapping-")}function oe(Et){return{type:S.H.ValueToText,result:{},id:Q(),...Et}}function se(Et){return{...oe(Et),id:Q()}}function ie(Et){const Mt=[],ue={type:S.H.ValueToText,options:{}};return Et.forEach((De,Ne)=>{const tt={...De.result,index:Ne};switch((!tt.text||tt.text.trim().length===0)&&(tt.text=void 0),De.type){case S.H.ValueToText:De.key!=null&&(ue.options[De.key]=tt);break;case S.H.RangeToText:De.from!=null&&De.to!=null&&Mt.push({type:De.type,options:{from:De.from,to:De.to,result:tt}});break;case S.H.RegexToText:De.pattern!=null&&Mt.push({type:De.type,options:{pattern:De.pattern,result:tt}});break;case S.H.SpecialValue:Mt.push({type:De.type,options:{match:De.specialMatch,result:tt}})}}),Object.keys(ue.options).length>0&&Mt.unshift(ue),Mt}function j(Et){const Mt=[];if(Et)for(const ue of Et)switch(ue.type){case S.H.ValueToText:for(const De of Object.keys(ue.options))Mt.push(oe({type:ue.type,result:ue.options[De],key:De}));break;case S.H.RangeToText:Mt.push(oe({type:ue.type,result:ue.options.result,from:ue.options.from??0,to:ue.options.to??0}));break;case S.H.RegexToText:Mt.push(oe({type:ue.type,result:ue.options.result,pattern:ue.options.pattern}));break;case S.H.SpecialValue:Mt.push(oe({type:ue.type,result:ue.options.result,specialMatch:ue.options.match??S.e.Null}))}return Mt.sort((ue,De)=>(ue.result.index??0)>(De.result.index??0)?1:-1),Mt}const de=t.memo(Et=>{const{value:Mt,onChange:ue,item:De}=Et,Ne=(0,h.wW)(ce),tt=De.settings?.icon,[et,Ue]=(0,t.useState)(!1),Fe=(0,t.useCallback)(()=>{Ue(!1)},[Ue]),Ee=(0,t.useMemo)(()=>j(Mt),[Mt]),Me=(0,t.useCallback)((Ze,lt)=>{Ee[lt].result.color=Ze,ue(ie(Ee))},[Ee,ue]),He=(0,t.useCallback)((Ze,lt)=>{Ee[lt].result.icon=Ze,ue(ie(Ee))},[Ee,ue]);return t.createElement(U.wc,null,t.createElement("table",{className:Ne.compactTable},t.createElement("tbody",null,Ee.map((Ze,lt)=>t.createElement("tr",{key:lt.toString()},t.createElement("td",null,Ze.type===S.H.ValueToText&&Ze.key,Ze.type===S.H.RangeToText&&t.createElement("span",null,"[",Ze.from," - ",Ze.to,"]"),Ze.type===S.H.RegexToText&&Ze.pattern,Ze.type===S.H.SpecialValue&&Ze.specialMatch),t.createElement("td",null,t.createElement(R.J,{name:"arrow-right"})),t.createElement("td",null,Ze.result.text),Ze.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:Ze.result.color,onChange:bt=>Me(bt,lt),enableNamedColors:!0})),tt&&Ze.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(K.E,{onChange:bt=>He(bt,lt),value:Ze.result.icon,size:B.zc.SMALL,folderName:B.QS.Icon,mediaType:B.DD.Icon,color:Ze.result.color})))))),t.createElement(v.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Ue(!0)},Ee.length>0&&t.createElement("span",null,"Edit value mappings"),Ee.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(F.u,{isOpen:et,title:"Value mappings",onDismiss:Fe,className:Ne.modal,closeOnBackdropClick:!1},t.createElement(V,{value:Mt,onChange:ue,onClose:Fe,showIconPicker:tt})))});de.displayName="ValueMappingsEditor";const ce=Et=>({modal:(0,a.css)({width:"980px"}),compactTable:(0,a.css)({width:"100%","tbody td":{padding:Et.spacing(.5)}})});var ee=e(99661);const le=({value:Et,onChange:Mt,item:ue})=>{const{placeholder:De,isClearable:Ne}=ue?.settings??{},tt=(0,t.useCallback)(et=>{Mt(et?.value?.uid)},[Mt]);return t.createElement(ee.o,{isClearable:Ne,defaultOptions:!0,onChange:tt,placeholder:De,value:Et})};var q=e(13355),fe=e(72990),Z=e(53768),ne=e(24799);const re=({value:Et,onChange:Mt,item:ue,id:De})=>{const Ne=(0,h.l4)(),tt=(0,h.wW)(me),et=(0,fe.QY)(Et?.mode),Fe=(ue.settings?.byValueSupport?fe.WO.list():fe.WO.list().filter(lt=>!lt.isByValue)).map(lt=>{let bt=lt.isByValue?" (by value)":"";return{value:lt.id,label:`${lt.name}${bt}`,description:lt.description,isContinuous:lt.isContinuous,isByValue:lt.isByValue,component(){return t.createElement(ve,{mode:lt,theme:Ne})}}}),Ee=lt=>{Mt({...Et,mode:lt.value})},Me=lt=>{Mt({...Et,mode:Ze,fixedColor:lt})},He=lt=>{Mt({...Et,mode:Ze,seriesBy:lt})},Ze=Et?.mode??Z.S.Thresholds;if(Ze===Z.S.Fixed||Ze===Z.S.Shades)return t.createElement("div",{className:tt.group},t.createElement(z.Ph,{minMenuHeight:200,options:Fe,value:Ze,onChange:Ee,className:tt.select,inputId:De}),t.createElement(q.B,{value:Et?.fixedColor,onChange:Me}));if(ue.settings?.bySeriesSupport&&et.isByValue){const lt=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Ne.spacing(2)}},t.createElement(z.Ph,{minMenuHeight:200,options:Fe,value:Ze,onChange:Ee,inputId:De})),t.createElement(ne.g,{label:"Color series by"},t.createElement(d.S,{value:Et?.seriesBy??"last",options:lt,onChange:He})))}return t.createElement(z.Ph,{minMenuHeight:200,options:Fe,value:Ze,onChange:Ee,inputId:De})},ve=({mode:Et,theme:Mt})=>{if(!Et.getColors)return null;const ue=Et.getColors(Mt).map(Mt.visualization.getColorByName),De={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Et.isContinuous)De.background=`linear-gradient(90deg, ${ue.join(",")})`;else{let Ne="",tt="";for(let et=0;et<ue.length;et++){const Ue=ue[et];if(Ne==="")Ne=`linear-gradient(90deg, ${Ue} 0%`;else{const Ee=et/(ue.length-1)*100;Ne+=`, ${tt} ${Ee}%, ${Ue} ${Ee}%`}tt=Ue}De.background=Ne}return t.createElement("div",{style:De})},me=Et=>({group:a.css`
      display: flex;
    `,select:a.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Ie=e(3281),Ge=e(68037);const gt=({value:Et,onChange:Mt,context:ue})=>t.createElement(Ge.d,{links:Et,onChange:Mt,data:ue.data,getSuggestions:()=>ue.getSuggestions?ue.getSuggestions(Ie.o3.Values):[]});class Te extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Mt}=this.props,{settings:ue}=Mt;let De=Mt.settings?.options||[];ue?.getOptions&&(De=await ue.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Mt){const ue=Mt.item?.settings,De=this.props.item?.settings;if(ue!==De)this.updateOptions();else if(De?.getOptions){const Ne=Mt.context?.data,tt=this.props.context?.data;Ne!==tt&&this.updateOptions()}}render(){const{options:Mt,isLoading:ue}=this.state,{value:De,onChange:Ne,item:tt}=this.props,{settings:et}=tt;return t.createElement(z.NU,{isLoading:ue,value:De,defaultValue:De,allowCustomValue:et?.allowCustomValue,onChange:Ue=>{Ne(Ue.map(Fe=>Fe.value).flatMap(Fe=>Fe!==void 0?[Fe]:[]))},options:Mt})}}var Le=e(12503);class Ye extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Mt}=this.props,{settings:ue}=Mt;let De=Mt.settings?.options||[];ue?.getOptions&&(De=await ue.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Mt){const ue=Mt.item?.settings,De=this.props.item?.settings;if(ue!==De)this.updateOptions();else if(De?.getOptions){const Ne=Mt.context?.data,tt=this.props.context?.data;Ne!==tt&&this.updateOptions()}}render(){const{options:Mt,isLoading:ue}=this.state,{value:De,onChange:Ne,item:tt}=this.props,{settings:et}=tt;let Ue=Mt.find(Fe=>Fe.value===De);return!Ue&&De&&(Ue={label:`${De}`,value:De}),t.createElement(z.Ph,{isLoading:ue,value:Ue,defaultValue:De,allowCustomValue:et?.allowCustomValue,isClearable:et?.isClearable,onChange:Fe=>Ne(Fe?.value),options:Mt})}}var it=e(74912),ht=e(71294);const Re=({value:Et,onChange:Mt,item:ue,id:De})=>t.createElement(ht.m,{stats:Et,onChange:Mt,allowMultiple:!!ue.settings?.allowMultiple,defaultStat:ue.settings?.defaultStat,inputId:De});var ye=e(37565),Ce=e(35645);class be extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=Mt=>{const{value:ue,onChange:De}=this.props,Ne=[...ue];Ne.splice(Mt,1),De(Ne)},this.onValueChange=(Mt,ue)=>{if("key"in Mt&&Mt.key!=="Enter")return;const{value:De,onChange:Ne}=this.props,tt=Mt.currentTarget.value.trim();if(ue<0){tt&&(Mt.currentTarget.value="",Ne([...De,tt])),this.setState({showAdd:!1});return}if(!tt)return this.onRemoveString(ue);const et=[...De];et[ue]=tt,Ne(et)}}render(){const{value:Mt,item:ue}=this.props,{showAdd:De}=this.state,Ne=We(Ce.v.theme2),tt=ue.settings?.placeholder||"Add text";return t.createElement("div",null,Mt.map((et,Ue)=>t.createElement(g.I,{className:Ne.textInput,key:`${Ue}/${et}`,defaultValue:et||"",onBlur:Fe=>this.onValueChange(Fe,Ue),onKeyDown:Fe=>this.onValueChange(Fe,Ue),suffix:t.createElement(R.J,{className:Ne.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Ue)})})),De?t.createElement(g.I,{autoFocus:!0,className:Ne.textInput,placeholder:tt,defaultValue:"",onBlur:et=>this.onValueChange(et,-1),onKeyDown:et=>this.onValueChange(et,-1),suffix:t.createElement(R.J,{name:"plus-circle"})}):t.createElement(v.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},tt))}}const We=(0,m.B)(Et=>({textInput:a.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${Et.components.input.borderHover};
      }
    `,trashIcon:a.css`
      color: ${Et.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${Et.colors.text};
      }
    `}));var Qe=e(61227);function mt({value:Et,onChange:Mt,item:ue}){const De=(0,h.wW)(vt);return ue?.settings?.isClearable&&Et!=null?t.createElement("div",{className:De.wrapper},t.createElement("span",{className:De.first},t.createElement(Qe.n,{value:Et,onChange:Mt})),t.createElement(E.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>Mt(void 0)})):t.createElement(Qe.n,{value:Et,onChange:Mt})}const vt=Et=>({wrapper:a.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:a.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),rt=()=>{const Et={id:"number",name:"Number",description:"Allows numeric values input",editor:Le.w},Mt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:it.p},ue={id:"text",name:"Text",description:"Allows string values input",editor:ye.A},De={id:"strings",name:"String array",description:"An array of strings",editor:be},Ne={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Ve){const{id:Xe,...st}=Ve;return t.createElement(f.r,{...st,onChange:ut=>Ve.onChange(ut.currentTarget.checked)})}},tt={id:"select",name:"Select",description:"Allows option selection",editor:Ye},et={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Te},Ue={id:"radio",name:"Radio",description:"Allows option selection",editor(Ve){return t.createElement(d.S,{...Ve,options:Ve.item.settings?.options})}},Fe={id:"unit",name:"Unit",description:"Allows unit input",editor:mt},Ee={id:"color",name:"Color",description:"Allows color selection",editor(Ve){return t.createElement(q.B,{value:Ve.value,onChange:Ve.onChange,settings:Ve.item.settings,details:!0})}},Me={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:re},He={id:"links",name:"Links",description:"Allows defining data links",editor:gt},Ze={id:"stats-picker",name:"Stats Picker",editor:Re,description:""},lt={id:"timezone",name:"Time zone",description:"Time zone selection",editor:r.O},bt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:c.b};return[ue,Et,Mt,Ne,Ue,tt,Fe,He,Ze,De,lt,Me,Ee,et,bt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:le},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:de},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:T}]},Ot=()=>{const Et=["Standard options"],Mt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:o.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Et},ue={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:o.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:Et},De={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:o.Oh,settings:{placeholder:"auto"},shouldApply:Ze=>Ze.type===s.fS.number,category:Et},Ne={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:o.Oh,settings:{placeholder:"auto"},shouldApply:Ze=>Ze.type===s.fS.number,category:Et},tt={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:o.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:Ze=>Ze.type===s.fS.number,category:Et},et={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:o.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:Et},Ue={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:o.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:Ze=>Ze?Ze.length:0},Fe={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:o.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Et},Ee={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:o.uj,settings:{},defaultValue:[],shouldApply:Ze=>Ze.type!==s.fS.time,category:["Value mappings"],getItemsCount:Ze=>Ze?Ze.length:0},Me={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:o.ZN,settings:{},defaultValue:{mode:l.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:Ze=>Ze?Ze.steps.length:0},He={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:o.W4,shouldApply:()=>!0,settings:{},category:Et};return[ue,De,Ne,tt,Mt,Fe,et,Ue,Ee,Me,He]}},74912:(Y,O,e)=>{"use strict";e.d(O,{p:()=>r});var t=e(9892),n=e(65788),o=e(74560),s=e(66111),l=e(72648),f=e(29571),d=e(45458);const r=({value:u,onChange:i,item:p})=>{const g=(0,s.useRef)(null),{settings:y}=p,E=y?.min||0,h=y?.max||100,v=y?.step,C=y?.marks||{[E]:E,[h]:h},m=y?.included,D=y?.ariaLabelForHandle,P=75,b=!0,M=(0,l.l4)(),[x,A]=(0,s.useState)(u??E),[T,S]=(0,s.useState)(P);(0,s.useEffect)(()=>{u!=null&&u!==x&&A(u)},[u,x]),(0,s.useEffect)(()=>{const L=getComputedStyle(g.current),N=L.getPropertyValue("font-weight")||"normal",z=L.getPropertyValue("font-size")||"16px",G=L.getPropertyValue("font-family")||"Arial",I="0",V=4,H=8,Q=Math.max((h+(v||0)).toString().length,(h-(v||0)).toString().length)+V,oe=I.repeat(Q),se=c(oe,`${N} ${z} ${G}`);se&&S(se+H*2)},[h,v]);const U=(0,s.useCallback)(L=>{const N=typeof L=="number"?L:L[0];A(N),i&&i(N)},[A,i]),R=(0,s.useCallback)(L=>{let N=L;(Number.isNaN(N)||!N)&&(N=0),A(N),i&&i(N)},[i]),F=(0,f.W)(M,b,Boolean(C)),B=a(M,T),K=b?[]:[F.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(F.container,F.slider)},s.createElement(n.Global,{styles:F.slider}),s.createElement("label",{className:(0,t.cx)(F.sliderInput,...K)},s.createElement(o.Z,{min:E,max:h,step:v,defaultValue:u,value:x,onChange:U,vertical:!b,reverse:!1,ariaLabelForHandle:D,marks:C,included:m}),s.createElement("span",{className:B.numberInputWrapper,ref:g},s.createElement(d.Y,{value:x,onChange:R,max:h,min:E,step:v}))))};function c(u,i){const g=document.createElement("canvas").getContext("2d");return g?(g.font=i,g.measureText(u).width):null}const a=(u,i)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${i}px;
      min-width: ${i}px;
      overflow: visible;
      width: 100%;
    `})},37565:(Y,O,e)=>{"use strict";e.d(O,{A:()=>s});var t=e(66111),n=e(97379),o=e(46967);const s=({value:l,onChange:f,item:d,suffix:r})=>{const c=d.settings?.useTextarea?n.K:o.I,a=(0,t.useCallback)(u=>{let i=l??"";"key"in u?u.key==="Enter"&&!d.settings?.useTextarea&&(i=u.currentTarget.value.trim()):i=u.currentTarget.value.trim(),i!==l&&f(i===""?void 0:i)},[l,d.settings?.useTextarea,f]);return t.createElement(c,{placeholder:d.settings?.placeholder,defaultValue:l||"",rows:d.settings?.useTextarea&&d.settings.rows||5,onBlur:a,onKeyDown:a,suffix:r})}},8412:(Y,O,e)=>{"use strict";e.d(O,{T:()=>b});var t=e(9892),n=e(66111),o=e(77346),s=e(72648),l=e(68226),f=e(34177),d=e(2555);const r=({isLoading:x,children:A,className:T})=>{let S=T?n.createElement("div",{className:T},A):A;return n.createElement(n.Fragment,null,x?n.createElement(d.Z,null):S)};var c=e(9591);function a({navItem:x,renderTitle:A,actions:T,info:S,subTitle:U}){const R=(0,s.wW)(u),F=U??x.subTitle,B=A?A(x.text):n.createElement("h1",{className:R.pageTitle},x.text);return n.createElement("div",{className:R.pageHeader},n.createElement("div",{className:R.topRow},n.createElement("div",{className:R.titleInfoContainer},n.createElement("div",{className:R.title},x.img&&n.createElement("img",{className:R.img,src:x.img,alt:`logo for ${x.text}`}),B),S&&n.createElement(c.S,{info:S})),n.createElement("div",{className:R.actions},T)),F&&n.createElement("div",{className:R.subTitle},F))}const u=x=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:x.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:x.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:x.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:x.spacing(1),marginBottom:x.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:x.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:x.spacing(2)})});var i=e(72142),p=e(40419),g=e(79841);function y({navItem:x}){const A=(0,s.wW)(E);return n.createElement("div",{className:A.tabsWrapper},n.createElement(i.J,null,x.children.map((T,S)=>{const U=T.icon?(0,p.toIconName)(T.icon):void 0;return!T.hideFromTabs&&n.createElement(g.O,{label:T.text,active:T.active,key:`${T.url}-${S}`,icon:U,href:T.url,suffix:T.tabSuffix})})))}const E=x=>({tabsWrapper:(0,t.css)({paddingBottom:x.spacing(3)})});var h=e(83233),v=e(14393),C=e(27876),m=e(36578),D=e(67345);function P(x,A){const T=(0,C.useSelector)(S=>S.navIndex)?.[v.Qz];(0,n.useEffect)(()=>{const S=(x?.node!==x?.main?x?.node:x?.main)??{text:"Grafana"},U=(0,D.t)(S,A,T).map(R=>R.text).reverse();U[U.length-1]=m.c.AppTitle,document.title=U.join(" - ")},[T,x,A])}const b=({navId:x,navModel:A,pageNav:T,renderTitle:S,actions:U,subTitle:R,children:F,className:B,info:K,layout:L=o.Q.Standard,toolbar:N,scrollTop:z,scrollRef:G,...I})=>{const V=(0,s.wW)(M),H=(0,h.P)(x,A),{chrome:Q}=(0,f.p)();P(H,T);const oe=T??H?.node;return(0,n.useLayoutEffect)(()=>{H&&Q.update({sectionNav:H,pageNav:T,layout:L})},[H,T,Q,L]),n.createElement("div",{className:(0,t.cx)(V.wrapper,B),...I},L===o.Q.Standard&&n.createElement(l.$,{autoHeightMin:"100%",scrollTop:z,scrollRefCallback:G},n.createElement("div",{className:V.pageInner},oe&&n.createElement(a,{actions:U,navItem:oe,renderTitle:S,info:K,subTitle:R}),T&&T.children&&n.createElement(y,{navItem:T}),n.createElement("div",{className:V.pageContent},F))),L===o.Q.Canvas&&n.createElement(l.$,{autoHeightMin:"100%",scrollTop:z,scrollRefCallback:G},n.createElement("div",{className:V.canvasContent},N,F)),L===o.Q.Custom&&n.createElement(n.Fragment,null,N,F))};b.Contents=r;const M=x=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:x.spacing(2),borderRadius:x.shape.borderRadius(1),border:`1px solid ${x.colors.border.weak}`,borderBottom:"none",background:x.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:x.spacing(0,0,0,0),[x.breakpoints.up("md")]:{margin:x.spacing(2,2,0,1),padding:x.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:x.spacing(2),flexBasis:"100%",flexGrow:1})})},83233:(Y,O,e)=>{"use strict";e.d(O,{P:()=>l});var t=e(90158),n=e(86245),o=e(3153),s=e(27876);function l(d,r){if(r)return r;if(d&&o.h)return(0,s.useSelector)((0,t.P1)(f,c=>(0,n.ht)(c,d??"home")))}function f(d){return d.navIndex}},9591:(Y,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(9892),n=e(66111),o=e(72648);function s({info:f}){const d=(0,o.wW)(l);return n.createElement("div",{className:d.container},f.map((r,c)=>n.createElement(n.Fragment,{key:c},n.createElement("div",{className:d.infoItem},n.createElement("div",{className:d.label},r.label),r.value),c+1<f.length&&n.createElement("div",{"data-testid":"page-info-separator",className:d.separator}))))}const l=f=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:f.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...f.typography.bodySmall,display:"flex",flexDirection:"column",gap:f.spacing(.5)}),label:(0,t.css)({color:f.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${f.colors.border.weak}`})})},2555:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(66111),n=e(61744);const s=({pageName:l=""})=>{const f=`Loading ${l}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:f}))}},98148:(Y,O,e)=>{"use strict";e.d(O,{j:()=>s});var t=e(9892),n=e(66111),o=e(72648);function s({entity:f="Page"}){const d=(0,o.wW)(l),r=(0,o.l4)();return n.createElement("div",{className:d.container},n.createElement("h1",null,f," not found"),n.createElement("div",{className:d.subtitle},"We're looking but can't seem to find this ",f.toLowerCase(),". Try returning"," ",n.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",n.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),n.createElement("div",{className:d.grot},n.createElement("img",{src:`public/img/grot-404-${r.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function l(f){return{container:(0,t.css)({display:"flex",flexDirection:"column",padding:f.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.h5.fontSize,padding:f.spacing(2,0),textAlign:"center"}),grot:(0,t.css)({maxWidth:"450px",paddingTop:f.spacing(8),margin:"0 auto"})}}},20787:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>l});var t=e(66111),n=e(68183),o=e(46967),s=e(8180);const l=t.forwardRef(({autoComplete:f,autoFocus:d,id:r,passwordHint:c,...a},u)=>{const[i,p]=(0,t.useState)(!1);return t.createElement(o.I,{id:r,autoFocus:d,autoComplete:f,...a,type:i?"text":"password",placeholder:c,"aria-label":n.wl.pages.Login.password,ref:u,suffix:t.createElement(s.h,{name:i?"eye-slash":"eye",type:"button","aria-controls":r,role:"switch","aria-checked":i,"aria-label":"Show password",onClick:()=>{p(!i)}})})});l.displayName="PasswordField"},6645:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>y});var t=e(9892),n=e(66111),o=e(94270),s=e(52081),l=e(8581),f=e(31403),d=e(7804),r=e(94080),c=e(28038),a=e(47694),u=e(73757),i=e(50796);class p extends n.Component{constructor(h){super(h),this.onTypeChanged=v=>{const C=v.value;switch(C){case u.pC.User:case u.pC.Team:this.setState({type:C,userId:0,teamId:0,role:void 0});break;case u.pC.Editor:this.setState({type:C,userId:0,teamId:0,role:u.B5.Editor});break;case u.pC.Viewer:this.setState({type:C,userId:0,teamId:0,role:u.B5.Viewer});break}},this.onUserSelected=v=>{this.setState({userId:v&&!Array.isArray(v)?v.id:0})},this.onTeamSelected=v=>{this.setState({teamId:v.value?.id&&!Array.isArray(v.value)?v.value.id:0})},this.onPermissionChanged=v=>{this.setState({permission:v.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:u.pC.Team,permission:u.V5.View}}isValid(){switch(this.state.type){case u.pC.Team:return this.state.teamId>0;case u.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:h}=this.props,v=this.state,C="min-width-20",m=this.isValid(),D=g(a.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(i.P,{onClick:h}),n.createElement("h5",null,"Add Permission For"),n.createElement(o.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(l.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:u.BL,onChange:this.onTypeChanged}),v.type===u.pC.User?n.createElement(c.f,{onSelected:this.onUserSelected,className:C}):null,v.type===u.pC.Team?n.createElement(r.c,{onSelected:this.onTeamSelected,className:C}):null,n.createElement("span",{className:D.label},"Can"),n.createElement(l.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:u.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(f.zx,{"data-save-permission":!0,type:"submit",disabled:!m},"Save"))))}}p.defaultProps={showPermissionLevels:!0};const g=(0,d.B)(E=>({label:t.css`
    color: ${E.colors.primary.text};
    font-weight: bold;
  `})),y=p},92158:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(66111),n=e(39904),o=e(8581),s=e(31403),l=e(73757);class f extends t.Component{render(){const{item:g}=this.props,y=l.vT.find(E=>E.value===g.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},g.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(o.Ph,{"aria-label":`Permission level for "${g.name}"`,options:l.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const d=p=>p?"gf-form-disabled":"";function r({item:p}){return p.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.userAvatarUrl,alt:"User avatar"}):p.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.teamAvatarUrl,alt:"Team avatar"}):p.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function c({item:p}){return p.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):p.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class a extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=g=>{this.props.onPermissionChanged(this.props.item,g.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:g,folderInfo:y}=this.props,E=g.dashboardId===-1&&!g.inherited,h=l.vT.find(v=>v.value===g.permission);return t.createElement("tr",{className:d(Boolean(g?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(r,{item:g})),t.createElement("td",{style:{width:"90%"}},g.name," ",t.createElement(c,{item:g})),t.createElement("td",null,g.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),E&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(o.Ph,{"aria-label":`Permission level for "${g.name}"`,isSearchable:!1,options:l.vT,onChange:this.onPermissionChanged,disabled:g.inherited,value:h,width:25})),t.createElement("td",null,g.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class u extends t.PureComponent{render(){const{items:g,onRemoveItem:y,onPermissionChanged:E,isFetching:h,folderInfo:v}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(f,{key:0,item:{name:"Admin",permission:4}}),g.map((C,m)=>t.createElement(a,{key:m+1,item:C,onRemoveItem:y,onPermissionChanged:E,folderInfo:v})),h===!0&&g.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,h===!1&&g.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const i=u},54630:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(66111);const o=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(Y,O,e)=>{"use strict";e.d(O,{h:()=>l});var t=e(9892),n=e(66111),o=e(2631),s=e(72648);const l=n.memo(n.forwardRef(({className:r,children:c,markdown:a,onRemove:u,...i},p)=>{const g=(0,s.wW)(d);return n.createElement("div",{className:(0,t.cx)(g.wrapper,r),...i,ref:p},a&&f(a),c)}));function f(r){const c=(0,o.a)(r);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:c}})}l.displayName="OperationRowHelp";const d=r=>{const c=r.shape.borderRadius();return{wrapper:t.css`
      padding: ${r.spacing(2)};
      border: 2px solid ${r.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${c} ${c};
      position: relative;
      top: -4px;
    `}}},1029:(Y,O,e)=>{"use strict";e.d(O,{V:()=>r,y:()=>d});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(8180);function f(a){const u=(0,s.wW)(c);return n.createElement("div",{className:(0,t.cx)(u.icon,"active"in a&&a.active&&u.active)},n.createElement(l.h,{name:a.icon,tooltip:a.title,className:u.icon,disabled:!!a.disabled,onClick:a.onClick,type:"button","aria-label":o.wl.components.QueryEditorRow.actionButton(a.title),..."active"in a&&{"aria-pressed":a.active}}))}function d(a){return n.createElement(f,{...a})}const r=a=>n.createElement(f,{...a}),c=a=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${a.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${a.shape.radius.default};
        bottom: -8px;
        background-image: ${a.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(Y,O,e)=>{"use strict";e.d(O,{t:()=>i});var t=e(9892),n=e(66111),o=e(36826),s=e(71828),l=e(41818),f=e(72648),d=e(61970),r=e(8180),c=e(39904);const a=({actionsElement:g,disabled:y,draggable:E,dragHandleProps:h,headerElement:v,isContentVisible:C,onRowToggle:m,reportDragMousePosition:D,title:P,id:b})=>{const M=(0,f.wW)(u);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},n.createElement(r.h,{name:C?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:M.collapseIcon,onClick:m,type:"button","aria-expanded":C,"aria-controls":b}),P&&n.createElement("div",{className:M.titleWrapper,onClick:m,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,y&&M.disabled)},P)),v),n.createElement("div",{className:M.column},g,E&&n.createElement(c.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:D,...h})))},u=g=>({header:t.css`
    label: Header;
    padding: ${g.spacing(.5,.5)};
    border-radius: ${g.shape.borderRadius(1)};
    background: ${g.colors.background.secondary};
    min-height: ${g.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${g.colors.text.disabled};
    margin: ${g.spacing(0,.5)};
    &:hover {
      color: ${g.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${g.spacing(.5)};
    color: ${g.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${g.spacing(.5)};
  `,title:t.css`
    font-weight: ${g.typography.fontWeightBold};
    color: ${g.colors.text.link};
    margin-left: ${g.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${g.colors.text.disabled};
  `});a.displayName="QueryOperationRowHeader";function i({children:g,actions:y,title:E,headerElement:h,onClose:v,onOpen:C,isOpen:m,disabled:D,draggable:P,index:b,id:M}){const[x,A]=(0,n.useState)(m!==void 0?m:!0),T=(0,f.wW)(p),S=(0,n.useCallback)(()=>{A(!x)},[x,A]),U=(0,n.useCallback)(K=>{if(K.defaultPrevented){const L=K.currentTarget.getBoundingClientRect(),N=K.clientX-L.left,z=K.clientY-L.top;(0,l.ff)("query_row_reorder_drag_position",{x:N/L.width,y:z/L.height,width:L.width,height:L.height})}},[]);(0,s.Z)(()=>{x?C&&C():v&&v()},[x]);const R={isOpen:x,onOpen:()=>{A(!0)},onClose:()=>{A(!1)}},F=y&&d.renderOrCallToRender(y,R),B=h&&d.renderOrCallToRender(h,R);return P?n.createElement(o._l,{draggableId:M,index:b},K=>n.createElement(n.Fragment,null,n.createElement("div",{ref:K.innerRef,className:T.wrapper,...K.draggableProps},n.createElement("div",null,n.createElement(a,{id:M,actionsElement:F,disabled:D,draggable:!0,dragHandleProps:K.dragHandleProps,headerElement:B,isContentVisible:x,onRowToggle:S,reportDragMousePosition:U,title:E})),x&&n.createElement("div",{className:T.content},g)))):n.createElement("div",{className:T.wrapper},n.createElement(a,{id:M,actionsElement:F,disabled:D,draggable:!1,headerElement:B,isContentVisible:x,onRowToggle:S,reportDragMousePosition:U,title:E}),x&&n.createElement("div",{className:T.content},g))}const p=g=>({wrapper:t.css`
      margin-bottom: ${g.spacing(2)};
    `,content:t.css`
      margin-top: ${g.spacing(.5)};
      margin-left: ${g.spacing(3)};
    `});i.displayName="QueryOperationRow"},17069:(Y,O,e)=>{"use strict";e.d(O,{I:()=>le});var t=e(66111),n=e(52081),o=e(67487),s=e(94437),l=e(9892),f=e(72648),d=e(39904),r=e(61860),c=e(46967),a=e(73267),u=e(85419),i=e(27501);const p=(0,t.forwardRef)(({children:q,iconName:fe},Z)=>{const ne=(0,f.wW)(g);return t.createElement("div",{className:ne.container,ref:Z},fe&&t.createElement(d.J,{name:fe,size:"xs"}),q)});p.displayName="ValueContainer";const g=q=>{const{prefix:fe}=(0,c.H)({theme:q}),{multiValueContainer:Z}=(0,i.D)(q);return{container:(0,l.cx)(fe,Z,l.css`
        position: relative;
        padding: ${q.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${q.spacing(.5)};
        }
      `)}},y=300,E=360,h=260,v=q=>q.stopPropagation(),C=({appliedRoles:q,basicRole:fe,disabled:Z,isFocused:ne,query:re,showBasicRole:ve,onOpen:me,onClose:Ie,onQueryChange:Ge,...gt})=>{const Te=(0,f.wW)(ht=>D(ht,!1,!!ne,!!Z,!1)),Le=(0,t.useRef)(null);(0,t.useEffect)(()=>{ne&&Le.current?.focus()});const Ye=ht=>{const Re=ht.target?.value;Ge(Re)},it=q.length;return ne?t.createElement("div",{className:Te.wrapper},ve&&t.createElement(p,null,fe),q.map(ht=>t.createElement(p,{key:ht.uid},ht.displayName||ht.name)),!Z&&t.createElement("input",{...gt,className:Te.input,ref:Le,onMouseDown:v,onChange:Ye,"data-testid":"role-picker-input",placeholder:ne?"Select role":"",value:re}),t.createElement("div",{className:Te.suffix},t.createElement(d.J,{name:"angle-up",className:Te.dropdownIndicator,onMouseDown:Ie}))):t.createElement("div",{className:(0,l.cx)(Te.wrapper,Te.selectedRoles),onMouseDown:me},ve&&t.createElement(p,null,fe),t.createElement(m,{appliedRoles:q,numberOfRoles:it,showBuiltInRole:ve}))};C.displayName="RolePickerInput";const m=({showBuiltInRole:q,numberOfRoles:fe,appliedRoles:Z})=>{const ne=(0,f.wW)(re=>P(re));return t.createElement(t.Fragment,null,fe?t.createElement(r.u,{content:t.createElement("div",{className:ne.tooltip},Z?.map(re=>t.createElement("p",{key:re.uid},re.displayName)))},t.createElement(p,null,`${q?"+":""}${fe} role${fe>1?"s":""}`)):!q&&t.createElement(p,null,"No roles assigned"))},D=(q,fe,Z,ne,re)=>{const ve=(0,c.H)({theme:q,invalid:fe});return{wrapper:(0,l.cx)(ve.wrapper,(0,a.RK)(q,fe),Z&&l.css`
          ${u.focusCss(q.v1)}
        `,ne&&ve.inputDisabled,l.css`
        min-width: ${E}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,re&&l.css`
          padding-left: 0;
        `),input:(0,l.cx)((0,a.RK)(q,fe),l.css`
        max-width: 120px;
        border: none;
        cursor: ${Z?"default":"pointer"};
      `),suffix:ve.suffix,dropdownIndicator:l.css`
      cursor: pointer;
    `,selectedRoles:l.css`
      display: flex;
      align-items: center;
      cursor: ${ne?"not-allowed":"pointer"};
    `,tooltip:l.css`
      p {
        margin-bottom: ${q.spacing(.5)};
      }
    `}},P=q=>({tooltip:l.css`
    p {
      margin-bottom: ${q.spacing(.5)};
    }
  `});var b=e(68226),M=e(2594),x=e(31403),A=e(27876),T=e(58255),S=e(85511);const U=q=>({menuWrapper:l.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${q.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:l.css`
      min-width: ${h}px;

      & > div {
        padding-top: ${q.spacing(1)};
      }
    `,menuLeft:l.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:l.css`
      height: 100%;
      min-width: ${h}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${q.components.input.borderColor};

      & > div {
        padding-top: ${q.spacing(1)};
      }
    `,subMenuLeft:l.css`
      border-right: 1px solid ${q.components.input.borderColor};
      border-left: unset;
    `,groupHeader:l.css`
      padding: ${q.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${q.colors.text.primary};
      font-weight: ${q.typography.fontWeightBold};
    `,container:l.css`
      padding: ${q.spacing(1)};
      border: 1px ${q.colors.border.weak} solid;
      border-radius: ${q.shape.borderRadius(1)};
      background-color: ${q.colors.background.primary};
      z-index: ${q.zIndex.modal};
    `,menuSection:l.css`
      margin-bottom: ${q.spacing(2)};
    `,menuOptionCheckbox:l.css`
      display: flex;
      margin: ${q.spacing(0,1,0,.25)};
    `,menuButtonRow:l.css`
      background-color: ${q.colors.background.primary};
      padding: ${q.spacing(1)};
    `,menuOptionBody:l.css`
      font-weight: ${q.typography.fontWeightRegular};
      padding: ${q.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:l.css`
      color: ${q.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:l.css`
      position: absolute;
      right: ${q.spacing(1.25)};
      color: ${q.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:l.css`
      color: ${q.colors.text.disabled};
    `,basicRoleSelector:l.css`
      margin: ${q.spacing(1,1.25,1,1)};
    `,subMenuPortal:l.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:l.css`
      background-color: ${q.colors.background.primary};
      padding: ${q.spacing(1)};
    `,checkboxPartiallyChecked:l.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),R=(0,t.memo)(t.forwardRef(({name:q,value:fe,isFocused:Z,isSelected:ne,partiallySelected:re,disabled:ve,onChange:me,onClick:Ie,onOpenSubMenu:Ge,onCloseSubMenu:gt,children:Te,root:Le},Ye)=>{const it=(0,f.l4)(),ht=(0,i.D)(it),Re=(0,f.wW)(U),ye=(0,l.cx)(ht.option,Z&&ht.optionFocused,ve&&Re.menuOptionDisabled),Ce=mt=>{ve||fe&&me(fe)},be=mt=>{Ie&&Ie(fe)},We=()=>{Ge&&Ge(fe)},Qe=()=>{gt&&gt()};return t.createElement("div",{onMouseEnter:We,onMouseLeave:Qe},t.createElement("div",{ref:Ye,className:ye,"aria-label":"Role picker option",onClick:be},t.createElement(T.X,{value:ne,className:(0,l.cx)(Re.menuOptionCheckbox,{[Re.checkboxPartiallyChecked]:re}),onChange:Ce,disabled:ve}),t.createElement("div",{className:(0,l.cx)(ht.optionBody,Re.menuOptionBody)},t.createElement("span",null,q),t.createElement("span",{className:Re.menuOptionExpand})),Le&&Te&&t.createElement(S.h_,{className:Re.subMenuPortal,root:Le},Te)))}));R.displayName="RoleMenuGroupOption";const F=t.forwardRef(({data:q,isFocused:fe,isSelected:Z,disabled:ne,onChange:re,hideDescription:ve},me)=>{const Ie=(0,f.l4)(),Ge=(0,i.D)(Ie),gt=(0,f.wW)(U),Te=(0,l.cx)(Ge.option,fe&&Ge.optionFocused,ne&&gt.menuOptionDisabled),Le=Ye=>{ne||(Ye.preventDefault(),Ye.stopPropagation(),re(q))};return t.createElement("div",{ref:me,className:Te,"aria-label":"Role picker option",onClick:Le},t.createElement(T.X,{value:Z,className:gt.menuOptionCheckbox,onChange:Le,disabled:ne}),t.createElement("div",{className:(0,l.cx)(Ge.optionBody,gt.menuOptionBody)},t.createElement("span",null,q.displayName||q.name),!ve&&q.description&&t.createElement("div",{className:Ge.optionDescription},q.description)),q.description&&t.createElement(r.u,{content:q.description},t.createElement(d.J,{name:"info-circle",className:gt.menuOptionInfoSign})))});F.displayName="RoleMenuOption";var B=e(25310);const K=({options:q,selectedOptions:fe,disabledOptions:Z,onSelect:ne,onClear:re,showOnLeft:ve})=>{const me=(0,f.l4)(),Ie=(0,i.D)(me),Ge=(0,f.wW)(U),gt=async()=>{re&&re()};return t.createElement("div",{className:(0,l.cx)(Ge.subMenu,{[Ge.subMenuLeft]:ve}),"aria-label":"Role picker submenu"},t.createElement(b.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Ie.optionBody},q.map((Te,Le)=>t.createElement(F,{data:Te,key:Le,isSelected:!!(Te.uid&&(fe.find(Ye=>Ye.uid===Te.uid)||Z?.find(Ye=>Ye.uid===Te.uid))),disabled:!!(Te.uid&&Z?.find(Ye=>Ye.uid===Te.uid))||(0,B.r)(Te),onChange:ne,hideDescription:!0})))),t.createElement("div",{className:Ge.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:gt},"Clear"))))},L=t.forwardRef(({roles:q,renderedName:fe,showGroups:Z,optionGroups:ne,onGroupChange:re,groupSelected:ve,groupPartiallySelected:me,subMenuNode:Ie,selectedOptions:Ge,onRoleChange:gt,onClearSubMenu:Te,showOnLeftSubMenu:Le},Ye)=>{const[it,ht]=(0,t.useState)(!1),[Re,ye]=(0,t.useState)(""),Ce=(0,f.l4)(),be=(0,i.D)(Ce),We=(0,f.wW)(U),Qe=(0,t.useCallback)(vt=>{ye(vt),ht(!0)},[]),mt=(0,t.useCallback)(()=>{ht(!1),ye("")},[]);return t.createElement("div",null,q.length>0&&t.createElement("div",{className:We.menuSection},t.createElement("div",{className:We.groupHeader},fe),t.createElement("div",{className:be.optionBody}),Z&&ne?.length?ne.map(vt=>t.createElement(R,{key:vt.value,name:vt.name,value:vt.value,isSelected:ve(vt.value)||me(vt.value),partiallySelected:me(vt.value),disabled:vt.options?.every(B.r),onChange:re,onOpenSubMenu:Qe,onCloseSubMenu:mt,root:Ie,isFocused:it&&Re===vt.value},it&&Re===vt.value&&t.createElement(K,{options:vt.options,selectedOptions:Ge,onSelect:gt,onClear:()=>Te(Re),showOnLeft:Le}))):q.map(vt=>t.createElement(F,{data:vt,key:vt.uid,isSelected:!!(vt.uid&&Ge.find(rt=>rt.uid===vt.uid)),disabled:(0,B.r)(vt),onChange:gt,hideDescription:!0}))))});L.displayName="RoleMenuGroupsSection";var N=(q=>(q.fixed="fixed",q.custom="custom",q.plugin="plugin",q))(N||{});const G=Object.values(A.OrgRole).map(q=>({label:q,value:q})),I={ldap:"LDAP",current:"Current org"},V=({basicRole:q,options:fe,appliedRoles:Z,showGroups:ne,basicRoleDisabled:re,showBasicRole:ve,onSelect:me,onBasicRoleSelect:Ie,onUpdate:Ge,updateDisabled:gt,offset:Te,apply:Le})=>{const[Ye,it]=(0,t.useState)(Z),[ht,Re]=(0,t.useState)(q),[ye,Ce]=(0,t.useState)({}),be=(0,t.useRef)(null),We=(0,f.l4)(),Qe=(0,i.D)(We),mt=(0,f.wW)(U);(0,t.useEffect)(()=>{me(Ye)},[Ye,me]),(0,t.useEffect)(()=>{Ie&&ht&&Ie(ht)},[ht,Ie]),(0,t.useEffect)(()=>{const et=fe.filter(H).sort(ce),Ue=fe.filter(Q).sort(ce),Fe=fe.filter(oe).sort(ce),Ee={fixed:se(Ue).sort((Me,He)=>Me.name.localeCompare(He.name)),custom:se(et).sort((Me,He)=>Me.name.localeCompare(He.name)),plugin:se(Fe).sort((Me,He)=>Me.name.localeCompare(He.name))};Ce({fixed:{groupType:"fixed",optionGroup:Ee.fixed,renderedName:"Fixed roles",roles:Ue},custom:{groupType:"custom",optionGroup:Ee.custom,renderedName:"Custom roles",roles:et},plugin:{groupType:"plugin",optionGroup:Ee.plugin,renderedName:"Plugin roles",roles:Fe}})},[fe]);const vt=et=>{const Ue=[];for(const Fe of Ye)ie(Fe)===et&&Ue.push(Fe);return Ue},rt=(et,Ue)=>{const Fe=vt(Ue),Ee=ye[et]?.optionGroup.find(Me=>Me.value===Ue);return Fe.length>0&&Fe.length>=Ee.options.length},Ot=(et,Ue)=>{const Fe=vt(Ue),Ee=ye[et]?.optionGroup.find(Me=>Me.value===Ue);return Fe.length>0&&Fe.length<Ee.options.length},Et=et=>{Ye.find(Ue=>Ue.uid===et.uid)?it(Ye.filter(Ue=>Ue.uid!==et.uid)):it([...Ye,et])},Mt=(et,Ue)=>{const Fe=ye[et]?.optionGroup.find(Ee=>Ee.value===Ue);if(Fe)if(rt(et,Ue)||Ot(et,Ue))it(Ye.filter(Ee=>!Fe.options.find(Me=>Ee.uid===Me.uid)));else{const Ee=Fe.options.filter(He=>He.delegatable),Me=Ye.filter(He=>!Fe.options.find(Ze=>He.uid===Ze.uid));it([...Me,...Ee])}},ue=et=>{Re(et)},De=async()=>{it([])},Ne=et=>{const Ue=Ye.filter(Fe=>ie(Fe)!==et);it(Ue)},tt=()=>{Ge(Ye,ht)};return t.createElement("div",{className:(0,l.cx)(Qe.menu,mt.menuWrapper,{[mt.menuLeft]:Te.horizontal>0},l.css`
          bottom: ${Te.vertical>0?`${Te.vertical}px`:"unset"};
          top: ${Te.vertical<0?`${Math.abs(Te.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:mt.menu,"aria-label":"Role picker menu"},t.createElement(b.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},ve&&t.createElement("div",{className:mt.menuSection},t.createElement("div",{className:mt.groupHeader},"Basic roles"),t.createElement(M.S,{className:mt.basicRoleSelector,options:G,value:ht,onChange:ue,fullWidth:!0,disabled:re})),Object.entries(ye).map(([et,Ue])=>t.createElement(L,{key:et,roles:Ue.roles,renderedName:Ue.renderedName,showGroups:ne,optionGroups:Ue.optionGroup,groupSelected:Fe=>rt(Ue.groupType,Fe),groupPartiallySelected:Fe=>Ot(Ue.groupType,Fe),onGroupChange:Fe=>Mt(Ue.groupType,Fe),subMenuNode:be?.current,selectedOptions:Ye,onRoleChange:Et,onClearSubMenu:Ne,showOnLeftSubMenu:Te.horizontal>0}))),t.createElement("div",{className:mt.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:De,disabled:gt},"Clear all"),t.createElement(x.zx,{size:"sm",onClick:tt,disabled:gt},Le?"Apply":"Update")))),t.createElement("div",{ref:be}))},H=q=>!q.name?.startsWith("fixed:")&&!q.name.startsWith("plugins:"),Q=q=>q.name?.startsWith("fixed:"),oe=q=>q.name?.startsWith("plugins:"),se=q=>{const fe={};return q.forEach(ne=>{const re=ie(ne),ve=j(ne);fe[re]||(fe[re]={name:ve,roles:[]}),fe[re].roles.push(ne)}),Object.entries(fe).map(([ne,re])=>({name:I[ne]||ee(re.name),value:ne,options:re.roles.sort(ce)}))},ie=q=>{const fe=de(q),Z=j(q);return`${fe}:${Z}`},j=q=>q.group||"Other",de=q=>{const fe=q.name.indexOf(":");return fe<0?"unknown":q.name.substring(0,fe)},ce=(q,fe)=>q.name.localeCompare(fe.name),ee=q=>q.slice(0,1).toUpperCase()+q.slice(1),le=({basicRole:q,appliedRoles:fe,roleOptions:Z,disabled:ne,isLoading:re,basicRoleDisabled:ve,showBasicRole:me,onRolesChange:Ie,onBasicRoleChange:Ge,canUpdateRoles:gt=!0,apply:Te=!1,maxWidth:Le=E})=>{const[Ye,it]=(0,t.useState)(!1),[ht,Re]=(0,t.useState)(fe),[ye,Ce]=(0,t.useState)(q),[be,We]=(0,t.useState)(""),[Qe,mt]=(0,t.useState)({vertical:0,horizontal:0}),vt=(0,t.useRef)(null);(0,t.useEffect)(()=>{Ce(q),Re(fe)},[fe,q]),(0,t.useEffect)(()=>{const et=vt?.current?.getBoundingClientRect();if(!et||!Ye)return;const{bottom:Ue,top:Fe,left:Ee,right:Me,width:He}=et,Ze=window.innerHeight-Ue,lt=Ue-Fe+10,bt=Me-Ee;let Pt=-bt,Je=-lt;Ze<y+20&&(Je=50+(y-Ze)-lt),window.innerWidth-Me<He&&He<2*h&&(Pt=bt),mt({horizontal:Pt,vertical:Je})},[Ye,ht]);const rt=(0,t.useCallback)(et=>{ne||(et.preventDefault(),et.stopPropagation(),it(!0))},[it,ne]),Ot=(0,t.useCallback)(()=>{it(!1),We(""),Re(fe),Ce(q)},[fe,q]),Et=()=>Ye&&Ot(),Mt=et=>{We(et||"")},ue=et=>{Re(et)},De=et=>{Ce(et)},Ne=(et,Ue)=>{Ge&&Ue&&Ue!==q&&Ge(Ue),gt&&Ie(et),We(""),it(!1)},tt=()=>{const et=Z.map(Ue=>({...Ue,delegatable:gt&&Ue.delegatable}));return be&&be.trim()!==""?et.filter(Ue=>Ue.name?.toLowerCase().includes(be.toLowerCase())):et};return re?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(o.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Le},ref:vt},t.createElement(s.L,{onClick:Et},t.createElement(C,{basicRole:ye,appliedRoles:ht,query:be,onQueryChange:Mt,onOpen:rt,onClose:Ot,isFocused:Ye,disabled:ne,showBasicRole:me}),Ye&&t.createElement(V,{options:tt(),basicRole:ye,appliedRoles:fe,onBasicRoleSelect:De,onSelect:ue,onUpdate:Ne,showGroups:be.length===0||be.trim()==="",basicRoleDisabled:ve,showBasicRole:me,updateDisabled:ve&&!gt,apply:Te,offset:Qe})))}},66226:(Y,O,e)=>{"use strict";e.d(O,{R:()=>d});var t=e(66111),n=e(13821),o=e(77582),s=e(27876),l=e(17069),f=e(11630);const d=({basicRole:r,userId:c,orgId:a,onBasicRoleChange:u,roleOptions:i,disabled:p,basicRoleDisabled:g,apply:y=!1,onApplyRoles:E,pendingRoles:h,maxWidth:v})=>{const[{loading:C,value:m=[]},D]=(0,n.Z)(async()=>{try{if(y&&Boolean(h?.length))return h;if(o.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,f.kt)(c,a)}catch{console.error("Error loading options")}return[]},[a,c,h]);(0,t.useEffect)(()=>{a&&D()},[a,D,h]);const P=async M=>{y?E&&E(M,c,a):(await(0,f.hB)(M,c,a),await D())},b=o.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&o.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(l.I,{appliedRoles:m,basicRole:r,onRolesChange:P,onBasicRoleChange:u,roleOptions:i,isLoading:C,disabled:p,basicRoleDisabled:g,showBasicRole:!0,apply:y,canUpdateRoles:b,maxWidth:v})}},11630:(Y,O,e)=>{"use strict";e.d(O,{_C:()=>f,hB:()=>l,kt:()=>s,u7:()=>d,ul:()=>o});var t=e(54899),n=e(25310);const o=async(r,c)=>{let a="/api/access-control/roles?delegatable=true";r&&(a+=`&targetOrgId=${r}`);const u=await(0,t.i)().get(a);return!u||!u.length?[]:u.map(n.w)},s=async(r,c)=>{let a=`/api/access-control/users/${r}/roles`;c&&(a+=`?targetOrgId=${c}`);try{const u=await(0,t.i)().get(a);return!u||!u.length?[]:u.map(n.w)}catch(u){return(0,t.kW)(u)&&(u.isHandled=!0),[]}},l=(r,c,a)=>{let u=`/api/access-control/users/${c}/roles`;a&&(u+=`?targetOrgId=${a}`);const i=r.flatMap(p=>p.uid);return(0,t.i)().put(u,{orgId:a,roleUids:i})},f=async(r,c)=>{let a=`/api/access-control/teams/${r}/roles`;c&&(a+=`?targetOrgId=${c}`);try{const u=await(0,t.i)().get(a);return!u||!u.length?[]:u.map(n.w)}catch(u){return(0,t.kW)(u)&&(u.isHandled=!0),[]}},d=(r,c,a)=>{let u=`/api/access-control/teams/${c}/roles`;a&&(u+=`?targetOrgId=${a}`);const i=r.flatMap(p=>p.uid);return(0,t.i)().put(u,{orgId:a,roleUids:i})}},25310:(Y,O,e)=>{"use strict";e.d(O,{r:()=>t,w:()=>n});const t=o=>o.delegatable!==void 0&&!o.delegatable,n=o=>{const s="fixed:";if(!o.displayName&&o.name.startsWith(s)){let l="";l=o.name.replace(s,"").replace(/:/g," "),o.displayName=l}return o}},16964:(Y,O,e)=>{"use strict";e.d(O,{V:()=>s});var t=e(66111),n=e(81910),o=e(63418);const s=d=>t.createElement(n.Z,{...d,cacheRequests:!0,preProcessor:f});let l=new Map;function f(d){let r=l.get(d);return r||(r=o.QX.sanitizeSVGContent(d),l.set(d,r)),r}},99661:(Y,O,e)=>{"use strict";e.d(O,{o:()=>c});var t=e(99151),n=e.n(t),o=e(66111),s=e(8581),l=e(29930);const f=(a="General",u)=>`${a}/${u}`;async function d(a=""){return l.ae.search({type:"dash-db",query:a,limit:100}).then(u=>u.map(i=>({value:{uid:i.uid,title:i.title,folderTitle:i.folderTitle,folderUid:i.folderUid},label:f(i?.folderTitle,i.title)})))}const r=n()(d,250,{leading:!0}),c=({value:a,onChange:u,placeholder:i="Select dashboard",noOptionsMessage:p="No dashboards found",...g})=>{const[y,E]=(0,o.useState)();(0,o.useEffect)(()=>{!a||a===y?.value?.uid||(async()=>{const v=await l.ae.getDashboardByUid(a);v.dashboard&&E({value:{uid:v.dashboard.uid,title:v.dashboard.title,folderTitle:v.meta.folderTitle,folderUid:v.meta.folderUid},label:f(v.meta?.folderTitle,v.dashboard.title)})})()},[a]);const h=(0,o.useCallback)(v=>{E(v),u?.(v?.value)},[u,E]);return o.createElement(s.qb,{loadOptions:r,onChange:h,placeholder:i,noOptionsMessage:p,value:y,defaultOptions:!0,...g})}},79658:(Y,O,e)=>{"use strict";e.d(O,{Es:()=>C});var t=e(9892),n=e(99151),o=e.n(n),s=e(66111),l=e(59679),f=e(4063),d=e(68183),r=e(35645),c=e(72648),a=e(46967),u=e(8581),i=e(18271),p=e(35287),g=e(82002),y=e(50946),E=e(27876);const h="+ Add new",v="-10";function C(b){const{dashboardId:M,allowEmpty:x,onChange:A,filter:T,enableCreateNew:S,inputId:U,onClear:R,enableReset:F,initialFolderUid:B,initialTitle:K="",permissionLevel:L=E.PermissionLevelString.Edit,rootName:N,showRoot:z=!0,skipInitialLoad:G,searchQueryType:I,customAdd:V,folderWarning:H}=b,Q=N??r.v.featureToggles.nestedFolders?"Dashboards":"General",[oe,se]=(0,s.useState)(null),[ie,j]=(0,s.useState)(!1),[de,ce]=(0,s.useState)(""),[ee,le]=(0,s.useState)(oe?.title??""),q=(0,c.wW)(P),fe=typeof R=="function",Z=(0,s.useCallback)(async it=>{const ht=await(0,y.ZL)(it,L,I),ye=m(ht,T);return(g.Vt.hasAccess(E.AccessControlAction.DashboardsWrite,g.Vt.isEditor)||g.Vt.hasAccess(E.AccessControlAction.DashboardsCreate,g.Vt.isEditor))&&Q?.toLowerCase().startsWith(it.toLowerCase())&&z&&ye.unshift({label:Q,value:""}),F&&it===""&&K!==""&&!ye.find(be=>be.label===K)&&ye.unshift({label:K,value:B}),S&&Boolean(V)?[...ye,{value:v,label:h,title:it}]:ye},[F,B,K,L,Q,z,I,T,S,V]),ne=(0,s.useMemo)(()=>o()(Z,300,{leading:!0}),[Z]),re=async()=>{const it={label:K,value:void 0},ht={label:Q,value:""},Re=await Z("");let ye=null;B!=null?ye=Re.find(Ce=>Ce.value===B)||null:F&&K?ye=it:B&&(ye=Re.find(Ce=>Ce.id===B)||null),!ye&&!x&&(g.Vt.isEditor?ye=ht:!!M?ye=it:ye=Re.length>0?Re[0]:it),!ie&&se(ye)};(0,s.useEffect)(()=>{oe&&oe.value!==B&&!ie&&oe.value&&oe.label&&A({uid:oe.value,title:oe.label})},[oe,B]),(0,l.Z)(async()=>{if(G){const it=await D({getFolder:y.Pb,folderUid:B,folderName:K});se(it)}await re()},[G,B,K]),(0,s.useEffect)(()=>{oe&&oe.id===v&&j(!0)},[oe]);const ve=(0,s.useCallback)((it,ht)=>{if(it?.value===v)se({id:v,title:de}),le(de);else{if(it||(it={value:"",label:Q}),ht.action==="clear"&&R){R();return}se(it),A({uid:it.value,title:it.label})}},[A,R,Q,de]),me=(0,s.useCallback)(async it=>{if(H?.warningCondition(it))return!1;const ht=await(0,y.L6)({title:it});let Re={value:"",label:"Not created"};return ht.uid?(i.Z.emit(f.SI.alertSuccess,["Folder Created","OK"]),Re={value:ht.uid,label:ht.title},se(ht),ve(Re,{action:"create-option",option:Re})):i.Z.emit(f.SI.alertError,["Folder could not be created"]),Re},[H,ve]),Ie=(0,s.useCallback)(it=>{const ht=Boolean(V?.disallowValues);if(it.key==="Enter"&&ht&&!V?.isAllowedValue(ee)){it.preventDefault();return}switch(it.key){case"Enter":{me(oe?.title),j(!1);break}case"Escape":se({value:"",label:Q}),j(!1)}},[V?.disallowValues,V?.isAllowedValue,ee,me,oe?.title,Q]),Ge=it=>{const ht=it.currentTarget.value;le(ht),se({id:void 0,title:ht})},gt=()=>{se({value:"",label:Q}),j(!1)},Te=(it,{action:ht})=>{ht==="input-change"&&ce(Re=>it),ht==="menu-close"&&ce(Re=>it)},Le=()=>H?.warningCondition(ee)?s.createElement(H.warningComponent,null):null,Ye=()=>H?.warningCondition(de)?s.createElement(H.warningComponent,null):null;return ie?s.createElement(s.Fragment,null,s.createElement(Le,null),s.createElement("div",{className:q.newFolder},"Press enter to create the new folder."),s.createElement(a.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:ee,onChange:Ge,onKeyDown:Ie,placeholder:"Press enter to confirm new folder.",onBlur:gt})):s.createElement("div",{"data-testid":d.wl.components.FolderPicker.containerV2},s.createElement(Ye,null),s.createElement(u.gY,{inputId:U,"aria-label":d.wl.components.FolderPicker.input,loadingMessage:(0,p.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:oe,inputValue:de,onInputChange:Te,value:oe,allowCustomValue:S&&!Boolean(V),loadOptions:ne,onChange:ve,onCreateOption:me,isClearable:fe}))}function m(b,M){return(M?M(b):b).map(A=>({label:A.title,value:A.uid}))}async function D({folderName:b,folderUid:M,getFolder:x}){if(M==null)throw new Error("folderUid is not found.");return b?{label:b,value:M}:{label:(await x(M)).title,value:M}}const P=b=>({newFolder:t.css`
    color: ${b.colors.warning.main};
    font-size: ${b.typography.bodySmall.fontSize};
    padding-bottom: ${b.spacing(1)};
  `})},94080:(Y,O,e)=>{"use strict";e.d(O,{c:()=>f});var t=e(82897),n=e.n(t),o=e(66111),s=e(54899),l=e(8581);class f extends o.Component{constructor(r){super(r),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(r){return this.setState({isLoading:!0}),(0,t.isNil)(r)&&(r=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${r}`).then(c=>{const a=c.teams.map(u=>({value:u,label:u.name,imgUrl:u.avatarUrl}));return this.setState({isLoading:!1}),a})}render(){const{onSelected:r,className:c}=this.props,{isLoading:a}=this.state;return o.createElement("div",{className:"user-picker","data-testid":"teamPicker"},o.createElement(l.qb,{isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:r,className:c,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(Y,O,e)=>{"use strict";e.d(O,{f:()=>f});var t=e(82897),n=e.n(t),o=e(66111),s=e(54899),l=e(8581);class f extends o.Component{constructor(r){super(r),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(r){return this.setState({isLoading:!0}),(0,t.isNil)(r)&&(r=""),(0,s.i)().get(`/api/org/users/lookup?query=${r}&limit=100`).then(c=>c.map(a=>({id:a.userId,value:a.userId,label:a.login,imgUrl:a.avatarUrl,login:a.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:r,onSelected:c,inputId:a}=this.props,{isLoading:u}=this.state;return o.createElement("div",{className:"user-picker","data-testid":"userPicker"},o.createElement(l.qb,{isClearable:!0,className:r,inputId:a,isLoading:u,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:c,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(Y,O,e)=>{"use strict";e.d(O,{e:()=>s});var t=e(66111),n=e(3385),o=e(39904);class s extends t.Component{constructor(f){super(f)}render(){const{label:f,removeIcon:d,count:r,onClick:c}=this.props,{color:a}=(0,n.Bx)(f),u={backgroundColor:a},i=r!==0&&t.createElement("span",{className:"tag-count-label"},`(${r})`);return t.createElement("span",{className:"label label-tag",style:u},d&&t.createElement(o.J,{onClick:c,name:"times"}),f," ",i)}}},24357:(Y,O,e)=>{"use strict";e.d(O,{D:()=>p});var t=e(9892),n=e(66111),o=e(44800),s=e(79086),l=e(72648),f=e(8581),d=e(39904),r=e(35287),c=e(21731);const a=({data:y,className:E,label:h,isFocused:v,innerProps:C})=>{const m=(0,l.wW)(u);return n.createElement("div",{className:(0,t.cx)(m.option,v&&m.optionFocused),"aria-label":"Tag option",...C},n.createElement("div",{className:`tag-filter-option ${E||""}`},typeof h=="string"?n.createElement(c.e,{label:h,removeIcon:!1,count:y.count??0}):h))},u=y=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${y.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${y.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),i=(y,E)=>RegExp((0,s.GE)(E),"i").test(y.value),p=({allowCustomValue:y=!1,formatCreateLabel:E,hideValues:h,inputId:v,isClearable:C,onChange:m,placeholder:D,tagOptions:P,tags:b,width:M})=>{const x=(0,l.wW)(g),A=b.map(H=>({value:H,label:H,count:0})),[T,S]=(0,n.useState)(A),[U,R]=(0,n.useState)(!1),[F,B]=(0,n.useState)(b),[K,L]=(0,n.useState)(A),N=(0,n.useMemo)(()=>b.join(),[b]),z=(0,n.useCallback)(async()=>(await P()).map(Q=>b.includes(Q.term)?{value:Q.term,label:Q.term,count:0}:{value:Q.term,label:Q.term,count:Q.count}),[P,b]),G=(0,n.useCallback)(async()=>{R(!0);const H=await z();y&&K.forEach(Q=>H.push(Q)),S(H),R(!1)},[y,K,z]);(0,n.useEffect)(()=>{b.length>0&&T.length===0&&G()},[G,T.length,b.length]),(0,n.useEffect)(()=>{b!==F&&(B(b),G())},[G,F,b]);const I=H=>{H.forEach(Q=>Q.count=0),m((H||[]).map(Q=>Q.value)),y&&L(H.filter(Q=>!b.includes(Q)))},V={key:N,onFocus:G,isLoading:U,options:T,allowCreateWhileLoading:!0,allowCustomValue:y,formatCreateLabel:E,defaultOptions:!0,filterOption:i,getOptionLabel:H=>H.label,getOptionValue:H=>H.value,inputId:v,isMulti:!0,onChange:I,loadingMessage:(0,r.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,r.t)("tag-filter.no-tags","No tags found"),placeholder:D||(0,r.t)("tag-filter.placeholder","Filter by tag"),value:A,width:M,components:{Option:a,MultiValueLabel:()=>null,MultiValueRemove(H){const{data:Q}=H;return n.createElement(o.c.MultiValueRemove,{...H},n.createElement(c.e,{key:Q.label,label:Q.label,removeIcon:!0,count:Q.count}))},MultiValueContainer:h?()=>null:o.c.MultiValueContainer}};return n.createElement("div",{className:x.tagFilter},C&&b.length>0&&n.createElement("button",{className:x.clear,onClick:()=>I([])},"Clear tags"),n.createElement(f.NU,{...V,prefix:n.createElement(d.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};p.displayName="TagFilter";const g=y=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${y.colors.text.secondary};

    &:hover {
      color: ${y.colors.text.primary};
    }
  `})},32873:(Y,O,e)=>{"use strict";e.d(O,{a:()=>c});var t=e(82897),n=e.n(t),o=e(66111),s=e(47891),l=e(67483),f=e(3630),d=e(59796);const r="grafana.dashboard.timepicker.history",c=y=>o.createElement(d.G,{storageKey:r,defaultValue:[]},(E,h)=>{const v=u(E),C=a(v);return o.createElement(f.Xc,{...y,history:C,onChange:m=>{i(m,v,h),y.onChange(m)}})});function a(y){return y.map(E=>s.convertRawToRange(E,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function u(y){return y.map(E=>{const h=typeof E.from=="string"?E.from:E.from.toISOString(),v=typeof E.to=="string"?E.to:E.to.toISOString();return{from:h,to:v}})}function i(y,E,h){if(!p(y))return;const v={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},C=g([v,...E]);h(C)}function p(y){return(0,l.v9)(y.raw.from)||(0,l.v9)(y.raw.to)}function g(y){return(0,t.uniqBy)(y,E=>E.from+E.to).slice(0,4)}},59420:(Y,O,e)=>{"use strict";e.d(O,{K:()=>a});var t=e(66111),n=e(53768),o=e(99098),s=e(729),l=e(78056),f=e(72269),d=e(60325),r=e(97551);const c=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class a extends t.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(i,p,g)=>{const y=this.props.frames[i].fields[p];if(y.display){const E=y.display(g);if(E.color)return E.color}return n.R},this.prepConfig=(i,p,g)=>{this.panelContext=this.context;const{eventBus:y,sync:E}=this.panelContext;return(0,r.Nj)({frame:i,getTimeRange:g,eventBus:y,sync:E,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:i.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=i=>{const{legend:p,legendItems:g}=this.props;return!i||!g||!p||p.showLegend===!1?null:t.createElement(s.AY.Legend,{placement:p.placement},t.createElement(l.l,{placement:p.placement,items:g,displayMode:p.displayMode,readonly:!0}))}}render(){return t.createElement(f.d,{...this.props,fields:{x:i=>i.type===o.fS.time,y:i=>i.type===o.fS.number||i.type===o.fS.boolean||i.type===o.fS.string},prepConfig:this.prepConfig,propsToDiff:c,renderLegend:this.renderLegend})}}a.contextType=d.bb},97551:(Y,O,e)=>{"use strict";e.d(O,{KN:()=>F,iK:()=>ie,Y:()=>j,$m:()=>oe,Ur:()=>H,Nj:()=>L,AR:()=>V,SA:()=>Q});var t=e(53768),n=e(30471),o=e(2703),s=e(56632),l=e(23588),f=e(99098),d=e(69098),r=e(99601),c=e(92103),a=e(17587),u=e(85596),i=e(40538),p=e(13347),g=e(72269),y=e(45778),E=e(45389),h=e(2445),v=e(75974),C=e(5680),m=e(28586),D=e(60892);const{round:P,min:b,ceil:M}=Math,x=2;let A=6;const T=m.Gj;function S(de,ce,ee,le,q){(0,m.Qm)(ee,de,T,ce,(fe,Z,ne)=>{let re=le*Z,ve=le*ne;q(fe,re,ve)})}function U(de){const{mode:ce,numSeries:ee,isDiscrete:le,hasMappedNull:q,rowHeight:fe=0,colWidth:Z=0,showValue:ne,mergeValues:re=!1,theme:ve,label:me,formatValue:Ie,alignValue:Ge="left",getTimeRange:gt,getValueColor:Te,getFieldConfig:Le,onHover:Ye,onLeave:it}=de;let ht;const Re=Array(ee).fill(null).map(()=>{let Je=document.createElement("div");return Je.classList.add("bar-mark"),Je.style.position="absolute",Je.style.background="rgba(255,255,255,0.2)",Je});let ye;const Ce=Je=>{ye=Array(ee).fill(null).map(Dt=>Array(Je).fill(null))},be=`500 ${Math.round(12*devicePixelRatio)}px ${ve.typography.fontFamily}`,We=Array(ee).fill(null),Qe=[Z,1/0],mt=1-Qe[0],vt=(Qe[1]??1/0)*v.Z.pxRatio,rt=new Map,Ot=new Map;function Et(Je){rt.forEach((Dt,Ve)=>{Je.fillStyle=Ve,Je.fill(Dt)}),Ot.forEach((Dt,Ve)=>{Je.strokeStyle=Ve,Je.stroke(Dt)}),rt.clear(),Ot.clear()}function Mt(Je,Dt,Ve,Xe,st,ut,xt,Kt,Jt,On,Nn,jn,ya){if(xt<1)return;const Lt=Te(On+1,jn),ft=Le(On),Ht=R(ft,Lt);if(ye[On][Nn]={x:P(st-Ve),y:P(ut-Xe),w:xt,h:Kt,sidx:On+1,didx:Nn,fillColor:Ht},ya){let $t=Ht,zt=rt.get($t);if(zt==null&&rt.set($t,zt=new Path2D),Dt(zt,st,ut,xt,Kt),Jt){let Wt=Lt,jt=Ot.get(Wt);jt==null&&Ot.set(Wt,jt=new Path2D),Dt(jt,st+Jt/2,ut+Jt/2,xt-Jt,Kt-Jt)}}else Je.beginPath(),Dt(Je,st,ut,xt,Kt),Je.fillStyle=Ht,Je.fill(),Jt&&(Je.beginPath(),Dt(Je,st+Jt/2,ut+Jt/2,xt-Jt,Kt-Jt),Je.strokeStyle=Lt,Je.lineWidth=Jt,Je.stroke())}const ue=(Je,Dt,Ve,Xe)=>(v.Z.orient(Je,Dt,(st,ut,xt,Kt,Jt,On,Nn,jn,ya,Lt,ft,Ht,$t,zt)=>{let Wt=P((st.width||0)*v.Z.pxRatio),jt=le(Dt),sn=jt&&q(Dt);Je.ctx.save(),zt(Je.ctx,Je.bbox.left,Je.bbox.top,Je.bbox.width,Je.bbox.height),Je.ctx.clip(),S(fe,Dt-1,ee,ft,(pn,Pn,Mn)=>{if(ce===F.Changes)for(let Cn=0;Cn<xt.length;Cn++){let Hn=xt[Cn];if(Hn!=null||sn){let _n=Math.round(On(ut[Cn],Kt,Lt,jn)),oa=Cn;for(;++oa<xt.length&&(xt[oa]===void 0||re&&xt[oa]===Hn););let Gt=oa===xt.length?jn+Lt+Wt:Math.round(On(ut[oa],Kt,Lt,jn));Mt(Je.ctx,zt,jn,ya,_n,P(ya+Pn),Gt-_n,P(Mn),Wt,pn,Cn,Hn,jt),Cn=oa-1}}else if(ce===F.Samples){let Cn=On(ut[1],Kt,Lt,jn)-On(ut[0],Kt,Lt,jn),Hn=Cn*mt,_n=P(b(vt,Cn-Hn)-Wt),oa=_n/2;for(let Gt=Ve;Gt<=Xe;Gt++){let Bt=xt[Gt];if(Bt!=null||sn){let on=On(ut[Gt],Kt,Lt,jn);Mt(Je.ctx,zt,jn,ya,P(on-oa),P(ya+Pn),_n,P(Mn),Wt,pn,Gt,Bt,jt)}}}}),jt&&(Je.ctx.lineWidth=Wt,Et(Je.ctx)),Je.ctx.restore()}),null),De=Ie==null||ne===i.Jp.Never?!1:(Je,Dt,Ve,Xe)=>(Je.ctx.save(),Je.ctx.rect(Je.bbox.left,Je.bbox.top,Je.bbox.width,Je.bbox.height),Je.ctx.clip(),Je.ctx.font=be,Je.ctx.textAlign=ce===F.Changes?Ge:"center",Je.ctx.textBaseline="middle",v.Z.orient(Je,Dt,(st,ut,xt,Kt,Jt,On,Nn,jn,ya,Lt,ft)=>{let Ht=P((st.width||0)*v.Z.pxRatio),zt=le(Dt)&&q(Dt),Wt=P(ya+lt[Dt-1]);for(let jt=0;jt<xt.length;jt++)if(xt[jt]!=null||zt){const sn=ye[Dt-1][jt];if(!sn||sn.x>=Lt)continue;let pn=Math.floor(sn?.w/A);if(ne===i.Jp.Auto&&pn<2)continue;let Pn=Ie(Dt,xt[jt]),Mn=P(sn.x+jn+sn.w/2);ce===F.Changes&&(Ge==="left"?Mn=P(sn.x+jn+Ht+x):Ge==="right"&&(Mn=P(sn.x+jn+sn.w-Ht-x))),Je.ctx.fillStyle=ve.colors.getContrastText(sn.fillColor,3),Je.ctx.fillText(Pn.slice(0,pn),Mn,Wt)}}),Je.ctx.restore(),!1),Ne=Je=>{let Dt=Je.over,Ve="";for(let Xe=32;Xe<=126;Xe++)Ve+=String.fromCharCode(Xe);A=Math.ceil(Je.ctx.measureText(Ve).width/Ve.length*v.Z.pxRatio),A+=2.5,Dt.style.overflow="hidden",Re.forEach(Xe=>{Dt.appendChild(Xe)})},tt=Je=>{ht=ht||new D.lW(0,0,Je.bbox.width,Je.bbox.height),ht.clear(),Ce(Je.data[0].length),Je.series.forEach(Dt=>{Dt._paths=null})};function et(Je,Dt){let Ve=Re[Je],Xe=v.Z.pxRatio;Dt?(Ve.style.display="",Ve.style.left=P(Dt.x/Xe)+"px",Ve.style.top=P(Dt.y/Xe)+"px",Ve.style.width=P(Dt.w/Xe)+"px",Ve.style.height=P(Dt.h/Xe)+"px"):Ve.style.display="none",We[Je]=Dt}let Ue;function Fe(Je,Dt){let Ve;for(let Xe=0;Xe<ee;Xe++){let st;if(Je>=0){let ut=lt[Xe];ht.get(Je,ut,1,1,xt=>{(0,D.Pn)(Je,ut,xt.x,xt.y,xt.x+xt.w,xt.y+xt.h)&&(st=xt,Math.abs(Dt-ut)<=xt.h/2&&(Ve=xt))})}st?st!==We[Xe]&&et(Xe,st):We[Xe]!=null&&et(Xe,null)}Ve?Ve!==Ue&&(Ue=Ve,Ye(Ve.sidx,Ve.didx,Ve)):Ue&&(Ue=void 0,it())}function Ee(Je,Dt){let Ve;ht.get(Je,Dt,1,1,Xe=>{(0,D.Pn)(Je,Dt,Xe.x,Xe.y,Xe.x+Xe.w,Xe.y+Xe.h)&&(Ve=Xe)}),Ve?(et(0,Ve),Ve!==Ue&&(Ue=Ve,Ye(Ve.sidx,Ve.didx,Ve))):Ue&&(et(0,null),Ue=void 0,it())}const Me=ce===F.Changes?Fe:Ee,He=Je=>{let Dt=P(Je.cursor.left*v.Z.pxRatio),Ve=P(Je.cursor.top*v.Z.pxRatio);if(!ht.o.length&&ht.q==null)for(const Xe of ye)for(const st of Xe)st&&ht.add(st);Me(Dt,Ve)},Ze={y:!1,x:ce===F.Changes,points:{show:!1}},lt=Array(ee).fill(0),bt=Array(ee).fill(0),Pt=[0,1];return{cursor:Ze,xSplits:ce===F.Samples?(Je,Dt,Ve,Xe,st,ut)=>{let xt=[],Kt=Je.data[0][1]-Je.data[0][0],Jt=M(st/Kt);for(let On=0;On<Je.data[0].length;On+=Jt){let Nn=Je.data[0][On];Nn>=Ve&&Nn<=Xe&&xt.push(Nn)}return xt}:null,xRange:Je=>{const Dt=gt();let Ve=Dt.from.valueOf(),Xe=Dt.to.valueOf();if(ce===F.Samples){let xt=(Je.data[0][1]-Je.data[0][0])/2;Ve<=Je.data[0][0]&&(Ve=Je.data[0][0]-xt);let Kt=Je.data[0].length-1;Xe>=Je.data[0][Kt]&&(Xe=Je.data[0][Kt]+xt)}return[Ve,Xe]},ySplits:Je=>(S(fe,null,ee,Je.bbox.height,(Dt,Ve,Xe)=>{lt[Dt]=P(Ve+Xe/2),bt[Dt]=Je.posToVal(lt[Dt]/v.Z.pxRatio,g.j)}),bt),yValues:(Je,Dt)=>Dt.map((Ve,Xe)=>me(Xe+1)),yRange:Pt,drawPaths:ue,drawPoints:De,init:Ne,drawClear:tt,setCursor:He}}function R(de,ce){if(ce[0]==="#"&&ce.length===9)return ce;const ee=(de.fillOpacity??100)/100;return(0,C.alpha)(ce,ee)}var F=(de=>(de.Changes="changes",de.Samples="samples",de))(F||{});const B={lineWidth:0,fillOpacity:80};function K(de){return de.ctrlKey||de.metaKey||de.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const L=({frame:de,theme:ce,timeZones:ee,getTimeRange:le,mode:q,eventBus:fe,sync:Z,rowHeight:ne,colWidth:re,showValue:ve,alignValue:me,mergeValues:Ie,getValueColor:Ge})=>{const gt=new p.U(ee[0]),Te="time",Le="x",Ye=rt=>{const Ot=rt.config?.color?.mode;return!(Ot&&rt.display&&Ot.startsWith("continuous-"))},it=rt=>rt.config.mappings?.some(Ot=>Ot.type===u.Hi.SpecialValue&&Ot.options.match==="null")||!1,ht=(rt,Ot)=>{const Et=de.fields[rt];return Et.state?.origin?.fieldIndex!==void 0&&Et.state?.origin?.frameIndex!==void 0&&Ge?Ge(Et.state?.origin?.frameIndex,Et.state?.origin?.fieldIndex,Ot):t.R},Re={mode:q,numSeries:de.fields.length-1,isDiscrete:rt=>Ye(de.fields[rt]),hasMappedNull:rt=>it(de.fields[rt]),mergeValues:Ie,rowHeight:ne,colWidth:re,showValue:ve,alignValue:me,theme:ce,label:rt=>(0,n.CZ)(de.fields[rt],de),getFieldConfig:rt=>de.fields[rt].config.custom,getValueColor:ht,getTimeRange:le,formatValue:(rt,Ot)=>(0,o.zc)(de.fields[rt].display(Ot)),onHover:(rt,Ot)=>{Ce=rt,be=Ot,ye=!0},onLeave:()=>{Ce=null,be=null,ye=!0}};let ye=!1,Ce=null,be=null;const We=U(Re),Qe={point:{[Te]:null,[g.j]:null},data:de};gt.addHook("init",We.init),gt.addHook("drawClear",We.drawClear),gt.addHook("setCursor",We.setCursor);const mt=(rt,Ot,Et)=>{ye&&(Ce!=null&&(rt(Ce),Ot(be)),ye=!1),Et(Ce==null)};gt.setTooltipInterpolator(mt),gt.setPrepData(rt=>(0,h.Bj)(rt[0],(0,h.i7)(rt[0]))),gt.setCursor(We.cursor),gt.addScale({scaleKey:Le,isTime:!0,orientation:i.wN.Horizontal,direction:i.bQ.Right,range:We.xRange}),gt.addScale({scaleKey:g.j,isTime:!1,orientation:i.wN.Vertical,direction:i.bQ.Up,range:We.yRange}),gt.addAxis({scaleKey:Le,isTime:!0,splits:We.xSplits,placement:i.LB.Bottom,timeZone:ee[0],theme:ce,grid:{show:!0}}),gt.addAxis({scaleKey:g.j,isTime:!1,placement:i.LB.Left,splits:We.ySplits,values:We.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:ce});let vt=0;for(let rt=0;rt<de.fields.length;rt++){if(rt===0)continue;const Ot=de.fields[rt],Et=Ot.config,Mt={...B,...Et.custom};Ot.state.seriesIndex=vt++,gt.addSeries({scaleKey:g.j,pathBuilder:We.drawPaths,pointsBuilder:We.drawPoints,lineWidth:Mt.lineWidth,fillOpacity:Mt.fillOpacity,theme:ce,show:!Mt.hideFrom?.viz,thresholds:Et.thresholds,dataFrameFieldIndex:Ot.state?.origin})}if(Z&&Z()!==s.m.Off){let rt={};rt.sync={key:"__global_",filters:{pub:(Ot,Et,Mt,ue,De,Ne,tt)=>Z&&Z()===s.m.Off?!1:(Qe.rowIndex=tt,Mt<0&&ue<0?(Qe.point[Te]=null,Qe.point[g.j]=null,fe.publish(new l.xH)):(Qe.point[Te]=Et.posToVal(Mt,Le),Qe.point.panelRelY=ue>0?ue/Ne:1,Qe.down=void 0,fe.publish(new l.es(Qe))),!0)},scales:[Le,null]},gt.setSync(),gt.setCursor(rt)}return gt};function N(de){const ce=new Map;for(let ee=0;ee<de.fields.length;ee++)ce.set(getFieldDisplayName(de.fields[ee],de),ee);return ce}function z(de){let ce=de[0],ee;for(let le=1;le<de.length;le++){let q=de[le];q===null?ce=null:q===ce?(ee||(ee=[...de]),ee[le]=void 0):q!=null&&(ce=q)}return ee}function G(de){let ce=de.config.custom?.spanNulls;return ce?ce===!0?1/0:ce:-1}function I(de,ce){const ee=de.config.thresholds;if(de.type!==f.fS.number||!ee||!ee.steps.length)return;const le=H(de.config,ce);if(le.length!==ee.steps.length)return;const q=new Map,fe=new Map;for(let re=0;re<le.length;re++)q.set(ee.steps[re],le[re].label),fe.set(le[re].label,le[re].color);let Z=de.values;const ne=new Array(de.values.length);if(ee.mode===d.H.Percentage){const{min:re,max:ve}=(0,r.xD)(de),me=ve-re;Z=Z.map(Ie=>Ie==null?Ie:(Ie-re)/me*100)}for(let re=0;re<ne.length;re++){const ve=Z[re];ve==null?ne[re]=ve:ne[re]=q.get((0,c.m1)(ve,ee.steps))}return{...de,config:{...de.config,custom:{...de.config.custom,spanNulls:G(de)}},type:f.fS.string,values:ne,display:re=>({text:String(re),color:fe.get(String(re)),numeric:NaN})}}function V(de,ce,ee,le){if(!de?.length)return{warn:"No data in response"};let q=!1;const fe=[];for(let Z of de){let ne=!1,re=!1,ve=(0,a.Y3)(Z,Z.fields.findIndex(Ge=>Ge.type===f.fS.time)),me=(0,y.w)({frame:ve,refFieldPseudoMin:ee.from.valueOf(),refFieldPseudoMax:ee.to.valueOf()});me!==Z&&(re=!0);const Ie=[];for(let Ge of(0,E.I)(me).fields)switch(Ge.type){case f.fS.time:ne=!0,q=!0,Ie.push(Ge);break;case f.fS.number:if(ce&&Ge.config.color?.mode===t.S.Thresholds){const gt=I(Ge,le);if(gt){Ie.push(gt),re=!0;continue}}case f.fS.boolean:case f.fS.string:Ge={...Ge,config:{...Ge.config,custom:{...Ge.config.custom,spanNulls:G(Ge)}}},Ie.push(Ge);break;default:re=!0}ne&&Ie.length>1&&(q=!0,re?fe.push({...ve,fields:Ie}):fe.push(ve))}return q?fe.length?{frames:fe}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function H(de,ce){const ee=[],le=de.thresholds;if(!le||!le.steps.length)return ee;const q=le.steps,fe=(0,o.Cf)(le.mode===d.H.Percentage?"percent":de.unit??""),Z=ne=>(0,o.zc)(fe(ne));for(let ne=0;ne<q.length;ne++){let re=q[ne],ve=re.value,me="",Ie="";ve===-1/0&&ne<q.length-1?(ve=q[ne+1].value,me="< "):Ie="+",ee.push({label:`${me}${Z(ve)}${Ie}`,color:ce.visualization.getColorByName(re.color),yAxis:1})}return ee}function Q(de,ce,ee){if(!(!de||ce.showLegend===!1))return oe(se(de),ee)}function oe(de,ce){if(!de.length)return;const ee=[],le=de[0].config,q=le.color?.mode??t.S.Fixed,fe=le.thresholds;if(q===t.S.Thresholds&&fe?.steps&&fe.steps.length>1)return H(le,ce);if(q.startsWith("continuous"))return;let Z=new Map;return de.forEach(ne=>{ne.values.forEach(re=>{let ve=ne.display(re);ve.color&&Z.set(ve.text,ve.color)})}),Z.forEach((ne,re)=>{re.length>0&&ee.push({label:re,color:ce.visualization.getColorByName(ne??t.R),yAxis:1})}),ee}function se(de){const ce=[];for(const ee of de)for(const le of ee.fields)le.type!==f.fS.time&&ce.push(le);return ce}function ie(de,ce){let ee,le=ce+1;if(le>=de.values.length)return null;const q=de.values[ce];for(;ee===void 0;){if(le>=de.values.length)return null;const fe=de.values[le];fe===void 0||fe===q?le++:ee=le}return ee}function j(de){if(de<0||Number.isNaN(de))return"";let ce,ee,le,q,fe,Z,ne,re;return ne=Math.floor(de/1e3),Z=Math.floor(ne/60),ne=ne%60,fe=Math.floor(Z/60),Z=Z%60,q=Math.floor(fe/24),fe=fe%24,ce=Math.floor(q/365),ce>0&&(q=q%365),ee=Math.floor(q/30),ee>0&&(q=q%30),le=Math.floor(q/7),le>0&&(q=q%7),re=Math.round(de%1e3*1e3)/1e3,(ce>0?ce+"y "+(ee>0?ee+"mo ":"")+(le>0?le+"w ":"")+(q>0?q+"d ":""):ee>0?ee+"mo "+(le>0?le+"w ":"")+(q>0?q+"d ":""):le>0?le+"w "+(q>0?q+"d ":""):q>0?q+"d "+(fe>0?fe+"h ":""):fe>0?fe+"h "+(Z>0?Z+"m ":""):Z>0?Z+"m "+(ne>0?ne+"s ":""):ne>0?ne+"s "+(re>0?re+"ms ":""):re>0?re+"ms ":"0").trim()}},33045:(Y,O,e)=>{"use strict";e.d(O,{a:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(58564),l=e(77117),f=e(39904);const d=({values:c,onChange:a,id:u})=>{const i=(0,o.wW)(r);return n.createElement("div",{className:i.wrapper},c.length?c.map((p,g)=>n.createElement("div",{className:i.pair,key:g},n.createElement(s.X,{id:`${u}-key-${g}`,placeholder:"Tag name",value:p.key,onChange:y=>{a(c.map((E,h)=>(h===g&&(E.key=String(y)),E)))}}),n.createElement(l.W,{"aria-label":"equals",className:i.operator},"as"),n.createElement(s.X,{id:`${u}-value-${g}`,placeholder:"New name (optional)",value:p.value||"",onChange:y=>{a(c.map((E,h)=>(h===g&&(E.value=String(y)),E)))}}),n.createElement("button",{onClick:()=>a([...c.slice(0,g),...c.slice(g+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(f.J,{name:"times"})),g===c.length-1?n.createElement("button",{onClick:()=>a([...c,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>a([...c,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})))},r=c=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${c.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${c.v1.palette.orange};
    width: auto;
  `})},83437:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>i,p:()=>u});var t=e(9892),n=e(66111),o=e(53117),s=e(72648),l=e(11543),f=e(81764),d=e(8944),r=e(46967),c=e(62911),a=e(33045);function u(E){if(E?.tracesToLogsV2)return E.tracesToLogsV2;if(!E?.tracesToLogs)return;const h={customQuery:!1};return h.datasourceUid=E.tracesToLogs.datasourceUid,h.tags=E.tracesToLogs.mapTagNamesEnabled?E.tracesToLogs.mappedTags:E.tracesToLogs.tags?.map(v=>({key:v})),h.filterByTraceID=E.tracesToLogs.filterByTraceID,h.filterBySpanID=E.tracesToLogs.filterBySpanID,h.spanStartTimeShift=E.tracesToLogs.spanStartTimeShift,h.spanEndTimeShift=E.tracesToLogs.spanEndTimeShift,h}function i({options:E,onOptionsChange:h}){const v=(0,s.wW)(y),C=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource"],m=(0,n.useMemo)(()=>u(E.jsonData)||{customQuery:!1},[E.jsonData]),{query:D="",tags:P,customQuery:b}=m,M=(0,n.useCallback)(x=>{h({...E,jsonData:{...E.jsonData,tracesToLogsV2:{...m,...x},tracesToLogs:void 0}})},[h,E,m]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:v.infoText},"Navigate from a trace span to the selected data source's logs",n.createElement(c.j,{hrefSuffix:`${E.type}/#trace-to-logs`})),n.createElement(l.Z,null,n.createElement(f._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(o.q,{inputId:"trace-to-logs-data-source-picker",filter:x=>C.includes(x.type),current:m.datasourceUid,noDefault:!0,width:40,onChange:x=>M({datasourceUid:x.uid})}))),n.createElement(g,{type:"start",value:m.spanStartTimeShift||"",onChange:x=>M({spanStartTimeShift:x})}),n.createElement(g,{type:"end",value:m.spanEndTimeShift||"",onChange:x=>M({spanEndTimeShift:x})}),n.createElement(l.Z,null,n.createElement(f._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(a.a,{values:P??[],onChange:x=>M({tags:x})}))),n.createElement(p,{disabled:b,type:"trace",id:"filterByTraceID",value:Boolean(m.filterByTraceID),onChange:x=>M({filterByTraceID:x})}),n.createElement(p,{disabled:b,type:"span",id:"filterBySpanID",value:Boolean(m.filterBySpanID),onChange:x=>M({filterBySpanID:x})}),n.createElement(l.Z,null,n.createElement(f._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(d.x,{id:"customQuerySwitch",value:b,onChange:x=>M({customQuery:x.currentTarget.checked})}))),b&&n.createElement(f._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(r.I,{label:"Query",type:"text",allowFullScreen:!0,value:D,onChange:x=>M({query:x.currentTarget.value})})))}function p(E){return n.createElement(l.Z,null,n.createElement(f._,{disabled:E.disabled,label:`Filter by ${E.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${E.type} ID`},n.createElement(d.x,{id:E.id,value:E.value,onChange:h=>E.onChange(h.currentTarget.checked)})))}function g(E){return n.createElement(l.Z,null,n.createElement(f._,{label:`Span ${E.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${E.type} time of the span. Default: 0 (Time units can be used here, for example: 5s, -1m, 3h)`},n.createElement(r.I,{type:"text",placeholder:"0",width:40,onChange:h=>E.onChange(h.currentTarget.value),value:E.value})))}const y=E=>({infoText:t.css`
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `})},73194:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>l});var t=e(9892),n=e(66111),o=e(41818),s=e(72648);const l=({text:d="PRO",className:r,experimentId:c,eventVariant:a="",...u})=>{const i=(0,s.wW)(f);return(0,n.useEffect)(()=>{c&&(0,o.SZ)(c,"test",a)},[c,a]),n.createElement("span",{className:(0,t.cx)(i.badge,r),...u},d)},f=d=>({badge:t.css`
      margin-left: ${d.spacing(1.25)};
      border-radius: ${d.shape.borderRadius(5)};
      background-color: ${d.colors.success.main};
      padding: ${d.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${d.typography.fontWeightMedium};
      font-size: ${d.typography.pxToRem(10)};
    `})},39284:(Y,O,e)=>{"use strict";e.d(O,{TA:()=>c,Xz:()=>d,tM:()=>u});var t=e(9892),n=e(66111),o=e(41818),s=e(72648),l=e(39904),f=e(31403);const d=({featureName:g,className:y,children:E,text:h,featureId:v,eventVariant:C="",size:m="md",...D})=>{const P=(0,s.wW)(b=>r(b,m));return(0,n.useEffect)(()=>{(0,o.SZ)(`feature-highlights-${v}`,"test",C)},[C,v]),n.createElement("div",{className:(0,t.cx)(P.box,y),...D},n.createElement(l.J,{name:"rocket",className:P.icon}),n.createElement("div",{className:P.inner},n.createElement("p",{className:P.text},"You\u2019ve discovered a Pro feature! ",h||`Get the Grafana Pro plan to access ${g}.`),n.createElement(f.Qj,{variant:"secondary",size:m,className:P.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer"},"Upgrade")))},r=(g,y)=>{const E=g.shape.borderRadius(2),h=y==="md"?"body":"bodySmall";return{box:t.css`
      display: flex;
      align-items: center;
      position: relative;
      border-radius: ${E};
      background: ${g.colors.success.transparent};
      padding: ${g.spacing(2)};
      color: ${g.colors.success.text};
      font-size: ${g.typography[h].fontSize};
      text-align: left;
      line-height: 16px;
      margin: ${g.spacing(0,"auto",3,"auto")};
      max-width: ${g.breakpoints.values.xxl}px;
      width: 100%;
    `,inner:t.css`
      display: flex;
      align-items: center;
      width: 100%;
      justify-content: space-between;
    `,text:t.css`
      margin: 0;
    `,button:t.css`
      background-color: ${g.colors.success.main};
      font-weight: ${g.typography.fontWeightLight};
      color: white;

      &:hover {
        background-color: ${g.colors.success.main};
      }

      &:focus-visible {
        box-shadow: none;
        color: ${g.colors.text.primary};
        outline: 2px solid ${g.colors.primary.main};
      }
    `,icon:t.css`
      margin: ${g.spacing(.5,1,.5,.5)};
    `}},c=({listItems:g,image:y,featureUrl:E,featureName:h,description:v,caption:C,action:m})=>{const D=(0,s.wW)(a);return n.createElement("div",{className:D.container},n.createElement("div",{className:D.content},n.createElement("h3",{className:D.title},"Get started with ",h),v&&n.createElement("h6",{className:D.description},v),n.createElement("ul",{className:D.list},g.map((P,b)=>n.createElement("li",{key:b},n.createElement(l.J,{name:"check",size:"xl",className:D.icon})," ",P))),m?.link&&n.createElement(f.Qj,{variant:"primary",href:m.link},m.text),m?.onClick&&n.createElement(f.zx,{variant:"primary",onClick:m.onClick},m.text),E&&n.createElement(f.Qj,{fill:"text",href:E,className:D.link,target:"_blank",rel:"noreferrer noopener"},"Learn more")),n.createElement("div",{className:D.media},n.createElement("img",{src:p(y),alt:"Feature screenshot"}),C&&n.createElement("p",{className:D.caption},C)))},a=g=>({container:t.css`
      display: flex;
      justify-content: space-between;
    `,content:t.css`
      width: 45%;
      margin-right: ${g.spacing(4)};
    `,media:t.css`
      width: 55%;

      img {
        width: 100%;
      }
    `,title:t.css`
      color: ${g.colors.text.maxContrast};
    `,description:t.css`
      color: ${g.colors.text.primary};
      font-weight: ${g.typography.fontWeightLight};
    `,list:t.css`
      list-style: none;
      margin: ${g.spacing(4,0,2,0)};

      li {
        display: flex;
        align-items: flex-start;
        color: ${g.colors.text.primary};
        padding: ${g.spacing(1,0)};
      }
    `,icon:t.css`
      color: ${g.colors.success.main};
      margin-right: ${g.spacing(1)};
    `,link:t.css`
      margin-left: ${g.spacing(2)};
    `,caption:t.css`
      font-weight: ${g.typography.fontWeightLight};
      margin: ${g.spacing(1,0,0)};
    `}),u=({featureName:g,description:y,featureUrl:E,image:h})=>{const v=(0,s.wW)(i);return n.createElement("div",{className:v.container},n.createElement("h3",{className:v.title},"Get started with ",g),y&&n.createElement("h6",{className:v.description},y),n.createElement(f.Qj,{fill:"text",href:E,target:"_blank",rel:"noreferrer noopener"},"Learn more"),n.createElement("div",{className:v.media},n.createElement("img",{src:p(h),alt:"Feature screenshot"})))},i=g=>({container:t.css`
      overflow: auto;
      height: 100%;
    `,title:t.css`
      color: ${g.colors.text.maxContrast};
    `,description:t.css`
      color: ${g.colors.text.primary};
      font-weight: ${g.typography.fontWeightLight};
    `,media:t.css`
      width: 100%;
      margin-top: ${g.spacing(2)};

      img {
        width: 100%;
      }
    `}),p=g=>g.startsWith("http")?g:"/public/img/enterprise/highlights/"+g},41197:(Y,O,e)=>{"use strict";e.d(O,{B:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(35029),l=e(43226);const f=c=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","d"],description:"Go to Dashboards"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:[`${c} + k`],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${c}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${c} + o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),d=({onDismiss:c})=>{const a=(0,o.wW)(r),u=(0,n.useMemo)(()=>(0,l.vl)(),[]),i=(0,n.useMemo)(()=>f(u),[u]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:c,onClickBackdrop:c},n.createElement("div",{className:a.categories},Object.entries(i).map(([p,g],y)=>n.createElement("div",{className:a.shortcutCategory,key:y},n.createElement("table",{className:a.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:a.shortcutTableCategoryHeader,colSpan:2},p)),g.map((E,h)=>n.createElement("tr",{key:`${y}-${h}`},n.createElement("td",{className:a.shortcutTableKeys},E.keys.map((v,C)=>n.createElement("span",{className:a.shortcutTableKey,key:`${y}-${h}-${C}`},v))),n.createElement("td",{className:a.shortcutTableDescription},E.description)))))))))};function r(c){return{titleDescription:t.css`
      font-size: ${c.typography.bodySmall.fontSize};
      font-weight: ${c.typography.bodySmall.fontWeight};
      color: ${c.colors.text.disabled};
      padding-bottom: ${c.spacing(2)};
    `,categories:t.css`
      font-size: ${c.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${c.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${c.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${c.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${c.colors.text.disabled};
      width: 99%;
      padding: ${c.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${c.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${c.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${c.colors.border.medium};
      border-radius: ${c.shape.borderRadius(3)};
      color: ${c.colors.text.primary};
      background-color: ${c.colors.background.secondary};
    `}}},47694:(Y,O,e)=>{"use strict";e.d(O,{Oh:()=>d,ZP:()=>s,iE:()=>l,vc:()=>n.v});var t=e(59250),n=e(35645);let o=n.v;const s=o,l=()=>o,f=r=>{o={...o,...r}},d=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(Y,O,e)=>{"use strict";e.d(O,{AV:()=>r,FL:()=>p,K3:()=>t,OA:()=>s,QO:()=>a,b0:()=>d,cz:()=>o,gN:()=>i,hD:()=>n,kh:()=>f,yM:()=>l,zF:()=>c});const t=30,n=8,o=24,s="v",l="h",f=4,d=250,r=t*3,c="panel-copy",a=2,u=23763571993,i=40,p="VisualizationSelectPane.ListMode"},34177:(Y,O,e)=>{"use strict";e.d(O,{h:()=>n,p:()=>o});var t=e(66111);const n=t.createContext(void 0);function o(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(Y,O,e)=>{"use strict";e.d(O,{AT:()=>c,ZR:()=>u,iG:()=>i,t_:()=>a});var t=e(66111),n=e(44288),o=e(82052),s=e(27876),l=e(659);const f={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},d={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},r={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},c=(p,g="",y)=>({...f,title:p,text:g,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),a=(p,g="",y,E)=>({...r,text:(0,o.i)(g),title:p,id:(0,n.Z)(),traceId:y,component:E,timestamp:Date.now(),showing:!0}),u=(p,g="",y)=>({...d,title:p,text:g,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function i(){const p=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(g,y="")=>{p((0,l.$l)(c(g,y)))},warning:(g,y="",E)=>{p((0,l.$l)(u(g,y,E)))},error:(g,y="",E)=>{p((0,l.$l)(a(g,y,E)))}}),[p])}},77582:(Y,O,e)=>{"use strict";e.d(O,{Vt:()=>o.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(18271),n=e(29494),o=e(82002),s=e(4050)},3258:(Y,O,e)=>{"use strict";e.d(O,{H6:()=>E,ZP:()=>h});var t=e(82897),n=e(58379),o=e(50395),s=e(86647);const l=A=>{const T=(0,s.F)().getInstanceSettings(A.datasourceName);return{id:A.ts.toString(),createdAt:A.ts,datasourceName:A.datasourceName,datasourceUid:T?.uid||"",starred:A.starred,comment:A.comment,queries:A.queries}},f=A=>{if(!(0,s.F)().getInstanceSettings({uid:A.datasourceUid}))throw new Error("Datasource not found.");return{ts:A.createdAt,datasourceName:A.datasourceName,starred:A.starred,comment:A.comment,queries:A.queries}};var d=e(43823);function r(A,T,S,U,R){const F=u(A,S),B=i(F,U),K=R?a(B,R):B;return p(K,T)}const c=(A,T)=>{const S=new Date,U=new Date(S.setDate(S.getDate()-A));return T?U.setHours(24,0,0,0):U.setHours(0,0,0,0)};function a(A,T){const S=c(T[0],!0),U=c(T[1],!1);return A.filter(R=>R.createdAt<S&&R.createdAt>U)}function u(A,T){return T.length>0?A.filter(S=>T.includes(S.datasourceName)):A}function i(A,T){return A.filter(S=>S.comment.includes(T)?!0:S.queries.filter(R=>Object.values((0,t.omit)(R,["datasource","key","refId","hide","queryType"])).some(F=>F?.toString().includes(T))).length>0)}const p=(A,T)=>{let S;return T===d.A.Ascending&&(S=(U,R)=>U.createdAt<R.createdAt?-1:U.createdAt>R.createdAt?1:0),T===d.A.Descending&&(S=(U,R)=>U.createdAt<R.createdAt?1:U.createdAt>R.createdAt?-1:0),T===d.A.DatasourceZA&&(S=(U,R)=>U.datasourceName<R.datasourceName?-1:U.datasourceName>R.datasourceName?1:0),T===d.A.DatasourceAZ&&(S=(U,R)=>U.datasourceName<R.datasourceName?1:U.datasourceName>R.datasourceName?-1:0),A.sort(S)},g={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},y="grafana.explore.richHistory",E=1e4;class h{async getRichHistory(T){const S=D().map(l),U=T.starred?S.filter(F=>F.starred===!0):S,R=r(U,T.sortOrder,T.datasourceFilters,T.search,[T.from,T.to]);return{richHistory:R,total:R.length}}async addToRichHistory(T){const S=Date.now(),U={id:S.toString(),createdAt:S,...T},R=f(U),F=C(D()),B=R.queries.map(G=>(0,t.omit)(G,["key","refId"])),K=F.length>0&&F[0].queries.map(G=>(0,t.omit)(G,["key","refId"]));if((0,t.isEqual)(B,K)){const G=new Error("Entry already exists");throw G.name=o.j.DuplicatedEntry,G}const{queriesToKeep:L,limitExceeded:N}=m(F),z=[R,...L];try{n.Z.setObject(y,z)}catch(G){if(G instanceof Error&&G.name==="QuotaExceededError")x(o.j.StorageFull,`Saving rich history failed: ${G.message}`);else throw G}return N?{warning:{type:o.V.LimitExceeded,message:`Query history reached the limit of ${E}. Old, not-starred items have been removed.`},richHistoryQuery:U}:{richHistoryQuery:U}}async deleteAll(){n.Z.delete(y)}async deleteRichHistory(T){const S=parseInt(T,10),R=n.Z.getObject(y,[]).filter(F=>F.ts!==S);n.Z.setObject(y,R)}async updateStarred(T,S){return v(T,U=>U.starred=S)}async updateComment(T,S){return v(T,U=>U.comment=S)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(g.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(g.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(g.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(g.datasourceFilters,[]).map(T=>T.value)}}async updateSettings(T){n.Z.set(g.activeDatasourceOnly,T.activeDatasourceOnly),n.Z.set(g.retentionPeriod,T.retentionPeriod),n.Z.set(g.starredTabAsFirstTab,T.starredTabAsFirstTab),n.Z.setObject(g.datasourceFilters,(T.lastUsedDatasourceFilters||[]).map(S=>({value:S})))}}function v(A,T){const S=parseInt(A,10),U=n.Z.getObject(y,[]),R=(0,t.find)(U,{ts:S});if(!R)throw new Error("Rich history item not found.");return T(R),n.Z.setObject(y,U),l(R)}function C(A){const T=n.Z.getObject(g.retentionPeriod,7),S=c(T,!1);return A.filter(U=>U.ts>S||U.starred===!0)||[]}function m(A){let T=!1,S=A.length-1;for(;S>=0&&A.length>=E;)A[S].starred||(A.splice(S,1),T=!0),S--;return{queriesToKeep:A,limitExceeded:T}}function D(){const A=n.Z.getObject(y,[]);return P(A)}function P(A){return A.map(S=>{const U=S.queries.map((R,F)=>b(S,R,F));return{...S,queries:U}})}function b(A,T,S){const U="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof T=="object"?T:M(T)?JSON.parse(T):{expr:T,refId:U[S]}}function M(A){try{JSON.parse(A)}catch{return!1}return!0}function x(A,T){const S=new Error(T);throw S.name=A,S}},50395:(Y,O,e)=>{"use strict";e.d(O,{V:()=>n,j:()=>t});var t=(o=>(o.StorageFull="StorageFull",o.DuplicatedEntry="DuplicatedEntry",o))(t||{}),n=(o=>(o.LimitExceeded="LimitExceeded",o))(n||{})},4219:(Y,O,e)=>{"use strict";e.d(O,{b:()=>y,X:()=>E});var t=e(35645),n=e(77582),o=e(43823),s=e(3258),l=e(65583),f=e(54899),d=e(86647),r=e(42454);const c=h=>{const v=(0,d.F)().getInstanceSettings({uid:h.datasourceUid});return{id:h.uid,createdAt:h.createdAt*1e3,datasourceName:v?.name||"",datasourceUid:h.datasourceUid,starred:h.starred,comment:h.comment,queries:h.queries}},a=h=>({uid:h.id,createdAt:Math.floor(h.createdAt/1e3),datasourceUid:h.datasourceUid,starred:h.starred,comment:h.comment,queries:h.queries});class u{constructor(){this.preferenceService=new r.y("user")}async addToRichHistory(v){const{result:C}=await(0,f.i)().post("/api/query-history",{dataSourceUid:v.datasourceUid,queries:v.queries});return{richHistoryQuery:c(C)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(v){(0,f.i)().delete(`/api/query-history/${v}`)}async getRichHistory(v){const C=i(v);let m="query-history-get-all";v.starred&&(m="query-history-get-starred");const P=(await(0,l.n)((0,f.i)().fetch({method:"GET",url:`/api/query-history?${C}`,requestId:m}))).data,b=(P.result.queryHistory||[]).map(c),M=P.result.totalCount||0;return{richHistory:b,total:M}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(v,C){const m=await(0,f.i)().patch(`/api/query-history/${v}`,{comment:C});return c(m.result)}updateSettings(v){return this.preferenceService.patch({queryHistory:{homeTab:v.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(v,C){let m;return C?m=await(0,f.i)().post(`/api/query-history/star/${v}`):m=await(0,f.i)().delete(`/api/query-history/star/${v}`),c(m.result)}}function i(h){let v=`${h.datasourceFilters.map(C=>{const m=(0,d.F)().getInstanceSettings(C).uid;return`datasourceUid=${encodeURIComponent(m)}`}).join("&")}`;if(h.search&&(v=v+`&searchString=${h.search}`),h.sortOrder&&(v=v+`&sort=${h.sortOrder===o.A.Ascending?"time-asc":"time-desc"}`),!h.starred){const C=h.from===0?"now":`now-${h.from}d`,m=h.to===0?"now":`now-${h.to}d`;v=v+`&to=${C}`,v=v+`&from=${m}`}return v=v+"&limit=100",v=v+`&page=${h.page||1}`,h.starred&&(v=v+`&onlyStarred=${h.starred}`),v}const p=new s.ZP,g=new u,y=()=>t.v.queryHistoryEnabled?g:p,E=()=>t.v.queryHistoryEnabled?{availableFilters:[o.A.Descending,o.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[o.A.Descending,o.A.Ascending,o.A.DatasourceAZ,o.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(Y,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(66111),n=e(27876),o=e(70431);function s(l){const f=(0,n.useDispatch)(),d=(0,t.useRef)(l);d.current=l,(0,t.useEffect)(()=>()=>{f((0,o.e)({cleanupAction:d.current}))},[f])}},76770:(Y,O,e)=>{"use strict";e.d(O,{q:()=>o});var t=e(27876),n=e(86245);const o=s=>{const l=(0,t.useSelector)(f=>f.navIndex);return(0,n.ht)(l,s)}},96044:(Y,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(66111),n=e(56895),o=e(37932);function s(){const{search:l}=(0,n.TH)(),f=(0,t.useMemo)(()=>(0,o.Ox)(l||""),[l]),d=(0,t.useCallback)((r,c)=>o.E1.partial(r,c),[]);return[f,d]}},19719:(Y,O,e)=>{"use strict";e.d(O,{D_:()=>c,a2:()=>r,k$:()=>d});const t="en-US",n="fr-FR",o="es-ES",s="de-DE",l="zh-Hans",f="pseudo-LOCALE",d=t,r=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:o,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:l,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],c=r.map(a=>a.code)},35287:(Y,O,e)=>{"use strict";e.d(O,{$q:()=>i,cC:()=>c,t:()=>u,uC:()=>d});var t=e(97925),n=e(66111),o=e(80332),s=e(89880),l=e(19719);const f={type:"backend",init(){},async read(p,g,y){const E=l.a2.find(v=>v.code===p);if(!E)return y(new Error("No message loader available for "+p),null);const h=await E.loader();y(null,h)}};function d(p){const g=l.D_.includes(p)?p:l.k$;return u("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source"),t.ZP.use(f).use(o.Db).init({lng:g,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"})}function r(p){const g=VALID_LANGUAGES.includes(p)?p:DEFAULT_LANGUAGE;return i18n.changeLanguage(g)}const c=p=>n.createElement(s.c,{...p}),a=t.ZP.t,u=(p,g,y)=>a(p,g,y),i=(p,g={})=>{if(typeof p=="string")return i(new Date(p),g);const y=t.ZP.options.lng??l.k$;return new Intl.DateTimeFormat(y,g).format(p)}},20053:(Y,O,e)=>{"use strict";e.d(O,{Qp:()=>M,aB:()=>G,UW:()=>K,nu:()=>L,Nw:()=>N,Ce:()=>ee,Bz:()=>ce});var t=e(82897),n=e(84946),o=e(68114),s=e(49372),l=e(13787),f=e(40538),d=e(83881),r=e(5109),c=e(99098),a=e(53768),u=e(7569),i=e(67483),p=e(63418),g=e(77258),y=e(47891),E=e(52666),h=e(7897),v=e(16514),C=e(2525),m=e(47694);function D(q,fe){return m.ZP.bootData.user.lightTheme?fe:q}var P=e(81042);const b="Line limit",M="Common labels",x={[l.in.critical]:v.O9[7],[l.in.warning]:v.O9[1],[l.in.error]:v.O9[4],[l.in.info]:v.O9[0],[l.in.debug]:v.O9[5],[l.in.trace]:v.O9[2],[l.in.unknown]:D("#8e8e8e","#bdc4cd")},A=1,T=1e3*A,S=60*T,U=60*S,R=24*U,F=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function B(q,fe,Z){switch(Z){case f.Y4.exact:return q.entry.replace(F,"")===fe.entry.replace(F,"");case f.Y4.numbers:return q.entry.replace(/\d/g,"")===fe.entry.replace(/\d/g,"");case f.Y4.signature:return q.entry.replace(/\w/g,"")===fe.entry.replace(/\w/g,"");default:return!1}}function K(q,fe){return fe===f.Y4.none?q:q.reduce((Z,ne,re)=>{const ve={...ne},me=Z[Z.length-1];return re>0&&B(ne,me,fe)?me.duplicates++:(ve.duplicates=0,Z.push(ve)),Z},[])}function L(q,fe){return fe.size===0?q:q.filter(Z=>!fe.has(Z.logLevel))}function N(q,fe){const Z={},ne=[];for(const re of q){let ve=Z[re.logLevel];ve||(Z[re.logLevel]=ve={lastTs:null,datapoints:[],target:re.logLevel,color:x[re.logLevel]},ne.push(ve));const me=Math.floor(re.timeEpochMs/fe)*fe;me===ve.lastTs?ve.datapoints[ve.datapoints.length-1][0]++:(ve.datapoints.push([1,me]),ve.lastTs=me);for(const Ie of ne)Ie!==ve&&Ie.lastTs!==me&&(Ie.datapoints.push([0,me]),Ie.lastTs=me)}return ne.map((re,ve)=>{re.datapoints.sort((gt,Te)=>gt[1]-Te[1]);const me=(0,d.g0)(re),Ge=new r.N(me).getFirstFieldOfType(c.fS.number);return me.fields[Ge.index].config.min=0,me.fields[Ge.index].config.decimals=0,me.fields[Ge.index].config.color={mode:a.S.Fixed,fixedColor:re.color},me.fields[Ge.index].config.custom={drawStyle:f.l8.Bars,barAlignment:f.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:re.color,pointColor:re.color,fillColor:re.color,lineWidth:0,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}},me})}function z(q){return q.fields.some(fe=>fe.type===c.fS.time)&&q.fields.some(fe=>fe.type===c.fS.string)}function G(q,fe,Z,ne){const{logSeries:re}=V(q),ve=oe(re,ne);if(ve){if(fe&&ve.rows.length>0){const me=ve.rows.sort(P.DA),{visibleRange:Ie,bucketSize:Ge,visibleRangeMs:gt,requestedRangeMs:Te}=I(me,fe,Z);ve.visibleRange=Ie,ve.bucketSize=Ge,ve.series=N(me,Ge),ve.meta&&(ve.meta=ie(ve,gt,Te))}else ve.series=[];return ve.queries=ne,ve}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:ne}}function I(q,fe,Z,ne=20,re=1e3){let ve=Z,me=fe,Ie=Math.max(me*ne,re),Ge,gt;if(Z){const Te=q[0].timeEpochMs;if(gt=Z.to-Z.from,Ge=Z.to-Te,Ge>0){const Le=Ge/gt;me*=Le,Ie=Math.max(Math.ceil(me*ne),re),ve={from:Math.floor(Te/Ie)*Ie,to:Z.to}}else Ge=1}return{bucketSize:Ie,visibleRange:ve,visibleRangeMs:Ge,requestedRangeMs:gt}}function V(q){const fe=[],Z=[];for(const ne of q){if(z(ne)||!ne.fields.length){Z.push(ne);continue}ne.length>0&&fe.push(ne)}return{logSeries:Z,metricSeries:fe}}function H(q){const{stringField:fe,labelsField:Z}=q;return Z!==void 0?Z.values:[fe.labels??{}]}function Q(q,fe){const{stringField:Z,labelsField:ne}=q;return ne!==void 0?ne.values[fe]:Z.labels??{}}function oe(q,fe=[]){if(q.length===0)return;const Z=[];let ne=[];const re=q.filter(ye=>ye.fields.length);re.length&&re.forEach(ye=>{const Ce=new r.N(ye),be=Ce.getFirstFieldOfType(c.fS.string),We=Ce.getFirstFieldOfType(c.fS.time),Qe=ye.meta?.custom?.frameType==="LabeledTimeValues"?Ce.getFieldByName("labels"):void 0;if(be!==void 0&&We!==void 0){const mt={series:ye,timeField:We,labelsField:Qe,timeNanosecondField:Ce.getFieldByName("tsNs"),stringField:be,logLevelField:Ce.getFieldByName("level"),idField:se(Ce)};ne.push(mt);const vt=H(mt);vt.length>0&&Z.push(vt)}});const ve=Z.flat(),me=ve.length>0?(0,u.FT)(ve):{},Ie=[];let Ge=!1;for(const ye of ne){const{timeField:Ce,timeNanosecondField:be,stringField:We,logLevelField:Qe,idField:mt,series:vt}=ye;for(let rt=0;rt<vt.length;rt++){const Ot=Ce.values[rt],Et=(0,i.zh)(Ot),Mt=be?be.values[rt]:void 0,ue=Mt||Et.valueOf()+"000000",De=We.values[rt]??"",Ne=typeof De=="string"?De:JSON.stringify(De),tt=p.QX.hasAnsiCodes(Ne),et=!!Ne.match(/\\n|\\t|\\r/),Ue=vt.meta?.custom?.searchWords??vt.meta?.searchWords??[],Fe=tt?C._J.strip(Ne):Ne,Ee=Q(ye,rt),Me=(0,u.IU)(Ee,me);Object.keys(Me).length>0&&(Ge=!0);let He=l.in.unknown;const Ze=Qe&&Qe.values[rt]||Ee&&Ee.level;Ze?He=(0,P.jx)(Ze):He=(0,P.ZO)(Fe);const lt=fe.find(bt=>bt.refId===vt.refId)?.datasource?.type;Ie.push({entryFieldIndex:We.index,rowIndex:rt,dataFrame:vt,logLevel:He,timeFromNow:(0,g.E8)(Ot),timeEpochMs:Et.valueOf(),timeEpochNs:ue,timeLocal:(0,g.dq)(Ot,{timeZone:"browser"}),timeUtc:(0,g.dq)(Ot,{timeZone:"utc"}),uniqueLabels:Me,hasAnsi:tt,hasUnescapedContent:et,searchWords:Ue,entry:Fe,raw:Ne,labels:Ee||{},uid:mt?mt.values[rt]:rt.toString(),datasourceType:lt})}}const gt=[];(0,t.size)(me)>0&&gt.push({label:M,value:me,kind:l.Ku.LabelsMap});const Le=q.filter(ye=>ye?.meta?.custom?.limit??ye?.meta?.limit).reduce((ye,Ce)=>(ye[Ce.refId??""]=Ce.meta?.custom?.limit??Ce.meta?.limit??0,ye),{}),Ye=Object.values(Le).reduce((ye,Ce)=>ye+=Ce,0);Ye>0&&gt.push({label:b,value:Ye,kind:l.Ku.Number});let it=0;const ht={};let Re=!1;for(const ye of q){const Ce=ye.meta?.custom?.lokiQueryStatKey,{refId:be}=ye;if(!Re&&ye.meta?.custom?.error&&(gt.push({label:"",value:ye.meta?.custom.error,kind:l.Ku.Error}),Re=!0),be&&!ht[be]){if(Ce&&ye.meta?.stats){const We=ye.meta.stats.find(Qe=>Qe.displayName===Ce);We&&(it+=We.value)}ht[be]=!0}}if(it>0){const{text:ye,suffix:Ce}=(0,h.i7)("B")(it);gt.push({label:"Total bytes processed",value:`${ye} ${Ce}`,kind:l.Ku.String})}return{hasUniqueLabels:Ge,meta:gt,rows:Ie}}function se(q){const fe=["id"];for(const Z of fe){const ne=q.getFieldByName(Z);if(ne)return ne}}function ie(q,fe,Z){let ne=[...q.meta];const re=ne.findIndex(me=>me.label===b),ve=re>=0&&ne[re]?.value;if(ve&&ve>0){let me;if(ve===q.rows.length&&fe&&Z){const Ie=(fe/Z*100).toFixed(2);me=`${ve} reached, received logs cover ${Ie}% (${y.msRangeToTimeString(fe)}) of your selected time range (${y.msRangeToTimeString(Z)})`}else me=`${ve} (${q.rows.length} returned)`;ne[re]={label:b,value:me,kind:l.Ku.String}}return ne}function j(q,fe){const Z=fe&&q===l.in.unknown?"logs":q,ne=x[q];return{displayNameFromDS:Z,color:{mode:a.S.Fixed,fixedColor:ne},custom:{drawStyle:f.l8.Bars,barAlignment:f.pu.Center,lineColor:ne,pointColor:ne,fillColor:ne,lineWidth:1,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}}}}const de=(q,fe,Z)=>(q.fields=q.fields.map(ne=>(ne.type===c.fS.number&&(ne.config={...ne.config,...j(fe(q),Z)}),ne)),q);function ce(q,fe,Z){const ne=Z.range.to.valueOf()-Z.range.from.valueOf(),re=le(fe.scopedVars,ne);return fe.interval=re.interval,fe.scopedVars.__interval={value:re.interval,text:re.interval},re.intervalMs!==void 0&&(fe.intervalMs=re.intervalMs,fe.scopedVars.__interval_ms={value:re.intervalMs,text:re.intervalMs}),fe.hideFromInspector=!0,new n.y(ve=>{let me=[];ve.next({state:E.Gu.Loading,error:void 0,data:[]});const Ie=q.query(fe),gt=((0,o.b)(Ie)?Ie:(0,s.D)(Ie)).subscribe({complete:()=>{ve.complete()},next:Te=>{const{error:Le}=Te;if(Le!==void 0)ve.next({state:E.Gu.Error,error:Le,data:[]}),ve.error(Le);else{const Ye=(0,t.groupBy)(Te.data,"refId");me=Te.data.map(it=>{let ht=it.refId||"";ht.startsWith("log-volume-")&&(ht=ht.substr(11));const Re={logsVolumeType:l.o8.FullRange,absoluteRange:{from:Z.range.from.valueOf(),to:Z.range.to.valueOf()},datasourceName:q.name,sourceQuery:Z.targets.find(ye=>ye.refId===ht)};return it.meta={...it.meta,custom:{...it.meta?.custom,...Re}},de(it,Z.extractLevel,Ye[it.refId].length===1)}),ve.next({state:Te.state,error:void 0,data:me})}},error:Te=>{ve.next({state:E.Gu.Error,error:Te,data:[]}),ve.error(Te)}});return()=>{gt?.unsubscribe()}})}function ee(q,fe){return fe.hideFromInspector=!0,new n.y(Z=>{let ne=[];Z.next({state:E.Gu.Loading,error:void 0,data:[]});const re=q.query(fe),me=((0,o.b)(re)?re:(0,s.D)(re)).subscribe({complete:()=>{Z.next({state:E.Gu.Done,error:void 0,data:ne}),Z.complete()},next:Ie=>{const{error:Ge}=Ie;Ge!==void 0?(Z.next({state:E.Gu.Error,error:Ge,data:[]}),Z.error(Ge)):ne=Ie.data.map(gt=>{const Te=(0,d.g0)(gt),{timeIndex:Le}=(0,d.sV)(Te);return(0,d.aK)(Te,Le)})},error:Ie=>{Z.next({state:E.Gu.Error,error:Ie,data:[]}),Z.error(Ie)}});return()=>{me?.unsubscribe()}})}function le(q,fe){if(q.__interval_ms){let Z=q.__interval_ms.value,ne="";return fe<T*5?(Z=A,ne="1ms"):Z>U?(Z=R,ne="1d"):Z>S?(Z=U,ne="1h"):Z>T?(Z=S,ne="1m"):(Z=T,ne="1s"),{interval:ne,intervalMs:Z}}else return{interval:"$__interval"}}},29494:(Y,O,e)=>{"use strict";e.d(O,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(Y,O,e)=>{"use strict";e.d(O,{$l:()=>r,Av:()=>g,F6:()=>u,Jk:()=>i,VW:()=>p,ad:()=>c,hS:()=>a,mE:()=>E,vo:()=>h});var t=e(62992),n=e(27876);const o=25,s="notifications",l=`${s}/lastRead`,f={byId:D(),lastRead:Number.parseInt(window.localStorage.getItem(l)??`${Date.now()}`,10)},d=(0,t.oM)({name:"appNotifications",initialState:f,reducers:{notifyApp:(b,{payload:M})=>{Object.values(b.byId).some(x=>v(M,x)&&x.showing)||(b.byId[M.id]=M,P(b.byId))},hideAppNotification:(b,{payload:M})=>{M in b.byId&&(b.byId[M].showing=!1,P(b.byId))},clearNotification:(b,{payload:M})=>{delete b.byId[M],P(b.byId)},clearAllNotifications:b=>{b.byId={},P(b.byId)},readAllNotifications:(b,{payload:M})=>{b.lastRead=M}}}),{notifyApp:r,hideAppNotification:c,clearNotification:a,clearAllNotifications:u,readAllNotifications:i}=d.actions,p=d.reducer,g=b=>b.lastRead,y=b=>Object.values(b.byId).sort((M,x)=>x.timestamp-M.timestamp),E=b=>y(b).filter(C),h=b=>Object.values(b.byId).filter(M=>M.showing);function v(b,M){return b.icon===M.icon&&b.severity===M.severity&&b.text===M.text&&b.title===M.title}function C(b){return b.severity===n.AppNotificationSeverity.Warning||b.severity===n.AppNotificationSeverity.Error}function m(b){return typeof b=="object"&&b!==null&&"id"in b&&"icon"in b&&"title"in b&&"text"in b}function D(){const b=window.localStorage.getItem(s);if(!b)return{};const M=JSON.parse(b);return Object.values(M).every(x=>m(x))?M:{}}function P(b){const M=Object.values(b).filter(C).sort((x,A)=>A.timestamp-x.timestamp).slice(0,o).reduce((x,A)=>(x[A.id]={id:A.id,severity:A.severity,icon:A.icon,title:A.title,text:A.text,traceId:A.traceId,timestamp:A.timestamp,showing:A.showing},x),{});try{window.localStorage.setItem(s,JSON.stringify(M))}catch(x){console.error("Unable to persist notifications to local storage"),console.error(x)}}},61962:(Y,O,e)=>{"use strict";e.d(O,{Lk:()=>c,OQ:()=>r,V4:()=>u,gd:()=>a});var t=e(62992),n=e(35645),o=e(99740);const s=n.v.bootData?.navTree??[];function l(i){return i.map(p=>{const g=p.children&&l(p.children);return{...p,children:g,text:(0,o.Y)(p.id)??p.text,subTitle:(0,o.L)(p.id)??p.subTitle,emptyMessage:(0,o.Y)(p.emptyMessageId)}})}const f="starred/",d=(0,t.oM)({name:"navBarTree",initialState:()=>l(n.v.bootData?.navTree??[]),reducers:{setStarred:(i,p)=>{const g=i.find(C=>C.id==="starred"),{id:y,title:E,url:h,isStarred:v}=p.payload;if(g)if(v){g.children||(g.children=[]);const C={id:f+y,text:E,url:h};g.children.push(C),g.children.sort((m,D)=>m.text.localeCompare(D.text))}else{const C=g.children?.findIndex(m=>m.id===f+y)??-1;C>-1&&g?.children?.splice(C,1)}},updateDashboardName:(i,p)=>{const{id:g,title:y,url:E}=p.payload,h=i.find(v=>v.id==="starred");if(h){const v=h.children?.find(C=>C.id===g);v&&(v.text=y,v.url=E,h.children?.sort((C,m)=>C.text.localeCompare(m.text)))}},removePluginFromNavTree:(i,p)=>{const g="plugin-page-"+p.payload.pluginID,y=i.findIndex(E=>E.id===g);y>-1&&i.splice(y,1)}}}),{setStarred:r,removePluginFromNavTree:c,updateDashboardName:a}=d.actions,u=d.reducer},14393:(Y,O,e)=>{"use strict";e.d(O,{Cu:()=>d,G4:()=>g,H7:()=>i,Qz:()=>f,RL:()=>u});var t=e(62992),n=e(82897),o=e.n(n),s=e(47694),l=e(99740);const f="home";function d(){const y={},E=(0,n.cloneDeep)(s.ZP.bootData.navTree),h=E.find(C=>C.id===f),v=E.filter(C=>C.id!==f);return h&&r(y,[h]),r(y,v,y[f]),y}function r(y,E,h){const v=[];for(const C of E){const m={...C,text:(0,l.Y)(C.id)??C.text,subTitle:(0,l.L)(C.id)??C.subTitle,emptyMessage:(0,l.Y)(C.emptyMessageId),parentItem:h};m.id&&(y[m.id]=m),m.children&&r(y,m.children,m),v.push(m)}h&&(h.children=v),y["not-found"]={...c("Page not found","404 Error").node},y.error={...c("Page error","An unexpected error").node}}function c(y,E){const h={text:y,subTitle:E,icon:"exclamation-triangle"};return{node:h,main:h}}const a={},u=(0,t.PH)("navIndex/updateNavIndex"),i=(0,t.PH)("navIndex/updateConfigurationSubtitle"),p=(y,E)=>({...y,parentItem:{...y.parentItem,text:y.parentItem?.text??"",subTitle:E}}),g=(y=a,E)=>{if(u.match(E)){let v=function(D){if(D.children)for(const P of D.children)C[P.id]={...P,parentItem:D};D.parentItem&&v(D.parentItem)};var h=v;const C={},m=E.payload;return v(m),{...y,...C}}else if(i.match(E)){const v=`Organization: ${E.payload}`;return{...y,cfg:{...y.cfg,subTitle:v},datasources:p(y.datasources,v),correlations:p(y.correlations,v),users:p(y.users,v),teams:p(y.teams,v),plugins:p(y.plugins,v),"org-settings":p(y["org-settings"],v),apikeys:p(y.apikeys,v)}}return y}},86245:(Y,O,e)=>{"use strict";e.d(O,{ht:()=>l,vw:()=>f});var t=e(35645),n=e(60492),o=e(14393);const s=()=>{const c={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:c,main:c}},l=(c,a,u,i=!1)=>{if(c[a]){const p=c[a],g=i?p:f(p),y=d(g,a);return{node:p,main:y}}return u||s()};function f(c){return t.v.featureToggles.nestedFolders&&c.id===n.y3?c:c.parentItem&&c.parentItem.id!==o.Qz?f(c.parentItem):c}function d(c,a){return c.id===a?{...c,active:!0}:c.children&&c.children.length>0?{...c,children:c.children.map(u=>d(u,a))}:c}const r=c=>`${c.main.text}${c.node.text?": "+c.node.text:""}`},42454:(Y,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},29930:(Y,O,e)=>{"use strict";e.d(O,{y$:()=>ce,ae:()=>ee,i:()=>le});var t=e(91017),n=e(65583),o=e(84946),s=e(53376),l=e(12877),f=e(85850),d=e(59980),r=e(49372),c=e(5173),a=e(9471),u=e(90801),i=e(71735),p=e(59724),g=e(39859),y=e(57027),E=e(66516),h=e(82615),v=e(29933),C=e(44288),m=e(4063),D=e(89424),P=e(35645),b=e(18271),M=e(47694),x=e(53747),A=e(9892),T=e(66111),S=e(72648),U=e(85511),R=e(17784),F=e(31403),B=e(7804),K=e(27581);const L=fe=>{const Z=(0,S.l4)(),ne=N(Z),re=(0,K.J)(Z),ve=Boolean(fe.maxConcurrentSessions),me=()=>{window.location.reload()};return T.createElement(U.h_,null,T.createElement("div",{className:re.modal},T.createElement(R.v,{title:"You have been automatically signed out",severity:"warning",className:ne.infobox},T.createElement("div",{className:ne.text},T.createElement("p",null,"Your session token was automatically revoked because you have reached",T.createElement("strong",null,` the maximum number of ${ve?fe.maxConcurrentSessions:""} concurrent sessions `),"for your account."),T.createElement("p",null,T.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),T.createElement(F.zx,{size:"md",variant:"primary",onClick:me},"Sign in"))),T.createElement("div",{className:(0,A.cx)(re.modalBackdrop,ne.backdrop)}))},N=(0,B.B)(fe=>({infobox:A.css`
      margin-bottom: 0;
    `,text:A.css`
      margin: ${fe.spacing(1,0,2)};
    `,backdrop:A.css`
      background-color: ${fe.colors.background.canvas};
      opacity: 0.8;
    `}));var z=e(45984),G=e(8878),I=e(99822),V=(fe=>(fe[fe.Pending=0]="Pending",fe[fe.InProgress=1]="InProgress",fe[fe.Done=2]="Done",fe))(V||{});class H{constructor(Z=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(ne,re)=>this.queue.next({id:ne,options:re,state:0}),this.setInProgress=ne=>this.queue.next({id:ne,state:1}),this.setDone=ne=>this.queue.next({id:ne,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=ne=>{const re=Object.keys(ne).filter(me=>ne[me].state===1).length;return{noOfPending:Object.keys(ne).filter(me=>ne[me].state===0).length,noOfInProgress:re,state:ne}},this.publishUpdate=(ne,re)=>{this.printState(ne,re),this.updates.next(ne)},this.printState=(ne,re)=>{if(!re)return;const ve=Object.keys(ne.state).reduce((me,Ie)=>{const Ge={id:Ie,state:ne.state[Ie].state};return me.push(Ge),me},[]);console.log("FetchQueue noOfStarted",ne.noOfInProgress),console.log("FetchQueue noOfNotStarted",ne.noOfPending),console.log("FetchQueue state",ve)},this.queue.subscribe(ne=>{const{id:re,state:ve,options:me}=ne;if(this.state[re]||(this.state[re]={state:0,options:{url:""}}),ve===2){delete this.state[re];const Ge=this.getUpdate(this.state);this.publishUpdate(Ge,Z);return}this.state[re].state=ve,me&&(this.state[re].options=me);const Ie=this.getUpdate(this.state);this.publishUpdate(Ie,Z)})}}var Q=e(86870);class oe{constructor(Z,ne,re){const ve=re?.http2Enabled?1e3:5;Z.getUpdates().pipe((0,u.h)(({noOfPending:me})=>me>0),(0,Q.b)(({state:me,noOfInProgress:Ie})=>{const Ge=Object.keys(me).filter(Ye=>me[Ye].state===V.Pending&&!(0,I.mu)(me[Ye].options.url)).reduce((Ye,it)=>{const ht={id:it,options:me[it].options};return Ye.push(ht),Ye},[]),gt=Object.keys(me).filter(Ye=>me[Ye].state===V.Pending&&(0,I.mu)(me[Ye].options.url)).reduce((Ye,it)=>{const ht={id:it,options:me[it].options};return Ye.push(ht),Ye},[]),Te=Math.max(ve-Ie-Ge.length,0),Le=gt.slice(0,Te);return Ge.concat(Le)})).subscribe(({id:me,options:Ie})=>{ne.add(me,Ie)})}}class se{constructor(Z,ne){this.queue=new t.x,this.responses=new t.x,this.add=(re,ve)=>{this.queue.next({id:re,options:ve})},this.getResponses=re=>this.responses.asObservable().pipe((0,u.h)(ve=>ve.id===re)),this.queue.subscribe(re=>{const{id:ve,options:me}=re;Z.setInProgress(ve),this.responses.next({id:ve,observable:ne(me)})})}}var ie=e(82002);const j="cancel_all_requests_request_id",de="grafana-trace-id";class ce{constructor(Z){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:c.U,appEvents:b.Z,contextSrv:ie.Vt,logout:()=>{ie.Vt.setLoggedOut()}},Z&&(this.dependencies={...this.dependencies,...Z}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new H,this.responseQueue=new se(this.fetchQueue,this.internalFetch),new oe(this.fetchQueue,this.responseQueue,(0,M.iE)())}async request(Z){return await(0,n.n)(this.fetch(Z).pipe((0,a.U)(ne=>ne.data)))}fetch(Z){const ne=(0,C.Z)(),re=this.fetchQueue;return new o.y(ve=>{const me=new s.w0;return me.add(this.responseQueue.getResponses(ne).subscribe(Ie=>{me.add(Ie.observable.subscribe(ve))})),this.fetchQueue.add(ne,Z),function(){re.setDone(ne),me.unsubscribe()}})}internalFetch(Z){Z.requestId&&this.inFlightRequests.next(Z.requestId),Z=this.parseRequestOptions(Z);const ne=(0,x.v)();ne!==null&&ne!==""&&(Z.headers||(Z.headers={}),P.v.jwtUrlLogin&&P.v.jwtHeaderName&&(Z.headers[P.v.jwtHeaderName]=`${ne}`));const re=this.getFromFetchStream(Z),ve=re.pipe(this.toFailureStream(Z)),me=re.pipe((0,u.h)(Ie=>Ie.ok===!0),(0,i.b)(Ie=>{this.showSuccessAlert(Ie),this.inspectorStream.next(Ie)}));return(0,l.T)(me,ve).pipe((0,p.K)(Ie=>(0,f._)(this.processRequestError(Z,Ie))),this.handleStreamCancellation(Z))}resolveCancelerIfExists(Z){this.inFlightRequests.next(Z)}cancelAllInFlightRequests(){this.inFlightRequests.next(j)}async datasourceRequest(Z){return(0,n.n)(this.fetch(Z))}parseRequestOptions(Z){const ne=this.dependencies.contextSrv.user?.orgId;return Z.retry=Z.retry??0,(0,I.R8)(Z.url)&&(ne&&(Z.headers=Z.headers??{},Z.headers["X-Grafana-Org-Id"]=ne),Z.url.startsWith("/")&&(Z.url=Z.url.substring(1)),Z.headers?.Authorization&&(Z.headers["X-DS-Authorization"]=Z.headers.Authorization,delete Z.headers.Authorization),this.noBackendCache&&(Z.headers=Z.headers??{},Z.headers["X-Grafana-NoCache"]="true")),Z.hideFromInspector===void 0&&(Z.hideFromInspector=(0,I.R8)(Z.url)&&!(0,I.mu)(Z.url)),Z}getFromFetchStream(Z){const ne=(0,G.Xv)(Z),re=(0,G.nS)(Z);return this.dependencies.fromFetch(ne,re).pipe((0,g.z)(async ve=>{const{status:me,statusText:Ie,ok:Ge,headers:gt,url:Te,type:Le,redirected:Ye}=ve,it=Z.responseType??((0,G.rZ)(gt)?"json":void 0),ht=await(0,G.aO)(ve,it);return{status:me,statusText:Ie,ok:Ge,data:ht,headers:gt,url:Te,type:Le,redirected:Ye,config:Z,traceId:ve.headers.get(de)??void 0}}),(0,y.B)())}toFailureStream(Z){const{isSignedIn:ne}=this.dependencies.contextSrv.user;return re=>re.pipe((0,u.h)(ve=>ve.ok===!1),(0,g.z)(ve=>{const{status:me,statusText:Ie,data:Ge}=ve,gt={status:me,statusText:Ie,data:Ge,config:Z,traceId:ve.headers.get(de)??void 0};return(0,f._)(gt)}),(0,E.a)(ve=>ve.pipe((0,g.z)((me,Ie)=>{const Ge=Ie===0&&Z.retry===0;if(me.status===401&&(0,I.R8)(Z.url)&&Ge&&ne){if(me.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new z.Dn({component:L,props:{maxConcurrentSessions:me.data?.error?.maxConcurrentSessions}})),(0,d.of)({});let gt=()=>this.loginPing();return P.v.featureToggles.clientTokenRotation&&(gt=()=>this.rotateToken()),(0,r.D)(gt()).pipe((0,p.K)(Te=>(Te.status===401&&this.dependencies.logout(),(0,f._)(Te))))}return(0,f._)(me)}))))}showApplicationErrorAlert(Z){}showSuccessAlert(Z){const{config:ne}=Z;if(ne.showSuccessAlert===!1||ne.showSuccessAlert===void 0&&(ne.method==="GET"||(0,I.mu)(ne.url)||!(0,I.R8)(ne.url)))return;const re=Z.data;re?.message&&this.dependencies.appEvents.emit(m.SI.alertSuccess,[re.message])}showErrorAlert(Z,ne){if(Z.showErrorAlert===!1||Z.showErrorAlert===void 0&&((0,I.mu)(Z.url)||!(0,I.R8)(Z.url)))return;let re="",ve=ne.data.message;ve==="Unexpected error"&&ne.message&&(ve=ne.message),ve.length>80&&(re=ve,ve="Error"),ne.status===422&&(re=ne.data.message,ve="Validation failed"),this.dependencies.appEvents.emit(ne.status<500?m.SI.alertWarning:m.SI.alertError,[ve,re,ne.data.traceID])}processRequestError(Z,ne){return ne.data=ne.data??{message:"Unexpected error"},typeof ne.data=="string"&&(ne.data={message:ne.data,error:ne.statusText,response:ne.data}),ne.data&&!ne.data.message&&typeof ne.data.error=="string"&&(ne.data.message=ne.data.error),ne.data.message&&setTimeout(()=>{ne.isHandled||this.showErrorAlert(Z,ne)},50),this.inspectorStream.next(ne),ne}handleStreamCancellation(Z){return ne=>ne.pipe((0,h.R)(this.inFlightRequests.pipe((0,u.h)(re=>{let ve=!1;return Z&&Z.requestId&&Z.requestId===re&&(ve=!0),re===j&&(ve=!0),ve}))),(0,v.T)(()=>({type:D.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Z})))}getInspectorStream(){return this.inspectorStream}async get(Z,ne,re,ve){return this.request({...ve,method:"GET",url:Z,params:ne,requestId:re})}async delete(Z,ne,re){return this.request({...re,method:"DELETE",url:Z,data:ne})}async post(Z,ne,re){return this.request({...re,method:"POST",url:Z,data:ne})}async patch(Z,ne,re){return this.request({...re,method:"PATCH",url:Z,data:ne})}async put(Z,ne,re){return this.request({...re,method:"PUT",url:Z,data:ne})}withNoBackendCache(Z){return this.noBackendCache=!0,Z().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this.request({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(Z){return this.get("/api/search",Z)}getDashboardByUid(Z){return this.get(`/api/dashboards/uid/${Z}`)}validateDashboard(Z){const ne=JSON.stringify(Z,q,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:ne},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(Z){return this.get(`/api/public/dashboards/${Z}`)}getFolderByUid(Z,ne={}){const re=new URLSearchParams;return ne.withAccessControl&&re.set("accesscontrol","true"),this.get(`/api/folders/${Z}?${re.toString()}`)}}const ee=new ce,le=()=>ee;function q(fe,Z){if(!(typeof Z=="number"&&!Number.isFinite(Z)))return Z}},82002:(Y,O,e)=>{"use strict";e.d(O,{Vt:()=>a});var t=e(82897),n=e.n(t),o=e(47891),s=e(54899),l=e(66121),f=e(27876),d=e(47694);class r{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},d.ZP.bootData.user&&(0,t.extend)(this,d.ZP.bootData.user)}}class c{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,d.ZP.bootData||(d.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new r,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=d.ZP.minRefreshInterval,this.isSignedIn&&this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(p){console.error(p)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(p){return p==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===p}accessControlEnabled(){return d.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,l.v)("accesscontrol")&&d.ZP.rbacEnabled}hasPermissionInMetadata(p,g){return this.accessControlEnabled()?!!g.accessControl?.[p]:!0}hasPermission(p){return this.accessControlEnabled()?!!this.user.permissions?.[p]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(p){return d.ZP.minRefreshInterval?o.intervalToMs(p)>=o.intervalToMs(d.ZP.minRefreshInterval):!0}getValidInterval(p){return this.isAllowedInterval(p)?p:d.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(f.AccessControlAction.DataSourcesExplore)&&d.ZP.exploreEnabled:(this.isEditor||d.ZP.viewersCanEdit)&&d.ZP.exploreEnabled}hasAccess(p,g){return this.accessControlEnabled()?this.hasPermission(p):g}hasAccessInMetadata(p,g,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(p,g):y}evaluatePermission(p,g){return this.accessControlEnabled()?g.some(y=>this.hasPermission(y))?[]:["Reject"]:p()}scheduleTokenRotationJob(){if(d.ZP.featureToggles.clientTokenRotation&&this.isSignedIn){let p=this.getSessionExpiry();if(p===0){this.rotateToken().then();return}let y=(p-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if(this.getSessionExpiry()>p){this.scheduleTokenRotationJob();return}this.rotateToken().then()},y)}}cancelTokenRotationJob(){d.ZP.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch("/api/user/auth-tokens/rotate",{method:"POST"}).then(p=>{if(p.status===200){this.scheduleTokenRotationJob();return}if(p.status===401){this.setLoggedOut();return}}).catch(p=>{console.error(p)})}getSessionExpiry(){const p=document.cookie.split("; ").find(y=>y.startsWith("grafana_session_expiry="));if(!p)return 0;let g=p.split("=").at(1);return g?parseInt(g,10):0}}let a=new c;const u=i=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(82897),n=e.n(t),o=e(54899),s=e(47694),l=e(58379);class f{constructor(){}addDashboardImpression(a){const u=this.impressionKey();let i=[];l.Z.exists(u)&&(i=JSON.parse(l.Z.get(u)),(0,t.isArray)(i)||(i=[])),i=i.filter(p=>a!==p),i.unshift(a),i.length>50&&i.pop(),l.Z.set(u,JSON.stringify(i))}async convertToUIDs(){let a=this.getImpressions();const u=(0,t.filter)(a,p=>(0,t.isNumber)(p));if(!u.length)return;const i=await(0,o.i)().get(`/api/dashboards/ids/${u.join(",")}`);l.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(a,p=>(0,t.isString)(p)),...i]))}getImpressions(){const a=l.Z.get(this.impressionKey())||"[]";return JSON.parse(a)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),u=>(0,t.isString)(u))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const r=new f},5534:(Y,O,e)=>{"use strict";e.d(O,{L:()=>d,X:()=>r});var t=e(21544),n=e(82378),o=e(18271),s=e(47694),l=e(77582),f=e(42454);async function d(c,a){const u=(0,t.j)({colors:{mode:c}});if(u.flags.topnav=s.vc.featureToggles.topnav,o.Z.publish(new n.hD(u)),s.vc.theme2.isDark=u.isDark,a)return;const i=document.createElement("link");if(i.rel="stylesheet",i.href=s.vc.bootData.themePaths[u.colors.mode],i.onload=()=>{const y=document.getElementsByTagName("link");for(let E=0;E<y.length;E++){const h=y[E];h.href&&h.href.includes(`build/grafana.${u.isDark?"light":"dark"}`)&&h.remove()}},document.body.appendChild(i),!l.Vt.isSignedIn)return;const p=new f.y("user"),g=await p.load();await p.update({...g,theme:u.colors.mode})}async function r(c){const a=s.vc.theme2;d(a.isDark?"light":"dark",c)}},58379:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>o});class t{get(l){return window.localStorage[l]}set(l,f){window.localStorage[l]=f}getBool(l,f){return f!==void 0&&!this.exists(l)?f:window.localStorage[l]==="true"}getObject(l,f){let d=f;if(this.exists(l)){const r=window.localStorage[l];try{d=JSON.parse(r)}catch(c){console.error(`Error parsing store object: ${l}. Returning default: ${f}. [${c}]`)}}return d}setObject(l,f){let d;try{d=JSON.stringify(f)}catch(r){throw new Error(`Could not stringify object: ${l}. [${r}]`)}try{this.set(l,d)}catch(r){const c=new Error(`Could not save item in localStorage: ${l}. [${r}]`);throw r instanceof Error&&(c.name=r.name),c}return!0}exists(l){return window.localStorage[l]!==void 0}delete(l){window.localStorage.removeItem(l)}}const o=new t},4050:(Y,O,e)=>{"use strict";e.d(O,{W:()=>r,Z:()=>c});var t=e(82897),n=e.n(t),o=e(79086),s=e(2703);function l(a,u){if(!a)return!1;if(a[0]==="/"){const i=(0,o.jO)(a);return u.match(i)!=null}return a===u}function f(a){return a===0?.001:a/10}function d(a){return a?{colors:[{opacity:0},{opacity:a/10}]}:null}function r(a,u,i){for(let p=0;p<a.length;p++){const g=a[p],y=u.yaxes,E=g.yaxis||1,h=y[E-1],v=(0,s.Cf)(h.format);(0,t.isNumber)(u.decimals)?g.updateLegendValues(v,u.decimals):(0,t.isNumber)(h.decimals)?g.updateLegendValues(v,h.decimals+1):g.updateLegendValues(v,null)}}class c{constructor(u){this.datapoints=u.datapoints,this.label=u.alias,this.id=u.alias,this.alias=u.alias,this.aliasEscaped=(0,t.escape)(u.alias),this.color=u.color,this.bars={fillColor:u.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=u.unit,this.dataFrameIndex=u.dataFrameIndex,this.fieldIndex=u.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(u){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let i=0;i<u.length;i++){const p=u[i];l(p.alias,this.alias)&&(p.lines!==void 0&&(this.lines.show=p.lines),p.dashes!==void 0&&(this.dashes.show=p.dashes,this.lines.lineWidth=0),p.points!==void 0&&(this.points.show=p.points),p.bars!==void 0&&(this.bars.show=p.bars),p.fill!==void 0&&(this.lines.fill=f(p.fill)),p.fillGradient!==void 0&&(this.lines.fillColor=d(p.fillGradient)),p.stack!==void 0&&(this.stack=p.stack),p.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:p.linewidth,this.dashes.lineWidth=p.linewidth),p.dashLength!==void 0&&(this.dashes.dashLength[0]=p.dashLength),p.spaceLength!==void 0&&(this.dashes.dashLength[1]=p.spaceLength),p.nullPointMode!==void 0&&(this.nullPointMode=p.nullPointMode),p.pointradius!==void 0&&(this.points.radius=p.pointradius),p.steppedLine!==void 0&&(this.lines.steps=p.steppedLine),p.zindex!==void 0&&(this.zindex=p.zindex),p.fillBelowTo!==void 0&&(this.fillBelowTo=p.fillBelowTo),p.color!==void 0&&this.setColor(p.color),p.transform!==void 0&&(this.transform=p.transform),p.legend!==void 0&&(this.legend=p.legend),p.hideTooltip!==void 0&&(this.hideTooltip=p.hideTooltip),p.yaxis!==void 0&&(this.yaxis=p.yaxis),p.hiddenSeries!==void 0&&(this.hiddenSeries=p.hiddenSeries))}}getFlotPairs(u){const i=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const p=u==="connected",g=u==="null as zero";let y,E,h=0,v,C=0,m=!0;for(let D=0;D<this.datapoints.length;D++){if(E=this.datapoints[D][0],y=this.datapoints[D][1],v!==void 0){const P=y-v;P<this.stats.timeStep&&(this.stats.timeStep=P)}if(v=y,E===null){if(p)continue;g&&(E=0)}E!==null&&((0,t.isNumber)(E)&&(this.stats.total+=E,this.allIsNull=!1,h++),E>this.stats.max&&(this.stats.max=E),E<this.stats.min&&(this.stats.min=E),this.stats.first===null?this.stats.first=E:C>E?(m=!1,D===this.datapoints.length-1&&(this.stats.delta+=E)):(m?this.stats.delta+=E-C:this.stats.delta+=E,m=!0),C=E,E<this.stats.logmin&&E>0&&(this.stats.logmin=E),E!==0&&(this.allIsZero=!1)),i.push([y,E])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),i.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/h,this.stats.current=i[i.length-1][1],this.stats.current===null&&i.length>1&&(this.stats.current=i[i.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=i.length,i}updateLegendValues(u,i){this.valueFormater=u,this.decimals=i}formatValue(u){return(0,t.isFinite)(u)||(u=null),(0,s.zc)(this.valueFormater(u,this.decimals))}isMsResolutionNeeded(){for(let u=0;u<this.datapoints.length;u++)if(this.datapoints[u][1]!==null&&this.datapoints[u][1]!==void 0){const i=this.datapoints[u][1].toString();if(i.length===13&&i%1e3!==0)return!0}return!1}hideFromLegend(u){return!!(u.hideEmpty&&this.allIsNull||!this.legend||u.hideZero&&this.allIsZero)}setColor(u){this.color=u,this.bars.fillColor=u}}},92973:(Y,O,e)=>{"use strict";e.d(O,{E:()=>f,f:()=>l});var t=e(66111),n=e(82378),o=e(72648),s=e(77582);const l=({children:d,value:r})=>{const[c,a]=(0,t.useState)(r);return(0,t.useEffect)(()=>{const u=s.h$.subscribe(n.hD,i=>{a(i.payload)});return()=>u.unsubscribe()},[]),t.createElement(o.Ni.Provider,{value:c},d)},f=(d,r)=>function(a){return t.createElement(l,{value:r},t.createElement(d,{...a}))}},77410:(Y,O,e)=>{"use strict";e.d(O,{q:()=>t});class t extends window.Worker{constructor(o,s){const l=o.toString(),f=l.split("/");f.pop();const d=`${f.join("/")}/`,r=`importScripts('${l}');`,c=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${d}'; ${r}`],{type:"application/javascript"}));super(c,s),URL.revokeObjectURL(c)}}},95156:(Y,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(47694);function n(o={}){return t.ZP.rbacEnabled?{...o,accesscontrol:!0}:o}},2024:(Y,O,e)=>{"use strict";e.d(O,{A:()=>t});function t(o){return o.map(n).sort((s,l)=>l.sortRank-s.sortRank||s.name.localeCompare(l.name))}function n(o){const s=o;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(Y,O,e)=>{"use strict";e.d(O,{R:()=>t});const t=(n,o,s)=>(n.splice(s,0,n.splice(o,1)[0]),n)},43226:(Y,O,e)=>{"use strict";e.d(O,{vl:()=>o});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,l=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,d=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),r=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||l&&(r&&parseFloat(r[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||f&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(d&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function o(){return n()?"cmd":"ctrl"}},28630:(Y,O,e)=>{"use strict";e.d(O,{kJ:()=>o});class t{_linkTo(d,r){r<=0&&d.inputEdges.push(this),r>=0&&d.outputEdges.push(this),d.edges.push(this)}link(d,r){if(!d)throw Error("inputNode is required");if(!r)throw Error("outputNode is required");return this.unlink(),this.inputNode=d,this.outputNode=r,this._linkTo(d,1),this._linkTo(r,-1),this}unlink(){let d;const r=this.inputNode,c=this.outputNode;r&&c&&(d=r.edges.indexOf(this),d>-1&&r.edges.splice(d,1),d=c.edges.indexOf(this),d>-1&&c.edges.splice(d,1),d=r.outputEdges.indexOf(this),d>-1&&r.outputEdges.splice(d,1),d=c.inputEdges.indexOf(this),d>-1&&c.inputEdges.splice(d,1))}}class n{constructor(d){this.name=d,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(d){return d?typeof d=="object"?this.inputEdges.find(r=>r.inputNode?.name===d.name):this.inputEdges.find(r=>r.inputNode?.name===d):null}getEdgeTo(d){return d?typeof d=="object"?this.outputEdges.find(r=>r.outputNode?.name===d.name):this.outputEdges.find(r=>r.outputNode?.name===d):null}getOptimizedInputEdges(){const d=[];return this.inputEdges.forEach(r=>{r.inputNode?.inputEdges.map(a=>a.inputNode)?.forEach(a=>{const u=a?.getEdgeTo(this.name);u&&d.push(u)})}),this.inputEdges.filter(r=>d.indexOf(r)===-1)}}class o{constructor(){this.nodes={}}createNode(d){const r=new n(d);return this.nodes[d]=r,r}createNodes(d){const r=[];return d.forEach(c=>{r.push(this.createNode(c))}),r}link(d,r){let c=[],a=[];const u=[],i=[];d instanceof Array?c=d:c=[d],r instanceof Array?a=r:a=[r];for(let g=0;g<c.length;g++){const y=c[g];if(typeof y=="string"){const E=this.getNode(y);if(!E)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);u.push(E)}else u.push(y)}for(let g=0;g<a.length;g++){const y=a[g];if(typeof y=="string"){const E=this.getNode(y);if(!E)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);i.push(E)}else i.push(y)}const p=[];return u.forEach(g=>{i.forEach(y=>{p.push(this.createEdge().link(g,y))})}),p}descendants(d){if(!d.length)return new Set;const r=new Set(l(d)?d.map(c=>this.nodes[c]).filter(c=>c!==void 0):d);return this.descendantsRecursive(r)}descendantsRecursive(d,r=new Set){for(const c of d){const a=new Set;for(const{inputNode:u}of c.inputEdges)u&&!r.has(u)&&(r.add(u),a.add(u));this.descendantsRecursive(a,r)}return r}createEdge(){return new t}getNode(d){return this.nodes[d]}}const s=f=>{Object.keys(f.nodes).forEach(d=>{const r=f.nodes[d];let c=r.outputEdges.map(u=>u.outputNode?.name).join(", ");c||(c="<none>");let a=r.inputEdges.map(u=>u.inputNode?.name).join(", ");a||(a="<none>"),console.log(`${r.name}:
 - links to:   ${c}
 - links from: ${a}`)})};function l(f){return f.length>0&&typeof f[0]=="string"}},82052:(Y,O,e)=>{"use strict";e.d(O,{i:()=>n});var t=e(54899);function n(o){if(typeof o=="string")return o;if(o){if(o instanceof Error)return o.message;if((0,t.kW)(o)){if(o.data&&o.data.message)return o.data.message;if(o.statusText)return o.statusText}}return JSON.stringify(o)}},55935:(Y,O,e)=>{"use strict";e.d(O,{$$:()=>V,F3:()=>de,H6:()=>P,HI:()=>R,I$:()=>D,J5:()=>U,OQ:()=>H,Oy:()=>j,RZ:()=>ce,UI:()=>h,Xh:()=>S,Xk:()=>F,Z8:()=>L,Zf:()=>b,_Q:()=>G,_o:()=>K,fR:()=>B,n9:()=>le,uC:()=>M,vP:()=>oe,z_:()=>z});var t=e(82897),n=e.n(t),o=e(44288),s=e(40538),l=e(49187),f=e(206),d=e(75849),r=e(47891),c=e(67483),a=e(47406),u=e(86647),i=e(5562),p=e(58379),g=e(97573),y=e(47694),E=e(99822);const h={from:"now-1h",to:"now"},v={dedupStrategy:s.Y4.none},C=100,m="grafana.explore.datasource",D=q=>`${m}.${q}`;async function P(q){const{panel:fe,datasourceSrv:Z,timeSrv:ne}=q;let re=await Z.get(fe.datasource),ve=fe.targets.map(Ie=>(0,t.omit)(Ie,"legendFormat")).filter(Ie=>Ie.datasource?.uid!==g.Yq),me;if(y.vc.featureToggles.exploreMixedDatasource===!1&&re.meta?.id==="mixed"&&ve)for(const Ie of ve){const Ge=await Z.get(Ie.datasource||void 0);if(Ge){re=Ge,ve=fe.targets.filter(gt=>gt.datasource===Ge.name);break}}if(re){let Ge={range:ne.timeRangeForUrl()};if(re.interpolateVariablesInQueries){const Te=fe.scopedVars||{};Ge={...Ge,datasource:re.name,context:"explore",queries:re.interpolateVariablesInQueries(ve,Te)}}else Ge={...Ge,datasource:re.name,context:"explore",queries:ve};const gt=JSON.stringify(Ge);me=l.Cj.renderUrl("/explore",{left:gt})}return me}function b(q,fe,Z,ne,re,ve){const me=fe.reduce((Le,Ye)=>(Le+=Ye.key,Le),""),{interval:Ie,intervalMs:Ge}=ee(ne,Z.minInterval,Z.maxDataPoints),gt=`${me}`,Te={app:f.zj.Explore,timezone:ve||d.Ys,startTime:Date.now(),interval:Ie,intervalMs:Ge,panelId:gt,targets:fe,range:ne,requestId:"explore_"+q,rangeRaw:ne.raw,scopedVars:{__interval:{text:Ie,value:Ie},__interval_ms:{text:Ge,value:Ge}},maxDataPoints:Z.maxDataPoints,liveStreaming:Z.liveStreaming};return{queries:fe,request:Te,scanning:re,id:R(),done:!1}}const M=({key:q,...fe})=>fe,x=(q,...fe)=>fe.some(Z=>q.hasOwnProperty(Z));var A=(q=>(q[q.RangeFrom=0]="RangeFrom",q[q.RangeTo=1]="RangeTo",q[q.Datasource=2]="Datasource",q[q.SegmentsStart=3]="SegmentsStart",q))(A||{});const T=q=>{if(q)try{return JSON.parse(q)}catch(fe){console.error(fe)}},S=(q,fe)=>{if(q==null)return"";try{return JSON.stringify(q,null,fe)}catch(Z){console.error(Z)}return""};function U(q){const fe=T(q),Z={datasource:null,queries:[],range:h,mode:null};if(!fe)return Z;if(!Array.isArray(fe))return{...fe,isFromCompactUrl:!1};if(fe.length<=3)return console.error("Error parsing compact URL state for Explore."),Z;const ne={from:fe[0],to:fe[1]},re=fe[2],ve=fe.slice(3),me=ve.filter(Ge=>!x(Ge,"ui","mode","__panelsState")),Ie=ve.find(Ge=>x(Ge,"__panelsState"))?.__panelsState;return{datasource:re,queries:me,range:ne,panelsState:Ie,isFromCompactUrl:!0}}function R(q=0){return`Q-${(0,o.Z)()}-${q}`}async function F(q,fe=0,Z){let ne,re,ve;return Z?re=Z:q.length>0&&q[q.length-1].datasource?re=q[q.length-1].datasource:(ne=await(0,u.F)().get(),ve=ne.getDefaultQuery?.(f.zj.Explore),re=ne.getRef()),ne||(ne=await(0,u.F)().get(re),ve=ne.getDefaultQuery?.(f.zj.Explore)),{...ve,refId:(0,E.Hs)(q),key:R(fe),datasource:re}}const B=(q,fe,Z=0)=>{const ne=R(Z),re=q.refId||(0,E.Hs)(fe);return{...q,refId:re,key:ne}},K=q=>{const fe=q.map(Z=>Z.datasource?.uid);return{allHaveDatasource:fe.length===q.length,noneHaveDatasource:fe.length===0,allDatasourceSame:fe.every((Z,ne,re)=>Z===re[0])}};async function L(q,fe){if(q&&typeof q=="object"&&q.length>0){const Z=[];for(let ne=0;ne<q.length;ne++){const re=q[ne],ve=R(ne);let me=re.refId;me||(me=(0,E.Hs)(Z));let Ie=!0;if(re.datasource)try{await(0,u.F)().get(re.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Ie=!1}Ie&&Z.push({...re,refId:me,key:ve})}return Z}try{const Z=fe??(await(0,u.F)().get()).getRef();return[await F(q??[],void 0,Z)]}catch{return[]}}const N=["refId","key","context","datasource"];function z(q){return q&&q.some(fe=>Object.keys(fe).filter(ne=>N.indexOf(ne)===-1).map(ne=>fe[ne]).filter(ne=>ne).length>0)}function G(q,fe,Z){const ne=Date.now();let re=q;Z.forEach(me=>{re=[{query:me,ts:ne},...re]}),re.length>C&&(re=re.slice(0,C));const ve=`grafana.explore.history.${fe}`;try{return p.Z.setObject(ve,re),re}catch(me){return console.error(me),q}}function I(q){const fe=`grafana.explore.history.${q}`;store.delete(fe)}const V=q=>q.reduce((Z,ne,re)=>{const ve=ne.datasource?.uid||ne.key;return Z.concat(`${ve}-${re}`)},[]),H=(q,fe,Z)=>{let ne=r.convertRawToRange(fe,q,Z);return ne.to.isBefore(ne.from)&&(ne=r.convertRawToRange({from:ne.raw.to,to:ne.raw.from},q,Z)),ne},Q=q=>{if(q===null)return null;if((0,c.v9)(q)||q.indexOf("now")!==-1)return q;if(q.length===8)return(0,c.zh)(q,"YYYYMMDD");if(q.length===15)return(0,c.zh)(q,"YYYYMMDDTHHmmss");if(q.length===19)return(0,c.zh)(q,"YYYY-MM-DD HH:mm:ss");if(q.match(/^\d+$/)){const Z=parseInt(q,10);return(0,c.zh)(Z)}const fe=(0,c.zh)(q);return fe.isValid()?fe:null},oe=(q,fe,Z)=>{const ne={from:Q(q.from),to:Q(q.to)};return{from:a.parse(ne.from,!1,fe),to:a.parse(ne.to,!0,fe),raw:ne}},se=q=>{if(!q||typeof q!="object")return;if(q.refId)return q;const fe=Object.keys(q);for(let Z=0;Z<fe.length;Z++){const ne=fe[Z],re=se(q[ne]);if(re)return re}},ie=q=>{if(!q)return[];if(typeof q!="object")return[];const fe=Object.keys(q),Z=[];for(let ne=0;ne<fe.length;ne++){const re=fe[ne];if(re==="refId"){Z.push(q[re]);continue}Z.push(ie(q[re]))}return uniq(flatten(Z))},j=q=>i.dP.isLive(q)?s.UV.Ascending:s.UV.Descending,de=q=>{let Z=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${y.vc.appSubUrl}`;return Z.endsWith("/")&&(Z=Z.slice(0,-1)),`${Z}${q}`},ce=q=>{q&&q.unsubscribe()};function ee(q,fe,Z){return Z?r.calculateInterval(q,Z,fe):{interval:"1s",intervalMs:1e3}}const le=q=>{const fe=document.createElement("textarea");fe.value=q,document.body.appendChild(fe),fe.select(),document.execCommand("copy"),document.body.removeChild(fe)}},8878:(Y,O,e)=>{"use strict";e.d(O,{Xv:()=>E,aO:()=>g,nS:()=>s,rZ:()=>i,tW:()=>y});var t=e(82897),n=e.n(t),o=e(55024);const s=v=>{const C=v.method,m=u(v),D=i(m),P=p(v,D),b=h(v);return{method:C,headers:m,body:P,credentials:b}},l={canParse:()=>!0,parse:v=>(v.get("accept")||v.set("accept","application/json, text/plain, */*"),v)},f=v=>({canParse:C=>(C?.method?C?.method.toLowerCase():"")===v,parse:C=>(C.get("content-type")||C.set("content-type","application/json"),C)}),d=f("post"),r=f("put"),c=f("patch"),a=[d,r,c,l],u=v=>{const C=v?.headers?new Headers(v.headers):new Headers;return a.filter(P=>P.canParse(v)).reduce((P,b)=>b.parse(P),C)},i=v=>{if(!v)return!1;const C=v.get("content-type");return!!(C&&C.toLowerCase()==="application/json")},p=(v,C)=>v&&(!v.data||typeof v.data=="string"?v.data:C?JSON.stringify(v.data):new URLSearchParams(v.data));async function g(v,C){if(C)switch(C){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"json":return v.headers.get("Content-Length")==="0"?(console.warn(`${v.url} returned an invalid JSON`),{}):await v.json();case"text":return v.text()}const m=await v.text();try{return JSON.parse(m)}catch{}return m}function y(v){return Object.keys(v).map(C=>{const m=v[C];return Array.isArray(m)?m.map(D=>`${encodeURIComponent(C)}=${encodeURIComponent(D)}`).join("&"):`${encodeURIComponent(C)}=${encodeURIComponent(m)}`}).join("&")}const E=v=>{const C=(0,t.omitBy)(v.params,D=>D===void 0||D&&D.length===0),m=y(C);return v.params&&m.length?`${v.url}?${m}`:v.url},h=v=>v&&(v.credentials?v.credentials:v.withCredentials?((0,o.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{default:()=>t});function t(n,o){o=o||{};const s=o.delimiter||".";let l=o.maxDepth||3,f=1;const d={};function r(c,a){Object.keys(c).forEach(u=>{const i=c[u],p=o?.safe&&Array.isArray(i),y=Object.prototype.toString.call(i)==="[object Object]",E=a?a+s+u:u;if(o?.maxDepth||(l=f+1),!p&&y&&Object.keys(i).length&&f<l)return++f,r(i,E);d[E]=i})}return r(n,null),d}},24816:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(55024),n=e(79086),o=e(47891),s=e(2703);const l={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:d=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(d)),roundInterval:d=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),o.roundInterval(d)),secondsToHms:d=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),o.secondsToHms(d)),secondsToHhmmss:d=>{const r=[],c=Math.floor(d/3600),a=Math.floor(d%3600/60),u=Math.floor(d%3600%60);return c>9?r.push(""+c):r.push("0"+c),a>9?r.push(""+a):r.push("0"+a),u>9?r.push(""+u):r.push("0"+u),r.join(":")},toPercent:(d,r)=>Math.floor(d/r*1e4)/100+"%",addSlashes:d=>d.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:d=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),o.describeInterval(d)),intervalToSeconds:d=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),o.intervalToSeconds(d)),intervalToMs:d=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),o.intervalToMs(d)),calculateInterval:(d,r,c)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),o.calculateInterval(d,r,c)),queryColorDot:(d,r)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+d,"font-size:"+r+"px"].join(";")+'"></div>',slugifyForUrl:d=>d.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:d=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(d)),toFixed:(d,r)=>{if(d===null)return"";const c=r?Math.pow(10,Math.max(0,r)):1,a=String(Math.round(d*c)/c);if(a.indexOf("e")!==-1||d===0)return a;if(r!=null){const u=a.indexOf("."),i=u===-1?0:a.length-u-1;if(i<r)return(i?a:a+".")+String(c).slice(1,r-i+1)}return a},toFixedScaled:(d,r,c,a,u)=>c===null?l.toFixed(d,r)+u:l.toFixed(d,c+a)+u,roundValue:(d,r)=>{if(d===null)return null;const c=Math.pow(10,r),a=(c*d).toFixed(r);return Math.round(parseFloat(a))/c},getUnitFormats:s.QW};typeof Proxy<"u"?l.valueFormats=new Proxy(l.valueFormats,{get(d,r,c){if(typeof r!="string")throw{message:`Value format ${String(r)} is not a string`};const a=(0,s.Cf)(r);return a?(u,i,p,g)=>(0,s.zc)(a(u,i,p,g?"utc":"browser")):Reflect.get(d,r,c)}}):l.valueFormats=(0,s.Td)();const f=l},99822:(Y,O,e)=>{"use strict";e.d(O,{DI:()=>o,Hs:()=>t,R8:()=>l,mu:()=>s,sB:()=>d,vH:()=>n});const t=r=>{for(let c=0;;c++){const a=f(c);if(!r.some(u=>u.refId===a))return a}};function n(r){const c=["refId","hide","key","queryType","datasource"];for(const a in r)if(a!=="label"&&!c.includes(a))return!1;return!0}function o(r,c,a){const u=c||{};return u.refId=t(r),u.hide=!1,!u.datasource&&a&&(u.datasource=a),[...r,u]}function s(r){return r.indexOf("api/datasources/proxy")!==-1||r.indexOf("api/ds/query")!==-1}function l(r){return!r.match(/^http/)}function f(r){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return r<c.length?c[r]:f(Math.floor(r/c.length)-1)+c[r%c.length]}function d(r){return r||void 0}},51424:(Y,O,e)=>{"use strict";e.d(O,{As:()=>i.A,DR:()=>S,HK:()=>h,OH:()=>A,VI:()=>v,au:()=>p,bQ:()=>P,di:()=>E,gt:()=>C,k4:()=>T,kg:()=>y,t2:()=>D,ub:()=>g,y9:()=>m});var t=e(82897),n=e.n(t),o=e(49187),s=e(77258),l=e(86647),f=e(659),d=e(60499),r=e(3153),c=e(47694),a=e(50395),u=e(4219),i=e(43823);async function p(R,F,B,K,L,N,z){const G=B&&B.filter(I=>U(I));if(G.length>0){let I=!1,V=!1,H;try{H=(await(0,u.b)().addToRichHistory({datasourceUid:R,datasourceName:F??"",queries:G,starred:K,comment:L??""})).warning}catch(Q){return Q instanceof Error&&(Q.name===a.j.StorageFull?(I=!0,N&&(0,r.WI)((0,f.$l)((0,d.t_)(Q.message)))):Q.name!==a.j.DuplicatedEntry&&(0,r.WI)((0,f.$l)((0,d.t_)("Rich History update failed",Q.message)))),{richHistoryStorageFull:I,limitExceeded:V}}return H&&H.type===a.V.LimitExceeded&&(V=!0,z&&(0,r.WI)((0,f.$l)((0,d.ZR)(H.message)))),{richHistoryStorageFull:I,limitExceeded:V}}return{}}async function g(R){return await(0,u.b)().getRichHistory(R)}async function y(R){await(0,u.b)().updateSettings(R)}async function E(){return await(0,u.b)().getSettings()}async function h(){return(0,u.b)().deleteAll()}async function v(R,F){try{return await(0,u.b)().updateStarred(R,F)}catch(B){B instanceof Error&&(0,r.WI)((0,f.$l)((0,d.t_)("Saving rich history failed",B.message)));return}}async function C(R,F){try{return await(0,u.b)().updateComment(R,F)}catch(B){B instanceof Error&&(0,r.WI)((0,f.$l)((0,d.t_)("Saving rich history failed",B.message)));return}}async function m(R){try{return await(0,u.b)().deleteRichHistory(R),R}catch(F){F instanceof Error&&(0,r.WI)((0,f.$l)((0,d.t_)("Saving rich history failed",F.message)));return}}const D=R=>{const F={range:{from:"now-1h",to:"now"},datasource:R.datasourceName,queries:R.queries,context:"explore"},B=(0,o.S)(F),K=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return o.Cj.renderUrl(`${K}/explore`,{left:B})},P=R=>{let F;switch(R){case 0:F="today";break;case 1:F="yesterday";break;case 7:F="a week ago";break;case 14:F="two weeks ago";break;default:F=`${R} days ago`}return F};function b(R){return(0,s.dq)(R,{format:"MMMM D"})}function M(R){const F=(0,t.omit)(R,["key","refId","datasource"]);return JSON.stringify(F)}function x(R,F){let B="";return F===i.A.DatasourceAZ||F===i.A.DatasourceZA?B=R.datasourceName:B=b(R.createdAt),B}function A(R,F){return F?.getQueryDisplayText?F.getQueryDisplayText(R):M(R)}function T(R,F){let B={};return R.forEach(K=>{let L=x(K,F);L in B?B[L]=[...B[L],K]:B[L]=[K]}),B}function S(){return(0,l.F)().getList({mixed:c.vc.featureToggles.exploreMixedDatasource===!0}).map(R=>({name:R.name,uid:R.uid}))}function U(R){const F=(0,t.omit)(R,["key","refId","datasource"]);return Object.keys(F).length>0}},43823:(Y,O,e)=>{"use strict";e.d(O,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(Y,O,e)=>{"use strict";e.d(O,{D:()=>a,L:()=>u});var t=e(58635),n=e(35645),o=e(54899),s=e(659),l=e(60499),f=e(3153),d=e(55935);function r(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function c(i){let p=i.replace(r(),"");return p.startsWith("/")?p.substring(1,p.length):p}const a=(0,t.Z)(async function(i){try{return(await(0,o.i)().post("/api/short-urls",{path:c(i)})).url}catch(p){console.error("Error when creating shortened link: ",p),(0,f.WI)((0,s.$l)((0,l.t_)("Error generating shortened link")))}}),u=async i=>{const p=await a(i);p?((0,d.n9)(p),(0,f.WI)((0,s.$l)((0,l.AT)("Shortened link copied to clipboard")))):(0,f.WI)((0,s.$l)((0,l.t_)("Error generating shortened link")))}},97724:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{getFlotRange:()=>s,getFlotTickDecimals:()=>l,getFlotTickSize:()=>o,getPrecision:()=>r,getScaledDecimals:()=>n,getStringPrecision:()=>c,grafanaTimeFormat:()=>f,logp:()=>d,tickStep:()=>t});function t(a,u,i){const p=Math.sqrt(50),g=Math.sqrt(10),y=Math.sqrt(2),E=Math.abs(u-a)/Math.max(0,i);let h=Math.pow(10,Math.floor(Math.log(E)/Math.LN10));const v=E/h;return v>=p?h*=10:v>=g?h*=5:v>=y&&(h*=2),u<a?-h:h}function n(a,u){return a-Math.floor(Math.log(u)/Math.LN10)}function o(a,u,i,p){const g=(u-a)/i;let y=-Math.floor(Math.log(g)/Math.LN10);const E=p,h=Math.pow(10,-y),v=g/h;let C;return v<1.5?C=1:v<3?(C=2,v>2.25&&(E==null||y+1<=E)&&(C=2.5,++y)):v<7.5?C=5:C=10,C*=h,C}function s(a,u,i,p){let y=+(a??i),E=+(u??p);const h=E-y;if(h===0){const C=Math.abs(E===0?1:E*.25);a===null&&(y-=C),(u==null||a!=null)&&(E+=C)}else .02!=null&&(a==null&&(y-=h*.02,y<0&&i!=null&&i>=0&&(y=0)),u==null&&(E+=h*.02,E>0&&p!=null&&p<=0&&(E=0)));return{min:y,max:E}}function l(a,u,i,p){const{min:g,max:y}=s(i.min,i.max,a,u),E=.3*Math.sqrt(p),h=(y-g)/E,v=-Math.floor(Math.log(h)/Math.LN10),C=Math.pow(10,-v),m=h/C;let D;m<1.5?D=1:m<3?(D=2,m>2.25&&(D=2.5)):m<7.5?D=5:D=10,D*=C;const P=Math.max(0,-Math.floor(Math.log(h)/Math.LN10)+1),b=P-Math.floor(Math.log(D)/Math.LN10);return{tickDecimals:P,scaledDecimals:b}}function f(a,u,i){if(u&&i&&a){const p=i-u,g=p/a/1e3,y=864e5,E=31536e6;return g<=45?"HH:mm:ss":g<=7200||p<=y?"HH:mm":g<=8e4?"MM/DD HH:mm":g<=2419200||p<=E?"MM/DD":"YYYY-MM"}return"HH:mm"}function d(a,u){return Math.log(a)/Math.log(u)}function r(a){const u=a.toString();return c(u)}function c(a){if(isNaN(a))return 0;const u=a.indexOf(".");return u===-1?0:a.length-u-1}},5242:(Y,O,e)=>{"use strict";e.d(O,{e:()=>n,h:()=>o});var t=e(67483);const n=(s,l)=>{const f={from:(0,t.zh)(l.from),to:(0,t.zh)(l.to)},d=(f.to.valueOf()-f.from.valueOf())/2;let r,c;return s===-1?(r=f.to.valueOf()-d,c=f.from.valueOf()-d):s===1?(r=f.to.valueOf()+d,c=f.from.valueOf()+d,r>Date.now()&&f.to.valueOf()<Date.now()&&(r=Date.now(),c=f.from.valueOf())):(r=f.to.valueOf(),c=f.from.valueOf()),{from:c,to:r}},o=(s,l)=>{const f=s.to.valueOf()-s.from.valueOf(),d=s.to.valueOf()-f/2,r=f===0?3e4:f*l,c=d+r/2;return{from:d-r/2,to:c}}},17804:(Y,O,e)=>{"use strict";e.d(O,{q7:()=>n});var t=e(67483);function n(l,f){if(!(l.fromDayOfWeek||l.from)&&!(l.toDayOfWeek||l.to))return[];const d={...l};d.from&&!d.to&&(d.to=d.from),!d.from&&d.to&&(d.from=d.to);const r={from:o(d.from),to:o(d.to)};if(!d.fromDayOfWeek&&d.toDayOfWeek&&(d.fromDayOfWeek=d.toDayOfWeek),!d.toDayOfWeek&&d.fromDayOfWeek&&(d.toDayOfWeek=d.fromDayOfWeek),d.fromDayOfWeek&&(r.from.dayOfWeek=Number(d.fromDayOfWeek)),d.toDayOfWeek&&(r.to.dayOfWeek=Number(d.toDayOfWeek)),r.from.dayOfWeek&&r.from.h==null&&r.from.m==null&&(r.from.h=0,r.from.m=0,r.from.s=0),r.to.dayOfWeek&&r.to.h==null&&r.to.m==null&&(r.to.h=23,r.to.m=59,r.to.s=59),!r.from||!r.to)return[];r.from.h==null&&(r.from.h=0),r.to.h==null&&(r.to.h=23);const c=[],a=(0,t.CQ)(f.from).utc();for(a.set("hour",0),a.set("minute",0),a.set("second",0),a.set("millisecond",0),a.add(r.from.h,"hours"),a.add(r.from.m,"minutes"),a.add(r.from.s,"seconds");a.unix()<=f.to.unix();){for(;r.from.dayOfWeek&&r.from.dayOfWeek!==a.isoWeekday();)a.add(24,"hours");if(a.unix()>f.to.unix())break;const u=(0,t.CQ)(a).utc();if(u.hour)if(r.from.h<=r.to.h)u.add(r.to.h-r.from.h,"hours");else if(r.from.h>r.to.h)for(;u.hour()!==r.to.h;)u.add(1,"hours");else for(u.add(24-r.from.h,"hours");u.hour()!==r.to.h;)u.add(1,"hours");for(u.set("minute",r.to.m??0),u.set("second",r.to.s??0);r.to.dayOfWeek&&r.to.dayOfWeek!==u.isoWeekday();)u.add(24,"hours");a.unix()<f.from.unix()&&u.unix()<f.from.unix()||a.unix()>f.to.unix()&&u.unix()>f.to.unix()||c.push({from:a.valueOf(),to:u.valueOf()}),a.add(24,"hours")}return c}function o(l){const f={};if(!l?.length)return f;const d=l.split(":");return d?.length&&(f.h=Math.min(23,Math.max(0,Number(d[0]))),d.length>1&&(f.m=Math.min(60,Math.max(0,Number(d[1]))),d.length>2&&(f.s=Math.min(60,Math.max(0,Number(d[2])))))),f}function s(l){if(!l||l.h==null&&l.m==null&&l.s==null)return"";let f=String(l.h??0).padStart(2,"0")+":"+String(l.m??0).padStart(2,"0");return l.s!=null&&(f+=String(l.s??0).padStart(2,"0")),f}},49427:(Y,O,e)=>{"use strict";e.d(O,{et:()=>s,fy:()=>f,nO:()=>l,np:()=>r});var t=e(53678),n=e(92468),o=e(99098);function s(c){return c.sort((u,i)=>u[0]-i[0]),c.reduce((u,i)=>{if(!u.length)return[i];const p=u.slice(-1)[0],[g,y]=p,[E,h]=i;return h<y?u:E>y?[...u,i]:[...u.slice(0,-1),[g,h]]},[]).reduce((u,i)=>u+(i[1]-i[0]),0)}function l(c){const a={};let u;for(let i=0;u=c(i),!!u;i++){a[u.id]?a[u.id].span=u.span:a[u.id]={span:u.span,children:[]};for(const p of u.parentIds)p&&(a[p]?a[p].children.push(u.id):a[p]={span:void 0,children:[u.id]})}return a}function f(c,a,u){return{main:`${d(c)}ms (${d(c/a*100)}%)`,secondary:`${d(u)}ms (${d(u/c*100)}%)`}}function d(c){return parseFloat(c.toFixed(2))}function r(){const c=new t.v({fields:[{name:n.z.id,type:o.fS.string},{name:n.z.title,type:o.fS.string},{name:n.z.subTitle,type:o.fS.string},{name:n.z.mainStat,type:o.fS.string,config:{displayName:"Total time (% of trace)"}},{name:n.z.secondaryStat,type:o.fS.string,config:{displayName:"Self time (% of total)"}},{name:n.z.color,type:o.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),a=new t.v({fields:[{name:n.z.id,type:o.fS.string},{name:n.z.target,type:o.fS.string},{name:n.z.source,type:o.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[c,a]}},53747:(Y,O,e)=>{"use strict";e.d(O,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},11268:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{addExtensionReducers:()=>Ua,init:()=>ps});var t=e(66121),n=e(35645),o=e(41818),s=e(77582),l=e(86475),f=e(77501),d=e(22357),r=e(27876),c=e(68082),a=e(66111),u=e(8581),i=e(39904);const p="licensedRole",g=[{value:"server_admin",label:"Server admin"},{value:"admin_editor",label:"Admin/editor"},{value:"viewer",label:"Viewer"}],y=({filters:W,onChange:te,className:ge})=>a.createElement(u.NU,{value:W.find(Oe=>Oe.name===p)?.value,options:g,onChange:Oe=>{te({name:p,value:Oe})},prefix:a.createElement(i.J,{name:"filter"}),width:64,placeholder:"Filter by licensed role",menuShouldPortal:!0,className:ge}),E=()=>{(0,c.SO)(y)};var h=e(54899),v=e(96116),C=e(48649);Array.from(Array(31),(W,te)=>{const ge=(te+1).toString();return{value:ge,label:ge}}).unshift({value:"last",label:"Last"});const D=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];var P=(W=>(W.Monthly="monthly",W.Weekly="weekly",W.Daily="daily",W.Hourly="hourly",W.Never="never",W.Custom="custom",W.Once="once",W))(P||{}),b=(W=>(W.Hours="hours",W.Days="days",W.Weeks="weeks",W.Months="months",W))(b||{}),M=(W=>(W.Default="",W.SentBy="sent-by",W.None="none",W))(M||{}),x=(W=>(W.Paused="paused",W.Scheduled="scheduled",W.Expired="expired",W.Draft="draft",W.Never="not scheduled",W))(x||{});const A=[{value:"landscape",label:"Landscape",icon:"gf-landscape"},{value:"portrait",label:"Portrait",icon:"gf-portrait"}],T=[{value:"grid",label:"Grid",icon:"gf-grid"},{value:"simple",label:"Simple",icon:"gf-layout-simple"}];var S=(W=>(W.SelectDashboard="select-dashboard",W.FormatReport="format-report",W.Schedule="schedule",W.Share="share",W.Confirm="confirm",W))(S||{}),U=(W=>(W.Stats="stats",W.Users="users",W.PublicDashboards="public-dashboards",W))(U||{}),R=e(5238),F=(W=>(W.ReportingCreate="reports:create",W.ReportingWrite="reports:write",W.ReportingDelete="reports:delete",W.ReportingRead="reports:read",W.ReportingSend="reports:send",W.ReportingSettingsWrite="reports.settings:write",W.ReportingSettingsRead="reports.settings:read",W.DataSourcesPermissionsRead="datasources.permissions:read",W.DataSourcesPermissionsWrite="datasources.permissions:write",W.DataSourcesCachingWrite="datasources.caching:write",W.LicensingRead="licensing:read",W.LicensingWrite="licensing:write",W.LicensingReportsRead="licensing.reports:read",W.DashboardsInsightsRead="dashboards.insights:read",W))(F||{}),B=e(71331),K=(W=>(W.General="general",W.KeyCert="key-cert",W.ConnectToIdP="connect-to-idp",W.AssertionMapping="assertion-mapping",W.SaveAndTest="save-and-test",W))(K||{}),L=e(40641),N=e(9892),z=e(66698),G=e(67948),I=e(72648),V=e(63619),H=e(24799),Q=e(46967),oe=e(8944),se=e(81764);const ie=({value:W,label:te,placeholder:ge,width:Oe,onChange:Ke})=>{const ot=(0,I.wW)(j),Rt=en=>{const Qt=en.currentTarget.value;Ke(Qt)};return a.createElement("div",{className:ot.assertionEditorRow},a.createElement(se._,{label:te,labelWidth:16},a.createElement(Q.I,{width:Oe||30,id:"assertionAttributeNameValue",value:W||"",onChange:Rt,placeholder:ge})))},j=W=>({assertionEditorRow:N.css`
      display: flex;
      margin-bottom: ${W.spacing(1)};
    `,inputLabel:N.css`
      color: ${W.components.input.text};
      background: ${W.components.input.background};
    `});var de=e(56895),ce=e(13393),ee=e(19825),le=e(19985),q=e(29460);function fe({validationResults:W,onStepChange:te,visitedSteps:ge=[],getNextUrl:Oe,steps:Ke,activeStep:ot=Ke[0].id}){const Rt=(0,I.wW)(Z),en=Ke[Ke.length-1];return a.createElement("ol",{className:Rt.container},Ke.map(Qt=>{const vn=Qt.id===en.id,bn=Qt.id===ot,mn=ge.includes(Qt.id)||ot===en.id,xn=!vn&&!W[Qt.id].valid,Jn=!bn&&!vn&&mn,Zn=Jn&&!xn,Vn=Jn&&xn,ea=(0,N.cx)(Rt.item,{[Rt.active]:bn,[Rt.successItem]:Zn,[Rt.warnItem]:Vn});return a.createElement("li",{key:Qt.id,className:ea},Zn&&a.createElement(i.J,{name:"check",size:"xl",className:Rt.successItem}),Vn&&a.createElement(i.J,{name:"exclamation-triangle",className:Rt.warnItem}),a.createElement(q.r,{onClick:bn?void 0:()=>te(Qt.id),href:Oe(Qt.id),className:Rt.link},Qt.name),!vn&&a.createElement("div",{className:Rt.divider},"\u2014"))}))}const Z=W=>({container:N.css`
      counter-reset: item;
      list-style-type: none;
      width: 100%;
      position: relative;
      display: flex;
      justify-content: center;
      border: 1px solid ${W.colors.border.weak};
      margin: ${W.spacing(4,0)};
    `,item:N.css`
      color: ${W.colors.text.secondary};
      display: flex;
      align-items: center;
    `,successItem:N.css`
      a {
        &::before {
          content: '';
        }
      }

      svg {
        color: ${W.colors.success.text};
        margin: ${W.spacing(0,.5,0,-1)};
      }
    `,warnItem:N.css`
      a::before {
        content: '';
      }
      svg {
        color: ${W.colors.warning.text};
        margin: ${W.spacing(0,1,.5,-.5)};
      }
    `,link:N.css`
      color: inherit;
      &:hover {
        color: ${W.colors.text.link};
      }

      &::before {
        content: counter(item) '  ';
        counter-increment: item;
      }
    `,active:N.css`
      font-weight: 500;
      color: ${W.colors.text.maxContrast};

      &::before {
        font-weight: 500;
      }
    `,divider:N.css`
      padding: ${W.spacing(2)};
    `});var ne=e(45253),re=e(85389);function ve(W){return{error:W.authConfig.updateError,warning:W.authConfig.warning}}const me={resetError:re.q$,resetWarning:re.gG},gt=(0,G.connect)(ve,me)(({error:W,warning:te,resetError:ge,resetWarning:Oe})=>a.createElement("div",null,W&&a.createElement(ne.b,{title:W.message,onRemove:()=>ge()},W.errors?.map((Ke,ot)=>a.createElement("div",{key:ot},Ke))),te&&a.createElement(ne.b,{title:te.message,onRemove:()=>Oe(),severity:"warning"},te.errors?.map((Ke,ot)=>a.createElement("div",{key:ot},Ke)))));var Te=e(35029),Le=e(31403);const Ye=({confirmRedirect:W,onDiscard:te,onLocationChange:ge})=>{const[Oe,Ke]=(0,a.useState)(!1),[ot,Rt]=(0,a.useState)(null),[en,Qt]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const xn=Jn=>{W&&(Jn.preventDefault(),Jn.returnValue="")};return window.addEventListener("beforeunload",xn),()=>{window.removeEventListener("beforeunload",xn)}},[W]);const vn=xn=>{const Jn=ge?.(xn);let Zn=W&&!en;return Jn!==void 0&&(Zn=Zn&&Jn),Zn?(Ke(!0),Rt(xn),!1):(Jn&&te(),!0)},bn=()=>{Ke(!1),Rt(null)},mn=()=>{Ke(!1),Qt(!0),te()};return a.createElement(a.Fragment,null,a.createElement(de.NL,{when:!0,message:vn}),ot&&en&&a.createElement(de.l_,{to:ot}),a.createElement(it,{isOpen:Oe,onDiscard:mn,onBackToForm:bn}))},it=({onDiscard:W,onBackToForm:te,isOpen:ge})=>a.createElement(Te.u,{isOpen:ge,title:"Leave page?",onDismiss:te,icon:"exclamation-triangle",className:N.css`
        width: 500px;
      `},a.createElement("h5",null,"Changes that you made may not be saved."),a.createElement(Te.u.ButtonRow,null,a.createElement(Le.zx,{variant:"secondary",onClick:te,fill:"outline"},"Continue editing"),a.createElement(Le.zx,{variant:"destructive",onClick:W},"Discard unsaved changes"))),ht=({error:W,onReset:te})=>a.createElement("div",null,W&&a.createElement(ne.b,{title:W.message,onRemove:te,severity:"warning"},W.errors?.map((ge,Oe)=>a.createElement("div",{key:Oe},ge))));var Re=e(37932),ye=e(82897);const Ce="/admin/authentication/saml",be=n.v.appUrl+"saml/metadata",We=n.v.appUrl+"saml/acs",Qe=n.v.appUrl+"saml/slo";function mt(W){return{enabled:vt(W.enabled),allowSignUp:vt(W.allow_sign_up),autoLogin:vt(W.auto_login),singleLogout:vt(W.single_logout),allowIdpInitiated:vt(W.allow_idp_initiated),skipOrgRoleSync:vt(W.skip_org_role_sync),name:rt(W.name),privateKey:rt(W.private_key),privateKeyPath:rt(W.private_key_path),certificate:rt(W.certificate),certificatePath:rt(W.certificate_path),signatureAlgorithm:rt(W.signature_algorithm),idpMetadata:rt(W.idp_metadata),idpMetadataPath:rt(W.idp_metadata_path),idpMetadataUrl:rt(W.idp_metadata_url),maxIssueDelay:rt(W.max_issue_delay),metadataValidDuration:rt(W.metadata_valid_duration),relayState:rt(W.relay_state),assertionAttributeName:rt(W.assertion_attribute_name),assertionAttributeLogin:rt(W.assertion_attribute_login),assertionAttributeEmail:rt(W.assertion_attribute_email),assertionAttributeGroups:rt(W.assertion_attribute_groups),assertionAttributeRole:rt(W.assertion_attribute_role),assertionAttributeOrg:rt(W.assertion_attribute_org),allowedOrganizations:rt(W.allowed_organizations),orgMapping:rt(W.org_mapping),roleValuesEditor:rt(W.role_values_editor),roleValuesAdmin:rt(W.role_values_admin),roleValuesGrafanaAdmin:rt(W.role_values_grafana_admin),nameIdFormat:rt(W.name_id_format)}}function vt(W){return W==="true"}function rt(W){return W||""}function Ot(W){return W?"true":"false"}function Et(W){return{enabled:Ot(W.enabled),allow_sign_up:Ot(W.allowSignUp),auto_login:Ot(W.autoLogin),single_logout:Ot(W.singleLogout),allow_idp_initiated:Ot(W.allowIdpInitiated),skip_org_role_sync:Ot(W.skipOrgRoleSync),name:rt(W.name),private_key:rt(W.privateKey),private_key_path:rt(W.privateKeyPath),certificate:rt(W.certificate),certificate_path:rt(W.certificatePath),signature_algorithm:rt(W.signatureAlgorithm),idp_metadata:rt(W.idpMetadata),idp_metadata_path:rt(W.idpMetadataPath),idp_metadata_url:rt(W.idpMetadataUrl),max_issue_delay:rt(W.maxIssueDelay),metadata_valid_duration:rt(W.metadataValidDuration),relay_state:rt(W.relayState),assertion_attribute_name:rt(W.assertionAttributeName),assertion_attribute_login:rt(W.assertionAttributeLogin),assertion_attribute_email:rt(W.assertionAttributeEmail),assertion_attribute_groups:rt(W.assertionAttributeGroups),assertion_attribute_role:rt(W.assertionAttributeRole),assertion_attribute_org:rt(W.assertionAttributeOrg),allowed_organizations:rt(W.allowedOrganizations),org_mapping:rt(W.orgMapping),role_values_editor:rt(W.roleValuesEditor),role_values_admin:rt(W.roleValuesAdmin),role_values_grafana_admin:rt(W.roleValuesGrafanaAdmin),name_id_format:rt(W.nameIdFormat)}}function Mt(W){const{keyCertValueType:te,metadataValueType:ge,signRequests:Oe}=W,{certificate_path:Ke,private_key_path:ot,certificate:Rt,private_key:en,idp_metadata_url:Qt,idp_metadata_path:vn,idp_metadata:bn,...mn}=Et(W),xn={updates:{"auth.saml":mn},removals:{"auth.saml":[]}};return te==="path"?(ot&&!Fe(ot)&&(xn.updates["auth.saml"].private_key_path=ot,xn.updates["auth.saml"].private_key=""),Ke&&!Fe(Ke)&&(xn.updates["auth.saml"].certificate_path=Ke,xn.updates["auth.saml"].certificate="")):te==="base64"&&(en&&!Fe(en)&&(xn.updates["auth.saml"].private_key=en,xn.updates["auth.saml"].private_key_path=""),Rt&&!Fe(Rt)&&(xn.updates["auth.saml"].certificate=Rt,xn.updates["auth.saml"].certificate_path="")),Oe||(xn.updates["auth.saml"].signature_algorithm=""),ge==="url"?(xn.updates["auth.saml"].idp_metadata_url=Qt,xn.updates["auth.saml"].idp_metadata_path="",xn.updates["auth.saml"].idp_metadata=""):ge==="path"?(xn.updates["auth.saml"].idp_metadata_path=vn,xn.updates["auth.saml"].idp_metadata_url="",xn.updates["auth.saml"].idp_metadata=""):ge==="base64"&&(xn.updates["auth.saml"].idp_metadata=bn,xn.updates["auth.saml"].idp_metadata_url="",xn.updates["auth.saml"].idp_metadata_path=""),xn}function ue(W,te){const ge={};return Object.keys(W).forEach(Oe=>{W[Oe]!==te[Oe]&&(ge[Oe]=W[Oe])}),ge}function De(W){const te=W?.split(/[,\s]/),ge=[];return te?.forEach(Oe=>{const Ke=Oe.split(":");if(Ke.length===3){const ot=tt(Ke[2]);ot&&ge.push({externalOrg:Ke[0],orgId:Ke[1],role:ot})}}),ge}function Ne(W){return W.map(ge=>`${ge.externalOrg}:${ge.orgId}:${ge.role}`).join(",")}function tt(W){return W==="Admin"||W==="Editor"||W==="Viewer"?W:null}const et={enabled:"false",skip_org_role_sync:"false"};function Ue(W){return(0,ye.isEqual)(W,et)}function Fe(W){return W?/^\*+$/.test(W):!1}function Ee(W,te,ge){switch(W){case"privateKey":return te[W]===ge.private_key&&!!ge.private_key;case"privateKeyPath":return te[W]===ge.private_key_path&&!!ge.private_key_path;case"certificate":return te[W]===ge.certificate&&!!ge.certificate;case"certificatePath":return te[W]===ge.certificate_path&&!!ge.certificate_path;default:return!1}}function Me(W){return W.idpMetadataPath?"path":W.idpMetadata?"base64":"url"}const He=W=>`${Ce}/${W||""}`;function Ze(W){const te=W["auth.saml"];for(const[ge,Oe]of Object.entries(te)){const Ke=Oe.system;if(Ke&&!lt(ge,Ke))return!0}return!1}function lt(W,te){return et[W]===te}const bt=W=>{if(!W)return Gn[0];const te=Gn.findIndex(ge=>ge.id===W);return te===Gn.length-1?Gn[te]:Gn[te+1]},Pt=W=>{if(!W||W===Gn[0].id)return;const te=Gn.findIndex(ge=>ge.id===W);return Gn[te-1]},Je=W=>{const te=Pt(W);te&&te.id!==W&&Re.E1.push(He(te.id))},Dt=(0,a.forwardRef)(({activeStep:W,disabled:te},ge)=>{const Oe=(0,I.wW)(Ve),Ke=(0,a.useRef)(null),ot=Pt(W),Rt=bt(W),en=Rt.id===W;(0,a.useImperativeHandle)(ge,()=>({click:()=>{Ke.current?.click()}}));const Qt=()=>{Ke.current?.click(),Je(W)};return a.createElement("div",{className:Oe.buttonRow},a.createElement("div",{className:Oe.buttonRowInner},a.createElement("div",null,ot&&a.createElement(Le.zx,{variant:"secondary",onClick:Qt},"Previous: ",ot.name),!en&&a.createElement(Le.zx,{ref:Ke,disabled:te,type:"submit"},"Next: ",Rt.name))))});Dt.displayName="ButtonRow";const Ve=W=>({buttonRow:N.css`
      display: flex;
      padding: ${W.spacing(2,0,.5,0)};
      border-top: 1px solid ${W.colors.border.weak};
      width: 100%;
      background-color: ${W.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${W.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:N.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
    `});var Xe=e(61860);const st=({enabled:W,configFoundInIniFile:te,isNewConfig:ge,onSave:Oe,onEnable:Ke,onSaveAndEnable:ot,onDisable:Rt,onRemove:en})=>{const Qt=(0,I.wW)(ut);let vn={text:"Disabled",color:"red",icon:"times"};return W?vn={text:"Enabled",color:"green",icon:"check"}:ge||(vn={text:"Not enabled",color:"blue"}),a.createElement(a.Fragment,null,a.createElement("div",{className:Qt.actionBarContainer},a.createElement("div",{className:Qt.protocolContainer},a.createElement("span",{className:Qt.protocolLabel},"Protocol"),a.createElement("span",null,"SAML 2.0")),!ge&&a.createElement("div",{className:Qt.statusContainer},a.createElement("span",{className:Qt.statusLabel},"Status"),a.createElement(le.C,{...vn,className:Qt.statusBadge})),!W&&a.createElement(a.Fragment,null,a.createElement(Le.zx,{variant:"secondary",onClick:Oe},"Save"),a.createElement(Le.zx,{variant:"primary",onClick:ot},"Save and enable")),W&&a.createElement(a.Fragment,null,a.createElement(Le.zx,{variant:"primary",onClick:Oe},"Save and apply"),a.createElement(Le.zx,{variant:"destructive",fill:"outline",onClick:Rt},"Disable")),!ge&&a.createElement(Le.zx,{variant:"destructive",onClick:en},"Discard")),te&&a.createElement("div",{className:Qt.iniFileLabel},a.createElement("span",{className:Qt.initext},a.createElement(Xe.u,{content:"Note: Settings enabled in the .ini configuration file may be overwritten by the current settings."},a.createElement(i.J,{name:"adjust-circle"})),"Configuration found in .ini file")))},ut=W=>({actionBarContainer:N.css`
      display: flex;
      flexdirection: row;
      gap: ${W.spacing(1)};
      align-items: center;
      justify-content: flex-end;
    `,iniFileLabel:N.css`
      display: flex;
      color: ${W.colors.text.primary};
      justify-content: flex-end;
    `,tooltipContainer:N.css`
      padding: ${W.spacing(0,1)};
    `,statusContainer:N.css`
      display: flex;
      flex-direction: column;
      font-size: ${W.typography.bodySmall.fontSize};
      border-left: 1px solid ${W.colors.border.medium};
      padding: ${W.spacing(0,2)};
    `,statusBadge:N.css`
      span {
        font-size: ${W.typography.size.xs};
      }
    `,statusLabel:N.css`
      color: ${W.colors.text.secondary};
    `,protocolContainer:N.css`
      display: flex;
      flex-direction: column;
      font-size: ${W.typography.bodySmall.fontSize};
      padding-right: ${W.spacing(1)};
    `,protocolLabel:N.css`
      color: ${W.colors.text.secondary};
    `,initext:N.css`
      font-size: ${W.typography.bodySmall.fontSize};
      color: ${W.colors.text.secondary};
      padding: ${W.spacing(1)} 0; // Add some padding
      max-width: 90%; // Add a max-width to prevent text from stretching too wide
    `});var xt=e(49922);const Kt="-----BEGIN",Jt="-----END",On="-----",Nn="MII";function jn(W,te,ge){jt(ge,W(te))}function ya(W){const te={valid:!0,errors:[]};return jn(Ht,W,te),jn($t,W,te),jn(zt,W,te),jn(Wt,W,te),te}function Lt(W,te){switch(te){case SAMLStepKey.General:return!Ht(W).valid;case SAMLStepKey.KeyCert:return!$t(W).valid;case SAMLStepKey.ConnectToIdP:return!zt(W).valid;case SAMLStepKey.AssertionMapping:return!Wt(W).valid;default:return!1}}function ft(W){const te={};return Gn.forEach(({id:ge})=>{switch(ge){case K.General:te[ge]=Ht(W);return;case K.KeyCert:te[ge]=$t(W);return;case K.ConnectToIdP:te[ge]=zt(W);return;case K.AssertionMapping:te[ge]=Wt(W);return}}),te}function Ht(W){const te={valid:!0,errors:[]},{allowIdpInitiated:ge,relayState:Oe}=W;return ge===!0&&!Oe&&sn(te,"Relay state should be configured"),te}function $t(W){const te={valid:!0,errors:[]},{privateKey:ge,privateKeyPath:Oe,certificate:Ke,certificatePath:ot}=W;return!ge&&!Oe&&sn(te,"Private key should be configured"),!Ke&&!ot&&sn(te,"Certificate key should be configured"),ge&&!ge.startsWith("***")&&!Mn(ge)&&sn(te,"Not valid PEM private key"),Ke&&!Ke.startsWith("***")&&!Mn(Ke)&&sn(te,"Not valid PEM certificate"),te}function zt(W){const te={valid:!0,errors:[]},{idpMetadataUrl:ge,idpMetadataPath:Oe,idpMetadata:Ke,metadataValueType:ot}=W;return(ot==="base64"&&!Ke||ot==="url"&&!ge||ot==="path"&&!Oe||!ge&&!Oe&&!Ke)&&sn(te,"IdP metadata should be configured"),te}function Wt(W){return{valid:!0,errors:[]}}function jt(W,te){te.valid||(W.valid=!1,W.errors?.push(...te.errors))}function sn(W,te){W.valid=!1,W.errors?.push(te)}function pn(W){return/^([0-9]*(\.[0-9]*)?[smh]+)+$/.test(W)}function Pn(W){let te=0,ge=W.length-1;return te=W.indexOf(Kt),te===-1?W:(te=W.indexOf(On,te+Kt.length),te===-1?"":(te+=On.length+1,ge=W.lastIndexOf(Jt)-1,W.slice(te,ge)))}function Mn(W){try{const te=atob(W),ge=Pn(te);return Cn(ge)}catch{return!1}}function Cn(W){return W?.indexOf(Nn)===0}var Hn=e(62992);const _n={assertionAttributeName:"displayName",assertionAttributeLogin:"mail",assertionAttributeEmail:"mail"},oa={storedSamlSettings:{},samlSettings:{},samlStep:1,activeStep:K.General,signRequests:!1,keyCertValueType:"base64",keyConfigured:!1,certConfigured:!1,metadataValueType:"url",configChanged:!1,showSavedBadge:!1,visitedSteps:[],isUpdated:!1,isLoading:!1,configFoundInIniFile:!1},Gt=(0,Hn.oM)({name:"samlConfig",initialState:oa,reducers:{settingsLoaded:(W,te)=>({...W,samlSettings:te.payload,configChanged:!1,isLoading:!1}),setStoredSAMLSettings:(W,te)=>({...W,storedSamlSettings:te.payload}),setConfigFoundInIniFile:(W,te)=>({...W,configFoundInIniFile:te.payload}),settingsUpdated:(W,te)=>({...W,samlSettings:te.payload,configChanged:!0}),settingsLoadingBegin:W=>({...W,isLoading:!0}),settingsLoadingEnd:W=>({...W,isLoading:!1}),samlStepChanged:(W,te)=>({...W,samlStep:te.payload}),setSignRequests:(W,te)=>({...W,signRequests:te.payload}),setKeyCertValueType:(W,te)=>({...W,keyCertValueType:te.payload}),setKeyConfigured:(W,te)=>({...W,keyConfigured:te.payload}),setCertConfigured:(W,te)=>({...W,certConfigured:te.payload}),setMetadataValueType:(W,te)=>({...W,metadataValueType:te.payload}),settingsChanged:(W,te)=>({...W,configChanged:te.payload}),setError:(W,te)=>({...W,error:te.payload}),resetError:W=>({...W,error:void 0}),setShowSavedBadge:(W,te)=>({...W,showSavedBadge:te.payload}),addVisitedStep:(W,te)=>({...W,visitedSteps:[...W.visitedSteps,...te.payload]}),clearSAMLState:W=>({...W,isUpdated:!1,visitedSteps:[]})}}),{settingsLoaded:Bt,settingsUpdated:on,samlStepChanged:rn,setStoredSAMLSettings:In,setSignRequests:Ln,setKeyCertValueType:Un,setKeyConfigured:qn,setCertConfigured:da,setMetadataValueType:ha,settingsChanged:Ta,setShowSavedBadge:Wa,setConfigFoundInIniFile:cs,addVisitedStep:is,clearSAMLState:Ha,settingsLoadingBegin:$a,settingsLoadingEnd:ss,setError:Oa,resetError:Ia}=Gt.actions,la={samlConfig:Gt.reducer},Ts=5e3;function bs(){return async W=>{if(s.Vt.hasPermission(r.AccessControlAction.SettingsRead))try{W($a());const ge=(await(0,h.i)().get("/api/admin/settings"))["auth.saml"]||{},Oe=mt(ge);try{const Ke=await ds();W(cs(Ze(Ke)))}catch(Ke){console.error("Failed to load verbose settings:",Ke)}W(In(ge)),W(Ln(!!Oe.signatureAlgorithm)),W(Un(Oe.privateKeyPath?"path":"base64")),W(qn(!!Oe.privateKeyPath||!!Oe.privateKey)),W(da(!!Oe.certificatePath||!!Oe.certificate)),W(ha(Me(Oe))),W(Bt(Oe))}catch{W(ss())}}}async function ds(){return s.Vt.hasPermission(r.AccessControlAction.SettingsRead)?(0,h.i)().get("/api/admin/settings-verbose"):{}}function Us(W,te){return async ge=>{ge(Ia());const Oe=ya(W);if(!Oe.valid){ge(Oa({message:"Cannot save settings",errors:Oe.errors}));return}const Ke=Mt(W);if(Ke.updates){const Rt=ue(Ke.updates["auth.saml"],te);Ke.updates["auth.saml"]=Rt}await ge((0,xt.zQ)(Ke))&&(ge(Tn()),ge(bs()))}}function Za(W){return async te=>{await te((0,xt.zQ)(W))&&(te(Tn()),te(bs()))}}function Ks(){return async W=>{W(Za({removals:{"auth.saml":["enabled","name","single_logout","allow_sign_up","auto_login","certificate","certificate_path","private_key","private_key_path","signature_algorithm","idp_metadata","idp_metadata_path","idp_metadata_url","max_issue_delay","metadata_valid_duration","allow_idp_initiated","relay_state","assertion_attribute_name","assertion_attribute_login","assertion_attribute_email","assertion_attribute_groups","assertion_attribute_role","assertion_attribute_org","allowed_organizations","org_mapping","role_values_editor","role_values_admin","role_values_grafana_admin","name_id_format","skip_org_role_sync"]}}))}}function dn(){return async W=>{W(Za({updates:{"auth.saml":{enabled:"true"}}}))}}function ln(){return async W=>{W(Za({updates:{"auth.saml":{enabled:"false"}}}))}}function Tn(){return async W=>{W(Wa(!0)),setTimeout(()=>{W(Wa(!1))},Ts)}}const zn=W=>{const{samlSettings:te,configFoundInIniFile:ge,storedSamlSettings:Oe,isUpdated:Ke,visitedSteps:ot,keyCertValueType:Rt,keyConfigured:en,certConfigured:Qt,signRequests:vn,metadataValueType:bn,showSavedBadge:mn,error:xn}=W.samlConfig;return{isUpdated:Ke,samlSettings:te,configFoundInIniFile:ge,storedSamlSettings:Oe,visitedSteps:ot,keyCertValueType:Rt,keyConfigured:en,certConfigured:Qt,signRequests:vn,metadataValueType:bn,showSavedBadge:mn,error:xn}},ga={addVisitedStep:is,clearSAMLState:Ha,saveSAMLSettings:Us,enableSAML:dn,disableSAML:ln,resetSAMLSettings:Ks,setError:Oa,resetError:Ia},va=(0,G.connect)(zn,ga),Ga=({samlSettings:W,storedSamlSettings:te,keyCertValueType:ge,metadataValueType:Oe,signRequests:Ke,activeStep:ot,addVisitedStep:Rt,children:en,clearSAMLState:Qt,confirmRedirect:vn,keyConfigured:bn,certConfigured:mn,isUpdated:xn,error:Jn,resetError:Zn,visitedSteps:Vn,showSavedBadge:ea,label:ta,className:pa,getFormData:Sa,onSubmit:wa,saveSAMLSettings:Fa,enableSAML:ls,configFoundInIniFile:Ma,disableSAML:Ka,resetSAMLSettings:ka})=>{const Ns=(0,I.wW)(qa),Ds=bt(ot),ns=(0,de.k6)(),Fs=(0,a.useRef)(null),[Xs,dr]=(0,a.useState)(vn||xn);(0,a.useEffect)(()=>{(uo=>{uo===Gn[Gn.length-1].id?Rt(Gn.map(Bm=>Bm.id)):Rt([uo])})(ot)},[ot,Rt]),(0,a.useEffect)(()=>{dr(vn||xn)},[vn,xn]);const ir=qr=>{qr.preventDefault();const uo=He(Ds.id);wa(),ns.push(uo)},qs=()=>{let qr={...W,keyCertValueType:ge,signRequests:Ke,metadataValueType:Oe,keyConfigured:bn,certConfigured:mn};if(Sa){const uo=Sa();qr={...qr,...uo}}return qr},Mr=async qr=>{const uo=qs();qr&&(uo.enabled=!0),Fa(uo,te),(0,o.ff)("authentication_saml_saved"),dr(!1),Qt()},vr=()=>{Qt(),(0,o.ff)("authentication_saml_abandoned")},Zs=qr=>!Gn.map(Bm=>He(Bm.id)).includes(qr.pathname),Nr=()=>{const qr=Gn[Gn.length-1].id;ot!==qr&&Fs.current?.click()},bf=ft(qs());return a.createElement("form",{onSubmit:ir,className:Ns.container},a.createElement(st,{enabled:W.enabled,configFoundInIniFile:Ma,isNewConfig:Ue(te),onSave:()=>Mr(),onSaveAndEnable:()=>Mr(!0),onEnable:ls,onDisable:Ka,onRemove:ka}),a.createElement(Ye,{confirmRedirect:Xs,onDiscard:vr,onLocationChange:Zs}),a.createElement("div",{className:Ns.inner},a.createElement(fe,{steps:Gn,activeStep:ot,visitedSteps:Vn,onStepChange:Nr,getNextUrl:He,validationResults:bf}),a.createElement(gt,null),a.createElement(ht,{error:Jn,onReset:Zn}),a.createElement("div",{className:(0,N.cx)(Ns.content,pa)},a.createElement(ce.C,{label:a.createElement("div",{className:Ns.header},ta&&a.createElement(ee.D,null,ta),a.createElement("div",null,ea&&a.createElement(le.C,{text:"Saved",color:"green",icon:"check"})))},en),a.createElement(Dt,{ref:Fs,activeStep:ot}))))},qa=W=>({container:N.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,header:N.css`
      display: flex;
      justify-content: space-between;
    `,inner:N.css`
      display: flex;
      justify-content: flex-start;
      flex-direction: column;
      flex: 1 0 auto;
    `,content:N.css`
      padding-bottom: ${W.spacing(3)};
    `}),es=va(Ga),us=[{label:"Default",value:""},{label:"Unspecified",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"},{label:"Email address",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"},{label:"Persistent",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"},{label:"Transient",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient"}];function hs(W){return{samlSettings:W.samlConfig.samlSettings}}const $s={settingsUpdated:on},tr=(0,G.connect)(hs,$s),mr=({samlSettings:W,settingsUpdated:te})=>{const ge=(0,I.wW)(ur),{assertionAttributeName:Oe,assertionAttributeLogin:Ke,assertionAttributeEmail:ot,assertionAttributeRole:Rt,assertionAttributeGroups:en,assertionAttributeOrg:Qt,roleValuesEditor:vn,roleValuesAdmin:bn,roleValuesGrafanaAdmin:mn,orgMapping:xn,allowedOrganizations:Jn,nameIdFormat:Zn,skipOrgRoleSync:Vn}=W,{handleSubmit:ea,control:ta,register:pa,getValues:Sa,formState:{isDirty:wa}}=(0,z.cI)({defaultValues:{assertionAttributeName:Oe,assertionAttributeLogin:Ke,assertionAttributeEmail:ot,assertionAttributeRole:Rt,assertionAttributeGroups:en,assertionAttributeOrg:Qt,roleValuesEditor:vn,roleValuesAdmin:bn,roleValuesGrafanaAdmin:mn,orgMapping:xn,allowedOrganizations:Jn,nameIdFormat:Zn||"",skipOrgRoleSync:Vn}}),Fa=({...Ds})=>{wa&&te({...W,...Ds})},{orgRole:ls,isGrafanaAdmin:Ma}=s.Vt.user,Ka=Ma,ka=ls==="Admin"||Ka,Ns=ls==="Editor"||ka;return a.createElement(es,{activeStep:K.AssertionMapping,onSubmit:ea(Fa),confirmRedirect:wa,getFormData:Sa,className:ge.wrapper,label:"User mapping"},a.createElement("div",{className:ge.description},"Map SAML assertion attributes to the Grafana user attributes. Assertion attributes support template mappings. Team sync is available if groups attribute is configured."),a.createElement("div",{className:ge.mappingContainer},a.createElement("div",{className:ge.mappingSection},a.createElement("div",{className:ge.mappingHeader},"Assertion attributes mappings"),a.createElement(V.g,{name:"assertionAttributeName",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Name attribute",placeholder:"displayName"})}),a.createElement(V.g,{name:"assertionAttributeLogin",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Login attribute",placeholder:"mail"})}),a.createElement(V.g,{name:"assertionAttributeEmail",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Email attribute",placeholder:"mail"})}),a.createElement(V.g,{name:"assertionAttributeGroups",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Groups attribute"})}),a.createElement(V.g,{name:"assertionAttributeRole",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Role attribute"})}),ka&&a.createElement(V.g,{name:"assertionAttributeOrg",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Org attribute"})})),a.createElement("div",{className:ge.mappingSection},Ns&&a.createElement(a.Fragment,null,a.createElement("div",{className:ge.mappingHeader},"Role mapping"),a.createElement(V.g,{name:"roleValuesEditor",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Editor",width:60})})),ka&&a.createElement(V.g,{name:"roleValuesAdmin",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Admin",width:60})}),Ka&&a.createElement(V.g,{name:"roleValuesGrafanaAdmin",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Grafana Admin",width:60})})),Ka&&a.createElement("div",{className:ge.mappingSection},a.createElement("div",{className:ge.mappingHeader},"Org mapping"),a.createElement(V.g,{name:"orgMapping",control:ta,render:({field:{ref:Ds,...ns}})=>a.createElement(ie,{...ns,label:"Org mapping",width:60})}))),a.createElement(H.g,{label:"Allowed organizations",description:"List of comma- or space-separated SAML organization names. User should be a member of at least one organization to log in."},a.createElement(Q.I,{...pa("allowedOrganizations"),id:"allowedOrganizations",width:60})),a.createElement(H.g,{label:"Name identifier format",description:"Name identifier formats control how the users at identity provider are mapped to users in Grafana"},a.createElement(V.g,{name:"nameIdFormat",control:ta,render:({field:{ref:Ds,onChange:ns,...Fs}})=>a.createElement(u.Ph,{...Fs,onChange:Xs=>{ns(Xs.value)},width:30,options:us})})),a.createElement(H.g,{label:"Skip organization role sync"},a.createElement(oe.r,{...pa("skipOrgRoleSync"),defaultChecked:Vn,id:"skipOrgRoleSync"})))},ur=W=>({wrapper:N.css`
      width: 100%;
    `,description:N.css`
      color: ${W.colors.text.secondary};
      margin-bottom: ${W.spacing(2)};
      font-size: ${W.typography.bodySmall.fontSize};
      width: ${W.spacing(80)};
    `,mappingContainer:N.css`
      background: ${W.colors.background.secondary};
      padding: ${W.spacing(2)};
      margin-bottom: ${W.spacing(4)};
    `,mappingSection:N.css`
      margin-bottom: ${W.spacing(2)};
    `,mappingHeader:N.css`
      margin-bottom: ${W.spacing(2)};
    `,assertionEditorRow:N.css`
      display: flex;
      margin-bottom: ${W.spacing(1)};
    `}),sr=tr(mr);var er=e(94599),ks=e(2594),Er=e(97379),Vs=e(82381);function Tr(W){return{samlSettings:W.samlConfig.samlSettings,metadataValueType:W.samlConfig.metadataValueType}}const pr={settingsUpdated:on,setMetadataValueType:ha},yr=(0,G.connect)(Tr,pr),Cr=[{label:"URL for metadata",value:"url"},{label:"Base64-encoded content",value:"base64"},{label:"Path to file",value:"path"}],Or=({samlSettings:W,metadataValueType:te,settingsUpdated:ge,setMetadataValueType:Oe})=>{const Ke=(0,I.wW)(fr),{idpMetadataUrl:ot,idpMetadataPath:Rt,idpMetadata:en,singleLogout:Qt}=W,{handleSubmit:vn,control:bn,register:mn,watch:xn,getValues:Jn,setValue:Zn,formState:{errors:Vn,isDirty:ea}}=(0,z.cI)({mode:"onBlur",defaultValues:{idpMetadataUrl:ot,idpMetadataPath:Rt,idpMetadata:en,metadataValueType:te||"url"}}),ta=xn("metadataValueType"),pa=({metadataValueType:wa,...Fa})=>{ea&&(ge({...W,...Fa}),Oe(wa))},Sa=async wa=>{if(wa?.currentTarget?.files?.length){const ls=await wa.currentTarget.files[0].text(),Ma=btoa(ls);Zn("idpMetadata",Ma,{shouldDirty:!0})}};return a.createElement(es,{activeStep:K.ConnectToIdP,onSubmit:vn(pa),confirmRedirect:ea,getFormData:Jn,className:Ke.wrapper,label:"Connect Grafana with Identity Provider"},a.createElement("div",{className:Ke.externalBorder},a.createElement("div",{className:Ke.doubleSideContainer},a.createElement("div",{className:Ke.internalContainer},a.createElement("div",{className:Ke.internalContainerHeader},a.createElement("div",{className:Ke.stepNumber},"1"),a.createElement("h4",null,"Configure IdP using Grafana metadata")),a.createElement("div",{className:Ke.internalContainerBody},a.createElement("div",{className:Ke.description},"To configure your identity provider (IdP) you will need the Grafana metadata URL. All below endpoints must be reachable by your Identity Provider (IdP)."),a.createElement(H.g,{label:"Metadata URL",description:"SP metadata URL / SP Entity ID"},a.createElement("div",{className:Ke.inputWithCopyToClipboard},a.createElement(Q.I,{width:50,id:"spMetadata",value:be,disabled:!0}),a.createElement(er.m,{className:Ke.copyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>be},"Copy"))),a.createElement(H.g,{label:"Assertion Consumer Service URL",description:"Assertion consumer service POST binding URL"},a.createElement("div",{className:Ke.inputWithCopyToClipboard},a.createElement(Q.I,{width:50,id:"spACS",value:We,disabled:!0}),a.createElement(er.m,{className:Ke.copyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>We},"Copy"))),Qt&&a.createElement(H.g,{label:"SLO URL",description:"Logout service redirect binding URL / Logout service POST binding URL"},a.createElement("div",{className:Ke.inputWithCopyToClipboard},a.createElement(Q.I,{width:50,id:"spSLO",value:Qe,disabled:!0}),a.createElement(er.m,{className:Ke.copyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>Qe},"Copy"))))),a.createElement("div",{className:Ke.internalContainer},a.createElement("div",{className:Ke.internalContainerHeader},a.createElement("div",{className:Ke.stepNumber},"2"),a.createElement("h4",null,"Finish configuring Grafana using IdP data")),a.createElement("div",{className:Ke.internalContainerBody},a.createElement("div",{className:Ke.description},"Visit your IdP's configuration panel, add new app and use metadata from step one to connect with Grafana. You will need to copy your IdP's metadata and provide it below. Test connection and copy assertion labels/values."),a.createElement(H.g,{label:"IdP's metadata ",description:"Must be the same as set-up or required by IdP."},a.createElement(V.g,{name:"metadataValueType",control:bn,render:({field:{ref:wa,...Fa}})=>a.createElement(ks.S,{...Fa,options:Cr})})),ta==="url"&&a.createElement(H.g,{label:"Metadata URL",description:"URL for IdP metadata",invalid:!!Vn.idpMetadataUrl,error:Vn.idpMetadataUrl?.message},a.createElement(Q.I,{...mn("idpMetadataUrl",{validate:wa=>ta==="url"&&!!wa||"Required"}),id:"metadataUrl",width:60})),ta==="base64"&&a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Base64-encoded IdP metadata",invalid:!!Vn.idpMetadata,error:Vn.idpMetadata?.message},a.createElement(V.g,{name:"idpMetadata",control:bn,rules:{validate:wa=>ta==="base64"&&!!wa||"Required"},render:({field:{ref:wa,...Fa}})=>a.createElement(Er.K,{...Fa,id:"metadataBase64",width:60})})),a.createElement(Vs.p,{showFileName:!1,onFileUpload:Sa,className:Ke.uploadButton})),ta==="path"&&a.createElement(H.g,{label:"Path to IdP metadata file",invalid:!!Vn.idpMetadataPath,error:Vn.idpMetadataPath?.message},a.createElement(Q.I,{...mn("idpMetadataPath",{validate:wa=>ta==="path"&&!!wa||"Required"}),id:"metadataPath",width:60})),a.createElement("div",{className:Ke.description},"If you want to test the connection from your IdP's panel make sure to allow IdP initiated login and provide the relay state information.")))),a.createElement("div",{className:Ke.internalContainerHeader},a.createElement("div",{className:Ke.stepNumber},"3"),a.createElement("h4",null,"Configure assertions, group, group and org mappings in the next step."))))},fr=W=>({wrapper:N.css`
      width: 100%;
    `,description:N.css`
      color: ${W.colors.text.secondary};
      margin-bottom: ${W.spacing(2)};
      font-size: ${W.typography.bodySmall.fontSize};
    `,externalBorder:N.css`
      border-radius: ${W.shape.borderRadius(1)};
      border: 1px solid ${W.colors.border.medium};
    `,doubleSideContainer:N.css`
      display: flex;
      flex-direction: row;
      justify-content: space-around;
    `,internalContainer:N.css`
      flex: 1 1 0;
      border-bottom: 1px solid ${W.colors.border.medium};
      &:first-child {
        border-right: 1px solid ${W.colors.border.medium};
      }
    `,internalContainerHeader:N.css`
      display: flex;
      justify-content: center;
      border-bottom: 1px solid ${W.colors.border.medium};
      padding: ${W.spacing(2)};
      text-align: center;
      h4 {
        margin-bottom: 0;
      }
    `,internalContainerBody:N.css`
      padding: ${W.spacing(2)};
    `,stepNumber:N.css`
      border: 1px solid ${W.colors.background.secondary};
      border-radius: ${W.shape.borderRadius(4)};
      background: ${W.colors.background.secondary};
      color: ${W.colors.text.secondary};
      width: ${W.spacing(3)};
      height: ${W.spacing(3)};
      margin-right: ${W.spacing(1)};
      font-weight: ${W.typography.fontWeightBold};
    `,copyToClipboardButton:N.css`
      border-top-left-radius: 0px;
      border-bottom-left-radius: 0px;
    `,inputWithCopyToClipboard:N.css`
      padding: 0;
      display: flex;
    `,uploadButton:N.css`
      margin-bottom: ${W.spacing(2)};
    `}),Js=yr(Or);var Os=e(52081);const lr=W=>{const{samlSettings:te}=W.samlConfig;return{samlSettings:te}},fn={settingsUpdated:on},At=(0,G.connect)(lr,fn)(({samlSettings:W,settingsUpdated:te})=>{const{allowSignUp:ge,name:Oe,autoLogin:Ke,singleLogout:ot,allowIdpInitiated:Rt,relayState:en,maxIssueDelay:Qt,metadataValidDuration:vn}=W||{},{handleSubmit:bn,register:mn,watch:xn,getValues:Jn,formState:{isDirty:Zn,errors:Vn}}=(0,z.cI)({mode:"onBlur",defaultValues:{allowSignUp:ge,name:Oe,autoLogin:Ke,singleLogout:ot,allowIdpInitiated:Rt,relayState:en,maxIssueDelay:Qt,metadataValidDuration:vn}}),ea=xn("allowIdpInitiated"),ta=Sa=>{Zn&&te({...W,...Sa})},pa=Sa=>!Sa||pn(Sa)?!0:"Not a valid duration";return a.createElement(es,{activeStep:K.General,onSubmit:bn(ta),confirmRedirect:Zn,getFormData:Jn,label:"General settings"},a.createElement(Os.Lh,null,a.createElement(H.g,{label:"Display name for this SAML 2.0 integration",description:"Helpful if you use more than one SSO IdP provider or protocol."},a.createElement(Q.I,{...mn("name"),id:"displayName",placeholder:"SAML"}))),a.createElement(H.g,{label:"Allow signup",description:"Whether to allow new Grafana user creation through SAML login. If not enabled, then only existing Grafana users can log in with SAML."},a.createElement(oe.r,{...mn("allowSignUp"),defaultChecked:ge,id:"allowSignup"})),a.createElement(H.g,{label:"Auto login",description:"Attempt to log in with SAML automatically, skipping the login screen."},a.createElement(oe.r,{...mn("autoLogin"),defaultChecked:Ke,id:"autoLogin"})),a.createElement(H.g,{label:"Single logout",description:"Allows users to log out from IdP session and applications associated with the current IdP session established via SAML."},a.createElement(oe.r,{...mn("singleLogout"),defaultChecked:ot,id:"singleLogout"})),a.createElement(H.g,{label:"Identity provider initiated login",description:"Allows users to log in into Grafana directly from identity provider."},a.createElement(oe.r,{...mn("allowIdpInitiated"),defaultChecked:Rt,id:"allowIdpInitiated"})),ea&&a.createElement(H.g,{label:"Relay state",description:"Required. Should match relay state configured in IdP and trailing space is required.",required:ea,invalid:ea&&!!Vn.relayState,error:Vn.relayState?.message},a.createElement(Q.I,{...mn("relayState",{validate:Sa=>ea&&!!Sa||"Relay state is required"}),width:60,id:"relayState",defaultValue:en})),a.createElement(H.g,{label:"Max issue delay",description:"Duration, since the IdP issued a response and Grafana is allowed to process it.",invalid:!!Vn.maxIssueDelay,error:Vn.maxIssueDelay?.message},a.createElement(Q.I,{...mn("maxIssueDelay",{validate:pa}),width:24,id:"max_issue_delay",defaultValue:Qt,placeholder:"90s"})),a.createElement(H.g,{label:"Metadata valid duration",description:"Duration, for how long Grafana metadata is valid.",invalid:!!Vn.metadataValidDuration,error:Vn.metadataValidDuration?.message},a.createElement(Q.I,{...mn("metadataValidDuration",{validate:pa}),defaultValue:vn,width:24,id:"metadataValidDuration",placeholder:"48h"})))}),tn=({isConfigured:W,onReset:te,...ge})=>{const Oe=(0,I.wW)(Rn);return a.createElement("div",{className:Oe.inputWithReset},W&&a.createElement(Q.I,{...ge,value:"configured",disabled:!0}),!W&&a.createElement(Q.I,{...ge}),W&&a.createElement(Le.zx,{className:Oe.resetButton,variant:"primary",size:"md",onClick:te},"Reset"))},Rn=W=>({resetButton:N.css`
      border-top-left-radius: 0px;
      border-bottom-left-radius: 0px;
    `,inputWithReset:N.css`
      padding: 0;
      display: flex;
    `}),Dn=({isConfigured:W,onReset:te,onFileUpload:ge,...Oe})=>{const Ke=(0,I.wW)(kn);return a.createElement("div",{className:Ke.inputWithReset},a.createElement("div",{className:Ke.textAreaInput},W&&a.createElement(Er.K,{...Oe,value:"configured",disabled:!0}),!W&&a.createElement(Er.K,{...Oe})),W&&a.createElement(Le.zx,{className:Ke.fileUploadButton,variant:"primary",size:"md",onClick:te},"Reset"),!W&&a.createElement(Vs.p,{className:Ke.fileUploadButton,showFileName:!1,onFileUpload:ge}))},kn=W=>({resetButton:N.css`
      border-top-left-radius: 0px;
      border-bottom-left-radius: 0px;
    `,fileUploadButton:N.css`
      margin-left: ${W.spacing(1)};
    `,inputWithReset:N.css`
      padding: 0;
      display: flex;
    `,textAreaInput:N.css`
      width: ${W.spacing(60)};
    `});function aa(W){const{samlSettings:te,storedSamlSettings:ge,signRequests:Oe,keyCertValueType:Ke,keyConfigured:ot,certConfigured:Rt}=W.samlConfig;return{samlSettings:te,storedSettings:ge,signRequests:Oe,keyCertValueType:Ke,keyConfigured:ot,certConfigured:Rt}}const Qn={settingsUpdated:on,setSignRequests:Ln,setKeyCertValueType:Un,setKeyConfigured:qn,setCertConfigured:da},ia=(0,G.connect)(aa,Qn),ja=[{label:"Base64-encoded content",value:"base64"},{label:"Path to file",value:"path"}],Tt=[{label:"RSA-SHA256 (default)",value:"rsa-sha256"},{label:"RSA-SHA512",value:"rsa-sha512"},{label:"RSA-SHA1",value:"rsa-sha1"}],Ae=ia(({samlSettings:W,storedSettings:te,signRequests:ge,keyCertValueType:Oe,keyConfigured:Ke,certConfigured:ot,setKeyCertValueType:Rt,setSignRequests:en,setKeyConfigured:Qt,setCertConfigured:vn,settingsUpdated:bn})=>{const{privateKey:mn,privateKeyPath:xn,certificate:Jn,certificatePath:Zn,signatureAlgorithm:Vn}=W||{},{handleSubmit:ea,control:ta,register:pa,watch:Sa,getValues:wa,setValue:Fa,formState:{errors:ls,isDirty:Ma}}=(0,z.cI)({mode:"onBlur",defaultValues:{privateKey:mn||"",privateKeyPath:xn||"",certificate:Jn||"",certificatePath:Zn||"",signatureAlgorithm:Vn||"rsa-sha256",keyCertValueType:Oe,signRequests:ge}}),Ka=Sa("signRequests"),ka=Sa("keyCertValueType"),Ns=wa(),Ds=Ke&&Ee("privateKey",Ns,te),ns=Ke&&Ee("privateKeyPath",Ns,te),Fs=ot&&Ee("certificate",Ns,te),Xs=ot&&Ee("certificatePath",Ns,te),dr=Zs=>{if(Ma){const{signRequests:Nr,keyCertValueType:bf,certConfigured:qr,keyConfigured:uo,...Bm}=Zs;bn({...W,...Bm}),en(Nr),Rt(bf)}},ir=()=>{const{...Zs}=wa();return{...Zs,keyConfigured:Ke,certConfigured:ot}},qs=Zs=>()=>{Fa(Zs,"",{shouldDirty:!0}),["privateKey","privateKeyPath"].includes(Zs)?Qt(!1):vn(!1)},Mr=Zs=>async Nr=>{if(Nr?.currentTarget?.files?.length){const qr=await Nr.currentTarget.files[0].text(),uo=btoa(qr);Fa(Zs,uo,{shouldDirty:!0})}},vr=(Zs,Nr)=>Nr?!0:Oe==="base64"&&Zs&&!Mn(Zs)?"Not valid PEM key/certificate":!0;return a.createElement(es,{activeStep:K.KeyCert,onSubmit:ea(dr),confirmRedirect:Ma,getFormData:ir,label:"Key and certificate"},a.createElement(H.g,{label:"Signing and encryption key and certificate (required)",description:`Certificate and private key required to exchange information between the Grafana and the IdP.
          The private key needs to be issued in a PKCS#8 format. Certificate should be valid X.509 certificate.`},a.createElement(V.g,{name:"keyCertValueType",control:ta,render:({field:{ref:Zs,...Nr}})=>a.createElement(ks.S,{...Nr,options:ja})})),ka==="base64"&&a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Private key",description:"Base64-encoded private key",invalid:!!ls.privateKey,error:ls.privateKey?.message},a.createElement(V.g,{name:"privateKey",control:ta,rules:{validate:Zs=>vr(Zs,Ke)},render:({field:{ref:Zs,...Nr}})=>a.createElement(Dn,{...Nr,id:"privateKey",isConfigured:Ds,onReset:qs("privateKey"),onFileUpload:Mr("privateKey")})})),a.createElement(H.g,{label:"Certificate",description:"Base64-encoded Grafana X.509 certificate",invalid:!!ls.certificate,error:ls.certificate?.message},a.createElement(V.g,{name:"certificate",control:ta,rules:{validate:Zs=>vr(Zs,ot)},render:({field:{ref:Zs,...Nr}})=>a.createElement(Dn,{...Nr,id:"certificate",isConfigured:Fs,onReset:qs("certificate"),onFileUpload:Mr("certificate")})}))),ka==="path"&&a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Private key",description:"Path to the Grafana private key",invalid:!!ls.privateKey,error:ls.privateKey?.message},a.createElement(V.g,{name:"privateKeyPath",control:ta,render:({field:{ref:Zs,...Nr}})=>a.createElement(tn,{...Nr,width:60,id:"privateKeyPath",isConfigured:ns,onReset:qs("privateKeyPath")})})),a.createElement(H.g,{label:"Certificate",description:"Path to the Grafana X.509 certificate",invalid:!!ls.certificate,error:ls.certificate?.message},a.createElement(V.g,{name:"certificatePath",control:ta,render:({field:{ref:Zs,...Nr}})=>a.createElement(tn,{...Nr,width:60,id:"certificatePath",isConfigured:Xs,onReset:qs("certificatePath")})}))),a.createElement(H.g,{label:"Sign requests",description:"Sign outgoing requests to IdP"},a.createElement(oe.r,{...pa("signRequests"),id:"signRequests"})),Ka&&a.createElement(H.g,{label:"Signature algorithm",description:"Signature algorithm used for signing requests to the IdP. Must be the same as set-up or required by IdP."},a.createElement(V.g,{name:"signatureAlgorithm",control:ta,render:({field:{ref:Zs,...Nr}})=>a.createElement(ks.S,{...Nr,options:Tt})})))});function nt(W){const{samlSettings:te,storedSamlSettings:ge,keyCertValueType:Oe,metadataValueType:Ke,signRequests:ot,keyConfigured:Rt,certConfigured:en}=W.samlConfig;return{samlSettings:te,storedSamlSettings:ge,keyCertValueType:Oe,metadataValueType:Ke,signRequests:ot,keyConfigured:Rt,certConfigured:en}}const ct={settingsUpdated:on,saveSAMLSettings:Us},wt=(0,G.connect)(nt,ct),_t=({samlSettings:W,storedSamlSettings:te,keyCertValueType:ge,metadataValueType:Oe,signRequests:Ke,keyConfigured:ot,certConfigured:Rt,settingsUpdated:en,saveSAMLSettings:Qt})=>{const vn=(0,I.wW)(Nt),{handleSubmit:bn,getValues:mn,formState:{isDirty:xn}}=(0,z.cI)(),Jn=({enabled:Vn})=>{xn&&en({...W,enabled:Vn})},Zn=async()=>{let Vn={...W,keyCertValueType:ge,keyConfigured:ot,certConfigured:Rt,signRequests:Ke,metadataValueType:Oe,enabled:!0};Qt(Vn,te),(0,o.ff)("authentication_saml_saved"),Ha()};return a.createElement(es,{activeStep:K.SaveAndTest,onSubmit:bn(Jn),confirmRedirect:xn,getFormData:mn,label:"Test and enable"},a.createElement("div",{className:vn.description},a.createElement("span",null,"If you are ready to apply your SAML configuration use the \u201CSave and enable\u201D button. You will be able to disable the configuration.")),a.createElement(Os.Lh,null,a.createElement(Le.zx,{variant:"primary",onClick:Zn},"Save and enable")))},Nt=W=>({description:N.css`
      margin-bottom: ${W.spacing(2)};
      color: ${W.colors.text.primary};
      font-size: ${W.typography.body.fontSize};
    `}),at=wt(_t);function An(){const W={id:"saml",type:"SAML",protocol:"SAML 2.0",displayName:"SAML",configPath:"saml/general"};(0,L.registerAuthProvider)(W,Fn)}async function Fn(){if(s.Vt.hasPermission(r.AccessControlAction.SettingsRead)){const W=await(0,h.i)().get("/api/admin/settings"),te=await(0,h.i)().get("/api/admin/settings-verbose"),ge=W["auth.saml"]||{};return Ue(ge)?{configured:!1,enabled:!1}:{configured:!0,enabled:ge.enabled==="true",configFoundInIniFile:Ze(te)}}return{configured:!1,enabled:!1}}const Gn=[{id:K.General,name:"General settings",component:At},{id:K.KeyCert,name:"Key and certificate",component:Ae},{id:K.ConnectToIdP,name:"Connect Grafana with Identity Provider",component:Js},{id:K.AssertionMapping,name:"User mapping",component:sr},{id:K.SaveAndTest,name:"Test and enable",component:at}];var $n=e(8412),Ra=e(43714);function ts(W,te){const{isLoading:ge,samlSettings:Oe}=W.samlConfig,{step:Ke}=te.match.params;return{isLoading:ge,samlSettings:Oe,activeStep:Ke}}const Ps={loadSAMLSettings:bs},vs=(0,G.connect)(ts,Ps),Es={text:"Setup SAML single sign on",subTitle:`This guided application will guide you through the configuration 
  process of SAML. You will need to follow steps and visit your Identity 
  Provider's application to connect it with Grafana (The Service provider). 
  This guided application will help you keep track of your progress.`,icon:"shield",id:"SAML",breadcrumbs:[{title:"Authentication",url:"admin/authentication"}]},ba=vs(({isLoading:W,samlSettings:te,activeStep:ge,loadSAMLSettings:Oe})=>{(0,a.useEffect)(()=>{Oe()},[Oe]);const Ke=(0,a.useCallback)(()=>{const ot=Gn.find(({id:Rt})=>Rt===ge)?.component;return ot?a.createElement(ot,null):null},[ge]);return a.createElement($n.T,{navId:"authentication",pageNav:Es},a.createElement($n.T.Contents,null,W||(0,ye.isEmpty)(te)?a.createElement(Ra.a,null):Ke()))});var as=e(37573),ms=e(8180),Ya=e(34177),Is=e(55391);class ws extends Is.R{}ws.type="page-banner-display";var Gs=(W=>(W[W.info=0]="info",W[W.warning=1]="warning",W[W.error=2]="error",W))(Gs||{});function Ir(){const[W,te]=(0,a.useState)(),ge=Dr(W?.severity),Oe=(0,I.wW)(Qt=>$e(Qt,ge)),{chrome:Ke}=(0,Ya.p)(),ot=Ke.useState();(0,a.useEffect)(function(){const Qt=s.h$.subscribe(ws,vn=>{ot.chromeless||te(vn.payload)});return function(){Qt.unsubscribe()}},[ot.chromeless]);const Rt=(0,a.useCallback)(()=>{te(void 0),W?.onClose&&W.onClose()},[W]);if(!W)return null;const en=W.body;return a.createElement("div",{className:Oe.banner},a.createElement("div",{className:Oe.icon},a.createElement(i.J,{size:"xl",name:ge.icon})),a.createElement("div",{className:Oe.content},a.createElement(en,{severity:W.severity??Gs.info})),W?.onClose&&a.createElement("div",{className:Oe.icon},a.createElement(ms.h,{size:"xl",name:"times",onClick:Rt,className:Oe.close})))}function Dr(W){const te=(0,I.l4)();return(0,a.useMemo)(()=>{switch(W){case Gs.error:return{icon:"exclamation-triangle",background:te.colors.error.main,text:te.colors.error.contrastText};case Gs.warning:return{icon:"exclamation-triangle",background:te.colors.warning.main,text:te.colors.warning.contrastText};case Gs.info:default:return{icon:"info-circle",background:te.colors.info.main,text:te.colors.info.contrastText}}},[te,W])}function $e(W,te){return{banner:N.css`
      flex-grow: 0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      background-color: ${te.background};
      border-radius: 2px;
      height: 52px;
    `,icon:N.css`
      padding: ${W.spacing(0,2)};
      color: ${te.text};
      display: flex;
    `,content:N.css`
      flex-grow: 1;
      display: flex;
      align-items: center;
      color: ${te.text};
    `,close:N.css`
      color: ${te.text};
    `}}function kt(){(0,as.nH)(Ir)}var Yt=e(86245),un=e(79508),yn=e(39284),hn=e(77293),Wn=e(96488),fa=e(69142);const sa=W=>{const{enableDataSourceCache:te,dataSource:ge,pageId:Oe}=W,Ke=s.Vt.hasPermissionInMetadata(F.DataSourcesCachingWrite,ge);return a.createElement(fa.Z,{title:"Caching is not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"database",onClick:()=>{te(Oe)},proTip:"Enabling caching can reduce the amount of redundant requests sent to the data source.",proTipLink:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",proTipLinkTitle:"Learn more",buttonDisabled:!Ke})};var ra=e(98102);const Aa=W=>{const{cleanCache:te,dataSource:ge,pageId:Oe}=W,[Ke,ot]=(0,a.useState)(!1),Rt=vn=>()=>{ot(vn)},en=()=>{te(Oe),ot(!1)},Qt=s.Vt.hasPermissionInMetadata(F.DataSourcesCachingWrite,ge);return a.createElement("div",null,a.createElement(Le.zx,{variant:"destructive",onClick:Rt(!0),disabled:!Qt},"Clear cache"),a.createElement(ra.s,{isOpen:Ke,title:"Clear cache",body:"Warning: This action impacts all cache-enabled data sources. If you are using Memcached, the system clears all data from the Memcached instance. Do you want to continue?",confirmText:"Clear cache",onConfirm:en,onDismiss:Rt(!1)}))};var zs=e(64353);const Rs=W=>{const{disableDataSourceCache:te,dataSource:ge,pageId:Oe}=W,Ke=s.Vt.hasPermissionInMetadata(F.DataSourcesCachingWrite,ge);return a.createElement(Le.zx,{variant:"destructive",onClick:()=>te(Oe),disabled:!Ke},"Disable")},Va=W=>{const{updateDataSourceCache:te,pageId:ge,useDefaultTTL:Oe,setUseDefaultTTL:Ke,defaultTTLMs:ot,ttlQueriesMs:Rt,setTtlQueriesMs:en,ttlResourcesMs:Qt,setTtlResourcesMs:vn,loading:bn,enabled:mn,dataSource:xn,dataSourceID:Jn,dataSourceUID:Zn}=W,Vn=s.Vt.hasPermissionInMetadata(F.DataSourcesCachingWrite,xn);return a.createElement("div",null,a.createElement(H.g,{description:`Enable this to use the default TTL set in Grafana's configuration (${ot} ms)`,label:"Use default TTL",disabled:bn||!Vn},a.createElement(oe.r,{value:Oe,onChange:()=>{Ke(!Oe)}})),a.createElement(H.g,{description:"The time-to-live for a query cache item in milliseconds. Example: 5000",label:"Query TTL",disabled:bn||Oe||!Vn},a.createElement(Q.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(Oe?ot:Rt)||0,onChange:ea=>{en(ea.currentTarget.valueAsNumber)}})),a.createElement(H.g,{description:"The time-to-live for resources cache items in milliseconds. Example: 5000",label:a.createElement(zs._,null,a.createElement("span",null,"Resource TTL"),a.createElement(Xe.u,{content:a.createElement("div",null,"Resources are dynamic values that Grafana data source plugins retrieve from data sources for use in the query editor. Examples are Splunk namespaces, Prometheus labels, and CloudWatch metric names. Since these values update less frequently, you might prefer a longer cache TTL for Resources than queries. See the ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/"},"docs")," ","for more info.")},a.createElement(i.J,{name:"question-circle"}))),disabled:bn||Oe||!Vn},a.createElement(Q.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(Oe?ot:Qt)||0,onChange:ea=>{vn(ea.currentTarget.valueAsNumber)}})),a.createElement(Os.Lh,{spacing:"md",align:"flex-start",justify:"flex-start"},a.createElement(Rs,{...W}),a.createElement(Le.zx,{disabled:bn||!Vn,onClick:()=>te(ge,{dataSourceID:Jn,dataSourceUID:Zn,enabled:mn,defaultTTLMs:ot,ttlQueriesMs:Rt,ttlResourcesMs:Qt,useDefaultTTL:Oe})},"Save")))};var La=e(29930),rs=(W=>(W.LoadDataSourceCache="LOAD_DATA_SOURCE_CACHE",W))(rs||{});const fs=W=>({type:"LOAD_DATA_SOURCE_CACHE",payload:W});function Ur(W){return async te=>{const ge=await(0,La.i)().post(`/api/datasources/${W}/cache/enable`,{});te(fs(ge))}}function wr(W){return async te=>{const ge=await(0,La.i)().post(`/api/datasources/${W}/cache/disable`,{});te(fs(ge))}}function Bi(W,te){return async ge=>{const Oe=await(0,La.i)().post(`/api/datasources/${W}/cache`,te);ge(fs(Oe))}}function Fo(W){return async te=>{const ge=await(0,La.i)().get(`/api/datasources/${W}/cache`);te(fs(ge))}}function Po(W){return async te=>{const ge=await(0,La.i)().post(`/api/datasources/${W}/cache/clean`,{});te(fs(ge))}}function rc(W,te){return{...W.dataSourceCache,pageId:te.uid,dataSource:W.dataSources.dataSource}}const Zd={disableDataSourceCache:wr,updateDataSourceCache:Bi,enableDataSourceCache:Ur,loadDataSourceCache:Fo,loadDataSource:Wn.gv,cleanCache:Po,loadDataSourceMeta:Wn.b2},Jd=(0,G.connect)(rc,Zd),$o=W=>{const[te,ge]=(0,a.useState)(W.enabled),[Oe,Ke]=(0,a.useState)(!0),[ot,Rt]=(0,a.useState)(W.useDefaultTTL),[en,Qt]=(0,a.useState)(W.ttlQueriesMs),[vn,bn]=(0,a.useState)(W.ttlResourcesMs),{pageId:mn,dataSource:xn,loadDataSource:Jn,loadDataSourceCache:Zn,loadDataSourceMeta:Vn,enableDataSourceCache:ea}=W;(0,a.useEffect)(()=>{ge(W.enabled),Rt(W.useDefaultTTL),Qt(W.ttlQueriesMs),bn(W.ttlResourcesMs),Ke(!1)},[W.useDefaultTTL,W.ttlQueriesMs,W.ttlResourcesMs,W.enabled]),(0,a.useEffect)(()=>{Jn(mn).then(Vn),Zn(mn)},[Zn,Jn,Vn,mn]);const ta=s.Vt.hasPermissionInMetadata(F.DataSourcesCachingWrite,xn),pa=te?Va({...W,loading:Oe,useDefaultTTL:ot,setUseDefaultTTL:Rt,ttlQueriesMs:en,setTtlQueriesMs:Qt,ttlResourcesMs:vn,setTtlResourcesMs:bn}):(0,hn.d5)()?a.createElement(fl,{action:ta?{text:"Enable caching",onClick:()=>{ea(mn)}}:void 0}):sa(W);return a.createElement(a.Fragment,null,(0,hn.d5)()&&a.createElement(yn.Xz,{featureId:"query-caching",eventVariant:"trial",featureName:"query caching",text:"Enable query caching for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},te&&!(0,hn.d5)()&&a.createElement("h3",{className:"page-sub-heading"},"Caching"),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(Os.Lh,{spacing:"md",align:"flex-end",justify:"flex-end"},te&&a.createElement(Aa,{...W}))),pa)},fl=({action:W})=>{const te=(0,I.l4)();return a.createElement(yn.TA,{action:W,listItems:["Load dashboards in less than a second from the cache, even when they include big queries and lots of users are looking at once","Save money and avoid rate limiting by reducing the number of API calls you make to data sources like Splunk, CloudWatch and Github","Author dashboards more smoothly by caching the data used to construct queries, like fields in ServiceNow or metrics available from Datadog"],image:`query-caching-${te.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/query-caching",featureName:"query caching",description:"With query caching, you can load dashboards faster and reduce costly queries to data sources by temporarily storing query results in memory, Redis, or Memcached."})},oc=Jd($o),Ko=()=>{const{uid:W}=(0,de.UO)(),te=(0,un.xG)("cache"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-cache-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(oc,{uid:W})))};var li=e(25e3);const Qr=({uid:W})=>((0,li.E)(W),a.createElement(a.Fragment,null,a.createElement(yn.Xz,{featureName:"query caching",featureId:"query-caching"}),a.createElement(fl,null))),ic=()=>{const{uid:W}=(0,de.UO)(),te=(0,li.xG)("cache"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-cache-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(Qr,{uid:W})))},ci={enabled:!1,dataSourceID:0,dataSourceUID:"",ttlQueriesMs:0,ttlResourcesMs:0,defaultTTLMs:0,useDefaultTTL:!0},Ni={dataSourceCache:(W=ci,te)=>{switch(te.type){case rs.LoadDataSourceCache:return{...te.payload}}return W}};var Co=e(56090);const Vo=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("cache");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(oc,{uid:W})))},lc=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("cache");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(Qr,{uid:W})))};var zo=e(89050),_a=e(67483),eo=e(35906),rr=e(99098),lo=e(40538),Xd=e(87691),Ui=e(24505),gl=e(17784),xs=e(6194),Pr=e(83881),cc=e(44103),Ho=e(52666),pl=e(33750),ko=e(53768),hl=e(99227),qd=e(82410),eu=e(30471),Go=e(16514);const dc=(W,te,ge,Oe,Ke,ot)=>{const Rt=[],en=(0,xs.U_)({field:{config:{unit:ot?.defaults?.unit,decimals:Ke.decimals}},theme:n.v.theme2,timeZone:te});let Qt=-1;for(const vn of W){const{timeField:bn}=(0,Pr.sV)(vn);if(bn)for(const mn of vn.fields){if(mn.type!==rr.fS.number)continue;Qt++;const xn=(0,cc.k)({xField:bn,yField:mn,nullValueMode:Ho.Gl.Null});if(xn.length>0){const Jn=(0,pl.Kx)({field:mn,reducers:Ke.stats||[]});let Zn=[];Ke.stats&&(Zn=Ke.stats.map(pa=>({...en(Jn[pa]),title:pa})));let Vn;ge[mn.name]&&ge[mn.name].color?Vn={mode:ko.S.Fixed,fixedColor:ge[mn.name].color}:mn.config&&mn.config.color?Vn=mn.config.color:Vn={mode:ko.S.Fixed,fixedColor:Go.O9[Rt.length%Go.O9.length]},mn.config=ot?{...mn.config,unit:ot.defaults.unit,decimals:ot.defaults.decimals,color:Vn}:{...mn.config,color:Vn},mn.display=(0,xs.U_)({field:mn,timeZone:te,theme:n.v.theme2});const ea=(0,hl.e)(bn),ta=(0,hl.f)(bn);bn.display=(0,xs.U_)({timeZone:te,field:{...bn,type:bn.type,config:{unit:qd.U6.getTimeFieldUnit(ta)}},theme:n.v.theme2}),Rt.push({label:(0,eu.CZ)(mn,vn,W),data:xn,color:mn.config.color?.fixedColor,info:Zn,isVisible:!0,yAxis:{index:ge[mn.name]&&ge[mn.name].yAxis||1},seriesIndex:Qt,timeField:{...bn},valueField:{...mn},timeStep:ea})}}}return Rt},Do="YYYY-MM-DD",to=async(W,te)=>await(0,h.i)().get(`/api/usage/dashboard/${W}/views/recent?limit=${te}`),jo=async(W,te)=>await(0,h.i)().get(`/api/usage/dashboard/${W}/views?limit=${te}`),di=W=>{const te=[];for(let ge in W)te.push(W[ge]);return te.sort((ge,Oe)=>(0,_a.CQ)(ge.day,Do).valueOf()-(0,_a.CQ)(Oe.day,Do).valueOf()),te},wi=async(W,te)=>{const ge=await(0,h.i)().get(`/api/usage/dashboard/${W}/daily`,{days:te});return di(ge)},ui=async(W,te)=>{const ge=await(0,h.i)().get(`/api/usage/dashboard/${W}/public/daily`,{days:te});return di(ge)},tu=async(W,te,ge)=>{const Oe=await(0,h.i)().get(`/api/usage/datasource/${W}/daily`,{from:te,to:ge});return di(Oe)},Wi=async W=>await(0,h.i)().get(`/api/usage/dashboard/${W}/info`);var mo=e(7804);const mi=(0,mo.B)(W=>{const te=W.colors.background.secondary;return{tabContent:N.css`
      height: 100%;
    `,tabsBar:N.css`
      padding-left: ${W.spacing(2)};
      margin: ${W.spacing(3,-1,-3,-3)};
    `,graphContainer:N.css`
      margin-top: ${W.spacing(2)};
      background-color: ${te};
    `,panelContent:N.css`
      contain: none;
    `,userBoxesContainer:N.css`
      display: flex;
      margin-top: ${W.spacing(3)};

      > div + div {
        margin-left: ${W.spacing(2)};
      }
    `,userBox:N.css`
      padding: ${W.spacing(2)};
      flex: 1;
      text-align: center;
      background-color: ${te};
      border-radius: 3px;

      button,
      img {
        margin: ${W.spacing(0,0,1,0)};
      }
    `,userName:N.css`
      font-weight: ${W.typography.fontWeightBold};
    `,tableContainer:N.css`
      margin-top: ${W.spacing(3)};
      background-color: ${te};
      padding-bottom: ${W.spacing(1)};
      border-radius: 3px;

      [role='cell']:first-child > div {
        padding: 4px;
      }
      [role='columnheader']:first-child {
        height: 33px;
      }
      [role='row']:not(:only-child):nth-child(odd) {
        background-color: ${W.colors.background.primary};
      }
    `,tableHeader:N.css`
      padding: ${W.spacing(0,2,.5,2)};
      display: flex;
      justify-content: space-between;
      align-items: center;

      h4 {
        margin-bottom: 0px;
        padding: ${W.spacing(3,0)};
      }
    `,userIcon:N.css`
      margin: 0 0;
      width: 26px;
      height: 26px;
    `}}),uc=(W,te)=>({dataSourceUid:te.uid}),nu={loadDataSource:Wn.gv,loadDataSourceMeta:Wn.b2},au=(0,G.connect)(uc,nu);class Hs extends a.PureComponent{constructor(te){super(te),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:te,loadDataSource:ge,loadDataSourceMeta:Oe}=this.props;if(ge(te).then(Oe),(0,t.v)("analytics")){let Ke=(0,_a.CQ)().subtract(30,"days").format(Do),ot=(0,_a.CQ)().format(Do);const Rt=await tu(te,Ke,ot);this.setState({dailySummaries:Rt,from:Ke,to:ot})}}buildTimeRange(){const{from:te,to:ge}=this.state,Oe=(0,_a.CQ)(te),Ke=(0,_a.CQ)(ge).add(24,"hours");return{from:Oe,to:Ke,raw:{from:te,to:ge}}}convertDailySummariesToDataFrame(te,ge,Oe){const Ke=new eo.G([]),ot=new eo.G([]);return te.forEach(Rt=>{Ke.buffer.push((0,_a.CQ)(Rt.day,Do).valueOf());let en=Rt[ge];ge==="loadDuration"&&(en=Rt.queries?Rt.loadDuration/(Rt.queries*1e6):0),ot.buffer.push(en)}),{name:ge,fields:[{name:"Time",type:rr.fS.time,config:{},values:Ke},{name:ge,type:Oe,config:{},values:ot}],length:te.length}}renderChart(te,ge){const{dailySummaries:Oe}=this.state,{color:Ke,fieldType:ot,showBars:Rt,showLines:en,timeRange:Qt,title:vn,valueField:bn,width:mn}=te;let xn=this.convertDailySummariesToDataFrame(Oe,bn,ot);const Jn={[bn]:{color:Ke}},Zn=dc([xn],"browser",Jn,{showBars:Rt,showLines:en,showPoints:!1},{placement:"bottom",displayMode:lo.jK.List,showLegend:!1});return a.createElement("div",{className:(0,N.cx)(ge.graphContainer,"panel-container"),"aria-label":"Graph container",key:te.valueField},a.createElement("div",{className:"panel-title"},vn),a.createElement("div",{className:(0,N.cx)("panel-content",ge.panelContent)},a.createElement(Xd.k,{height:150,width:mn,timeRange:Qt,showBars:Rt,showLines:en,showPoints:!1,series:Zn,timeZone:"browser"},a.createElement(Ui.I,{mode:lo.f3.Multi}))))}renderContent(){const{theme:te}=this.props,ge=mi(te),{dailySummaries:Oe}=this.state,Ke=this.buildTimeRange();return Oe?.length>0?a.createElement(zo.Z,{disableHeight:!0},({width:ot})=>{const Rt=[{title:"Queries last 30 days",valueField:"queries",fieldType:rr.fS.number,width:ot,timeRange:Ke,color:"",showBars:!0,showLines:!1},{title:"Errors last 30 days",valueField:"errors",fieldType:rr.fS.number,width:ot,timeRange:Ke,color:te.colors.error.border,showBars:!0,showLines:!1},{title:"Average load duration last 30 days (ms)",valueField:"loadDuration",fieldType:rr.fS.number,width:ot,timeRange:Ke,color:te.colors.primary.border,showBars:!0,showLines:!1}];return a.createElement("main",{style:{width:ot}},Rt.map(en=>this.renderChart(en,ge)))}):a.createElement("span",null,"No available data for this data source.")}render(){return(0,t.v)("analytics.writers")&&!(0,t.v)("analytics")?a.createElement(gl.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page.")):a.createElement(a.Fragment,null,(0,hn.d5)()&&a.createElement(yn.Xz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:"Enable data source usage insights for free during your trial of Grafana Pro."}),this.renderContent())}}const mc=au((0,I.HE)(Hs)),su=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("insights");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(mc,{uid:W})))},vl=({uid:W})=>{(0,li.E)(W);const te=(0,I.l4)();return a.createElement(a.Fragment,null,a.createElement(yn.Xz,{featureName:"data source usage insights",featureId:"data-source-insights"}),a.createElement(yn.TA,{listItems:["Demonstrate and improve the value of your observability service by keeping track of user engagement","Keep Grafana performant by identifying and fixing slow, error-prone data sources","Clean up your instance by finding and removing unused data sources","Review individual data source usage insights at a glance in the UI, sort search results by usage and errors, or dig into detailed usage logs"],image:`datasource-insights-${te.isLight?"light":"dark"}.png`,featureName:"data source usage insights",description:"Usage Insights provide detailed information about data source usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights"}))},fc=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("insights");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(vl,{uid:W})))};var El=e(1108),Hr=e(94270),gc=e(50796),ru=e(94080),_r=e(28038);class yl extends a.PureComponent{constructor(){super(...arguments),this.state=this.cleanState(),this.onTeamSelected=te=>{const ge=te?.value;this.setState({teamId:ge?ge.id:0})},this.onUserSelected=te=>{this.setState({userId:te?te.id:0})},this.onPermissionChanged=te=>{this.setState({permission:te.value})},this.onTypeChanged=te=>{this.setState({type:te.value,userId:0,teamId:0})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.cleanState())}}cleanState(){return{userId:0,teamId:0,type:r.AclTarget.Team,permission:r.DataSourcePermissionLevel.Query}}isValid(){switch(this.state.type){case r.AclTarget.Team:return this.state.teamId>0;case r.AclTarget.User:return this.state.userId>0}return!0}render(){const{onCancel:te}=this.props,{type:ge}=this.state,Oe="width-20",Ke=[{value:r.AclTarget.Team,label:"Team"},{value:r.AclTarget.User,label:"User"}];return a.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},a.createElement(gc.P,{onClick:te}),a.createElement("h5",null,"Add Permission For"),a.createElement(Hr.l,{name:"addPermission",maxWidth:"none",onSubmit:this.onSubmit},()=>a.createElement(Os.Lh,null,a.createElement(u.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:ge,options:Ke,onChange:this.onTypeChanged,menuShouldPortal:!0}),ge===r.AclTarget.User&&a.createElement(_r.f,{onSelected:this.onUserSelected,className:Oe}),ge===r.AclTarget.Team&&a.createElement(ru.c,{onSelected:this.onTeamSelected,className:Oe}),a.createElement(u.Ph,{isSearchable:!1,options:r.dataSourceAclLevels,onChange:this.onPermissionChanged,value:r.dataSourceAclLevels.find(ot=>ot.value===this.state.permission),width:25,menuShouldPortal:!0}),a.createElement(Le.zx,{type:"submit",disabled:!this.isValid()},"Save"))))}}var Pl=e(14835),fi=e(73757);const{Select:pc}=Pl.LegacyForms,Fi={id:-1,datasourceId:-1,updated:"",created:"",permissionName:"Admin",builtInRole:"Admin",permission:fi.zV.Admin},Cl={label:"Admin",description:"",value:fi.zV.Admin},bo=({items:W,onRemoveItem:te})=>{const ge=W.filter(ot=>ot.userId!==void 0),Oe=W.filter(ot=>ot.teamId!==void 0),Ke=[Fi];return a.createElement("div",null,a.createElement(Dl,{title:"Roles",items:Ke,onRemove:te}),a.createElement(Dl,{title:"Users",items:ge,onRemove:te}),a.createElement(Dl,{title:"Teams",items:Oe,onRemove:te}))},Dl=({title:W,items:te,onRemove:ge})=>te.length===0?null:a.createElement("div",null,a.createElement("h5",null,W),a.createElement("table",{className:"filter-table gf-form-group"},a.createElement("tbody",null,te.map((Oe,Ke)=>a.createElement(hc,{key:`${Ke}-${Oe.id}`,item:Oe,onRemove:ge}))))),hc=({item:W,onRemove:te})=>{const ge=()=>W.teamId?a.createElement("img",{className:"filter-table__avatar",src:W.teamAvatarUrl,alt:`Avatar for team ${W.teamId}`}):W.userId?a.createElement("img",{className:"filter-table__avatar",src:W.userAvatarUrl,alt:`Avatar for user ${W.userId}`}):a.createElement(i.J,{size:"xl",name:"shield"}),Oe=()=>W.userId?a.createElement("span",{key:"name"},W.userLogin," "):W.teamId?a.createElement("span",{key:"name"},W.team," "):W.builtInRole?a.createElement("span",{key:"name"},W.builtInRole," "):a.createElement("span",{key:"name"}),Ke=[...fi.nl,Cl];return a.createElement("tr",null,a.createElement("td",{style:{width:"1%"}},ge()),a.createElement("td",{style:{width:"90%"}},Oe()),a.createElement("td",null),a.createElement("td",{className:"query-keyword"},"Can"),a.createElement("td",null,a.createElement("div",{className:"gf-form"},a.createElement(pc,{isDisabled:!0,onChange:()=>{},options:Ke,value:Ke.find(ot=>ot.value===W.permission)}))),a.createElement("td",null,W.builtInRole?a.createElement("button",{className:"btn btn-inverse btn-small"},a.createElement(i.J,{name:"lock",size:"sm"})):a.createElement("button",{className:"btn btn-danger btn-small",onClick:()=>te(W)},a.createElement(i.J,{name:"times",size:"sm"}))))},ou=({uid:W})=>((0,li.E)(W),a.createElement(a.Fragment,null,a.createElement(yn.Xz,{featureName:"data source permissions",featureId:"data-source-permissions"}),a.createElement(vc,null))),vc=({action:W})=>{const te=(0,I.l4)();return a.createElement(yn.TA,{action:W,featureName:"data source permissions",description:"With data source permissions, you can protect sensitive data by limiting access to this data source to specific users, teams, and roles.",listItems:["Protect sensitive data, like security logs, production databases, and personally-identifiable information","Clean up users\u2019 experience by hiding data sources they don\u2019t need to use","Share Grafana access more freely, knowing that users will not unwittingly see sensitive data"],image:`ds-permissions-${te.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/datasource_permissions"})},Rr=ou;var bl=(W=>(W.LoadDataSourcePermissions="LOAD_DATA_SOURCE_PERMISSIONS",W))(bl||{});const fo=W=>({type:"LOAD_DATA_SOURCE_PERMISSIONS",payload:W});function Ws(W){return async te=>{const ge=await(0,La.i)().get(`/api/datasources/${W}/permissions`);te(fo(ge))}}function Ec(W){return async te=>{await(0,La.i)().post(`/api/datasources/${W}/enable-permissions`,{}),te(Ws(W))}}function iu(W){return async te=>{await(0,La.i)().post(`/api/datasources/${W}/disable-permissions`,{}),te(Ws(W))}}function yc(W,te){return async ge=>{await(0,La.i)().post(`/api/datasources/${W}/permissions`,te),ge(Ws(W))}}function xl(W,te){return async ge=>{await(0,La.i)().delete(`/api/datasources/${W}/permissions/${te}`),ge(Ws(W))}}function Wr(W,te){const{uid:ge}=te;return{uid:ge,enabled:W.dataSourcePermission.enabled,isDefault:W.dataSources.dataSource.isDefault,permissions:W.dataSourcePermission.permissions}}const $i={addDataSourcePermission:yc,enableDataSourcePermissions:Ec,disableDataSourcePermissions:iu,loadDataSourcePermissions:Ws,loadDataSource:Wn.gv,loadDataSourceMeta:Wn.b2,removeDataSourcePermission:xl},no=(0,G.connect)(Wr,$i);class lu extends a.PureComponent{constructor(){super(...arguments),this.state={datasourceId:0,isAdding:!1},this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onEnablePermissions=()=>{const{enableDataSourcePermissions:te}=this.props;te(this.state.datasourceId)},this.onDisablePermissions=()=>{const{disableDataSourcePermissions:te}=this.props;te(this.state.datasourceId)},this.onAddPermission=te=>{const{addDataSourcePermission:ge}=this.props,Oe={permission:te.permission};te.type===r.AclTarget.Team?ge(this.state.datasourceId,Object.assign(Oe,{teamId:te.teamId})):te.type===r.AclTarget.User&&ge(this.state.datasourceId,Object.assign(Oe,{userId:te.userId}))},this.onRemovePermission=te=>{this.props.removeDataSourcePermission(te.datasourceId,te.id)},this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.isEnabled=()=>this.props.enabled,this.renderActions=()=>{const te=[],{isAdding:ge}=this.state;return this.isEnabled()&&(te.push(a.createElement(Le.zx,{variant:"primary",key:"add-permission",onClick:this.onOpenAddPermissions,disabled:ge},"Add a permission")),te.push(a.createElement(Le.zx,{variant:"destructive",key:"disable-permissions",onClick:this.onDisablePermissions},"Disable permissions"))),te}}componentDidMount(){this.fetchDataSource().then(te=>{this.props.loadDataSourceMeta(te),this.setState({datasourceId:te.id}),this.fetchDataSourcePermissions(te.id)})}async fetchDataSource(){const{uid:te,loadDataSource:ge}=this.props;return ge(te)}async fetchDataSourcePermissions(te){const{loadDataSourcePermissions:ge}=this.props;return ge(te)}render(){const{permissions:te,isDefault:ge}=this.props,{isAdding:Oe}=this.state;return a.createElement(a.Fragment,null,(0,hn.d5)()&&a.createElement(yn.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},a.createElement("h3",{className:"page-sub-heading"},"Permissions"),a.createElement("div",{className:"page-action-bar__spacer"}),this.renderActions()),ge&&!this.isEnabled()&&a.createElement(ne.b,{title:"Warning!"},"Enabling permissions on the default data source makes it unavailable for users not listed in the permissions."),this.isEnabled()?a.createElement("div",null,a.createElement(El.s,{in:Oe},a.createElement(yl,{onAddPermission:Ke=>this.onAddPermission(Ke),onCancel:this.onCancelAddPermission})),a.createElement(bo,{items:te,onRemoveItem:this.onRemovePermission})):(0,hn.d5)()?a.createElement(vc,{action:{onClick:this.onEnablePermissions,text:"Enable permissions"}}):a.createElement(fa.Z,{title:"Permissions not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"unlock",onClick:this.onEnablePermissions,proTip:"Only admins will be able to query the data source after you enable permissions.",proTipLink:"https://docs.grafana.org/permissions/datasource_permissions/",proTipLinkTitle:"Learn more"}))}}const Pc=no(lu),Ki=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("permissions");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(Pc,{uid:W})))};var Cc=e(73546);function Dc(W,te){const{uid:ge}=te;return{resourceId:ge}}const bc={loadDataSource:Wn.gv,loadDataSourceMeta:Wn.b2},xc=(0,G.connect)(Dc,bc)(({resourceId:W,loadDataSource:te,loadDataSourceMeta:ge})=>{(0,a.useEffect)(()=>{te(W)},[W,te]);const Oe=s.Vt.hasPermission(F.DataSourcesPermissionsWrite);return(0,a.useEffect)(()=>{te(W).then(ge)},[te,ge,W]),a.createElement(a.Fragment,null,(0,hn.d5)()&&a.createElement(yn.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement(Cc.P,{resource:"datasources",resourceId:W,canSetPermissions:Oe}))}),co=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("permissions");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(xc,{uid:W})))},cu=()=>{const{uid:W}=(0,de.UO)(),{navId:te,pageNav:ge}=(0,Co.M)("permissions");return a.createElement($n.T,{navId:te,pageNav:ge},a.createElement($n.T.Contents,null,a.createElement(Rr,{uid:W})))};var br=e(82002),Sc=e(58379);const Yo=({title:W,subTitle:te,severity:ge,onButtonClick:Oe,buttonText:Ke})=>{const ot=(0,I.yK)(uu);return a.createElement("div",{className:ot.container},a.createElement("div",{className:"page-container"},a.createElement(ne.b,{title:W,severity:ge,buttonContent:Ke,onRemove:Oe},te)))},Vi=({isLicensingReader:W,children:te})=>W?a.createElement("a",{href:"/admin/licensing"},te):a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",target:"_blank",rel:"noreferrer noopener"},te),du=({isLicensingReader:W})=>a.createElement(Yo,{title:"Your Grafana Enterprise license has expired",subTitle:a.createElement(a.Fragment,null,a.createElement(Vi,{isLicensingReader:W},"Some features")," have been disabled."),severity:"error"}),Mc=({isLicensingReader:W})=>a.createElement(Yo,{title:"Your Grafana Enterprise license is invalid",subTitle:a.createElement(a.Fragment,null,a.createElement(Vi,{isLicensingReader:W},"Some features")," have been disabled."),severity:"error"}),Sl=({days:W,onCloseWarning:te,isLicensingReader:ge})=>a.createElement(Yo,{onButtonClick:te,title:"Your Grafana Enterprise license will expire soon",subTitle:a.createElement(a.Fragment,null,W," days remaining, after which"," ",a.createElement(Vi,{isLicensingReader:ge},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),Tc=({days:W,onCloseWarning:te,isLicensingReader:ge})=>a.createElement(Yo,{onButtonClick:te,title:"Your Grafana Enterprise token needs to be renewed",subTitle:a.createElement(a.Fragment,null,"Your license token has ",W," days remaining, after which"," ",a.createElement(Vi,{isLicensingReader:ge},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),Oc=({activeUsers:W,maxUsers:te,slug:ge,onRefreshWarning:Oe})=>a.createElement(Yo,{onButtonClick:Oe,title:"You have exceeded the included number of active users",subTitle:a.createElement(a.Fragment,null,"Your Grafana Enterprise license includes ",te," active users; you currently have ",W," active users. Please"," ",ge?a.createElement("a",{href:"https://grafana.com/orgs/"+ge+"/licenses",target:"_blank",rel:"noreferrer noopener"},"upgrade your license."):"upgrade your license."),severity:"error",buttonText:"Refresh"}),uu=W=>({container:N.css`
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 3;
    `}),Ic=80,zi=100,wm=0,Hi=1,Rc=2,Wm=3,Vr=4,gi=5,xo=6,ki=5,go=3600,po="grafana.licence.warning.dismissUntil",Ml="users",So="AWS/Marketplace",pi=async()=>(0,La.i)().get("/api/licensing/token"),mu=async W=>(0,La.i)().post("/api/licensing/token",{token:W}),fu=async()=>(0,La.i)().post("/api/licensing/token/renew",{}),Ac=async()=>(0,La.i)().get("/api/licensing/refresh-stats");function Lc(){(0,as.b4)(Gi)}function Gi(){const[W,te]=(0,a.useState)(!1),[ge,Oe]=(0,a.useState)(n.v.licensing),Ke=Sc.Z.get(po),ot=Ke&&Ke>(0,_a.CQ)().valueOf(),Rt=br.Vt.hasAccess(F.LicensingRead,br.Vt.hasRole(r.OrgRole.Admin)),en=br.Vt.hasAccess(F.LicensingRead,br.Vt.isGrafanaAdmin),Qt=Rt&&$m()&&!ot,vn=Rt&&Bc()&&!ot,bn=pu();let mn=!1,xn=0,Jn=0;if(ge.limitBy===Ml){const ea=Nc(ge.includedUsers,ge.activeUsers);mn=bn&&ea&&(Rt||en),xn=ge.activeUsers,Jn=ge.includedUsers}if(hu()||vu())return null;const Zn=()=>{const ea=(0,_a.CQ)().add(ki,"d").valueOf();Sc.Z.set(po,ea),te(!0)},Vn=async()=>{const ea=await Ac().catch(ta=>null);if(ea){const ta={...ge,activeUsers:ea.active_users};n.v.licensing=ta,Oe(ta)}};if(W)return null;if(Fm())return a.createElement(Mc,{isLicensingReader:en});if(gu())return a.createElement(du,{isLicensingReader:en});if(mn)return a.createElement(Oc,{activeUsers:xn,maxUsers:Jn,slug:ge.slug,onRefreshWarning:Rt?Vn:void 0});if(Qt){const ea=hi();return setTimeout(Zn,1e3*go),a.createElement(Sl,{days:ea,onCloseWarning:Zn,isLicensingReader:en})}else if(vn){const ea=Qo();return setTimeout(Zn,1e3*go),a.createElement(Tc,{days:ea,onCloseWarning:Zn,isLicensingReader:en})}return null}function Fm(){const{expiry:W,hasLicense:te}=n.v.licenseInfo;return te&&!W}function $m(){const{licenseExpiry:W,licenseExpiryWarnDays:te=30}=n.v.licensing;return W>0&&(0,_a.CQ)(W*1e3)<(0,_a.CQ)().add(te,"d")}function hi(){const{licenseExpiry:W}=n.v.licensing;return Math.ceil((W-(0,_a.CQ)().unix())/3600/24)}function gu(){const{licenseExpiry:W}=n.v.licensing;return W>0&&(0,_a.CQ)(W*1e3)<(0,_a.CQ)()}function Bc(){const{tokenExpiry:W,tokenExpiryWarnDays:te=3}=n.v.licensing;return W>0&&(0,_a.CQ)(W*1e3)<(0,_a.CQ)().add(te,"d")}function Qo(){const{tokenExpiry:W}=n.v.licensing;return Math.ceil((W-(0,_a.CQ)().unix())/3600/24)}function Nc(W,te){return W===void 0||te===void 0?!1:W!==-1&&te>W}function pu(){return!n.v.licensing.usageBilling}function Uc(){const W=/\/d-solo\//,te=window.location.pathname;return W.test(te)}function hu(){return Uc()}function vu(){const W=/\/admin\/licensing$/,te=window.location.pathname;return W.test(te)}var Km=e(93976),Mo=e(77258),Vm=e(62446);const ao=({orgSlug:W,licenseId:te})=>{let ge="https://grafana.com/contact";return W&&te&&(ge=`https://grafana.com/orgs/${W}/tickets?support=licensing&licenseId=${te}`),a.createElement(Le.Qj,{href:ge,target:"_blank",rel:"noopener noreferrer"},"Contact customer support")};var wc=e(35633);const $r=({title:W,children:te,footer:ge,state:Oe,status:Ke,className:ot})=>{const Rt=(0,I.l4)(),en=ji(Rt,Oe);return a.createElement(wc._,{className:(0,N.cx)(en.container,ot),disableHover:!0},a.createElement("div",{className:en.inner},(W||Ke)&&a.createElement("div",{className:en.row},W&&a.createElement("h3",{className:en.title},W),Ke&&a.createElement(Eu,{state:Oe,status:Ke})),a.createElement("div",{className:en.content},te),ge&&a.createElement("div",{className:en.footer},ge)))},ji=(0,mo.B)((W,te)=>({container:N.css`
      padding: ${W.spacing(2)};
      margin-bottom: 0;
      ${te&&`border: 1px solid ${W.colors[te].border}`};
    `,inner:N.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,title:N.css`
      font-size: ${W.typography.h3.fontSize};
      color: ${W.colors.text.secondary};
      margin-bottom: 0;
    `,row:N.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${W.spacing(2)};
      align-items: center;
    `,content:N.css`
      display: flex;
      flex-direction: column;
      flex: 1 0 auto;
      width: 100%;
    `,footer:N.css`
      display: flex;
      flex-direction: column;
      align-items: self-start;
      margin-top: ${W.spacing(2)};
    `})),Eu=({state:W,status:te})=>{const ge=new Map([["warning","bell"],["error","exclamation-triangle"]]),Oe=(0,I.l4)(),Ke=yu(Oe,W);return W&&ge.has(W)?a.createElement("div",{role:"alert",className:Ke.container},a.createElement(i.J,{name:ge.get(W)}),te):null},yu=(W,te)=>({container:N.css`
      background-color: ${W.colors.background.primary};
      color: ${te&&W.colors[te].text};
      padding: ${W.spacing(.5)} ${W.spacing(1)};

      svg {
        margin-right: ${W.spacing(1)};
      }
    `}),Yi=({state:W,title:te,orgSlug:ge,licenseId:Oe})=>{const Ke=(0,I.wW)(hr);return W?a.createElement(ne.b,{title:te,severity:W,className:Ke.container},a.createElement(ao,{orgSlug:ge,licenseId:Oe})):null},hr=W=>({container:N.css`
      background: ${W.colors.secondary.main};
      margin-bottom: ${W.spacing(3)};
    `}),Tl=({content:W,state:te})=>{const ge=(0,I.l4)(),Oe=Wc(ge,te);return a.createElement(a.Fragment,null,W.map(Ke=>Ke?a.createElement("div",{key:Ke.name,className:Oe.row},a.createElement("span",null,Ke.name,Ke.tooltip&&a.createElement(Xe.u,{placement:"top",content:Ke.tooltip,theme:"info"},a.createElement(i.J,{name:"info-circle",size:"sm"}))),a.createElement("span",{className:Ke.highlight?Oe.highlight:""},Ke.value)):null))},Wc=(W,te)=>({row:N.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${W.spacing(2)};
      align-items: center;
      svg {
        margin-left: ${W.spacing(.5)};
        cursor: pointer;
      }
    `,highlight:N.css`
      background-color: ${W.colors.background.primary};
      color: ${te&&W.colors[te].text};
      padding: ${W.spacing(.5)} ${W.spacing(1)};
      margin-right: -${W.spacing(1)};

      svg {
        margin-right: ${W.spacing(1)};
      }
    `}),Fc=({isUploading:W,title:te,onFileUpload:ge,isDisabled:Oe,licensedUrl:Ke})=>{const ot=Ol();return a.createElement(a.Fragment,null,te&&a.createElement("h2",{className:ot.title},te),W?a.createElement(Le.zx,{disabled:!0},"Uploading\u2026"):Oe?a.createElement(Le.zx,{disabled:!0},"Upload a new token"):a.createElement(Vs.p,{onFileUpload:ge,accept:".jwt"},"Upload a new token"),Ke&&a.createElement("p",{className:ot.instanceUrl},"Instance URL: ",a.createElement("code",null,Ke)))},Ol=(0,mo.B)(()=>({title:N.css`
      margin-top: 30px;
      margin-bottom: 20px;
    `,instanceUrl:N.css`
      margin-top: 10px;
    `})),Pu=(W,te)=>(te?`${te} of `:"")+(W>0?W:"unlimited"),Cu=W=>(0,_a.CQ)(W.exp*1e3)<(0,_a.CQ)(),Du=W=>(0,_a.CQ)(W.exp*1e3)<(0,_a.CQ)().add(n.v.licensing.tokenExpiryWarnDays,"d"),Il=W=>Math.ceil((W.exp-(0,_a.CQ)().unix())/3600/24),_o=W=>W?Cu(W)?{state:"error",status:"Expired",title:"Token expired",message:"Contact support to renew your token, or visit the Cloud portal to learn more."}:Du(W)?{state:"warning",status:` Expiring in ${Il(W)} day(s)`,title:"Token expires soon",message:`Your token expires in ${Il(W)} day(s). Contact support to renew your token.`}:{state:"",status:"",title:"",message:""}:{state:"",status:"",title:"",message:""},Qi=W=>W.trial_exp&&(0,_a.CQ)(W.trial_exp*1e3)<(0,_a.CQ)(),$c=W=>W.trial_exp?Math.ceil((W.trial_exp-(0,_a.CQ)().unix())/3600/24):0,bu=W=>!W||!W.trial||!W.trial_exp?{state:"",status:"",title:"",message:""}:Qi(W)?{state:"error",status:"Expired",title:"Trial expired",message:"Your trial period has expired, please contact sales to purchase a license."}:{state:"info",status:` Trial expiring in ${$c(W)} day(s)`,title:"Trial active",message:`Your trial expires in ${$c(W)} day(s), please contact sales to purchase a license.`},Kc=(W,te=0)=>100*te/W,Rl=(W,te)=>{let ge="",Oe="",Ke="",ot="";if(!W)return{state:ge,status:Oe,title:Ke,message:ot};if(W.limit_by===Ml){const Rt=te?.active_users,en=W.included_users;let Qt=0;typeof Rt=="number"&&(Qt=Kc(en,Rt)),Qt>zi?(ge="error",Oe="Quota exceeded: active users",Ke="User limit exceeded",ot=`There are more than ${en} active users using Grafana.`,ot+=" Contact support to increase the quotas."):Qt>=Ic&&(ge="warning",Qt>=zi?(Oe="Limit reached",Ke="User utilization limit reached",ot=`You are at your limit of ${en} active users.`):(Oe="Reaching limit",Ke="User utilization reaching limit",ot=`There are ${Rt} active users.`,ot+=` You are approaching your limit of ${en} active users.`),Oe+=": active users",ot+=" Contact support to increase the quotas.")}return{state:ge,status:Oe,title:Ke,message:ot}},xu=({token:W,stats:te,tokenRenewed:ge,tokenUpdated:Oe,isLoading:Ke,licensedUrl:ot})=>{const[Rt,en]=(0,a.useState)(!1),[Qt,vn]=(0,a.useState)(!1),bn=_o(W).state,mn=Rl(W,te).state,xn=br.Vt.hasAccess(F.LicensingWrite,br.Vt.isGrafanaAdmin),Jn=(0,I.wW)(Zr),Zn=ta=>{const pa=ta.currentTarget?.files?.[0];if(pa){Re.E1.partial({tokenUpdated:null,tokenRenewed:null});const Sa=new FileReader,wa=()=>async Fa=>{en(!0);try{await mu(Fa.target.result),Re.E1.partial({tokenUpdated:!0}),setTimeout(()=>{location.reload()},1e3)}catch(ls){throw en(!1),ls}};Sa.onload=wa(),Sa.readAsText(pa)}},Vn=async()=>{Re.E1.partial({tokenUpdated:null,tokenRenewed:null}),vn(!0);try{await fu(),Re.E1.partial({tokenRenewed:!0}),setTimeout(()=>{location.reload()},1e3)}catch(ta){throw vn(!1),ta}};if(!br.Vt.hasAccess(F.LicensingRead,br.Vt.isGrafanaAdmin))return null;if(Ke)return a.createElement(Ra.a,{text:"Loading licensing info..."});let ea="You are running Grafana Enterprise without a license. The Enterprise features are disabled.";return W&&![Hi,gi].includes(W.status)&&(ea="There is a problem with your Enterprise license token. The Enterprise features are disabled."),!W||![Hi,gi].includes(W.status)?a.createElement(a.Fragment,null,a.createElement(Vm.UpgradeInfo,{editionNotice:ea}),a.createElement("div",{className:Jn.uploadWrapper},a.createElement(Fc,{title:"Have a license?",onFileUpload:Zn,isUploading:Rt,isDisabled:!xn,licensedUrl:ot}))):a.createElement("div",null,a.createElement("h2",{className:Jn.title},"License details"),a.createElement(_i,{...Rl(W,te),orgSlug:W.slug,licenseId:W.lid}),a.createElement(_i,{..._o(W),orgSlug:W.slug,licenseId:W.lid}),a.createElement(_i,{...bu(W),orgSlug:W.slug,licenseId:W.lid}),Oe&&a.createElement(ne.b,{title:"License token uploaded. Restart Grafana for the changes to take effect.",severity:"success",onRemove:()=>Re.E1.partial({tokenUpdated:null})}),ge&&a.createElement(ne.b,{title:"License token renewed.",severity:"success",onRemove:()=>Re.E1.partial({tokenRenewed:null})}),a.createElement("div",{className:Jn.row},a.createElement($r,{title:"License",className:Jn.licenseCard,footer:a.createElement(Le.Qj,{variant:"secondary",href:W.details_url||`${W.iss}/licenses/${W.lid}`,"aria-label":"View details about your license in Grafana Cloud",target:"_blank",rel:"noopener noreferrer"},"License details")},a.createElement(Tl,{content:[{name:W.prod?.length<=1?"Product":"Products",value:W.prod?.length<=1?W.prod[0]||"None":a.createElement("ul",null,W.prod?.map(ta=>a.createElement("li",{key:ta},ta)))},W.iss===So&&W.account?{name:"AWS Account",value:W.account}:{name:"Company",value:W.company},{name:"License ID",value:W.lid},W.iss===So?null:{name:"URL",value:W.sub,tooltip:"License URL is the root URL of your Grafana instance. The license will not work on an instance of Grafana with a different root URL."},{name:"Purchase date",value:(0,Mo.dq)(W.nbf*1e3)},W.iss===So?null:{name:"License expires",value:(0,Mo.dq)(W.lexp*1e3),highlight:!!_o(W)?.state,tooltip:"The license expiration date is the date when the current license is no longer active. As the license expiration date approaches, Grafana Enterprise displays a banner."},W.iss===So?null:{name:"Usage billing",value:W.usage_billing?"On":"Off",tooltip:"You can request Grafana Labs to turn on usage billing to allow an unlimited number of active users. When usage billing is enabled, Grafana does not enforce active user limits or display warning banners. Instead, you are charged for active users above the limit, according to your customer contract."}]})),a.createElement($r,{..._o(W),title:"Token",footer:a.createElement("div",{className:Jn.row},W.iss!==So&&a.createElement(Fc,{onFileUpload:Zn,isUploading:Rt,isDisabled:!xn}),Qt?a.createElement("span",null," (Renewing...)"):a.createElement(Le.zx,{variant:"secondary",onClick:Vn,disabled:!xn},"Renew token"))},a.createElement(a.Fragment,null,bn&&a.createElement(Yi,{title:"Contact support to renew your token, or visit the Cloud portal to learn more.",state:bn,orgSlug:W.slug,licenseId:W.lid}),a.createElement("div",{className:Jn.message},a.createElement(i.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-expiration/",target:"_blank",rel:"noreferrer noopener"},"license expiration")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/activate-license/",target:"_blank",rel:"noreferrer noopener"},"license activation"),"."),a.createElement(Tl,{content:[{name:"Token ID",value:W.jti},{name:"Token issued",value:(0,Mo.dq)(W.iat*1e3)},{name:"Token expires",value:(0,Mo.dq)(W.exp*1e3),highlight:!!_o(W)?.state,tooltip:"Grafana automatically updates the token before it expires. If your token is not updating, contact support."}],state:bn}))),a.createElement($r,{...Rl(W,te),title:"Utilization",footer:a.createElement("small",{className:Jn.footerText},"Utilization of licenced users is determined based on signed-in users' activity in the past 30 days.")},a.createElement(a.Fragment,null,a.createElement("div",{className:Jn.message},a.createElement(i.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#active-users-limit",target:"_blank",rel:"noreferrer noopener"},"active user limits")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#concurrent-sessions-limit",target:"_blank",rel:"noreferrer noopener"},"concurrent session limits"),"."),W.limit_by===Ml&&a.createElement(Tl,{content:[{name:"Users",value:Pu(W.included_users,te?.active_users),highlight:Kc(W.included_users,te?.active_users)>=Ic}],state:mn})))))},Zr=W=>({title:N.css`
      margin: ${W.spacing(4)} 0;
    `,infoText:N.css`
      font-size: ${W.typography.size.sm};
    `,uploadWrapper:N.css`
      margin-left: 79px;
    `,row:N.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      gap: ${W.spacing(2)};

      & > div {
        flex: 1 1 340px;
      }
    `,footerText:N.css`
      margin-bottom: ${W.spacing(2)};
    `,licenseCard:N.css`
      background: url('/public/img/licensing/card-bg-${W.isLight?"light":"dark"}.svg') center no-repeat;
      background-size: cover;
    `,message:N.css`
      height: 70px;
      a {
        color: ${W.colors.text.link};

        &:hover {
          text-decoration: underline;
        }
      }

      svg {
        margin-right: ${W.spacing(.5)};
      }
    `}),_i=({state:W,message:te,title:ge,orgSlug:Oe,licenseId:Ke})=>{const ot=(0,I.wW)(Vc);return W?a.createElement(ne.b,{title:ge,severity:W||void 0},a.createElement("div",{className:ot.container},a.createElement("div",null,a.createElement("p",null,te),a.createElement("a",{className:ot.link,href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/",target:"_blank",rel:"noopener noreferrer"},"Learn about Enterprise licenses")),a.createElement(ao,{orgSlug:Oe,licenseId:Ke}))):null},Vc=W=>({container:N.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      width: 100%;
    `,link:N.css`
      font-size: ${W.typography.bodySmall.fontSize};
      text-decoration: underline;
      color: ${W.colors.text.secondary};

      &:hover {
        color: ${W.colors.text.primary};
      }
    `}),Zi=W=>({navModel:(0,Yt.ht)(W.navIndex,"licensing")}),zm=(0,G.connect)(Zi,{})(({navModel:W,queryParams:te})=>{const[ge,Oe]=(0,a.useState)(null),[Ke,ot]=(0,a.useState)(null),[Rt,en]=(0,a.useState)(!1),{tokenUpdated:Qt,tokenRenewed:vn}=te;return(0,a.useEffect)(()=>br.Vt.hasAccess(F.LicensingRead,br.Vt.isGrafanaAdmin)?(en(!0),(async()=>{const mn=await pi().catch(()=>null),xn=await Ac().catch(()=>null);Oe(mn),ot(xn),en(!1)})(),Lc):void 0,[]),a.createElement($n.T,{navModel:W},a.createElement($n.T.Contents,null,a.createElement(Km.ServerStats,null),a.createElement(xu,{token:ge,stats:Ke,tokenUpdated:Qt,tokenRenewed:vn,isLoading:Rt,licensedUrl:n.v.licenseInfo?.appUrl})))});var zc=e(5494),Oo=e(47694),vi=e(64319),gr=e(30979),Hc=e(82660),Ji=(W=>(W.Test="test",W.Control="control",W))(Ji||{});const Ei=W=>"feature-highlights"+(W?`-${W}`:""),Mu={isDrawerOpen:!1,drawerTab:U.Stats},kc=(0,Hn.oM)({name:"metaAnalytics",initialState:Mu,reducers:{setDrawerOpen:(W,te)=>({...W,isDrawerOpen:te.payload}),setDrawerTab:(W,te)=>({...W,drawerTab:te.payload})}}),{setDrawerOpen:Zo,setDrawerTab:Tu}=kc.actions,Iu={metaAnalytics:kc.reducer};var Ru=e(72142),Au=e(79841),Al=e(94893),Gc=e(29781);class Ll extends a.PureComponent{convertSummariesToDataFrame(te,ge,Oe,Ke){const ot=new eo.G([]),Rt=new eo.G([]);return te.forEach(en=>{ot.buffer.push((0,_a.CQ)(en.day,Do).valueOf()),Rt.buffer.push(en[ge])}),{fields:[{name:"Time",type:rr.fS.time,config:{},values:ot},{name:ge,type:Oe,config:{displayName:Ke??ge},values:Rt}],length:te.length}}buildTimeRange(){const{dailySummaries:te}=this.props,ge=(0,_a.CQ)(te[0].day),Oe=(0,_a.CQ)(te[te.length-1].day).add(12,"hours");return{from:ge,to:Oe,raw:{from:ge,to:Oe}}}renderChart(te){const{dailySummaries:ge,theme:Oe}=this.props,{showBars:Ke,showLines:ot,timeRange:Rt,title:en,width:Qt,fields:vn,isStacked:bn=!1}=te,mn=mi(Oe),xn=vn.map(Vn=>this.convertSummariesToDataFrame(ge,Vn.name,Vn.type,Vn.label)),Jn=vn.reduce((Vn,ea)=>({...Vn,[ea.name]:{color:ea.color??""}}),{}),Zn=dc(xn,"browser",Jn,{showBars:Ke,showLines:ot,showPoints:!1},{placement:"bottom",displayMode:lo.jK.List,showLegend:!1});return a.createElement("div",{className:(0,N.cx)(mn.graphContainer,"panel-container"),"aria-label":"Graph container"},a.createElement("div",{className:"panel-title"},en),a.createElement("div",{className:(0,N.cx)("panel-content",mn.panelContent)},a.createElement(Gc.U,{height:150,width:Qt,timeRange:Rt,showBars:Ke,showLines:ot,showPoints:!1,series:Zn,isStacked:bn,timeZone:"browser",legendVisibility:Zn.length>1,onToggleSort:()=>{},legendDisplayMode:lo.jK.List,placement:"bottom"},a.createElement(Ui.I,{mode:lo.f3.Multi}))))}}class Lu extends Ll{render(){const{dailySummaries:te,theme:ge}=this.props;if(te&&te.length>0){const Oe=this.buildTimeRange();return a.createElement(zo.Z,{disableHeight:!0},({width:Ke})=>Ke===0?null:a.createElement("main",{style:{width:Ke}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:rr.fS.number},{name:"cachedQueries",type:rr.fS.number,label:"cached queries"}],width:Ke,timeRange:Oe,showBars:!1,showLines:!0}),this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:rr.fS.number}],width:Ke,timeRange:Oe,showBars:!0,showLines:!1}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:rr.fS.number,color:ge.colors.error.border}],width:Ke,timeRange:Oe,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const Bu={setDrawerOpen:Zo},Nu=(0,I.HE)((0,G.connect)(null,Bu)(Lu));class Uu extends Ll{render(){const{dailySummaries:te,theme:ge}=this.props;if(te&&te.length>0){const Oe=this.buildTimeRange();return a.createElement(zo.Z,{disableHeight:!0},({width:Ke})=>Ke===0?null:a.createElement("main",{style:{width:Ke}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:rr.fS.number},{name:"cachedQueries",type:rr.fS.number,label:"cached queries"}],width:Ke,timeRange:Oe,showBars:!1,showLines:!0}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:rr.fS.number,color:ge.colors.error.border}],width:Ke,timeRange:Oe,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const xr=(0,I.HE)(Uu);var jc=e(76095),wu=e(88144);const Bl=W=>`0 0 0 1px ${W}`,Yc=(0,mo.B)((W,te,ge)=>{const Oe=te?W.palette.blue80:W.colors.border2,Ke=te?W.palette.blue95:W.colors.border3,ot=ge?W.colors.dashboardBg:"transparent";return{icon:N.css`
      border-radius: 50%;
      width: 30px;
      height: 30px;
      margin-left: -6px;
      border: 3px ${ot} solid;
      box-shadow: ${Bl(Oe)};
      background-clip: padding-box;
      &:hover {
        background-clip: padding-box;
        box-shadow: ${Bl(Ke)};
      }
    `,textIcon:N.css`
      padding: 0px;
      text-align: center;
      line-height: 22px;
      justify-content: center;
      color: ${W.colors.textSemiWeak};
      cursor: auto;
      font-size: ${W.typography.size.sm};
      background: ${W.isDark?W.palette.dark9:W.palette.gray90};
      &:focus {
        box-shadow: ${Bl(Oe)};
      }
      &:hover {
        background: ${W.isDark?W.palette.dark10:W.palette.gray95};
      }
    `,tooltipContainer:N.css`
      text-align: center;
      padding: 0px ${W.spacing.sm};
    `,tooltipName:N.css`
      font-weight: ${W.typography.weight.bold};
    `,tooltipDate:N.css`
      font-weight: ${W.typography.weight.regular};
    `,dot:N.css`
      height: 6px;
      width: 6px;
      background-color: ${W.palette.blue80};
      border-radius: 50%;
      display: inline-block;
      margin-left: 6px;
      margin-bottom: 1px;
    `}}),Qc=W=>{const ge=(0,_a.CQ)(W).diff((0,_a.CQ)(),"hours",!1);return`Active last ${(Math.floor(-ge/24)+1)*24}h`},Xi=({userView:W,showTooltip:te=!0,showBorder:ge=!1,className:Oe})=>{const{user:Ke,viewed:ot}=W,Rt=(0,_a.CQ)(ot).diff((0,_a.CQ)(),"minutes",!0)>=-15,en=(0,I.Fg)(),Qt=Yc(en,Rt,ge),vn=Ke.name||Ke.login,bn=vn.split(" "),mn=((bn.shift()?.slice(0,1)||"")+(bn.pop()?.slice(0,1)||"")).toUpperCase(),xn=Ke.avatarUrl&&Ke.hasCustomAvatar?a.createElement("img",{className:(0,N.cx)(Qt.icon,Oe),src:Ke.avatarUrl,"aria-label":"Avatar icon",alt:`${mn} avatar`}):a.createElement(Le.zx,{variant:"secondary",className:(0,N.cx)(Qt.textIcon,Qt.icon,Oe),"aria-label":"Initials icon"},mn);if(te){const Jn=a.createElement("div",{className:Qt.tooltipContainer},a.createElement("div",{className:Qt.tooltipName},vn),a.createElement("div",{className:Qt.tooltipDate},Rt?a.createElement(a.Fragment,null,a.createElement("span",null,"Active last 15m"),a.createElement("span",{className:Qt.dot})):Qc(ot)));return a.createElement(Xe.u,{content:Jn,key:`recent-user-${Ke.id}`},xn)}else return xn};class Sr extends Ll{constructor(te){super(te),this.onOpenVersionHistory=()=>{const{setDrawerOpen:ge}=this.props;ge(!1),Re.E1.partial({editview:"versions"})},this.state={dashboardUsersInfo:null}}async componentDidMount(){const{dashboard:te}=this.props;try{const ge=await Wi(te.id);this.setState({dashboardUsersInfo:ge})}catch(ge){console.log("Error getting dashboard users info",ge)}}formatDate(te){const ge=te.diff((0,_a.CQ)().startOf("day"),"days",!0);if(ge<-6)return te.format("YYYY-MM-DD");if(ge<-1)return te.locale("en").format("dddd");if(ge<0)return"Yesterday";{const Oe=te.diff((0,_a.CQ)(),"minutes",!0);return Oe<-60?"Today":Oe<-15?"Last hour":"Currently viewing"}}renderUserBox(te,ge,Oe){return a.createElement("div",{className:Oe.userBox,"aria-label":"User information box"},a.createElement("h6",{"aria-label":"User box title"},te),a.createElement(Xi,{userView:ge,showTooltip:!1}),a.createElement("div",{className:Oe.userName},ge.user.name||ge.user.login),a.createElement("div",null,(0,_a.CQ)(ge.viewed).format("YYYY-MM-DD")))}renderViewsChart(){const te=this.buildTimeRange();return a.createElement(zo.Z,{disableHeight:!0},({width:ge})=>ge===0?null:a.createElement("main",{style:{width:ge}},this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:rr.fS.number}],width:ge,timeRange:te,showBars:!0,showLines:!1})))}convertUserViewsToDataFrame(te,ge){const{userViews:Oe}=this.props;if(Oe&&Oe.length>0){const Ke=new eo.G([]),ot=new eo.G([]),Rt=new eo.G([]);Oe.forEach(bn=>{Ke.buffer.push(this.formatDate((0,_a.CQ)(bn.viewed))),ot.buffer.push(bn.user.name||bn.user.login),Rt.buffer.push(a.createElement(Xi,{className:te.userIcon,userView:bn,showTooltip:!1}))});const en={displayName:" ",filterable:!1,custom:{width:50,align:"center",minWidth:50,cellOptions:{type:lo.h2.ColorText},inspect:!1}},Qt=[{fields:[{name:" ",type:rr.fS.other,config:en,values:Rt},{name:"User",type:rr.fS.string,config:{},values:ot},{name:"When",type:rr.fS.string,config:{},values:Ke}],length:Oe.length}],vn=(0,jc.SM)({data:Qt,theme:ge,replaceVariables:bn=>bn,fieldConfig:{}});return vn.length>0?vn[0]:null}else return null}render(){const{dailySummaries:te,dashboard:ge,theme:Oe,userViews:Ke}=this.props,{dashboardUsersInfo:ot}=this.state,Rt=mi(Oe),en=this.convertUserViewsToDataFrame(Rt,Oe);return a.createElement("div",null,te&&te.length>0&&this.renderViewsChart(),a.createElement("div",{className:Rt.userBoxesContainer},ot?.creator&&this.renderUserBox("Created",ot.creator,Rt),ot?.lastEditor&&this.renderUserBox("Last edited",ot.lastEditor,Rt),Ke?.length>0&&this.renderUserBox("Last viewed",Ke[0],Rt)),Ke?.length>0&&a.createElement("div",{className:Rt.tableContainer},a.createElement("div",{className:Rt.tableHeader},a.createElement("h4",null,"Last 30 dashboard viewers"),ge.meta.showSettings&&a.createElement(Le.zx,{icon:"history",variant:"secondary",onClick:this.onOpenVersionHistory,"aria-label":"Version history button"},"Dashboard version history")),a.createElement(zo.Z,{disableHeight:!0},({width:Qt})=>{if(Qt===0)return null;const vn=35*(en.length+1);return a.createElement("main",{style:{width:Qt}},a.createElement(wu.i,{data:en,height:vn,width:Qt,"aria-label":"Recent users table"}))})))}}const yi={setDrawerOpen:Zo},_c=(0,I.HE)((0,G.connect)(null,yi)(Sr)),Zc=30;class Nl extends a.PureComponent{constructor(te){super(te),this.onSelectTab=ge=>{this.props.setDrawerTab(ge.value||U.Stats)},this.state={drawerWidth:"50%",dailySummaries:[],publicDailySummaries:[],userViews:[]}}async componentDidMount(){const{dashboard:te}=this.props,ge=[];for(let Oe=0;Oe<30;Oe++)ge.push((0,_a.CQ)(Date.now()).subtract(Oe,"days").format(Do));if(te?.id&&te.meta.url){const Oe=await wi(te.id,ge),Ke=await jo(te.id,Zc);let ot=[];(0,Oo.iE)().featureToggles.publicDashboards&&(ot=await ui(te.id,ge)),this.setState({dailySummaries:Oe,userViews:Ke,publicDailySummaries:ot})}}renderHeader(te){const ge=[{label:"Stats",value:U.Stats},{label:"Users and activity",value:U.Users}];return(0,Oo.iE)().featureToggles.publicDashboards&&ge.push({label:"Public dashboards",value:U.PublicDashboards}),a.createElement(Ru.J,{className:te.tabsBar},ge.map((Oe,Ke)=>a.createElement(Au.O,{key:`${Oe.value}-${Ke}`,label:Oe.label,active:Oe.value===this.props.drawerTab,onChangeTab:()=>this.onSelectTab(Oe)})))}render(){const{dailySummaries:te,publicDailySummaries:ge,drawerWidth:Oe,userViews:Ke}=this.state,{dashboard:ot,drawerTab:Rt,setDrawerOpen:en,theme:Qt}=this.props,vn=mi(Qt);return a.createElement(gr.d,{scrollableContent:!0,title:`${ot.title} - analytics`,width:Oe,onClose:()=>en(!1),subtitle:this.renderHeader(vn),expandable:!0},a.createElement(Al.I,{className:vn.tabContent},(0,hn.d5)()&&a.createElement(yn.Xz,{featureId:"dashboard-insights",eventVariant:"trial",featureName:"dashboard usage insights",text:"Get full access to usage insights for free during your trial of Grafana Pro."}),Rt===U.Stats&&a.createElement(xr,{dashboard:ot,dailySummaries:te}),Rt===U.Users&&a.createElement(_c,{dashboard:ot,dailySummaries:te,userViews:Ke}),(0,Oo.iE)().featureToggles.publicDashboards&&Rt===U.PublicDashboards&&a.createElement(Nu,{dashboard:ot,dailySummaries:ge})))}}function Wu(W){return{drawerTab:W.metaAnalytics.drawerTab}}const qi={setDrawerOpen:Zo,setDrawerTab:Tu},Fu=(0,I.HE)((0,G.connect)(Wu,qi)(Nl)),Jo=({onClick:W,isHighlighted:te})=>a.createElement(vi.h,{icon:"info-circle",tooltip:"Dashboard insights",onClick:W,isHighlighted:te}),Ba=({dashboard:W,isDrawerOpen:te,setDrawerOpen:ge})=>{const Oe=W?.id&&W.meta.url,Ke=(0,hn.d5)();return(0,a.useEffect)(()=>{Oe&&Ke&&(0,o.SZ)(Ei("dashboard-insights-dot"),Ji.Test,"trial")},[Oe,Ke]),Oe&&a.createElement(a.Fragment,null,a.createElement(Jo,{onClick:()=>{ge(!0)},isHighlighted:Ke}),te&&a.createElement(Fu,{dashboard:W}))};function Jc(W){return{isDrawerOpen:W.metaAnalytics.isDrawerOpen}}const Xc={setDrawerOpen:Zo},so=({dashboard:W})=>{const te=W?.id&&W.meta.url,[ge,Oe]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{te&&(0,o.SZ)(Ei("dashboard-insights-dot"),Ji.Test,"")},[te]),te&&a.createElement(a.Fragment,null,a.createElement(Jo,{isHighlighted:!0,onClick:()=>{Oe(!0)}}),ge&&a.createElement(qc,{dashboard:W,onClose:()=>Oe(!1)}))},Jr=()=>{(0,t.v)("analytics")?s.Vt.hasPermission(F.DashboardsInsightsRead)&&(0,Hc.hf)({show:()=>!0,component:(0,G.connect)(Jc,Xc)(Ba),index:-1}):n.v.featureToggles.featureHighlights&&(0,Hc.hf)({show:()=>!0,component:so,index:-1})},qc=({onClose:W,dashboard:te})=>{const ge=(0,I.l4)();return a.createElement(gr.d,{onClose:W,title:`${te?.title} - analytics`,width:"50%"},a.createElement(yn.Xz,{featureName:"dashboard usage insights",featureId:"dashboard-insights"}),a.createElement(yn.tM,{featureName:"dashboard usage insights",image:`usage-insights-${ge.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights",description:"Usage Insights provide detailed information about dashboard usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues."}))};class Ul{constructor(te){this.options=te,this.buffer=[],this.supportedEvents=[zc.ee.MetaAnalytics],this.addEvent=ge=>{this.buffer.push(ge)},this.flush=()=>{if(this.buffer.length===0)return;const ge=[];for(const Oe of this.buffer)ge.push({type:Oe.type,...Oe.payload,meta:Oe.meta});this.buffer=[],this.options.url&&(0,h.i)().fetch({method:"POST",url:this.options.url,showSuccessAlert:!1,showErrorAlert:!1,data:ge}).toPromise()}}}function el(W){return te=>{te(Zo(!0)),te(Tu(W))}}const As=(0,mo.B)((W,te)=>({container:N.css`
      display: flex;
      justify-content: center;
      flex-direction: row-reverse;
      margin-left: ${W.spacing.sm};
    `,moreIcon:N.css`
      cursor: pointer;
      span {
        margin-bottom: ${te?"3px":"0px"};
      }
    `})),Pi={openDrawer:el},$u=(0,G.connect)(null,Pi),Ci=4,Ku=6e4;function Fr(W,te){const ge=br.Vt.user;to(W,Ci+10).then(Oe=>{const Ke=Oe.filter(ot=>ot.user.id!==ge.id);te(ot=>(0,ye.isEqual)(Ke,ot)?ot:Ke)})}const ed=({dashboard:W,openDrawer:te})=>{const ge=W?.id,[Oe,Ke]=(0,a.useState)([]),ot=Oe.length-Ci+1,Rt=ot>9,en=(0,I.Fg)(),Qt=As(en,Rt),vn=Yc(en,!1,!0);(0,a.useEffect)(()=>{if(!ge||!W?.meta.url)return;Fr(ge,Ke);const mn=setInterval(()=>Fr(ge,Ke),Ku);return()=>{clearInterval(mn)}},[ge,W]);const bn=Oe.length>Ci;return a.createElement(a.Fragment,null,Oe.length>0&&a.createElement("div",{className:Qt.container,"aria-label":"Presence indicators container"},bn&&a.createElement(Le.zx,{variant:"secondary",className:(0,N.cx)(vn.textIcon,vn.icon,Qt.moreIcon),"aria-label":"More users icon",onClick:()=>te(U.Users)},Rt?"...":`+${ot}`),Oe.slice(0,bn?Ci-1:Ci).reverse().map(mn=>a.createElement(Xi,{key:mn.user.id,userView:mn,showBorder:!0}))))},Hm=()=>{br.Vt.hasPermission(F.DashboardsInsightsRead)&&(0,Hc.NN)({show:()=>!0,component:$u(ed),index:"end"})};function wl(){if((0,Oo.iE)().isPublicDashboardView){const te=window.location.pathname.split("/");return te[te.length-1]}return""}const td=()=>{(0,t.v)("analytics")?((0,zc.e6)(new Ul({url:nd()})),br.Vt.user.isSignedIn&&(Hm(),Jr())):n.v.featureToggles.featureHighlights&&Jr()},nd=()=>(0,Oo.iE)().isPublicDashboardView?`api/public/ma/events/${wl()}`:"api/ma/events",Wl=()=>{const{uid:W}=(0,de.UO)(),te=(0,un.xG)("insights"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-insights-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(mc,{uid:W})))},Fl=()=>{const{uid:W}=(0,de.UO)(),te=(0,li.xG)("insights"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-insights-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(vl,{uid:W})))},ad=()=>{const{uid:W}=(0,de.UO)(),te=(0,un.xG)("permissions"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-permissions-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(xc,{uid:W})))},Vu=()=>{const{uid:W}=(0,de.UO)(),te=(0,un.xG)("permissions"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-permissions-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(Pc,{uid:W})))},zu=()=>{const{uid:W}=(0,de.UO)(),te=(0,li.xG)("permissions"),ge=(0,r.useSelector)(Ke=>Ke.navIndex),Oe=(0,Yt.ht)(ge,`datasource-permissions-${W}`,te);return a.createElement($n.T,{navId:"datasources",pageNav:Oe.main},a.createElement($n.T.Contents,null,a.createElement(Rr,{uid:W})))},tl={permissions:[],enabled:!1,datasourceId:0},zr={dataSourcePermission:(W=tl,te)=>{switch(te.type){case bl.LoadDataSourcePermissions:return{enabled:te.payload.enabled,permissions:te.payload.permissions,datasourceId:te.payload.datasourceId}}return W}};var nl=e(68183),sd=e(67487),rd=e(80472),ku=e(80882),Ar=e(96044),js=e(659),Io=e(60499),od=e(10655);const $l=od.Rh.injectEndpoints({endpoints:W=>({requestAccess:W.mutation({query:te=>({url:"/public/dashboards/share/request-access",method:"POST",data:te})}),addRecipient:W.mutation({query:({recipient:te,uid:ge})=>({url:`/public-dashboards/${ge}/share/recipients`,method:"POST",data:{recipient:te}}),async onQueryStarted(te,{dispatch:ge,queryFulfilled:Oe}){await Oe,ge((0,js.$l)((0,Io.AT)("Invite sent!")))},invalidatesTags:(te,ge,{dashboardUid:Oe})=>[{type:"PublicDashboard",id:Oe}]}),deleteRecipient:W.mutation({query:({uid:te,recipientUid:ge})=>({url:`/public-dashboards/${te}/share/recipients/${ge}`,method:"DELETE"}),async onQueryStarted(te,{dispatch:ge,queryFulfilled:Oe}){await Oe,ge((0,js.$l)((0,Io.AT)("User revoked")))},invalidatesTags:(te,ge,{dashboardUid:Oe})=>[{type:"PublicDashboard",id:Oe},"UsersWithActiveSessions","ActiveUserDashboards"]}),reshareAccessToRecipient:W.mutation({query:({uid:te,recipientUid:ge})=>({url:`/public-dashboards/${te}/share/recipients/${ge}`,method:"PATCH"}),async onQueryStarted(te,{dispatch:ge,queryFulfilled:Oe}){await Oe,ge((0,js.$l)((0,Io.AT)("Invite resent!")))}}),getActiveUsers:W.query({query:()=>({url:"/public-dashboards/share/users?status=active"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:W.query({query:te=>({url:`/public-dashboards/share/users/${te}/dashboards?status=active`}),providesTags:(te,ge,Oe)=>[{type:"ActiveUserDashboards",id:Oe}]})}),overrideExisting:!0}),{useRequestAccessMutation:Di,useGetActiveUserDashboardsQuery:ho,useGetActiveUsersQuery:Gm}=$l,Gu=null;var ju=(W=>(W.INTERNAL_SERVER_ERROR="publicdashboards.internalServerError",W.NOT_FOUND_MAGIC_LINK="publicdashboards.magicLinkNotFound",W.EXPIRED_MAGIC_LINK="publicdashboards.magicLinkExpired",W.INVALID_SESSION="publicdashboards.invalidSession",W.EXPIRED_SESSION="publicdashboards.sessionExpired",W))(ju||{});const Yu={title:"Request access",description:"You'll receive an email with a one-time link."},Kl="Something went wrong",or="To request access to the dashboard again, enter your email. You'll receive an email with a one-time link.",cr={["publicdashboards.internalServerError"]:Kl,["publicdashboards.magicLinkNotFound"]:"This link has expired or already been used",["publicdashboards.magicLinkExpired"]:"This magic link has expired",["publicdashboards.invalidSession"]:"You no longer have access",["publicdashboards.sessionExpired"]:"Your access has expired"},Cs=W=>W?{title:cr[String(W)]||Kl,description:or}:Yu,Ro=N.css`
  justify-content: center;
  width: 100%;
`,Ao=nl.wl.pages.RequestViewAccess,Qu=()=>{const W=(0,I.wW)(al),{accessToken:te}=(0,de.UO)(),[{error:ge}]=(0,Ar.K)(),[Oe,{isLoading:Ke,isSuccess:ot}]=Di(),{register:Rt,handleSubmit:en,formState:{errors:Qt},reset:vn}=(0,z.cI)({mode:"onSubmit"}),bn=Cs(ge?String(ge):void 0),mn=async xn=>{await Oe({accessToken:te,email:xn.email}).unwrap(),vn()};return a.createElement(rd.dd,{branding:{loginTitle:bn.title,loginSubtitle:bn.description,hideFooter:!0}},a.createElement(rd.$s,null,a.createElement("form",{className:Ro,onSubmit:en(mn)},a.createElement(H.g,{label:"Email",error:Qt?.email?.message,invalid:!!Qt.email},a.createElement(Q.I,{"data-testid":Ao.recipientInput,placeholder:"email",autoCapitalize:"none",...Rt("email",{required:"Email is required",pattern:{value:ku.C2,message:"Invalid email"}})})),a.createElement(Le.zx,{"data-testid":Ao.submitButton,disabled:ot,type:"submit",className:Ro},ot?"Access requested":"Request access"," ",Ke&&a.createElement(sd.$,{className:W.loadingSpinner})))))},al=W=>({loadingSpinner:N.css`
    margin-left: ${W.spacing(1)};
  `}),Vl=Qu;var _u=e(22069),zl=e(9386),id=e(3153),Xo=e(4063),qo=e(86647),ei=e(58255),Hl=e(18271),Zu=e(63496),ti=e(53117),Ju=e(11543),Xu=e(19426);const jm=W=>{const{onChange:te,value:ge}=W,Oe=(0,I.wW)(ld);return a.createElement(Ju.Z,{className:Oe.filter},a.createElement(Xu.c,{width:"auto"},"Filter by data source"),a.createElement(se._,null,a.createElement(ti.q,{width:30,placeholder:"Select a data source",onChange:Ke=>{te({name:Ke.name,id:Ke.id,uid:Ke.uid})},noDefault:!0,current:ge})),a.createElement(se._,null,a.createElement(Le.zx,{className:Oe.button,icon:"trash-alt",variant:"secondary",onClick:()=>{te(void 0)}})))},ld=W=>({filter:N.css`
      margin-bottom: ${n.v.theme.spacing.md};
    `,button:N.css`
      color: ${W.colors.text.secondary};
    `});var sl=e(47891);const cd=({recordedQuery:W,buttons:te})=>{const ge=(0,I.wW)(qu),Oe=(0,qo.F)()?.getInstanceSettings(W.queries[0]?.datasource);return a.createElement("div",{className:ge.alert},Oe?.meta&&a.createElement("img",{className:ge.media,src:Oe.meta.info.logos.small,alt:"Query logo"}),a.createElement("div",{className:ge.body},a.createElement("div",{className:ge.info},a.createElement("div",null,a.createElement("h2",{className:ge.heading},W.name),a.createElement("p",{className:ge.description},bi(W))),a.createElement("div",{className:ge.buttonWrapper},te.map((Ke,ot)=>a.createElement("div",{key:`button-${ot}`,className:ge.button},Ke))))))},bi=W=>{const te=[`Interval: ${(0,sl.secondsToHms)(W.interval)}`,`Range: Last ${(0,sl.secondsToHms)(W.range)}`],ge=(0,qo.F)()?.getInstanceSettings(W.queries[0]?.datasource);return ge!==void 0&&te.unshift(ge.name),W.description!==""&&te.push(`${W.description}`),te.join(" | ")},qu=W=>{const te=W.shape.borderRadius();return{info:N.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,heading:N.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 0;
      font-size: ${W.typography.size.md};
      letter-spacing: inherit;
      line-height: ${W.typography.body.lineHeight};
      color: ${W.colors.text.primary};
      font-weight: ${W.typography.fontWeightMedium};
    `,description:N.css`
      width: 100%;
      margin: ${W.spacing(1,0,0)};
      color: ${W.colors.text.secondary};
      line-height: ${W.typography.body.lineHeight};
    `,alert:N.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${te};
      display: flex;
      flex-direction: row;
      align-items: center;
      background: ${W.colors.background.secondary};
      box-shadow: ${W.shadows.z1};
      margin-bottom: ${W.spacing(1)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${W.colors.background.primary};
        z-index: -1;
      }
    `,body:N.css`
      color: ${W.colors.text.secondary};
      padding: ${W.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:N.css`
      color: ${W.colors.text.secondary};
      padding-top: ${W.spacing(1)};
      margin-left: 26px;
    `,media:N.css`
      margin-left: ${W.spacing(2)};
      width: 40px;
    `,buttonWrapper:N.css`
      padding: ${W.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
      margin-right: ${W.spacing()};
    `,button:N.css`
      margin-left: ${W.spacing()};
    `}};var xi=e(65583);const em={recordedQueries:[],isLoading:!1,errorRecordedQueryTestResponse:""},ni=(0,Hn.oM)({name:"recorded-queries",initialState:em,reducers:{loadRecordedQueries:W=>({...W,isLoading:!0}),endLoadRecordedQueries:W=>({...W,isLoading:!1}),loadedRecordedQueries:(W,te)=>{const ge=te.payload;return{...W,recordedQueries:ge}},updateRecordedQueries:(W,te)=>{const ge=te.payload,Oe=W.recordedQueries.map(Ke=>Ke.id===ge.id?ge:Ke);return{...W,recordedQueries:Oe}},deleteRecordedQueries:(W,te)=>{const ge=te.payload,Oe=W.recordedQueries.filter(Ke=>Ke.id!==ge.id);return{...W,recordedQueries:Oe}},setPrometheusWriteTarget:(W,te)=>{const ge=te.payload;return{...W,prometheusWriteTarget:ge}}}}),{loadRecordedQueries:tm,endLoadRecordedQueries:nm,loadedRecordedQueries:vo,updateRecordedQueries:am,deleteRecordedQueries:dd,setPrometheusWriteTarget:sm}=ni.actions,om={recordedQueries:ni.reducer},Eo="api/recording-rules";function ud(){return async W=>{W(tm());try{const te=await(0,h.i)().get(Eo);W(vo(te))}finally{W(nm())}}}function kl(W){return async te=>{await(0,h.i)().put(Eo,W),te(am(W))}}function Gl(W){return async te=>{await(0,h.i)().delete(`${Eo}/${W.id}`),te(dd(W))}}function md(W){return(0,xi.n)((0,h.i)().fetch({method:"POST",url:Eo,data:W,showErrorAlert:!1}))}function ro(W){return(0,xi.n)((0,h.i)().fetch({method:"POST",url:`${Eo}/test`,data:W,showSuccessAlert:!1,showErrorAlert:!1}))}function kr(){return async W=>{try{const te=await(0,xi.n)((0,h.i)().fetch({method:"GET",url:`${Eo}/writer`,showSuccessAlert:!1,showErrorAlert:!1}));W(sm(te.data))}catch(te){console.error(te)}}}function im(W){return(0,xi.n)((0,h.i)().fetch({method:"POST",url:`${Eo}/writer`,data:W,showSuccessAlert:!1,showErrorAlert:!1}))}const fd=W=>W.recordedQueries,Ym=W=>W.prometheusWriteTarget,Gr=W=>({expr:`${W.prom_name}{id="${W.id}", name="${W.name}"}`,legendFormat:"",interval:"",exemplar:!0,datasource:W.dest_data_source_uid});function jr(W){return{recordedQueries:fd(W.recordedQueries)}}const oo={getRecordedQueriesAsync:ud},Qm=(0,G.connect)(jr,oo),_m=({onAddQuery:W,getRecordedQueriesAsync:te,recordedQueries:ge,onChangeDataSource:Oe,filterValue:Ke})=>{const[ot,Rt]=(0,a.useState)(!1),[en,Qt]=(0,a.useState)(Ke),[vn,bn]=(0,a.useState)([]),mn=(0,I.wW)(si);(0,a.useEffect)(()=>{te()},[ot,te]);const xn=(ta,pa)=>{bn(pa?vn.concat(ta):vn.filter(Sa=>!(0,ye.isEqual)(Sa,ta)))},Jn=()=>{(0,o.ff)("cloud_user_clicked_add_selected_recorded_queries",{recorded_queries_selected:vn.map(pa=>pa.name)});const ta=(0,qo.F)().getInstanceSettings(Zu.D);Oe?.(ta),vn.map(Gr).forEach(pa=>{W?.(pa)}),Rt(!1),bn([]),Hl.Z.emit(Xo.SI.alertSuccess,["Selected recorded queries added to the editor. The data source has been changed to mixed."])},Zn=ai(ge,en).map(ta=>a.createElement(gd,{key:ta.id,onQueryToggle:xn,recordedQuery:ta})),Vn=()=>{Rt(!1),bn([])},ea=()=>{(0,o.ff)("cloud_user_clicked_add_recorded_query_button"),Rt(!0)};return a.createElement(a.Fragment,null,a.createElement(Le.zx,{icon:"plus",onClick:ea,variant:"secondary",className:mn.openButton},"Recorded query"),a.createElement(Te.u,{isOpen:ot,title:"Add recorded query",onDismiss:Vn,className:mn.modal},a.createElement(jm,{value:en?.name,onChange:Qt}),a.createElement(ne.b,{title:"",severity:"info"},"To create a new Recorded Query, return to the query editor and use the "," ",a.createElement(i.J,{name:"record-audio"})," "," icon in the series bar."),Zn.length>0?Zn:en&&a.createElement("div",{className:mn.noQueries},"No recorded queries available for ",en?.name),a.createElement("div",{className:mn.modalButtons},a.createElement(Le.zx,{variant:"secondary",className:mn.modalButton,onClick:Vn},"Cancel"),a.createElement(Le.zx,{variant:"primary",className:mn.modalButton,onClick:Jn,disabled:vn.length===0},"Add"))))},gd=({onQueryToggle:W,recordedQuery:te})=>{const[ge,Oe]=(0,a.useState)(!1);return a.createElement(cd,{recordedQuery:te,buttons:[a.createElement(ei.X,{name:te.id,value:ge,key:`${te.id}-checked`,onChange:()=>{W(te,!ge),Oe(!ge)}})]})},ai=(W,te)=>{const ge=(0,qo.F)();return W.filter(Oe=>Oe.active).filter(Oe=>!te||Oe.queries[0].datasource.uid===te.uid).sort((Oe,Ke)=>{const ot=ge?.getInstanceSettings(Oe.queries[0]?.datasource),Rt=ge?.getInstanceSettings(Ke.queries[0]?.datasource),en=ot?.meta.name.localeCompare(Rt?.meta.name??"");if(en!==void 0&&en!==0)return en;const Qt=ot?.name.localeCompare(Rt?.name??"");return Qt!==void 0&&Qt!==0?Qt:Oe.name.localeCompare(Ke.name)})},si=W=>({modalButtons:N.css`
      display: flex;
      justify-content: end;
    `,openButton:N.css`
      margin-left: -8px;
    `,modalButton:N.css`
      margin-left: ${W.spacing(1)};
    `,modal:N.css`
      width: 750px;
    `,noQueries:N.css`
      margin-left: ${W.spacing(1)};
      margin-bottom: ${W.spacing(3)};
    `}),pd=Qm(_m);var lm=e(75849),jl=e(61618),cm=e(19115),dm=e(27581),um=e(1029),Yl=e(22323),rl=e(15546),Si=e(87095),Lo=e(10672);const Bo=[{label:"30 seconds",value:30},{label:"1 minute",value:60},{label:"5 minutes",value:300},{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"12 hours",value:43200},{label:"24 hours",value:86400},{label:"1 week",value:604800},{label:"1 month",value:2592e3}],hd=({label:W,description:te,value:ge,onChange:Oe})=>a.createElement("div",null,a.createElement(H.g,{label:W,description:te,required:!0},a.createElement(u.Ph,{options:Bo,onChange:Ke=>{Oe(Ke.value)},value:ge,"aria-label":`${W}-select`,menuShouldPortal:!0})));function mm(W){return{variables:(0,Si.ng)(W)}}const fm=(0,G.connect)(mm),Ql=({href:W,trackingSource:te})=>{const ge=(0,I.wW)(_l);return a.createElement("a",{href:W,className:ge.docsLink,target:"_blank",rel:"noreferrer",onClick:()=>(0,o.ff)("cloud_user_clicked_create_recorded_query_modal_documentation_icon",{source:te})},a.createElement(i.J,{name:"info-circle"}))},gm=({query:W,queries:te,dataSource:ge,variables:Oe})=>{const[Ke,ot]=(0,a.useState)(!1),[Rt,en]=(0,a.useState)(),[Qt,vn]=(0,a.useState)("info"),[bn,mn]=(0,a.useState)(""),xn=(0,I.wW)(dm.J),Jn=(0,I.wW)(_l);(0,a.useEffect)(()=>{(async()=>{s.Vt.hasAccess(F.LicensingRead,s.Vt.isGrafanaAdmin)&&en(await pi().catch(()=>{}))})()},[]);const Zn=()=>{mn(""),vn("info"),ot(!1)},Vn=async Ma=>{try{return await pa(Ma,Sa)}catch(Ka){vn("error"),(0,h.kW)(Ka)&&mn(Ka.data.message);return}},ea=async Ma=>{const Ka=await Vn(Ma);Ka&&md(Ka).then(()=>{vn("success"),mn("Your new recorded query is recording successfully!"),(0,o.ff)("cloud_user_created_recorded_query")}).catch(ka=>{vn("error"),mn(`Result: ${ka.data.message}`)})},ta=async Ma=>{const Ka=await Vn(Ma);Ka&&ro(Ka).then(ka=>{vn("info"),mn(`Result: ${ka.data.message}`)}).catch(ka=>{vn("error"),mn(ka.data.message)})},pa=async(Ma,Ka)=>{const ka={target_ref_id:W?W.refId:"",name:Ma.name,description:Ma.description,interval:Ma.interval,range:Ma.range,count:Ma.isCount,active:!0},Ns=te?.map(async Ds=>{const ns=Ds.datasource||ge?.name,Fs=await(0,qo.F)().get(ns),dr=Fs.interpolateVariablesInQueries?Fs.interpolateVariablesInQueries([Ds],{...Ka})[0]:Ds;return dr.datasourceId=Fs?Fs.id:-1,dr.datasource===void 0&&(Ds.datasource!==void 0&&Ds.datasource!==null?dr.datasource=Ds.datasource:Fs&&(dr.datasource={uid:Fs.uid,type:Fs.type})),dr});return ka.queries=Ns?await Promise.all(Ns):[],ka},Sa=Oe?.filter(Ma=>Ma.hide!==Lo.bU.hideVariable),wa=a.createElement("h2",{className:xn.modalHeaderTitle},"Create recorded query",a.createElement(Ql,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"modal-title"})),Fa=Qt!=="success"?a.createElement("div",{"aria-label":"Test the recorded query"},a.createElement(i.J,{name:"sync"})):void 0,ls=Qt==="success"?a.createElement(Le.zx,{type:"button",variant:"primary",onClick:Zn,"aria-label":"Close recording query button"},"Close"):a.createElement(Le.zx,{type:"button",variant:"secondary",onClick:Zn,fill:"outline","aria-label":"Cancel recording query button"},"Cancel");return a.createElement(a.Fragment,null,a.createElement(um.y,{title:"Create recorded query",icon:"record-audio",onClick:()=>{ot(!0),(0,o.ff)("cloud_user_clicked_create_recorded_query_icon")}}),a.createElement(Te.u,{isOpen:Ke,title:wa,onDismiss:Zn,className:Jn.modal},a.createElement(Hr.l,{onSubmit:ea,validateOn:"all"},({register:Ma,errors:Ka,control:ka,getValues:Ns})=>a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Name",description:"Give this query a name",invalid:!!Ka.name,error:Ka.name?.message,required:!0},a.createElement(Q.I,{...Ma("name",{required:{value:!0,message:"Name is required"}}),id:"add-recorded-query-name",autoFocus:!0})),a.createElement(H.g,{label:"Description",description:"Provide a description for this query"},a.createElement(Q.I,{...Ma("description"),id:"add-recorded-query-desc"})),a.createElement("div",{className:Jn.timeSelect},a.createElement(V.g,{name:"interval",control:ka,defaultValue:Bo[0].value,render:({field:{ref:Ds,value:ns,onChange:Fs,...Xs}})=>a.createElement(hd,{label:"Interval",description:"Decide how often to record this query",value:ns,onChange:Fs})})),a.createElement("div",{className:Jn.timeSelect},a.createElement(V.g,{name:"range",control:ka,defaultValue:(0,lm.Rr)().from,render:({field:{ref:Ds,value:ns,onChange:Fs,...Xs}})=>{const dr=a.createElement(a.Fragment,null,"Select this query's relative time range",a.createElement(Ql,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/#time-units-and-relative-ranges",trackingSource:"time-range"})),ir=a.createElement(zs._,{description:dr},"Relative Time Range *");return a.createElement(H.g,{label:ir,invalid:!!Ka.range,error:Ka.name?.message,required:!0},a.createElement(cm.x,{timeRange:{from:ns,to:0},onChange:qs=>Fs(qs.from)}))}})),Sa?.length>0?a.createElement(H.g,{label:"Template variables",description:"Select a value for each template variable"},a.createElement(a.Fragment,null,Sa.map(Ds=>{const{picker:ns,setValue:Fs}=Yl.z.get(Ds.type);return a.createElement(se._,{label:Ds.name,key:Ds.name,labelWidth:16},a.createElement(ns,{onVariableChange:Xs=>{(0,rl.eL)(Xs)&&!(0,jl.Q)(Xs.current)&&Fs(Xs,Xs.current)},variable:Ds,readOnly:!1}))}))):null,a.createElement(H.g,{label:"Count query results",description:a.createElement(a.Fragment,null,"Count the rows returned from this query",a.createElement(Ql,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"count-field"}))},a.createElement(oe.r,{...Ma("isCount"),id:"add-recorded-query-count"})),a.createElement(ne.b,{className:Jn.testQuery,severity:Qt,title:Qt==="success"?bn:"Test this recorded query",buttonContent:Fa,onRemove:Qt!=="success"?()=>ta(Ns()):void 0},a.createElement(a.Fragment,null,Qt!=="success"&&bn),bn==="An unknown issue is preventing the system from processing your query."&&pm(Rt)),a.createElement(Te.u.ButtonRow,null,ls,Qt!=="success"&&a.createElement(Le.zx,{type:"submit","aria-label":"Start recording query button"},"Start recording query"))))))},pm=W=>{let te="https://grafana.com/contact";return W&&W.slug&&W.lid&&(te=`https://grafana.com/orgs/${W.slug}/tickets?support=licensing&licenseId=${W.lid}`),a.createElement(a.Fragment,null,"To submit a support ticket to Grafana Labs, complete the ",a.createElement("a",{href:te},"Contact Grafana Labs"))},_l=W=>({modal:N.css`
      width: 550px;
    `,testQuery:N.css`
      margin-top: ${W.spacing(3)};
    `,timeSelect:N.css`
      width: 50%;
    `,docsLink:N.css`
      margin-left: ${W.spacing(.5)};
    `}),hm=fm(gm),vd=()=>{const te=id.h.getState().recordedQueries.prometheusWriteTarget;return Boolean(te?.data_source_uid)&&Boolean(te?.remote_write_path)};function Ed(){(0,t.v)("recordedqueries")&&n.v?.recordedQueries?.enabled&&((0,id.WI)(kr()),zl.f.addExtraRenderAction(te=>vd()&&(te.dataSource?.meta.backend||(0,_u.Pr)(te.dataSource))?a.createElement(hm,{...te}):null),zl.S.addExtraRenderAction(te=>vd()?a.createElement(pd,{...te}):null))}var Zl=e(2555),ol=e(97097);const il=()=>{const W=(0,I.wW)(yd);return a.createElement(ol._,{className:W.cta,message:"No recorded queries defined",footer:a.createElement("span",{key:"proTipFooter"},a.createElement(i.J,{name:"rocket"}),"ProTip: ","You can record queries from the query editor."),callToActionElement:a.createElement(a.Fragment,null)})},yd=W=>({cta:N.css`
      text-align: center;
    `});function Pd(W){return{navModel:(0,Yt.ht)(W.navIndex,"recordedQueries"),recordedQueries:fd(W.recordedQueries),isLoading:W.recordedQueries.isLoading}}const vm={getRecordedQueriesAsync:ud,updateRecordedQuery:kl,deleteRecordedQuery:Gl},Zm=(0,G.connect)(Pd,vm),ll=({navModel:W,isLoading:te,recordedQueries:ge,getRecordedQueriesAsync:Oe,updateRecordedQuery:Ke,deleteRecordedQuery:ot})=>{(0,a.useEffect)(()=>{Oe()},[Oe]);const Rt=(0,I.wW)(Cd),[en,Qt]=(0,a.useState)(),vn=ge.map(mn=>{const xn=[a.createElement(Le.zx,{key:"toggle-recorded-query-active",onClick:async()=>{await Ke({...mn,active:!mn.active})},variant:mn.active?"secondary":"primary"},mn.active?"Pause recording":"Resume recording"),a.createElement(Le.zx,{key:"delete-recorded-query","aria-label":"Delete recorded query",onClick:()=>Qt(mn),variant:"destructive"},"Delete")];return a.createElement(cd,{key:mn.id,recordedQuery:mn,buttons:xn})}),bn=()=>te?a.createElement(Zl.Z,null):vn.length===0?a.createElement(il,null):vn;return a.createElement($n.T,{navModel:W},a.createElement($n.T.Contents,null,a.createElement("div",{className:Rt.header},a.createElement(Le.Qj,{icon:"cog",href:"/recorded-queries/write-target"},"Edit remote write target")),bn(),en&&a.createElement(ra.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:a.createElement("div",null,"Are you sure you want to delete '",en.name,"'?"),confirmText:"Delete",onDismiss:()=>Qt(void 0),onConfirm:async()=>{await ot(en),Qt(void 0)}})))},Cd=W=>({header:N.css`
      display: flex;
      justify-content: flex-end;
      margin-bottom: ${W.spacing(1)};
    `,title:N.css`
      margin-bottom: 0;
      width: 100%;
    `}),Em=Zm(ll);function ym(W){return{navModel:(0,Yt.ht)(W.navIndex,"recordedQueries"),prometheusWriteTarget:Ym(W.recordedQueries)}}const Dd={getPrometheusWriteTarget:kr},bd=(0,G.connect)(ym,Dd),Pm=({navModel:W,prometheusWriteTarget:te,getPrometheusWriteTarget:ge})=>{const[Oe,Ke]=(0,a.useState)(),[ot,Rt]=(0,a.useState)(te?.remote_write_path),en=(0,I.wW)(Xm);(0,a.useEffect)(()=>{ge()},[ge]),(0,a.useEffect)(()=>{(async()=>{if(te){const mn=await(0,qo.F)().getInstanceSettings(te.data_source_uid);Ke(mn)}})()},[te]);const Qt=bn=>{Jm(Oe?.uid,bn.remote_write_path)},vn=a.createElement("span",null,"Select the data source where metrics will be written",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#remote-write-target",className:en.docsLink,target:"_blank",rel:"noreferrer"},a.createElement(i.J,{name:"info-circle"})));return a.createElement($n.T,{navModel:W},a.createElement($n.T.Contents,null,a.createElement(Hr.l,{key:te?.data_source_uid,defaultValues:te,onSubmit:Qt},({register:bn})=>a.createElement(a.Fragment,null,a.createElement(H.g,{label:vn},a.createElement(ti.q,{onChange:Ke,current:Oe?.name,placeholder:"Select a data source",type:"prometheus",noDefault:!0,alerting:!0,"aria-label":"Write target config select data source"})),a.createElement(H.g,{label:"Remote write path"},a.createElement(Q.I,{...bn("remote_write_path"),onChange:mn=>Rt(mn.currentTarget.value),placeholder:"/api/v1/write","aria-label":"Write target config remote write path"})),a.createElement(Le.zx,{disabled:Boolean(!ot||!Oe),type:"submit","aria-label":"Write target config save"},"Save")))))};function Jm(W,te){im({data_source_uid:W,remote_write_path:te}).then(()=>{Hl.Z.emit(Xo.SI.alertSuccess,["Prometheus remote write target created"])}).catch(ge=>{Hl.Z.emit(Xo.SI.alertError,[ge.data.message])})}const Xm=W=>({docsLink:N.css`
      margin-left: ${W.spacing(1)};
    `}),xd=bd(Pm);var Jl=e(73194),cl=e(53818),ri=e(49187),oi=e(19349),Cm=e(69155);const Sd=({dashboard:W,onDismiss:te})=>{(0,a.useEffect)(()=>{(0,o.ff)("grafana_dashboards_report_share_viewed")},[]);const ge=(0,I.wW)(Dm),Oe=()=>{const ot=ri.Cj.toUrlParams((0,Cm.c)()),Rt=ri.Cj.toUrlParams((0,oi.$t)().timeRangeForUrl());return`?${ot}&${Rt}&db-uid=${W.uid}&db-id=${W.id}&db-name=${W.title}`};return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,(0,hn.d5)()&&a.createElement("div",{className:ge.highlight},a.createElement(yn.Xz,{featureId:"reporting-tab",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),a.createElement("h3",null,"Get started with reporting"),a.createElement("h6",null,"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.")),a.createElement(Le.Qj,{href:`reports/new/${Oe()}`,onClick:te,className:ge.button},"Create report using this dashboard"),(0,hn.d5)()&&a.createElement(Le.Qj,{fill:"text",href:"https://grafana.com/docs/grafana/latest/enterprise/reporting"},"Learn more")):a.createElement("div",{className:ge.container},a.createElement(yn.Xz,{featureName:"reporting",featureId:"reporting-tab"}),a.createElement(yn.tM,{image:"reporting-email.png",featureName:"reporting",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule."}))},Dm=W=>({container:N.css`
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    `,button:N.css`
      margin-right: ${W.spacing(2)};
    `,highlight:N.css`
      margin-bottom: ${W.spacing(3)};

      h6 {
        font-weight: ${W.typography.fontWeightLight};
      }
    `});var Md=e(4883);const Xl="/public/img/grafana_icon.svg",Mi="https://grafana.com/static/assets/img/grafana_logo_lockup_ltbg.png",Xr="/reports",Td="api/reports/images/",No=2,ql={1:{label:"Zoom in",style:{transform:"translateX(-10%)"}},2:{label:"Standard"},3:{label:"Zoom out",style:{width:"100%",left:"91%"}}};var ec=e(86899),Od=e(85803);const Id=(W,te={hour:0,minute:0},ge)=>{const Oe=`${te.hour}:${te.minute}:00`,Ke=typeof W=="string"?io(W):W,ot=new Date(`${(0,_a.CQ)(Ke).format("YYYY/MM/DD")} ${Oe}`),Rt=(0,Mo.dq)(ot.getTime(),{timeZone:ge,format:"Z"});return Rd((0,_a.CQ)(ot).format())+Rt},Rd=W=>W.includes("Z")?W.replace("Z",""):W.slice(0,-6),io=W=>W?(0,_a.CQ)(W.split("T")[0]).toDate():"",Ti=W=>String(W).length===1?`0${W}`:String(W),Oi=W=>{if(!W)return{hour:0,minute:0};const te=W.match(/T(\d+):(\d+)/);if(te){const[,ge,Oe]=te;return{hour:parseInt(ge,10),minute:parseInt(Oe,10)}}return{hour:0,minute:0}},Ad=W=>W?dateTime(W).isBefore(dateTime()):!1,Ld=W=>{if(!W)return{time:void 0,date:void 0};const{hour:te,minute:ge}=Oi(W);return{date:(0,Mo.dq)(W,{format:"MMMM DD, YYYY"}),time:`${Ti(te)}:${Ti(ge)}`}},Bd=W=>{if(!W.from||!W.to)return"Dashboard time range";const te=parseInt(W.from,10),ge=parseInt(W.to,10);return!isNaN(te)&&!isNaN(ge)?(0,sl.describeTimeRange)({from:(0,_a.CQ)(te),to:(0,_a.CQ)(ge)}):(0,sl.describeTimeRange)(W)},Nd=W=>!W||!W.from||!W.to,dl=W=>W?.length?Object.fromEntries(W.map(te=>{const{getValueForUrl:ge}=Yl.z.get(te.type),Oe=ge(te);return[te.name,Array.isArray(Oe)?Oe.join(","):Oe]})):{},Ud=(W,te)=>!te||!Object.keys(te).length?W:W.map(ge=>{const Oe=te[ge.name];if(!Oe||!(0,rl.eL)(ge))return ge;const Ke=Oe.split(","),ot=Ke.map(Rt=>ge.options.find(en=>en.value===Rt)||{text:Rt,value:Rt}).filter(Boolean);return{...ge,current:{...ge.current,text:ot.map(Rt=>Rt?.text),value:ot.map(Rt=>Rt?.value)},options:ge.options.map(Rt=>({...Rt,selected:typeof Rt.value=="string"&&Ke.includes(Rt.value)}))}}),wd=()=>{const W="var-",te=new URLSearchParams(window.location.search),ge={};for(const[Oe,Ke]of te.entries())if(Oe.startsWith(W)){const ot=Oe.replace(W,"");ge[ot]=[...ge[ot]||[],Ke]}return Object.fromEntries(Object.entries(ge).map(([Oe,Ke])=>[Oe,Ke.join(",")]))},Wd=W=>W.some(te=>(0,rl.Xh)(te)&&te.refresh===Lo.Bd.onTimeRangeChanged);var bm=e(92624);const Fd=()=>{if(!window.Intl)return"";const W=window.Intl.DateTimeFormat();if(!W.resolvedOptions)return"";const te=W.resolvedOptions();return te.timeZone?te.timeZone:""},$d={from:(0,_a.CQ)(null),to:(0,_a.CQ)(null),raw:{from:"",to:""}},Ii={id:0,name:"",recipients:"",replyTo:"",message:`Hi, 
Please find attached a PDF status report. If you have any questions, feel free to contact me!
Best,`,dashboardId:void 0,dashboardName:"",dashboards:[{dashboard:void 0,timeRange:$d.raw}],schedule:{frequency:P.Weekly,timeZone:Fd()},formats:["pdf"],scaleFactor:No,options:{orientation:"landscape",layout:"grid",timeRange:$d.raw},enableDashboardUrl:!0,state:x.Scheduled},ul={reports:[],report:Ii,hasFetchedList:!1,hasFetchedSingle:!1,searchQuery:"",reportCount:0,isLoading:!0,isUpdated:!1,visitedSteps:[],settings:{branding:{reportLogoUrl:"",emailLogoUrl:"",emailFooterMode:M.SentBy,emailFooterText:"",emailFooterLink:""}}},Ri=(0,Hn.oM)({name:"reports",initialState:ul,reducers:{reportsLoaded:(W,te)=>({...W,reports:te.payload,reportCount:te.payload.length,hasFetchedList:!0}),reportLoaded:(W,te)=>({...W,report:te.payload,hasFetchedSingle:!0,isLoading:!1}),updateReportProp:(W,te)=>({...W,isUpdated:!0,report:te.payload}),clearReportState:W=>({...W,isUpdated:!1,visitedSteps:[],report:Ii}),reportLoadingBegin:W=>({...W,isLoading:!0}),reportLoadingEnd:W=>({...W,isLoading:!1}),testEmailSendBegin:W=>({...W,testEmailIsSending:!0}),testEmailSendEnd:W=>({...W,testEmailIsSending:!1}),setLastUid:(W,te)=>({...W,lastUid:(0,bm.mn)(te.payload)}),addVisitedStep:(W,te)=>({...W,visitedSteps:[...W.visitedSteps,...te.payload]})}}),{clearReportState:tc,reportLoaded:xm,reportsLoaded:Sm,updateReportProp:Ai,reportLoadingBegin:Mm,reportLoadingEnd:qm,testEmailSendBegin:Lr,testEmailSendEnd:Kd,setLastUid:ef,addVisitedStep:Li}=Ri.actions,ml={reports:Ri.reducer},Uo="api/reports";function nc(){return async W=>{const te=await(0,h.i)().get(Uo);W(Sm(te))}}function zd(W,te,ge){return async Oe=>{const Ke=await La.ae.getDashboardByUid(W),ot=new ec.f(Ke.dashboard,Ke.meta);if(Wd(ot.templating.list)){const en=Nd(ge)?ot?.time:ge;(0,oi.$t)().setTime(en)}const Rt=Ud(ot.templating.list,te);await Oe((0,Od.LX)(Ke.dashboard.uid,{...ot,templating:{list:Rt}})),Oe(ef(W))}}function Hd(W){return async te=>{te(Mm());try{const ge=await(0,h.i)().get(`${Uo}/${W}`);ge.dashboards||(ge.dashboards=[{dashboard:{uid:ge.dashboardUid,id:ge.dashboardId,name:ge.dashboardName},reportVariables:ge.templateVars,timeRange:ge.options.timeRange}]);for(const Oe of ge.dashboards)Oe.dashboard.uid&&await te(zd(Oe.dashboard.uid,Oe.reportVariables,Oe.timeRange));te(xm(ge))}catch{te(qm())}}}function Tm(W){return te=>(te(Lr()),(0,h.i)().post(`${Uo}/test-email/`,W).finally(()=>te(Kd())))}function ii(W){return async te=>{await(0,h.i)().delete(`${Uo}/${W}`),te(nc())}}function kd(W){return async()=>{try{await(0,h.i)().post(Uo,W)}catch(te){throw te}}}function _(W,te){return async ge=>{const Oe=["hour","minute","day"];W={...W,schedule:Object.fromEntries(Object.entries(W.schedule).filter(([Ke,ot])=>!Oe.includes(Ke)))},await(0,h.i)().put(`${Uo}/${W.id}`,W),te&&ge(nc())}}const k=W=>(0,ye.upperFirst)(W.map(te=>{switch(te){case"csv":case"pdf":return te.toUpperCase();case"image":return"embedded image"}}).join(", ")),X=(W={})=>{const{time:te,startDate:ge,endDate:Oe,endTime:Ke,timeZone:ot,frequency:Rt,dayOfMonth:en,workdaysOnly:Qt,intervalFrequency:vn,intervalAmount:bn,sendTime:mn}=W,xn=!te&&ge?Oi(String(ge)):te,Jn=ge&&mn!=="now"?Id(ge,xn,ot):"",Zn=Oe&&![P.Once,P.Never].includes(Rt)?Id(Oe,Ke,ot):"",Vn={frequency:Rt,timeZone:ot,workdaysOnly:Qt,intervalFrequency:vn,intervalAmount:bn?parseInt(bn,10):0,startDate:Jn,endDate:Zn,dayOfMonth:en?"last":""};return Object.fromEntries(Object.entries(Vn).filter(([ea,ta])=>ta))};function pe(W){const te=["th","st","nd","rd"],ge=W%100;return W+(te[(ge-20)%10]||te[ge]||te[0])}const Se=(W,te=b.Hours)=>W===P.Custom&&te===b.Hours,ze=(W,te=b.Hours)=>[P.Hourly,P.Daily].includes(W)||Se(W,te);function ke({startDate:W,endDate:te,intervalFrequency:ge=b.Hours,intervalAmount:Oe=2,frequency:Ke,dayOfMonth:ot,timeZone:Rt,workdaysOnly:en}){if(!W)return"";const Qt="en-US",{hour:vn,minute:bn}=Oi(W),mn=Ti(bn),xn=Ti(vn),Jn=(0,_a.CQ)(io(W)).locale(Qt).format("dddd"),Zn=ot==="last"?"last":pe(io(W).getDate());let Vn,ea;const ta=(0,Md.k)(Date.now(),Rt),pa=`at ${xn}:${mn}${ta?` ${ta}`:""}`,Sa=en&&ze(Ke,ge)?", Monday to Friday":"";if(te){const wa=(0,_a.CQ)(io(W)).locale(Qt).format("LL"),Fa=(0,_a.CQ)(io(te)).locale(Qt).format("LL");Fa!==wa?Vn=`${wa} - ${Fa}`:Vn=wa}switch(Ke){case P.Monthly:ea=`Monthly on the ${Zn} day ${pa}`;break;case P.Weekly:ea=`Every ${Jn} ${pa}`;break;case P.Daily:ea=`Daily ${pa}`;break;case P.Hourly:ea=`Hourly at minute ${mn}`;break;case P.Custom:ea=`Every ${Oe} ${ge}`;break;case P.Once:ea=`Once on ${(0,_a.CQ)(io(W)).locale(Qt).format("LL")}`;break;case P.Never:ea="Never";break;default:ea=""}return Vn&&ea?`${ea}, ${Vn}${Sa}`:(Ke===P.Custom&&(ea+=`, ${ge===b.Hours?`from ${xn}:${mn}${ta?` ${ta}`:""}`:`from ${(0,_a.CQ)(io(W)).locale(Qt).format("LL")}`}`),ea+Sa)}const yt=new Map([[P.Monthly,"month"],[P.Daily,"day"],[P.Weekly,"week"],[P.Hourly,"hour"]]),Vt=W=>{const{frequency:te,intervalFrequency:ge=b.Hours,intervalAmount:Oe="2"}=W;if(te===P.Never)return"The report will not be sent.";const Ke=W.workdaysOnly?", Monday to Friday.":".",ot=[];if(!W.startDate){ot.push("The report will be sent immediately after it is saved");const en=te===P.Custom?`${Oe} ${ge}`:yt.get(te);return en&&ot.push(`and will be sent every ${en}`),ot.join(" ")+Ke}const Rt=ke(X(W));return Rt&&ot.push(`The report will be sent: ${Rt}.`),ot.join(" ")},Zt=W=>{const te=ul.report.schedule;return Object.keys(te).length!==Object.keys(W).length?!0:Object.entries(te).some(([ge,Oe])=>Oe!==W[ge])},an=()=>{if(!window.location.search)return null;const W=new URLSearchParams(window.location.search);return{timeRange:{to:W.get("to")||"",from:W.get("from")||""},dashboard:{uid:W.get("db-uid"),id:W.get("db-id"),name:W.get("db-name")},variables:wd()}},En=W=>{if(W.id)return W;const te=an();if(!te)return W;const{timeRange:ge,dashboard:Oe,variables:Ke}=te;let ot=[...ul.report.dashboards];return ge?.from&&ge?.to&&(ot[0]={...ot[0],timeRange:ge}),Oe.name&&Oe.id&&Oe.uid&&(ot[0]={...ot[0],dashboard:{uid:Oe.uid,id:Number(Oe.id),name:Oe.name}}),Ke&&Object.keys(Ke).length&&(ot[0]={...ot[0],reportVariables:Ke}),{...W,dashboards:ot}},wn=()=>{const W=new URLSearchParams(window.location.search),te=W.get("to"),ge=W.get("from");return ge&&te?{from:ge,to:te}:null},Xn=(W,te)=>`${Xr}/${W}${te?"/"+te:""}`,Ca=W=>te=>`${Xr}/${te}${W?"/"+W:""}`,za=W=>Array.isArray(W)?W?.length:!0,gs=W=>{const te=[{step:S.SelectDashboard,fields:["dashboards"]},{step:S.FormatReport,fields:["formats"]},{step:S.Share,fields:["name","recipients"]}],ge=!W.dashboards?.[0]?.dashboard?.uid;return Kr.reduce((Oe,Ke)=>{if(Oe[Ke.id]={valid:!0},Ke.id===S.SelectDashboard)return Oe[S.SelectDashboard].valid=!ge,Oe;{const ot=te.find(Rt=>Rt.step===Ke.id)?.fields;return ot&&(Oe[Ke.id].valid=ot.every(Rt=>W[Rt]&&za(W[Rt]))),Oe}},{})},Br=(W,te)=>{const ge=gs(W);return te?!ge[te].valid:Object.values(ge).some(Oe=>!Oe.valid)},nr=({uid:W,name:te,className:ge})=>{const Oe=(0,I.wW)(ar);return W?a.createElement("a",{href:`${n.v.appUrl}d/${W}`,className:(0,N.cx)(Oe.link,ge),target:"_blank",rel:"noreferrer"},te||"View dashboard"):null},ar=W=>({link:N.css`
      display: inline-block;
      color: ${W.colors.text.link};
      margin-top: ${W.spacing(1)};
      font-size: ${W.typography.bodySmall.fontSize};

      :hover {
        text-decoration: underline;
      }
    `}),Yr=W=>{if(!W)return Kr[0];const te=Kr.findIndex(ge=>ge.id===W);return te===Kr.length-1?Kr[te]:Kr[te+1]},wo=W=>{if(!W||W===Kr[0].id)return;const te=Kr.findIndex(ge=>ge.id===W);return Kr[te-1]},Gd=(W,te)=>{const ge=wo(W);ge&&ge.id!==W&&Re.E1.push(Xn(ge.id,te))},tf=(0,a.forwardRef)(({activeStep:W,disabled:te,reportId:ge},Oe)=>{const Ke=(0,I.wW)(Sf),ot=(0,a.useRef)(null),Rt=wo(W),en=Yr(W),Qt=en.id===W;return(0,a.useImperativeHandle)(Oe,()=>({click:()=>{ot.current?.click()}})),a.createElement("div",{className:Ke.buttonRow},a.createElement("div",{className:Ke.buttonRowInner},a.createElement("div",null,Rt&&a.createElement(Le.zx,{variant:"secondary",onClick:()=>Gd(W,ge)},"Previous: ",Rt.name),!Qt&&a.createElement(Le.zx,{ref:ot,disabled:te,type:"submit"},`Next: ${en.name}`))))});tf.displayName="ButtonRow";const Sf=W=>({buttonRow:N.css`
      display: flex;
      padding: ${W.spacing(2,0,.5,0)};
      border-top: 1px solid ${W.colors.border.weak};
      width: 100%;
      background-color: ${W.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${W.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:N.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
    `}),nf=W=>{const te=W.state,ge=W.schedule.frequency===P.Never,Oe=ge||[x.Draft,x.Expired,x.Paused].includes(te),Ke=ge||[x.Draft,x.Expired].includes(te);return{isNever:ge,showPlay:Oe,disableEdit:Ke,reportState:te}},Mf=W=>{const{report:te}=W.reports;return{report:te}},Tf={loadReport:Hd,deleteReport:ii,updateReport:_},Of=(0,G.connect)(Mf,Tf),If=({report:W,loadReport:te,deleteReport:ge,updateReport:Oe})=>{const Ke=(0,I.wW)(af),[ot,Rt]=(0,a.useState)(!1),en=br.Vt.hasPermission(F.ReportingDelete),Qt=br.Vt.hasPermission(F.ReportingWrite),{showPlay:vn,disableEdit:bn,reportState:mn}=nf(W),xn=async()=>{let Zn=x.Scheduled;[x.Draft,x.Expired].includes(mn)?Zn=mn:mn!==x.Paused&&(Zn=x.Paused),await Oe({...W,state:Zn}),W.id&&te(W.id)},Jn=()=>{ge(W.id),Rt(!1),Re.E1.push(Xr)};return a.createElement("div",{className:Ke.editActions},a.createElement(Le.Qj,{href:Xn(S.SelectDashboard,W.id),type:"button",disabled:!Qt},"Edit report"),W.state!==x.Draft&&a.createElement(Le.zx,{type:"button",variant:"secondary",disabled:bn||!Qt,onClick:xn},vn?"Resume":"Pause"),a.createElement(ms.h,{type:"button",variant:"destructive","aria-label":"Delete report",name:"trash-alt",disabled:!en,onClick:()=>Rt(!0)}),a.createElement(ra.s,{isOpen:ot,title:"Delete report",body:"Are you sure you want to delete this report?",confirmText:"Delete",onConfirm:Jn,onDismiss:()=>Rt(!1)}))},af=W=>({editActions:N.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
      width: 100%;
      margin-bottom: ${W.spacing(3)};

      button,
      a {
        margin-left: ${W.spacing(2)};
      }
    `}),Rf=Of(If),sf=(0,a.forwardRef)(({saveDraft:W,children:te,existingReport:ge,disabled:Oe,activeStep:Ke,onDiscard:ot},Rt)=>{const en=(0,I.wW)(Af),Qt=Yr(Ke),vn=(0,a.useRef)(null),bn=Qt.id===Ke,mn=ge?"Update report":"Save report";return(0,a.useImperativeHandle)(Rt,()=>({click:()=>{vn.current?.click()}})),a.createElement("div",{className:en.container},bn&&a.createElement(Le.zx,{ref:vn,disabled:Oe,type:"submit"},mn),a.createElement(Le.zx,{variant:"secondary",onClick:W},"Save as draft"),te,a.createElement(Le.zx,{variant:"destructive",fill:"outline",onClick:ot},"Discard"))});sf.displayName="PageActions";const Af=W=>({container:N.css`
      display: flex;
      justify-content: flex-end;
      width: 100%;

      & > button,
      & > a {
        margin-right: ${W.spacing(3)};
      }
    `}),Lf=W=>{const{report:te,isUpdated:ge,visitedSteps:Oe}=W.reports;return{existingReport:!!te.id,isUpdated:ge,report:te,visitedSteps:Oe}},Bf={addVisitedStep:Li,clearReportState:tc,createReport:kd,updateReport:_},Nf=(0,G.connect)(Lf,Bf),Uf=({activeStep:W,addVisitedStep:te,children:ge,clearReportState:Oe,confirmRedirect:Ke,createReport:ot,disabled:Rt,editMode:en,existingReport:Qt,getFormData:vn,isUpdated:bn,onSubmit:mn,report:xn,reportId:Jn,updateReport:Zn,visitedSteps:Vn,pageActions:ea})=>{const ta=(0,I.wW)(wf),pa=Yr(W),Sa=(0,de.k6)(),wa=(0,a.useRef)(null),[Fa,ls]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(dr=>{dr===Kr[Kr.length-1].id?te(Kr.map(ir=>ir.id)):te([dr])})(W)},[W,te]),(0,a.useEffect)(()=>{Fa&&Sa.push(Xr)},[Fa,Sa]);const Ma=Xs=>{Xs.preventDefault();const dr=Xn(pa.id,Jn);mn(),Sa.push(dr)},Ka=async()=>{if(vn){const dr=vn();xn={...xn,...dr}}ls(!0),await(xn.id?Zn:ot)({...xn,state:x.Draft}),(0,o.ff)("reports_draft_saved"),Oe()},ka=()=>{Oe(),(0,o.ff)("reports_report_abandoned",{namePopulated:!!xn.name,recipientsPopulated:!!xn.recipients,replyToPopulated:!!xn.replyTo,numberOfDashboardsSelected:xn.dashboards.length,scheduleCustomized:Zt(xn.schedule)})},Ns=Xs=>!Kr.map(ir=>Xn(ir.id,Jn)).includes(Xs.pathname),Ds=()=>{const Xs=Kr[Kr.length-1].id;W!==Xs&&wa.current?.click()},ns=()=>{Sa.push(Xr)},Fs=(0,a.useMemo)(()=>gs(xn),[xn]);return a.createElement("form",{onSubmit:Ma,className:ta.container},!en&&a.createElement(sf,{saveDraft:Ka,existingReport:Qt,ref:wa,activeStep:W,disabled:Rt,onDiscard:ns},ea),en&&a.createElement(Rf,null),a.createElement(Ye,{confirmRedirect:!Fa&&Boolean(Ke||bn),onDiscard:ka,onLocationChange:Ns}),a.createElement("div",{className:ta.inner},!en&&a.createElement(fe,{activeStep:W,onStepChange:Ds,getNextUrl:Ca(Jn),visitedSteps:Vn,steps:Kr,validationResults:Fs}),a.createElement("div",{className:ta.content},ge,!en&&a.createElement(tf,{ref:wa,activeStep:W,disabled:Rt,reportId:Jn}))))},wf=W=>({container:N.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,inner:N.css`
      display: flex;
      justify-content: flex-start;
      flex-direction: column;
      flex: 1 0 auto;
    `,content:N.css`
      padding-bottom: ${W.spacing(3)};
      width: min(70%, 800px);
    `}),ac=Nf(Uf),Wf=W=>{const{report:te,isUpdated:ge}=W.reports;return{report:te,isUpdated:ge}},jd={createReport:kd,updateReport:_,clearReportState:tc},$f=(0,G.connect)(Wf,jd)(({report:W,createReport:te,updateReport:ge,clearReportState:Oe,isUpdated:Ke,reportId:ot})=>{const{formats:Rt,options:en,schedule:Qt,dashboards:vn}=W,{handleSubmit:bn,formState:{isSubmitSuccessful:mn}}=(0,z.cI)(),xn=(0,I.wW)(rf),Jn=!!ot&&!Ke,Zn=Br(W),{time:Vn,date:ea}=Ld(Qt.startDate),{time:ta,date:pa}=Ld(Qt.endDate);(0,a.useEffect)(()=>{mn&&Re.E1.push(Xr)},[mn]);const Sa=async()=>{const Ma=W.id?ge:te;if(W.state===x.Draft){const Ka=W.schedule.frequency===P.Never?x.Never:x.Scheduled;W={...W,state:Ka}}await Ma(W),(0,o.ff)("reports_report_submitted",{replyToPopulated:!!W.replyTo,includesDashboardLink:W.enableDashboardUrl,numberOfDashboardsSelected:W.dashboards.length,templateVariablesSelected:W.dashboards.some(Ka=>!!Ka.reportVariables),orientation:W.options.orientation,layout:W.options.layout,frequency:W.schedule.frequency,sendTime:W.schedule.startDate?"later":"now",endDate:!!W.schedule.endDate}),Oe()},{orientation:wa,layout:Fa}=ul.report.options,ls=[{title:"Select dashboard",id:S.SelectDashboard,items:(vn||[]).flatMap((Ma,Ka,ka)=>[{title:`Source dashboard${Ka===0?"*":""}`,value:Ma.dashboard?.uid?a.createElement(nr,{name:Ma.dashboard.name,uid:Ma.dashboard?.uid,className:xn.dashboardLink}):"",id:"name",required:!0},{title:"Template variables",value:a.createElement(Kf,{variables:Ma.reportVariables,className:xn.title})},{title:"Time range",value:Bd(Ma.timeRange)},...ka.length>1&&Ka!==ka.length-1?[{title:"",value:""}]:[]])},{title:"Format report",id:S.FormatReport,items:[{title:"Preferred format*",value:k(Rt),id:"formats",required:!0},...Rt.includes("pdf")?[{title:"PDF orientation",value:(0,ye.capitalize)(en.orientation||wa)},{title:"PDF layout",value:(0,ye.capitalize)(en.layout||Fa)},{title:"Scale factor",value:ql[W.scaleFactor||No].label}]:[]]},{title:"Schedule",id:S.Schedule,items:[{title:"Recurrence",value:(0,ye.capitalize)(Qt.frequency)},...Qt.frequency===P.Custom?[{title:"Repeat every",value:`${Qt.intervalAmount} ${Qt.intervalFrequency}`}]:[],...Qt.frequency!==P.Never?[{title:"Start date",value:ea||"Now"},{title:"Start time",value:Vn||"Now"},{title:"End date",value:pa},{title:"End time",value:ta},{title:"Time zone",value:Qt.timeZone?(0,Md.k)(Date.now(),Qt.timeZone):""}]:[],...ze(Qt.frequency,Qt.intervalFrequency)?[{title:"Send Monday to Friday only",value:Qt.workdaysOnly?a.createElement(i.J,{name:"check",size:"xl"}):a.createElement(i.J,{name:"minus",size:"xl"})}]:[],{value:Vt(W.schedule),title:""}]},{title:"Share",id:S.Share,items:[{title:"Report name*",value:W.name,id:"name",required:!0},{title:"Recipients*",value:W.recipients,id:"recipients",required:!0},{title:"Reply-to-email",value:W.replyTo||"none"},{title:"Message",value:W.message||"none"},{title:"Dashboard link",value:W.enableDashboardUrl?a.createElement(i.J,{name:"check",size:"xl"}):a.createElement(i.J,{name:"minus",size:"xl"})}]}];return a.createElement(ac,{activeStep:S.Confirm,confirmRedirect:!mn&&Ke,disabled:Zn,editMode:Jn,onSubmit:bn(Sa),reportId:ot},a.createElement(ce.C,{label:Jn?"":"5. Confirm"},ls.map(Ma=>{const Ka=Br(W,Ma.id);return a.createElement("div",{className:xn.section,key:Ma.title},a.createElement("div",{className:xn.sectionHeader},a.createElement("h5",{className:xn.sectionTitle},Ma.title),a.createElement(Le.Qj,{variant:Ka?"primary":"secondary",fill:"text",href:Xn(Ma.id,ot),size:"sm"},"Edit")),Ma.items.filter(ka=>ka.value!==void 0).map((ka,Ns)=>{const Ds=!!ka.required&&(!ka.value||Array.isArray(ka.value)&&!ka.value.length);return ka.title?a.createElement("div",{className:xn.row,key:Ns},a.createElement("div",{className:(0,N.cx)(xn.title,Ds&&xn.warning)},ka.title,":"),a.createElement("div",{className:(0,N.cx)(xn.value,ka.value==="none"&&!Ds?xn.textMuted:"")},Ds?a.createElement(i.J,{name:"exclamation-triangle",className:xn.warning}):ka.value)):a.createElement("div",{className:(0,N.cx)(xn.row,xn.textMuted),key:Ns},ka.value)}))})))}),rf=W=>({section:N.css`
      width: 100%;
      padding: ${W.spacing(3,0)};
      margin-bottom: ${W.spacing(3)};
    `,sectionHeader:N.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${W.spacing(1)};
      border: 1px solid ${W.colors.border.weak};
    `,sectionTitle:N.css`
      margin: 0;
    `,row:N.css`
      border: 1px solid ${W.colors.border.weak};
      border-top: none;
      display: flex;
      width: 100%;
      padding: ${W.spacing(1)};
    `,warning:N.css`
      color: ${W.colors.warning.text};
    `,title:N.css`
      width: 30%;
      color: ${W.colors.text.secondary};
    `,textMuted:N.css`
      color: ${W.colors.text.secondary};
    `,value:N.css`
      width: 70%;
      word-break: break-word;
    `,dashboardLink:N.css`
      color: ${W.colors.text.primary};
      font-size: ${W.typography.body.fontSize};
      margin-top: 0;
    `}),Kf=({variables:W,className:te})=>{const ge=(0,I.wW)(rf);return!W||!Object.keys(W).length?a.createElement("span",{className:ge.textMuted},"none"):a.createElement(a.Fragment,null,Object.entries(W).map(([Oe,Ke])=>a.createElement("span",{key:Oe},a.createElement("span",{className:te},Oe),": ",Ke,";"," ")))};var of=e(90330),Om=e(47406);const Vf=W=>Om.isValid(W.from)&&Om.isValid(W.to),zf=W=>!W||!Vf(W)?{from:"",to:""}:{to:W.to.valueOf().toString(),from:W.from.valueOf().toString()},yo=W=>{const te=Hf(W.from),ge=Hf(W.to);return Vf({from:te,to:ge})?{from:te,to:ge,raw:{from:te,to:ge}}:$d},Hf=W=>{const te=parseInt(W,10);return isNaN(te)?W:(0,_a.zh)(te)},Im=W=>W?.length?!W.some(te=>!!te.dashboard?.uid):!0,Wo=s.Vt.hasPermission(F.ReportingWrite)||s.Vt.hasPermission(F.ReportingCreate),Yd=()=>{const W=n.v.rendererVersion;if(W==="")return null;const ge=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.exec(W);let Oe="";if(ge&&ge.length>1&&(Oe=ge[1]),Oe==="")return 1;let Ke=parseInt(Oe,10);return isNaN(Ke)&&(Ke=1),Ke},kf=W=>{const{report:te}=W.reports;return{report:te}},Gf={updateReportProp:Ai},lf=(0,G.connect)(kf,Gf),jf=new Map([["grid","Display the panels in their positions on the dashboard."],["simple","Display one panel per row."]]),Rm=new Map([["pdf","Attach the report as a PDF"],["image","Embed a dashboard image in the email"],["csv","Attach a CSV file of table panel data"]]),cg=({report:W,updateReportProp:te,reportId:ge})=>{const{dashboards:Oe,formats:Ke,options:ot,name:Rt,scaleFactor:en=No}=W||{},{handleSubmit:Qt,control:vn,register:bn,watch:mn,getValues:xn,formState:{isDirty:Jn}}=(0,z.cI)({defaultValues:{formats:Ke,scaleFactor:en,options:{layout:ot.layout,orientation:ot.orientation}}}),Zn=mn("options.layout"),Vn=mn("options.orientation"),ea=mn("formats"),ta=mn("scaleFactor"),pa=Yd(),Sa=(0,t.v)("reports.email")&&!Im(W.dashboards),wa=({formats:Ma,options:Ka,scaleFactor:ka})=>{Jn&&te({...W,options:{...W.options,...Ka},formats:Ma,scaleFactor:ka})},Fa=()=>{const{formats:Ma,options:Ka,scaleFactor:ka}=xn();return{options:{...W.options,...Ka},formats:Ma,scaleFactor:ka}},ls=()=>{if(Im(Oe))return;const Ma={title:Rt,scaleFactor:ta};return Vn&&(Ma.orientation=Vn),Zn&&(Ma.layout=Zn),Ma.dashboards=JSON.stringify(Oe.map(Ka=>{const{from:ka,to:Ns}=yo(Ka.timeRange).raw;return{dashboard:{uid:Ka.dashboard?.uid},timeRange:{from:ka.valueOf().toString(),to:Ns.valueOf().toString()},reportVariables:Ka.reportVariables}})),ri.Cj.appendQueryToUrl("api/reports/render/pdfs/",ri.Cj.toUrlParams(Ma))};return a.createElement(ac,{activeStep:S.FormatReport,onSubmit:Qt(wa),confirmRedirect:Jn,getFormData:Fa,reportId:ge,pageActions:[a.createElement(Le.Qj,{onClick:()=>Sa&&(0,o.ff)("reports_preview_pdf"),icon:"external-link-alt",href:ls(),size:"xs",target:"_blank",rel:"noreferrer noopener",variant:"secondary",disabled:!Sa,key:"preview"},"Preview PDF")]},a.createElement(ce.C,{label:"2. Format report",disabled:!Wo},a.createElement(ce.C,null,a.createElement(Os.wc,null,[...Rm].map(([Ma,Ka])=>{const{onChange:ka,...Ns}=bn("formats");return a.createElement(ei.X,{...Ns,key:Ma,htmlValue:Ma,label:Ka,onChange:Ds=>{Ma==="csv"&&Ds.currentTarget.checked&&pa!==null&&pa<3&&s.h$.emit(Xo.SI.alertError,["To export CSV files, you must update the Grafana Image Renderer plugin."]),ka(Ds)}})}))),ea.includes("pdf")&&a.createElement(ce.C,{label:"Style the PDF"},a.createElement(H.g,{label:"Orientation"},a.createElement(V.g,{name:"options.orientation",control:vn,render:({field:{ref:Ma,...Ka}})=>a.createElement(ks.S,{...Ka,options:A,size:"md"})})),a.createElement(H.g,{label:"Layout",description:jf.get(Zn)},a.createElement(V.g,{name:"options.layout",control:vn,render:({field:{ref:Ma,...Ka}})=>a.createElement(ks.S,{...Ka,options:T,size:"md"})})),a.createElement(H.g,{label:"Zoom",description:"Zoom in to enlarge text, or zoom out to see more data (like table columns) per panel.",className:Yf},a.createElement(V.g,{name:"scaleFactor",control:vn,render:({field:{ref:Ma,value:Ka,...ka}})=>a.createElement(of.i,{...ka,value:Number(Ka),min:1,max:3,step:1,marks:ql,included:!1})})))))},Yf=N.css`
  max-width: 350px;
  // Hide Slider input
  input {
    display: none;
  }
`,Am=lf(cg);var cf=e(86348),df=e(91942),uf=e(52566);const Qf=W=>{const{report:te}=W.reports;return{report:te}},_f={updateReportProp:Ai},mf=(0,G.connect)(Qf,_f),Zf=[{label:"Once",value:P.Once},{label:"Hourly",value:P.Hourly},{label:"Daily",value:P.Daily},{label:"Weekly",value:P.Weekly},{label:"Monthly",value:P.Monthly},{label:"Custom",value:P.Custom},{label:"Never",value:P.Never}],ff=[{label:"hours",value:b.Hours},{label:"days",value:b.Days},{label:"weeks",value:b.Weeks},{label:"months",value:b.Months}],Qd=W=>W==="now"&&[29,30,31].includes((0,_a.CQ)().toDate().getDate()),gf=mf(({report:W,updateReportProp:te,reportId:ge})=>{const{handleSubmit:Oe,control:Ke,watch:ot,register:Rt,setValue:en,getValues:Qt,formState:{isDirty:vn}}=(0,z.cI)(),{frequency:bn,timeZone:mn,startDate:xn,endDate:Jn,dayOfMonth:Zn,intervalAmount:Vn,intervalFrequency:ea}=W.schedule,ta=bn===P.Never?"":xn,pa=ta?"later":"now",Sa={startDate:ta,sendTime:pa,intervalFrequency:b.Hours,intervalAmount:"2",...W.schedule},wa=ot("schedule",Sa)||{},{frequency:Fa,startDate:ls,endDate:Ma,intervalFrequency:Ka=b.Hours,dayOfMonth:ka,sendTime:Ns=pa,workdaysOnly:Ds}=wa,ns=(0,I.wW)(Jf),Fs=new Date(ls).getDate(),Xs=ir=>{if(vn){const qs=X(ir.schedule);te({...W,schedule:qs})}},dr=()=>({schedule:X(Qt().schedule)});return a.createElement(ac,{activeStep:S.Schedule,onSubmit:Oe(Xs),confirmRedirect:vn,getFormData:dr,reportId:ge},a.createElement(ce.C,{label:"3. Schedule"},a.createElement(H.g,{label:"Frequency"},a.createElement(V.g,{defaultValue:bn,name:"schedule.frequency",render:({field:{ref:ir,onChange:qs,...Mr}})=>a.createElement(ks.S,{...Mr,fullWidth:!0,options:Zf,disabled:!Wo,onChange:vr=>{ze(vr,Ka)||en("schedule.workdaysOnly",!1),qs(vr)}}),control:Ke})),Fa!==P.Never&&a.createElement(H.g,{label:"Time"},a.createElement(V.g,{control:Ke,name:"schedule.sendTime",defaultValue:pa,render:({field:{ref:ir,onChange:qs,...Mr}})=>a.createElement(ks.S,{...Mr,onChange:vr=>{vr!=="now"&&!ls?en("schedule.startDate",(0,_a.CQ)().toDate()):vr==="now"&&en("schedule.startDate",""),qs(vr)},options:[{label:"Send now",value:"now"},{label:"Send later",value:"later"}]})})),a.createElement(a.Fragment,null,Fa===P.Custom&&a.createElement(Os.Lh,null,a.createElement(H.g,{label:"Repeat every"},a.createElement(Q.I,{type:"number",min:"2",...Rt("schedule.intervalAmount"),placeholder:"e.g. 2",defaultValue:Vn||2,id:"repeat-frequency"})),a.createElement(H.g,{label:" "},a.createElement(V.g,{control:Ke,defaultValue:ff.find(ir=>ir.value===ea)?.value||b.Hours,render:({field:{ref:ir,onChange:qs,...Mr}})=>a.createElement(u.Ph,{...Mr,onChange:vr=>qs(vr.value),options:ff,width:16,placeholder:"hours","aria-label":"Custom frequency"}),name:"schedule.intervalFrequency"}))),Fa===P.Monthly&&(Qd(Ns)||Ns==="later")&&a.createElement(H.g,null,a.createElement(V.g,{control:Ke,defaultValue:Zn==="last",render:({field:{onChange:ir,...qs}})=>a.createElement(ei.X,{...qs,label:"Send on the last day of month",onChange:Mr=>{en("schedule.startDate",(0,_a.CQ)().endOf("month").toDate()),ir(Mr)}}),name:"schedule.dayOfMonth"}))),a.createElement("div",{className:Ns!=="now"&&Fa!==P.Never?"":ns.hidden},a.createElement(Os.Lh,{width:"100%"},a.createElement(H.g,{label:"Start date"},a.createElement(V.g,{name:"schedule.startDate",control:Ke,defaultValue:io(ta),render:({field:{ref:ir,...qs}})=>a.createElement(cf.d,{...qs,width:16,placeholder:"Select date","aria-label":"Report schedule start date",closeOnSelect:!0})})),a.createElement(H.g,{label:"Start time"},a.createElement(V.g,{name:"schedule.time",render:({field:{onChange:ir,ref:qs,value:Mr,...vr}})=>a.createElement(df.y,{...vr,value:Mr,minuteStep:10,disabled:!Wo,onChange:Zs=>{Zs.isValid()&&ir({hour:Zs.hour?.(),minute:Zs.minute?.()})}}),defaultValue:Oi(xn),control:Ke})),a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Time zone"},a.createElement(V.g,{name:"schedule.timeZone",render:({field:{ref:ir,...qs}})=>a.createElement(uf.O,{...qs,width:30,disabled:!Wo}),defaultValue:mn||Fd(),control:Ke}))))),Fa===P.Monthly&&!ka&&([29,30,31].includes(Fs)||Qd(Ns))&&a.createElement("small",{className:ns.warningText},"Note: some months do not have a"," ",pe(Qd(Ns)?(0,_a.CQ)().toDate().getDate():Fs)," day and reports will not be sent on those months. Choose an earlier date or"," ",a.createElement("strong",null,'"Send on the last day of month"')," to send a report at the end of each month."),![P.Once,P.Never].includes(Fa)&&a.createElement(Os.Lh,{width:"100%"},a.createElement(H.g,{label:"End date"},a.createElement(V.g,{name:"schedule.endDate",control:Ke,defaultValue:io(Jn),render:({field:{ref:ir,...qs}})=>a.createElement(cf.d,{...qs,width:16,placeholder:"Does not end","aria-label":"Report schedule end date",minDate:new Date(ls),closeOnSelect:!0})})),Ma&&(Fa===P.Hourly||Se(Fa,Ka))&&a.createElement(H.g,{label:"End time"},a.createElement(V.g,{name:"schedule.endTime",render:({field:{onChange:ir,ref:qs,value:Mr,...vr}})=>a.createElement(df.y,{...vr,value:Mr,minuteStep:10,disabled:!Wo,onChange:Zs=>{Zs?.isValid()&&ir({hour:Zs.hour?.(),minute:Zs.minute?.()})}}),defaultValue:Oi(Jn),control:Ke}))),ze(Fa,Ka)&&a.createElement(H.g,null,a.createElement(ei.X,{...Rt("schedule.workdaysOnly"),label:"Send Monday to Friday only",defaultChecked:Ds})),a.createElement("div",{className:ns.schedulePreview},a.createElement(i.J,{name:"calendar-alt"}),Vt({...Sa,...wa}))))}),Jf=W=>({warningText:N.css`
      color: ${W.colors.warning.main};
      display: block;
      margin: -${W.spacing(1)} 0 ${W.spacing(3)} 0;
    `,hidden:N.css`
      display: none;
    `,schedulePreview:N.css`
      display: flex;
      align-items: center;

      svg {
        margin-right: ${W.spacing(1)};
      }
    `});var Xf=e(95794),ug=e(99151),mg=e.n(ug);const fg=({onChange:W,value:te,width:ge,isClearable:Oe=!1,invalid:Ke,disabled:ot,id:Rt,optionLabel:en="label",excludedDashboards:Qt})=>{const vn=mg()(xn=>gg(xn||"",en,Qt),300),bn=te?{value:te,[en]:te[en]}:void 0,mn=xn=>{W(xn?.value)};return a.createElement(u.qb,{inputId:Rt,width:ge,isClearable:Oe,defaultOptions:!0,loadOptions:vn,onChange:mn,placeholder:"Select dashboard",noOptionsMessage:"No dashboards found",value:bn,invalid:Ke,disabled:ot,getOptionLabel:xn=>xn[en]})};async function gg(W,te,ge){const Ke=(await La.ae.search({type:"dash-db",query:W,limit:100})).map(({id:ot,uid:Rt="",title:en,folderTitle:Qt})=>{const vn={id:ot,uid:Rt,[te]:`${Qt??"General"}/${en}`};return{value:vn,[te]:vn[te]}});return ge?Ke.filter(({value:ot})=>!ge.includes(ot.uid)):Ke}const pg=W=>{const{report:te}=W.reports;return{report:te,templating:W.templating.keys}},hg={updateReportProp:Ai,initVariables:zd,cleanUpVariables:Od.kG},vg=(0,G.connect)(pg,hg),pf={dashboard:void 0,timeRange:{from:"",to:""},reportVariables:{}},Eg=({report:W,reportId:te,updateReportProp:ge,initVariables:Oe,cleanUpVariables:Ke})=>{const{handleSubmit:ot,control:Rt,formState:{isDirty:en},setValue:Qt,getValues:vn,watch:bn}=(0,z.cI)({defaultValues:{dashboards:En(W).dashboards||[pf]}}),{fields:mn,append:xn,remove:Jn}=(0,z.Dq)({control:Rt,name:"dashboards",keyName:"fieldId"}),Zn=bn("dashboards"),Vn=(0,I.wW)(Cg);(0,a.useEffect)(()=>{const wa=an();if(wa){const{dashboard:Fa,variables:ls,timeRange:Ma}=wa;ls&&Fa.uid&&Oe(Fa.uid,ls,Ma),Fa.uid&&Qt("dashboards.0.dashboard",{...Fa,id:parseInt(Fa.id,10)},{shouldDirty:!0})}},[Oe,W,Qt]);const ea=wa=>(Fa,ls)=>{Qt(`dashboards.${wa}.timeRange`,{from:"",to:""});const Ma=vn().dashboards?.map(({dashboard:ka})=>ka);if(!Fa){if(!ls)return;Ma.some(Ns=>Ns?.uid===ls)||Ke(ls);return}const Ka=Ma.filter(ka=>ka?.uid===Fa.uid).length>1;if(Fa.uid&&!Ka){const ka=W.dashboards?.[wa],Ns=Fa.id===ka?.dashboard?.id?ka?.reportVariables:void 0;Oe(Fa.uid,Ns)}},ta=wa=>{const Fa=pa(wa.dashboards);en&&ge({...W,dashboards:Fa})},pa=wa=>{const Fa=wa?.filter(({dashboard:ls})=>ls?.uid).map(({dashboard:ls,timeRange:Ma})=>{const Ka=ls?.uid;return{dashboard:Ka?{uid:Ka,id:ls?.id,name:ls?.name}:void 0,timeRange:zf(Ma?.raw),reportVariables:Ka?dl((0,Si.gt)(Ka).filter(ka=>ka.hide!==Lo.bU.hideVariable)):void 0}});return Fa?.length?Fa:[pf]},Sa=()=>({dashboards:pa(vn().dashboards)});return a.createElement(ac,{activeStep:S.SelectDashboard,onSubmit:ot(ta),confirmRedirect:en,getFormData:Sa,reportId:te},a.createElement(ce.C,{label:"1. Select dashboard"},a.createElement(a.Fragment,null,mn.map((wa,Fa)=>{const ls=Zn[Fa].dashboard?.uid||"",Ma=Zn[Fa]?.reportVariables,Ka=ls?(0,Si.gt)(ls):[],ka=Ns=>{Wd(Ka)&&Oe(ls,Ma,Ns)};return a.createElement("div",{key:wa.fieldId,className:(0,N.cx)(Vn.section,Zn.length>1&&Vn.sectionBorder)},a.createElement(yg,{field:wa,dashboardUid:ls,onDashboardChange:ea(Fa),variables:Ka,control:Rt,index:Fa,setValue:Qt,selectedDashboards:Zn,onTimeRangeChange:ka}),mn.length>1&&a.createElement(Le.zx,{className:Vn.removeBtn,variant:"secondary",fill:"outline",icon:"trash-alt",onClick:()=>Jn(Fa)},"Remove dashboard"))}),a.createElement(Le.zx,{type:"button",variant:"secondary",onClick:()=>xn(pf)},"+ Add another dashboard"))))},yg=({field:W,index:te,onDashboardChange:ge,variables:Oe,control:Ke,dashboardUid:ot,setValue:Rt,onTimeRangeChange:en,selectedDashboards:Qt=[]})=>{const vn=yo(W.timeRange),bn=Oe.filter(Vn=>Vn.hide!==Lo.bU.hideVariable),mn=ot!==void 0&&Boolean(bn.length),xn=Qt.filter(({dashboard:Vn})=>Vn?.uid===ot).length>1,Jn=Qt.findIndex(({dashboard:Vn})=>Vn?.uid===ot),Zn=xn&&Jn!==te;return a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Source dashboard",required:!0},a.createElement(a.Fragment,null,a.createElement(V.g,{name:`dashboards.${te}.dashboard`,control:Ke,render:({field:{onChange:Vn,ref:ea,...ta}})=>a.createElement(fg,{...ta,"aria-label":"Source dashboard",isClearable:!0,optionLabel:"name",disabled:!Wo,onChange:pa=>{Vn(pa||null),ge(pa,ot)}})}),a.createElement(nr,{uid:ot}))),mn&&a.createElement(H.g,{label:"Template variables",description:Zn&&`When adding the same dashboard multiple times in one report, template variables that you selected first
are applied to all instances of that dashboard in the report.`},Zn?a.createElement(a.Fragment,null):a.createElement(a.Fragment,null,bn.map(Vn=>{const{picker:ea,setValue:ta}=Yl.z.get(Vn.type);return a.createElement(se._,{label:Vn.name,key:Vn.name,labelWidth:16,disabled:!Wo},a.createElement(ea,{variable:Vn,readOnly:!1,onVariableChange:pa=>{(0,rl.eL)(pa)&&!(0,jl.Q)(pa.current)&&(ta(pa,pa.current),Rt(`dashboards.${te}.reportVariables`,dl([pa]),{shouldDirty:!0}))}}))}))),a.createElement(H.g,{label:"Time range",description:"Generate report with the data from specified time range. If custom time range is empty the time range from the report's dashboard is used.",disabled:!Wo},a.createElement(V.g,{control:Ke,name:`dashboards.${te}.timeRange`,defaultValue:vn,render:({field:{ref:Vn,value:ea,onChange:ta,...pa}})=>a.createElement(Xf.K,{value:ea||vn,onChange:Sa=>{ta(Sa),en(Sa.raw)},...pa,clearable:!0})})))},Pg=vg(Eg),Cg=W=>({removeBtn:N.css`
      margin-bottom: ${W.spacing(2)};
    `,section:N.css`
      padding-bottom: ${W.spacing(2)};
    `,sectionBorder:N.css`
      &:not(:last-of-type) {
        border-bottom: 1px solid ${W.colors.border.weak};
        margin-bottom: ${W.spacing(3)};
      }
    `,infoText:N.css`
      color: ${W.colors.text.secondary};
      font-size: ${W.typography.size.sm};
      font-weight: ${W.typography.fontWeightRegular};
    `});var Dg=e(5191),bg=e(43339);const hf=W=>W?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(W):!1,vf=/[,;\n]/,Ef=(W,te=vf)=>W?W.split(te).filter(Boolean).every(ge=>hf(ge)):!0,xg=(W="",te=["png","jpg","gif"])=>{if(!W)return!0;const ge=W.split(".");return te.includes(ge[ge.length-1])},Sg=({onDismiss:W,onSendTestEmail:te,emails:ge})=>{const Oe=(0,I.Fg)(),Ke=Mg(Oe),[ot,Rt]=(0,a.useState)(""),[en,Qt]=(0,a.useState)(""),[vn,bn]=(0,a.useState)(!1),[mn,xn]=(0,a.useState)(!1),Jn=pa=>{const{checked:Sa}=pa.target;xn(Sa),Sa?(Rt(ge),Vn(ge)):(ea(),Rt(""))},Zn=pa=>{Rt(pa.currentTarget.value),bn(!1)},Vn=pa=>Ef(pa)?(ea(),!0):(bn(!0),Qt("Invalid email"),!1),ea=()=>{bn(!1),Qt("")},ta=()=>{Vn(ot),Vn(ot)&&(te(ot,mn),W())};return a.createElement(Te.u,{className:Ke.modal,isOpen:!0,title:"Send test email",icon:"share-alt",onDismiss:W},a.createElement(a.Fragment,null,a.createElement("div",{className:Ke.content},a.createElement(H.g,{label:"Email",disabled:mn,invalid:vn,error:en},a.createElement(Q.I,{disabled:mn,name:"email",placeholder:"your.address@company.com",type:"email",value:ot,onChange:Zn})),a.createElement(ei.X,{value:mn,label:"Use emails from report",onChange:Jn})),a.createElement(Te.u.ButtonRow,null,a.createElement(Le.zx,{variant:"secondary",onClick:W,fill:"outline"},"Cancel"),a.createElement(Le.zx,{variant:"primary",onClick:ta},"Send"))))},Mg=(0,mo.B)(W=>({modal:N.css`
      width: 500px;
    `,content:N.css`
      margin-bottom: ${W.spacing.lg};
    `})),Tg=W=>{const{testEmailIsSending:te,report:ge}=W.reports;return{report:ge,testEmailIsSending:te}},Og={updateReportProp:Ai,sendTestEmail:Tm},Ig=(0,G.connect)(Tg,Og),Rg=({report:W,reportId:te,updateReportProp:ge,sendTestEmail:Oe,testEmailIsSending:Ke})=>{const{message:ot,name:Rt,recipients:en,replyTo:Qt,enableDashboardUrl:vn,dashboards:bn}=W,{handleSubmit:mn,control:xn,register:Jn,setError:Zn,clearErrors:Vn,watch:ea,getValues:ta,formState:{errors:pa,isDirty:Sa}}=(0,z.cI)({mode:"onBlur"}),wa=(0,I.wW)(Ag),Fa=s.Vt.hasPermission(F.ReportingSend),ls=ea("name",Rt),Ma=ea("recipients",en),Ka=!Fa||!(0,t.v)("reports.email")||!ls||!Ma||Im(bn),ka=(ns,Fs)=>{const Xs={...W,...ta()},dr=Fs?Xs.recipients:ns;return Oe({...Xs,recipients:dr})},Ns=ns=>{if(Sa){const{name:Fs}=ns;ge({...W,...ns,name:Fs.trim()})}},Ds=()=>{const ns=ta(),{name:Fs}=ns;return{...ns,name:Fs.trim()}};return a.createElement(ac,{activeStep:S.Share,onSubmit:mn(Ns),confirmRedirect:Sa,getFormData:Ds,reportId:te,pageActions:[a.createElement(Dg.JY,{key:"send-test-email"},({showModal:ns,hideModal:Fs})=>a.createElement(Le.zx,{disabled:Ka,size:"xs",variant:"secondary",onClick:Xs=>{Xs.preventDefault(),ns(Sg,{onDismiss:Fs,onSendTestEmail:ka,emails:Ma})}},"Send test email"))]},Ke&&a.createElement("div",{className:"page-alert-list"},a.createElement(ne.b,{title:"Sending test email...",severity:"info",elevated:!0})),a.createElement(ce.C,{label:"4. Share",disabled:!Wo},a.createElement(H.g,{label:"Report name",required:!0,invalid:!!pa.name,error:"Name is required"},a.createElement(Q.I,{...Jn("name"),type:"text",id:"name",defaultValue:Rt,placeholder:"System status report"})),a.createElement(H.g,{className:wa.field,label:"Recipients",required:!0,invalid:!!pa.recipients,error:pa.recipients?.message,description:"Separate multiple emails with a comma or semicolon."},a.createElement(V.g,{name:"recipients",control:xn,defaultValue:en,render:({field:{ref:ns,value:Fs,onChange:Xs,...dr}})=>a.createElement(bg.B,{...dr,disabled:!Wo,invalid:!!pa.recipients,onChange:ir=>{const qs=ir.join(";").split(vf).filter(Boolean).map(vr=>vr.trim()),Mr=qs.filter(vr=>!hf(vr));Mr.length?Zn("recipients",{type:"manual",message:`Invalid email${Mr.length>1?"s":""}: ${Mr.join("; ")}`}):Vn("recipients"),Xs(qs.filter(vr=>hf(vr)).join(";"))},placeholder:"Type in the recipients email addresses and press Enter",tags:Fs?Fs.split(vf):[],className:wa.tagsInput,addOnBlur:!0}),rules:{validate:ns=>Ef(ns)||"Invalid email"}})),a.createElement(H.g,{invalid:!!pa.replyTo,error:pa.replyTo?.message,className:wa.field,label:"Reply-to email address",description:"The address that will appear in the Reply to field of the email"},a.createElement(Q.I,{...Jn("replyTo",{validate:ns=>Ef(ns)||"Invalid email"}),id:"replyTo",placeholder:"your.address@company.com - optional",type:"email",defaultValue:Qt})),a.createElement(H.g,{className:wa.field,label:"Message"},a.createElement(Er.K,{...Jn("message"),id:"message",placeholder:ot,rows:10,defaultValue:ot})),a.createElement(H.g,{className:wa.field},a.createElement(ei.X,{...Jn("enableDashboardUrl"),defaultChecked:vn,label:"Include a dashboard link"}))))},Ag=W=>({field:N.css`
      &:not(:last-of-type) {
        margin-bottom: ${W.spacing(3)};
      }
    `,tagsInput:N.css`
      li {
        margin-bottom: ${W.spacing(1)};
        background-color: ${W.colors.background.secondary} !important;
        border-color: ${W.components.input.borderColor} !important;
        color: ${W.colors.text.primary};
      }
    `}),Lg=Ig(Rg);var Bg=e(72535);const Ng=(W=window.location.origin)=>{let te=W+n.v.appSubUrl;return te.endsWith("/")&&te.slice(0,-1),te},qf="Please contact your Grafana administrator to install the plugin.",eg=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate PDF reports, you must install the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),_d=({variant:W="info"})=>a.createElement(ne.b,{title:"Image renderer plugin not installed",severity:W},a.createElement(eg,null)," ",a.createElement("br",null),qf),tg=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate CSV files, you must update the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),ng=()=>a.createElement(ne.b,{title:"You are using an old version of the image renderer plugin",severity:"warning"},a.createElement(tg,null)," ",a.createElement("br",null),qf),yf=({message:W})=>a.createElement(gl.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,W)),ag=({dashboard:W,onDismiss:te})=>{(0,a.useEffect)(()=>{(0,o.ff)("grafana_dashboards_pdf_share_viewed")},[]);const[ge,Oe]=(0,a.useState)("landscape"),[Ke,ot]=(0,a.useState)("grid"),[Rt,en]=(0,a.useState)(No),Qt=()=>{let mn=`${Ng()}/api/reports/render/pdfs`;const xn={orientation:ge,layout:Ke,scaleFactor:Rt},Jn=(0,Si.gt)(W.uid),Zn={dashboard:{uid:W.uid}};Jn.length&&(Zn.reportVariables=dl(Jn));const Vn=wn();return Vn&&(Zn.timeRange=Vn),xn.dashboards=JSON.stringify([Zn]),mn=ri.Cj.appendQueryToUrl(mn,ri.Cj.toUrlParams(xn)),mn},vn=mn=>{Oe(mn)},bn=mn=>{ot(mn)};return n.v.rendererAvailable?(0,t.v)("reports.pdf")?W.isSnapshot()?a.createElement("p",{className:"share-modal-info-text"},"Sharing a PDF from a snapshot is not supported."):a.createElement(Bg.Q,{icon:"file-alt"},a.createElement("p",{className:"share-modal-info-text"},"Save the dashboard as a PDF document."),a.createElement(H.g,{label:"Orientation"},a.createElement(ks.S,{options:A,value:ge,onChange:vn})),a.createElement(H.g,{label:"Layout"},a.createElement(ks.S,{options:T,value:Ke,onChange:bn})),a.createElement(H.g,{label:"Zoom",description:"Increase the number of rows and columns in table panels.",className:N.css`
          max-width: 350px;
          // Hide Slider input
          input {
            display: none;
          }
        `},a.createElement(of.i,{value:Rt,min:1,max:3,step:1,marks:ql,onChange:en,included:!1})),a.createElement(Te.u.ButtonRow,null,a.createElement(Le.zx,{variant:"secondary",onClick:te},"Cancel"),a.createElement(Le.Qj,{variant:"primary",href:Qt(),target:"_blank",rel:"noreferrer noopener"},"Save as PDF"))):a.createElement(yf,{message:`Rendering a dashboard as a PDF document is not available with your current license.
            To enable this feature, update your license.`}):a.createElement(_d,null)},Pf=Oo.vc.featureToggles.featureHighlights,sg={label:"PDF",value:"pdf",component:ag},Cf={label:"Report",value:"report",tabSuffix:Pf&&!(0,t.v)("reports.creation")||(0,hn.d5)()?()=>(0,Jl.Z)({experimentId:Ei("reporting-tab-badge")}):void 0,component:Sd};function Df(){Oo.vc.reporting?.enabled&&((0,t.v)("reports.creation")?((0,cl.addDashboardShareTab)(sg),br.Vt.hasAccess(F.ReportingCreate,br.Vt.hasRole("Admin"))&&(0,cl.addDashboardShareTab)(Cf)):Pf&&(0,cl.addDashboardShareTab)(Cf))}const Kr=[{id:S.SelectDashboard,name:"Select dashboard",component:Pg},{id:S.FormatReport,name:"Format report",component:Am},{id:S.Schedule,name:"Schedule",component:gf},{id:S.Share,name:"Share",component:Lg},{id:S.Confirm,name:"Confirm",component:$f}];var Ug=e(3574),wg=e(76015),Wg=e(30237),Fg=e(87464);const $g=W=>({dashboard:W.dashboard.getModel()}),Kg={initDashboard:Fg.mV},Vg=(0,G.connect)($g,Kg);class rg extends a.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:te,route:ge}=this.props;this.props.initDashboard({urlSlug:te.params.slug,urlUid:te.params.uid,urlType:te.params.type,routeName:ge.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(te){const{dashboard:ge}=this.props;if(ge&&(!te.dashboard||te.dashboard.uid!==ge.uid)){const Oe=ge.getPanelByUrlId(this.props.queryParams.panelId);if(!Oe){this.setState({notFound:!0});return}this.setState({panel:Oe}),Oe.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:Ke=>this.onDataUpdate(Ke)})}}onDataUpdate(te){const{panel:ge}=this.state;if(!te||te.state!==Ho.Gu.Done)return;const{dashboard:Oe}=this.props,Ke=te.series,ot=this.props.queryParams.timezone||Oe?.timezone;let Rt={defaults:{},overrides:[]};const en=(0,jc.SM)({data:Ke,theme:n.v.theme2,fieldConfig:ge?.fieldConfig||Rt,replaceVariables:mn=>mn,timeZone:ot}),Qt=(0,wg.MJ)([en[0]],{}),vn=new Blob([String.fromCharCode(65279),Qt],{type:"text/csv;charset=utf-8"}),bn=`${ge?.getDisplayTitle()}-data-${(0,Mo.dq)(new Date)}.csv`;(0,Ug.saveAs)(vn,bn)}render(){return a.createElement(Wg.SoloPanel,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}rg.contextType=Ya.h;const sc=Vg(rg),Ls=({report:W,editMode:te})=>{const{name:ge,dashboardName:Oe=""}=W;return{text:!Boolean(W.id)&&!te?"New report":ge||Oe,breadcrumbs:[{title:"Reports",url:"reports"}]}},og=({children:W,editMode:te,isLoading:ge,className:Oe,report:Ke,...ot})=>{(0,a.useEffect)(()=>{document.title=`Reporting: ${te?"Edit report":"New report"}`},[te]);const Rt=Ls({report:Ke,editMode:te});return a.createElement($n.T,{navId:"reports-list",pageNav:Rt},a.createElement($n.T.Contents,null,a.createElement("div",{...ot},ge?a.createElement(Zl.Z,null):n.v.rendererAvailable?W:a.createElement(_d,{variant:"error"}))))},Lm=(W,te)=>{const{report:ge,isLoading:Oe}=W.reports,{id:Ke,step:ot}=te.match.params;return{activeStep:ot,existingReport:!!ge.id,isLoading:Boolean(Ke&&Oe),report:ge,reportId:Ke}},ig={loadReport:Hd},J=(0,G.connect)(Lm,ig)(({existingReport:W,isLoading:te,loadReport:ge,report:Oe,reportId:Ke,activeStep:ot=S.SelectDashboard})=>{(0,a.useEffect)(()=>{Ke&&ge(parseInt(Ke,10))},[Ke,ge]);const Rt=(0,a.useCallback)(()=>{const en=Kr.find(({id:Qt})=>Qt===ot)?.component;return en?a.createElement(en,{reportId:Ke}):null},[ot,Ke]);return a.createElement(og,{isLoading:te,editMode:W,report:Oe},te?a.createElement(Ra.a,null):Rt())});var ae=e(71657);const he=(W,te)=>{const ge=["name","recipients"],Oe=Ke=>Ke.dashboards.some(({dashboard:ot})=>ot?.name.toLowerCase().includes(te.toLowerCase()));return W.filter(Ke=>ge.some(ot=>Ke[ot]?.toLowerCase().includes(te.toLowerCase()))||Oe(Ke))},Pe=W=>new Map([[x.Scheduled,W.colors.success.text],[x.Expired,W.colors.warning.text],[x.Draft,W.colors.text.primary],[x.Never,W.colors.text.primary],[x.Paused,W.colors.text.disabled]]),xe=({deleteReport:W,updateReport:te,reports:ge,filter:Oe})=>{const Ke=(0,I.l4)(),ot=(0,I.wW)(we),Rt=vn=>{const{state:bn}=vn;let mn;[x.Draft,x.Expired].includes(bn)?mn=bn:bn!==x.Paused?mn=x.Paused:mn=x.Scheduled,te({...vn,state:mn},!0)},en=s.Vt.hasPermission(F.ReportingWrite),Qt=s.Vt.hasPermission(F.ReportingDelete);return a.createElement("div",null,he(ge,Oe).map(vn=>{const bn=vn.recipients.split(";"),mn=bn.length,xn=ke(vn.schedule),{isNever:Jn,showPlay:Zn,disableEdit:Vn,reportState:ea}=nf(vn),ta=Pe(Ke).get(vn.state);return a.createElement(wc._,{key:vn.id,href:`reports/confirm/${vn.id}`,className:ot.container},a.createElement("div",{className:ot.info},a.createElement("span",{className:ot.title},vn.name),a.createElement("span",{className:ot.dashboards},[...new Set(vn.dashboards.map(({dashboard:pa})=>pa?.name))].join(", "))),a.createElement("div",{className:ot.recipients},a.createElement(Xe.u,{content:bn.join(", "),placement:"top"},a.createElement("div",null,`${mn} recipient${mn>1?"s":""}`))),a.createElement("div",{className:ot.schedule},a.createElement("span",{className:(0,N.cx)(ot.scheduleStatus,N.css`
                    color: ${ta};
                  `)},ea.toUpperCase()),!Jn&&a.createElement("span",{className:ot.text},xn)),a.createElement("div",{className:ot.buttonWrapper},a.createElement(Xe.u,{content:`${Zn?"Resume":"Pause"} report`,placement:"top"},a.createElement(Le.zx,{type:"button",variant:"secondary",fill:"text",icon:Zn?"play":"pause",size:"md",onClick:pa=>{pa.preventDefault(),Rt(vn)},disabled:Vn||!en})),a.createElement(ae.p,{confirmText:"Delete",confirmVariant:"destructive",size:"md",disabled:!Qt,onConfirm:()=>W(vn)},a.createElement(Le.zx,{type:"button",className:ot.deleteButton,"aria-label":`Delete report ${vn.name}`,variant:"secondary",icon:"trash-alt",size:"md",fill:"text"}))))}))},we=W=>({container:N.css`
    & > a {
        align-items: center;
      },
    `,info:N.css`
      display: flex;
      flex-direction: column;
      width: 30%;
    `,title:N.css`
      font-size: ${W.typography.h5.fontSize};
      font-weight: ${W.typography.fontWeightBold};
    `,dashboards:N.css`
      font-size: ${W.typography.bodySmall.fontSize};
      color: ${W.colors.text.secondary};
    `,recipients:N.css`
      display: flex;
      width: 25%;
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      },
    `,schedule:N.css`
      display: flex;
      flex-direction: column;
      width: 40%;
    `,scheduleStatus:N.css`
      text-transform: uppercase;
    `,buttonWrapper:N.css`
      display: flex;
      align-items: center;
      width: 5%;
      & > button {
        &[disabled] {
          pointer-events: all;
        },
      },
    `,deleteButton:N.css`
      &:hover {
        color: ${W.colors.error.text};
    `,text:N.css`
      color: ${W.colors.text.secondary};
    `}),je=()=>{const W=(0,I.wW)(pt);return a.createElement($n.T,{navId:"reports",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement("div",{className:W.box},a.createElement(yn.Xz,{featureName:"reporting",featureId:"reporting"})),a.createElement($n.T.Contents,{className:W.contents},a.createElement(_e,null)),a.createElement("div",{className:W.spacer}))},_e=({action:W})=>a.createElement(yn.TA,{featureName:"reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.",listItems:["Customize your exact layout and orientation","Personalize with your unique branding","Specify permissions for users across your company","Choose to send a report at custom intervals"],featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting/",image:"reporting-email.png",caption:"Create reports to share your SLO performance, business metrics, cost and utilization metrics or anything else you can express in a Grafana dashboard.",action:W}),pt=W=>({contents:N.css`
      &.page-body {
        flex: 0;
      }
    `,spacer:N.css`
      flex: 1;
    `,box:N.css`
      ${W.breakpoints.up("sm")} {
        padding: ${W.spacing(0,1)};
      }

      ${W.breakpoints.up("md")} {
        padding: ${W.spacing(0,2)};
      }
    `}),dt=je;function It(W){return{navModel:(0,Yt.ht)(W.navIndex,"reports-list"),reports:W.reports.reports,hasFetched:W.reports.hasFetchedList,searchQuery:W.reports.searchQuery,reportCount:W.reports.reportCount}}const Ft={getReports:nc,deleteReport:ii,updateReport:_},cn=(0,G.connect)(It,Ft)(({getReports:W,deleteReport:te,updateReport:ge,reports:Oe,reportCount:Ke,hasFetched:ot,navModel:Rt})=>{const[en,Qt]=(0,a.useState)("");(0,a.useEffect)(()=>{W()},[W]);const vn=mn=>{te(mn.id)},bn=()=>{const{rendererAvailable:mn}=n.v,xn=Yd(),Jn=s.Vt.hasPermission(F.ReportingCreate),Zn=mn&&Jn;return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,!mn&&a.createElement(_d,{variant:"error"}),mn&&xn!==null&&xn<3&&a.createElement(ng,null),(0,hn.d5)()&&a.createElement(yn.Xz,{featureId:"reporting",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),Ke>0?a.createElement(a.Fragment,null,a.createElement("div",{className:"page-action-bar"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement(Q.I,{placeholder:"Search reports by report name, dashboard name or recipients",prefix:a.createElement(i.J,{name:"search"}),width:56,onChange:Vn=>Qt(Vn.target.value)}),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(Le.Qj,{variant:"primary",href:"reports/new",disabled:!Zn,icon:"plus"},"Create a new report"))),a.createElement(xe,{reports:Oe,deleteReport:vn,updateReport:ge,filter:en})):mn&&((0,hn.d5)()?a.createElement(_e,{action:{text:"Create report",link:"reports/new"}}):a.createElement(fa.Z,{title:"You haven't created any reports yet.",buttonIcon:"envelope",buttonLink:"reports/new",buttonTitle:"Create a new report",buttonDisabled:!Zn,proTip:"",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}))):a.createElement(a.Fragment,null,a.createElement(yf,{message:`Creating new reports is not available with an expired license.
              Existing reports continue to be processed but you need to update your license to create a new one.`}),Ke>0&&a.createElement(xe,{reports:Oe,deleteReport:vn,updateReport:ge,filter:en}))};return a.createElement($n.T,{navId:"reports-list",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement($n.T.Contents,{isLoading:!ot},bn()))});var qt=e(59679),Ut=e(30784),gn=e(27119),nn=e(83957);const Sn=W=>W?Kn(W)?"file":W.startsWith("http")||W.startsWith("data:")?"url":W.startsWith("#")||W.startsWith("rgb(")||W.startsWith("rgba(")?"color":"file":"url",Kn=W=>W instanceof File,Bn=W=>Kn(W)?URL.createObjectURL(W):Sn(W)==="file"?`${Td}${W}`:W,Yn=W=>!W||W instanceof File?!0:typeof W=="string"&&W.startsWith("http"),ca=[{label:"Paste URL",value:"url"},{label:"Upload file",value:"file"},{label:"Custom color",value:"color"}];function na({name:W,disabled:te,allowedTypes:ge=["url","file"]}){const{control:Oe,register:Ke,getValues:ot,setValue:Rt,watch:en,formState:{errors:Qt}}=(0,z.Gc)(),[vn]=(0,a.useState)(ot()[W]),bn=en(W,vn),[mn,xn]=(0,a.useState)(Sn(ot()[W])),Jn=(0,I.wW)(Da);return a.createElement("div",{"data-testid":`resource-picker-${W}`},a.createElement(ks.S,{options:ca.filter(Zn=>ge.includes(Zn.value)),onChange:Zn=>{xn(Zn),Sn(vn)===Zn?Rt(W,vn):Rt(W,"")},disabled:te,className:Jn.buttonGroup,value:mn}),mn==="file"&&a.createElement(z.Qr,{control:Oe,name:W,render:({field:{onChange:Zn,ref:Vn,...ea}})=>a.createElement("div",{className:(0,N.cx)(Jn.dropzone,te&&Jn.disabled)},a.createElement(Ut.Yo,{...ea,readAs:"readAsBinaryString",onFileRemove:te?void 0:()=>Rt(W,""),options:{disabled:te,multiple:!1,accept:{"image/*":[".jpeg",".jpg",".png"]},onDrop:ta=>{Zn(ta[0])}}}),!Kn(bn)&&bn!==""&&a.createElement(gn.K,{removeFile:te?void 0:()=>Rt(W,""),file:{file:new File([bn],bn),error:null,id:""}}))}),mn==="url"&&a.createElement(H.g,{invalid:!!Qt[W],error:Qt[W]?.message,label:"",className:Jn.customField},a.createElement(Q.I,{...Ke(W,{validate:Zn=>Yn(Zn)||"Invalid URL"}),id:W,placeholder:"https://your.site/image.png",disabled:te})),mn==="color"&&a.createElement(z.Qr,{control:Oe,name:W,render:({field:Zn})=>a.createElement("div",{className:Jn.pickerContainer},a.createElement(nn.T,{...Zn,id:W,placeholder:"Select color",disabled:te}))}))}const Da=W=>({pickerContainer:N.css`
      display: flex;
      position: relative;
    `,dropzone:N.css`
      & > div {
        & > small:first-of-type {
          display: none;
        }
      }
      // FileListItem
      & > div:nth-of-type(2) {
        & > span {
          & > span:nth-of-type(2) {
            display: none;
          }
        }
      }
    `,colorValue:N.css`
      margin-left: ${W.spacing(1)};
    `,buttonGroup:N.css`
      margin-bottom: ${W.spacing(2)};
    `,disabled:N.css`
      div {
        cursor: not-allowed;
      }
    `,customField:N.css`
      margin-top: -${W.spacing(2)};
    `}),Pa=W=>W.startsWith("http")?xg(W):!0,xa=({url:W,altText:te,width:ge="200px"})=>{const Oe=(0,I.yK)(Ss);return W?a.createElement("div",{className:(0,N.cx)(Oe.wrapper,N.css`
          width: ${ge};
        `)},Pa(W)?a.createElement("img",{src:W,className:Oe.img,alt:te}):"Invalid image"):null},Ss=W=>({wrapper:N.css`
      padding: ${W.spacing.sm};
      border: 1px solid ${W.colors.border3};
      border-radius: ${W.border.radius.sm};
      margin-bottom: ${W.spacing.md};
    `,img:N.css`
      width: 100%;
    `}),Qa=[{label:"Sent By",value:M.SentBy},{label:"None",value:M.None}],Ja=()=>{const{register:W,control:te,watch:ge,formState:{errors:Oe}}=(0,z.Gc)(),Ke=ge("reportLogoUrl")||Xl,ot=ge("emailLogoUrl")||Mi,Rt=ge("emailFooterMode"),en=s.Vt.hasPermission(F.ReportingSettingsWrite);return a.createElement(a.Fragment,null,a.createElement(ce.C,{label:"Report branding",disabled:!en},a.createElement(H.g,{htmlFor:"reportLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the document footer. Supported formats: png, jpg, gif.",invalid:!!Oe.branding?.reportLogoUrl,error:Oe.branding?.reportLogoUrl?.message},a.createElement(na,{name:"reportLogoUrl"})),a.createElement(xa,{url:Ke===Xl?Xl:Bn(Ke),width:"60px",altText:"Company logo preview"})),a.createElement(ce.C,{label:"Email branding",disabled:!en},a.createElement(H.g,{htmlFor:"emailLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the email header. Supported formats: png, jpg, gif.",invalid:!!Oe.branding?.emailLogoUrl,error:Oe.branding?.emailLogoUrl?.message},a.createElement(na,{name:"emailLogoUrl"})),a.createElement(xa,{url:ot===Mi?Mi:Bn(ot),altText:"Company logo preview"}),a.createElement(H.g,{label:"Email footer"},a.createElement(V.g,{name:"emailFooterMode",render:({field:{ref:Qt,...vn}})=>a.createElement(ks.S,{...vn,options:Qa}),control:te})),Rt===M.SentBy&&a.createElement(a.Fragment,null,a.createElement(H.g,{label:"Footer link text"},a.createElement(Q.I,{...W("emailFooterText"),id:"emailFooterText",placeholder:"Grafana",type:"text"})),a.createElement(H.g,{label:"Footer link URL"},a.createElement(Q.I,{...W("emailFooterLink"),id:"emailFooterLink",placeholder:"https://your.site",type:"url"})))))},os=()=>{const{value:W,loading:te,error:ge}=(0,qt.Z)(async()=>{const Qt=await(0,h.i)().get("/api/reports/settings");return Ke(Qt.branding),Qt}),{handleSubmit:Oe,reset:Ke,...ot}=(0,z.cI)({mode:"onBlur",defaultValues:W?.branding}),Rt=Qt=>{const vn=new FormData;for(const[bn,mn]of Object.entries(Qt))mn instanceof File&&(Qt={...Qt,[bn]:mn.name},vn.append("files",mn));return vn.append("config",JSON.stringify({branding:Qt})),fetch("/api/reports/settings",{method:"POST",body:vn}).then(bn=>{bn.ok?(s.h$.emit(Xo.SI.alertSuccess,["Successfully saved configuration"]),Re.E1.push("/reports")):s.h$.emit(Xo.SI.alertError,["Error saving configuration",bn.statusText])})};if(ge)return a.createElement($n.T,{navId:"reports-settings",subTitle:"Manage report template settings."},a.createElement(ne.b,{title:"Error loading settings",severity:"error"}));const en=s.Vt.hasPermission(F.ReportingSettingsWrite);return a.createElement($n.T,{navId:"reports-settings",subTitle:"Manage report template settings."},a.createElement($n.T.Contents,{isLoading:te},n.v.rendererAvailable?a.createElement(z.RV,{...ot,reset:Ke,handleSubmit:Oe},a.createElement("form",{onSubmit:Oe(Rt),style:{maxWidth:"500px"}},a.createElement(Ja,null),a.createElement(Le.zx,{type:"submit",size:"md",variant:"primary",disabled:!en},"Save"))):a.createElement(_d,{variant:"error"})))};var Ys=e(85419),Ms=e(36578),Qs=e(25337),_s=e(50432);function Na(){const W=n.v.whitelabeling;if(!W)return;Ms.c.LoginTitle="Welcome to Grafana Enterprise",W.links.length>0&&(0,Qs.Dv)(()=>W.links.map(ge=>({...ge,target:"_blank"})));const te=W.publicDashboardFooter;if((te?.hide||te?.text||te?.link||te?.logo)&&(0,_s.Jc)(()=>W.publicDashboardFooter),W.appTitle&&(Ms.c.AppTitle=W.appTitle),W.loginLogo&&(Ms.c.LoginLogo=ge=>a.createElement("img",{className:(0,N.cx)(ge.className,N.css`
            max-width: 150px;
            max-height: 250px;
            width: auto;
            @media ${Ys.mediaUp(n.v.theme.breakpoints.sm)} {
              max-width: 250px;
            }
          `),src:W.loginLogo,alt:"Login logo"}),Ms.c.LoginLogo.displayName="BrandingLoginLogo",Ms.c.LoginTitle="",Ms.c.GetLoginSubTitle=()=>""),W.loginTitle&&(Ms.c.LoginTitle=W.loginTitle),W.loginSubtitle&&(Ms.c.GetLoginSubTitle=()=>W.loginSubtitle),W.menuLogo&&(Ms.c.MenuLogo=ge=>a.createElement("img",{className:ge.className,src:W.menuLogo,alt:"Menu logo"}),Ms.c.MenuLogo.displayName="BrandingMenuLogo"),W.loginBackground){const ge=N.css`
      background: ${W.loginBackground};
      background-size: cover;
    `;Ms.c.LoginBackground=Oe=>a.createElement("div",{className:(0,N.cx)(ge,Oe.className)},Oe.children),Ms.c.LoginBackground.displayName="BrandingLoginBackground"}if(W.loginBoxBackground){const ge=N.css`
      background: ${W.loginBoxBackground};
      background-size: cover;
    `;Ms.c.LoginBoxBackground=()=>ge}}const ua="ServerAdmin";function Ua(){(0,t.v)("dspermissions.enforcement")&&(0,d.U)(zr),(0,t.v)("caching")&&(0,d.U)(Ni),(0,t.v)("reports")&&(0,d.U)(ml),(0,t.v)("analytics")&&(0,d.U)(Iu),(0,t.v)("recordedqueries")&&(0,d.U)(om),(0,t.v)("saml")&&(0,d.U)(la)}function Xa(){const W=n.v.featureToggles.featureHighlights;Lc(),Df(),td(),(0,t.v)("saml")&&An(),((0,t.v)("whitelabeling")||(0,t.v)("grafanacloud"))&&Na(),(0,t.v)("recordedqueries")&&Ed(),(0,t.v)("admin")&&E(),(0,t.v)("publicDashboardsEmailSharing")&&f.gV.push({path:"/public-dashboards/:accessToken/request-access",component:Vl,chromeless:!0}),(0,t.v)("saml")&&n.v.featureToggles.authenticationConfigUI&&f.gV.push({path:"/admin/authentication/saml/:step?",component:ba});const te="/datasources/edit/:uid/cache",ge=`${l.Z.DataSourcesEdit}/cache`;(0,t.v)("caching")?(f.gV.push({path:te,component:Ko}),f.gV.push({path:ge,component:Vo})):W&&(f.gV.push({path:`${te}/upgrade`,component:ic}),f.gV.push({path:`${ge}/upgrade`,component:lc}));const Oe="/datasources/edit/:uid/insights",Ke=`${l.Z.DataSourcesEdit}/insights`;(0,t.v)("analytics")?s.Vt.hasPermission(r.AccessControlAction.DataSourcesInsightsRead)&&(f.gV.push({path:Oe,component:Wl}),f.gV.push({path:Ke,component:su})):W&&(f.gV.push({path:`${Oe}/upgrade`,component:Fl}),f.gV.push({path:`${Ke}/upgrade`,component:fc}));const ot="/datasources/edit/:uid/permissions",Rt=`${l.Z.DataSourcesEdit}/permissions`;(0,t.v)("dspermissions.enforcement")?s.Vt.hasPermission(r.AccessControlAction.DataSourcesPermissionsRead)&&(n.v.rbacEnabled?(f.gV.push({path:ot,component:ad}),f.gV.push({path:Rt,component:co})):(f.gV.push({path:ot,component:Vu}),f.gV.push({path:Rt,component:Ki}))):W&&(f.gV.push({path:ot+"/upgrade",component:zu}),f.gV.push({path:`${Rt}/upgrade`,component:cu})),n.v.reporting?.enabled&&((0,t.v)("reports")?f.gV.push({path:Xr,component:cn},{path:`${Xr}/settings`,component:os},{path:"/d-csv/:uid",pageClass:"dashboard-solo",routeName:r.DashboardRoutes.Normal,component:sc}):W&&f.gV.push({path:Xr,component:dt}),(0,t.v)("reports.creation")&&(f.gV.push({path:`${Xr}/new`,component:J}),f.gV.push({path:`${Xr}/:step?/:id?`,component:J})));const en=(0,t.v)("recordedqueries")&&n.v?.recordedQueries?.enabled;s.Vt.isEditor&&en&&f.gV.push({path:"/recorded-queries",component:Em},{path:"/recorded-queries/write-target",component:xd})}function Bs(){kt(),f.gV.push({path:"/admin/licensing",roles:()=>s.Vt.evaluatePermission(()=>[ua],[F.LicensingRead,r.AccessControlAction.ActionServerStatsRead]),component:zm}),s.Vt.isSignedIn&&n.v.licenseInfo.stateInfo!=="Licensed"&&(0,o.SZ)(Ei(),n.v.featureToggles.featureHighlights?Ji.Test:Ji.Control,"")}function ps(){Bs(),Xa()}},5238:()=>{"use strict"},96116:()=>{"use strict"},71331:()=>{"use strict"},48649:()=>{"use strict"},65135:(Y,O,e)=>{"use strict";e.d(O,{A:()=>l});var t=e(66111),n=e(49969),o=e(8581);const s=Object.keys(n.B).map(f=>({label:f,value:f}));function l({value:f,onChange:d,"aria-label":r,inputId:c,autoFocus:a,...u}){return t.createElement(o.Ph,{inputId:c,value:f,options:s,onChange:i=>d(i.value),placeholder:"Choose role...","aria-label":r,autoFocus:a,...u})}},93976:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{ServerStats:()=>u});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(35633),f=e(27876),d=e(82002),r=e(43714),c=e(54899);const a=async()=>(0,c.i)().get("api/admin/stats").catch(y=>(console.error(y),null)),u=()=>{const[y,E]=(0,n.useState)(null),[h,v]=(0,n.useState)(!1),C=(0,o.wW)(i),m=d.Vt.hasAccess(f.AccessControlAction.DataSourcesRead,d.Vt.isGrafanaAdmin),D=d.Vt.hasAccess(f.AccessControlAction.UsersRead,d.Vt.isGrafanaAdmin);return(0,n.useEffect)(()=>{d.Vt.hasAccess(f.AccessControlAction.ActionServerStatsRead,d.Vt.isGrafanaAdmin)&&(v(!0),a().then(P=>{E(P),v(!1)}))},[]),d.Vt.hasAccess(f.AccessControlAction.ActionServerStatsRead,d.Vt.isGrafanaAdmin)?n.createElement(n.Fragment,null,n.createElement("h2",{className:C.title},"Instance statistics"),h?n.createElement("div",{className:C.loader},n.createElement(r.a,{text:"Loading instance stats..."})):y?n.createElement("div",{className:C.row},n.createElement(p,{content:[{name:"Dashboards (starred)",value:`${y.dashboards} (${y.stars})`},{name:"Tags",value:y.tags},{name:"Playlists",value:y.playlists},{name:"Snapshots",value:y.snapshots}],footer:n.createElement(s.Qj,{href:"/dashboards",variant:"secondary"},"Manage dashboards")}),n.createElement("div",{className:C.doubleRow},n.createElement(p,{content:[{name:"Data sources",value:y.datasources}],footer:m&&n.createElement(s.Qj,{href:"/datasources",variant:"secondary"},"Manage data sources")}),n.createElement(p,{content:[{name:"Alerts",value:y.alerts}],footer:n.createElement(s.Qj,{href:"/alerting/list",variant:"secondary"},"Alerts")})),n.createElement(p,{content:[{name:"Organisations",value:y.orgs},{name:"Users total",value:y.users},{name:"Active users in last 30 days",value:y.activeUsers},{name:"Active sessions",value:y.activeSessions}],footer:D&&n.createElement(s.Qj,{href:"/admin/users",variant:"secondary"},"Manage users")})):n.createElement("p",{className:C.notFound},"No stats found.")):null},i=y=>({title:t.css`
      margin-bottom: ${y.spacing(4)};
    `,row:t.css`
      display: flex;
      justify-content: space-between;
      width: 100%;

      & > div:not(:last-of-type) {
        margin-right: ${y.spacing(2)};
      }

      & > div {
        width: 33.3%;
      }
    `,doubleRow:t.css`
      display: flex;
      flex-direction: column;

      & > div:first-of-type {
        margin-bottom: ${y.spacing(2)};
      }
    `,loader:t.css`
      height: 290px;
    `,notFound:t.css`
      font-size: ${y.typography.h6.fontSize};
      text-align: center;
      height: 290px;
    `}),p=({content:y,footer:E})=>{const h=(0,o.wW)(g);return n.createElement(l._,{className:h.container,disableHover:!0},n.createElement("div",{className:h.inner},n.createElement("div",{className:h.content},y.map(v=>n.createElement("div",{key:v.name,className:h.row},n.createElement("span",null,v.name),n.createElement("span",null,v.value)))),E&&n.createElement("div",null,E)))},g=y=>({container:t.css`
      padding: ${y.spacing(2)};
    `,inner:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,content:t.css`
      flex: 1 0 auto;
    `,row:t.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${y.spacing(2)};
      align-items: center;
    `})},62446:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{UpgradeInfo:()=>y,UpgradePage:()=>p,default:()=>x});var t=e(9892),n=e(66111),o=e(67948),s=e(72648),l=e(31403),f=e(8412),d=e(86245);const r={fontWeight:500,fontSize:"26px",lineHeight:"123%"},c=A=>{const T=A.isDark?"public/img/licensing/header_dark.svg":"public/img/licensing/header_light.svg",S=A.isDark?A.v1.palette.dark9:A.v1.palette.gray6;return{container:t.css`
      padding: 36px 79px;
      background: ${A.components.panel.background};
    `,footer:t.css`
      text-align: center;
      padding: 16px;
      background: ${S};
    `,header:t.css`
      height: 137px;
      padding: 40px 0 0 79px;
      position: relative;
      background: url('${T}') right;
    `}};function a({header:A,editionNotice:T,subheader:S,children:U}){const R=(0,s.wW)(c);return n.createElement(n.Fragment,null,n.createElement("div",{className:R.header},n.createElement("h2",{style:r},A),S&&n.createElement("h3",null,S),n.createElement(u,{size:"128px",style:{boxShadow:"0px 0px 24px rgba(24, 58, 110, 0.45)",background:"#0A1C36",position:"absolute",top:"19px",left:"71%"}},n.createElement("img",{src:"public/img/grafana_icon.svg",alt:"Grafana",width:"80px",style:{position:"absolute",left:"23px",top:"20px"}}))),n.createElement("div",{className:R.container},U),T&&n.createElement("div",{className:R.footer},T))}const u=({size:A,style:T,children:S})=>n.createElement("div",{style:{width:A,height:A,position:"absolute",bottom:0,right:0,borderRadius:"50%",...T}},S);var i=e(93976);function p({navModel:A}){return n.createElement(f.T,{navModel:A},n.createElement(f.T.Contents,null,n.createElement(i.ServerStats,null),n.createElement(y,{editionNotice:`You are running the open-source version of Grafana.
        You have to install the Enterprise edition in order enable Enterprise features.`})))}const g={fontWeight:500,fontSize:"26px",lineHeight:"123%"},y=({editionNotice:A})=>{const T=(0,s.wW)(E);return n.createElement(n.Fragment,null,n.createElement("h2",{className:T.title},"Enterprise license"),n.createElement(a,{header:"Grafana Enterprise",subheader:"Get your free trial",editionNotice:A},n.createElement("div",{className:T.column},n.createElement(m,null),n.createElement(C,null))))},E=A=>({column:t.css`
      display: grid;
      grid-template-columns: 100%;
      column-gap: 20px;
      row-gap: 40px;

      @media (min-width: 1050px) {
        grid-template-columns: 50% 50%;
      }
    `,title:t.css`
      margin: ${A.spacing(4)} 0;
    `}),h=()=>n.createElement("div",{style:{marginTop:"40px",marginBottom:"30px"}},n.createElement("h2",{style:g},"Get Grafana Enterprise"),n.createElement(v,null),n.createElement("p",{style:{paddingTop:"12px"}},"You can use the trial version for free for 30 days. We will remind you about it five days before the trial period ends.")),v=()=>n.createElement(l.Qj,{variant:"primary",size:"lg",href:"https://grafana.com/contact?about=grafana-enterprise&utm_source=grafana-upgrade-page"},"Contact us and get a free trial"),C=()=>n.createElement("div",null,n.createElement("h4",null,"At your service"),n.createElement(P,null,n.createElement(b,{title:"Enterprise Plugins",image:"public/img/licensing/plugin_enterprise.svg"}),n.createElement(b,{title:"Critical SLA: 2 hours",image:"public/img/licensing/sla.svg"}),n.createElement(b,{title:"Unlimited Expert Support",image:"public/img/licensing/customer_support.svg"},"24 x 7 x 365 support via",n.createElement(P,{nested:!0},n.createElement(b,{title:"Email"}),n.createElement(b,{title:"Private Slack channel"}),n.createElement(b,{title:"Phone"}))),n.createElement(b,{title:"Hand-in-hand support",image:"public/img/licensing/handinhand_support.svg"},"in the upgrade process")),n.createElement("div",{style:{marginTop:"20px"}},n.createElement("strong",null,"Also included:"),n.createElement("br",null),"Indemnification, working with Grafana Labs on future prioritization, and training from the core Grafana team."),n.createElement(h,null)),m=()=>n.createElement("div",{style:{paddingRight:"11px"}},n.createElement("h4",null,"Enhanced functionality"),n.createElement(D,null)),D=()=>n.createElement(P,null,n.createElement(b,{title:"Data source permissions"}),n.createElement(b,{title:"Reporting"}),n.createElement(b,{title:"SAML authentication"}),n.createElement(b,{title:"Enhanced LDAP integration"}),n.createElement(b,{title:"Team Sync"},"LDAP, GitHub OAuth, Auth Proxy, Okta"),n.createElement(b,{title:"White labeling"}),n.createElement(b,{title:"Auditing"}),n.createElement(b,{title:"Settings updates at runtime"}),n.createElement(b,{title:"Grafana usage insights"},n.createElement(P,{nested:!0},n.createElement(b,{title:"Sort dashboards by popularity in search"}),n.createElement(b,{title:"Find unused dashboards"}),n.createElement(b,{title:"Dashboard usage stats drawer"}),n.createElement(b,{title:"Dashboard presence indicators"}))),n.createElement(b,{title:"Enterprise plugins"},n.createElement(P,{nested:!0},n.createElement(b,{title:"Oracle"}),n.createElement(b,{title:"Splunk"}),n.createElement(b,{title:"Service Now"}),n.createElement(b,{title:"Dynatrace"}),n.createElement(b,{title:"New Relic"}),n.createElement(b,{title:"DataDog"}),n.createElement(b,{title:"AppDynamics"}),n.createElement(b,{title:"SAP HANA\xAE"}),n.createElement(b,{title:"Gitlab"}),n.createElement(b,{title:"Honeycomb"}),n.createElement(b,{title:"Jira"}),n.createElement(b,{title:"MongoDB"}),n.createElement(b,{title:"Salesforce"}),n.createElement(b,{title:"Snowflake"}),n.createElement(b,{title:"Wavefront"})))),P=({children:A,nested:T})=>{const S=t.css`
    display: flex;
    flex-direction: column;
    padding-top: 8px;

    > div {
      margin-bottom: ${T?0:8}px;
    }
  `;return n.createElement("div",{className:S},A)},b=({children:A,title:T,image:S})=>{const U=S||"public/img/licensing/checkmark.svg",R=t.css`
    display: flex;

    > img {
      display: block;
      height: 22px;
      flex-grow: 0;
      padding-right: 12px;
    }
  `,F=t.css`
    font-weight: 500;
    line-height: 1.7;
  `;return n.createElement("div",{className:R},n.createElement("img",{src:U,alt:""}),n.createElement("div",null,n.createElement("div",{className:F},T),A))},M=A=>({navModel:(0,d.ht)(A.navIndex,"upgrading")}),x=(0,o.connect)(M)(p)},68082:(Y,O,e)=>{"use strict";e.d(O,{As:()=>x,SO:()=>C});var t=e(9892),n=e(66111),o=e(67948),s=e(68183),l=e(72648),f=e(14747),d=e(2594),r=e(31403),c=e(61860),a=e(39904),u=e(78889),i=e(8412),p=e(21731),g=e(77582),y=e(2555),E=e(27876),h=e(37592);const v=[],C=B=>{v.push(B)},m=s.wl.pages.UserListPage.UserListAdminPage,D={fetchUsers:h.uh,changeQuery:h.R5,changePage:h.oO,changeFilter:h.M6},P=B=>({users:B.userListAdmin.users,query:B.userListAdmin.query,showPaging:B.userListAdmin.showPaging,totalPages:B.userListAdmin.totalPages,page:B.userListAdmin.page,filters:B.userListAdmin.filters,isLoading:B.userListAdmin.isLoading}),x=(0,o.connect)(P,D)(({fetchUsers:B,query:K,changeQuery:L,users:N,showPaging:z,totalPages:G,page:I,changePage:V,changeFilter:H,filters:Q,isLoading:oe})=>{const se=(0,l.wW)(R);(0,n.useEffect)(()=>{B()},[B]);const ie=(0,n.useMemo)(()=>N.some(j=>j.licensedRole),[N]);return n.createElement(i.T.Contents,null,n.createElement("div",{className:"page-action-bar","data-testid":m.container},n.createElement("div",{className:"gf-form gf-form--grow"},n.createElement(f.H,{placeholder:"Search user by login, email, or name.",autoFocus:!0,value:K,onChange:L}),n.createElement(d.S,{options:[{label:"All users",value:!1},{label:"Active last 30 days",value:!0}],onChange:j=>H({name:"activeLast30Days",value:j}),value:Q.find(j=>j.name==="activeLast30Days")?.value,className:se.filter}),v.map((j,de)=>n.createElement(j,{key:de,filters:Q,onChange:H,className:se.filter}))),g.Vt.hasPermission(E.AccessControlAction.UsersCreate)&&n.createElement(r.Qj,{href:"admin/users/create",variant:"primary"},"New user")),oe?n.createElement(y.Z,null):n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(se.table,"admin-list-table")},n.createElement("table",{className:"filter-table form-inline filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null),n.createElement("th",null,"Login"),n.createElement("th",null,"Email"),n.createElement("th",null,"Name"),n.createElement("th",null,"Belongs to"),ie&&n.createElement("th",null,"Licensed role"," ",n.createElement(c.u,{placement:"top",content:n.createElement(n.Fragment,null,"Licensed role is based on a user's Org role (i.e. Viewer, Editor, Admin) and their dashboard/folder permissions."," ",n.createElement("a",{className:se.link,target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/next/enterprise/license/license-restrictions/#active-users-limit"},"Learn more"))},n.createElement(a.J,{name:"question-circle"}))),n.createElement("th",null,"Last active\xA0",n.createElement(c.u,{placement:"top",content:"Time since user was seen using Grafana"},n.createElement(a.J,{name:"question-circle"}))),n.createElement("th",{style:{width:"1%"}},"Origin"))),n.createElement("tbody",null,N.map(j=>n.createElement(S,{user:j,showLicensedRole:ie,key:j.id}))))),z&&n.createElement(u.t,{numberOfPages:G,currentPage:I,onNavigate:V})))});function A(){return React.createElement(Page,{navId:"global-users"},React.createElement(x,null))}const T=B=>`Edit user's ${B} details`,S=(0,n.memo)(({user:B,showLicensedRole:K})=>{const L=(0,l.wW)(R),N=`admin/users/edit/${B.id}`;return n.createElement("tr",{key:B.id},n.createElement("td",{className:"width-4 text-center link-td"},n.createElement("a",{href:N,"aria-label":`Edit user's ${B.name} details`},n.createElement("img",{className:"filter-table__avatar",src:B.avatarUrl,alt:`Avatar for user ${B.name}`}))),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:N,title:B.login,"aria-label":T(B.name)},B.login)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:N,title:B.email,"aria-label":T(B.name)},B.email)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:N,title:B.name,"aria-label":T(B.name)},B.name)),n.createElement("td",{className:L.row,title:B.orgs?.length?`The user is a member of the following organizations: ${B.orgs.map(z=>z.name).join(",")}`:void 0},n.createElement(U,{units:B.orgs,icon:"building"}),B.isAdmin&&n.createElement("a",{href:N,"aria-label":T(B.name)},n.createElement(c.u,{placement:"top",content:"Grafana Admin"},n.createElement(a.J,{name:"shield"})))),K&&n.createElement("td",{className:(0,t.cx)("link-td",L.iconRow)},n.createElement("a",{className:"ellipsis",href:N,title:B.name,"aria-label":T(B.name)},B.licensedRole==="None"?n.createElement("span",{className:L.disabled},"Not assigned"," ",n.createElement(c.u,{placement:"top",content:"A licensed role will be assigned when this user signs in"},n.createElement(a.J,{name:"question-circle"}))):B.licensedRole)),n.createElement("td",{className:"link-td"},B.lastSeenAtAge&&n.createElement("a",{href:N,"aria-label":`Last seen at ${B.lastSeenAtAge}. Follow to edit user's ${B.name} details.`},B.lastSeenAtAge==="10 years"?n.createElement("span",{className:L.disabled},"Never"):B.lastSeenAtAge)),n.createElement("td",{className:"text-right"},Array.isArray(B.authLabels)&&B.authLabels.length>0&&n.createElement(p.e,{label:B.authLabels[0],removeIcon:!1,count:0})),n.createElement("td",{className:"text-right"},B.isDisabled&&n.createElement("span",{className:"label label-tag label-tag--gray"},"Disabled")))});S.displayName="UserListItem";const U=({units:B,icon:K})=>{const L=(0,l.wW)(R);return B?.length?B.length>1?n.createElement(c.u,{placement:"top",content:n.createElement("div",{className:L.unitTooltip},B?.map(N=>n.createElement("a",{href:N.url,className:L.link,title:N.name,key:N.name,"aria-label":`Edit ${N.name}`},N.name)))},n.createElement("div",{className:L.unitItem},n.createElement(a.J,{name:K})," ",n.createElement("span",null,B.length))):n.createElement("a",{href:B[0].url,className:L.unitItem,title:B[0].name,key:B[0].name,"aria-label":`Edit ${B[0].name}`},n.createElement(a.J,{name:K})," ",B[0].name):null},R=B=>({table:t.css`
      margin-top: ${B.spacing(3)};
    `,filter:t.css`
      margin: 0 ${B.spacing(1)};
    `,iconRow:t.css`
      svg {
        margin-left: ${B.spacing(.5)};
      }
    `,row:t.css`
      display: flex;
      align-items: center;
      height: 100% !important;

      a {
        padding: ${B.spacing(.5)} 0 !important;
      }
    `,unitTooltip:t.css`
      display: flex;
      flex-direction: column;
    `,unitItem:t.css`
      cursor: pointer;
      padding: ${B.spacing(.5)} 0;
      margin-right: ${B.spacing(1)};
    `,disabled:t.css`
      color: ${B.colors.text.disabled};
    `,link:t.css`
      color: inherit;
      cursor: pointer;
      text-decoration: underline;
    `});var F=null},37592:(Y,O,e)=>{"use strict";e.d(O,{B9:()=>E,CP:()=>S,Dx:()=>h,Fm:()=>A,IS:()=>B,Jk:()=>P,M6:()=>G,Nq:()=>g,PK:()=>i,R5:()=>z,V0:()=>F,Xx:()=>C,Y3:()=>U,_1:()=>x,bN:()=>D,b_:()=>R,h8:()=>v,j4:()=>T,oO:()=>I,tQ:()=>y,uV:()=>b,uh:()=>L});var t=e(82897),n=e.n(t),o=e(77258),s=e(66121),l=e(54899),f=e(37932),d=e(47694),r=e(77582),c=e(95156),a=e(27876),u=e(66114);function i(V){return async H=>{try{H((0,u.UA)(!1)),await H(p(V)),await H(m(V)),await H(M(V)),d.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await H(T()),H((0,u.UA)(!0))}catch(Q){if(console.error(Q),(0,l.kW)(Q)){const oe={title:Q.data.message,body:Q.data.error};H((0,u.sL)(oe))}}}}function p(V){return async H=>{const Q=await(0,l.i)().get(`/api/users/${V}`,(0,c.y)());H((0,u.pm)(Q))}}function g(V){return async H=>{await(0,l.i)().put(`/api/users/${V.id}`,V),H(i(V.id))}}function y(V,H){return async Q=>{const oe={password:H};await(0,l.i)().put(`/api/admin/users/${V}/password`,oe),Q(i(V))}}function E(V){return async H=>{await(0,l.i)().post(`/api/admin/users/${V}/disable`),f.E1.push("/admin/users")}}function h(V){return async H=>{await(0,l.i)().post(`/api/admin/users/${V}/enable`),H(i(V))}}function v(V){return async H=>{await(0,l.i)().delete(`/api/admin/users/${V}`),f.E1.push("/admin/users")}}function C(V,H){return async Q=>{const oe={isGrafanaAdmin:H};await(0,l.i)().put(`/api/admin/users/${V}/permissions`,oe),Q(i(V))}}function m(V){return async H=>{const Q=await(0,l.i)().get(`/api/users/${V}/orgs`);H((0,u.fm)(Q))}}function D(V,H,Q){return async oe=>{const se={loginOrEmail:V.login,role:Q};await(0,l.i)().post(`/api/orgs/${H}/users/`,se),oe(i(V.id))}}function P(V,H,Q){return async oe=>{const se={role:Q};await(0,l.i)().patch(`/api/orgs/${H}/users/${V}`,se),oe(i(V))}}function b(V,H){return async Q=>{await(0,l.i)().delete(`/api/orgs/${H}/users/${V}`),Q(i(V))}}function M(V){return async H=>{if(!r.Vt.hasPermission(a.AccessControlAction.UsersAuthTokenList))return;const Q=await(0,l.i)().get(`/api/admin/users/${V}/auth-tokens`);Q.reverse();const oe=Q.map(se=>({id:se.id,isActive:se.isActive,seenAt:(0,o.E8)(se.seenAt),createdAt:se.createdAt,clientIp:se.clientIp,browser:se.browser,browserVersion:se.browserVersion,os:se.os,osVersion:se.osVersion,device:se.device}));H((0,u.RC)(oe))}}function x(V,H){return async Q=>{const oe={authTokenId:V};await(0,l.i)().post(`/api/admin/users/${H}/revoke-auth-token`,oe),Q(M(H))}}function A(V){return async H=>{await(0,l.i)().post(`/api/admin/users/${V}/logout`),H(M(V))}}function T(){return async V=>{const H=r.Vt.hasPermission(a.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&H){const Q=await(0,l.i)().get("/api/admin/ldap-sync-status");V((0,u.CY)(Q))}}}function S(V){return async H=>{await(0,l.i)().post(`/api/admin/ldap/sync/${V}`),H(i(V))}}function U(){return async V=>{if(r.Vt.hasPermission(a.AccessControlAction.LDAPStatusRead))try{const H=await(0,l.i)().get("/api/admin/ldap/status");V((0,u.Ls)(H))}catch(H){if((0,l.kW)(H)){H.isHandled=!0;const Q={title:H.data.message,body:H.data.error};V((0,u.y3)(Q))}}}}function R(V){return async H=>{try{const Q=await(0,l.i)().get(`/api/admin/ldap/${encodeURIComponent(V)}`),{name:oe,surname:se,email:ie,login:j,isGrafanaAdmin:de,isDisabled:ce,roles:ee,teams:le}=Q,q={info:{name:oe,surname:se,email:ie,login:j},permissions:{isGrafanaAdmin:de,isDisabled:ce},roles:ee,teams:le};H((0,u.sJ)(q))}catch(Q){if((0,l.kW)(Q)){Q.isHandled=!0;const oe={title:Q.data.message,body:Q.data.error};H((0,u.eq)()),H((0,u.VB)(oe))}}}}function F(){return V=>{V((0,u.WO)())}}function B(){return V=>{V((0,u.WO)()),V((0,u.eq)())}}const K=V=>V.map(H=>Array.isArray(H.value)?H.value.map(Q=>`${H.name}=${Q.value}`).join("&"):`${H.name}=${H.value}`).join("&");function L(){return async(V,H)=>{try{const{perPage:Q,page:oe,query:se,filters:ie}=H().userListAdmin,j=await(0,l.i)().get(`/api/users/search?perpage=${Q}&page=${oe}&query=${se}&${K(ie)}`);V((0,u.xh)(j))}catch(Q){(0,u.k7)(),console.error(Q)}}}const N=(0,t.debounce)(V=>V(L()),500);function z(V){return async H=>{H((0,u.tZ)()),H((0,u.aj)(V)),N(H)}}function G(V){return async H=>{H((0,u.tZ)()),H((0,u.qz)(V)),N(H)}}function I(V){return async H=>{H((0,u.tZ)()),H((0,u.PJ)(V)),H(L())}}},66114:(Y,O,e)=>{"use strict";e.d(O,{CY:()=>r,Ls:()=>f,PJ:()=>A,RC:()=>E,UA:()=>h,VB:()=>c,WO:()=>s,ZP:()=>U,aj:()=>x,eq:()=>l,fm:()=>y,k7:()=>M,pm:()=>g,qz:()=>T,sJ:()=>a,sL:()=>v,tZ:()=>b,xh:()=>P,y3:()=>d});var t=e(62992);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},o=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(R,F)=>({...R,ldapError:void 0,connectionInfo:F.payload}),ldapFailedAction:(R,F)=>({...R,ldapError:F.payload}),ldapSyncStatusLoadedAction:(R,F)=>({...R,syncInfo:F.payload}),userMappingInfoLoadedAction:(R,F)=>({...R,user:F.payload,userError:void 0}),userMappingInfoFailedAction:(R,F)=>({...R,user:void 0,userError:F.payload}),clearUserMappingInfoAction:(R,F)=>({...R,user:void 0}),clearUserErrorAction:(R,F)=>({...R,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:l,ldapConnectionInfoLoadedAction:f,ldapFailedAction:d,ldapSyncStatusLoadedAction:r,userMappingInfoFailedAction:c,userMappingInfoLoadedAction:a}=o.actions,u=o.reducer,i={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},p=(0,t.oM)({name:"userAdmin",initialState:i,reducers:{userProfileLoadedAction:(R,F)=>({...R,user:F.payload}),userOrgsLoadedAction:(R,F)=>({...R,orgs:F.payload}),userSessionsLoadedAction:(R,F)=>({...R,sessions:F.payload}),userAdminPageLoadedAction:(R,F)=>({...R,isLoading:!F.payload}),userAdminPageFailedAction:(R,F)=>({...R,error:F.payload,isLoading:!1})}}),{userProfileLoadedAction:g,userOrgsLoadedAction:y,userSessionsLoadedAction:E,userAdminPageLoadedAction:h,userAdminPageFailedAction:v}=p.actions,C=p.reducer,m={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},D=(0,t.oM)({name:"userListAdmin",initialState:m,reducers:{usersFetched:(R,F)=>{const{totalCount:B,perPage:K,...L}=F.payload,N=Math.ceil(B/K);return{...R,...L,totalPages:N,perPage:K,showPaging:N>1,isLoading:!1}},usersFetchBegin:R=>({...R,isLoading:!0}),usersFetchEnd:R=>({...R,isLoading:!1}),queryChanged:(R,F)=>({...R,query:F.payload,page:0}),pageChanged:(R,F)=>({...R,page:F.payload}),filterChanged:(R,F)=>{const{name:B,value:K}=F.payload;return R.filters.some(L=>L.name===B)?{...R,page:0,filters:R.filters.map(L=>L.name===B?{...L,value:K}:L)}:{...R,page:0,filters:[...R.filters,F.payload]}}}}),{usersFetched:P,usersFetchBegin:b,usersFetchEnd:M,queryChanged:x,pageChanged:A,filterChanged:T}=D.actions,S=D.reducer,U={ldap:u,userAdmin:C,userListAdmin:S}},77293:(Y,O,e)=>{"use strict";e.d(O,{Yb:()=>n,d5:()=>s});var t=e(35645);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function o(){const l=t.v.licenseInfo?.trialExpiry;return!!(l&&l>0)}const s=()=>o()&&t.v.featureToggles.featureHighlights},67162:(Y,O,e)=>{"use strict";e.d(O,{$:()=>d,Z:()=>v});var t=e(82897),n=e.n(t),o=e(57591);const s=new o.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),l=[{text:"Query",value:"query"}],f={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var d=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(d||{});const r=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],c=[{text:"OR",value:"or"},{text:"AND",value:"and"}],a=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],u=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],i=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function p(C){const m=new o.zU({type:C.type,defaultParams:[]});return new o.XN(C,m)}function g(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(C){switch(g(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function E(C,m){return(0,t.reduce)(C,(D,P)=>(P.metric!==void 0&&P.value!==void 0&&D.push(P.metric+"="+P.value),P.Metric!==void 0&&P.Value!==void 0&&D.push(P.Metric+"="+P.Value),D),[]).join(m)}function h(C){return(0,t.isArray)(C.data)?E(C.data,", "):(0,t.isArray)(C.data.evalMatches)?E(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}const v={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:l,evalFunctions:r,evalOperators:c,noDataModes:u,executionErrorModes:i,reducerTypes:a,createReducerPart:p,getAlertAnnotationInfo:h,alertStateSortScore:f}},57591:(Y,O,e)=>{"use strict";e.d(O,{C7:()=>f,D:()=>l,XN:()=>s,zU:()=>o});var t=e(82897),n=e.n(t);class o{constructor(a){this.type=a.type,this.params=a.params,this.defaultParams=a.defaultParams,this.renderer=a.renderer,this.category=a.category,this.addStrategy=a.addStrategy}}class s{constructor(a,u){if(this.part=a,this.def=u,!this.def)throw{message:"Could not find query part "+a.type};a.params=a.params||(0,t.clone)(this.def.defaultParams),this.params=a.params,this.text="",this.updateText()}render(a){return this.def.renderer(this,a)}hasMultipleParamsInString(a,u){return a.indexOf(",")===-1?!1:this.def.params[u+1]&&this.def.params[u+1].optional}updateParam(a,u){if(this.hasMultipleParamsInString(a,u)){(0,t.each)(a.split(","),(i,p)=>{this.updateParam(i.trim(),p)});return}a===""&&this.def.params[u].optional?this.params.splice(u,1):this.params[u]=a,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let a=this.def.type+"(";a+=this.params.join(", "),a+=")",this.text=a}}function l(c,a){const u=c.def.type+"(",i=(0,t.map)(c.params,(p,g)=>{const y=c.def.params[g];return y.type==="time"&&p==="auto"&&(p="$__interval"),y.quote==="single"?"'"+p+"'":y.quote==="double"?'"'+p+'"':p});return a&&i.unshift(a),u+i.join(", ")+")"}function f(c,a){return a+" "+c.params[0]}function d(c,a){return c.params[0]}function r(c,a){return'"'+c.params[0]+'"'}},11626:(Y,O,e)=>{"use strict";e.d(O,{ZP:()=>P,Gr:()=>a,gz:()=>g,Oc:()=>y,K:()=>v,J0:()=>C,T2:()=>h,ql:()=>E});var t=e(62992),n=e(67483),o=e(83829),s=e(46818),l=e(72004);const d=(0,o.combineReducers)({dataSources:(0,s.jK)("dataSources",l.nw,({rulesSourceName:x})=>x).reducer,promRules:(0,s.jK)("promRules",l.y6,({rulesSourceName:x})=>x).reducer,rulerRules:(0,s.jK)("rulerRules",l.UR,({rulesSourceName:x})=>x).reducer,amConfigs:(0,s.jK)("amConfigs",l.Yh,x=>x).reducer,silences:(0,s.jK)("silences",l.je,x=>x).reducer,ruleForm:(0,o.combineReducers)({saveRule:(0,s.i6)("saveRule",l.wy).reducer,existingRule:(0,s.i6)("existingRule",l.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",l.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",l.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",l.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",l.QY).reducer,amAlerts:(0,s.jK)("amAlerts",l.dB,x=>x).reducer,folders:(0,s.jK)("folders",l.vL,x=>x).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",l.mS,x=>x).reducer,testReceivers:(0,s.i6)("testReceivers",l.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",l.hv).reducer,externalAlertmanagers:(0,o.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",l.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",l.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",l.Ms).reducer});var r=e(67162);const c={items:[],searchQuery:"",isLoading:!1},a={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function u(x,A){const T=r.Z.getStateDisplayModel(A),S={...x,stateText:T.text,stateIcon:T.iconClass,stateClass:T.stateClass,stateAge:(0,n.CQ)(x.newStateDate).fromNow(!0)};return S.state!=="paused"&&(S.executionError&&(S.info="Execution Error: "+S.executionError),S.evalData&&S.evalData.noData&&(S.info="Query returned no data")),S}const i=(0,t.oM)({name:"alertRules",initialState:c,reducers:{loadAlertRules:x=>({...x,isLoading:!0}),loadedAlertRules:(x,A)=>{const S=A.payload.map(U=>u(U,U.state));return{...x,items:S,isLoading:!1}},setSearchQuery:(x,A)=>({...x,searchQuery:A.payload})}}),p=(0,t.oM)({name:"notificationChannel",initialState:a,reducers:{setNotificationChannels:(x,A)=>({...x,notificationChannelTypes:M(A.payload),notifiers:A.payload}),notificationChannelLoaded:(x,A)=>{const T=A.payload,U=x.notifiers.find(R=>R.type===T.type).options.filter(R=>R.secure);return U.length>0&&U.some(R=>T.settings[R.propertyName]!=="")?b(x,A.payload,U):{...x,notificationChannel:T}},resetSecureField:(x,A)=>({...x,notificationChannel:{...x.notificationChannel,secureFields:{...x.notificationChannel.secureFields,[A.payload]:!1}}})}}),{loadAlertRules:g,loadedAlertRules:y,setSearchQuery:E}=i.actions,{setNotificationChannels:h,notificationChannelLoaded:v,resetSecureField:C}=p.actions,m=i.reducer,D=p.reducer,P={alertRules:m,notificationChannel:D,unifiedAlerting:d};function b(x,A,T){const S={},U={};return T.forEach(R=>{U[R.propertyName]=A.settings[R.propertyName],S[R.propertyName]=""}),{...x,notificationChannel:{...A,settings:{...A.settings,...S},secureSettings:{...U}}}}function M(x){return x.map(A=>({value:A.type,label:A.name,...A,typeName:A.type})).sort((A,T)=>A.name>T.name?1:-1)}},41904:(Y,O,e)=>{"use strict";e.d(O,{Hc:()=>p,I5:()=>i,PN:()=>c,Z0:()=>g,pM:()=>a,z7:()=>r});var t=e(67483),n=e(53843),o=e(56986),s=e(54899),l=e(35645),f=e(41818);const d=15,r={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function c(y,E={}){l.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:o.in.INFO,context:{...E,module:"Alerting"}})}function a(y,E,h){return async function(...v){const C=performance.now(),m=await y(...v);return c(E,{loadTimeMs:(performance.now()-C).toFixed(0),...h}),m}}async function u(){try{const{createdAt:y}=await(0,s.i)().get("/api/user"),E=(0,t.CQ)().subtract(d,"days"),h=(0,t.CQ)(y);return E.isBefore(h)}catch{return!0}}const i=async y=>{await u()||(0,f.ff)("grafana_alerting_rule_creation",y)},p=async y=>{await u()||(0,f.ff)("grafana_alerting_rule_aborted",y)},g=async y=>{await u()||(0,f.ff)("grafana_alerting_rule_form_error",y)}},29427:(Y,O,e)=>{"use strict";e.d(O,{C:()=>f});var t=e(90701),n=e(65583),o=e(54899),s=e(41904);const l=()=>async d=>{try{const r=performance.now(),{data:c,...a}=await(0,n.n)((0,o.i)().fetch(d));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-r).toFixed(0),url:d.url,method:d.method??"",responseStatus:a.statusText}),{data:c,meta:a}}catch(r){return{error:r}}},f=(0,t.LC)({reducerPath:"alertingApi",baseQuery:l(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},30173:(Y,O,e)=>{"use strict";e.d(O,{h:()=>l});var t=e(20194),n=e(45849),o=e(29427);const s=10,l=o.C.injectEndpoints({endpoints:f=>({getAlertmanagerAlerts:f.query({query:({amSourceName:d,filter:r})=>{const c=r?.matchers?.filter(E=>E.name&&E.value).map(E=>`${E.name}${(0,t.zy)(E)}${E.value}`),{silenced:a,inhibited:u,unprocessed:i,active:p}=r||{},g=Object.fromEntries(Object.entries({silenced:a,active:p,inhibited:u,unprocessed:i}).filter(([E,h])=>h!==void 0)),y={filter:c};return g&&Object.keys(g).forEach(E=>{y[E]=g[E]}),{url:`/api/alertmanager/${(0,n.gt)(d)}/api/v2/alerts`,params:y}}}),getAlertmanagerChoiceStatus:f.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:f.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:f.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:d=>d.data}),saveExternalAlertmanagersConfig:f.mutation({query:d=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:d}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:f.query({query:()=>({url:`/api/alertmanager/${(0,n.gt)(n.GC)}/config/history?limit=${s}`})}),resetAlertManagerConfigToOldVersion:f.mutation({query:d=>({url:`/api/alertmanager/${(0,n.gt)(n.GC)}/config/history/${d.id}/_activate`,method:"POST"})})})})},44737:(Y,O,e)=>{"use strict";e.d(O,{C$:()=>r,SJ:()=>u,WG:()=>c,Zy:()=>a});var t=e(65583),n=e(54899),o=e(46063),s=e(37190),l=e(45849),f=e(95454),d=e(49011);async function r(h){if(h===l.GC)return{features:{rulerApiEnabled:!0}};const v=(0,l.c$)(h);if(!v)throw new Error(`Cannot find data source configuration for ${h}`);const{url:C,name:m,type:D}=v;if(!C)throw new Error("The data source url cannot be empty.");if(D!=="prometheus"&&D!=="loki")throw new Error(`The build info request is not available for ${D}. Only 'prometheus' and 'loki' are supported`);return c({name:m,url:C,type:D})}async function c(h){const{url:v,name:C,type:m}=h,D=m==="loki"?void 0:await p(v);if(!(D!==void 0)){if(!await g(C))throw new Error(`Unable to fetch alert rules. Is the ${C} data source properly configured?`);const x=await y(C);return{application:o.T8.Cortex,features:{rulerApiEnabled:x}}}const{features:b}=D.data;return b?{application:o.T8.Mimir,features:{rulerApiEnabled:b?.ruler_config_api==="true"}}:{application:o.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function a(h){if(h===l.GC)return{lazyConfigInit:!1};const v=i(h),{url:C,type:m}=v;if(!C)throw new Error("The data source url cannot be empty.");if(m!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${m}. Only 'alertmanager' type is supported`);return await u(C)}async function u(h){try{return{lazyConfigInit:(await p(h))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function i(h){const v=(0,l.c$)(h);if(!v)throw new Error(`Cannot find data source configuration for ${h}`);return v}async function p(h){return(await(0,t.n)((0,n.i)().fetch({url:`${h}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{if(!("status"in C&&C.status===404))throw C}))?.data}async function g(h){try{return await(0,f.j)(h),!0}catch{return!1}}async function y(h){try{return await(0,d.jw)(h),!0}catch(v){if(E(v))return!1;throw v}}function E(h){return(0,n.kW)(h)?h.data.message?.includes("GetRuleGroup unsupported in rule local store")||h.data.message?.includes("page not found")||h.data.message?.includes(s.jZ):h instanceof Error&&h.message?.includes("404 from rules config endpoint")}},79572:(Y,O,e)=>{"use strict";e.d(O,{T:()=>o});var t=e(29427),n=e(44737);const o=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:l})=>{try{return{data:await(0,n.Zy)(l)}}catch(f){return{error:f}}}})})})},644:(Y,O,e)=>{"use strict";e.d(O,{QE:()=>r,i9:()=>s});var t=e(65583),n=e(54899),o=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const l=c=>{const a=c.match(/^(\w+)(\[\d+\])?$/);return a?{type:a[1],index:a[2]}:{type:c,index:void 0}},f=c=>{const a={receivers:{},errorCount:0};c.forEach(i=>{a.receivers[i.name]={active:i.active,notifiers:{},errorCount:0};const p=a.receivers[i.name];i.integrations.forEach(g=>{Boolean(g?.lastNotifyAttemptError)&&(p.errorCount+=1);const E=d(g.name);E&&(p.notifiers[E]||(p.notifiers[E]=[]),p.notifiers[E].push(g))})});const u=Object.values(a.receivers).reduce((i,p)=>i+p.errorCount,0);return{...a,errorCount:u}},d=c=>l(c)?.type;async function r(c){try{const a=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,o.gt)(c)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return f(a.data)}catch{return f([])}}},95454:(Y,O,e)=>{"use strict";e.d(O,{hd:()=>l,j:()=>d});var t=e(65583),n=e(54899),o=e(45849);function s(r){const{dataSourceName:c,limitAlerts:a}=r;return{rules:(u,i,p)=>{const g=new URLSearchParams;c===o.GC&&a&&g.set("limit_alerts",String(a));const y=l(g,u);return{url:`/api/prometheus/${(0,o.gt)(c)}/api/v1/rules`,params:f(y,i,p)}}}}function l(r,c){return c?.dashboardUID&&(r.set("dashboard_uid",c.dashboardUID),c?.panelId&&r.set("panel_id",String(c.panelId))),Object.fromEntries(r)}function f(r,c,a){let u={...r};if(c?.length&&(u={...u,state:c}),a?.length){const i=a.map(p=>JSON.stringify(p));u={...u,matcher:i}}return u}async function d(r,c,a,u,i){if(c?.dashboardUID&&r!==o.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:p,params:g}=s({dataSourceName:r,limitAlerts:a}).rules(c,i,u),y=await(0,t.n)((0,n.i)().fetch({url:p,params:g,showErrorAlert:!1,showSuccessAlert:!1})).catch(h=>{throw"status"in h&&h.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):h}),E={};return y.data.data.groups.forEach(h=>{h.rules.forEach(v=>{v.query=v.query||""}),E[h.file]?E[h.file].groups.push(h):E[h.file]={dataSourceName:r,name:h.file,groups:[h]}}),Object.values(E)}},49011:(Y,O,e)=>{"use strict";e.d(O,{BC:()=>i,P4:()=>d,jJ:()=>u,jw:()=>a,m6:()=>r,sz:()=>h});var t=e(65583),n=e(54899),o=e(37190),s=e(45849),l=e(95454);function f(v){const m=`${`/api/ruler/${(0,s.gt)(v.dataSourceName)}`}/api/v1/rules`,D=new URLSearchParams;return D.set("subtype",v.apiVersion==="legacy"?"cortex":"mimir"),{rules:P=>{const b=(0,l.hd)(D,P);return{path:`${m}`,params:b}},namespace:P=>({path:`${m}/${encodeURIComponent(P)}`,params:Object.fromEntries(D)}),namespaceGroup:(P,b)=>({path:`${m}/${encodeURIComponent(P)}/${encodeURIComponent(b)}`,params:Object.fromEntries(D)})}}async function d(v,C,m){const{path:D,params:P}=f(v).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"POST",url:D,data:m,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}async function r(v,C){if(C?.dashboardUID&&v.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:m,params:D}=f(v).rules(C);return p(m,{},D)}async function c(v,C){const{path:m,params:D}=f(v).namespace(C);return(await p(m,{},D))[C]||[]}async function a(v){return p(`/api/ruler/${(0,s.gt)(v)}/api/v1/rules/test/test`,null)}async function u(v,C,m){const{path:D,params:P}=f(v).namespaceGroup(C,m);return p(D,null,P)}async function i(v,C,m){const{path:D,params:P}=f(v).namespaceGroup(C,m);await(0,t.n)((0,n.i)().fetch({url:D,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:P}))}async function p(v,C,m){try{return(await(0,t.n)((0,n.i)().fetch({url:v,showErrorAlert:!1,showSuccessAlert:!1,params:m}))).data}catch(D){if(!g(D))throw D;if(E(D))return C;throw y(D)?{...D,data:{...D.data,message:o.jZ}}:D}}function g(v){const C=v.data!=null;return Number.isFinite(v.status)&&C}function y(v){return v.status===404||v.status===500&&v.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function E(v){return v.status===404&&(v.data.message?.includes("group does not exist")||v.data.message?.includes("no rule groups found"))}async function h(v,C){const{path:m,params:D}=f(v).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:m,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}},24782:(Y,O,e)=>{"use strict";e.d(O,{i:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(8180);const l=({labelKey:d,value:r,operator:c="=",onRemoveLabel:a})=>{const u=(0,o.wW)(f);return n.createElement("div",{className:u.wrapper},d,c,r,!!a&&n.createElement(s.h,{name:"times",size:"xs",onClick:a}))},f=d=>({wrapper:t.css`
    padding: ${d.spacing(.5,1)};
    border-radius: ${d.shape.borderRadius(1)};
    border: solid 1px ${d.colors.border.medium};
    font-size: ${d.typography.bodySmall.fontSize};
    background-color: ${d.colors.background.secondary};
    font-weight: ${d.typography.fontWeightBold};
    color: ${d.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(Y,O,e)=>{"use strict";e.d(O,{s:()=>o});var t=e(66111),n=e(34807);const o=({labels:s,className:l})=>{const f=Object.entries(s).filter(([d])=>!(d.startsWith("__")&&d.endsWith("__")));return t.createElement("div",{className:l},t.createElement(n.P,{tags:Object.values(f).map(([d,r])=>`${d}=${r}`),className:l}))}},94984:(Y,O,e)=>{"use strict";e.d(O,{P:()=>r});var t=e(9892),n=e(66111),o=e(72648),s=e(24799),l=e(8581),f=e(45849);function d(a){return a.name===f.GC?"Grafana":a.name.slice(0,37)}const r=({onChange:a,current:u,dataSources:i,disabled:p=!1})=>{const g=(0,o.wW)(c),y=(0,n.useMemo)(()=>i.map(E=>({label:d(E),value:E.name,imgUrl:E.imgUrl,meta:E.meta})),[i]);return n.createElement(s.g,{className:g.field,label:p?"Alertmanager":"Choose Alertmanager",disabled:p||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(l.Ph,{"aria-label":p?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:E=>E.value&&a(E.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:u,getOptionLabel:E=>E.label}))},c=a=>({field:t.css`
    margin-bottom: ${a.spacing(4)};
  `})},78543:(Y,O,e)=>{"use strict";e.d(O,{a:()=>u});var t=e(9892),n=e(66111),o=e(63418),s=e(61860),l=e(72648),f=e(37190),d=e(80498),r=e(46587),c=e(94884);const a=["message","description"],u=({annotationKey:g,value:y,valueLink:E})=>{const h=f.vY[g]?n.createElement(s.u,{content:g,placement:"top",theme:"info"},n.createElement("span",null,f.vY[g])):g;return n.createElement(d.C,{label:h,horizontal:!0},n.createElement(i,{annotationKey:g,value:y,valueLink:E}))},i=({annotationKey:g,value:y,valueLink:E})=>{const h=(0,l.wW)(p),v=a.includes(g),C=y&&y.startsWith("http"),m=n.createElement(r.Z,{input:y,delimiter:["{{","}}"]});return E?n.createElement("a",{href:o.QX.sanitizeUrl(E),className:h.link},y):v?n.createElement(c.t,{className:h.well},m):C?n.createElement("a",{href:o.QX.sanitizeUrl(y),target:"__blank",className:h.link},y):n.createElement(n.Fragment,null,m)},p=g=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${g.colors.primary.text};
  `})},33950:(Y,O,e)=>{"use strict";e.d(O,{U:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(31403);const l=({isCollapsed:d,onToggle:r,idControlled:c,className:a,text:u,size:i="xl",...p})=>{const g=(0,o.wW)(f);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!d,"aria-controls":c,className:(0,t.cx)(g.expandButton,a),icon:d?"angle-right":"angle-down",onClick:()=>r(!d),...p},u)},f=d=>({expandButton:t.css`
    margin-right: ${d.spacing(1)};
  `})},80498:(Y,O,e)=>{"use strict";e.d(O,{C:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({className:f,label:d,horizontal:r,children:c,childrenWrapperClassName:a})=>{const u=(0,o.wW)(l);return n.createElement("div",{className:(0,t.cx)(u.field,r?u.fieldHorizontal:u.fieldVertical,f)},n.createElement("div",null,d),n.createElement("div",{className:a},c))},l=f=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${f.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${f.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${f.spacing(1)};
      font-size: ${f.typography.size.sm};
      font-weight: ${f.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${f.colors.text.secondary};
    }
  `})},53731:(Y,O,e)=>{"use strict";e.d(O,{t:()=>r});var t=e(9892),n=e(66111),o=e(72648),s=e(8180),l=e(78889),f=e(25724),d=e(1562);const r=({cols:a,items:u,isExpandable:i=!1,onCollapse:p,onExpand:g,isExpanded:y,renderExpandedContent:E,testIdGenerator:h,pagination:v,paginationStyles:C,renderPrefixCell:m,renderPrefixHeader:D,footerRow:P,dataTestId:b})=>{const M=(0,o.wW)(d.Z);if((p||g||y)&&!(p&&g&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((i||E)&&!(i&&E))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const x=(0,o.wW)(c(a,i,!!D)),[A,T]=(0,n.useState)([]),S=L=>{y&&p&&g?y(L)?p(L):g(L):T(A.includes(L.id)?A.filter(N=>N!==L.id):[...A,L.id])},U=v?.itemsPerPage??u.length,{page:R,numberOfPages:F,onPageChange:B,pageItems:K}=(0,f.h)(u,1,U);return n.createElement(n.Fragment,null,n.createElement("div",{className:x.container,"data-testid":b??"dynamic-table"},n.createElement("div",{className:x.row,"data-testid":"header"},D&&D(),i&&n.createElement("div",{className:x.cell}),a.map(L=>n.createElement("div",{className:x.cell,key:L.id},L.label))),K.map((L,N)=>{const z=y?y(L):A.includes(L.id);return n.createElement("div",{className:x.row,key:`${L.id}-${N}`,"data-testid":h?.(L,N)??"row"},m&&m(L,N,u),i&&n.createElement("div",{className:(0,t.cx)(x.cell,x.expandCell)},n.createElement(s.h,{"aria-label":`${z?"Collapse":"Expand"} row`,size:"lg","data-testid":"collapse-toggle",className:x.expandButton,name:z?"angle-down":"angle-right",onClick:()=>S(L),type:"button"})),a.map(G=>n.createElement("div",{className:(0,t.cx)(x.cell,x.bodyCell,G.className),"data-column":G.label,key:`${L.id}-${G.id}`},G.renderCell(L,N))),z&&E&&n.createElement("div",{className:x.expandedContentRow,"data-testid":"expanded-content"},E(L,N,u)))}),P&&n.createElement("div",{className:(0,t.cx)(x.row,x.footerRow)},P)),v&&n.createElement(l.t,{className:(0,t.cx)(M,C),currentPage:R,numberOfPages:F,onNavigate:B,hideWhenSinglePage:!0}))},c=(a,u,i)=>{const p=a.map(g=>g.size?typeof g.size=="number"?`${g.size}fr`:g.size:"auto");return u&&p.unshift("calc(1em + 16px)"),i&&p.unshift("0"),g=>({container:t.css`
      border: 1px solid ${g.colors.border.weak};
      border-radius: ${g.shape.borderRadius()};
      color: ${g.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${p.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${g.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${g.colors.background.primary};
      }

      ${g.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${g.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${i?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${g.spacing(1)};
    `,cell:t.css`
      display: flex;
      align-items: center;
      padding: ${g.spacing(1)};

      ${g.breakpoints.down("sm")} {
        padding: ${g.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${g.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${g.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${g.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${p.length+1};
      grid-column-start: ${i?3:2};
      grid-row: 2;
      padding: 0 ${g.spacing(3)} 0 ${g.spacing(1)};
      position: relative;

      ${g.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${g.colors.border.strong};
        grid-row: auto;
        padding: ${g.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(Y,O,e)=>{"use strict";e.d(O,{z:()=>c});var t=e(9892),n=e(9085),o=e.n(n),s=e(66111),l=e(26418),f=e(72648),d=e(39604),r=e(56921);const c=({children:u,header:i,content:p,footer:g,arrow:y,showAfter:E=300,wrapperClassName:h,disabled:v=!1,...C})=>{const m=(0,s.useRef)(null),D=(0,f.wW)(a);if(v)return u;const P=s.createElement(l.Stack,{direction:"column",gap:0},i&&s.createElement("div",{className:D.card.header},i),s.createElement("div",{className:D.card.body},p),g&&s.createElement("div",{className:D.card.footer},g));return s.createElement(d.D,{content:P,hideAfter:100},(b,M,x)=>s.createElement(s.Fragment,null,m.current&&s.createElement(r.J,{...x,...C,wrapperClassName:o()(D.popover(y?1.25:0),h),onMouseLeave:M,onMouseEnter:b,referenceElement:m.current,renderArrow:y?({arrowProps:A,placement:T})=>s.createElement("div",{className:D.arrow(T),...A}):()=>s.createElement(s.Fragment,null)}),s.cloneElement(u,{ref:m,onMouseEnter:b,onMouseLeave:M})))},a=u=>({popover:i=>t.css`
    border-radius: ${u.shape.borderRadius()};
    box-shadow: ${u.shadows.z3};
    background: ${u.colors.background.primary};
    border: 1px solid ${u.colors.border.medium};

    margin-bottom: ${u.spacing(i)};
  `,card:{body:t.css`
      padding: ${u.spacing(1)};
    `,header:t.css`
      padding: ${u.spacing(1)};
      background: ${u.colors.background.secondary};
      border-bottom: solid 1px ${u.colors.border.medium};
    `,footer:t.css`
      padding: ${u.spacing(.5)} ${u.spacing(1)};
      background: ${u.colors.background.secondary};
      border-top: solid 1px ${u.colors.border.medium};
    `},arrow:i=>{const p="9px";return t.css`
      width: 0;
      height: 0;

      border-left: ${p} solid transparent;
      border-right: ${p} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${p} solid ${u.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${p} solid ${u.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${p};
      }
    `}})},63613:(Y,O,e)=>{"use strict";e.d(O,{s:()=>s});var t=e(66111),n=e(61860),o=e(39904);function s({text:l}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,l)},t.createElement(o.J,{name:"info-circle",size:"xs"}))}},63029:(Y,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(9892),n=e(66111);const o=()=>n.createElement("span",{className:t.css`
      flex: 1;
    `})},79453:(Y,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f,state:d,size:r="md",muted:c=!1})=>{const a=(0,o.wW)(l);return n.createElement("span",{className:(0,t.cx)(a.common,a[d],a[r],{[a.muted]:c})},f||d)},l=f=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${f.shape.borderRadius()};
    font-size: ${f.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${f.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${f.colors.success.main};
    border: solid 1px ${f.colors.success.main};
    color: ${f.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${f.colors.warning.main};
    border: solid 1px ${f.colors.warning.main};
    color: ${f.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${f.colors.error.main};
    border: solid 1px ${f.colors.error.main};
    color: ${f.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${f.colors.secondary.main};
    border: solid 1px ${f.colors.secondary.main};
    color: ${f.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${f.colors.primary.main};
    border: solid 1px ${f.colors.primary.main};
    color: ${f.colors.primary.contrastText};
  `,md:t.css`
    padding: ${f.spacing(.5,1)};
    min-width: ${f.spacing(8)};
  `,sm:t.css`
    padding: ${f.spacing(.3,.5)};
    min-width: 52px;
  `,muted:t.css`
    opacity: 0.5;
  `})},46587:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(9892),n=e(66111),o=e(72648),s=e(19985),l=e(42042),f=e(68402);const d=["$",".",'"'];function r({input:E,delimiter:h=["{{","}}"]}){const v=(0,o.wW)(y),[C,m]=h,D=new RegExp(`(?<before>.*?)(${C}(?<token>.*?)${m}|$)`,"gm"),P=E.split(`
`),b=[];return P.forEach((M,x)=>{Array.from(M.matchAll(D)).forEach((T,S)=>{const U=T.groups?.before,R=T.groups?.token?.trim();if(U&&b.push(n.createElement("span",{key:`${x}-${S}-before`},U)),R){const F=g(R),B=F===c.Variable?R:"",K=`${C} ${R} ${m}`;b.push(n.createElement(a,{key:`${x}-${S}-token`,content:K,type:F,description:B}))}}),b.push(n.createElement("br",{key:`${x}-newline`}))}),n.createElement("span",{className:v.wrapper},b)}var c=(E=>(E.Variable="variable",E.Function="function",E.Keyword="keyword",E.Unknown="unknown",E))(c||{});function a({content:E,description:h,type:v}){const C=(0,o.wW)(y),m=Boolean(v)===!1;return n.createElement(l.z,{placement:"top-start",disabled:m,content:n.createElement("div",{className:C.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,v),color:"blue"})," ",h&&n.createElement("code",null,h))},n.createElement("span",null,n.createElement(s.C,{className:C.token,text:E,color:"blue"})))}function u(E){return d.some(h=>E.startsWith(h))}function i(E){return f.keywords.some(h=>E.startsWith(h))}function p(E){return f.builtinFunctions.some(h=>E.startsWith(h))}function g(E){let h;return u(E)?h="variable":i(E)?h="keyword":p(E)?h="function":h="unknown",h}const y=E=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${E.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${E.shape.borderRadius()};
    box-shadow: ${E.shadows.z3};
    background: ${E.colors.background.primary};
    border: 1px solid ${E.colors.border.medium};

    padding: ${E.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${E.spacing(1)};
  `})},94884:(Y,O,e)=>{"use strict";e.d(O,{t:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f,className:d})=>{const r=(0,o.wW)(l);return n.createElement("div",{className:(0,t.cx)(r.wrapper,d)},f)},l=f=>({wrapper:t.css`
    background-color: ${f.components.panel.background};
    border: solid 1px ${f.components.input.borderColor};
    border-radius: ${f.shape.borderRadius(1)};
    padding: ${f.spacing(.5,1)};
    font-family: ${f.typography.fontFamilyMonospace};
  `})},96308:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(64681),n=e.n(t),o=e(66111),s=e(72648),l=e(53715);const f=({group:d})=>{const r=(0,s.wW)(l.r),c=d.alerts.length,a=d.alerts.reduce((u,i)=>(u[i.status.state]?u[i.status.state]+=1:u[i.status.state]=1,u),{});return o.createElement("div",null,`${c} ${n()("alert",c)}: `,Object.entries(a).map(([u,i],p)=>o.createElement("span",{key:`${JSON.stringify(d.labels)}-notifications-${p}`,className:r[u]},p>0&&", ",`${i} ${u}`)))}},30151:(Y,O,e)=>{"use strict";e.d(O,{F:()=>p});var t=e(9892),n=e(82897),o=e.n(n),s=e(66111),l=e(26418),f=e(54408),d=e(72648),r=e(39904),c=e(64353),a=e(61860),u=e(46967),i=e(41904);const p=({className:y,onFilterChange:E,defaultQueryString:h})=>{const v=(0,d.wW)(g),C=(0,s.useMemo)(()=>(0,n.debounce)(D=>{(0,f.PN)(i.z7.filterByLabel);const P=D.target;E(P.value)},600),[E]);(0,s.useEffect)(()=>C.cancel(),[C]);const m=s.createElement(r.J,{name:"search"});return s.createElement("div",{className:y},s.createElement(c._,null,s.createElement(l.Stack,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(a.u,{content:s.createElement("div",null,"Filter alerts using label querying, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},s.createElement(r.J,{className:v.icon,name:"info-circle",size:"sm"})))),s.createElement(u.I,{placeholder:"Search",defaultValue:h,onChange:C,"data-testid":"search-query-input",prefix:m,className:v.inputWidth}))},g=y=>({icon:t.css`
    margin-right: ${y.spacing(.5)};
  `,inputWidth:t.css`
    width: 340px;
    flex-grow: 0;
  `})},50362:(Y,O,e)=>{"use strict";e.d(O,{_:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(19985),l=e(31403);const f=({enabled:r=!1,error:c,warning:a,onSetCondition:u})=>{const i=(0,o.wW)(d);return r&&c?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:c.message}):r&&a?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:a.message}):r&&!c&&!a?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):r?null:n.createElement("button",{type:"button",className:i.actionLink,onClick:()=>u&&u()},"Make this the alert condition")},d=r=>{const c=(0,l.gN)(r);return{actionLink:t.css`
      ${c};
      color: ${r.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},97201:(Y,O,e)=>{"use strict";e.d(O,{A2:()=>B,bw:()=>L});var t=e(9892),n=e(82897),o=e(66111),s=e(52666),l=e(19447),f=e(77258),d=e(26418),r=e(72648),c=e(31403),a=e(68668),u=e(39904),i=e(8581),p=e(8180),g=e(5076),y=e(71263),E=e(75897),h=e(436),v=e(17349),C=e(97573),m=e(46063),D=e(25724),P=e(42042),b=e(63029),M=e(45608),x=e(50362),A=e(56190);const T=H=>{const Q=H.fields[0];return Q?.config?.displayNameFromDS??H.name??Q?.labels?.__name__},S=H=>{const Q=H.fields[0]?.values[0];return Number.isFinite(Q)?(0,A.O)(Q,5):Q},U=H=>H.fields[0]?.labels??{},R=H=>Object.entries(H).map(([Q,oe])=>Q+"="+oe).join(", "),F=H=>H.every(oe=>oe.fields.every(se=>se.values.every(ie=>ie==null))),B=({queries:H=[],query:Q,data:oe,error:se,warning:ie,isAlertCondition:j,onSetCondition:de,onUpdateRefId:ce,onRemoveExpression:ee,onUpdateExpressionType:le,onChangeQuery:q})=>{const fe=(0,r.wW)(V),Z=Q?.type,ne=oe&&Object.values(oe).some(Te=>Boolean(Te)&&Te.state===s.Gu.Loading),re=Array.isArray(oe?.series)&&!ne,ve=oe?.series??[],me=j??!1,Ie=j&&re,Ge={[m.x_.Firing]:ve.filter(Te=>S(Te)>=1),[m.x_.Inactive]:ve.filter(Te=>S(Te)<1)},gt=(0,o.useCallback)(Te=>{const Le=H.filter(Ye=>Te.refId!==Ye.refId).map(Ye=>({value:Ye.refId,label:Ye.refId}));switch(Te.type){case C.Us.math:return o.createElement(y.Z,{onChange:q,query:Te,labelWidth:"auto",onRunQuery:()=>{}});case C.Us.reduce:return o.createElement(E.v,{onChange:q,refIds:Le,labelWidth:"auto",query:Te});case C.Us.resample:return o.createElement(h.p,{onChange:q,query:Te,labelWidth:"auto",refIds:Le});case C.Us.classic:return o.createElement(g.I,{onChange:q,query:Te,refIds:Le});case C.Us.threshold:return o.createElement(v.M,{onChange:q,query:Te,labelWidth:"auto",refIds:Le});default:return o.createElement(o.Fragment,null,"Expression not supported: ",Te.type)}},[q,H]);return o.createElement("div",{className:(0,t.cx)(fe.expression.wrapper,me&&fe.expression.alertCondition)},o.createElement("div",{className:fe.expression.stack},o.createElement(z,{refId:Q.refId,queryType:Z,onRemoveExpression:()=>ee(Q.refId),onUpdateRefId:Te=>ce(Q.refId,Te),onUpdateExpressionType:Te=>le(Q.refId,Te)}),o.createElement("div",{className:fe.expression.body},gt(Q)),re&&o.createElement(L,{series:ve,isAlertCondition:j}),o.createElement("div",{className:fe.footer},o.createElement(d.Stack,{direction:"row",alignItems:"center"},o.createElement(x._,{onSetCondition:()=>de(Q.refId),enabled:me,error:se,warning:ie}),o.createElement(b.L,null),Ie&&o.createElement(N,{firing:Ge[m.x_.Firing].length,normal:Ge[m.x_.Inactive].length})))))},K=20,L=({series:H,isAlertCondition:Q})=>{const{pageItems:oe,previousPage:se,nextPage:ie,numberOfPages:j,pageStart:de,pageEnd:ce}=(0,D.h)(H,1,K),ee=(0,r.wW)(V),le=F(H),q=!le&&(0,l.xI)(H),fe=j>1;return o.createElement("div",{className:ee.expression.results},!le&&q&&o.createElement("div",null,oe.map((Z,ne)=>o.createElement(I,{key:(0,n.uniqueId)(),frame:Z,index:de+ne,isAlertCondition:Q}))),!le&&!q&&oe.map((Z,ne)=>o.createElement(G,{key:(0,n.uniqueId)(),frame:Z,index:de+ne,isAlertCondition:Q})),le&&o.createElement("div",{className:(0,t.cx)(ee.expression.noData,ee.mutedText)},"No data"),fe&&o.createElement("div",{className:ee.pagination.wrapper,"data-testid":"paginate-expression"},o.createElement(d.Stack,null,o.createElement(c.zx,{variant:"secondary",fill:"outline",onClick:se,icon:"angle-left",size:"sm","aria-label":"previous-page"}),o.createElement(b.L,null),o.createElement("span",{className:ee.mutedText},de," - ",ce," of ",H.length),o.createElement(b.L,null),o.createElement(c.zx,{variant:"secondary",fill:"outline",onClick:ie,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},N=({firing:H,normal:Q})=>{const{mutedText:oe}=(0,r.wW)(V);return o.createElement("span",{className:oe},`${H} firing, ${Q} normal`)},z=({refId:H,queryType:Q,onUpdateRefId:oe,onUpdateExpressionType:se,onRemoveExpression:ie})=>{const j=(0,r.wW)(V),de=(0,r.wW)(c.gN),[ce,ee]=(0,o.useState)(!1),le=ce!==!1,q=le&&ce==="refId",fe=le&&ce==="expressionType",Z=C._M.find(ne=>ne.value===Q);return o.createElement("header",{className:j.header.wrapper},o.createElement(d.Stack,{direction:"row",gap:.5,alignItems:"center"},o.createElement(d.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!q&&o.createElement("button",{type:"button",className:(0,t.cx)(de,j.editable),onClick:()=>ee("refId")},o.createElement("div",{className:j.expression.refId},H)),q&&o.createElement(a.H,{autoFocus:!0,defaultValue:H,minWidth:5,onChange:ne=>{oe(ne.currentTarget.value),ee(!1)},onFocus:ne=>ne.target.select(),onBlur:ne=>{oe(ne.currentTarget.value),ee(!1)}}),!fe&&o.createElement("button",{type:"button",className:(0,t.cx)(de,j.editable),onClick:()=>ee("expressionType")},o.createElement("div",{className:j.mutedText},(0,n.capitalize)(Q)),o.createElement(u.J,{size:"xs",name:"pen",className:j.mutedIcon,onClick:()=>ee("expressionType")})),fe&&o.createElement(i.Ph,{isOpen:!0,autoFocus:!0,onChange:ne=>{se(ne.value??C.Us.classic),ee(!1)},onBlur:()=>{ee(!1)},options:C._M,value:Z,width:25})),o.createElement(b.L,null),o.createElement(p.h,{type:"button",name:"trash-alt",variant:"secondary",className:j.mutedIcon,onClick:ie})))},G=({frame:H,index:Q,isAlertCondition:oe})=>{const se=(0,r.wW)(V),ie=T(H)||"Series "+Q,j=S(H),de=U(H),ce=Object.entries(de),ee=ce.length>0,le=oe&&j!==0,q=oe&&j===0,fe=`${ee?"":ie}${ee?`{${R(de)}}`:""}`;return o.createElement("div",{className:se.expression.resultsRow},o.createElement(d.Stack,{direction:"row",gap:1,alignItems:"center"},o.createElement("div",{className:se.expression.resultLabel,title:fe},o.createElement("span",null,ee?"":ie),ee&&o.createElement(o.Fragment,null,o.createElement("span",null,"{"),ce.map(([Z,ne],re)=>o.createElement("span",{key:(0,n.uniqueId)()},o.createElement("span",{className:se.expression.labelKey},Z),o.createElement("span",null,"="),o.createElement("span",null,'"'),o.createElement("span",{className:se.expression.labelValue},ne),o.createElement("span",null,'"'),re<ce.length-1&&o.createElement("span",null,", "))),o.createElement("span",null,"}"))),o.createElement("div",{className:se.expression.resultValue},j),le&&o.createElement(M.l,{state:m.x_.Firing,size:"sm"}),q&&o.createElement(M.l,{state:m.x_.Inactive,size:"sm"})))},I=({frame:H,index:Q})=>{const oe=(0,r.wW)(V),se=H.fields[1],ie=se.labels,de=se.config?.displayNameFromDS??(ie?R(se.labels??{}):"Series "+Q),ce=H.fields[0].values,ee=q=>H.fields[0].values[q],le=q=>H.fields[1].values[q];return o.createElement("div",{className:oe.expression.resultsRow},o.createElement(d.Stack,{direction:"row",gap:1,alignItems:"center"},o.createElement("span",{className:(0,t.cx)(oe.mutedText,oe.expression.resultLabel),title:de},de),o.createElement("div",{className:oe.expression.resultValue},o.createElement(P.z,{placement:"right",wrapperClassName:oe.timeseriesTableWrapper,content:o.createElement("table",{className:oe.timeseriesTable},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Timestamp"),o.createElement("th",null,"Value"))),o.createElement("tbody",null,ce.map((q,fe)=>o.createElement("tr",{key:fe},o.createElement("td",{className:oe.mutedText},(0,f.dq)(ee(fe))),o.createElement("td",{className:oe.expression.resultValue},le(fe))))))},o.createElement("span",null,"Time series data")))))},V=H=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${H.colors.border.medium};

      border-radius: ${H.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${H.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${H.typography.fontWeightBold};
      color: ${H.colors.primary.text};
    `,results:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;

      border-top: solid 1px ${H.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${H.spacing(.75)} ${H.spacing(1)};

      &:nth-child(odd) {
        background-color: ${H.colors.background.secondary};
      }

      &:hover {
        background-color: ${H.colors.background.canvas};
      }
    `,labelKey:t.css`
      color: ${H.isDark?"#73bf69":"#56a64b"};
    `,labelValue:t.css`
      color: ${H.isDark?"#ce9178":"#a31515"};
    `,resultValue:t.css`
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
      overflow-x: auto;

      display: inline-block;
      white-space: nowrap;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${H.spacing()};
    `},mutedText:t.css`
    color: ${H.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${H.colors.background.secondary};
      padding: ${H.spacing(.5)} ${H.spacing(1)};
      border-bottom: solid 1px ${H.colors.border.medium};
    `},footer:t.css`
    background: ${H.colors.background.secondary};
    padding: ${H.spacing(1)};
    border-top: solid 1px ${H.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${H.colors.text.secondary};
  `,editable:t.css`
    padding: ${H.spacing(.5)} ${H.spacing(1)};
    border: solid 1px ${H.colors.border.weak};
    border-radius: ${H.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${H.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${H.spacing(1)};
    }

    td {
      background: ${H.colors.background.primary};
    }

    th {
      background: ${H.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${H.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:t.css`
      border-top: 1px solid ${H.colors.border.medium};
      padding: ${H.spacing()};
    `}})},68402:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>o,builtinFunctions:()=>l,conf:()=>r,keywords:()=>f,language:()=>d});var t=(c=>(c.Delimiter="delimiter",c.Keyword="keyword",c.Function="type.identifier",c.String="string",c.Variable="variable.name",c.Number="number",c.Comment="comment",c.Operator="operator",c.Identifier="idenfifier",c))(t||{}),n=(c=>(c.toUpper="toUpper",c.toLower="toLower",c.title="title",c.join="join",c.match="match",c.safeHtml="safeHtml",c.reReplaceAll="reReplaceAll",c.stringSlice="stringSlice",c))(n||{});const o=Object.values(n),l=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],f=["define","if","else","end","range","break","continue","template","block","with"],d={defaultToken:"",keywords:f,functions:[...l,...o],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},r={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},32139:(Y,O,e)=>{"use strict";e.d(O,{p:()=>Qn,E:()=>aa});var t=e(9892),n=e(66111),o=e(66698),s=e(51947),l=e(35645),f=e(54408),d=e(72648),r=e(24799),c=e(46967),a=e(52081),u=e(31403),i=e(67487),p=e(68226),g=e(98102),y=e(60499),E=e(77582),h=e(40014),v=e(96044),C=e(27876),m=e(41904),D=e(69945),P=e(72004),b=e(94617),M=e(46818),x=e(21767),A=e(60048),T=e(63619),S=e(8581),U=e(20383),R=e(41213),F=e(30422),B=e(77258),K=e(52666),L=e(86647),N=e(45253),z=e(59980),G=e(9471),I=e(59724),V=e(57027),H=e(32921),Q=e(59957),oe=e(75849),se=e(54899),ie=e(77599);function j(Tt){return"expr"in Tt}function de(Tt){return"grafana_condition"in Tt}var ce=e(45849);function ee(Tt){if(j(Tt))return le(Tt,Tt.dataSourceUid,b.$.cloudAlerting);if(de(Tt))return le(Tt,ce.GC,b.$.grafana);throw new Error("unsupported preview rule request")}function le(Tt,Be,Ae){return(0,H.x)({whileLoading:q(Ae),source:(0,se.i)().fetch({method:"POST",url:`/api/v1/rule/test/${Be}`,data:Tt}).pipe((0,G.U)(({data:nt})=>q(Ae,{state:K.Gu.Done,series:nt.instances.map(Q.vP)})),(0,I.K)(nt=>(0,z.of)(q(Ae,{state:K.Gu.Error,error:(0,ie.P)(nt)}))),(0,V.B)())})}function q(Tt,Be={}){return{ruleType:Tt,data:{state:K.Gu.Loading,series:[],timeRange:(0,oe.JK)(),...Be}}}var fe=e(69369),Z=e(89050),ne=e(90748),re=e(98825),ve=e(40538);function me(Tt){const{preview:Be}=Tt,Ae=(0,d.wW)(Ie),nt={defaults:{},overrides:[{matcher:{id:ne.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:ve.h2.JSONView}]}]};if(!Be)return null;const{data:ct,ruleType:wt}=Be;return ct.state===K.Gu.Loading?n.createElement("div",{className:Ae.container},n.createElement("span",null,"Loading preview...")):ct.state===K.Gu.Error?n.createElement("div",{className:Ae.container},ct.error?(0,M.kk)(ct.error):"Failed to preview alert rule"):n.createElement("div",{className:Ae.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",wt===b.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:Ae.table},n.createElement(Z.Z,null,({width:_t,height:Nt})=>n.createElement("div",{style:{width:`${_t}px`,height:`${Nt}px`}},n.createElement(re.$,{title:"",width:_t,height:Nt,pluginId:"table",data:ct,fieldConfig:nt})))))}function Ie(Tt){return{container:t.css`
      margin: ${Tt.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${Tt.spacing(2)};
      border: 1px solid ${Tt.colors.border.medium};
      border-radius: ${Tt.shape.borderRadius(1)};
    `}}const Ge=["type","dataSourceName","condition","queries","expression"];function gt(){const Tt=(0,d.wW)(it),[Be,Ae]=Te(),{watch:nt}=(0,o.Gc)(),[ct,wt,_t]=nt(["type","condition","queries"]),{allDataSourcesAvailable:Nt}=(0,fe.S)(_t);if(ct===b.$.cloudRecording||ct===b.$.cloudAlerting)return null;const at=Boolean(wt)&&Nt;return n.createElement("div",{className:Tt.container},n.createElement(a.Lh,null,Nt&&n.createElement(u.zx,{disabled:!at,type:"button",variant:"primary",onClick:Ae},"Preview alerts"),!Nt&&n.createElement(N.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(me,{preview:Be}))}function Te(){const[Tt,Be]=(0,n.useState)(),{getValues:Ae}=(0,o.Gc)(),nt=(0,R.Z)(),ct=(0,n.useCallback)(()=>{const wt=Ae(Ge),_t=Le(wt);ee(_t).pipe((0,F.o)(Nt=>!Ye(Nt),!0)).subscribe(Nt=>{nt()&&Be(Nt)})},[Ae,nt]);return[Tt,ct]}function Le(Tt){const[Be,Ae,nt,ct,wt]=Tt,_t=(0,L.F)().getInstanceSettings(Ae);if(!_t)throw new Error(`Cannot find data source settings for ${Ae}`);switch(Be){case b.$.cloudAlerting:return{dataSourceUid:_t.uid,dataSourceName:Ae,expr:wt};case b.$.grafana:return{grafana_condition:{condition:nt,data:ct,now:(0,B.lf)(Date.now())}};default:throw new Error(`Alert type ${Be} not supported by preview.`)}}function Ye(Tt){switch(Tt.data.state){case K.Gu.Done:case K.Gu.Error:return!0;default:return!1}}function it(Tt){return{container:t.css`
      margin-top: ${Tt.spacing(2)};
      max-width: ${Tt.breakpoints.values.xxl}px;
    `}}var ht=e(36894);const Re=()=>{const Tt=(0,d.wW)(ye),{register:Be,control:Ae,watch:nt,formState:{errors:ct}}=(0,o.Gc)();return nt("type")===b.$.cloudRecording?null:n.createElement(ht.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(r.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:Tt.flexRow},n.createElement(r.g,{invalid:!!ct.forTime?.message,error:ct.forTime?.message,className:Tt.inlineField},n.createElement(c.I,{...Be("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(T.g,{name:"forTimeUnit",render:({field:{onChange:_t,ref:Nt,...at}})=>n.createElement(S.Ph,{...at,options:U.qr,onChange:An=>_t(An?.value),width:15,className:Tt.timeUnit}),control:Ae}))),n.createElement(gt,null))},ye=Tt=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${Tt.spacing(.5)};
  `});var Ce=e(16808),be=e(20700);const We=({rulesSourceName:Tt})=>{const{control:Be,watch:Ae,formState:{errors:nt},setValue:ct}=(0,o.Gc)(),wt=(0,d.wW)(Qe),_t=(0,D._)($n=>$n.rulerRules),Nt=(0,C.useDispatch)();(0,n.useEffect)(()=>{Nt((0,P.UR)({rulesSourceName:Tt}))},[Tt,Nt]);const at=_t[Tt]?.result,An=Ae("namespace"),Fn=(0,n.useMemo)(()=>at?Object.keys(at).map($n=>({label:$n,value:$n})):[],[at]),Gn=(0,n.useMemo)(()=>An&&at?.[An]?.map($n=>({label:$n.name,value:$n.name}))||[],[An,at]);return n.createElement("div",{className:wt.flexRow},n.createElement(r.g,{"data-testid":"namespace-picker",label:"Namespace",error:nt.namespace?.message,invalid:!!nt.namespace?.message},n.createElement(T.g,{render:({field:{onChange:$n,ref:Ra,...ts}})=>n.createElement(S.LT,{...ts,allowCustomValue:!0,className:wt.input,onChange:Ps=>{ct("group",""),$n(Ps.value)},options:Fn,width:42}),name:"namespace",control:Be,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:be.p0}}})),n.createElement(r.g,{"data-testid":"group-picker",label:"Group",error:nt.group?.message,invalid:!!nt.group?.message},n.createElement(T.g,{render:({field:{ref:$n,...Ra}})=>n.createElement(S.LT,{...Ra,allowCustomValue:!0,options:Gn,width:42,onChange:ts=>{ct("group",ts.value??"")},className:wt.input}),name:"group",control:Be,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:be.p0}}})))},Qe=Tt=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${Tt.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function mt(Tt){if(Tt===b.$.cloudRecording)return"Select the Namespace and Group for your recording rule.";const Be="https://grafana.com/docs/grafana/latest/alerting/fundamentals/annotation-label/variables-label-annotation",Ae=()=>n.createElement("span",null,"Click"," ",n.createElement("a",{href:Be,target:"_blank",rel:"noreferrer"},"here"," "),"for documentation on how to template annotations and labels.");return Tt===b.$.grafana?n.createElement("span",null," ","Write a summary to help you better manage your alerts. ",n.createElement(Ae,null)):Tt===b.$.cloudAlerting?n.createElement("span",null," ","Select the Namespace and evaluation group for your alert. Write a summary to help you better manage your alerts."," "):""}function vt(){const{watch:Tt}=(0,o.Gc)(),Be=Tt("type"),Ae=Tt("dataSourceName"),nt=Tt("type");return n.createElement(ht.z,{stepNo:nt===b.$.cloudRecording?3:4,title:nt===b.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:mt(nt)},(Be===b.$.cloudRecording||Be===b.$.cloudAlerting)&&Ae&&n.createElement(We,{rulesSourceName:Ae}),nt!==b.$.cloudRecording&&n.createElement(Ce.Z,null))}var rt=e(56412),Ot=e(72948),Et=e(29460),Mt=e(19191);const ue=()=>{const Tt=(0,d.wW)(Ne),{watch:Be,getValues:Ae}=(0,o.Gc)(),nt=Be("type"),ct=Be("dataSourceName")??ce.GC,wt=De(Ae("labels")).length>0;return n.createElement(ht.z,{stepNo:nt===b.$.cloudRecording?4:5,title:nt===b.$.cloudRecording?"Labels":"Notifications",description:nt===b.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:Tt.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!wt&&nt!==b.$.cloudRecording&&n.createElement(Ot.Z,{className:Tt.card},n.createElement(Ot.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(Ot.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(Et.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(Mt.Z,{dataSourceName:ct}))))};function De(Tt){return Tt.filter(Be=>Be.key&&Be.value)}const Ne=Tt=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${Tt.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${Tt.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${Tt.spacing(3)};
  `});var tt=e(20091),et=e(30979),Ue=e(72142),Fe=e(79841),Ee=e(61860),Me=e(39904),He=e(9405),Ze=e(79662);const lt=[{label:"Yaml",value:"yaml"}],bt=({onClose:Tt})=>{const[Be,Ae]=(0,n.useState)("yaml"),{setValue:nt}=(0,o.Gc)(),ct=(0,d.wW)(st),wt=_t=>{for(const Nt in _t)nt(Nt,_t[Nt]);Tt()};return n.createElement(et.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:ct.subtitle},n.createElement(Pt,{setActiveTab:Ae,activeTab:Be})),onClose:Tt},Be==="yaml"&&n.createElement(Je,{onSubmit:wt}))},Pt=({activeTab:Tt,setActiveTab:Be})=>n.createElement(Ue.J,null,lt.map((Ae,nt)=>n.createElement(Fe.O,{key:`${Ae.value}-${nt}`,label:Ae.label,value:Ae.value,onChangeTab:()=>Be(Ae.value),active:Tt===Ae.value}))),Je=({onSubmit:Tt})=>{const Be=(0,d.wW)(Xe),{getValues:Ae}=(0,o.Gc)(),nt=(0,x.yh)(Ae()),[ct,wt]=(0,n.useState)((0,tt.$w)(nt)),_t=()=>{const Nt=(0,tt.zD)(ct),at=Ae(),An=Ve(Nt);Tt({...at,...An})};return n.createElement(n.Fragment,null,n.createElement("div",{className:Be.applyButton},n.createElement(u.zx,{type:"button",onClick:_t},"Apply"),n.createElement(Ee.u,{content:n.createElement(Dt,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(Me.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:Be.content},n.createElement(Z.Z,{disableWidth:!0},({height:Nt})=>n.createElement(He.p,{width:"100%",height:Nt,language:"yaml",value:ct,onBlur:wt,monacoOptions:{minimap:{enabled:!1}}}))))};function Dt(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function Ve(Tt){return(0,Ze.cG)(Tt)?(0,x.WL)(Tt):(0,Ze.yF)(Tt)?(0,x.lN)(Tt):{}}const Xe=Tt=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${Tt.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${Tt.spacing(2)};
  `}),st=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var ut=e(68183),xt=e(26418),Kt=e(75e3);function Jt(){const Tt=(0,D._)(Ae=>Ae.dataSources);return Object.values(Tt).map(Ae=>Ae.result).filter(Ae=>Boolean(Ae?.rulerConfig)).map(Ae=>(0,ce.c$)(Ae.name)).filter(Ae=>Boolean(Ae))}var On=e(82897),Nn=e(59679),jn=e(47956),ya=e(206),Lt=e(34807),ft=e(61893),Ht=e(45608),$t=e(46063);function zt({fields:Tt}){const Be=Tt.filter(Nt=>!["State","Info"].includes(Nt.name)),Ae=Tt.findIndex(Nt=>Nt.name==="State"),nt=Tt.findIndex(Nt=>Nt.name==="Info"),ct=Be.map(Nt=>Tt.indexOf(Nt)),wt=Tt[Ae]?.values.length??0,_t=[];for(let Nt=0;Nt<wt;Nt++){const at=ct.map(Gn=>[Tt[Gn].name,Tt[Gn].values[Nt]]),An=Tt[Ae]?.values?.[Nt],Fn=Tt[nt]?.values?.[Nt];(0,$t.Yb)(An)&&_t.push({state:An,info:Fn,labels:Object.fromEntries(at)})}return{instances:_t}}function Wt({preview:Tt}){const Be=(0,d.wW)(jt),Ae=zt(Tt);return n.createElement("table",{className:Be.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,Ae.instances.map(({state:nt,info:ct,labels:wt},_t)=>{const Nt=(0,ft.P3)(wt);return n.createElement("tr",{key:_t},n.createElement("td",null,n.createElement(Ht.l,{state:nt})),n.createElement("td",null,n.createElement(Lt.P,{tags:Nt,className:Be.tagList})),n.createElement("td",null,ct&&n.createElement(Ee.u,{content:ct},n.createElement(Me.J,{name:"info-circle"}))))})))}const jt=Tt=>({table:t.css`
    width: 100%;
    margin: ${Tt.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${Tt.colors.text.primary};

      & > span {
        font-size: ${Tt.typography.bodySmall.fontSize};
        color: ${Tt.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${Tt.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${Tt.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${Tt.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),sn=({value:Tt,onChange:Be,dataSourceName:Ae,showPreviewAlertsButton:nt=!0})=>{const ct=(0,d.wW)(pn),{mapToValue:wt,mapToQuery:_t}=Pn(Ae),Nt=_t({refId:"A",hide:!1},Tt),{error:at,loading:An,value:Fn}=(0,Nn.Z)(()=>(0,L.F)().get(Ae),[Ae]),Gn=(0,n.useCallback)(as=>{Be(wt(as))},[Be,wt]),[$n,Ra]=Te(),ts=async()=>{Ra()};if(An||Fn?.name!==Ae)return null;const Ps=(0,L.F)().getInstanceSettings(Ae);if(at||!Fn||!Fn?.components?.QueryEditor||!Ps){const as=at?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",as)}const vs=$n?.data.state===K.Gu.Done,Es=Fn?.components?.QueryEditor,ma=$n?.data?.series?.find(as=>as.name==="evaluation results"),ba=ma&&ma.fields.some(as=>as.values.length>0);return n.createElement(n.Fragment,null,n.createElement(jn.n,{instanceSettings:Ps},n.createElement(Es,{query:Nt,queries:[Nt],app:ya.zj.CloudAlerting,onChange:Gn,onRunQuery:On.noop,datasource:Fn})),nt&&n.createElement("div",{className:ct.preview},n.createElement(u.zx,{type:"button",onClick:ts,disabled:$n?.data.state===K.Gu.Loading},"Preview alerts"),vs&&!ba&&n.createElement(N.b,{title:"Alerts preview",severity:"info",className:ct.previewAlert},"There are no firing alerts for your query."),ba&&n.createElement(Wt,{preview:ma})))},pn=Tt=>({preview:t.css`
    padding: ${Tt.spacing(2,0)};
    max-width: ${Tt.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${Tt.spacing(1,0)};
  `});function Pn(Tt){return(0,n.useMemo)(()=>{switch((0,L.F)().getInstanceSettings(Tt)?.type){case"loki":case"prometheus":return{mapToValue:Ae=>Ae.expr,mapToQuery:(Ae,nt)=>({...Ae,expr:nt})};default:throw new Error(`${Tt} is not supported as an expression editor`)}},[Tt])}var Mn=e(97201);const Cn=({condition:Tt,onSetCondition:Be,queries:Ae,panelData:nt,onUpdateRefId:ct,onRemoveExpression:wt,onUpdateExpressionType:_t,onUpdateQueryExpression:Nt})=>{const at=(0,n.useMemo)(()=>Ae.reduce((An,Fn)=>(0,Kt.j)(Fn.model)?An.concat(Fn.model):An,[]),[Ae]);return n.createElement(xt.Stack,{direction:"row",alignItems:"stretch"},at.map(An=>{const Fn=nt[An.refId],Gn=Tt===An.refId,$n=Gn&&Fn?(0,be.Vp)(Fn.series):void 0,Ra=Gn&&Fn?(0,be.Yq)(Fn.series):void 0;return n.createElement(Mn.A2,{key:An.refId,isAlertCondition:Gn,data:Fn,error:$n,warning:Ra,queries:Ae,query:An,onSetCondition:Be,onRemoveExpression:wt,onUpdateRefId:ct,onUpdateExpressionType:_t,onChangeQuery:Nt})}))};var Hn=e(36826),_n=e(67254),oa=e(91162),Gt=e(19115),Bt=e(19426),on=e(36584),rn=e(50362),In=e(78679);const Ln=43200,Un=({data:Tt,error:Be,dsSettings:Ae,index:nt,onChangeDataSource:ct,onChangeQuery:wt,onChangeTimeRange:_t,onRunQueries:Nt,onRemoveQuery:at,onDuplicateQuery:An,query:Fn,queries:Gn,thresholds:$n,thresholdsType:Ra,onChangeThreshold:ts,condition:Ps,onSetCondition:vs,onChangeQueryOptions:Es})=>{const ma=(0,d.wW)(ha),[ba,as]=(0,n.useState)(),ms=ba?.getDefaultQuery?ba.getDefaultQuery(ya.zj.UnifiedAlerting):{};function Ya(){const ws=(0,d.wW)(ha);return n.createElement("div",{className:ws.dsTooltip},n.createElement(Ee.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(Me.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function Is({query:ws,error:Gs,index:Ir}){const $e={maxDataPoints:{maxDataPoints:ws.model.maxDataPoints}.maxDataPoints};return n.createElement(xt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Ya,null),_t&&n.createElement(Gt.x,{timeRange:ws.relativeTimeRange??(0,oe.Rr)(),onChange:kt=>_t(kt,Ir)}),n.createElement("div",{className:ma.queryOptions},n.createElement(da,{options:$e,onChange:kt=>Es(kt,Ir)})),n.createElement(rn._,{onSetCondition:()=>vs(ws.refId),enabled:Ps===ws.refId,error:Gs}))}return n.createElement(xt.Stack,{direction:"column",gap:.5},n.createElement("div",{className:ma.wrapper},n.createElement(on.x,{alerting:!0,dataSource:Ae,onDataSourceLoaded:as,onChangeDataSource:ws=>ct(ws,nt),id:Fn.refId,index:nt,key:Fn.refId,data:Tt,query:{...ms,...(0,On.cloneDeep)(Fn.model)},onChange:ws=>wt(ws,nt),onRemoveQuery:at,onAddQuery:()=>An((0,On.cloneDeep)(Fn)),onRunQuery:Nt,queries:Gn,renderHeaderExtras:()=>n.createElement(Is,{query:Fn,index:nt,error:Be}),app:ya.zj.UnifiedAlerting,hideDisableQuery:!0})),Tt.state!==K.Gu.NotStarted&&n.createElement(In.l,{data:Tt,thresholds:$n,thresholdsType:Ra,onThresholdsChange:ts?ws=>ts(ws,nt):void 0}))},qn=({children:Tt})=>{const Be=(0,d.wW)(ha);return n.createElement("div",{className:Be.wrapper},Tt)};function da({options:Tt,onChange:Be}){const Ae=Tt.maxDataPoints??"",nt=ct=>{const wt=parseInt(ct.target.value,10),_t=isNaN(wt)||wt===0?void 0:wt;_t!==Tt.maxDataPoints&&Be({...Tt,maxDataPoints:_t})};return n.createElement(xt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Bt.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(c.I,{type:"number",className:"width-6",placeholder:Ln.toLocaleString(),spellCheck:!1,onBlur:nt,defaultValue:Ae}))}const ha=Tt=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${Tt.spacing(1)};
    border: 1px solid ${Tt.colors.border.medium};
    border-radius: ${Tt.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${Tt.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class Ta extends n.PureComponent{constructor(Be){super(Be),this.onRemoveQuery=Ae=>{const{queries:nt,onQueriesChange:ct}=this.props;ct(nt.filter(wt=>wt.refId!==Ae.refId))},this.onChangeTimeRange=(Ae,nt)=>{const{queries:ct,onQueriesChange:wt}=this.props;wt(ct.map((_t,Nt)=>Nt!==nt?_t:{..._t,relativeTimeRange:Ae}))},this.onChangeQueryOptions=(Ae,nt)=>{const{queries:ct,onQueriesChange:wt}=this.props;wt(ct.map((_t,Nt)=>Nt!==nt?_t:{..._t,model:{..._t.model,maxDataPoints:Ae.maxDataPoints}}))},this.onChangeDataSource=(Ae,nt)=>{const{queries:ct,onQueriesChange:wt}=this.props,_t=ct.map((Nt,at)=>{if(at!==nt)return Nt;const An=this.getDataSourceSettings(Nt);return Ae.type===An?.type?Wa(Nt,Ae):cs(Nt,Ae)});wt(_t)},this.onChangeQuery=(Ae,nt)=>{const{queries:ct,onQueriesChange:wt}=this.props;wt(ct.map((_t,Nt)=>Nt!==nt?_t:{..._t,refId:Ae.refId,queryType:_t.model.queryType??"",model:{..._t.model,...Ae,datasource:Ae.datasource}}))},this.onDragEnd=Ae=>{const{queries:nt,onQueriesChange:ct}=this.props;if(!Ae||!Ae.destination)return;const wt=Ae.source.index,_t=Ae.destination.index;if(wt===_t)return;const Nt=Array.from(nt),[at]=Nt.splice(wt,1);Nt.splice(_t,0,at),ct(Nt)},this.getDataSourceSettings=Ae=>(0,L.F)().getInstanceSettings(Ae.datasourceUid)}render(){const{queries:Be,expressions:Ae}=this.props,nt=(0,be.Fu)([...Be,...Ae]);return n.createElement(Hn.Z5,{onDragEnd:this.onDragEnd},n.createElement(Hn.bK,{droppableId:"alerting-queries",direction:"vertical"},ct=>n.createElement("div",{ref:ct.innerRef,...ct.droppableProps},Be.map((wt,_t)=>{const Nt=this.props.data?.[wt.refId]??{series:[],state:K.Gu.NotStarted},at=this.getDataSourceSettings(wt),Fn=this.props.condition===wt.refId?(0,be.Vp)(Nt.series):void 0;return at?n.createElement(Un,{index:_t,key:wt.refId,dsSettings:at,data:Nt,error:Fn,query:wt,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:Be,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:nt[wt.refId]?.config,thresholdsType:nt[wt.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(is,{key:`${wt.refId}-${_t}`,index:_t,model:wt.model,onUpdateDatasource:()=>{const Gn=(0,oa.ak)().getInstanceSettings(null);Gn&&this.onChangeDataSource(Gn,_t)},onRemoveQuery:()=>{this.onRemoveQuery(wt)}})}),ct.placeholder)))}}function Wa(Tt,Be){return{...Tt,model:{...(0,On.omit)(Tt.model,"datasource"),datasource:{type:Be.type,uid:Be.uid}},datasourceUid:Be.uid}}function cs(Tt,Be){return{refId:Tt.refId,relativeTimeRange:Tt.relativeTimeRange,queryType:"",datasourceUid:Be.uid,model:{refId:Tt.refId,hide:!1,datasource:{type:Be.type,uid:Be.uid}}}}const is=({index:Tt,onUpdateDatasource:Be,onRemoveQuery:Ae,model:nt})=>{const ct=nt.refId,[wt,_t]=(0,n.useState)(!1),Nt=()=>{_t(An=>!An)},at=()=>{Be()};return n.createElement(qn,null,n.createElement(_n.t,{title:ct,draggable:!0,index:Tt,id:ct,isOpen:!0},n.createElement(Ot.Z,null,n.createElement(Ot.Z.Heading,null,"This datasource has been removed"),n.createElement(Ot.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(Ot.Z.Figure,null,n.createElement(Me.J,{name:"question-circle"})),n.createElement(Ot.Z.Actions,null,n.createElement(u.zx,{key:"update",variant:"secondary",onClick:at},"Update datasource"),n.createElement(u.zx,{key:"remove",variant:"destructive",onClick:Ae},"Remove query")),n.createElement(Ot.Z.SecondaryActions,null,n.createElement(u.zx,{key:"details",onClick:Nt,icon:wt?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),wt&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(nt,null,2))))))},Ha=({queries:Tt,expressions:Be,panelData:Ae,onRunQueries:nt,onChangeQueries:ct,onDuplicateQuery:wt,condition:_t,onSetCondition:Nt})=>{const at=(0,d.wW)($a);return n.createElement("div",{className:at.container},n.createElement(Ta,{data:Ae,queries:Tt,expressions:Be,onRunQueries:nt,onQueriesChange:ct,onDuplicateQuery:wt,condition:_t,onSetCondition:Nt}))},$a=Tt=>({container:t.css`
    background-color: ${Tt.colors.background.primary};
    height: 100%;
    max-width: ${Tt.breakpoints.values.xxl}px;
  `});var ss=e(85596),Oa=e(19349);const Ia=({queries:Tt,onChangeQuery:Be,runQueries:Ae,panelData:nt,dataSourceName:ct})=>{const[wt,_t]=(0,n.useState)({series:[],state:ss.Gu.NotStarted,timeRange:(0,Oa.$t)().timeRange()}),Nt=(0,d.wW)(ys);(0,n.useEffect)(()=>{_t(nt?.[Tt[0]?.refId])},[nt,Tt]);const{error:at,loading:An,value:Fn}=(0,Nn.Z)(()=>(0,L.F)().get(ct),[ct]),Gn=ts=>{const Ps=Tt[0],vs=(0,L.F)().getInstanceSettings(ct)?.uid;if(!(0,x.tO)(ts)||!vs)return;const Es=ts.expr,ma={...Ps,refId:ts.refId,queryType:ts.queryType??"",datasourceUid:vs,expr:Es,model:{refId:ts.refId,expr:Es,editorMode:"code"}};Be([ma])};if(An||Fn?.name!==ct)return null;const $n=(0,L.F)().getInstanceSettings(ct);if(at||!Fn||!Fn?.components?.QueryEditor||!$n){const ts=at?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",ts)}const Ra=Fn.components.QueryEditor;return n.createElement(n.Fragment,null,Tt.length&&n.createElement(Ra,{query:Tt[0],queries:Tt,app:ya.zj.UnifiedAlerting,onChange:Gn,onRunQuery:Ae,datasource:Fn}),wt&&n.createElement("div",{className:Nt.vizWrapper},n.createElement(In.l,{data:wt})))},ys=Tt=>({vizWrapper:t.css`
    margin: ${Tt.spacing(1,0)};
  `});var la=e(82002),Ts=e(53117),bs=e(3153);function ds({value:Tt,...Be}){const Ae=Jt(),{loading:nt=!0}=(0,Nn.Z)(()=>(0,bs.WI)((0,P.dV)()),[bs.WI]),ct=(0,n.useCallback)(wt=>!!Ae.find(({id:_t})=>_t===wt.id),[Ae]);return n.createElement(Ts.q,{disabled:nt,isLoading:nt,noDefault:!0,alerting:!0,filter:ct,current:Tt,...Be})}const Us=Tt=>{const{name:Be,description:Ae,image:nt,selected:ct=!1,value:wt,onClick:_t,disabled:Nt=!1}=Tt,at=(0,d.wW)(Za),An=(0,t.cx)({[at.wrapper]:!0,[at.disabled]:Nt});return n.createElement(Ot.Z,{className:An,isSelected:ct,onClick:()=>_t(wt),disabled:Nt},n.createElement(Ot.Z.Figure,null,n.createElement("img",{src:nt,alt:""})),n.createElement(Ot.Z.Heading,null,Be),n.createElement(Ot.Z.Description,null,Ae))},Za=Tt=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),Ks=({selected:Tt=!1,disabled:Be,onClick:Ae})=>n.createElement(Us,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:Tt,disabled:Be,value:b.$.grafana,onClick:Ae}),dn=({children:Tt,visible:Be=!1})=>Be?n.createElement(Ee.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,Tt)):n.createElement(n.Fragment,null,Tt),ln=({selected:Tt=!1,disabled:Be=!1,onClick:Ae})=>n.createElement(dn,{visible:Be},n.createElement(Us,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:Tt,disabled:Be,value:b.$.cloudAlerting,onClick:Ae})),Tn=({selected:Tt=!1,disabled:Be=!1,onClick:Ae})=>n.createElement(dn,{visible:Be},n.createElement(Us,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:Tt,disabled:Be,value:b.$.cloudRecording,onClick:Ae})),zn=({selected:Tt,onChange:Be,enabledTypes:Ae})=>{const nt=Jt(),ct=!(0,On.isEmpty)(nt);(0,n.useEffect)(()=>{(0,bs.WI)((0,P.dV)())},[]);const wt=(0,d.wW)(ga);return n.createElement(n.Fragment,null,n.createElement(xt.Stack,{direction:"row",gap:2},Ae.includes(b.$.grafana)&&n.createElement(Ks,{selected:Tt===b.$.grafana,onClick:Be}),Ae.includes(b.$.cloudAlerting)&&n.createElement(ln,{selected:Tt===b.$.cloudAlerting,onClick:Be,disabled:!ct}),Ae.includes(b.$.cloudRecording)&&n.createElement(Tn,{selected:Tt===b.$.cloudRecording,onClick:Be,disabled:!ct})),Ae.includes(b.$.grafana)&&n.createElement("small",{className:wt.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},ga=Tt=>({meta:t.css`
    color: ${Tt.colors.text.disabled};
  `}),va=({editingExistingRule:Tt})=>{const{enabledRuleTypes:Be,defaultRuleType:Ae}=Ga(),{control:nt,formState:{errors:ct},getValues:wt,setValue:_t,watch:Nt}=(0,o.Gc)(),at=(0,d.wW)(qa),An=Nt("type");return n.createElement(n.Fragment,null,!Tt&&n.createElement(r.g,{error:ct.type?.message,invalid:!!ct.type?.message,"data-testid":"alert-type-picker"},n.createElement(T.g,{render:({field:{onChange:Fn}})=>n.createElement(zn,{"aria-label":"Rule type",selected:wt("type")??Ae,onChange:Fn,enabledTypes:Be}),name:"type",control:nt,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:at.flexRow},(An===b.$.cloudAlerting||An===b.$.cloudRecording)&&n.createElement(r.g,{className:at.formInput,label:"Select data source",error:ct.dataSourceName?.message,invalid:!!ct.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(T.g,{render:({field:{onChange:Fn,ref:Gn,...$n}})=>n.createElement(ds,{...$n,onChange:Ra=>{_t("location",void 0),_t("expression",""),Fn(Ra?.name??null)}}),name:"dataSourceName",control:nt,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function Ga(){const Tt=la.Vt.hasAccess(C.AccessControlAction.AlertingRuleCreate,la.Vt.hasEditPermissionInFolders),Be=la.Vt.hasAccess(C.AccessControlAction.AlertingRuleExternalWrite,la.Vt.isEditor),Ae=Tt?b.$.grafana:b.$.cloudAlerting,nt=[];return Tt&&nt.push(b.$.grafana),Be&&nt.push(b.$.cloudAlerting,b.$.cloudRecording),{enabledRuleTypes:nt,defaultRuleType:Ae}}const qa=Tt=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${Tt.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var es=e(62992),us=e(99822),hs=e(97573);const $s=Tt=>{try{return JSON.stringify(Tt),!1}catch{return!0}},tr=(Tt,Be)=>{if($s(Tt))return null;if(Be.datasourceUid!==hs.Yq)return Be;{const Ae=Tt.find(nt=>nt.refId===Be.model.expression);return Ae?tr(Tt,Ae):null}};var mr=e(47471),ur=e(51935);const sr=(Tt,Be)=>{const Ae=Tt.find(ct=>ct.refId===Be);return Ae&&tr(Tt,Ae)},er={queries:[]},ks=(0,es.PH)("duplicateQuery"),Er=(0,es.PH)("addNewDataQuery"),Vs=(0,es.PH)("setDataQueries"),Tr=(0,es.PH)("addNewExpression"),pr=(0,es.PH)("removeExpression"),yr=(0,es.PH)("updateExpression"),Cr=(0,es.PH)("updateExpressionRefId"),Or=(0,es.PH)("rewireExpressions"),fr=(0,es.PH)("updateExpressionType"),Js=(0,es.PH)("updateExpressionTimeRange"),Os=(0,es.PH)("updateMaxDataPoints"),lr=(0,es.PH)("setRecordingRulesQueries"),fn=(0,es.Lq)(er,Tt=>{Tt.addCase(ks,(Be,{payload:Ae})=>{Be.queries=qe(Be.queries,Ae)}).addCase(Er,Be=>{const Ae=(0,ce.P)();Ae&&(Be.queries=qe(Be.queries,{datasourceUid:Ae.uid,model:{refId:"",datasource:{type:Ae.type,uid:Ae.uid}}}))}).addCase(Vs,(Be,{payload:Ae})=>{const nt=Be.queries.filter(ct=>(0,Kt.j)(ct.model));Be.queries=[...Ae,...nt]}).addCase(lr,(Be,{payload:Ae})=>{const nt=Ae.recordingRuleQueries[0],ct={...nt,expr:Ae.expression,model:{expr:Ae.expression,refId:nt.model.refId}};Be.queries=[ct]}).addCase(Os,(Be,Ae)=>{Be.queries=Be.queries.map(nt=>nt.refId===Ae.payload.refId?{...nt,model:{...nt.model,maxDataPoints:Ae.payload.maxDataPoints}}:nt)}),Tt.addCase(Tr,Be=>{Be.queries=qe(Be.queries,{datasourceUid:hs.Yq,model:mr.mV.newQuery({type:hs.Us.math,conditions:[{...ur.R,query:{params:[]}}],expression:""})})}).addCase(pr,(Be,{payload:Ae})=>{Be.queries=Be.queries.filter(nt=>nt.refId!==Ae)}).addCase(yr,(Be,{payload:Ae})=>{Be.queries=Be.queries.map(nt=>{const ct=sr(Be.queries,Ae.expression),wt=ct?ct.relativeTimeRange:(0,oe.Rr)();return nt.refId===Ae.refId&&(nt.model=Ae,Ae.type===hs.Us.resample&&(nt.relativeTimeRange=wt)),nt})}).addCase(Js,Be=>{const Ae=Be.queries.map(nt=>{if(nt.datasourceUid===hs.Yq){const ct=sr(Be.queries,nt.model.expression),wt=ct?ct.relativeTimeRange:(0,oe.Rr)();nt.relativeTimeRange=wt}return nt});Be.queries=Ae}).addCase(Cr,(Be,{payload:Ae})=>{const{newRefId:nt,oldRefId:ct}=Ae;if((0,be.Dr)(Be.queries,nt))return;const _t=(0,be.Ry)(Be.queries,ct,nt);Be.queries=_t.map(Nt=>Nt.refId===ct?{...Nt,refId:nt,model:{...Nt.model,refId:nt}}:Nt)}).addCase(Or,(Be,{payload:Ae})=>{Be.queries=(0,be.Ry)(Be.queries,Ae.oldRefId,Ae.newRefId)}).addCase(fr,(Be,Ae)=>{Be.queries=Be.queries.map(nt=>nt.refId===Ae.payload.refId?{...nt,model:{...mr.mV.newQuery({type:Ae.payload.type,conditions:[{...ur.R,query:{params:[]}}],expression:""}),refId:Ae.payload.refId}}:nt)})}),qe=(Tt,Be)=>{const Ae=(0,us.Hs)(Tt),nt={...Be,refId:Ae,queryType:"",model:{...Be.model,hide:!1,refId:Ae},relativeTimeRange:Be.relativeTimeRange??Ct(Be.model)};return[...Tt,nt]},Ct=Tt=>{if(!(0,Kt.j)(Tt))return(0,oe.Rr)()};var At=e(81001);function tn(){const[Tt,Be]=(0,n.useState)({}),Ae=(0,n.useRef)(new At.v);(0,n.useEffect)(()=>{const Nt=Ae.current;return Nt.get().subscribe(at=>{Be(at)}),()=>{Nt.destroy()}},[]);const nt=(0,n.useCallback)(()=>{Be({})},[]),ct=(0,n.useCallback)(()=>{Ae.current.cancel()},[]),wt=(0,n.useCallback)(Nt=>{Ae.current.run(Nt)},[]),_t=(0,n.useMemo)(()=>Object.values(Tt).some(Nt=>Nt.state===K.Gu.Loading),[Tt]);return{queryPreviewData:Tt,runQueries:wt,cancelQueries:ct,isPreviewLoading:_t,clearPreviewData:nt}}const Rn=({editingExistingRule:Tt,onDataChange:Be})=>{const{setValue:Ae,getValues:nt,watch:ct,formState:{errors:wt},control:_t}=(0,o.Gc)(),{queryPreviewData:Nt,runQueries:at,cancelQueries:An,isPreviewLoading:Fn,clearPreviewData:Gn}=tn(),$n={queries:nt("queries")},[{queries:Ra},ts]=(0,n.useReducer)(fn,$n),[Ps,vs,Es]=ct(["type","condition","dataSourceName"]),ma=Ps===b.$.grafana,ba=Ps===b.$.cloudRecording,as=Ps===b.$.cloudAlerting,ms=Jt(),Ya=(0,n.useCallback)(()=>{at(nt("queries"))},[at,nt]);(0,n.useEffect)(()=>{Ae("queries",Ra,{shouldValidate:!1})},[Ra,at,Ae]);const Is=(0,ce.P)()===void 0,ws=(0,n.useMemo)(()=>Ra.filter(hn=>!(0,Kt.j)(hn.model)),[Ra]),Gs=(0,n.useMemo)(()=>Ra.filter(hn=>(0,Kt.j)(hn.model)),[Ra]),Ir=Ra.length===0;(0,n.useEffect)(()=>{const hn=nt("condition");if(!hn||b.$.cloudRecording)return;const Wn=(0,be.Vp)(Nt[hn]?.series||[]);Be(Wn?.message||"")},[Nt,nt,Be]);const Dr=(0,n.useCallback)(hn=>{hn&&(Ya(),Ae("condition",hn))},[Ya,Ae]),$e=(0,n.useCallback)((hn,Wn)=>{(0,be.Dr)(Ra,Wn)||(ts(Cr({oldRefId:hn,newRefId:Wn})),vs===hn&&Dr(Wn))},[vs,Ra,Dr]),kt=(0,n.useCallback)(hn=>{Ae("queries",hn,{shouldValidate:!1}),ts(Vs(hn)),ts(Js()),hn.forEach((Wn,fa)=>{const sa=Ra[fa].refId,ra=Wn.refId;sa!==ra&&ts(Or({oldRefId:sa,newRefId:ra}))})},[Ra,Ae]),Yt=(0,n.useCallback)(hn=>{const Wn=hn[0],fa=(0,L.F)().getInstanceSettings(Wn.datasourceUid);if(!fa)throw new Error("The Data source has not been defined.");if(!(0,x.tO)(Wn.model))return;const sa=Wn.model.expr;Ae("queries",hn,{shouldValidate:!1}),Ae("dataSourceName",fa.name),Ae("expression",sa),ts(lr({recordingRuleQueries:hn,expression:sa})),Ya()},[Ya,Ae]),un=ms[0];(0,n.useEffect)(()=>{if(Gn(),Ps===b.$.cloudRecording){const hn=nt("expression"),fa={refId:"A",datasourceUid:Tt&&(0,L.F)().getInstanceSettings(Es)?.uid||un.uid,queryType:"",relativeTimeRange:(0,oe.Rr)(),expr:hn,model:{refId:"A",hide:!1,expr:hn}};ts(lr({recordingRuleQueries:[fa],expression:hn}))}},[Ps,un,Tt,nt,Es,Gn]);const yn=(0,n.useCallback)(hn=>{ts(ks(hn))},[]);return(0,n.useEffect)(()=>{if(!(0,be.Dr)(Ra,vs)){const hn=Ra.at(-1)?.refId??null;Dr(hn)}},[vs,Ra,Dr]),n.createElement(ht.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(va,{editingExistingRule:Tt}),ba&&Es&&n.createElement(r.g,{error:wt.expression?.message,invalid:!!wt.expression?.message},n.createElement(Ia,{dataSourceName:Es,queries:Ra,runQueries:Ya,onChangeQuery:Yt,panelData:Nt})),as&&Es&&n.createElement(r.g,{error:wt.expression?.message,invalid:!!wt.expression?.message},n.createElement(T.g,{name:"expression",render:({field:{ref:hn,...Wn}})=>n.createElement(sn,{...Wn,dataSourceName:Es,showPreviewAlertsButton:!ba}),control:_t,rules:{required:{value:!0,message:"A valid expression is required"}}})),ma&&n.createElement(xt.Stack,{direction:"column"},n.createElement(Ha,{queries:ws,expressions:Gs,onRunQueries:Ya,onChangeQueries:kt,onDuplicateQuery:yn,panelData:Nt,condition:vs,onSetCondition:Dr}),n.createElement(Cn,{queries:Ra,panelData:Nt,condition:vs,onSetCondition:Dr,onRemoveExpression:hn=>{ts(pr(hn))},onUpdateRefId:$e,onUpdateExpressionType:(hn,Wn)=>{ts(fr({refId:hn,type:Wn}))},onUpdateQueryExpression:hn=>{ts(yr(hn))}}),n.createElement(xt.Stack,{direction:"row"},n.createElement(Ee.u,{content:"You appear to have no compatible data sources",show:Is},n.createElement(u.zx,{type:"button",icon:"plus",onClick:()=>{ts(Er())},variant:"secondary","aria-label":ut.wl.components.QueryTab.addQuery,disabled:Is},"Add query")),l.v.expressionsEnabled&&n.createElement(u.zx,{type:"button",icon:"plus",onClick:()=>{ts(Tr())},variant:"secondary"},"Add expression"),Fn&&n.createElement(u.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:An},"Cancel"),!Fn&&n.createElement(u.zx,{icon:"sync",type:"button",onClick:Ya,disabled:Ir},"Preview")),Ir&&n.createElement(N.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},Dn={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},kn=()=>{const Tt=(0,d.wW)(ja),{register:Be,watch:Ae,formState:{errors:nt}}=(0,o.Gc)(),ct=Ae("type");return n.createElement(ht.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(r.g,{className:Tt.formInput,label:"Rule name",description:"Name for the alert rule.",error:nt?.name?.message,invalid:!!nt.name?.message},n.createElement(c.I,{id:"name",...Be("name",{required:{value:!0,message:"Must enter an alert name"},pattern:ct===b.$.cloudRecording?Dn:void 0}),placeholder:"Give your alert rule a name."})))},aa="1m",Qn=({existing:Tt,prefill:Be})=>{const Ae=(0,d.wW)(ja),nt=(0,C.useDispatch)(),ct=(0,y.iG)(),[wt]=(0,v.K)(),[_t,Nt]=(0,n.useState)(!1),[at,An]=(0,n.useState)(Tt?.group.interval??aa),Fn=wt.returnTo??"/alerting/list",[Gn,$n]=(0,n.useState)(!1),Ra=(0,n.useMemo)(()=>Tt?(0,x.DQ)(Tt):Be?{...(0,x.uZ)(),...Be}:{...(0,x.uZ)(),queries:(0,x.s0)(),condition:"C",...wt.defaults?JSON.parse(wt.defaults):{},type:b.$.grafana,evaluateEvery:at},[Tt,Be,wt,at]),ts=(0,o.cI)({mode:"onSubmit",defaultValues:Ra,shouldFocusError:!0}),{handleSubmit:Ps,watch:vs}=ts,Es=vs("type"),ma=vs("dataSourceName"),ba=Boolean(Es&&(Es===b.$.grafana||!!ma)),as=(0,D._)(kt=>kt.ruleForm.saveRule)||M.oq;(0,h.x)(kt=>kt.unifiedAlerting.ruleForm.saveRule=M.oq);const[ms,Ya]=(0,n.useState)(""),Is=(kt="")=>{Ya(kt)},ws=(kt,Yt)=>{if(ms!==""){ct.error(ms);return}nt((0,P.wy)({values:{...Ra,...kt,annotations:kt.annotations?.map(({key:un,value:yn})=>({key:un.trim(),value:yn.trim()})).filter(({key:un,value:yn})=>!!un&&!!yn)??[],labels:kt.labels?.map(({key:un,value:yn})=>({key:un.trim(),value:yn.trim()})).filter(({key:un})=>!!un)??[]},existing:Tt,redirectOnSave:Yt?Fn:void 0,initialAlertRuleName:Ra.name,evaluateEvery:at}))},Gs=()=>{if(Tt){const kt=A.Zk(Tt.ruleSourceName,Tt.namespace,Tt.group.name,Tt.rule);nt((0,P.hS)(kt,{navigateTo:"/alerting/list"}))}},Ir=kt=>{Tt||(0,m.Z0)({grafana_version:l.v.buildInfo.version,org_id:E.Vt.user.orgId,user_id:E.Vt.user.id,error:Object.keys(kt).toString()}),ct.error("There are errors in the form. Please correct them and try again!")},Dr=()=>{(0,f.PN)(m.z7.cancelSavingAlertRule),Tt||(0,m.Hc)({grafana_version:l.v.buildInfo.version,org_id:E.Vt.user.orgId,user_id:E.Vt.user.id})},$e=vs("evaluateEvery");return(0,n.useEffect)(()=>An($e),[$e]),n.createElement(o.RV,{...ts},n.createElement("form",{onSubmit:kt=>kt.preventDefault(),className:Ae.form},n.createElement(a.Lh,{height:"auto",justify:"flex-end"},n.createElement(u.zx,{variant:"primary",type:"button",onClick:Ps(kt=>ws(kt,!1),Ir),disabled:as.loading},as.loading&&n.createElement(i.$,{className:Ae.buttonSpinner,inline:!0}),"Save rule"),n.createElement(u.zx,{variant:"primary",type:"button",onClick:Ps(kt=>ws(kt,!0),Ir),disabled:as.loading},as.loading&&n.createElement(i.$,{className:Ae.buttonSpinner,inline:!0}),"Save rule and exit"),n.createElement(s.Link,{to:Fn},n.createElement(u.zx,{variant:"secondary",disabled:as.loading,type:"button",onClick:Dr},"Cancel")),Tt?n.createElement(u.zx,{variant:"destructive",type:"button",onClick:()=>$n(!0)},"Delete"):null,ia(vs)&&n.createElement(u.zx,{variant:"secondary",type:"button",onClick:()=>Nt(!0),disabled:as.loading},"Edit YAML")),n.createElement("div",{className:Ae.contentOuter},n.createElement(p.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:Ae.contentInner},n.createElement(kn,null),n.createElement(Rn,{editingExistingRule:!!Tt,onDataChange:Is}),ba&&n.createElement(n.Fragment,null,Es===b.$.grafana?n.createElement(rt.wO,{initialFolder:Ra.folder,evaluateEvery:at,setEvaluateEvery:An,existing:Boolean(Tt)}):n.createElement(Re,null),n.createElement(vt,null),n.createElement(ue,null)))))),Gn?n.createElement(g.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Gs,onDismiss:()=>$n(!1)}):null,_t?n.createElement(bt,{onClose:()=>Nt(!1)}):null)},ia=Tt=>{const[Be,Ae]=Tt(["type","dataSourceName"]);return(Be===b.$.cloudAlerting||Be===b.$.cloudRecording)&&Ae!==""},ja=Tt=>({buttonSpinner:t.css`
      margin-right: ${Tt.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${Tt.spacing(2)};
    `,contentOuter:t.css`
      background: ${Tt.colors.background.primary};
      border: 1px solid ${Tt.colors.border.weak};
      border-radius: ${Tt.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${Tt.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${Tt.spacing(3)};
      }
    `})},16808:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>L});var t=e(9892),n=e(39493),o=e(66111),s=e(66698),l=e(95831),f=e(26418),d=e(72648),r=e(64353),c=e(46967),a=e(97379),u=e(24799),i=e(63619),p=e(31403),g=e(37190),y=e(8581);const E=({value:N,onChange:z,options:G,className:I,placeholder:V,width:H,custom:Q,onCustomChange:oe,disabled:se=!1,addLabel:ie="+ Add new","aria-label":j,getOptionLabel:de})=>{const[ce,ee]=(0,o.useState)(Q);(0,o.useEffect)(()=>{ee(Q)},[Q]);const le=(0,o.useMemo)(()=>[...G,{value:"__add__",label:ie}],[G,ie]),q=(0,o.useRef)(null);return(0,o.useEffect)(()=>{q.current&&ce&&q.current.focus()},[ce]),ce?o.createElement(c.I,{"aria-label":j,width:H,autoFocus:!Q,value:N||"",placeholder:V,className:I,disabled:se,ref:q,onChange:fe=>z(fe.currentTarget.value)}):o.createElement(y.Ph,{"aria-label":j,width:H,options:le,value:N,className:I,placeholder:V,getOptionLabel:de,disabled:se,onChange:fe=>{const Z=fe?.value;Z==="__add__"?(ee(!0),oe&&oe(!0),z("")):z(Z)}})},h=({value:N,existingKeys:z,"aria-label":G,...I})=>{const V=(0,o.useMemo)(()=>Object.values(g.q6).filter(H=>!z.includes(H)).map(H=>({value:H,label:g.vY[H]})),[z]);return o.createElement(E,{"aria-label":G,value:N,options:V,custom:!!N&&!Object.values(g.q6).includes(N),...I})};var v=e(93006),C=e(89050),m=e(32436),D=e(39904),P=e(61860),b=e(35029),M=e(45253),x=e(14747),A=e(61744),T=e(29427);const S=T.C.injectEndpoints({endpoints:N=>({search:N.query({query:({query:z})=>{const G=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return z&&G.set("query",z),{url:`/api/search?${G.toString()}`}}}),dashboard:N.query({query:({uid:z})=>({url:`/api/dashboards/uid/${z}`})})})});function U(N,z){return N.title&&z.title?N.title.localeCompare(z.title):N.title&&!z.title?1:!N.title&&z.title?-1:0}const R=({dashboardUid:N,panelId:z,isOpen:G,onChange:I,onDismiss:V})=>{const H=(0,d.wW)(F),[Q,oe]=(0,o.useState)(N),[se,ie]=(0,o.useState)(z),[j,de]=(0,o.useState)(""),[ce,ee]=(0,o.useState)(""),[le,q]=(0,o.useState)(""),{useSearchQuery:fe,useDashboardQuery:Z}=S,{currentData:ne=[],isFetching:re}=fe({query:ce}),{currentData:ve,isFetching:me}=Z({uid:Q??""},{skip:!Q}),Ie=(0,o.useCallback)(ye=>{oe(ye),ie(void 0)},[]),Ge=ve?.dashboard?.panels?.filter(ye=>typeof ye.id=="number"&&typeof ye.type=="string")?.filter(ye=>ye.title?.toLowerCase().includes(le.toLowerCase())).sort(U)??[],gt=ve?.dashboard?.panels?.find(ye=>ye.id.toString()===se),Te=(0,o.useMemo)(()=>ne.map(ye=>ye.uid).indexOf(Q??""),[ne,Q]),Le=N&&N===Q,Ye=Te>=0,it=(0,o.useCallback)(ye=>{const Ce=Te>=0;Le&&Ce&&ye?.scrollToItem(Te,"smart")},[Le,Te]);(0,v.Z)(()=>{ee(j)},500,[j]);const ht=({index:ye,style:Ce})=>{const be=ne[ye],We=Q===be.uid;return o.createElement("button",{type:"button",title:be.title,style:Ce,className:(0,t.cx)(H.rowButton,{[H.rowOdd]:ye%2===1,[H.rowSelected]:We}),onClick:()=>Ie(be.uid)},o.createElement("div",{className:(0,t.cx)(H.dashboardTitle,H.rowButtonTitle)},be.title),o.createElement("div",{className:H.dashboardFolder},o.createElement(D.J,{name:"folder"})," ",be.folderTitle??"General"))},Re=({index:ye,style:Ce})=>{const be=Ge[ye],We=be.title||"<No title>",Qe=se===be.id.toString(),mt=be.type==="graph"||be.type==="timeseries";return o.createElement("button",{type:"button",style:Ce,className:(0,t.cx)(H.rowButton,H.panelButton,{[H.rowOdd]:ye%2===1,[H.rowSelected]:Qe}),onClick:()=>ie(be.id.toString())},o.createElement("div",{className:H.rowButtonTitle,title:We},We),!mt&&o.createElement(P.u,{content:"Alert tab will be disabled for this panel. It is only supported on graph and timeseries panels"},o.createElement(D.J,{name:"exclamation-triangle",className:H.warnIcon,"data-testid":"warning-icon"})))};return o.createElement(b.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:G,onDismiss:V,className:H.modal,contentClassName:H.modalContent},!Ye&&N&&o.createElement(M.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:H.modalAlert},o.createElement("div",null,"Dashboard: ",ve?.dashboard.title," (",ve?.dashboard.uid,") in folder"," ",ve?.meta.folderTitle??"General"),Boolean(gt)&&o.createElement("div",null,"Panel: ",gt.title," (",gt.id,")")),o.createElement("div",{className:H.container},o.createElement(x.H,{value:j,onChange:de,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),o.createElement(x.H,{value:le,onChange:q,title:"Search panel",placeholder:"Search panel"}),o.createElement("div",{className:H.column},re&&o.createElement(A.u,{text:"Loading dashboards...",className:H.loadingPlaceholder}),!re&&o.createElement(C.Z,null,({height:ye,width:Ce})=>o.createElement(m.t7,{ref:it,itemSize:50,height:ye,width:Ce,itemCount:ne.length},ht))),o.createElement("div",{className:H.column},!Q&&!me&&o.createElement("div",{className:H.selectDashboardPlaceholder},o.createElement("div",null,"Select a dashboard to get a list of available panels")),me&&o.createElement(A.u,{text:"Loading dashboard...",className:H.loadingPlaceholder}),Q&&!me&&o.createElement(C.Z,null,({width:ye,height:Ce})=>o.createElement(m.t7,{itemSize:32,height:Ce,width:ye,itemCount:Ge.length},Re)))),o.createElement(b.u.ButtonRow,null,o.createElement(p.zx,{type:"button",variant:"primary",disabled:!(Q&&se),onClick:()=>{Q&&se&&I(Q,se)}},"Confirm"),o.createElement(p.zx,{type:"button",variant:"secondary",onClick:V},"Cancel")))},F=N=>{const z=(0,p.gN)(N);return{container:t.css`
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: min-content auto;
      gap: ${N.spacing(2)};
      flex: 1;
    `,column:t.css`
      flex: 1 1 auto;
    `,dashboardTitle:t.css`
      height: 22px;
      font-weight: ${N.typography.fontWeightBold};
    `,dashboardFolder:t.css`
      height: 20px;
      font-size: ${N.typography.bodySmall.fontSize};
      color: ${N.colors.text.secondary};
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      column-gap: ${N.spacing(1)};
      align-items: center;
    `,rowButton:t.css`
      ${z};
      padding: ${N.spacing(.5)};
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: left;
      white-space: nowrap;
      cursor: pointer;
      border: 2px solid transparent;

      &:disabled {
        cursor: not-allowed;
        color: ${N.colors.text.disabled};
      }
    `,rowButtonTitle:t.css`
      text-overflow: ellipsis;
      overflow: hidden;
    `,rowSelected:t.css`
      border-color: ${N.colors.primary.border};
    `,rowOdd:t.css`
      background-color: ${N.colors.background.secondary};
    `,panelButton:t.css`
      display: flex;
      gap: ${N.spacing(1)};
      justify-content: space-between;
      align-items: center;
    `,loadingPlaceholder:t.css`
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    `,selectDashboardPlaceholder:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      font-weight: ${N.typography.fontWeightBold};
    `,modal:t.css`
      height: 100%;
    `,modalContent:t.css`
      flex: 1;
      display: flex;
      flex-direction: column;
    `,modalAlert:t.css`
      flex-grow: 0;
    `,warnIcon:t.css`
      fill: ${N.colors.warning.main};
    `}},B=()=>{const N=(0,d.wW)(K),[z,G]=(0,l.Z)(!1),{control:I,register:V,watch:H,formState:{errors:Q},setValue:oe}=(0,s.Gc)(),se=H("annotations"),ie=(0,o.useCallback)(fe=>se.filter((Z,ne)=>ne!==fe).map(({key:Z})=>Z),[se]),{fields:j,append:de,remove:ce}=(0,s.Dq)({control:I,name:"annotations"}),ee=se.find(fe=>fe.key===g.q6.dashboardUID)?.value,le=se.find(fe=>fe.key===g.q6.panelID)?.value,q=(fe,Z)=>{const ne=(0,n.ZP)(se,re=>{const ve=re.find(Ie=>Ie.key===g.q6.dashboardUID),me=re.find(Ie=>Ie.key===g.q6.panelID);ve?ve.value=fe:re.push({key:g.q6.dashboardUID,value:fe}),me?me.value=Z:re.push({key:g.q6.panelID,value:Z})});oe("annotations",ne),G(!1)};return o.createElement(o.Fragment,null,o.createElement(r._,null,"Summary and annotations"),o.createElement("div",{className:N.flexColumn},j.map((fe,Z)=>{const ne=se[Z]?.key?.toLocaleLowerCase().endsWith("url"),re=ne?c.I:a.K;return o.createElement("div",{key:fe.id,className:N.flexRow},o.createElement(u.g,{className:N.field,invalid:!!Q.annotations?.[Z]?.key?.message,error:Q.annotations?.[Z]?.key?.message,"data-testid":`annotation-key-${Z}`},o.createElement(i.g,{name:`annotations.${Z}.key`,defaultValue:fe.key,render:({field:{ref:ve,...me}})=>o.createElement(h,{...me,"aria-label":`Annotation detail ${Z+1}`,existingKeys:ie(Z),width:18}),control:I,rules:{required:{value:!!se[Z]?.value,message:"Required."}}})),o.createElement(u.g,{className:(0,t.cx)(N.flexRowItemMargin,N.field),invalid:!!Q.annotations?.[Z]?.value?.message,error:Q.annotations?.[Z]?.value?.message},o.createElement(re,{"data-testid":`annotation-value-${Z}`,className:(0,t.cx)(N.annotationValueInput,{[N.textarea]:!ne}),...V(`annotations.${Z}.value`),placeholder:ne?"https://":"Text",defaultValue:fe.value})),o.createElement(p.zx,{type:"button",className:N.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>ce(Z)}))}),o.createElement(f.Stack,{direction:"row",gap:1},o.createElement(p.zx,{className:N.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{de({key:"",value:""})}},"Add annotation"),o.createElement(p.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>G(!0)},"Set dashboard and panel")),z&&o.createElement(R,{isOpen:!0,dashboardUid:ee,panelId:le,onChange:q,onDismiss:()=>G(!1)})))},K=N=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${N.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${N.spacing(.5)};
  `}),L=B},56412:(Y,O,e)=>{"use strict";e.d(O,{wO:()=>fe,Xr:()=>j});var t=e(9892),n=e(66111),o=e(66698),s=e(26418),l=e(72648),f=e(24799),d=e(77117),r=e(46967),c=e(31403),a=e(63619),u=e(8944),i=e(61860),p=e(39904),g=e(41904),y=e(61627),E=e(69945),h=e(45849),v=e(20383),C=e(33950),m=e(61068),D=e(32139),P=e(82897),b=e(64353),M=e(61744),x=e(8581),A=e(77582),T=e(27876),S=e(72004),U=e(79662),R=e(63613),F=e(79658);const B=()=>{const ne=(0,l.wW)(N),re=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:ne.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(i.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(p.J,{name:"info-circle",size:"xs",className:ne.infoIcon,onClick:re})))},K=ne=>ne.indexOf("/")!==-1;function L(ne){const{value:re}=ne,me={warningCondition:Ge=>K(Ge),warningComponent:B},Ie={disallowValues:!0,isAllowedValue:Ge=>!K(Ge)};return n.createElement(F.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:re?.title,initialFolderUid:re?.uid,searchQueryType:T.SearchQueryType.AlertFolder,...ne,permissionLevel:T.PermissionLevelString.Edit,customAdd:Ie,folderWarning:me})}const N=ne=>({slashNotAllowed:t.css`
    color: ${ne.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${ne.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var z=e(20700);const G=1e3,I=ne=>{const ve=(0,E._)(Te=>Te.rulerRules)[h.GC];return{groupOptions:((0,y.Zo)(h.GC).find(Te=>Te.name===ne)?.groups??[]).filter(Te=>Te.rules.every(Le=>(0,U.Pc)(Le.rulerRule)&&Boolean(Le.rulerRule.grafana_alert.provenance)===!1)).map(Te=>({label:Te.name,value:Te.name,description:Te.interval??D.E})),loading:ve?.loading}};function V({initialFolder:ne}){const{formState:{errors:re},watch:ve,control:me}=(0,o.Gc)(),Ie=(0,l.wW)(H),Ge=(0,T.useDispatch)(),gt=ve("folder"),Te=ve("group"),[Le,Ye]=(0,n.useState)({label:Te,title:Te}),it=(0,n.useRef)(!0),{groupOptions:ht,loading:Re}=I(gt?.title??"");(0,n.useEffect)(()=>Ye({label:Te,title:Te}),[Te,Ye]),(0,n.useEffect)(()=>{Ge((0,S.IA)(h.GC))},[Ge]);const ye=(0,n.useCallback)(()=>{Te&&!it.current&&gt?.title&&Ye({label:"",title:""}),it.current=!1},[Te,gt?.title]),Ce=(0,n.useCallback)(mt=>ht.includes(vt=>vt.label===mt),[ht]),be=mt=>mt.slice(0,G),We=(0,n.useCallback)(async mt=>be(mt?ht.filter(rt=>(rt.label??"").toLowerCase().includes(mt.toLowerCase())):ht),[ht]),Qe=(0,n.useMemo)(()=>(0,P.debounce)(We,300,{leading:!0}),[We]);return n.createElement("div",{className:Ie.container},n.createElement(f.g,{label:n.createElement(b._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(R.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:Ie.formInput,error:re.folder?.message,invalid:!!re.folder?.message,"data-testid":"folder-picker"},n.createElement(a.g,{render:({field:{ref:mt,...vt}})=>n.createElement(L,{inputId:"folder",...vt,enableCreateNew:A.Vt.hasPermission(T.AccessControlAction.FoldersCreate),enableReset:!0,onChange:({title:rt,uid:Ot})=>{vt.onChange({title:rt,uid:Ot}),Ce(Le.value??"")||ye()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:mt=>(0,z.p0)(mt.title)}}})),n.createElement(f.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:Ie.formInput,error:re.group?.message,invalid:!!re.group?.message},n.createElement(a.g,{render:({field:{ref:mt,...vt}})=>Re?n.createElement(M.u,{text:"Loading..."}):n.createElement(x.qb,{disabled:!gt,inputId:"group",key:`my_unique_select_key__${Le?.title??""}`,...vt,invalid:Boolean(gt)&&!Le.title,loadOptions:Qe,loadingMessage:"Loading groups...",defaultOptions:ht,defaultValue:Le,getOptionLabel:rt=>`${rt.label}`,placeholder:"Evaluation group name",onChange:rt=>{vt.onChange(rt.label??"")},value:Le,allowCustomValue:!0,formatCreateLabel:rt=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:me,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:mt=>(0,z.p0)(mt)}}})))}const H=ne=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${ne.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ne.spacing(3)};
    }
  `});var Q=e(46063);const oe=[{value:Q.g0.Alerting,label:"Alerting"},{value:Q.g0.NoData,label:"No Data"},{value:Q.g0.OK,label:"OK"},{value:Q.g0.Error,label:"Error"}],se=({includeNoData:ne,includeError:re,...ve})=>{const me=(0,n.useMemo)(()=>ne?re?oe:oe.filter(Ie=>Ie.value!==Q.g0.Error):oe.filter(Ie=>Ie.value!==Q.g0.NoData),[ne,re]);return n.createElement(x.Ph,{options:me,...ve})};var ie=e(36894);const j=10,de=ne=>({required:{value:!0,message:"Required."},validate:re=>{if(re==="0")return!0;try{const ve=(0,v.nd)(re);if(ve===0)return!0;try{const me=(0,v.nd)(ne);return ve>=me?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(ve){return ve instanceof Error?ve.message:"Failed to parse duration"}}}),ce=(ne,re)=>{const{groupOptions:ve}=I(ne);return!(0,n.useCallback)(Ie=>ve.some(Ge=>Ge.label===Ie),[ve])(re)},ee=({rules:ne})=>{const{watch:re,register:ve,formState:{errors:me}}=(0,o.Gc)(),Ie=(0,l.wW)(Z),Ge="eval-every-input",[gt,Te]=re(["group","folder.title"]),Le=(ne&&ne[Te]?.find(Ye=>Ye.name===gt)?.rules)??[];return n.createElement(f.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:Ie.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(d.W,{htmlFor:Ge,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(f.g,{className:Ie.inlineField,error:me.evaluateEvery?.message,invalid:!!me.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(r.I,{id:Ge,width:8,...ve("evaluateEvery",(0,m.MD)(Le))})))))};function le({initialFolder:ne,evaluateEvery:re,setEvaluateEvery:ve}){const me=(0,l.wW)(Z),{watch:Ie,setValue:Ge}=(0,o.Gc)(),[gt,Te]=(0,n.useState)(!1),[Le,Ye]=Ie(["group","folder.title"]),ht=(0,E._)(Ot=>Ot.rulerRules)[h.GC],ye=(0,y.Zo)(h.GC).find(Ot=>Ot.name===Ye),Ce=ye?.groups.find(Ot=>Ot.name===Le),be=ce(Ye??"",Le);(0,n.useEffect)(()=>{!be&&Ce?.interval?ve(Ce.interval):(ve(D.E),Ge("evaluateEvery",D.E))},[ve,be,Ge,Ce]);const We=(Ot=!1)=>{Ot||(0,g.PN)(g.z7.leavingRuleGroupEdit),Te(!1)},Qe=()=>Te(!0),mt=ht?.loading||be||!Ye||!Le,vt={name:Ye,rulesSource:h.GC,groups:[]},rt={name:Le,interval:re,rules:[],totals:{}};return n.createElement("div",null,n.createElement(V,{initialFolder:ne}),Ye&&gt&&n.createElement(m.vq,{namespace:ye??vt,group:Ce??rt,onClose:()=>We(),intervalEditOnly:!0}),Ye&&Le&&n.createElement("div",{className:me.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:me.marginTop},be&&Le?n.createElement(ee,{rules:ht?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:me.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:me.bold},Le)," group are evaluated every"," ",n.createElement("span",{className:me.bold},re),"."),!be&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!be&&n.createElement("div",{className:me.marginTop},n.createElement(c.zx,{icon:"edit",type:"button",variant:"secondary",disabled:mt,onClick:Qe},n.createElement("span",null,"Edit evaluation group")))))))}function q({evaluateEvery:ne}){const re=(0,l.wW)(Z),{register:ve,formState:{errors:me}}=(0,o.Gc)(),Ie="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(d.W,{htmlFor:Ie,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(f.g,{className:re.inlineField,error:me.evaluateFor?.message,invalid:!!me.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(r.I,{id:Ie,width:8,...ve("evaluateFor",de(ne))})))}function fe({initialFolder:ne,evaluateEvery:re,setEvaluateEvery:ve,existing:me}){const Ie=(0,l.wW)(Z),[Ge,gt]=(0,n.useState)(!1),{watch:Te,setValue:Le}=(0,o.Gc)(),Ye=Te("isPaused");return n.createElement(ie.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(le,{initialFolder:ne,setEvaluateEvery:ve,evaluateEvery:re}),n.createElement(q,{evaluateEvery:re}),me&&n.createElement(f.g,{htmlFor:"pause-alert-switch"},n.createElement(a.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(u.r,{id:"pause-alert",onChange:it=>{Le("isPaused",it.currentTarget.checked)},value:Boolean(Ye)}),n.createElement("label",{htmlFor:"pause-alert",className:Ie.switchLabel},"Pause evaluation",n.createElement(i.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(p.J,{tabIndex:0,name:"info-circle",size:"sm",className:Ie.infoIcon})))),name:"isPaused"}))),n.createElement(C.U,{isCollapsed:!Ge,onToggle:it=>gt(!it),text:"Configure no data and error handling",className:Ie.collapseToggle}),Ge&&n.createElement(n.Fragment,null,n.createElement(f.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(a.g,{render:({field:{onChange:it,ref:ht,...Re}})=>n.createElement(se,{...Re,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:ye=>it(ye?.value)}),name:"noDataState"})),n.createElement(f.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(a.g,{render:({field:{onChange:it,ref:ht,...Re}})=>n.createElement(se,{...Re,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:ye=>it(ye?.value)}),name:"execErrState"}))))}const Z=ne=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${ne.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    margin-right: ${ne.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${ne.colors.background.secondary};
    padding: ${ne.spacing(2)};
    max-width: ${ne.breakpoints.values.sm}px;
    font-size: ${ne.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${ne.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${ne.spacing(1)};
    color: ${ne.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${ne.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${ne.spacing(1)};
    margin-left: -${ne.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${ne.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${ne.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${ne.typography.bodySmall.fontSize},
  `)})},19191:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>K});var t=e(9892),n=e(82897),o=e(66111),s=e(66698),l=e(26418),f=e(31403),d=e(72648),r=e(61744),c=e(24799),a=e(77117),u=e(46967),i=e(64353),p=e(61860),g=e(39904),y=e(27876),E=e(69945),h=e(72004),v=e(93900),C=e(8581);const m=(0,v.c)({ignoreCase:!1});function D(L,N){return m({label:L.label??"",value:L.value??"",data:{}},N)}const P=(L,N,z)=>{const G=z.some(V=>V.label===L),I=L.trim().length;return!Boolean(G)&&Boolean(I)},M=o.forwardRef(function({onChange:N,options:z,defaultValue:G,type:I,onOpenMenu:V=()=>{}},H){return o.createElement("div",{ref:H},o.createElement(c.g,{disabled:!1,"data-testid":`alertlabel-${I}-picker`},o.createElement(C.Ph,{placeholder:`Choose ${I}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:N,onOpenMenu:V,filterOption:D,isValidNewOption:P,options:z,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:G,allowCustomValue:!0})))}),x=L=>{const N=(0,y.useDispatch)();(0,o.useEffect)(()=>{N((0,h.IA)(L))},[N,L]);const G=(0,E._)(Q=>Q.rulerRules)[L],I=G?.result||{},V=(0,n.compact)((0,n.flattenDeep)(Object.keys(I).map(Q=>I[Q].map(oe=>oe.rules.map(se=>se.labels))))),H={};return V.forEach(Q=>{Object.entries(Q).forEach(([oe,se])=>{H[oe]=[...new Set([...H[oe]||[],se])]})}),{loading:G?.loading,labelsByKey:H}};function A(L=[]){return L.map(N=>({label:N,value:N}))}const T=({remove:L,className:N,index:z})=>o.createElement(f.zx,{className:N,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${z}`,variant:"secondary",onClick:()=>{L(z)}}),S=({append:L,className:N})=>o.createElement(f.zx,{className:N,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{L({key:"",value:""})}},"Add label"),U=({dataSourceName:L})=>{const N=(0,d.wW)(B),{register:z,control:G,watch:I,formState:{errors:V},setValue:H}=(0,s.Gc)(),Q=I("labels"),{fields:oe,remove:se,append:ie}=(0,s.Dq)({control:G,name:"labels"}),{loading:j,labelsByKey:de}=x(L),[ce,ee]=(0,o.useState)(""),le=(0,o.useMemo)(()=>A(Object.keys(de)),[de]),q=(0,o.useCallback)(Z=>A(de[Z]),[de]),fe=(0,o.useMemo)(()=>q(ce),[ce,q]);return o.createElement(o.Fragment,null,j&&o.createElement(r.u,{text:"Loading"}),!j&&o.createElement(o.Fragment,null,oe.map((Z,ne)=>o.createElement("div",{key:Z.id},o.createElement("div",{className:(0,t.cx)(N.flexRow,N.centerAlignRow)},o.createElement(c.g,{className:N.labelInput,invalid:Boolean(V.labels?.[ne]?.key?.message),error:V.labels?.[ne]?.key?.message,"data-testid":`label-key-${ne}`},o.createElement(M,{...z(`labels.${ne}.key`,{required:{value:Boolean(Q[ne]?.value),message:"Required."}}),defaultValue:Z.key?{label:Z.key,value:Z.key}:void 0,options:le,onChange:re=>{H(`labels.${ne}.key`,re.value),ee(re.value)},type:"key"})),o.createElement(a.W,{className:N.equalSign},"="),o.createElement(c.g,{className:N.labelInput,invalid:Boolean(V.labels?.[ne]?.value?.message),error:V.labels?.[ne]?.value?.message,"data-testid":`label-value-${ne}`},o.createElement(M,{...z(`labels.${ne}.value`,{required:{value:Boolean(Q[ne]?.key),message:"Required."}}),defaultValue:Z.value?{label:Z.value,value:Z.value}:void 0,options:fe,onChange:re=>{H(`labels.${ne}.value`,re.value)},onOpenMenu:()=>{ee(Q[ne].key)},type:"value"})),o.createElement(T,{className:N.deleteLabelButton,index:ne,remove:se})))),o.createElement(S,{className:N.addLabelButton,append:ie})))},R=()=>{const L=(0,d.wW)(B),{register:N,control:z,watch:G,formState:{errors:I}}=(0,s.Gc)(),V=G("labels"),{fields:H,remove:Q,append:oe}=(0,s.Dq)({control:z,name:"labels"});return o.createElement(o.Fragment,null,H.map((se,ie)=>o.createElement("div",{key:se.id},o.createElement("div",{className:(0,t.cx)(L.flexRow,L.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},o.createElement(c.g,{className:L.labelInput,invalid:!!I.labels?.[ie]?.key?.message,error:I.labels?.[ie]?.key?.message},o.createElement(u.I,{...N(`labels.${ie}.key`,{required:{value:!!V[ie]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${ie}`,defaultValue:se.key})),o.createElement(a.W,{className:L.equalSign},"="),o.createElement(c.g,{className:L.labelInput,invalid:!!I.labels?.[ie]?.value?.message,error:I.labels?.[ie]?.value?.message},o.createElement(u.I,{...N(`labels.${ie}.value`,{required:{value:!!V[ie]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${ie}`,defaultValue:se.value})),o.createElement(T,{className:L.deleteLabelButton,index:ie,remove:Q})))),o.createElement(S,{className:L.addLabelButton,append:oe}))},F=({className:L,dataSourceName:N})=>{const z=(0,d.wW)(B);return o.createElement("div",{className:(0,t.cx)(L,z.wrapper)},o.createElement(i._,null,o.createElement(l.Stack,{gap:.5},o.createElement("span",null,"Custom Labels"),o.createElement(p.u,{content:o.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},o.createElement(g.J,{className:z.icon,name:"info-circle",size:"sm"})))),o.createElement(o.Fragment,null,o.createElement("div",{className:z.flexRow},o.createElement(a.W,{width:18},"Labels"),o.createElement("div",{className:z.flexColumn},N&&o.createElement(U,{dataSourceName:N}),!N&&o.createElement(R,null)))))},B=L=>({icon:t.css`
      margin-right: ${L.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${L.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${L.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${L.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${L.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${L.spacing(1)};
      & + & {
        margin-left: ${L.spacing(1)};
      }
    `}),K=F},36894:(Y,O,e)=>{"use strict";e.d(O,{z:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(13393);const l=({title:d,stepNo:r,children:c,description:a})=>{const u=(0,o.wW)(f);return n.createElement("div",{className:u.parent},n.createElement("div",null,n.createElement("span",{className:u.stepNo},r)),n.createElement("div",{className:u.content},n.createElement(s.C,{label:d,className:u.fieldset},a&&n.createElement("p",{className:u.description},a),c)))},f=d=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${d.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${d.breakpoints.values.xl};
    & + & {
      margin-top: ${d.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${d.spacing(2)};
    color: ${d.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${d.spacing(4)};
    height: ${d.spacing(4)};
    line-height: ${d.spacing(4)};
    border-radius: 100%;
    text-align: center;
    color: ${d.colors.text.maxContrast};
    background-color: ${d.colors.background.canvas};
    font-size: ${d.typography.size.lg};
    margin-right: ${d.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},78679:(Y,O,e)=>{"use strict";e.d(O,{l:()=>u});var t=e(9892),n=e(66111),o=e(89050),s=e(19447),l=e(85596),f=e(72648),d=e(18271),r=e(56041),c=e(97201),a=e(20700);const u=({data:p,thresholds:g,thresholdsType:y})=>{const E=(0,f.wW)(i),h=(0,s.xI)(p.series),v=(0,a._4)(p),C=y?{mode:y}:void 0,m={from:p.timeRange.from.valueOf(),to:p.timeRange.to.valueOf()};return n.createElement("div",{className:E.wrapper},n.createElement(o.Z,{disableHeight:!0},({width:D})=>n.createElement("div",{style:{width:D}},h?n.createElement(r.F,{loading:p.state===l.Gu.Loading,statusMessage:v,data:p.series,eventBus:d.Z,height:300,width:D,absoluteRange:m,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:p.state,thresholdsConfig:g,thresholdsStyle:C}):n.createElement("div",{className:E.instantVectorResultWrapper},n.createElement("header",{className:E.title},"Table"),n.createElement(c.bw,{series:p.series})))))},i=p=>({wrapper:t.css`
    width: 100%;
    position: relative;
  `,instantVectorResultWrapper:t.css`
    border: solid 1px ${p.colors.border.medium};
    border-radius: ${p.shape.borderRadius()};
    padding: 0;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
  `,title:(0,t.css)({label:"panel-title",padding:p.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:p.typography.h6.fontSize,fontWeight:p.typography.h6.fontWeight})})},20700:(Y,O,e)=>{"use strict";e.d(O,{p0:()=>P,Vp:()=>b,_4:()=>T,Fu:()=>x,Ry:()=>C,Dr:()=>D,Yq:()=>M});var t=e(19447),n=e(69098),o=e(40538),s=e(85596),l=e(47694),f=e(67162),d=e(75e3),r=e(97573),c=e(82897),a=e(58635),u=e(28630);const i=(0,a.Z)(p,(S,U)=>v(S[0])===v(U[0]));function p(S){const U=new u.kJ,R=S.map(F=>F.refId);return U.createNodes(R),S.forEach(F=>{const B=F.refId;((0,d.j)(F.model)&&F.model.type==="math"?g(F.model.expression??""):[F.model.expression]).forEach(N=>{B&&N&&!(B===N)&&U.link(N,B)})}),U}function g(S){const U=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),R=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),F=Array.from(S.matchAll(U)).map(K=>K.groups?.var),B=Array.from(S.matchAll(R)).map(K=>K.groups?.var);return(0,c.compact)((0,c.uniq)([...F,...B]))}const y=(0,c.memoize)(E,(S,U)=>S+h(U));function E(S,U){const R=U.getNode(S);let F=[];function B(K){const L=K.inputEdges;L.length>0?L.forEach(N=>{N.inputNode&&B(N.inputNode)}):F?.push(K)}return B(R),F.map(K=>K.name)}function h(S){return Object.keys(S.nodes).map(U=>{const R=S.nodes[U];let F=R.outputEdges.map(K=>K.outputNode?.name).join(", "),B=R.inputEdges.map(K=>K.inputNode?.name).join(", ");return`${R.name}:${F}:${B}`}).join(" ")}function v(S){return S.map(U=>{const R=(0,d.j)(U.model)?U.model.type:U.queryType;return U.refId+(U.model.expression??"")+R}).join()}function C(S,U,R){return S.map(F=>{if(U===R||!(0,d.j)(F.model))return F;const B=F.model.type==="math",K=F.model.type==="reduce",L=F.model.type==="resample",N=F.model.type==="classic_conditions",z=F.model.type==="threshold";if(B)return{...F,model:{...F.model,expression:m(F.model.expression??"",U,R)}};if(L||K||z){const G=F.model.expression===U;return{...F,model:{...F.model,expression:G?R:F.model.expression}}}if(N){const G=F.model.conditions?.map(I=>({...I,query:{...I.query,params:I.query.params.map(V=>V===U?R:V)}}));return{...F,model:{...F.model,conditions:G}}}return F})}function m(S,U,R){const F=new RegExp("(\\$"+U+"\\b)|(\\${"+U+"})","gm"),B="${"+R+"}";return S.replace(F,B)}function D(S,U){return S.find(R=>R.refId===U)!==void 0}function P(S){return S.includes("/")||S.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function b(S){if(S.length===0)return;const U=(0,t.xI)(S);let R;return U&&(R=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),R}function M(S){const R=(S[0]?.meta?.notices??[]).find(F=>F.severity==="warning")?.text;return R?new Error(R):void 0}function x(S){const U={},R=[r.Us.threshold,r.Us.classic];for(const K of S){if(!(0,d.j)(K.model)||!R.includes(K.model.type)||!Array.isArray(K.model.conditions))continue;const L=K.model.conditions.some(A);K.model.conditions.forEach(N=>{const z=N.evaluator.params,G=N.query?.params[0]??K.model.expression;if(!G)return;const I=A(N);try{const V=i(S),H=y(G,V);S.filter(oe=>H.includes(oe.refId)).forEach(oe=>{const se=oe.refId,ie=!(0,d.j)(oe?.model),j=Boolean(ie&&se);se&&!U[se]&&(U[se]={config:{mode:n.H.Absolute,steps:[]},mode:o.i3.Line}),se&&j&&!I&&!L?F(se,z[0]):se&&j&&I&&(B(se,z,N.evaluator.type),U[se].mode=o.i3.LineAndArea)})}catch(V){console.error("Failed to parse thresholds",V);return}})}function F(K,L){U[K].config.steps.push({value:-1/0,color:"transparent"},{value:L,color:l.vc.theme2.colors.error.main})}function B(K,L,N){N===f.$.IsWithinRange&&U[K].config.steps.push({value:-1/0,color:"transparent"},{value:L[0],color:l.vc.theme2.colors.error.main},{value:L[1],color:l.vc.theme2.colors.error.main},{value:L[1],color:"transparent"}),N===f.$.IsOutsideRange&&U[K].config.steps.push({value:-1/0,color:l.vc.theme2.colors.error.main},{value:L[0],color:l.vc.theme2.colors.error.main},{value:L[0],color:"transparent"},{value:L[1],color:l.vc.theme2.colors.error.main}),U[K].config.steps.sort((z,G)=>z.value-G.value),U[K].config.steps=U[K].config.steps.filter(z=>z.value!==void 0)}return U}function A(S){return S.evaluator.type===f.$.IsWithinRange||S.evaluator.type===f.$.IsOutsideRange}function T(S){const U="Failed to fetch data";if(S.state!==s.Gu.Error)return;const R=S.errors;return R?.length?R.map(F=>F.message??U).join(", "):S.error?.message??U}},48563:(Y,O,e)=>{"use strict";e.d(O,{o:()=>u});var t=e(66111),n=e(67483),o=e(79662),s=e(52694),l=e(53731),f=e(99085),d=e(78543),r=e(80498);const c=({instance:p})=>{const g=(0,f.$9)(p.annotations),y=(0,f.XW)(g);return t.createElement("div",null,p.value&&t.createElement(r.C,{label:"Value",horizontal:!0},p.value),g.map(([E,h])=>t.createElement(d.a,{key:E,annotationKey:E,value:h,valueLink:y.get(E)})))};var a=e(45608);const u=({instances:p,pagination:g,footerRow:y})=>{const E=(0,t.useMemo)(()=>p.map(h=>({data:h,id:(0,o.pB)(h)})),[p]);return t.createElement(l.t,{cols:i,isExpandable:!0,items:E,renderExpandedContent:({data:h})=>t.createElement(c,{instance:h}),pagination:g,footerRow:y})},i=[{id:"state",label:"State",renderCell:({data:{state:p}})=>t.createElement(a.l,{state:p}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:p}})=>t.createElement(s.s,{labels:p})},{id:"created",label:"Created",renderCell:({data:{activeAt:p}})=>t.createElement(t.Fragment,null,p.startsWith("0001")?"-":(0,n.CQ)(p).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(Y,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(66111),n=e(79662),o=e(79453);const s=t.memo(({state:l,isPaused:f=!1,size:d="md",muted:r=!1})=>t.createElement(o.i,{state:(0,n.Aq)(l),size:d,muted:r},(0,n.SS)(l)," ",f?" (Paused)":""));s.displayName="AlertStateTag"},41273:(Y,O,e)=>{"use strict";e.d(O,{E:()=>c});var t=e(9892),n=e(66111),o=e(37932),s=e(72648),l=e(31403),f=e(98102),d=e(60048),r=e(93411);const c=n.forwardRef(({text:u,ruleIdentifier:i,isProvisioned:p,className:g},y)=>{const[E,h]=(0,n.useState)(void 0),v=(0,s.wW)(a),C=(0,r.u)("/alerting/new",{copyFrom:d.$V(i)});return n.createElement(n.Fragment,null,n.createElement(l.Qj,{title:"Copy",className:g,size:"sm",key:"clone",variant:"secondary",icon:"copy",href:p?void 0:C,onClick:p?()=>h(C):void 0,ref:y},u),n.createElement(f.s,{isOpen:!!E,title:"Copy provisioned alert rule",body:n.createElement("div",null,n.createElement("p",null,"The new rule will ",n.createElement("span",{className:v.bold},"NOT")," be marked as a provisioned rule."),n.createElement("p",null,"You will need to set a new alert group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>E&&o.E1.push(E),onDismiss:()=>h(void 0)}))});c.displayName="CloneRuleButton";const a=u=>({bold:t.css`
    font-weight: ${u.typography.fontWeightBold};
  `})},61068:(Y,O,e)=>{"use strict";e.d(O,{vq:()=>I,MD:()=>G,qd:()=>B,Bg:()=>N});var t=e(9892),n=e(82897),o=e(66111),s=e(66698),l=e(26418),f=e(19985),d=e(72648),r=e(35029),c=e(24799),a=e(64353),u=e(46967),i=e(31403),p=e(60499),g=e(40014),y=e(27876),E=e(69945),h=e(72004),v=e(82963),C=e(45849),m=e(46818),D=e(79662),P=e(20383),b=e(53731),M=e(63613),x=e(35645),A=e(45253);const T=()=>o.createElement(A.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",o.createElement("strong",null,x.v.unifiedAlerting.minInterval)," has been configured in Grafana.",o.createElement("br",null),"Please contact the administrator to configure a lower interval.");var S=e(56412);const U=10;function R({message:H,error:Q}){return Q?o.createElement(f.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:H}):o.createElement(f.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:H})}const F=(H,Q)=>{const oe=N(Q),se=N(H);return se===0&&oe!==0?1:oe===0||se/oe<1?0:Math.ceil(se/oe)+1},B=(H,Q)=>{const oe={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,D.Pc)(H)?{alertName:H.grafana_alert.title,forDuration:H.for,evaluationsToFire:F(H.for,Q)}:(0,D.cG)(H)?{alertName:H.alert,forDuration:H.for??"1m",evaluationsToFire:F(H.for??"1m",Q)}:oe},K=H=>{try{const Q=(0,P.nd)(H);return!(Q<S.Xr*1e3||Q%(S.Xr*1e3)!==0)}catch{return!1}},L=(H,Q,oe)=>(H?H[oe]:[])?.find(ie=>ie.name===Q),N=H=>{try{return(0,P.nd)(H)}catch{return 0}},z=({rulesWithoutRecordingRules:H})=>{const Q=(0,d.wW)(V),{watch:oe}=(0,s.Gc)(),se=oe("groupInterval"),ie=!Boolean(se),j=H.slice().map((ce,ee)=>({id:ee,data:B(ce,se)})).sort((ce,ee)=>N(ce.data.forDuration)-N(ee.data.forDuration)),de=(0,o.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:ce}})=>o.createElement(o.Fragment,null,ce),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:ce}})=>o.createElement(o.Fragment,null,ce),size:.5},{id:"numberEvaluations",label:"#Eval",renderCell:({data:{evaluationsToFire:ce}})=>ie?o.createElement(R,{message:"#Evaluations not available."}):K(se)?ce===0?o.createElement(R,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):o.createElement(o.Fragment,null,ce):o.createElement(R,{message:"Invalid evaluation interval format",error:!0}),size:.4}],[se,ie]);return o.createElement("div",{className:Q.tableWrapper},o.createElement(b.t,{items:j,cols:de,pagination:{itemsPerPage:U}}))},G=H=>({required:{value:!0,message:"Required."},validate:Q=>{try{const oe=(0,P.nd)(Q);return oe<S.Xr*1e3?`Cannot be less than ${S.Xr} seconds.`:oe%(S.Xr*1e3)!==0?`Must be a multiple of ${S.Xr} seconds.`:(0,h.iH)(H,Q).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(oe){return oe instanceof Error?oe.message:"Failed to parse duration"}}});function I(H){const{namespace:Q,group:oe,onClose:se,intervalEditOnly:ie}=H,j=(0,d.wW)(V),de=(0,y.useDispatch)(),{loading:ce,error:ee,dispatched:le}=(0,E._)(ye=>ye.updateLotexNamespaceAndGroup)??m.oq,q=(0,p.iG)(),fe=(0,o.useMemo)(()=>({namespaceName:Q.name,groupName:oe.name,groupInterval:oe.interval??""}),[Q,oe]),Z=(0,C.EG)(Q.rulesSource),ne=Z===C.GC,re=ne?"Folder":"Namespace";(0,o.useEffect)(()=>{le&&!ce&&!ee&&se(!0)},[le,ce,se,ee]),(0,g.x)(ye=>ye.unifiedAlerting.updateLotexNamespaceAndGroup=m.oq);const ve=ye=>{de((0,h.hv)({rulesSourceName:Z,groupName:oe.name,newGroupName:ye.groupName,namespaceName:Q.name,newNamespaceName:ye.namespaceName,groupInterval:ye.groupInterval||void 0}))},me=(0,s.cI)({mode:"onBlur",defaultValues:fe,shouldFocusError:!0}),{handleSubmit:Ie,register:Ge,watch:gt,formState:{isDirty:Te,errors:Le}}=me,Ye=()=>{q.error("There are errors in the form. Correct the errors and retry.")},it=(0,n.compact)(oe.rules.map(ye=>ye.rulerRule).filter(ye=>!(0,D.yF)(ye))),ht=it.length>0,Re=ie||ne?"Edit evaluation group":"Edit namespace or evaluation group";return o.createElement(r.u,{className:j.modal,isOpen:!0,title:Re,onDismiss:se,onClickBackdrop:se},o.createElement(s.RV,{...me},o.createElement("form",{onSubmit:ye=>ye.preventDefault(),key:JSON.stringify(fe)},o.createElement(o.Fragment,null,o.createElement(c.g,{label:o.createElement(a._,{htmlFor:"namespaceName",description:!ne&&"Change the current namespace name. Moving groups between namespaces is not supported"},re),invalid:!!Le.namespaceName,error:Le.namespaceName?.message},o.createElement(l.Stack,{gap:1,direction:"row"},o.createElement(u.I,{id:"namespaceName",readOnly:ie||ne,...Ge("namespaceName",{required:"Namespace name is required."}),className:j.formInput}),ne&&H.folderUrl&&o.createElement(i.Qj,{href:H.folderUrl,title:"Go to folder",variant:"secondary",icon:"folder-open",target:"_blank"}))),o.createElement(c.g,{label:o.createElement(a._,{htmlFor:"groupName",description:`Evaluation group name needs to be unique within a ${re.toLocaleLowerCase()}`},"Evaluation group name"),invalid:!!Le.groupName,error:Le.groupName?.message},o.createElement(u.I,{id:"groupName",readOnly:ie,...Ge("groupName",{required:"Evaluation group name is required."})})),o.createElement(c.g,{label:o.createElement(a._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},o.createElement(l.Stack,{gap:.5},"Rule group evaluation interval",o.createElement(M.s,{text:"How frequently to evaluate rules."}))),invalid:!!Le.groupInterval,error:Le.groupInterval?.message},o.createElement(u.I,{id:"groupInterval",placeholder:"1m",...Ge("groupInterval",G(it))})),(0,v.f)(gt("groupInterval")).exceedsLimit&&o.createElement(T,null),o.createElement("div",{className:j.modalButtons},o.createElement(r.u.ButtonRow,null,o.createElement(i.zx,{type:"button",disabled:!Te||ce,onClick:Ie(ye=>ve(ye),Ye)},ce?"Saving...":"Save evaluation interval"),o.createElement(i.zx,{variant:"secondary",type:"button",disabled:ce,onClick:()=>se(!1)},"Cancel"))),!ht&&o.createElement("div",null,"This group does not contain alert rules."),ht&&o.createElement(o.Fragment,null,o.createElement("div",null,"List of rules that belong to this group"),o.createElement("div",{className:j.evalRequiredLabel},"#Eval column represents the number of evaluations needed before alert starts firing."),o.createElement(z,{rulesWithoutRecordingRules:it}))))))}const V=H=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    flex: 1;
  `,tableWrapper:t.css`
    margin-top: ${H.spacing(2)};
    margin-bottom: ${H.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${H.typography.bodySmall.fontSize};
  `})},89149:(Y,O,e)=>{"use strict";e.d(O,{Ii:()=>C,gr:()=>v});var t=e(9892),n=e(66111),o=e(77258),s=e(67483),l=e(72648),f=e(61860),d=e(53739),r=e(99085),c=e(79662),a=e(20383),u=e(52694),i=e(80498),p=e(28371),g=e(68854),y=e(24990),E=e(8674),h=e(78443);const v=15,C=({rule:P})=>{const b=(0,l.wW)(D),{namespace:{rulesSource:M}}=P,x=(0,r.$9)(P.annotations);return n.createElement("div",null,n.createElement(p.f,{rule:P,rulesSource:M,isViewMode:!1}),n.createElement("div",{className:b.wrapper},n.createElement("div",{className:b.leftSide},n.createElement(m,{rule:P}),!!P.labels&&!!Object.keys(P.labels).length&&n.createElement(i.C,{label:"Labels",horizontal:!0},n.createElement(u.s,{labels:P.labels})),n.createElement(E.C,{rulesSource:M,rule:P,annotations:x}),n.createElement(g.J,{annotations:x})),n.createElement("div",{className:b.rightSide},n.createElement(y.C,{rulesSource:M,rule:P}))),n.createElement(h.M,{rule:P,itemsDisplayLimit:v}))},m=({rule:P})=>{let b,M=P.group.interval,x=P.promRule?.lastEvaluation,A=P.promRule?.evaluationTime;return(0,c.yF)(P.rulerRule)||(b=P.rulerRule?.for),n.createElement(n.Fragment,null,M&&n.createElement(i.C,{label:"Evaluate",horizontal:!0},"Every ",M),b&&n.createElement(i.C,{label:"For",horizontal:!0},b),x&&!(0,a.gV)(x)&&n.createElement(i.C,{label:"Last evaluation",horizontal:!0},n.createElement(f.u,{placement:"top",content:`${(0,o.dq)(x,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.CQ)(x).locale("en").fromNow(!0)} ago`))),x&&!(0,a.gV)(x)&&A!==void 0&&n.createElement(i.C,{label:"Evaluation time",horizontal:!0},n.createElement(f.u,{placement:"top",content:`${A}s`,theme:"info"},n.createElement("span",null,(0,d.q)({timeInMs:A*1e3,humanize:!0})))))},D=P=>({wrapper:t.css`
    display: flex;
    flex-direction: row;

    ${P.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:t.css`
    flex: 1;
  `,rightSide:t.css`
    ${P.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},28371:(Y,O,e)=>{"use strict";e.d(O,{f:()=>Q});var t=e(9892),n=e(66111),o=e(56895),s=e(63418),l=e(49187),f=e(59959),d=e(35645),r=e(72648),c=e(31403),a=e(94599),u=e(52081),i=e(98102),p=e(60499),g=e(82002),y=e(39031),E=e(27876),h=e(46063),v=e(30173),C=e(44391),m=e(35029);const D=(0,n.lazy)(()=>e.e(7520).then(e.bind(e,87520))),P=(0,n.lazy)(()=>e.e(1481).then(e.bind(e,81481)));var b=(j=>(j.Loki="loki",j.Annotations="annotations",j))(b||{});function M(){const[j,de]=(0,n.useState)(!1),[ce,ee]=(0,n.useState)(),le=(0,r.wW)(x),q=d.v.unifiedAlerting.alertStateHistoryBackend,fe=d.v.unifiedAlerting.alertStateHistoryPrimary,ne=[q,fe].some(Ie=>Ie==="loki")?"loki":"annotations",re=(0,n.useCallback)(()=>{ee(void 0),de(!1)},[]),ve=(0,n.useCallback)(Ie=>{ee(Ie),de(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>ce?n.createElement(m.u,{isOpen:j,onDismiss:re,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:le.modal,contentClassName:le.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},ne==="loki"&&n.createElement(P,{ruleUID:ce.grafana_alert.uid}),ne==="annotations"&&n.createElement(D,{alertId:ce.grafana_alert.id??""}))):null,[ce,j,re,ne,le]),showStateHistoryModal:ve,hideStateHistoryModal:re}}const x=j=>({modal:t.css`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:t.css`
    height: 100%;
    width: 100%;
    padding: ${j.spacing(2)};
  `});var A=e(72004),T=e(97953),S=e(20194),U=e(37190),R=e(45849),F=e(10505),B=e(60048),K=e(79662),L=e(61860),N=e(58509),z=e(2390);const G=({children:j,plugin:de,loadingComponent:ce,notInstalledFallback:ee})=>{const{loading:le,installed:q}=usePluginBridge(de);return le?ce??null:q?React.createElement(React.Fragment,null,j):ee??null};function I(j,de,ce){const ee=new URLSearchParams(ce).toString();return`/a/${j}${de}`+(ee?"?"+ee:"")}const V=({title:j="",severity:de="",url:ce=""})=>{const ee=I(z.W.Incident,"/incidents/declare",{title:j,severity:de,url:ce}),{loading:le,installed:q,settings:fe}=(0,N.n)(z.W.Incident);return n.createElement(n.Fragment,null,le===!0&&n.createElement(c.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),q===!1&&n.createElement(L.u,{content:"Grafana Incident is not installed or is not configured correctly"},n.createElement(c.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),fe&&n.createElement(c.Qj,{icon:"fire",size:"sm",type:"button",href:ee},"Declare Incident"))};var H=e(41273);const Q=({rule:j,rulesSource:de,isViewMode:ce})=>{const ee=(0,r.wW)(ie),{namespace:le,group:q,rulerRule:fe}=j,{StateHistoryModal:Z,showStateHistoryModal:ne}=M(),re=(0,E.useDispatch)(),ve=(0,o.TH)(),me=(0,p.iG)(),[Ie,Ge]=(0,n.useState)(),gt=(0,R.HY)(de)?de:(0,S.Xy)(de.jsonData.alertmanagerUid)?.name,Te=g.Vt.hasPermission(E.AccessControlAction.DataSourcesExplore),Le=[],Ye=[],it=()=>{if(Ie&&Ie.rulerRule){const Et=B.Zk((0,R.EG)(Ie.namespace.rulesSource),Ie.namespace.name,Ie.group.name,Ie.rulerRule);re((0,A.hS)(Et,{navigateTo:ce?"/alerting/list":void 0})),Ge(void 0)}},ht=(0,K.Jq)(q),Re=(0,R.EG)(de),ye=(0,K.Pc)(j.rulerRule)&&Boolean(j.rulerRule.grafana_alert.provenance),Ce=(0,K.x_)(j.promRule)&&j.promRule.state===h.x_.Firing,be=(0,T.Bz)(Re),We=g.Vt.hasPermission(be.create),{isEditable:Qe,isRemovable:mt}=(0,C.M)(Re,fe),vt=se(j),rt=()=>(0,F.t6)(de,j),Ot=ve.pathname+ve.search;if((0,R.jq)(de)&&Te&&!ht&&Le.push(n.createElement(c.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:(0,F.mH)(de.name,j.query)},"See graph")),j.annotations[U.q6.runbookURL]&&Le.push(n.createElement(c.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:s.QX.sanitizeUrl(j.annotations[U.q6.runbookURL])},"View runbook")),j.annotations[U.q6.dashboardUID]){const Et=j.annotations[U.q6.dashboardUID];if(Et){Le.push(n.createElement(c.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(Et)}`},"Go to dashboard"));const Mt=j.annotations[U.q6.panelID];Mt&&Le.push(n.createElement(c.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(Et)}?viewPanel=${encodeURIComponent(Mt)}`},"Go to panel"))}}if(vt&&gt&&Le.push(n.createElement(c.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:(0,F.Vv)(gt,j)},"Silence")),(0,K.Pc)(j.rulerRule)&&Le.push(n.createElement(n.Fragment,{key:"history"},n.createElement(c.zx,{size:"sm",icon:"history",onClick:()=>(0,K.Pc)(j.rulerRule)&&ne(j.rulerRule)},"Show state history"),Z)),Ce&&oe()&&Le.push(n.createElement(n.Fragment,{key:"declare-incident"},n.createElement(V,{title:j.name,url:rt()}))),ce&&fe){const Et=(0,R.EG)(de),Mt=B.Zk(Et,le.name,q.name,fe);if(Qe&&!ht&&(Ye.push(n.createElement(a.m,{key:"copy",icon:"copy",onClipboardError:ue=>{me.error("Error while copying URL",ue)},size:"sm",getText:rt},"Copy link to rule")),!ye)){const ue=l.Cj.renderUrl(`${d.v.appSubUrl}/alerting/${encodeURIComponent(B.$V(Mt))}/edit`,{returnTo:Ot});Ye.push(n.createElement(c.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:ue},"Edit"))}We&&!ht&&Ye.push(n.createElement(H.E,{key:"clone",text:"Copy",ruleIdentifier:Mt,isProvisioned:ye})),mt&&!ht&&!ye&&Ye.push(n.createElement(c.zx,{size:"sm",type:"button",key:"delete",variant:"secondary",icon:"trash-alt",onClick:()=>Ge(j)},"Delete"))}return Le.length||Ye.length?n.createElement(n.Fragment,null,n.createElement("div",{className:ee.wrapper},n.createElement(u.Lh,{width:"auto"},Le.length?Le:n.createElement("div",null)),n.createElement(u.Lh,{width:"auto"},Ye.length?Ye:n.createElement("div",null))),!!Ie&&n.createElement(i.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:it,onDismiss:()=>Ge(void 0)})):null};function oe(){const j=d.v.buildInfo,de=j.edition===f.e.OpenSource,ce=j.env==="development";return!de||ce}function se(j){const de=(0,K.Pc)(j.rulerRule),{useGetAlertmanagerChoiceStatusQuery:ce}=v.h,{currentData:ee,isLoading:le}=ce(void 0,{skip:!de});if(!de||le)return!1;const q=g.Vt.hasAccess(E.AccessControlAction.AlertingInstanceCreate,g.Vt.isEditor),fe=ee?.alertmanagersChoice===y.TE.External,Z=ee?.alertmanagersChoice===y.TE.All;return q&&(!fe||Z)}const ie=j=>({wrapper:t.css`
    padding: ${j.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${j.colors.border.medium};
  `})},68854:(Y,O,e)=>{"use strict";e.d(O,{J:()=>f});var t=e(9892),n=e(66111),o=e(72648),s=e(99085),l=e(78543);function f(r){const c=(0,o.wW)(d),{annotations:a}=r,u=(0,s.XW)(a);return a.length===0?null:n.createElement("div",{className:c.annotations},a.map(([i,p])=>n.createElement(l.a,{key:i,annotationKey:i,value:p,valueLink:u.get(i)})))}const d=()=>({annotations:t.css`
    margin-top: 46px;
  `})},24990:(Y,O,e)=>{"use strict";e.d(O,{C:()=>c});var t=e(9892),n=e(66111),o=e(86647),s=e(72648),l=e(97573),f=e(45849),d=e(79662),r=e(80498);function c(u){const{rulesSource:i,rule:p}=u,g=(0,s.wW)(a),y=(0,n.useMemo)(()=>{if((0,f.jq)(i))return[{name:i.name,icon:i.meta.info.logos.small}];if((0,d.Pc)(p.rulerRule)){const{data:E}=p.rulerRule.grafana_alert,h=E.reduce((v,C)=>{const m=(0,o.F)().getInstanceSettings(C.datasourceUid);return!m||m.uid===l.Yq||(v[m.name]={name:m.name,icon:m.meta.info.logos.small}),v},{});return Object.values(h)}return[]},[p,i]);return y.length===0?null:n.createElement(r.C,{label:"Data source"},y.map(({name:E,icon:h},v)=>n.createElement("div",{key:E},h&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${E} datasource logo`,className:g.dataSourceIcon,src:h})," "),E)))}function a(u){const i=u.spacing(2);return{dataSourceIcon:t.css`
      width: ${i};
      height: ${i};
    `}}},8674:(Y,O,e)=>{"use strict";e.d(O,{C:()=>E});var t=e(9892),n=e(66111),o=e(45849),s=e(80498),l=e(57706),f=e(56975),d=e(67660),r=e(12724),c=e(72648),a=e(19370),u=e(21899),i=e(94884);const p=({language:v,expr:C})=>{const m=(0,n.useMemo)(()=>[(0,d.Z)({onlyIn:P=>P.type==="code_block",getSyntax:()=>v},{...l.languages,[v]:v==="logql"?a.ZP:u.ZP})],[v]),D=(0,n.useMemo)(()=>(0,r.l1)(C),[C]);return n.createElement(f.ML,{"data-testid":"expression-editor",plugins:m,value:D})},g=({expression:v,rulesSource:C})=>{const m=(0,c.wW)(y);return n.createElement(i.t,{className:(0,t.cx)(m.well,"slate-query-field")},(0,o.jq)(C)?n.createElement(p,{expr:v,language:C.type===o.ye.Loki?"logql":"promql"}):v)},y=v=>({well:t.css`
    font-family: ${v.typography.fontFamilyMonospace};
  `});function E(v){const{annotations:C,rulesSource:m,rule:D}=v,P=h();return(0,o.jq)(m)?n.createElement(s.C,{label:"Expression",horizontal:!0,className:(0,t.cx)({[P.exprRow]:!!C.length})},n.createElement(g,{expression:D.query,rulesSource:m})):null}const h=()=>({exprRow:t.css`
    margin-bottom: 46px;
  `})},78443:(Y,O,e)=>{"use strict";e.d(O,{M:()=>b});var t=e(9892),n=e(82897),o=e(66111),s=e(56895),l=e(72648),f=e(31403),d=e(30151),r=e(34719),c=e(64353),a=e(2594),u=e(46063);const i=({className:A,onStateFilterChange:T,stateFilter:S,filterType:U,itemPerStateStats:R})=>{const F=(0,l.wW)(p),B=G=>function(){return R&&R[G]?o.createElement(r.V,{name:R[G].toFixed(0),colorIndex:9,className:F.tag}):null},K=Object.values(u.bj).map(G=>({label:G,value:G,component:B(G)})),N=[u.x_.Firing,u.x_.Pending].map(G=>({label:(0,n.capitalize)(G),value:G,component:B(G)})),z=U==="grafana"?K:N;return o.createElement("div",{className:A,"data-testid":"alert-instance-state-filter"},o.createElement(c._,null,"State"),o.createElement(a.S,{options:z,value:S,onChange:T,onClick:G=>{G===S&&T(void 0)}}))};function p(A){return{tag:t.css`
      font-size: 11px;
      font-weight: normal;
      padding: ${A.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${A.spacing(.5)};
    `}}var g=e(20194),y=e(10505),E=e(40286),h=e(45849),v=e(79662),C=e(80498),m=e(48563),D=e(46253);function P(A){const T=(0,l.wW)(x),{onClick:S,stats:U}=A;return o.createElement("div",{className:T.footerRow},o.createElement("div",null,"Showing ",U.visibleItemsCount," out of ",U.totalItemsCount," instances"),o.createElement(f.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:S},"Show all ",U.totalItemsCount," alert instances"))}function b(A){const T=(0,s.k6)(),{rule:{promRule:S,namespace:U,instanceTotals:R},itemsDisplayLimit:F=Number.POSITIVE_INFINITY,pagination:B,enableFiltering:K=!1}=A,[L,N]=(0,o.useState)(),[z,G]=(0,o.useState)(),[I]=(0,o.useState)(Math.floor(Math.random()*100)),V=`queryString-${I}`,H=(0,l.wW)(x),Q=(0,h.HY)(U.rulesSource)?h.GC:"prometheus",oe=(0,o.useMemo)(()=>(0,v.x_)(S)&&S.alerts?.length?M(L,z,(0,y.Zl)(E.As.Importance,S.alerts)):[],[S,z,L]);if(!(0,v.x_)(S))return null;const se=oe.slice(0,F),ie=(0,n.countBy)(S.alerts,re=>(0,u.ED)(re.state)),j=(0,n.sum)(Object.values(R)),de=j-se.length,ce={totalItemsCount:j,visibleItemsCount:se.length},ee=(0,y.V2)(U.rulesSource,A.rule,location.pathname+location.search),le=(0,D.r0)(R),Z=K?()=>G(void 0):()=>T.push(ee),ne=de?o.createElement(P,{stats:ce,onClick:Z}):void 0;return o.createElement(C.C,{label:"Matching instances",horizontal:!0},K&&o.createElement("div",{className:(0,t.cx)(H.flexRow,H.spaceBetween)},o.createElement("div",{className:H.flexRow},o.createElement(d.F,{className:H.rowChild,key:V,defaultQueryString:L,onFilterChange:re=>N(re)}),o.createElement(i,{className:H.rowChild,filterType:Q,stateFilter:z,onStateFilterChange:G,itemPerStateStats:ie}))),!K&&o.createElement("div",{className:H.stats},le),o.createElement(m.o,{instances:se,pagination:B,footerRow:ne}))}function M(A,T,S){let U=[...S];if(A){const R=(0,g.Zh)(A||"");U=U.filter(({labels:F})=>(0,g.eD)(F,R))}return T&&(U=U.filter(R=>(0,u.ED)(R.state)===T)),U}const x=A=>({flexRow:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${A.spacing(1)};
    `,spaceBetween:t.css`
      justify-content: space-between;
    `,rowChild:t.css`
      margin-right: ${A.spacing(1)};
    `,footerRow:t.css`
      display: flex;
      flex-direction: column;
      gap: ${A.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:t.css`
      margin-bottom: ${A.spacing(2)};
    `,stats:t.css`
      display: flex;
      gap: ${A.spacing(1)};
      padding: ${A.spacing(1,0)};
    `})},46253:(Y,O,e)=>{"use strict";e.d(O,{Pb:()=>i,WN:()=>u,r0:()=>p});var t=e(82897),n=e.n(t),o=e(64681),s=e.n(o),l=e(66111),f=e(26418),d=e(19985),r=e(43055),c=e(46063);const a={recording:0,alerting:0,[c.x_.Pending]:0,[c.x_.Inactive]:0,paused:0,error:0,nodata:0},u=({namespaces:g})=>{const y={...a};g.forEach(({groups:C})=>{C.forEach(m=>{const D=(0,t.omitBy)(m.totals,t.isUndefined);for(let P in D)y[P]+=D[P]})});const E=p(y),h=Boolean(E.length),v=(0,t.sum)(Object.values(y));return E.unshift(l.createElement(l.Fragment,{key:"total"},v," ",s()("rule",v))),l.createElement(f.Stack,{direction:"row"},h&&l.createElement("div",null,l.createElement(f.Stack,{gap:.5},E)))},i=({group:g})=>{const y=g.totals,E=g?.interval,h=p(y),v=Boolean(h.length);return l.createElement(f.Stack,{direction:"row"},v&&l.createElement("div",null,l.createElement(f.Stack,{gap:.5},h)),E&&l.createElement(l.Fragment,null,l.createElement("div",null,"|"),l.createElement(d.C,{text:E,icon:"clock-nine",color:"blue"})))};function p(g){const y=[];return g[r.P.Alerting]&&y.push(l.createElement(d.C,{color:"red",key:"firing",text:`${g[r.P.Alerting]} firing`})),g.error&&y.push(l.createElement(d.C,{color:"red",key:"errors",text:`${g.error} errors`})),g.nodata&&y.push(l.createElement(d.C,{color:"blue",key:"nodata",text:`${g.nodata} no data`})),g[r.P.Pending]&&y.push(l.createElement(d.C,{color:"orange",key:"pending",text:`${g[r.P.Pending]} pending`})),g[r.P.Normal]&&g.paused&&y.push(l.createElement(d.C,{color:"green",key:"paused",text:`${g[r.P.Normal]} normal (${g.paused} paused)`})),g[r.P.Normal]&&!g.paused&&y.push(l.createElement(d.C,{color:"green",key:"inactive",text:`${g[r.P.Normal]} normal`})),g.recording&&y.push(l.createElement(d.C,{color:"purple",key:"recording",text:`${g.recording} recording`})),y}},69369:(Y,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(66111),n=e(86647),o=e(22069);function s(l){return{allDataSourcesAvailable:(0,t.useMemo)(()=>l.filter(d=>!(0,o.Pr)(d.datasourceUid)).every(d=>{const r=(0,n.F)().getInstanceSettings(d.datasourceUid);return Boolean(r)}),[l])}}},61627:(Y,O,e)=>{"use strict";e.d(O,{DD:()=>E,Fm:()=>g,Kd:()=>a,ZP:()=>y,Zo:()=>c});var t=e(82897),n=e.n(t),o=e(66111),s=e(43055),l=e(46063),f=e(45849),d=e(79662),r=e(69945);function c(b){const M=(0,r._)(S=>S.promRules),x=(0,r._)(S=>S.rulerRules),A=(0,o.useRef)({}),T=(0,o.useMemo)(()=>{if(b){const S=(0,f.o_)(b);if(!S)throw new Error(`Unknown rules source: ${b}`);return[S]}return(0,f.h_)()},[b]);return(0,o.useMemo)(()=>T.map(S=>{const U=(0,f.jq)(S)?S.name:S,R=M[U]?.result,F=x[U]?.result,B=A.current[U];if(B&&B.promRules===R&&B.rulerRules===F)return B.result;const K={};Object.entries(F||{}).forEach(([N,z])=>{const G={rulesSource:S,name:N,groups:[]};K[N]=G,i(G,z)}),R?.forEach(({name:N,groups:z})=>{const G=K[N]=K[N]||{rulesSource:S,name:N,groups:[]};p(G,z)});const L=Object.values(K);return A.current[U]={promRules:R,rulerRules:F,result:L},L}).flat(),[M,x,T])}function a(b){return b.map(M=>{const x={...M,groups:[]};return x.groups.push({name:"default",rules:u(M.groups.flatMap(A=>A.rules)),totals:h(M.groups)}),x})}function u(b){return b.sort((M,x)=>M.name.localeCompare(x.name))}function i(b,M=[]){b.groups=M.map(x=>{const A=x.rules.filter(U=>(0,d.yF)(U)).length,T=x.rules.filter(U=>(0,d.Pc)(U)&&U.grafana_alert.is_paused).length,S={name:x.name,interval:x.interval,source_tenants:x.source_tenants,rules:[],totals:{paused:T,recording:A}};return S.rules=x.rules.map(U=>C(U,b,S)),S})}function p(b,M){const x=new Map;b.groups.forEach(A=>x.set(A.name,A)),M.forEach(A=>{let T=x.get(A.name);T||(T={name:A.name,rules:[],totals:E(A)},b.groups.push(T),x.set(A.name,T)),T.totals={...T.totals,...E(A)};const S=new Map;T.rules.forEach(U=>{const R=S.get(U.name);R?R.push(U):S.set(U.name,[U])}),(A.rules??[]).forEach(U=>{const R=m(U,S,b.rulesSource);R?(R.promRule=U,R.instanceTotals=(0,d.x_)(U)?g(U):{},R.filteredInstanceTotals=(0,d.x_)(U)?y(U):{}):T.rules.push(v(U,b,T))})})}function g(b){const M=(0,t.countBy)(b.alerts,"state");if(b.totals){const{normal:x,...A}=b.totals;return{...A,inactive:x}}return{alerting:M[s.P.Alerting],pending:M[s.P.Pending],inactive:M[s.P.Normal],nodata:M[s.P.NoData],error:M[s.P.Error]+M.err}}function y(b){if(b.totalsFiltered){const{normal:M,...x}=b.totalsFiltered;return{...x,inactive:M}}return{}}function E(b){if(b.totals){const{firing:T,...S}=b.totals;return{...S,alerting:T}}const M=(0,t.countBy)(b.rules,T=>(0,d.x_)(T)&&T.state),x=(0,t.countBy)(b.rules,T=>T.health),A=b.rules.filter(T=>(0,d.OP)(T)).length;return{alerting:M[l.x_.Firing],error:x.error,nodata:x.nodata,inactive:M[l.x_.Inactive],pending:M[l.x_.Pending],recording:A}}function h(b){const M={};return b.forEach(x=>{const A=x.totals;Object.entries(A).forEach(([T,S])=>{M[T]||(M[T]=0),M[T]+=S})}),M}function v(b,M,x){return{name:b.name,query:b.query,labels:b.labels||{},annotations:(0,d.x_)(b)?b.annotations||{}:{},promRule:b,namespace:M,group:x,instanceTotals:(0,d.x_)(b)?g(b):{},filteredInstanceTotals:(0,d.x_)(b)?y(b):{}}}function C(b,M,x){return(0,d.cG)(b)?{name:b.alert,query:b.expr,labels:b.labels||{},annotations:b.annotations||{},rulerRule:b,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}:(0,d.yF)(b)?{name:b.record,query:b.expr,labels:b.labels||{},annotations:{},rulerRule:b,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}:{name:b.grafana_alert.title,query:"",labels:b.labels||{},annotations:b.annotations||{},rulerRule:b,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}}function m(b,M,x){const A=M.get(b.name);if(!A)return;if((0,f.HY)(x))return A[0];const T=A.find(U=>!U.promRule&&D(U,b,!0));if(T)return T;const S=A.find(U=>!U.promRule&&D(U,b,!1));if(S)return S}function D(b,M,x=!0){return b.name===M.name?(0,t.isEqual)([x?P(b.query):"",b.labels,b.annotations],[x?P(M.query):"",M.labels||{},(0,d.x_)(M)?M.annotations||{}:{}]):!1}function P(b){return b.length>1&&b[0]==="("&&b[b.length-1]===")"&&(b=b.slice(1,-1)),b=b.replace(/\s|\n/g,""),b.split("").sort().join("")}},55485:(Y,O,e)=>{"use strict";e.d(O,{W:()=>f});var t=e(66111),n=e(27876),o=e(72004),s=e(46818),l=e(69945);function f(d){const r=(0,n.useDispatch)(),c=(0,l._)(a=>a.folders);if((0,t.useEffect)(()=>{d&&r((0,o.sw)(d))},[r,d]),d){const a=c[d]||s.oq;return{folder:a.result,loading:a.loading}}return{loading:!1}}},44391:(Y,O,e)=>{"use strict";e.d(O,{M:()=>f});var t=e(82002),n=e(97953),o=e(79662),s=e(55485),l=e(69945);function f(d,r){const c=(0,l._)(h=>h.dataSources),a=r&&(0,o.Pc)(r)?r.grafana_alert.namespace_uid:void 0,u=(0,n.Bz)(d),{folder:i,loading:p}=(0,s.W)(a);if(!r)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,o.Pc)(r)){if(!a)throw new Error(`Rule ${r.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!i)return{isEditable:!1,isRemovable:!1,loading:p};const h=i.canSave,v=t.Vt.hasAccessInMetadata(u.update,i,h),C=t.Vt.hasAccessInMetadata(u.delete,i,h);return{isEditable:v,isRemovable:C,loading:p}}const g=Boolean(c[d]?.result?.rulerConfig),y=t.Vt.hasAccess(u.update,t.Vt.isEditor),E=t.Vt.hasAccess(u.delete,t.Vt.isEditor);return{isEditable:y&&g,isRemovable:E&&g,loading:c[d]?.loading}}},25724:(Y,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(82897),n=e.n(t),o=e(66111);function s(l,f=1,d){const[r,c]=(0,o.useState)(f),a=(0,o.useMemo)(()=>(0,t.chunk)(l,d),[l,d]),u=a.length,i=a[r-1]??[],p=(r-1)*d+1,g=(0,t.clamp)(r*d,l.length),y=(0,o.useCallback)(v=>{c((0,t.clamp)(v,1,a.length))},[c,a]),E=(0,o.useCallback)(()=>y(r+1),[r,y]),h=(0,o.useCallback)(()=>y(r-1),[r,y]);return(0,o.useEffect)(()=>c(1),[u]),{page:r,onPageChange:y,numberOfPages:u,pageItems:i,pageStart:p,pageEnd:g,nextPage:E,previousPage:h}}},58509:(Y,O,e)=>{"use strict";e.d(O,{n:()=>o});var t=e(59679),n=e(13011);function o(s){const{loading:l,error:f,value:d}=(0,t.Z)(()=>(0,n.a)(s,{showErrorAlert:!1})),r=d&&!f&&!l,c=d?.enabled;return l&&!d?{loading:!0}:!r||!c?{loading:!1,installed:!1}:{loading:l,installed:!0,settings:d}}},69945:(Y,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(27876);function n(o,s){return(0,t.useSelector)(l=>o(l.unifiedAlerting),s)}},734:(Y,O,e)=>{"use strict";e.d(O,{VG:()=>N,HY:()=>G,ug:()=>z});var t=e(46063),n=e(79662);const o=1,s=2,l=3,f=4,d=5,r=6,c=7,a=8,u=9,i=10,p=11,g=12,y=0,E=1,h=2,v=3,C=4,m=5,D=6,P=7;var b=e(82897),M=e(25181);const x=M.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),A={[l]:"datasource",[d]:"namespace",[r]:"label",[a]:"rule",[c]:"group",[u]:"state",[i]:"type",[p]:"health"};var T=(V=>(V.dataSource="dataSourceFilter",V.nameSpace="nameSpaceFilter",V.label="labelFilter",V.group="groupFilter",V.rule="ruleFilter",V.state="stateFilter",V.type="typeFilter",V.health="healthFilter",V))(T||{});function S(V,H,Q){B(V,H,oe=>{if(oe.type.id===s){const se=U(V,oe);if(se.type&&se.value){const ie=Q[se.type];ie&&ie(se.value)}}else if(oe.type.id===g){const se=Q[g];se&&se(R(V,oe))}})}function U(V,H){if(H.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Q=H.firstChild;if(!Q)return{type:void 0,value:void 0};const oe=H.getChild(f),se=oe?(0,b.trim)(R(V,oe),'"'):void 0;return{type:Q.type.id,value:se}}function R(V,H){return V.slice(H.from,H.to).trim().replace(/\"/g,"")}function F(V,H,Q){const oe=[];B(V,H,ie=>{ie.type.id===s&&ie.firstChild&&oe.push(ie.firstChild),ie.type.id===g&&oe.push(ie)});let se=[];return oe.forEach(ie=>{const j=Q.findIndex(de=>de.type===ie.type.id);if(j!==-1){if(ie.parent?.type.is(s)){const de=A[ie.type.id],ce=Q.splice(j,1)[0];se.push(`${de}:${K(ce.value)}`)}if(ie.type.is(g)){const de=Q.splice(j,1)[0];se.push(de.value)}}}),Q.forEach(ie=>{ie.type===g?se.push(ie.value):se.push(`${A[ie.type]}:${K(ie.value)}`)}),se.join(" ")}function B(V,H,Q){const oe=H.join(" ");let ie=x.configure({dialect:oe}).parse(V).cursor();do Q(ie.node);while(ie.next())}function K(V){return/\s/.test(V)?`"${V}"`:V}const L=[T.dataSource,T.nameSpace,T.label,T.group,T.rule,T.state,T.type,T.health];var N=(V=>(V.Ok="ok",V.Error="error",V.NoData="nodata",V.Unknown="unknown",V))(N||{});function z(V){const H={labels:[],freeFormWords:[],dataSourceNames:[]},Q={[l]:oe=>H.dataSourceNames.push(oe),[d]:oe=>H.namespace=oe,[c]:oe=>H.groupName=oe,[a]:oe=>H.ruleName=oe,[r]:oe=>H.labels.push(oe),[u]:oe=>H.ruleState=I(oe),[i]:oe=>(0,n.Wd)(oe)?H.ruleType=oe:void 0,[p]:oe=>H.ruleHealth=(0,n.vU)(oe),[g]:oe=>H.freeFormWords.push(oe)};return S(V,L,Q),H}function G(V,H){const Q=[];return H.dataSourceNames&&Q.push(...H.dataSourceNames.map(oe=>({type:l,value:oe}))),H.namespace&&Q.push({type:d,value:H.namespace}),H.groupName&&Q.push({type:c,value:H.groupName}),H.ruleName&&Q.push({type:a,value:H.ruleName}),H.ruleState&&Q.push({type:u,value:H.ruleState}),H.ruleType&&Q.push({type:i,value:H.ruleType}),H.ruleHealth&&Q.push({type:p,value:H.ruleHealth}),H.labels&&Q.push(...H.labels.map(oe=>({type:r,value:oe}))),H.freeFormWords&&Q.push(...H.freeFormWords.map(oe=>({type:g,value:oe}))),F(V,L,Q)}function I(V){if(V==="normal")return t.x_.Inactive;if((0,t.I9)(V))return V}},81001:(Y,O,e)=>{"use strict";e.d(O,{v:()=>T});var t=e(46528),n=e(59980),o=e(59724),s=e(57027),l=e(9471),f=e(44288),d=e(52666),r=e(83881),c=e(32921),a=e(47891),u=e(75849),i=e(59957),p=e(86647),g=e(77599),y=e(29930),E=e(75e3),h=e(88039),v=e(59584),C=e(97573);const m={from:21600,to:0},D=(L,N)=>{const z=P(L,N);if(!z)return m;const{from:G,to:I}=M(z,N);return!G.length&&!I.length?m:{from:Math.max(...G),to:Math.min(...I)}},P=(L,N)=>{switch(L.type){case C.Us.classic:return b(L);case C.Us.math:return x(L,N);case C.Us.resample:case C.Us.reduce:case C.Us.threshold:return A(L)}},b=L=>L.conditions?.map(N=>N.query.params[0]),M=(L,N)=>{let z=[],G=[m.to];for(const I of L){const V=N.find(H=>H.refId===I);!V||!V.relativeTimeRange||(z.push(V.relativeTimeRange.from),G.push(V.relativeTimeRange.to))}return{from:z,to:G}},x=(L,N)=>N.filter(z=>z.queryType==="query"&&L.expression?.includes(z.refId)).map(z=>z.refId),A=L=>L.expression?[L.expression]:void 0;class T{constructor(N=(0,y.i)(),z=(0,p.F)()){this.backendSrv=N,this.dataSourceSrv=z,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(N){if(N.length===0){const z=U(N,d.Gu.Done);return this.subject.next(z)}for(const z of N)if(!(0,E.j)(z.model)){const G=await this.dataSourceSrv.get(z.datasourceUid);if(G.filterQuery&&!G.filterQuery(z.model)){const I=U(N,d.Gu.Done);return this.subject.next(I)}}this.subscription=S(this.backendSrv,N).subscribe({next:z=>{const G=K(z,(I,V)=>{const H=this.lastResult[I],Q=(0,r.zR)(V,H);return(0,v.C)(Q,H)});this.lastResult=G,this.subject.next(this.lastResult)},error:z=>{this.lastResult=B(this.lastResult,z),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let N=!1;const z=K(this.lastResult,(G,I)=>(I.state===d.Gu.Loading&&(N=!0),{...I,state:d.Gu.Done}));N&&this.subject.next(z)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const S=(L,N)=>{const z=U(N,d.Gu.Loading),G={data:{data:N},url:"/api/v1/eval",method:"POST",requestId:(0,f.Z)()};return(0,c.x)({whileLoading:z,source:L.fetch(G).pipe(F(z),(0,o.K)(I=>(0,n.of)(B(z,I))),(0,h.V)(L,G.requestId),(0,s.B)())})},U=(L,N)=>L.reduce((z,G)=>(z[G.refId]={state:N,series:[],timeRange:R(G,L)},z),{}),R=(L,N)=>{if((0,E.j)(L.model)){const z=D(L.model,N);return a.relativeToTimeRange(z)}return L.relativeTimeRange?a.relativeToTimeRange(L.relativeTimeRange):(console.warn(`Query with refId: ${L.refId} did not have any relative time range, using default.`),(0,u.JK)())},F=L=>(0,l.U)(N=>{const{data:z}=N,G={};for(const[I,V]of Object.entries(z.results))G[I]={timeRange:L[I].timeRange,state:d.Gu.Done,series:V.frames.map(i.vP)};return G}),B=(L,N)=>{const z=(0,g.P)(N);return K(L,(G,I)=>({...I,state:d.Gu.Error,error:z}))},K=(L,N)=>{const z={};for(const[G,I]of Object.entries(L))z[G]=N(G,I);return z}},72004:(Y,O,e)=>{"use strict";e.d(O,{QY:()=>mt,Nc:()=>ue,r0:()=>De,X4:()=>vt,hS:()=>ht,oE:()=>it,S6:()=>rt,yO:()=>Qe,mS:()=>Mt,Yh:()=>fe,ei:()=>Te,dV:()=>Ge,lB:()=>Le,dB:()=>We,on:()=>Ye,zy:()=>Z,wE:()=>ne,vL:()=>Ot,sw:()=>Et,Ms:()=>Ce,Vj:()=>ye,dn:()=>ve,y6:()=>q,UR:()=>re,IA:()=>Ie,nw:()=>gt,je:()=>me,iH:()=>tt,wy:()=>Re,D8:()=>Ne,mM:()=>be,hv:()=>et,tg:()=>Ue});var t=e(62992),n=e(82897),o=e(37932),s=e(35645),l=e(46063),f=e(77582),d=e(29930),r=e(41904),c=e(65583),a=e(49187),u=e(54899),i=e(45849);async function p(Ee){try{const Me=await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(Ee)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:Me.data.template_files??{},template_file_provenances:Me.data.template_file_provenances??{},alertmanager_config:Me.data.alertmanager_config??{},last_applied:Me.data.last_applied,id:Me.data.id}}catch(Me){if(Ee===i.GC&&(0,u.kW)(Me)&&Me.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw Me}}async function g(Ee,Me){await(0,c.n)((0,u.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,i.gt)(Ee)}/config/api/v1/alerts`,data:Me,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(Ee){await(0,c.n)((0,u.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,i.gt)(Ee)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function E(Ee){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(Ee)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(Ee,Me){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(Ee)}/api/v2/silences`,data:Me,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function v(Ee,Me){await(0,u.i)().delete(`/api/alertmanager/${(0,i.gt)(Ee)}/api/v2/silence/${encodeURIComponent(Me)}`)}async function C(Ee,Me,He=!0,Ze=!0,lt=!0){const bt=a.Cj.toUrlParams({silenced:He,active:Ze,inhibited:lt})+Me?.map(Je=>`filter=${encodeURIComponent(`${U(Je.name)}=${Je.isRegex?"~":""}"${U(Je.value)}"`)}`).join("&")||"";return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(Ee)}/api/v2/alerts`+(bt?"?"+bt:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function m(Ee){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(Ee)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function D(Ee){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(Ee)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function P(Ee,Me,He){const Ze={receivers:Me,alert:He};try{const lt=await(0,c.n)((0,u.i)().fetch({method:"POST",data:Ze,url:`/api/alertmanager/${(0,i.gt)(Ee)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(b(lt.data))throw new Error(x(lt.data))}catch(lt){throw(0,u.kW)(lt)&&M(lt.data)&&b(lt.data)?new Error(x(lt.data)):lt}}function b(Ee){return Ee.receivers.some(Me=>Me.grafana_managed_receiver_configs.some(He=>He.status==="failed"))}function M(Ee){const Me=Ee?.receivers;return Array.isArray(Me)?Me.every(He=>typeof He.name=="string"&&Array.isArray(He.grafana_managed_receiver_configs)):!1}function x(Ee){return Ee.receivers.flatMap(Me=>Me.grafana_managed_receiver_configs.filter(He=>He.status==="failed").map(He=>He.error??"Unknown error.")).join("; ")}async function A(Ee){await(0,c.n)((0,u.i)().fetch({method:"POST",data:Ee,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{S()})}async function T(){return(await(0,c.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function S(){return(await(0,c.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function U(Ee){return Ee.replace(/"/g,'\\"')}function R(Ee){return(0,u.i)().get("/api/annotations",{alertId:Ee}).then(Me=>Me?.sort(F))}function F(Ee,Me){const He=(bt,Pt)=>bt>Pt?-1:Pt>bt?1:0,Ze=He(Ee.timeEnd,Me.timeEnd);if(Ze)return Ze;const lt=He(Ee.time,Me.time);return lt||He(Ee.id,Me.id)}var B=e(44737),K=e(79572),L=e(644),N=e(95454),z=e(49011),G=e(61068),I=e(94617),V=e(20194),H=e(10505),Q=e(46818),oe=e(60048),se=e(21767),ie=e(79662);function j(Ee){const Me=async Dt=>{if((0,ie.Kl)(Dt)){const Ve=await(0,z.m6)(Ee);for(const[Xe,st]of Object.entries(Ve))for(const ut of st){const xt=ut.rules.find(Kt=>(0,ie.Pc)(Kt)&&Kt.grafana_alert?.uid===Dt.uid);if(xt)return{group:ut,ruleSourceName:i.GC,namespace:Xe,rule:xt}}}if((0,ie.E4)(Dt)){const{ruleSourceName:Ve,namespace:Xe,groupName:st}=Dt,ut=await(0,z.jJ)(Ee,Xe,st);if(!ut)return null;const xt=ut.rules.find(Kt=>{const Jt=oe.Zk(Ve,Xe,ut.name,Kt);return oe.Dg(Jt,Dt)});return xt?{group:ut,ruleSourceName:Ve,namespace:Xe,rule:xt}:null}if((0,ie.qE)(Dt))throw new Error("Native prometheus rules can not be edited in grafana.");return null},He=async Dt=>{const{namespace:Ve,group:Xe,rule:st}=Dt;if(Xe.rules.length===1){await(0,z.BC)(Ee,Ve,Xe.name);return}await(0,z.P4)(Ee,Ve,{...Xe,rules:Xe.rules.filter(ut=>ut!==st)})},Ze=async(Dt,Ve,Xe)=>{const{dataSourceName:st,group:ut,namespace:xt}=Dt,Kt=(0,se.yh)(Dt);if(st&&ut&&xt){if(Xe){const Nn=await Me(oe.CK(Xe));if(!Nn)throw new Error("Rule not found.");if(Nn.namespace!==xt||Nn.group.name!==ut)await He(Nn);else{const jn={...Nn.group,rules:Nn.group.rules.map(ya=>ya===Nn.rule?Kt:ya),evaluateEvery:Ve};return await(0,z.P4)(Ee,xt,jn),oe.Zk(st,xt,ut,Kt)}}const Jt=await(0,z.jJ)(Ee,xt,ut),On=Jt?{...Jt,rules:[...Jt.rules,Kt]}:{name:ut,rules:[Kt]};return await(0,z.P4)(Ee,xt,On),oe.Zk(st,xt,ut,Kt)}else throw new Error("Data source and location must be specified")},lt=async(Dt,Ve,Xe)=>{const{folder:st,group:ut}=Dt;if(!st)throw new Error("Folder must be specified");const xt=(0,se.mI)(Dt),Kt=st.title,Jt={name:ut,interval:Ve};if(!Xe)return bt(Kt,Jt,xt);const On=await Me(oe.CK(Xe));if(!On)throw new Error("Rule not found.");const Nn=On.namespace===Kt,jn=On.group.name===Dt.group;return Nn&&jn?Je(On,xt,Ve):Pt(Kt,Jt,On,xt)},bt=async(Dt,Ve,Xe)=>{const st=await(0,z.jJ)(Ee,Dt,Ve.name);if(!st)throw new Error(`No group found with name "${Ve.name}"`);const ut={name:Ve.name,interval:Ve.interval,rules:(st.rules??[]).concat(Xe)};return await(0,z.P4)(Ee,Dt,ut),{uid:Xe.grafana_alert.uid??"",ruleSourceName:i.GC}},Pt=async(Dt,Ve,Xe,st)=>(de(Xe,st),await bt(Dt,Ve,st)),Je=async(Dt,Ve,Xe)=>{de(Dt,Ve);const st=Dt.group.rules.map(ut=>(0,ie.Pc)(ut)&&ut.grafana_alert.uid===Dt.rule.grafana_alert.uid?Ve:ut);return await(0,z.P4)(Ee,Dt.namespace,{name:Dt.group.name,interval:Xe,rules:st}),{uid:Dt.rule.grafana_alert.uid,ruleSourceName:i.GC}};return{findEditableRule:Me,deleteRule:He,saveLotexRule:Ze,saveGrafanaRule:lt}}function de(Ee,Me){if(!(0,ie.Pc)(Ee.rule))throw new Error("The rule is not a Grafana managed rule");const He=Ee.rule.grafana_alert.uid;Me.grafana_alert.uid=He}const ce=30*1e3;function ee(Ee,Me){const Ze=Ee().unifiedAlerting.dataSources[Me]?.result;if(!Ze)throw new Error(`Data source configuration is not available for "${Me}" data source`);return Ze}function le(Ee,Me){const He=ee(Ee,Me);if(!He.rulerConfig)throw new Error(`Ruler API is not available for ${Me}`);return He.rulerConfig}const q=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:Ee,filter:Me,limitAlerts:He,matcher:Ze,state:lt},bt)=>{await bt.dispatch(gt({rulesSourceName:Ee}));const Pt=(0,r.pM)(N.j,`[${Ee}] Prometheus rules loaded`,{dataSourceName:Ee,thunk:"unifiedalerting/fetchPromRules"});return await(0,Q.$b)(Pt(Ee,Me,He,Ze,lt))}),fe=(0,t.hg)("unifiedalerting/fetchAmConfig",(Ee,Me)=>(0,Q.$b)((async()=>{if((0,i.RY)(Ee))return D(Ee).then(bt=>({alertmanager_config:bt.config,template_files:{}}));const{data:He}=await Me.dispatch(K.T.endpoints.discoverAmFeatures.initiate({amSourceName:Ee})),Ze=He?.lazyConfigInit??!1,lt=(0,r.pM)(p,`[${Ee}] Alertmanager config loaded`,{dataSourceName:Ee,thunk:"unifiedalerting/fetchAmConfig"});return(0,H.fm)(()=>lt(Ee),bt=>!!(0,Q.kk)(bt)?.includes("alertmanager storage object not found")&&!Ze,ce).then(bt=>(0,n.isEmpty)(bt.alertmanager_config)&&(0,n.isEmpty)(bt.template_files)&&Ee!==i.GC?D(Ee).then(Pt=>({alertmanager_config:Pt.config,template_files:{},template_file_provenances:bt.template_file_provenances,last_applied:bt.last_applied,id:bt.id})):bt).catch(bt=>{if(Ze&&(0,Q.kk)(bt)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw bt})})())),Z=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,Q.$b)(T())),ne=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,Q.$b)(S())),re=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:Ee,filter:Me},{dispatch:He,getState:Ze})=>{await He(gt({rulesSourceName:Ee}));const lt=le(Ze,Ee),bt=(0,r.pM)(z.m6,`[${Ee}] Ruler rules loaded`,{dataSourceName:Ee,thunk:"unifiedalerting/fetchRulerRules"});return await(0,Q.$b)(bt(lt,Me))});function ve({rulesSourceName:Ee}){return async(Me,He)=>{await Me(gt({rulesSourceName:Ee}));const Ze=ee(He,Ee);await Me(q({rulesSourceName:Ee})),Ze.rulerConfig&&await Me(re({rulesSourceName:Ee}))}}const me=(0,t.hg)("unifiedalerting/fetchSilences",Ee=>{const Me=(0,r.pM)(E,`[${Ee}] Silences loaded`,{dataSourceName:Ee,thunk:"unifiedalerting/fetchSilences"});return(0,Q.$b)(Me(Ee))});function Ie(Ee){return(Me,He)=>{const{rulerRules:Ze}=He().unifiedAlerting,lt=Ze[Ee];(0,n.isEmpty)(lt?.result)&&!(lt&&(0,ie.m$)(lt))&&!lt?.loading&&Me(re({rulesSourceName:Ee}))}}function Ge(){return async Ee=>{const Me=(0,i.mA)().map(He=>Ee(gt({rulesSourceName:He})));await Promise.allSettled(Me)}}const gt=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:Ee})=>(0,Q.$b)((async()=>{if(Ee===i.GC)return{name:i.GC,id:i.GC,rulerConfig:{dataSourceName:i.GC,apiVersion:"legacy"}};const Me=(0,i.VX)(Ee);if(!Me)throw new Error(`Missing data source configuration for ${Ee}`);const{id:He,name:Ze}=Me,bt=await(0,r.pM)(B.C$,`[${Ee}] Rules source features discovered`,{dataSourceName:Ee,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ze),Pt=bt.features.rulerApiEnabled?{dataSourceName:Ze,apiVersion:bt.application===l.T8.Cortex?"legacy":"config"}:void 0;return{name:Ze,id:He,rulerConfig:Pt}})()),{condition:({rulesSourceName:Ee},{getState:Me})=>{const He=Me().unifiedAlerting.dataSources,Ze=Boolean(He[Ee]?.result),lt=Boolean(He[Ee]?.error);return!(Ze||lt)}});function Te(Ee=!1,Me={}){return async(He,Ze)=>{const lt=performance.now();await Promise.allSettled((0,i.mA)().map(async bt=>{await He(gt({rulesSourceName:bt}));const{promRules:Pt,rulerRules:Je,dataSources:Dt}=Ze().unifiedAlerting,Ve=Dt[bt].result;if(!Ve)return;const Xe=Ee||!Pt[bt]?.loading,st=(Ee||!Je[bt]?.loading)&&Boolean(Ve.rulerConfig);await Promise.allSettled([Xe&&He(q({rulesSourceName:bt,...Me})),st&&He(re({rulesSourceName:bt}))])})),(0,r.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-lt).toFixed(0)})}}function Le(Ee=!1){return async(Me,He)=>{const{promRules:Ze}=He().unifiedAlerting;(0,i.mA)().map(lt=>{(Ee||!Ze[lt]?.loading)&&Me(q({rulesSourceName:lt}))})}}const Ye=(0,t.hg)("unifiedalerting/fetchEditableRule",(Ee,Me)=>{const He=le(Me.getState,Ee.ruleSourceName);return(0,Q.$b)(j(He).findEditableRule(Ee))});function it(Ee,Me){return async(He,Ze)=>{(0,Q.Ez)((async()=>{const lt=(0,i.EG)(Ee.rulesSource),bt=le(Ze,lt);await(0,z.BC)(bt,Ee.name,Me.name),await He(ve({rulesSourceName:lt}))})(),{successMessage:"Group deleted"})}}function ht(Ee,Me={}){return async(He,Ze)=>{(0,Q.Ez)((async()=>{const lt=le(Ze,Ee.ruleSourceName),bt=j(lt),Pt=await bt.findEditableRule(Ee);if(!Pt)throw new Error("Rule not found.");await bt.deleteRule(Pt),await He(ve({rulesSourceName:Pt.ruleSourceName})),Me.navigateTo&&o.E1.replace(Me.navigateTo)})(),{successMessage:"Rule deleted."})}}const Re=(0,t.hg)("unifiedalerting/saveRuleForm",({values:Ee,existing:Me,redirectOnSave:He,evaluateEvery:Ze},lt)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{type:bt}=Ee;let Pt;if(bt===I.$.cloudAlerting||bt===I.$.cloudRecording){if(!Ee.dataSourceName)throw new Error("The Data source has not been defined.");const Je=le(lt.getState,Ee.dataSourceName);Pt=await j(Je).saveLotexRule(Ee,Ze,Me),await lt.dispatch(re({rulesSourceName:Ee.dataSourceName}))}else if(bt===I.$.grafana){const Je=le(lt.getState,i.GC);Pt=await j(Je).saveGrafanaRule(Ee,Ze,Me),await lt.dispatch(re({rulesSourceName:i.GC}))}else throw new Error("Unexpected rule form type");if((0,r.PN)(r.z7.successSavingAlertRule,{type:bt,isNew:(!Me).toString()}),Me||(0,r.I5)({grafana_version:s.v.buildInfo.version,org_id:f.Vt.user.orgId,user_id:f.Vt.user.id}),He)o.E1.push(He);else{const Je=oe.$V(Pt);if(!Je){o.E1.push("/alerting/list");return}const Dt=`/alerting/${encodeURIComponent(Je)}/edit`;o.E1.getLocation().pathname!==Dt?o.E1.replace(Dt):lt.dispatch(Ye(Pt))}})()),{successMessage:Me?`Rule "${Ee.name}" updated.`:`Rule "${Ee.name}" saved.`,errorMessage:"Failed to save rule"})),ye=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,Q.$b)((0,L.i9)())),Ce=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",Ee=>(0,Q.$b)(R(Ee))),be=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:Ee,oldConfig:Me,newConfig:He,successMessage:Ze,redirectPath:lt,refetch:bt},Pt)=>(0,Q.Ez)((0,Q.$b)((async()=>{const Je=await Pt.dispatch(fe(Ee)).unwrap(),Dt=(0,n.isEmpty)(Je.alertmanager_config)&&(0,n.isEmpty)(Je.template_files),Ve=JSON.stringify(Je)!==JSON.stringify(Me);if(!Dt&&Ve)throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await g(Ee,(0,V.X4)(He)),bt&&await Pt.dispatch(fe(Ee)),lt&&o.E1.push((0,H.eQ)(lt,Ee))})()),{successMessage:Ze})),We=(0,t.hg)("unifiedalerting/fetchAmAlerts",Ee=>(0,Q.$b)(C(Ee,[],!0,!0,!0))),Qe=(Ee,Me)=>async He=>{await(0,Q.Ez)(v(Ee,Me),{successMessage:"Silence expired."}),He(me(Ee)),He(We(Ee))},mt=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:Ee,payload:Me,exitOnSave:He,successMessage:Ze})=>(0,Q.Ez)((0,Q.$b)((async()=>{await h(Ee,Me),He&&o.E1.push("/alerting/silences")})()),{successMessage:Ze})),vt=(Ee,Me)=>(He,Ze)=>{const lt=Ze().unifiedAlerting.amConfigs?.[Me]?.result;if(!lt)throw new Error(`Config for ${Me} not found`);if(!lt.alertmanager_config.receivers?.find(Pt=>Pt.name===Ee))throw new Error(`Cannot delete receiver ${Ee}: not found in config.`);const bt={...lt,alertmanager_config:{...lt.alertmanager_config,receivers:lt.alertmanager_config.receivers.filter(Pt=>Pt.name!==Ee)}};return He(be({newConfig:bt,oldConfig:lt,alertManagerSourceName:Me,successMessage:"Contact point deleted.",refetch:!0}))},rt=(Ee,Me)=>(He,Ze)=>{const lt=Ze().unifiedAlerting.amConfigs?.[Me]?.result;if(!lt)throw new Error(`Config for ${Me} not found`);if(typeof lt.template_files?.[Ee]!="string")throw new Error(`Cannot delete template ${Ee}: not found in config.`);const bt={...lt.template_files};delete bt[Ee];const Pt={...lt,alertmanager_config:{...lt.alertmanager_config,templates:lt.alertmanager_config.templates?.filter(Je=>Je!==Ee)},template_files:bt};return He(be({newConfig:Pt,oldConfig:lt,alertManagerSourceName:Me,successMessage:"Template deleted.",refetch:!0}))},Ot=(0,t.hg)("unifiedalerting/fetchFolder",Ee=>(0,Q.$b)(d.ae.getFolderByUid(Ee,{withAccessControl:!0}))),Et=Ee=>(Me,He)=>{He().unifiedAlerting.folders[Ee]?.dispatched||Me(Ot(Ee))},Mt=(0,t.hg)("unifiedalerting/fetchAlertGroups",Ee=>(0,Q.$b)(m(Ee))),ue=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(Ee,Me)=>(0,Q.Ez)((0,Q.$b)((async()=>{await y(Ee),await Me.dispatch(fe(Ee))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),De=(Ee,Me)=>async(He,Ze)=>{const lt=Ze().unifiedAlerting.amConfigs[Ee].result,bt=lt?.alertmanager_config?.mute_time_intervals?.filter(({name:Pt})=>Pt!==Me)??[];lt&&(0,Q.Ez)(He(be({alertManagerSourceName:Ee,oldConfig:lt,newConfig:{...lt,alertmanager_config:{...lt.alertmanager_config,route:lt.alertmanager_config.route?(0,V.rU)(Me,lt.alertmanager_config?.route):void 0,mute_time_intervals:bt}},refetch:!0})),{successMessage:`Deleted "${Me}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Ne=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:Ee,receivers:Me,alert:He})=>(0,Q.Ez)((0,Q.$b)(P(Ee,Me,He)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),tt=(Ee,Me)=>Ee.filter(He=>{const{forDuration:Ze}=(0,G.qd)(He,Me),lt=(0,G.Bg)(Ze),bt=(0,G.Bg)(Me);return lt!==0&&lt<bt}),et=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(Ee,Me)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{rulesSourceName:He,namespaceName:Ze,groupName:lt,newNamespaceName:bt,newGroupName:Pt,groupInterval:Je}=Ee,Dt=le(Me.getState,He),Ve=await(0,z.m6)(Dt);if(!Boolean(Ve[Ze]))throw new Error(`Namespace "${Ze}" not found.`);const st=Ve[Ze].find(Kt=>Kt.name===lt);if(!st)throw new Error(`Group "${lt}" not found.`);const ut=Boolean(Ve[Ze].find(Kt=>Kt.name===Pt));if(Pt!==lt&&ut)throw new Error(`Group "${Pt}" already exists in namespace "${Ze}".`);const xt=Boolean(Ve[bt]);if(bt!==Ze&&xt)throw new Error(`Namespace "${bt}" already exists.`);if(bt===Ze&&lt===Pt&&Je===st.interval)throw new Error("Nothing changed.");if(Je!==st.interval){const Kt=tt(st.rules,Je??"1m");if(Kt.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Kt.map(Jt=>{const{alertName:On}=(0,G.qd)(Jt,Je??"");return On}).join(",")}`)}if(bt!==Ze){for(const Kt of Ve[Ze])await(0,z.P4)(Dt,bt,Kt.name===lt?{...Kt,name:Pt,interval:Je}:Kt);await(0,z.sz)(Dt,Ze)}else await(0,z.P4)(Dt,Ze,{...st,name:Pt,interval:Je}),Pt!==lt&&await(0,z.BC)(Dt,Ze,lt);await Me.dispatch(re({rulesSourceName:He}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ue=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(Ee,Me)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{rulesSourceName:He,namespaceName:Ze,groupName:lt,newRules:bt}=Ee,Pt=le(Me.getState,He),Dt=(await(0,z.m6)(Pt))[Ze].find(Xe=>Xe.name===lt);if(!Dt)throw new Error(`Group "${lt}" not found.`);const Ve={name:Dt.name,interval:Dt.interval,rules:bt};await(0,z.P4)(Pt,Ze,Ve),await Me.dispatch(re({rulesSourceName:He}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Fe=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(Ee,Me)=>(0,Q.Ez)((0,Q.$b)((async()=>{await A(Ee),Me.dispatch(ne())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(Y,O,e)=>{"use strict";e.d(O,{r:()=>o});var t=e(9892),n=e(39031);const o=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(9892);const n=o=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${o.spacing(2,0)};
  `},2390:(Y,O,e)=>{"use strict";e.d(O,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},94617:(Y,O,e)=>{"use strict";e.d(O,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},4528:(Y,O,e)=>{"use strict";e.d(O,{t:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},97953:(Y,O,e)=>{"use strict";e.d(O,{Bz:()=>i,Fo:()=>d,Ko:()=>u,Ob:()=>f,QX:()=>a,Rv:()=>g,ql:()=>p});var t=e(82002),n=e(84532),o=e(27876),s=e(45849);function l(y){return(0,s.HY)(y)?"grafana":"external"}const f={read:{grafana:o.AccessControlAction.AlertingInstanceRead,external:o.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:o.AccessControlAction.AlertingInstanceCreate,external:o.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:o.AccessControlAction.AlertingInstanceUpdate,external:o.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:o.AccessControlAction.AlertingInstanceUpdate,external:o.AccessControlAction.AlertingInstancesExternalWrite}},d={read:{grafana:o.AccessControlAction.AlertingNotificationsRead,external:o.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:o.AccessControlAction.AlertingNotificationsWrite,external:o.AccessControlAction.AlertingNotificationsExternalWrite}},r={read:o.AccessControlAction.AlertingProvisioningRead,write:o.AccessControlAction.AlertingProvisioningWrite},c={read:{grafana:o.AccessControlAction.AlertingRuleRead,external:o.AccessControlAction.AlertingRuleExternalRead},create:{grafana:o.AccessControlAction.AlertingRuleCreate,external:o.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:o.AccessControlAction.AlertingRuleUpdate,external:o.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:o.AccessControlAction.AlertingRuleDelete,external:o.AccessControlAction.AlertingRuleExternalWrite}};function a(y){const E=l(y);return{read:f.read[E],create:f.create[E],update:f.update[E],delete:f.delete[E]}}function u(y){const E=l(y);return{read:d.read[E],create:d.create[E],update:d.update[E],delete:d.delete[E]}}function i(y){const E=l(y);return{read:c.read[E],create:c.create[E],update:c.update[E],delete:c.delete[E]}}function p(y,E){return()=>t.Vt.evaluatePermission(()=>E,y)}function g(){return{canCreateGrafanaRules:t.Vt.hasAccess(o.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(c.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(o.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(c.create.external,t.Vt.isEditor),canEditRules:y=>{const E=y===s.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(i(y).update,E)},canReadProvisioning:t.Vt.hasAccess(r.read,(0,n.RN)())}}},20194:(Y,O,e)=>{"use strict";e.d(O,{FM:()=>r,J8:()=>U,X4:()=>f,Xy:()=>x,Zh:()=>m,_J:()=>g,cm:()=>p,eD:()=>P,m8:()=>R,nv:()=>a,qw:()=>F,rU:()=>d,tA:()=>E,tC:()=>v,u6:()=>T,uK:()=>A,v7:()=>S,vB:()=>b,xz:()=>C,zy:()=>u});var t=e(82897),n=e.n(t),o=e(39031),s=e(82963),l=e(45849);function f(B){return B.alertmanager_config.receivers||(B.alertmanager_config.receivers=[{name:"default "}]),B.alertmanager_config.route||(B.alertmanager_config.route={receiver:B.alertmanager_config.receivers[0].name}),B.template_files||(B.template_files={}),B}function d(B,K){return{...K,mute_time_intervals:K.mute_time_intervals?.filter(N=>N!==B)??[],routes:K.routes?.map(N=>d(B,N))}}function r(B,K,L){return{...L,mute_time_intervals:L.mute_time_intervals?.map(N=>N===K?B:N),routes:L.routes?.map(N=>r(B,K,N))}}function c(B,K){return(K.receiver===B||K.routes?.some(L=>c(B,L)))??!1}function a(B,K){return(K.alertmanager_config.route&&c(B,K.alertmanager_config.route))??!1}function u(B){return B.isEqual?B.isRegex?o._M.regex:o._M.equal:B.isRegex?o._M.notRegex:o._M.notEqual}function i(B){switch(B){case o._M.equal:return{isEqual:!0,isRegex:!1};case o._M.notEqual:return{isEqual:!1,isRegex:!1};case o._M.regex:return{isEqual:!0,isRegex:!0};case o._M.notRegex:return{isEqual:!1,isRegex:!0}}}function p(B){return{name:B.name,value:B.value,operator:u(B)}}function g(B){return{name:B.name,value:B.value,...i(B.operator)}}function y(B){return`{${B.map(p).reduce((N,z)=>{const G=`${z.name}${z.operator}"${z.value}"`;return N?`${N},${G}`:G},"")}}`}const E=[{label:o._M.equal,description:"Equals",value:o._M.equal},{label:o._M.notEqual,description:"Does not equal",value:o._M.notEqual},{label:o._M.regex,description:"Matches regex",value:o._M.regex},{label:o._M.notRegex,description:"Does not match regex",value:o._M.notRegex}],h=[o._M.regex,o._M.notRegex,o._M.notEqual,o._M.equal];function v(B){const K=B.trim();if(K.startsWith("{")&&K.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${K}`);const L=h.map(V=>[V,K.indexOf(V)]).filter(([V,H])=>H>-1).sort((V,H)=>V[1]-H[1]);if(!L.length)throw new Error(`Invalid matcher: ${K}`);const[N,z]=L[0],G=K.slice(0,z).trim(),I=K.slice(z+N.length).trim();if(!G)throw new Error(`Invalid matcher: ${K}`);return{name:G,value:I,isRegex:N===o._M.regex||N===o._M.notRegex,isEqual:N===o._M.equal||N===o._M.regex}}function C(B){const K=u(B);return[B.name,K,B.value]}function m(B){const K=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,L=[];return B.replace(K,(N,z,G,I)=>{const V=G===o._M.equal||G===o._M.regex,H=G===o._M.regex||G===o._M.notRegex;return L.push({name:z,value:H?D(I.trim()):I.trim(),isEqual:V,isRegex:H}),""}),L}function D(B){try{return new RegExp(B),B}catch{return""}}function P(B,K){return K.every(({name:L,value:N,isRegex:z,isEqual:G})=>Object.entries(B).some(([I,V])=>{const H=L===I;let Q;return G&&!z&&(Q=N===V),!G&&!z&&(Q=N!==V),G&&z&&(Q=new RegExp(N).test(V)),!G&&z&&(Q=!new RegExp(N).test(V)),H&&Q}))}function b(...B){const K=B.map(m).flat(),L=(0,t.uniqWith)(K,t.isEqual);return y(L)}function M(){return(0,s.x)().filter(B=>B.type===l.ye.Alertmanager)}function x(B){return M().find(K=>B===K.uid)}function A(B){const{times:K,weekdays:L,days_of_month:N,months:z,years:G}=B,I=T(K),V=S(L),H=U(N),Q=R(z),oe=F(G);return[I,V,H,Q,oe].join(", ")}function T(B){return"Times: "+(B?B?.map(({start_time:K,end_time:L})=>`${K} - ${L} UTC`).join(" and "):"All")}function S(B){return"Weekdays: "+(B?.map(K=>{if(K.includes(":"))return K.split(":").map(L=>{const N=L.slice(0,3);return N[0].toLocaleUpperCase()+N.slice(1)}).join("-");{const L=K.slice(0,3);return L[0].toLocaleUpperCase()+L.slice(1)}}).join(", ")??"All")}function U(B){return"Days of the month: "+(B?.join(", ")??"All")}function R(B){return"Months: "+(B?.join(", ")??"All")}function F(B){return"Years: "+(B?.join(", ")??"All")}},99085:(Y,O,e)=>{"use strict";e.d(O,{$9:()=>l,XW:()=>f});var t=e(66111),n=e(37190),o=e(10505);function s(d){return{dashboardUID:d.find(([r])=>r===n.q6.dashboardUID)?.[1],panelId:d.find(([r])=>r===n.q6.panelID)?.[1]}}function l(d){return(0,t.useMemo)(()=>Object.entries(d||{}).filter(([r,c])=>!!c.trim()),[d])}function f(d){const r=new Map,{panelId:c,dashboardUID:a}=s(d);return a&&r.set(n.q6.dashboardUID,(0,o.RQ)(a)),a&&c&&r.set(n.q6.panelID,(0,o.yM)(a,c)),r}},82963:(Y,O,e)=>{"use strict";e.d(O,{f:()=>s,x:()=>o});var t=e(35645),n=e(20383);function o(){return Object.values(t.v.datasources)}function s(l){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const f=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!l||!(0,n.wd)(l))return{globalLimit:f,exceedsLimit:!1};const d=(0,n.nd)(l),r=f>d&&d>0;return{globalLimit:f,exceedsLimit:r}}},37190:(Y,O,e)=>{"use strict";e.d(O,{c4:()=>o,cm:()=>l,de:()=>s,iF:()=>f,jZ:()=>t,m4:()=>d,p4:()=>n,q6:()=>u,vY:()=>i});const t="ruler not supported",n=2e4,o="alertmanager",s="alerting-alertmanager",l=2e4,f=2e4,d=2e4,r="timeseries",c="table",a="stat";var u=(p=>(p.description="description",p.summary="summary",p.runbookURL="runbook_url",p.alertId="__alertId__",p.dashboardUID="__dashboardUid__",p.panelID="__panelId__",p))(u||{});const i={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(Y,O,e)=>{"use strict";e.d(O,{EG:()=>m,Eu:()=>u,GC:()=>d,G_:()=>F,HY:()=>M,JY:()=>r,LE:()=>E,P:()=>R,RY:()=>b,VX:()=>i,aM:()=>p,c$:()=>x,gt:()=>S,h_:()=>C,jq:()=>P,mA:()=>v,o_:()=>A,v_:()=>D,ye:()=>c,z3:()=>y});var t=e(86647),n=e(82002),o=e(39031),s=e(27876),l=e(97953),f=e(82963);const d="grafana",r="-- Grafana --";var c=(B=>(B.Alertmanager="alertmanager",B.Loki="loki",B.Prometheus="prometheus",B))(c||{});const a=["loki","prometheus"];function u(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,f.x)().filter(B=>a.includes(B.type)&&B.jsonData.manageAlerts!==!1).sort((B,K)=>B.name.localeCompare(K.name)):[]}function i(B){return u().find(K=>K.name===B)}function p(){return(0,f.x)().filter(B=>B.type==="alertmanager").sort((B,K)=>B.name.localeCompare(K.name))}const g={name:d,imgUrl:"public/img/grafana_icon.svg"};function y(){return[g,...p().map(B=>({name:B.name,displayName:B.name,imgUrl:B.meta.info.logos.small,meta:B.meta}))]}function E(B){const K=[],L={instance:l.Ob.read,notification:l.Fo.read};if(n.Vt.hasPermission(L[B].grafana)&&K.push(g),n.Vt.hasPermission(L[B].external)){const N=p().map(z=>({name:z.name,displayName:z.name,imgUrl:z.meta.info.logos.small,meta:z.meta}));K.push(...N)}return K}function h(B){const K=x(B);if(!K)throw new Error(`Data source ${B} not found`);if(K.type!=="loki"&&K.type!=="prometheus")throw new Error(`Unexpected data source type ${K.type}`);return K}function v(){const B=u().map(K=>K.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&B.push(d),B}function C(){const B=u();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&B.push(d),B}function m(B){return P(B)?B.name:B}function D(B){return P(B)?B.uid:d}function P(B){return B!==d}function b(B){return B!==d&&x(B)?.jsonData?.implementation===o.sK.prometheus}function M(B){return B===d}function x(B){return(0,f.x)().find(K=>K.name===B)}function A(B){return B===d?d:x(B)}function T(B){if(B===d)return d;const K=x(B);if(!K)throw new Error(`Datasource "${B}" not found`);return String(K.id)}function S(B){if(B===d)return d;const K=x(B);if(!K)throw new Error(`Datasource "${B}" not found`);return K.uid}function U(){return(0,t.F)().getList({alerting:!0})[0]}function R(){const B=(0,t.F)().getInstanceSettings("default");return B?.meta.alerting??!1?B:U()}function F(B){return B.jsonData.manageAlerts!==!1}},61893:(Y,O,e)=>{"use strict";e.d(O,{P3:()=>t,cH:()=>n,nW:()=>o});function t(s){return Object.entries(s).map(([l,f])=>`${l}=${f}`).sort()}function n(s){return Object.entries(s).map(([l,f])=>[l,f])}function o(s){const l={};return s.forEach(f=>{l[f[0]]=f[1]}),l}},66367:(Y,O,e)=>{"use strict";e.d(O,{R:()=>s,r:()=>l});var t=e(82897),n=e.n(t),o=e(20194);function s(f){const d=f.filter(r=>!!r.trim()).map(r=>(0,o.tC)(r.trim()));return(0,t.uniqBy)(d,r=>r.name)}const l=f=>{const d=Object.entries(f).filter(([c])=>!(c.startsWith("__")&&c.endsWith("__"))),r=new URLSearchParams;return d.forEach(([c,a])=>r.append("matcher",`${c}=${a}`)),r}},10505:(Y,O,e)=>{"use strict";e.d(O,{ET:()=>g,GV:()=>p,HV:()=>x,J8:()=>m,RQ:()=>T,S0:()=>E,V2:()=>u,VN:()=>b,Vv:()=>P,Zl:()=>F,__:()=>M,aH:()=>A,eQ:()=>D,fm:()=>U,lC:()=>h,mH:()=>i,pF:()=>C,t6:()=>y,yM:()=>S});var t=e(82897),n=e.n(t),o=e(79662),s=e(40286),l=e(46063),f=e(37190),d=e(45849),r=e(66367),c=e(60048),a=e(93411);function u(B,K,L){const N=(0,d.EG)(B),z=c.Yd(N,K),G=encodeURIComponent(c.$V(z)),I=encodeURIComponent(N);return(0,a.u)(`/alerting/${I}/${G}/view`,{returnTo:L})}function i(B,K){return(0,a.u)("/explore",{left:JSON.stringify({datasource:B,queries:[{refId:"A",datasource:B,expr:K}],range:{from:"now-1h",to:"now"}})})}function p(B,K=""){return(0,a.u)(`/alerting/notifications/receivers/${encodeURIComponent(B)}/edit`,{alertmanager:K})}function g(B,K=""){return(0,a.u)("/alerting/routes/mute-timing/edit",{muteName:B,alertmanager:K})}function y(B,K){return(0,d.jq)(B)?(0,a._)(`/alerting/${encodeURIComponent(B.name)}/${encodeURIComponent(K.name)}/find`):window.location.href.split("?")[0]}function E(B){return B.reduce((K,{key:L,value:N})=>(K[L]=N,K),{})}const h=B=>{const K=B.queryString===void 0?void 0:String(B.queryString),L=B.alertState===void 0?void 0:String(B.alertState),N=B.dataSource===void 0?void 0:String(B.dataSource),z=B.ruleType===void 0?void 0:String(B.ruleType),G=B.groupBy===void 0?void 0:String(B.groupBy).split(",");return{queryString:K,alertState:L,dataSource:N,groupBy:G,ruleType:z}},v=B=>({queryString:B.get("queryString")??void 0,contactPoint:B.get("contactPoint")??void 0}),C=B=>{const K=B.queryString===void 0?void 0:String(B.queryString),L=B.silenceState===void 0?void 0:String(B.silenceState);return{queryString:K,silenceState:L}};function m(B){return Object.entries(B).map(([K,L])=>({key:K,value:L}))}function D(B,K,L){const N=new URLSearchParams(L);return K&&N.append(f.c4,K),`${B}?${N.toString()}`}function P(B,K){const L={alertname:K.name,...K.labels};return b(B,L)}function b(B,K){const L=new URLSearchParams;return L.append("alertmanager",B),(0,r.r)(K).forEach((z,G)=>L.append(G,z)),(0,a.u)("/alerting/silence/new",L)}function M(B){return(0,a.u)(`/datasources/edit/${B.uid}`)}function x(B){return(0,a.u)(`/dashboards/f/${B}`)}function A(B){return(0,a.u)(`/dashboards/f/${B.uid}/${B.title}/settings`)}function T(B){return(0,a.u)(`/d/${encodeURIComponent(B)}`)}function S(B,K){return(0,a.u)(`/d/${encodeURIComponent(B)}`,{viewPanel:K})}function U(B,K,L,N=1e3){const z=new Date().getTime(),G=()=>B().catch(I=>{if(K(I)&&new Date().getTime()-z<L)return new Promise(V=>setTimeout(V,N)).then(G);throw I});return G()}const R={[l.bj.Alerting]:1,[l.x_.Firing]:1,[l.bj.Error]:1,[l.bj.Pending]:2,[l.x_.Pending]:2,[l.x_.Inactive]:2,[l.bj.NoData]:3,[l.bj.Normal]:4};function F(B,K){if(B===s.As.Importance)return(0,t.sortBy)(K,N=>[R[(0,l.ED)(N.state)],(0,o.pB)(N).toLocaleLowerCase()]);if(B===s.As.TimeAsc)return(0,t.sortBy)(K,N=>[new Date(N.activeAt)||new Date,(0,o.pB)(N).toLocaleLowerCase()]);if(B===s.As.TimeDesc)return(0,t.sortBy)(K,N=>[new Date(N.activeAt)||new Date,(0,o.pB)(N).toLocaleLowerCase()]).reverse();const L=(0,t.sortBy)(K,N=>(0,o.pB)(N).toLocaleLowerCase());return B===s.As.AlphaDesc&&L.reverse(),L}},46818:(Y,O,e)=>{"use strict";e.d(O,{$b:()=>a,Ez:()=>u,PE:()=>g,i6:()=>r,jK:()=>c,kk:()=>p,op:()=>C,oq:()=>f,yR:()=>v});var t=e(62992),n=e(4063),o=e(54899),s=e(77582),l=e(41904);const f=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function d(m,D=f,P){if(m.pending.match(P))return{result:D.result,loading:!0,error:D.error,dispatched:!0,requestId:P.meta.requestId};if(m.fulfilled.match(P)){if(D.requestId===void 0||D.requestId===P.meta.requestId)return{...D,result:P.payload,loading:!1,error:void 0}}else if(m.rejected.match(P)&&D.requestId===P.meta.requestId)return{...D,loading:!1,error:P.error};return D}function r(m,D){return(0,t.oM)({name:m,initialState:f,reducers:{},extraReducers:P=>P.addDefaultCase((b,M)=>d(D,b,M))})}function c(m,D,P){return(0,t.oM)({name:m,initialState:{},reducers:{},extraReducers:b=>b.addDefaultCase((M,x)=>{if((0,t.Gx)(D)(x)){const A=x,T=P(A.meta.arg);return{...M,[T]:d(D,M[T],A)}}return M})})}function a(m){return m.catch(D=>{throw{message:p(D),code:D.statusCode}})}function u(m,D){return m.then(P=>(D.successMessage&&s.h$.emit(n.SI.alertSuccess,[D.successMessage]),P)).catch(P=>{const b=p(P);throw s.h$.emit(n.SI.alertError,[`${D.errorMessage??"Error"}: ${b}`]),P})}const i="Unknown Error";function p(m){if((0,o.kW)(m))if(m.data?.message){let P=m.data?.message;return typeof m.data?.error=="string"&&(P+=`; ${m.data.error}`),P}else{if(Array.isArray(m.data)&&m.data.length&&m.data[0]?.message)return m.data.map(P=>P?.message).filter(P=>!!P).join(" ");if(m.statusText)return m.statusText}const D=m?.message;return D||((0,l.PN)(l.z7.unknownMessageFromError,{error:JSON.stringify(m)}),i)}function g(m){return Object.values(m).every(y)}function y(m){return m.dispatched&&!m.loading}function E(m){return Object.values(m).every(h)}function h(m){return m.dispatched&&!m.loading&&!m.error}function v(m){return Object.values(m).some(C)}function C(m){return m?m.dispatched&&m.loading:!1}},21767:(Y,O,e)=>{"use strict";e.d(O,{DQ:()=>D,WL:()=>P,aR:()=>S,lN:()=>b,mI:()=>m,s0:()=>M,tO:()=>B,uZ:()=>h,yh:()=>v});var t=e(75849),n=e(47891),o=e(86647),s=e(22069),l=e(99822),f=e(97573),d=e(46063),r=e(67162),c=e(32139),a=e(94617),u=e(97953),i=e(37190),p=e(45849),g=e(10505),y=e(79662),E=e(20383);const h=()=>{const{canCreateGrafanaRules:K,canCreateCloudRules:L}=(0,u.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:i.q6.summary,value:""},{key:i.q6.description,value:""},{key:i.q6.runbookURL,value:""}],dataSourceName:null,type:K?a.$.grafana:L?a.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:d.g0.NoData,execErrState:d.g0.Error,evaluateFor:"5m",evaluateEvery:c.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function v(K){const{name:L,expression:N,forTime:z,forTimeUnit:G,type:I}=K;if(I===a.$.cloudAlerting)return{alert:L,for:`${z}${G}`,annotations:(0,g.S0)(K.annotations||[]),labels:(0,g.S0)(K.labels||[]),expr:N};if(I===a.$.cloudRecording)return{record:L,labels:(0,g.S0)(K.labels||[]),expr:N};throw new Error(`unexpected rule type: ${I}`)}function C(K){return[...(0,g.J8)(K||{}),{key:"",value:""}]}function m(K){const{name:L,condition:N,noDataState:z,execErrState:G,evaluateFor:I,queries:V,isPaused:H}=K;if(N)return{grafana_alert:{title:L,condition:N,no_data_state:z,exec_err_state:G,data:V.map(R),is_paused:Boolean(H)},for:I,annotations:(0,g.S0)(K.annotations||[]),labels:(0,g.S0)(K.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function D(K){const{ruleSourceName:L,namespace:N,group:z,rule:G}=K,I=h();if((0,p.HY)(L))if((0,y.Pc)(G)){const V=G.grafana_alert;return{...I,name:V.title,type:a.$.grafana,group:z.name,evaluateEvery:z.interval||I.evaluateEvery,evaluateFor:G.for||"0",noDataState:V.no_data_state,execErrState:V.exec_err_state,queries:V.data,condition:V.condition,annotations:C(G.annotations),labels:C(G.labels),folder:{title:N,id:V.namespace_id},isPaused:V.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.cG)(G)){const V=P(G);return{...I,...V,type:a.$.cloudAlerting,dataSourceName:L,namespace:N,group:z.name}}else if((0,y.yF)(G)){const V=b(G);return{...I,...V,type:a.$.cloudRecording,dataSourceName:L,namespace:N,group:z.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function P(K){const L=h(),[N,z]=K.for?(0,E.bG)(K.for):[L.forTime,L.forTimeUnit];return{name:K.alert,expression:K.expr,forTime:N,forTimeUnit:z,annotations:C(K.annotations),labels:C(K.labels)}}function b(K){return{name:K.record,expression:K.expr,labels:C(K.labels)}}const M=()=>{const K=(0,p.P)();if(!K)return[...A("A","B")];const L=(0,t.Rr)();return[{refId:"A",datasourceUid:K.uid,queryType:"",relativeTimeRange:L,model:{refId:"A",hide:!1}},...A("B","C")]},x=K=>{const L=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:K[0]?.uid||"",queryType:"",relativeTimeRange:L,model:{refId:"A",hide:!1}}]},A=(...K)=>{const L=K[0],N=K[1],z={refId:K[0],hide:!1,type:f.Us.reduce,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:r.$.IsAbove},operator:{type:"and"},query:{params:[L]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},G={refId:N,hide:!1,type:f.Us.threshold,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:r.$.IsAbove},operator:{type:"and"},query:{params:[N]},reducer:{params:[],type:"last"}}],expression:L};return[{refId:L,datasourceUid:f.Yq,queryType:"",model:z},{refId:N,datasourceUid:f.Yq,queryType:"",model:G}]},T=async(K,L,N,z,G,I)=>{const V=[];for(const H of K){const Q=await(0,o.F)().get(H.datasource?.uid?H.datasource:z),oe={uid:Q.uid,type:Q.type},se=n.relativeToTimeRange(L),{interval:ie,intervalMs:j}=U(se,I??Q.interval,G),de={__interval:{text:ie,value:ie},__interval_ms:{text:j,value:j},...N},ce=Q.interpolateVariablesInQueries?await Q.interpolateVariablesInQueries([H],de)[0]:H;if(oe.uid===f.Yq){const ee={refId:ce.refId,queryType:"",relativeTimeRange:L,datasourceUid:f.Yq,model:ce};V.push(ee)}else{const ee=(0,o.F)().getInstanceSettings(oe);if(ee&&ee.meta.alerting){const le={refId:ce.refId,queryType:ce.queryType??"",relativeTimeRange:L,datasourceUid:ee.uid,model:{...ce,maxDataPoints:G,intervalMs:j}};V.push(le)}}}return V},S=async(K,L)=>{const{targets:N}=K;if(!K.id||!L.uid)return;const z=n.timeRangeToRelative(n.convertRawToRange(L.time)),G=await T(N,z,K.scopedVars||{},K.datasource??void 0,K.maxDataPoints??void 0,K.interval??void 0);if(!G.length||!G.find(Q=>Q.datasourceUid!==f.Yq))return;if(!G.find(Q=>Q.datasourceUid===f.Yq)){const[Q,oe]=A((0,l.Hs)(G),"-");G.push(Q);const[se,ie]=A(Q.refId,(0,l.Hs)(G));G.push(ie)}const{folderId:I,folderTitle:V}=L.meta;return{type:a.$.grafana,folder:I&&V?{id:I,title:V}:void 0,queries:G,name:K.title,condition:G[G.length-1].refId,annotations:[{key:i.q6.dashboardUID,value:L.uid},{key:i.q6.panelID,value:String(K.id)}]}};function U(K,L,N){return N?n.calculateInterval(K,N,L):L&&n.intervalToMs(L)>1e3?{interval:L,intervalMs:n.intervalToMs(L)}:{interval:"1s",intervalMs:1e3}}function R(K){const L=K.model;return F(L)&&L.instant&&L.range?{...K,model:{...L,range:!0,instant:!1}}:K}function F(K){return"expr"in K&&"instant"in K&&"range"in K}function B(K){return"expr"in K}},60048:(Y,O,e)=>{"use strict";e.d(O,{$V:()=>E,CK:()=>f,Dg:()=>d,OA:()=>y,Om:()=>v,Yd:()=>l,Zk:()=>o,s0:()=>D});var t=e(45849),n=e(79662);function o(P,b,M,x){return(0,n.Pc)(x)?{uid:x.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:P,namespace:b,groupName:M,rulerRuleHash:v(x)}}function s(P,b,M,x){return{ruleSourceName:P,namespace:b,groupName:M,ruleHash:C(x)}}function l(P,b){const M=b.namespace.name,x=b.group.name;if(b.rulerRule)return o(P,M,x,b.rulerRule);if(b.promRule)return s(P,M,x,b.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function f(P){return o(P.ruleSourceName,P.namespace,P.group.name,P.rule)}function d(P,b){return(0,n.Kl)(P)&&(0,n.Kl)(b)?P.uid===b.uid:(0,n.E4)(P)&&(0,n.E4)(b)?P.groupName===b.groupName&&P.namespace===b.namespace&&P.rulerRuleHash===b.rulerRuleHash&&P.ruleSourceName===b.ruleSourceName:(0,n.qE)(P)&&(0,n.qE)(b)?P.groupName===b.groupName&&P.namespace===b.namespace&&P.ruleHash===b.ruleHash&&P.ruleSourceName===b.ruleSourceName:!1}const r="cri",c="pri";function a(P){return P.replace(/\$/g,"_DOLLAR_")}function u(P){return P.replace(/\_DOLLAR\_/g,"$")}function i(P){return P.replace(/\//g,"").replace(/\\/g,"")}function p(P){return P.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function g(P,b=!1){const x=(b?decodeURIComponent(P):P).split("$");if(x.length===1)return{uid:P,ruleSourceName:"grafana"};if(x.length===5){const[A,T,S,U,R]=x.map(u).map(p);if(A===r)return{ruleSourceName:T,namespace:S,groupName:U,rulerRuleHash:R};if(A===c)return{ruleSourceName:T,namespace:S,groupName:U,ruleHash:R}}throw new Error(`Failed to parse rule location: ${P}`)}function y(P,b=!1){if(P)try{return g(P,b)}catch{return}}function E(P){return(0,n.Kl)(P)?P.uid:(0,n.E4)(P)?[r,P.ruleSourceName,P.namespace,P.groupName,P.rulerRuleHash].map(String).map(a).map(i).join("$"):[c,P.ruleSourceName,P.namespace,P.groupName,P.ruleHash].map(String).map(a).map(i).join("$")}function h(P){let b=0;if(P.length===0)return b;for(let M=0;M<P.length;M++){const x=P.charCodeAt(M);b=(b<<5)-b+x,b=b&b}return b}function v(P){if((0,n.yF)(P))return h(JSON.stringify([P.record,P.expr,m(P.labels)])).toString();if((0,n.cG)(P))return h(JSON.stringify([P.alert,P.expr,m(P.annotations),m(P.labels)])).toString();if((0,n.Pc)(P))return P.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function C(P){if((0,n.OP)(P))return h(JSON.stringify([P.type,P.query,m(P.labels)])).toString();if((0,n.x_)(P))return h(JSON.stringify([P.type,P.query,m(P.annotations),m(P.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function m(P){return JSON.stringify(Object.entries(P||{}).sort((b,M)=>b[0].localeCompare(M[0])))}function D(P){return(0,n.Kl)(P)?t.GC:P.ruleSourceName}},79662:(Y,O,e)=>{"use strict";e.d(O,{Aq:()=>x,C7:()=>M,E:()=>p,E4:()=>h,Jq:()=>S,Kl:()=>E,OP:()=>c,PW:()=>U,Pc:()=>i,Re:()=>b,SS:()=>D,Wd:()=>v,cG:()=>a,m$:()=>y,pB:()=>g,qE:()=>C,ub:()=>T,vU:()=>m,x_:()=>r,yF:()=>u});var t=e(82897),n=e.n(t),o=e(97865),s=e(46063),l=e(734),f=e(37190),d=e(45849);function r(R){return typeof R=="object"&&R.type===s.pz.Alerting}function c(R){return typeof R=="object"&&R.type===s.pz.Recording}function a(R){return typeof R=="object"&&"alert"in R}function u(R){return typeof R=="object"&&"record"in R}function i(R){return typeof R=="object"&&"grafana_alert"in R}function p(R){return R.rulerRule&&i(R.rulerRule)&&Boolean(R.rulerRule.grafana_alert.is_paused)}function g(R){return JSON.stringify(R.labels)}function y(R){return R.error&&R.error?.message?.includes(f.jZ)}function E(R){return"uid"in R}function h(R){return"rulerRuleHash"in R}function v(R){return Object.values(s.pz).includes(R)}function C(R){return"ruleHash"in R}function m(R){switch(R){case"ok":return l.VG.Ok;case"nodata":return l.VG.NoData;case"error":case"err":return l.VG.Error;case"unknown":return l.VG.Unknown;default:return}}function D(R){return R===s.x_.Inactive?"Normal":(0,t.capitalize)(R)}const P=R=>R.reduce((F,{dataSourceName:B,name:K,groups:L})=>(L.forEach(({name:N,rules:z})=>{z.forEach(G=>{r(G)&&F.push({dataSourceName:B,namespaceName:K,groupName:N,rule:G})})}),F),[]),b=R=>r(R.promRule)?R.promRule:null,M=R=>R.reduce((F,{rulesSource:B,name:K,groups:L})=>(L.forEach(({name:N,rules:z})=>{z.forEach(G=>{G.promRule&&r(G.promRule)&&F.push({dataSourceName:(0,d.EG)(B),namespaceName:K,groupName:N,...G})})}),F),[]);function x(R){let F;return Object.values(o.Z).includes(R)?F=R:F=(0,s.ED)(R),A[F]}const A={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[o.Z.NoData]:"info",[o.Z.Paused]:"warning",[o.Z.Alerting]:"bad",[o.Z.OK]:"good",[o.Z.Pending]:"warning",[o.Z.Unknown]:"info"};function T(R){return R?.alerts?R.alerts.reduce((F,B)=>{const K=(0,s.ED)(B.state)!==s.bj.Normal;if(B.activeAt&&K){const L=new Date(B.activeAt);if(F===null||F.getTime()>L.getTime())return L}return F},null):null}function S(R){return Array.isArray(R.source_tenants)}function U(R){return i(R)?R.grafana_alert.title:a(R)?R.alert:u(R)?R.record:""}},20383:(Y,O,e)=>{"use strict";e.d(O,{bG:()=>n,gV:()=>a,nd:()=>c,qr:()=>s,wd:()=>l});var t=e(4528);function n(u){const i=u.match(/(\d+)(\w+)/);if(i)return[Number(i[1]),i[2]];throw new Error(`Invalid interval description: ${u}`)}function o(u){const{sec:i,count:p}=describeInterval(u);return i*p}const s=Object.entries(t.t).map(([u,i])=>({label:u[0].toUpperCase()+u.slice(1),value:i}));function l(u){try{return c(u),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},d=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),r=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.t).join(", ")}`);function c(u){let i=u,p=[];function g(E){const h=d.exec(E),v=h?.groups?.value&&h?.groups?.type;if(!h||!v)throw r;h&&h.groups?.value&&h.groups?.type&&(i=i.replace(h[0],""),p.push([Number(h.groups.value),h.groups.type])),i&&g(i)}if(g(u),!p.length)throw r;return p.reduce((E,[h,v])=>{const C=h*f[v];return E+C},0)}const a=u=>u.includes("0001-01-01T00")},93411:(Y,O,e)=>{"use strict";e.d(O,{_:()=>o,u:()=>n});var t=e(35645);function n(s,l){const d=new URLSearchParams(l).toString();return`${t.v.appSubUrl}${s}${d?`?${d}`:""}`}function o(s,l){const d=new URLSearchParams(l).toString();try{const r=new URL(t.v.appSubUrl,t.v.appUrl);return r.pathname=s,`${r.href}${d?`?${d}`:""}`}catch{return n(s,l)}}},70659:(Y,O,e)=>{"use strict";e.d(O,{Dl:()=>s,_E:()=>o,lK:()=>l,xD:()=>n});var t=e(54899);function n(f){return(0,t.i)().post("/api/annotations",f)}function o(f){return(0,t.i)().put(`/api/annotations/${f.id}`,f)}function s(f){return(0,t.i)().delete(`/api/annotations/${f.id}`)}async function l(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:d,count:r})=>({term:d,count:r}))}},86953:(Y,O,e)=>{"use strict";e.d(O,{r:()=>a});var t=e(59980),n=e(39859),o=e(9471),s=e(47891),l=e(206),f=e(75434),d=e(573);let r=100;function c(){return"AQ"+r++}function a(u,i,p){const g={...d.yA,...i.annotations},y={...g.getDefaultQuery?.(),...p},E=g.prepareAnnotation(y);if(!E)return(0,t.of)({});const h=g.prepareQuery(E);if(!h)return(0,t.of)({});const v=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=s.calculateInterval(u.range,v,i.interval),m={__interval:{text:C.interval,value:C.interval},__interval_ms:{text:C.intervalMs.toString(),value:C.intervalMs},__annotation:{text:E.name,value:E}},D={startTime:Date.now(),requestId:c(),range:u.range,maxDataPoints:v,scopedVars:m,...C,app:l.zj.Dashboard,publicDashboardAccessToken:u.dashboard.meta.publicDashboardAccessToken,timezone:u.dashboard.timezone,targets:[{...h,refId:"Anno"}]};return(0,f.v7)(i,D).pipe((0,n.z)(P=>{const b=P?.series.length?P.series:P.annotations;return b?.length?g.processEvents(E,b).pipe((0,o.U)(M=>({panelData:P,events:M}))):(0,t.of)({panelData:P,events:[]})}))}},573:(Y,O,e)=>{"use strict";e.d(O,{$w:()=>v,r0:()=>p,yA:()=>u,yr:()=>C});var t=e(82897),n=e.n(t),o=e(59980),s=e(39859),l=e(9471),f=e(50928),d=e(99098),r=e(30471),c=e(39834),a=e(47694);const u={prepareAnnotation:m=>{if((0,t.isString)(m?.query)){const{query:D,...P}=m;return{...P,target:{refId:"annotation_query",query:D},mappings:{}}}return m},prepareQuery:m=>m.target,processEvents:(m,D)=>E(D,m.mappings)};function i(){return m=>m.pipe((0,s.z)(D=>{if(!D?.length)return(0,o.of)(void 0);if(D.length===1)return(0,o.of)(D[0]);const P={interpolate:b=>b};return(0,o.of)(D).pipe(f.Y.mergeTransformer.operator({},P),(0,l.U)(b=>b[0]))}))}const p=[{key:"time",field:m=>m.fields.find(D=>D.type===d.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:m=>m.fields.find(D=>D.type===d.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],g=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...a.vc.isPublicDashboardView?g:[],...p,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function E(m,D){return(0,o.of)(m).pipe(i(),(0,l.U)(P=>{if(!P?.length)return[];let b=!1,M=!1;const x={};for(const S of P.fields){const U=(0,r.CZ)(S,P);x[U.toLowerCase()]=S}D||(D={});const A=[];for(const S of y){const U=D[S.key]||{};if(U.source===c.L.Skip)continue;const R={key:S.key,split:S.split};if(U.source===c.L.Text)R.text=U.value;else{const F=(U.value||S.key).toLowerCase();R.field=x[F],!R.field&&S.field&&(R.field=S.field(P))}(R.field||R.text)&&(A.push(R),R.key==="time"?b=!0:R.key==="text"&&(M=!0))}if(!b||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const T=[];for(let S=0;S<P.length;S++){const U={type:"default",color:"red"};for(const R of A){let F;if(R.text)F=R.text;else if(R.field&&(F=R.field.values[S],F!==void 0&&R.regex)){const B=R.regex.exec(F);B&&(F=B[1]?B[1]:B[0])}F!=null&&(R.split&&typeof F=="string"&&(F=F.split(",")),U[R.key]=F)}T.push(U)}return T}))}const h=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function v(m){const{type:D}=m;return!(D==="datasource"||h.includes(D))}function C(m){const{type:D}=m;return h.includes(D)}},56777:(Y,O,e)=>{"use strict";e.d(O,{ZP:()=>a,dF:()=>f,iK:()=>s,j4:()=>l,nQ:()=>r,ql:()=>d});var t=e(62992);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},o=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(u,i)=>{const{keys:p,keysIncludingExpired:g}=i.payload,y=i.payload.keys.length===0&&i.payload.keysIncludingExpired.length>0?!0:u.includeExpired;return{...u,hasFetched:!0,keys:p,keysIncludingExpired:g,includeExpired:y}},setSearchQuery:(u,i)=>({...u,searchQuery:i.payload}),includeExpiredToggled:u=>({...u,includeExpired:!u.includeExpired}),isFetching:u=>({...u,hasFetched:!1}),setMigrationResult:(u,i)=>({...u,migrationResult:i.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:l,isFetching:f,setSearchQuery:d,setMigrationResult:r}=o.actions,a={apiKeys:o.reducer}},40641:(Y,O,e)=>{"use strict";e.d(O,{getAuthProviderStatus:()=>d,getRegisteredAuthProviders:()=>s,registerAuthProvider:()=>o});const t=[],n={};function o(r,c){t.find(a=>a.id===r.id)||(t.push(r),c&&(n[r.id]=c))}function s(){return t}function l(r){return t.find(c=>c.id===r)}function f(r){const c=[];for(const[a,u]of Object.entries(r)){const i=t.find(p=>`auth.${p.id}`===a);if(i){const p={...u,providerId:i.id,displayName:u.name||i.displayName};c.push(p)}}return c}async function d(r){if(n[r]){const c=n[r];return c()}return{configured:!1,enabled:!1}}},49922:(Y,O,e)=>{"use strict";e.d(O,{ri:()=>d,zQ:()=>c});var t=e(65583),n=e(54899),o=e(77582),s=e(27876),l=e(40641),f=e(85389);function d(){return async a=>{if(o.Vt.hasPermission(s.AccessControlAction.SettingsRead)){a((0,f.uX)());const u=await(0,n.i)().get("/api/admin/settings");return a((0,f.AW)(u)),await a(r()),a((0,f._E)()),u}}}function r(){return async a=>{const u=(0,l.getRegisteredAuthProviders)(),i={},p=[];for(const y of u)p.push((0,l.getAuthProviderStatus)(y.id));const g=await Promise.all(p);for(let y=0;y<u.length;y++){const E=u[y],h=g[y];i[E.id]=h}a((0,f.AB)(i))}}function c(a){return async u=>{if(o.Vt.hasPermission(s.AccessControlAction.SettingsWrite))try{return await(0,t.n)((0,n.i)().fetch({url:"/api/admin/settings",method:"PUT",data:a,showSuccessAlert:!1,showErrorAlert:!1})),u((0,f.q$)()),!0}catch(i){if(console.log(i),(0,n.kW)(i)){i.isHandled=!0;const p={message:i.data?.message,errors:i.data?.errors};return u((0,f.sT)(p)),!1}}return!1}}},85389:(Y,O,e)=>{"use strict";e.d(O,{AB:()=>l,AW:()=>s,ZP:()=>p,_E:()=>d,gG:()=>u,q$:()=>c,sT:()=>r,uX:()=>f});var t=e(62992);const n={settings:{},providerStatuses:{},isLoading:!1},o=(0,t.oM)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(g,y)=>({...g,settings:y.payload}),providerStatusesLoaded:(g,y)=>({...g,providerStatuses:y.payload}),loadingBegin:g=>({...g,isLoading:!0}),loadingEnd:g=>({...g,isLoading:!1}),setError:(g,y)=>({...g,updateError:y.payload}),resetError:g=>({...g,updateError:void 0}),setWarning:(g,y)=>({...g,warning:y.payload}),resetWarning:g=>({...g,warning:void 0})}}),{settingsUpdated:s,providerStatusesLoaded:l,loadingBegin:f,loadingEnd:d,setError:r,resetError:c,setWarning:a,resetWarning:u}=o.actions,p={authConfig:o.reducer}},24290:(Y,O,e)=>{"use strict";e.d(O,{CN:()=>l.CN,Zi:()=>d,t4:()=>c,zs:()=>r});var t=e(90701),n=e(65583),o=e(52666),s=e(54899),l=e(31545);function f({baseURL:a}){async function u(i){try{const{data:p,...g}=await(0,n.n)((0,s.i)().fetch({...i,url:a+i.url,showErrorAlert:i.showErrorAlert}));return{data:p,meta:g}}catch(p){return i.manageError?i.manageError(p):{error:p}}}return u}const d=(0,t.LC)({reducerPath:"browseDashboardsAPI",baseQuery:f({baseURL:"/api"}),endpoints:a=>({getFolder:a.query({query:u=>({url:`/folders/${u}`,params:{accesscontrol:!0}})}),getAffectedItems:a.query({queryFn:async u=>{const p=Object.keys(u.folder).filter(E=>u.folder[E]).map(E=>(0,s.i)().get(`/api/folders/${E}/counts`)),g=await Promise.all(p),y={folder:Object.values(u.folder).filter(o.fQ).length,dashboard:Object.values(u.dashboard).filter(o.fQ).length,libraryPanel:0,alertRule:0};for(const E of g)y.folder+=E.folder,y.dashboard+=E.dashboard,y.alertRule+=E.alertrule??0;return{data:y}}})})}),{useGetAffectedItemsQuery:r,useGetFolderQuery:c}=d},3918:(Y,O,e)=>{"use strict";e.d(O,{Go:()=>d,J1:()=>c,hn:()=>r,iM:()=>f,qs:()=>l});var t=e(54899),n=e(10216),o=e(55185),s=e(27876);const l=(0,s.createAsyncThunk)("browseDashboards/fetchChildren",async a=>{const u=a===n.YQ?void 0:a;return await(0,o.o)(u,void 0,!0)}),f=(0,s.createAsyncThunk)("browseDashboards/deleteDashboard",async a=>(0,t.i)().delete(`/api/dashboards/uid/${a}`)),d=(0,s.createAsyncThunk)("browseDashboards/deleteFolder",async a=>(0,t.i)().delete(`/api/folders/${a}`,void 0,{params:{forceDeleteRules:!1}})),r=(0,s.createAsyncThunk)("browseDashboards/moveDashboard",async({dashboardUID:a,destinationUID:u})=>{const p={dashboard:(await(0,t.i)().get(`/api/dashboards/uid/${a}`)).dashboard,folderUid:u,overwrite:!1};return(0,t.i)().post("/api/dashboards/db",{message:"",...p})}),c=(0,s.createAsyncThunk)("browseDashboards/moveFolder",async({folderUID:a,destinationUID:u})=>(0,t.i)().post(`/api/folders/${a}/move`,{parentUID:u}))},88612:(Y,O,e)=>{"use strict";e.d(O,{ZP:()=>v,u6:()=>h,xm:()=>y,wk:()=>E});var t={};e.r(t),e.d(t,{extraReducerFetchChildrenFulfilled:()=>f,setAllSelection:()=>c,setFolderOpenState:()=>d,setItemSelectionState:()=>r});var n=e(62992),o=e(3918),s=e(10216),l=e(29910);function f(C,m){const D=m.meta.arg,P=m.payload;if(!D||D===s.YQ){C.rootItems=P;return}if(C.childrenByParentUID[D]=P,C.selectedItems.folder[D])for(const M of P)C.selectedItems[M.kind][M.uid]=!0}function d(C,m){const{folderUID:D,isOpen:P}=m.payload;C.openFolders[D]=P}function r(C,m){const{item:D,isSelected:P}=m.payload;function b(x,A){if(C.selectedItems[x][A]=P,x!=="folder")return;let T=C.childrenByParentUID[A]??[];for(const S of T)b(S.kind,S.uid)}b(D.kind,D.uid);let M=D.parentUID;for(;M;){const x=(0,l.i)(C.rootItems??[],C.childrenByParentUID,M);if(!x)break;P||(C.selectedItems[x.kind][x.uid]=!1),M=x.parentUID}C.selectedItems.$all=C.rootItems?.every(x=>C.selectedItems[x.kind][x.uid])??!1}function c(C,m){const{isSelected:D,folderUID:P}=m.payload;if(C.selectedItems.$all=D,D){let M=function(x){const A=x?C.childrenByParentUID[x]:C.rootItems;if(A)for(const T of A)C.selectedItems[T.kind][T.uid]=D,T.kind==="folder"&&M(T.uid)};var b=M;M(P)}else for(const M in C.selectedItems){if(!(M==="dashboard"||M==="panel"||M==="folder"))continue;const x=C.selectedItems[M];for(const A in x)x[A]=D}}const{extraReducerFetchChildrenFulfilled:a,...u}=t,i={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},p=(0,n.oM)({name:"browseDashboards",initialState:i,reducers:u,extraReducers:C=>{C.addCase(o.qs.fulfilled,a)}}),g=p.reducer,{setFolderOpenState:y,setItemSelectionState:E,setAllSelection:h}=p.actions,v={browseDashboards:g}},29910:(Y,O,e)=>{"use strict";e.d(O,{i:()=>t});function t(n,o,s){for(const l of n)if(l.uid===s)return l;for(const l in o){const f=o[l];if(f){for(const d of f)if(d.uid===s)return d}}}},86475:(Y,O,e)=>{"use strict";e.d(O,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`}},56090:(Y,O,e)=>{"use strict";e.d(O,{M:()=>s});var t=e(56895),n=e(24231),o=e(74509);function s(l){const{uid:f}=(0,t.UO)(),d=(0,t.TH)(),r=(0,n.wl)(f),c=(0,o.bJ)(r.type),a=new URLSearchParams(d.search),u=(0,n.MF)(f,l||a.get("page"));return{navId:"connections-datasources",pageNav:{...u.main,text:r.name,subTitle:`Type: ${c?.name}`,active:!0,children:(u.main.children||[]).map(p=>({...p,url:p.url?.replace("datasources/edit/","/connections/datasources/edit/")}))}}}},10655:(Y,O,e)=>{"use strict";e.d(O,{Bl:()=>C,FJ:()=>y,Mi:()=>i,RS:()=>h,Rh:()=>c,WJ:()=>g,Ym:()=>a,bS:()=>p,jI:()=>v,r5:()=>E,zZ:()=>u});var t=e(90701),n=e(65583),o=e(54899),s=e(659),l=e(60499);function f(m){return typeof m=="object"&&m!=null&&"error"in m}const d=({baseUrl:m})=>async D=>{try{const{data:P,...b}=await(0,n.n)((0,o.i)().fetch({...D,url:m+D.url,showErrorAlert:D.showErrorAlert}));return{data:P,meta:b}}catch(P){return D.manageError?D.manageError(P):{error:P}}},r=m=>({error:(0,o.kW)(m)&&m.status!==404?m:null}),c=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:d({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:m=>({getPublicDashboard:m.query({query:D=>({url:`/dashboards/uid/${D}/public-dashboards`,manageError:r,showErrorAlert:!1}),async onQueryStarted(D,{dispatch:P,queryFulfilled:b}){try{await b}catch(M){f(M)&&(0,o.kW)(M.error)&&P((0,s.$l)((0,l.t_)(M.error.data.message)))}},providesTags:(D,P,b)=>[{type:"PublicDashboard",id:b}]}),createPublicDashboard:m.mutation({query:D=>({url:`/dashboards/uid/${D.dashboard.uid}/public-dashboards`,method:"POST",data:D.payload}),async onQueryStarted({dashboard:D,payload:P},{dispatch:b,queryFulfilled:M}){const{data:x}=await M;b((0,s.$l)((0,l.AT)("Dashboard is public!"))),D.updateMeta({publicDashboardUid:x.uid,publicDashboardEnabled:x.isEnabled})},invalidatesTags:(D,P,{dashboard:b})=>[{type:"PublicDashboard",id:b.uid}]}),updatePublicDashboard:m.mutation({query:D=>({url:`/dashboards/uid/${D.dashboard.uid}/public-dashboards/${D.payload.uid}`,method:"PUT",data:D.payload}),async onQueryStarted({dashboard:D,payload:P},{dispatch:b,queryFulfilled:M}){const{data:x}=await M;b((0,s.$l)((0,l.AT)("Public dashboard updated!"))),D.updateMeta({publicDashboardUid:x.uid,publicDashboardEnabled:x.isEnabled})},invalidatesTags:(D,P,{payload:b})=>[{type:"PublicDashboard",id:b.dashboardUid}]}),addRecipient:m.mutation({query:()=>({url:""})}),deleteRecipient:m.mutation({query:()=>({url:""})}),reshareAccessToRecipient:m.mutation({query:()=>({url:""})}),getActiveUsers:m.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:m.query({query:()=>({url:""}),providesTags:(D,P,b)=>[{type:"ActiveUserDashboards",id:b}]}),listPublicDashboards:m.query({query:()=>({url:"/dashboards/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:m.mutation({query:D=>({url:`/dashboards/uid/${D.dashboardUid}/public-dashboards/${D.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:D,uid:P},{dispatch:b,queryFulfilled:M}){await M,b((0,s.$l)((0,l.AT)("Public dashboard deleted!"))),D?.updateMeta({publicDashboardUid:P,publicDashboardEnabled:!1})},invalidatesTags:(D,P,{dashboardUid:b})=>[{type:"PublicDashboard",id:b},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:a,useCreatePublicDashboardMutation:u,useUpdatePublicDashboardMutation:i,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:g,useAddRecipientMutation:y,useDeleteRecipientMutation:E,useReshareAccessToRecipientMutation:h,useGetActiveUsersQuery:v,useGetActiveUserDashboardsQuery:C}=c},134:(Y,O,e)=>{"use strict";e.d(O,{E:()=>a});var t=e(82897),n=e(86647),o=e(47694),s=e(86648),l=e(6297),f=e(59096),d=e(15546),r=e(10672);function c(u){return u.libraryPanel&&typeof u.libraryPanel.name=="string"&&typeof u.libraryPanel.uid=="string"}class a{async makeExportable(i){i.cleanUpRepeats();const p=i.getSaveModelClone();p.id=null,i.processRepeats();const g=[],y={},E={},h={},v=new Map;for(const P of p.getVariables())h[P.name]=P;const C=(P,b)=>{if(P.datasource===void 0){P.datasource=b;return}let M=P.datasource,x=null;const A=M?.uid;return A&&A.indexOf("$")===0&&(x=h[A.substring(1)],x&&x.current&&(M=x.current.value)),(0,n.F)().get(M).then(T=>{if(T.meta?.builtIn||(y["datasource"+T.meta?.id]={type:"datasource",id:T.meta.id,name:T.meta.name,version:T.meta.info.version||"1.0.0"},x))return;const S="DS_"+T.name.replace(" ","_").toUpperCase();E[S]={name:S,label:T.name,description:"",type:"datasource",pluginId:T.meta?.id,pluginName:T.meta?.name},P.datasource={type:T.meta.id,uid:"${"+S+"}"}})},m=async P=>{if(P.type!=="row"){if(await C(P),P.targets)for(const M of P.targets)await C(M,P.datasource);const b=o.ZP.panels[P.type];b&&(y["panel"+b.id]={type:"panel",id:b.id,name:b.name,version:b.info.version})}},D=async P=>{if((0,l.V)(P)){const{name:b,uid:M}=P.libraryPanel;let x=P.libraryPanel.model;x||(x=(await(0,s.Mh)(M,!0)).model);const{gridPos:A,id:T,...S}=x;v.has(M)||v.set(M,{name:b,uid:M,kind:f.V.Panel,model:S})}};try{for(const M of p.panels)if(await m(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await m(x);for(const M of p.getVariables())(0,d.Xh)(M)&&(await C(M),M.options=[],M.current={},M.refresh=M.refresh!==r.Bd.never?M.refresh:r.Bd.onDashboardLoad);for(const M of p.annotations.list)await C(M);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:o.ZP.buildInfo.version},(0,t.each)(E,M=>{g.push(M)});for(const M of i.panels)if(await D(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await D(x);for(const M of p.getVariables())if((0,d.VC)(M)){const x="VAR_"+M.name.replace(" ","_").toUpperCase();g.push({name:x,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+x+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const P=[...v.entries()].reduce((M,[x,A])=>(M[x]=A,M),{}),b=(0,t.defaults)({__inputs:g,__elements:P,__requires:(0,t.sortBy)(y,["id"])},p);for(let M=0;M<b.panels.length;M++){const x=b.panels[M];c(x)&&(b.panels[M]={gridPos:x.gridPos,id:x.id,libraryPanel:{uid:x.libraryPanel.uid,name:x.libraryPanel.name}})}return b}catch(P){return console.error("Export failed:",P),{error:P}}}}},82660:(Y,O,e)=>{"use strict";e.d(O,{NN:()=>q,hf:()=>fe,ZP:()=>ne});var t=e(9892),n=e(66111),o=e(67948),s=e(56895),l=e(63418),f=e(68183),d=e(37932),r=e(32434),c=e(98102),a=e(34719),u=e(26202),i=e(64319),p=e(5191),g=e(8125),y=e(95379),E=e(9956),h=e(47694),v=e(60499),C=e(77582);function m(ve,me){const[Ie,Ge]=(0,n.useState)();return(0,n.useEffect)(()=>{const gt=ve.subscribe(me,Ge);return()=>gt.unsubscribe()},[ve,me]),Ie}var D=e(35287),P=e(61962),b=e(72648),M=e(71698),x=e(31403),A=e(39904),T=e(41818),S=e(95130),U=e(663),R=e(27876),F=e(58790);const B=({dashboard:ve})=>{const me=(0,n.useMemo)(()=>(0,U.uZ)(),[]),Ie=(0,R.useDispatch)(),Ge=(0,R.useSelector)(gt=>gt.dashboard.initialDatasource);return n.createElement(S.v,null,n.createElement(S.v.Item,{key:"add-visualisation",label:(0,D.t)("dashboard.add-menu.visualization","Visualization"),testId:f.wl.components.PageToolbar.itemButton("Add new visualization menu item"),onClick:()=>{const gt=(0,U.LU)(ve,Ge);(0,T.ff)("dashboards_toolbar_add_clicked",{item:"add_visualization"}),d.E1.partial({editPanel:gt}),Ie((0,F.Rd)(void 0))}}),n.createElement(S.v.Item,{key:"add-row",label:(0,D.t)("dashboard.add-menu.row","Row"),testId:f.wl.components.PageToolbar.itemButton("Add new row menu item"),onClick:()=>{(0,T.ff)("dashboards_toolbar_add_clicked",{item:"add_row"}),(0,U.L_)(ve)}}),n.createElement(S.v.Item,{key:"add-panel-lib",label:(0,D.t)("dashboard.add-menu.import","Import from library"),testId:f.wl.components.PageToolbar.itemButton("Add new panel from panel library menu item"),onClick:()=>{(0,T.ff)("dashboards_toolbar_add_clicked",{item:"import_from_library"}),(0,U.RB)(ve)}}),n.createElement(S.v.Item,{key:"add-panel-clipboard",label:(0,D.t)("dashboard.add-menu.paste-panel","Paste panel"),testId:f.wl.components.PageToolbar.itemButton("Add new panel from clipboard menu item"),onClick:()=>{(0,T.ff)("dashboards_toolbar_add_clicked",{item:"paste_panel"}),(0,U.Dh)(ve,me)},disabled:!me}))},K=({dashboard:ve})=>{const me=L((0,b.l4)()),[Ie,Ge]=(0,n.useState)(!1);return n.createElement(M.L,{overlay:()=>n.createElement(B,{dashboard:ve}),placement:"bottom",offset:[0,6],onVisibleChange:Ge},n.createElement(x.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,t.cx)(me.button,me.buttonIcon,me.buttonText),"data-testid":f.wl.components.PageToolbar.itemButton("Add panel button")},n.createElement(D.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(A.J,{name:Ie?"angle-up":"angle-down",size:"lg"})))};function L(ve){return{button:(0,t.css)({label:"add-panel-button",padding:ve.spacing(.5,.5,.5,.75),height:ve.spacing((ve.components.height.sm+ve.components.height.md)/2),borderRadius:ve.shape.radius.default}),buttonIcon:(0,t.css)({svg:{margin:0}}),buttonText:(0,t.css)({label:"add-panel-button-text",fontSize:ve.typography.body.fontSize,span:{marginLeft:ve.spacing(.67)}})}}var N=e(63205),z=e(9398),G=e(10079),I=e(54294),V=e(45984),H=e(64503),Q=e(37877),oe=e(96044),se=e(53818);const ie=({dashboard:ve})=>{const[me]=(0,oe.K)(),{showModal:Ie,hideModal:Ge}=(0,n.useContext)(p.kr);return(0,n.useEffect)(()=>(me.shareView&&Ie(se.ShareModal,{dashboard:ve,onDismiss:Ge,activeTab:String(me.shareView)}),()=>{Ge()}),[Ie,Ge,ve,me.shareView]),n.createElement(H.u,{tooltip:(0,D.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{Ie(se.ShareModal,{dashboard:ve,onDismiss:Ge})}})},j={setStarred:P.OQ,updateTimeZoneForSession:I.YT},de=(0,o.connect)(null,j),ce=f.wl.pages.Dashboard.DashNav,ee=[],le=[];function q(ve){ee.push(ve)}function fe(ve){le.push(ve)}const Z=n.memo(ve=>{(0,s.TH)();const me=(0,r.N)();m(ve.dashboard.events,V.hS);const Ie=ve.dashboard.snapshot?.originalUrl??"",Ge=()=>{window.location.href=l.QX.sanitizeUrl(ve.dashboard.snapshot.originalUrl)},gt=(0,v.iG)(),Te=()=>{try{const vt=new URL(l.QX.sanitizeUrl(Ie),h.ZP.appUrl),rt=new URL(h.ZP.appUrl);vt.host!==rt.host?C.h$.publish(new V.Dn({component:c.s,props:{title:"Proceed to external site?",modalClass:re,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,Ie)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:Ge}})):Ge()}catch(vt){gt.error("Invalid URL",vt instanceof Error?vt.message:void 0)}},Le=()=>{const vt=(0,z.h4)(),{dashboard:rt,setStarred:Ot}=ve;vt.starDashboard(rt.uid,Boolean(rt.meta.isStarred)).then(Et=>{Ot({id:rt.uid,title:rt.title,url:rt.meta.url??"",isStarred:Et}),rt.meta.isStarred=Et,me()})},Ye=()=>{d.E1.partial({editview:"settings"})},it=()=>{G.r0.prev()},ht=()=>{G.r0.next()},Re=()=>{G.r0.stop(),me()},ye=(vt,rt)=>{vt.map((Ot,Et)=>{const Mt=Ot.component,ue=n.createElement(Mt,{...ve,key:`button-custom-${Et}`});typeof Ot.index=="number"?rt.splice(Ot.index,0,ue):rt.push(ue)})},Ce=()=>G.r0.isPlaying,be=()=>{const{dashboard:vt,kioskMode:rt}=ve,{canStar:Ot,canShare:Et,isStarred:Mt}=vt.meta,ue=[];if(rt||Ce())return[];if(Ot){let De=Mt?(0,D.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,D.t)("dashboard.toolbar.mark-favorite","Mark as favorite");ue.push(n.createElement(H.u,{tooltip:De,icon:Mt?"favorite":"star",iconType:Mt?"mono":"default",iconSize:"lg",onClick:Le,key:"button-star"}))}return Et&&ue.push(n.createElement(ie,{key:"button-share",dashboard:vt})),vt.meta.publicDashboardEnabled&&ue.push(n.createElement(a.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":ce.publicDashboardTag})),ye(ee,ue),ue},We=()=>n.createElement(u.h,{key:"playlist-buttons"},n.createElement(i.h,{tooltip:(0,D.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:it,narrow:!0}),n.createElement(i.h,{onClick:Re},n.createElement(D.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(i.h,{tooltip:(0,D.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:ht,narrow:!0})),Qe=()=>{const{dashboard:vt,updateTimeZoneForSession:rt,hideTimePicker:Ot}=ve;return Ot?null:n.createElement(Q.C,{dashboard:vt,onChangeTimeZone:rt,key:"time-controls"})},mt=()=>{const{dashboard:vt,onAddPanel:rt,isFullscreen:Ot,kioskMode:Et}=ve,{canSave:Mt,canEdit:ue,showSettings:De}=vt.meta,{snapshot:Ne}=vt,tt=Ne&&Ne.originalUrl,et=[];return Ce()?[We(),Qe()]:Et===R.KioskMode.TV?[Qe()]:(ue&&!Ot&&(h.ZP.featureToggles.emptyDashboardPage?et.push(n.createElement(K,{dashboard:vt,key:"panel-add-dropdown"})):et.push(n.createElement(i.h,{tooltip:(0,D.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:rt,key:"button-panel-add"}))),Mt&&!Ot&&et.push(n.createElement(p.JY,{key:"button-save"},({showModal:Ue,hideModal:Fe})=>n.createElement(i.h,{tooltip:(0,D.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Ue(N.d,{dashboard:vt,onDismiss:Fe})}}))),tt&&et.push(n.createElement(i.h,{tooltip:(0,D.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Te,icon:"link",key:"button-snapshot"})),De&&et.push(n.createElement(i.h,{tooltip:(0,D.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Ye,key:"button-settings"})),ye(le,et),et.push(Qe()),h.ZP.featureToggles.scenes&&et.push(n.createElement(i.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>d.E1.push(`/scenes/dashboard/${vt.uid}`)})),et)};return n.createElement(y.A,{actions:n.createElement(n.Fragment,null,be(),n.createElement(E.M,{leftActionsSeparator:!0}),n.createElement(g.R,{alignment:"right"},mt()))})});Z.displayName="DashNav";const ne=de(Z),re=(0,t.css)({width:"max-content",maxWidth:"80vw"})},64503:(Y,O,e)=>{"use strict";e.d(O,{u:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(8180);const l=({icon:d,iconType:r,iconSize:c,tooltip:a,onClick:u,children:i})=>{const p=(0,o.wW)(f);return n.createElement("div",{className:p.noBorderContainer},d&&n.createElement(s.h,{name:d,size:c,iconType:r,tooltip:a,tooltipPlacement:"bottom",onClick:u}),i)},f=d=>({noBorderContainer:t.css`
    padding: 0 ${d.spacing(.5)};
    display: flex;
  `})},37877:(Y,O,e)=>{"use strict";e.d(O,{C:()=>a});var t=e(66111),n=e(47406),o=e(82378),s=e(5562),l=e(32873),f=e(77582),d=e(35287),r=e(19349),c=e(45984);class a extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=i=>{(0,r.$t)().setAutoRefresh(i),this.forceUpdate()},this.onRefresh=()=>((0,r.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{f.h$.publish(new c.Qt({direction:c.Im.Left}))},this.onMoveForward=()=>{f.h$.publish(new c.Qt({direction:c.Im.Right}))},this.onChangeTimePicker=i=>{const{dashboard:p}=this.props,g=p.timepicker,y=g.nowDelay&&i.raw.to==="now",E=n.isMathString(i.raw.from)?i.raw.from:i.from,h=n.isMathString(i.raw.to)?i.raw.to:i.to,v={from:E,to:y?"now-"+g.nowDelay:h};(0,r.$t)().setTime(v)},this.onChangeTimeZone=i=>{this.props.dashboard.timezone=i,this.props.onChangeTimeZone(i),this.onRefresh()},this.onChangeFiscalYearStartMonth=i=>{this.props.dashboard.fiscalYearStartMonth=i,this.onRefresh()},this.onZoom=()=>{f.h$.publish(new c.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(o.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:i,isOnCanvas:p}=this.props,{refresh_intervals:g}=i.timepicker,y=(0,r.$t)().getValidIntervals(g||s.o5),E=(0,r.$t)().timeRange(),h=i.getTimezone(),v=i.fiscalYearStartMonth,C=i.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(l.a,{value:E,onChange:this.onChangeTimePicker,timeZone:h,fiscalYearStartMonth:v,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:i.refresh,intervals:y,isOnCanvas:p,tooltip:(0,d.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:C}))}}},39514:(Y,O,e)=>{"use strict";e.d(O,{t:()=>t.ZP});var t=e(82660)},42557:(Y,O,e)=>{"use strict";e.d(O,{P:()=>E});var t=e(82897),n=e(66111),o=e(47891),s=e(68183),l=e(20941),f=e(24799),d=e(52566),r=e(80124),c=e(46967),a=e(8944),u=e(5562),i=e(19349);const p=({refreshIntervals:h,onRefreshIntervalChange:v,getIntervalsFunc:C=y,validateIntervalsFunc:m=g})=>{const[D,P]=(0,n.useState)(C(h??u.o5)),[b,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const S=C(h??u.o5);P(S)},[C,h]);const x=(0,n.useMemo)(()=>Array.isArray(D)?D.join(","):"",[D]),A=(0,n.useCallback)(S=>{const U=S.currentTarget.value?S.currentTarget.value.split(","):[];P(U)},[P]),T=(0,n.useCallback)(S=>{const U=m(D);U===null&&v(C(D)),M(U)},[C,D,v,m]);return n.createElement(f.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:b,invalid:!!b},n.createElement(c.I,{id:"auto-refresh-input",invalid:!!b,value:x,onChange:A,onBlur:T}))},g=(h,v={getTimeSrv:i.$t})=>{try{return y(h,v),null}catch(C){return C instanceof Error?C.message:"Invalid intervals"}},y=(h,v={getTimeSrv:i.$t})=>{const C=h.filter(m=>m.trim()!=="").map(m=>m.replace(/\s+/g,""));return[...new Set(v.getTimeSrv().getValidIntervals(C))]};class E extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=v=>{const C=v.currentTarget.value;if((0,t.isEmpty)(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);if(o.isValidTimeSpan(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=v=>{typeof v=="string"&&this.props.onTimeZoneChange(v)},this.onWeekStartChange=v=>{this.props.onWeekStartChange(v)}}render(){return n.createElement(l.s,{label:"Time options",isOpen:!0},n.createElement(f.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(d.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(f.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(r.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(f.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(c.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(f.g,{label:"Hide time picker"},n.createElement(a.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(f.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(a.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},82557:(Y,O,e)=>{"use strict";e.d(O,{D:()=>kn});var t=e(66111),n=e(56895),o=e(72196),s=e(68183),l=e(37932),f=e(31403),d=e(8125),r=e(95379),c=e(8412),a=e(47694),u=e(82002),i=e(27876),p=e(45984),g=e(67948),y=e(83829),E=e(9892),h=e(59679),v=e(41818),C=e(72648),m=e(20941),D=e(52081),P=e(67487),b=e(61860),M=e(39904),x=e(8180),A=e(35029);const T=({nodes:Be,edges:Ae,direction:nt,width:ct,height:wt,onDoubleClick:_t})=>{const Nt=(0,t.useRef)(null),at=(0,t.useRef)(null),An=(0,t.useCallback)(Fn=>{_t&&_t(Fn.nodes[0])},[_t]);return(0,t.useEffect)(()=>((async()=>{const Gn=await e.e(8271).then(e.t.bind(e,47137,23)),$n={nodes:S(Gn,Be),edges:U(Gn,Ae)},Ra={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:nt??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Nt.current=new Gn.Network(at.current,$n,Ra),Nt.current?.on("doubleClick",An)})(),()=>{Nt.current&&Nt.current.off("doubleClick")}),[nt,Ae,Be,An]),t.createElement("div",null,t.createElement("div",{ref:at,style:{width:ct??"100%",height:wt??"60vh"}}))};function S(Be,Ae){const nt=Ae.map(ct=>({...ct,shape:"box"}));return new Be.DataSet(nt)}function U(Be,Ae){const nt=Ae.map(ct=>({...ct,arrows:"to",dashes:!0}));return new Be.DataSet(nt)}function R({edges:Be,nodes:Ae,show:nt,title:ct,children:wt}){const[_t,Nt]=(0,t.useState)(nt),at=(0,t.useCallback)(()=>Nt(!0),[Nt]),An=(0,t.useCallback)(()=>Nt(!1),[Nt]);return t.createElement(t.Fragment,null,t.createElement(A.u,{isOpen:_t,title:ct,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:An,onDismiss:An},t.createElement(T,{nodes:Ae,edges:Be})),wt({showModal:at}))}const F=({id:Be,usages:Ae})=>{const nt=(0,t.useMemo)(()=>Ae.find(wt=>wt.variable.id===Be),[Be,Ae]);if(!nt)return null;const ct=nt.nodes.map(wt=>wt.label.includes(`$${Be}`)?{...wt,color:"#FB7E81"}:wt);return t.createElement(R,{show:!1,title:`Showing usages for: $${Be}`,nodes:ct,edges:nt.edges},({showModal:wt})=>t.createElement(x.h,{onClick:()=>wt(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var B=e(19248);const K=1e3;function L({variables:Be,dashboard:Ae}){const[nt,ct]=(0,t.useState)(!1),[wt,_t]=(0,t.useState)(0),[Nt,at]=(0,t.useState)([]),An=(0,C.wW)(I);(0,t.useEffect)(()=>_t($n=>$n+1),[Be,Ae]);const{loading:Fn}=(0,h.Z)(async()=>{if(nt&&wt>0){const $n=Date.now(),Ra=await(0,B.Yg)(Be,Ae),Ps=Date.now()-$n;return Ps>=K&&(0,v.ff)("Slow unknown variables expansion",{elapsed:Ps}),_t(0),at(Ra),Ra}return[]},[Be,Ae,nt,wt]),Gn=$n=>{$n&&(0,v.ff)("Unknown variables section expanded"),ct($n)};return t.createElement("div",{className:An.container},t.createElement(m.s,{label:t.createElement(N,null),isOpen:nt,onToggle:Gn},Fn&&t.createElement(D.wc,{justify:"center"},t.createElement(D.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(P.$,{size:16}))),!Fn&&Nt&&t.createElement(t.Fragment,null,Nt.length===0&&t.createElement(z,null),Nt.length>0&&t.createElement(G,{usages:Nt}))))}function N(){const Be=(0,C.wW)(I);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(b.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.J,{name:"info-circle",className:Be.infoIcon})))}function z(){return t.createElement("span",null,"No renamed or missing variables found.")}function G({usages:Be}){const Ae=(0,C.wW)(I);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Be.map(nt=>{const{variable:ct}=nt,{id:wt,name:_t}=ct;return t.createElement("tr",{key:wt},t.createElement("td",{className:Ae.firstColumn},t.createElement("span",null,_t)),t.createElement("td",{className:Ae.defaultColumn}),t.createElement("td",{className:Ae.defaultColumn}),t.createElement("td",{className:Ae.defaultColumn}),t.createElement("td",{className:Ae.lastColumn},t.createElement(F,{id:ct.id,usages:Be})))})))}const I=Be=>({container:E.css`
    margin-top: ${Be.spacing(4)};
    padding-top: ${Be.spacing(4)};
  `,infoIcon:E.css`
    margin-left: ${Be.spacing(1)};
  `,defaultColumn:E.css`
    width: 1%;
  `,firstColumn:E.css`
    width: 1%;
    vertical-align: top;
    color: ${Be.colors.text.maxContrast};
  `,lastColumn:E.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var V=e(7240),H=e(87095),Q=e(92990),oe=e(92624),se=e(98102);function ie({varName:Be,isOpen:Ae=!1,onConfirm:nt,onDismiss:ct}){return t.createElement(se.s,{title:"Delete variable",isOpen:Ae,onConfirm:nt,onDismiss:ct,body:`
      Are you sure you want to delete variable "${Be}"?
    `,modalClass:j.modal,confirmText:"Delete"})}const j={modal:(0,E.css)({width:"max-content",maxWidth:"80vw"})};var de=e(52666),ce=e(22323),ee=e(15546),le=e(85803),q=e(69273),fe=e(24799),Z=e(2594);const ne=[{label:"Label and value",value:q.bU.dontHide},{label:"Value",value:q.bU.hideLabel},{label:"Nothing",value:q.bU.hideVariable}];function re({onChange:Be,hide:Ae,type:nt}){const ct=(0,t.useMemo)(()=>ne.find(wt=>wt.value===Ae)?.value??ne[0].value,[Ae]);return nt==="constant"?null:t.createElement(fe.g,{label:"Show on dashboard"},t.createElement(Z.S,{options:ne,onChange:Be,value:ct}))}var ve=e(41624),me=e(49993),Ie=e(57052),Ge=e(83704);function gt({onChange:Be,type:Ae}){const nt=(0,t.useMemo)(()=>(0,oe.bi)(),[]),ct=(0,t.useMemo)(()=>nt.find(wt=>wt.value===Ae)??nt[0],[nt,Ae]);return t.createElement(Ge.u,{name:"Select variable type",value:ct,options:nt,onChange:Be,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Te=e(11543),Le=e(77117);const Ye=({variable:{options:Be}})=>{const[Ae,nt]=(0,t.useState)(20),[ct,wt]=(0,t.useState)([]),_t=(0,t.useCallback)(at=>{at.preventDefault(),nt(Ae+20)},[Ae,nt]),Nt=(0,C.wW)(it);return(0,t.useEffect)(()=>wt(Be.slice(0,Ae)),[Ae,Be]),ct.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Te.Z,null,ct.map((at,An)=>t.createElement(Te.Z,{key:`${at.value}-${An}`,className:Nt.optionContainer},t.createElement(Le.W,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Nt.label},at.text))))),Be.length>Ae&&t.createElement(Te.Z,{className:Nt.optionContainer},t.createElement(f.zx,{onClick:_t,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Ye.displayName="VariableValuesPreview";function it(Be){return{wrapper:(0,E.css)({display:"flex",flexDirection:"column",marginTop:Be.spacing(2)}),optionContainer:(0,E.css)({marginLeft:Be.spacing(.5),marginBottom:Be.spacing(.5)}),label:(0,E.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var ht=e(82897),Re=e(37737),ye=e(50678);const Ce=Be=>async Ae=>{const{rootStateKey:nt}=Be;Ae((0,V.mb)(nt,(0,ye.wJ)({name:(0,H.E0)(Be).name,id:Be.id})))},be=Be=>async(Ae,nt)=>{const{rootStateKey:ct}=Be;Ae((0,V.mb)(ct,(0,ye.qe)((0,oe.Y6)(Be))))},We=(Be,Ae)=>(nt,ct)=>{const{id:wt,rootStateKey:_t}=Be;let Nt=null;if(Ae.match(/^(?!__).*$/)||(Nt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Ae.match(/^\w+$/)||(Nt="Only word and digit characters are allowed in variable names"),(0,H.gt)(_t,ct()).filter(Fn=>Fn.name===Ae&&Fn.id!==wt).length&&(Nt="Variable with the same name already exists"),Nt){nt((0,V.mb)(_t,(0,ye.y8)({newName:Ae,errorText:Nt})));return}nt(Qe(Be,Ae))},Qe=(Be,Ae)=>(nt,ct)=>{const{rootStateKey:wt}=Be,_t=(0,H.E0)(Be,ct());if(_t.name===Ae){nt((0,V.mb)(wt,(0,ye.Yo)((0,oe.Y6)(Be,{newName:Ae}))));return}const Nt={...(0,ht.cloneDeep)(_t),name:Ae,id:Ae},at=_t.global,An=_t.index,Fn=(0,oe.yQ)(Nt);nt((0,V.mb)(wt,(0,Q.VN)((0,oe.Y6)(Fn,{global:at,index:An,model:Nt})))),nt((0,V.mb)(wt,(0,ye.Yo)((0,oe.Y6)(Fn,{newName:Ae})))),nt((0,V.mb)(wt,(0,Q.mZ)((0,oe.Y6)(Be,{reIndex:!1}))))},mt=(Be,Ae="query")=>(nt,ct)=>{const wt=(0,oe.mn)(Be),_t=(0,H.gt)(wt,ct()),Nt=rt(Ae,_t),at={type:Ae,id:Nt},An=!1,Fn=(0,H.Eo)(wt,ct()),Gn=(0,ht.cloneDeep)(ce.z.get(Ae).initialState);Gn.id=Nt,Gn.name=Nt,Gn.rootStateKey=wt,nt((0,V.mb)(wt,(0,Q.VN)((0,oe.Y6)(at,{global:An,model:Gn,index:Fn})))),l.E1.partial({editIndex:_t.length})},vt=Be=>(Ae,nt)=>{const ct=(0,oe.mn)(Be),wt=nt(),_t=(0,H.xD)(ct,wt),Nt=wt.dashboard.getModel(),{usages:at}=(0,B.V)(_t,Nt),An=(0,B.vI)(at);Ae((0,V.mb)(ct,(0,Re.j4)({usages:at,usagesNetwork:An})))};function rt(Be,Ae){let nt=0,ct=`${Be}${nt}`;for(;Ae.find(wt=>wt.id===ct);)ct=`${Be}${++nt}`;return ct}var Ot=(Be=>(Be[Be.MaxSize=50]="MaxSize",Be))(Ot||{});const Et=(Be,Ae)=>({editor:(0,H.AE)(Ae.identifier.rootStateKey,Be).editor,variable:(0,H.E0)(Ae.identifier,Be)}),Mt=Be=>({...(0,y.bindActionCreators)({variableEditorMount:Ce,variableEditorUnMount:be,changeVariableName:We,updateOptions:le.Rk},Be),changeVariableProp:(Ae,nt,ct)=>Be((0,V.mb)(Ae.rootStateKey,(0,Q.Pl)((0,oe.Y6)(Ae,{propName:nt,propValue:ct})))),changeVariableType:(Ae,nt)=>Be((0,V.mb)(Ae.rootStateKey,(0,Q.Be)((0,oe.Y6)(Ae,{newType:nt})))),removeVariable:Ae=>{Be((0,V.mb)(Ae.rootStateKey,(0,Q.mZ)((0,oe.Y6)(Ae,{reIndex:!0}))))}}),ue=(0,g.connect)(Et,Mt);class De extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Ae=>{Ae.preventDefault(),this.props.changeVariableName(this.props.identifier,Ae.currentTarget.value)},this.onTypeChange=Ae=>{Ae.value&&this.props.changeVariableType(this.props.identifier,Ae.value)},this.onLabelChange=Ae=>{Ae.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Ae.currentTarget.value)},this.onDescriptionChange=Ae=>{this.props.changeVariableProp(this.props.identifier,"description",Ae.currentTarget.value)},this.onHideChange=Ae=>{this.props.changeVariableProp(this.props.identifier,"hide",Ae)},this.onPropChanged=({propName:Ae,propValue:nt,updateOptions:ct=!1})=>{this.props.changeVariableProp(this.props.identifier,Ae,nt),ct&&this.props.updateOptions((0,oe.yQ)(this.props.variable))},this.onHandleSubmit=async Ae=>{Ae.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,oe.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),l.E1.partial({editIndex:null})},this.onApply=()=>{l.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Ae}=this.props,nt=ce.z.get(this.props.variable.type).editor;if(!nt)return null;const ct=Ae.state===de.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(gt,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(ve.e,null,"General"),t.createElement(Ie.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Ot.MaxSize,required:!0}),t.createElement(Ie.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(me.W,{name:"Description",value:Ae.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(re,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),nt&&t.createElement(nt,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ee.eL)(this.props.variable)?t.createElement(Ye,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(D.Lh,{spacing:"md",height:"inherit"},t.createElement(f.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(f.zx,{type:"submit","aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:ct,variant:"secondary"},"Run query",ct&&t.createElement(M.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(f.zx,{variant:"primary",onClick:this.onApply,"data-testid":s.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(ie,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ne=ue(De);var tt=e(36826),et=e(26418),Ue=e(69142),Fe=e(3153);const Ee=({variables:Be})=>{const Ae=(0,t.useMemo)(()=>(0,B.GQ)(Be),[Be]),nt=(0,t.useMemo)(()=>(0,B.MJ)(Be),[Be]);return nt.length?t.createElement(R,{show:!1,title:"Dependencies",nodes:(0,B.Of)(Ae,nt),edges:nt},({showModal:ct})=>t.createElement(f.zx,{onClick:()=>{(0,v.ff)("Show variable dependencies"),ct()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},Me=Be=>t.createElement(g.Provider,{store:Fe.h},t.createElement(Ee,{...Be})),He=({id:Be,usages:Ae,isAdhoc:nt})=>{const ct=(0,t.useMemo)(()=>Ae.find(_t=>_t.variable.id===Be),[Ae,Be]);if(Ae.length===0||nt||!ct)return null;const wt=ct.nodes.map(_t=>_t.label.includes(`$${Be}`)?{..._t,color:"#FB7E81"}:_t);return t.createElement(R,{show:!1,title:`Showing usages for: $${Be}`,nodes:wt,edges:ct.edges},({showModal:_t})=>t.createElement(x.h,{onClick:()=>{(0,v.ff)("Show variable usages"),_t()},name:"code-branch",title:"Show usages"}))};function Ze({index:Be,variable:Ae,usageTree:nt,usagesNetwork:ct,onEdit:wt,onDuplicate:_t,onDelete:Nt}){const at=(0,C.l4)(),An=(0,C.wW)(Pt),Fn=lt(Ae),$n=(0,B.Rv)(Ae.id,nt)>0||(0,ee.Kn)(Ae),Ra=(0,oe.yQ)(Ae);return t.createElement(tt._l,{draggableId:JSON.stringify(Ra),index:Be},(ts,Ps)=>t.createElement("tr",{ref:ts.innerRef,...ts.draggableProps,style:{userSelect:Ps.isDragging?"none":"auto",background:Ps.isDragging?at.colors.background.secondary:void 0,...ts.draggableProps.style}},t.createElement("td",{role:"gridcell",className:An.column},t.createElement(f.zx,{size:"xs",fill:"text",onClick:vs=>{vs.preventDefault(),wt(Ra)},className:An.nameLink,"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Ae.name)},Ae.name)),t.createElement("td",{role:"gridcell",className:An.definitionColumn,onClick:vs=>{vs.preventDefault(),wt(Ra)},"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Ae.name)},Fn),t.createElement("td",{role:"gridcell",className:An.column},t.createElement(bt,{passed:$n})),t.createElement("td",{role:"gridcell",className:An.column},t.createElement(He,{id:Ae.id,isAdhoc:(0,ee.Kn)(Ae),usages:ct})),t.createElement("td",{role:"gridcell",className:An.column},t.createElement(x.h,{onClick:vs=>{vs.preventDefault(),(0,v.ff)("Duplicate variable"),_t(Ra)},name:"copy",title:"Duplicate variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Ae.name)})),t.createElement("td",{role:"gridcell",className:An.column},t.createElement(x.h,{onClick:vs=>{vs.preventDefault(),(0,v.ff)("Delete variable"),Nt(Ra)},name:"trash-alt",title:"Remove variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Ae.name)})),t.createElement("td",{role:"gridcell",className:An.column},t.createElement("div",{...ts.dragHandleProps,className:An.dragHandle},t.createElement(M.J,{name:"draggabledots",size:"lg"})))))}function lt(Be){let Ae="";return(0,ee.Xh)(Be)?Be.definition?Ae=Be.definition:typeof Be.query=="string"&&(Ae=Be.query):(0,ee.eL)(Be)&&(Ae=Be.query),Ae}function bt({passed:Be}){const Ae=(0,C.wW)(Pt);return Be?t.createElement(M.J,{name:"check",className:Ae.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.J,{name:"exclamation-triangle",className:Ae.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Pt(Be){return{dragHandle:E.css`
      cursor: grab;
    `,column:E.css`
      width: 1%;
    `,nameLink:E.css`
      cursor: pointer;
      color: ${Be.colors.primary.text};
    `,definitionColumn:E.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:E.css`
      color: ${Be.v1.palette.greenBase};
    `,iconFailed:E.css`
      color: ${Be.v1.palette.orange};
    `}}function Je({variables:Be,usages:Ae,usagesNetwork:nt,onChangeOrder:ct,onAdd:wt,onEdit:_t,onDelete:Nt,onDuplicate:at}){const An=Fn=>{if(!Fn.destination||!Fn.source)return;(0,v.ff)("Variable drag and drop");const Gn=JSON.parse(Fn.draggableId);ct(Gn,Be[Fn.source.index].index,Be[Fn.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Be.length===0&&t.createElement(Dt,{onAdd:wt}),Be.length>0&&t.createElement(et.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(tt.Z5,{onDragEnd:An},t.createElement(tt.bK,{droppableId:"variables-list",direction:"vertical"},Fn=>t.createElement("tbody",{ref:Fn.innerRef,...Fn.droppableProps},Be.map((Gn,$n)=>t.createElement(Ze,{index:$n,key:`${Gn.name}-${$n}`,variable:Gn,usageTree:Ae,usagesNetwork:nt,onDelete:Nt,onDuplicate:at,onEdit:_t})),Fn.placeholder)))),t.createElement(et.Stack,null,t.createElement(Me,{variables:Be}),t.createElement(f.zx,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:wt,icon:"plus"},"New variable")))))}function Dt({onAdd:Be}){return t.createElement("div",null,t.createElement(Ue.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Ae=>{Ae.preventDefault(),Be()}}))}const Ve=(Be,Ae)=>{const{uid:nt}=Ae.dashboard,ct=(0,H.AE)(nt,Be);return{variables:(0,H.xD)(nt,Be),idInEditor:ct.editor.id,usagesNetwork:ct.inspect.usagesNetwork,usages:ct.inspect.usages}},Xe=Be=>({...(0,y.bindActionCreators)({createNewVariable:mt,initListMode:vt},Be),changeVariableOrder:(Ae,nt,ct)=>Be((0,V.mb)(Ae.rootStateKey,(0,Q.gE)((0,oe.Y6)(Ae,{fromIndex:nt,toIndex:ct})))),duplicateVariable:Ae=>Be((0,V.mb)(Ae.rootStateKey,(0,Q.Y9)((0,oe.Y6)(Ae,{newId:void 0})))),removeVariable:Ae=>{Be((0,V.mb)(Ae.rootStateKey,(0,Q.mZ)((0,oe.Y6)(Ae,{reIndex:!0}))))}}),st=(0,g.connect)(Ve,Xe);class ut extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Ae=>{const nt=this.props.variables.findIndex(ct=>ct.id===Ae.id);l.E1.partial({editIndex:nt})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Ae,nt,ct)=>{this.props.changeVariableOrder(Ae,nt,ct)},this.onDuplicateVariable=Ae=>{this.props.duplicateVariable(Ae)},this.onModalOpen=Ae=>{this.setState({variableId:Ae})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Ae,variables:nt}=this.props,ct=Ae!=null?nt[Ae]:void 0,wt=ct?{text:ct.name}:void 0;return t.createElement(c.T,{navModel:this.props.sectionNav,pageNav:wt},!ct&&t.createElement(Je,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!ct&&this.props.variables.length>0&&t.createElement(L,{variables:this.props.variables,dashboard:this.props.dashboard}),ct&&t.createElement(Ne,{identifier:(0,oe.yQ)(ct)}),t.createElement(ie,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const xt=st(ut);var Kt=e(73546),Jt=e(77582);const On=({dashboard:Be,sectionNav:Ae})=>{const nt=Jt.Vt.hasPermission(i.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(c.T,{navModel:Ae},t.createElement(Kt.P,{resource:"dashboards",resourceId:Be.uid,canSetPermissions:nt}))};var Nn=e(1108),jn=e(6645),ya=e(92158),Lt=e(54630),ft=e(61986),Ht=e(86977);const $t=Be=>({permissions:Be.dashboard.permissions,canViewFolderPermissions:Be.folder.canViewFolderPermissions}),zt={getDashboardPermissions:Ht.qm,addDashboardPermission:Ht.Yq,removeDashboardPermission:Ht.Qk,updateDashboardPermission:Ht.RF,checkFolderPermissions:ft.J6},Wt=(0,g.connect)($t,zt);class jt extends t.PureComponent{constructor(Ae){super(Ae),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=nt=>{this.props.removeDashboardPermission(this.props.dashboard.id,nt)},this.onPermissionChanged=(nt,ct)=>{this.props.updateDashboardPermission(this.props.dashboard.id,nt,ct)},this.onAddPermission=nt=>this.props.addDashboardPermission(this.props.dashboard.id,nt),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:Ae,canViewFolderPermissions:nt}=this.props;return{id:Ae.meta.folderId,title:Ae.meta.folderTitle,url:Ae.meta.folderUrl,canViewFolderPermissions:nt}}render(){const{permissions:Ae,dashboard:nt,sectionNav:ct}=this.props,{isAdding:wt}=this.state;return nt.meta.hasUnsavedFolderChange?t.createElement(c.T,{navModel:ct},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(c.T,{navModel:ct},t.createElement("div",{className:"page-action-bar"},t.createElement(b.u,{placement:"auto",content:t.createElement(Lt.Z,null)},t.createElement(M.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(f.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:wt},"Add permission")),t.createElement(Nn.s,{in:wt},t.createElement(jn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(ya.Z,{items:Ae,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const sn=Wt(jt);var pn=e(84135),Pn=e(73446),Mn=e(86647),Cn=e(53117),Hn=e(13393),_n=e(46967),oa=e(58255),Gt=e(8581),Bt=e(13355),on=e(65583),rn=e(47956),In=e(9398),Ln=e(19349),Un=e(86899),qn=e(86953),da=e(573),ha=e(30471),Ta=e(39834),Wa=e(2703);class cs extends t.PureComponent{constructor(Ae){super(Ae),this.updateFields=()=>{const nt=this.props.response?.panelData,ct=nt?.series?.[0]??nt?.annotations?.[0];if(ct&&ct.fields){const wt=ct.fields.map(_t=>{const Nt=(0,ha.CZ)(_t,ct);let at="";for(let An=0;An<ct.length;An++){if(An>0&&(at+=", "),An>2){at+="...";break}at+=_t.values[An]}return at.length>50&&(at=at.substring(0,50)+"..."),{label:`${Nt} (${_t.type})`,value:Nt,description:at}});this.setState({fieldNames:wt})}},this.onFieldSourceChange=(nt,ct)=>{const wt=this.props.mappings||{},_t=wt[nt]||{};this.props.change({...wt,[nt]:{..._t,source:ct.value||Ta.L.Field}})},this.onFieldNameChange=(nt,ct)=>{const wt=this.props.mappings||{},_t=wt[nt]||{};this.props.change({...wt,[nt]:{..._t,value:ct.value,source:Ta.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Ae){Ae.response!==this.props.response&&this.updateFields()}renderRow(Ae,nt,ct){const{fieldNames:wt}=this.state;let _t=wt;const Nt=nt.value;let at=wt.find(Fn=>Nt===Fn.value);Nt&&(_t=[...wt],at||_t.push({label:Nt,value:Nt}));let An=ct?ct[Ae.key]:"";if(An&&Ae.key.startsWith("time")){const Fn=(0,Wa.Cf)("dateTimeAsIso");An=(0,Wa.zc)(Fn(An))}return An==null&&(An=""),t.createElement("tr",{key:Ae.key},t.createElement("td",null,Ae.key," ",Ae.help&&t.createElement(b.u,{content:Ae.help},t.createElement(M.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(Gt.Ph,{value:at,options:_t,placeholder:Ae.placeholder||Ae.key,onChange:Fn=>{this.onFieldNameChange(Ae.key,Fn)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${An}`))}render(){const Ae=this.props.response?.events?.[0],nt=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,da.r0.map(ct=>this.renderRow(ct,nt[ct.key]||{},Ae))))}}class is extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Ae,annotation:nt}=this.props;if((0,da.yr)(Ae))return;const ct=(0,In.h4)().getCurrent();if(!ct)return;this.setState({running:!0});const wt=await(0,on.n)((0,qn.r)({range:(0,Ln.$t)().timeRange(),panel:new Un.r({}),dashboard:ct},Ae,nt));this.setState({running:!1,response:wt})},this.onQueryChange=Ae=>{this.props.onChange({...this.props.annotation,target:Ae})},this.onMappingChange=Ae=>{this.props.onChange({...this.props.annotation,mappings:Ae})},this.onAnnotationChange=Ae=>{this.props.onChange(Ae)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Ae){this.props.annotation!==Ae.annotation&&!(0,da.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Ae,annotation:nt}=this.props,wt={...da.yA,...Ae.annotations}.prepareAnnotation(nt);wt!==nt?this.props.onChange(wt):this.onRunQuery()}renderStatus(){const{response:Ae,running:nt}=this.state;let ct="alert-info",wt="...",_t;if(nt||Ae?.panelData?.state===de.Gu.Loading||!Ae)wt="loading...";else{const{events:Nt,panelData:at}=Ae;if(at?.error)ct="alert-error",_t="exclamation-triangle",wt=at.error.message??"error";else if(!Nt?.length)ct="alert-warning",_t="exclamation-triangle",wt="No events found";else{const An=at?.series?.[0]??at?.annotations?.[0];wt=`${Nt.length} events (from ${An?.fields.length} fields)`}}return t.createElement("div",{className:(0,E.cx)(ct,E.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,_t&&t.createElement(t.Fragment,null,t.createElement(M.J,{name:_t}),"\xA0"),wt),t.createElement("div",null,nt?t.createElement(P.$,null):t.createElement(f.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Ae,annotation:nt,datasourceInstanceSettings:ct}=this.props,{response:wt}=this.state;let _t=Ae.annotations?.QueryEditor||Ae.components?.QueryEditor;if(!_t)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Nt={...Ae.annotations?.getDefaultQuery?.(),...nt.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(rn.n,{instanceSettings:ct},t.createElement(_t,{key:Ae?.name,query:Nt,datasource:Ae,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:wt?.panelData,range:(0,Ln.$t)().timeRange(),annotation:nt,onAnnotationChange:this.onAnnotationChange})),(0,da.$w)(Ae)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(cs,{response:wt,mappings:nt.mappings,change:this.onMappingChange})))}}var Ha=e(11484);class $a extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Ae){Ae.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Ae=(0,Ha.w)(),nt='<plugin-component type="annotations-query-ctrl"> </plugin-component>',ct={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Ae.load(this.ref,ct,nt),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(ct.ctrl.ignoreNextWatcherFiring){ct.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(ct.ctrl.currentAnnotation)}),this.scopeProps=ct}render(){return t.createElement("div",{ref:Ae=>this.ref=Ae})}}const ss="New annotation",Oa=({editIdx:Be,dashboard:Ae})=>{const nt=(0,C.wW)(Ia),[ct,wt]=(0,t.useState)(Ae.annotations.list[Be]),_t=(0,t.useMemo)(()=>ct.filter?ct.filter.exclude?la.ExcludePanels:la.IncludePanels:la.AllPanels,[ct.filter]),{value:Nt}=(0,h.Z)(()=>(0,Mn.F)().get(ct.datasource),[ct.datasource]),at=(0,Mn.F)().getInstanceSettings(ct.datasource),An=Ya=>{const Is=[...Ae.annotations.list];Is.splice(Be,1,Ya),wt(Ya),Ae.annotations.list=Is},Fn=Ya=>{An({...ct,name:Ya.currentTarget.value})},Gn=Ya=>{An({...ct,datasource:(0,Pn.iU)(Ya)})},$n=Ya=>{const Is=Ya.currentTarget;An({...ct,[Is.name]:Is.type==="checkbox"?Is.checked:Is.value})},Ra=Ya=>{An({...ct,iconColor:Ya})},ts=Ya=>{let Is=Ya.value===la.AllPanels?void 0:{exclude:Ya.value===la.ExcludePanels,ids:ct.filter?.ids??[]};An({...ct,filter:Is})},Ps=Ya=>{if(!Array.isArray(Ya))return;const Is={exclude:_t===la.ExcludePanels,ids:[]};Ya.forEach(ws=>ws.value&&Is.ids.push(ws.value)),An({...ct,filter:Is})},vs=ys,Es=()=>{l.E1.partial({editview:null,editIndex:null})},ma=()=>{const Ya=Ae.annotations.list;Ae.annotations.list=[...Ya.slice(0,Be),...Ya.slice(Be+1)],ys()},ba=ct.name===ss,as=(Ya,Is)=>Ya.label&&Is.label?Ya.label.toLowerCase().localeCompare(Is.label.toLowerCase()):-1,ms=(0,t.useMemo)(()=>Ae?.panels.filter(Ya=>a.ZP.panels[Ya.type]).map(Ya=>({value:Ya.id,label:Ya.title??`Panel ${Ya.id}`,description:Ya.description,imgUrl:a.ZP.panels[Ya.type].info.logos.small})).sort(as)??[],[Ae]);return t.createElement("div",null,t.createElement(Hn.C,{className:nt.settingsForm},t.createElement(fe.g,{label:"Name"},t.createElement(_n.I,{"aria-label":s.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:ba,value:ct.name,onChange:Fn})),t.createElement(fe.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Cn.q,{annotations:!0,variables:!0,current:ct.datasource,onChange:Gn})),t.createElement(fe.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(oa.X,{name:"enable",id:"enable",value:ct.enable,onChange:$n})),t.createElement(fe.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(oa.X,{name:"hide",id:"hide",value:ct.hide,onChange:$n})),t.createElement(fe.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(D.Lh,null,t.createElement(Bt.B,{value:ct?.iconColor,onChange:Ra}))),t.createElement(fe.g,{label:"Show in","aria-label":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(Gt.Ph,{options:Ts,value:_t,onChange:ts,"aria-label":s.wl.components.Annotations.annotationsTypeInput}),_t!==la.AllPanels&&t.createElement(Gt.NU,{options:ms,value:ms.filter(Ya=>ct.filter?.ids.includes(Ya.value)),onChange:Ps,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:nt.select,"aria-label":s.wl.components.Annotations.annotationsChoosePanelInput})))),t.createElement(Hn.C,null,t.createElement("h3",{className:"page-heading"},"Query"),Nt?.annotations&&at&&t.createElement(is,{datasource:Nt,datasourceInstanceSettings:at,annotation:ct,onChange:An}),Nt&&!Nt.annotations&&t.createElement($a,{datasource:Nt,annotation:ct,onChange:An})),t.createElement(et.Stack,null,!ct.builtIn&&t.createElement(f.zx,{variant:"destructive",onClick:ma},"Delete"),t.createElement(f.zx,{variant:"secondary",onClick:Es,"data-testid":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(f.zx,{variant:"primary",onClick:vs},"Apply")))},Ia=Be=>({settingsForm:(0,E.css)({maxWidth:Be.spacing(60),marginBottom:Be.spacing(2)}),select:E.css`
      margin-top: 8px;
    `});function ys(){l.E1.partial({editIndex:null})}var la=(Be=>(Be[Be.AllPanels=0]="AllPanels",Be[Be.IncludePanels=1]="IncludePanels",Be[Be.ExcludePanels=2]="ExcludePanels",Be))(la||{});const Ts=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var bs=e(574),ds=e(13626);const Us=({children:Be,...Ae})=>{const nt=(0,C.wW)(Za);return t.createElement("div",{className:nt.buttonWrapper},t.createElement(f.zx,{icon:"plus",variant:"secondary",...Ae},Be))},Za=Be=>({buttonWrapper:E.css`
    padding: ${Be.spacing(3)} 0;
  `}),Ks=({dashboard:Be,onNew:Ae,onEdit:nt})=>{const[ct,wt]=(0,t.useState)(Be.annotations.list),_t=(Gn,$n)=>{Be.annotations.list=bs.moveItemImmutably(ct,Gn,Gn+$n),wt(Be.annotations.list)},Nt=Gn=>{Be.annotations.list=[...ct.slice(0,Gn),...ct.slice(Gn+1)],wt(Be.annotations.list)},at=ct.length===0||ct.length===1&&ct[0].builtIn,An=Gn=>Gn.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Gn.name)):Gn.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},Gn.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,Gn.name),Fn=(0,Mn.F)();return t.createElement(D.wc,null,ct.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Be.annotations.list.map((Gn,$n)=>t.createElement("tr",{key:`${Gn.name}-${$n}`},Gn.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>nt($n)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},An(Gn))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>nt($n)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},An(Gn))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>nt($n)},Fn.getInstanceSettings(Gn.datasource)?.name||Gn.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},$n!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>_t($n,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Be.annotations.list.length>1&&$n!==Be.annotations.list.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>_t($n,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Gn.builtIn&&t.createElement(ds.m,{size:"sm",onConfirm:()=>Nt($n),"aria-label":`Delete query with title "${Gn.name}"`})))))),at&&t.createElement(Ue.Z,{onClick:Ae,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!at&&t.createElement(Us,{onClick:Ae},"New query"))};function dn({dashboard:Be,editIndex:Ae,sectionNav:nt}){const ct=()=>{const Nt={name:ss,enable:!0,datasource:(0,Pn.iU)((0,Mn.F)().getInstanceSettings(null)),iconColor:"red"};Be.annotations.list=[...Be.annotations.list,{...Nt}],l.E1.partial({editIndex:Be.annotations.list.length-1})},wt=Nt=>{l.E1.partial({editIndex:Nt})},_t=Ae!=null&&Ae<Be.annotations.list.length;return t.createElement(c.T,{navModel:nt,pageNav:ln(Be,Ae)},!_t&&t.createElement(Ks,{dashboard:Be,onNew:ct,onEdit:wt}),_t&&t.createElement(Oa,{dashboard:Be,editIdx:Ae}))}function ln(Be,Ae){if(Ae==null)return;const nt=Be.annotations.list[Ae];if(nt)return{text:nt.name}}var Tn=e(43339),zn=e(79658),ga=e(5191),va=e(55986),Ga=e(13821),qa=e(60499),es=e(50946);const us=(Be,Ae)=>{const[nt,ct]=(0,Ga.Z)(()=>(0,es.iM)(Be,!1),[]),wt=(0,qa.iG)();return(0,t.useEffect)(()=>{nt.value&&(Ae(),l.E1.replace("/"),wt.success("Dashboard Deleted",`${nt.value.title} has been deleted`))},[nt,wt,Ae]),{state:nt,onDeleteDashboard:ct}},hs={cleanUpDashboardAndVariables:Ht.lw},$s=(0,g.connect)(null,hs),tr=({hideModal:Be,cleanUpDashboardAndVariables:Ae,dashboard:nt})=>{const ct=nt.meta.provisioned,{onDeleteDashboard:wt}=us(nt.uid,Ae),[,_t]=(0,va.default)(async()=>{await wt(),Be()},[Be]),Nt=mr(nt.panels,nt.title);return ct?t.createElement(ur,{hideModal:Be,provisionedId:nt.meta.provisionedExternalId}):t.createElement(se.s,{isOpen:!0,body:Nt,onConfirm:_t,onDismiss:Be,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},mr=(Be,Ae)=>{const nt=(0,ht.sumBy)(Be,ct=>ct.alert?1:0);return nt>0&&!a.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",nt," alert",nt>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,Ae))},ur=({hideModal:Be,provisionedId:Ae})=>t.createElement(A.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Be,className:E.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",Ae),t.createElement(A.u.ButtonRow,null,t.createElement(f.zx,{variant:"primary",onClick:Be},"OK"))),sr=$s(tr),er=({dashboard:Be})=>t.createElement(ga.JY,null,({showModal:Ae,hideModal:nt})=>t.createElement(f.zx,{variant:"destructive",onClick:()=>{Ae(sr,{dashboard:Be,hideModal:nt})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var ks=e(42557);const Er=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function Vs({dashboard:Be,updateTimeZone:Ae,updateWeekStart:nt,sectionNav:ct}){const[wt,_t]=(0,t.useState)(0),Nt=ba=>{Be.meta.folderUid=ba.uid,Be.meta.folderTitle=ba.title,Be.meta.hasUnsavedFolderChange=!0},at=ba=>{(ba.currentTarget.name==="title"||ba.currentTarget.name==="description")&&(Be[ba.currentTarget.name]=ba.currentTarget.value)},An=ba=>{Be.graphTooltip=ba,_t(wt+1)},Fn=ba=>{Be.timepicker.refresh_intervals=ba.filter(as=>as.trim()!=="")},Gn=ba=>{Be.timepicker.nowDelay=ba},$n=ba=>{Be.timepicker.hidden=ba,_t(wt+1)},Ra=ba=>{Be.liveNow=ba,_t(wt+1)},ts=ba=>{Be.timezone=ba,_t(wt+1),Ae(ba)},Ps=ba=>{Be.weekStart=ba,_t(wt+1),nt(ba)},vs=ba=>{Be.tags=ba,_t(wt+1)},Es=ba=>{Be.editable=ba,_t(wt+1)},ma=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(c.T,{navModel:ct},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(fe.g,{label:"Name"},t.createElement(_n.I,{id:"title-input",name:"title",onBlur:at,defaultValue:Be.title})),t.createElement(fe.g,{label:"Description"},t.createElement(_n.I,{id:"description-input",name:"description",onBlur:at,defaultValue:Be.description})),t.createElement(fe.g,{label:"Tags"},t.createElement(Tn.B,{id:"tags-input",tags:Be.tags,onChange:vs,width:40})),t.createElement(fe.g,{label:"Folder"},t.createElement(zn.Es,{inputId:"dashboard-folder-input",initialTitle:Be.meta.folderTitle,initialFolderUid:Be.meta.folderUid,onChange:Nt,enableCreateNew:!0,dashboardId:Be.id,skipInitialLoad:!0})),t.createElement(fe.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(Z.S,{value:Be.editable,options:ma,onChange:Es}))),t.createElement(ks.P,{onTimeZoneChange:ts,onWeekStartChange:Ps,onRefreshIntervalChange:Fn,onNowDelayChange:Gn,onHideTimePickerChange:$n,onLiveNowChange:Ra,refreshIntervals:Be.timepicker.refresh_intervals,timePickerHidden:Be.timepicker.hidden,nowDelay:Be.timepicker.nowDelay,timezone:Be.timezone,weekStart:Be.weekStart,liveNow:Be.liveNow}),t.createElement(m.s,{label:"Panel options",isOpen:!0},t.createElement(fe.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(Z.S,{onChange:An,options:Er,value:Be.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Be.meta.canDelete&&t.createElement(er,{dashboard:Be}))))}const Tr={updateTimeZone:Ht.tM,updateWeekStart:Ht.f4},yr=(0,g.connect)(null,Tr)(Vs);var Cr=e(9405),Or=e(30992);function fr({dashboard:Be,sectionNav:Ae}){const[nt,ct]=(0,t.useState)(JSON.stringify(Be.getSaveModelClone(),null,2)),wt=async()=>{await(0,In.h4)().saveJSONDashboard(nt),Or.H.reloadPage()},_t=(0,C.wW)(Js),Nt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(c.T,{navModel:Ae,subTitle:Nt},t.createElement("div",{className:_t.wrapper},t.createElement(Cr.p,{value:nt,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:ct,containerStyles:_t.codeEditor}),Be.meta.canSave&&t.createElement("div",null,t.createElement(f.zx,{type:"submit",onClick:wt},"Save changes"))))}const Js=Be=>({wrapper:(0,E.css)({display:"flex",height:"100%",flexDirection:"column",gap:Be.spacing(2)}),codeEditor:(0,E.css)({flexGrow:1})});var Os=e(18428),lr=e(34807);const fn=({dashboard:Be,onNew:Ae,onEdit:nt})=>{const[ct,wt]=(0,t.useState)(Be.links),_t=(Fn,Gn)=>{Be.links=bs.moveItemImmutably(ct,Fn,Fn+Gn),wt(Be.links)},Nt=(Fn,Gn)=>{Be.links=[...ct,{...Fn}],wt(Be.links)},at=Fn=>{Be.links=[...ct.slice(0,Fn),...ct.slice(Fn+1)],wt(Be.links)};return Be.links.length===0?t.createElement("div",null,t.createElement(Ue.Z,{onClick:Ae,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,ct.map((Fn,Gn)=>t.createElement("tr",{key:`${Fn.title}-${Gn}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>nt(Gn)},t.createElement(M.J,{name:"external-link-alt"})," \xA0 ",Fn.type),t.createElement("td",{role:"gridcell"},t.createElement(D.Lh,null,Fn.title&&t.createElement("span",null,Fn.title),Fn.type==="link"&&t.createElement("span",null,Fn.url),Fn.type==="dashboards"&&t.createElement(lr.P,{tags:Fn.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Gn!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>_t(Gn,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},ct.length>1&&Gn!==ct.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>_t(Gn,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(x.h,{"aria-label":"copy",name:"copy",onClick:()=>Nt(Fn,Gn)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(ds.m,{"aria-label":`Delete link with title "${Fn.title}"`,size:"sm",onConfirm:()=>at(Gn)})))))),t.createElement(Us,{onClick:Ae},"New link"))};function qe({dashboard:Be,sectionNav:Ae,editIndex:nt}){const[ct,wt]=(0,t.useState)(!1),_t=()=>{wt(!1),l.E1.partial({editIndex:void 0})},Nt=()=>{Be.links=[...Be.links,{...Os.zA}],wt(!0),l.E1.partial({editIndex:Be.links.length-1})},at=Gn=>{wt(!1),l.E1.partial({editIndex:Gn})},An=nt!==void 0;let Fn;return An&&(Fn={text:ct?"New link":"Edit link",subTitle:ct?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(c.T,{navModel:Ae,pageNav:Fn},!An&&t.createElement(fn,{dashboard:Be,onNew:Nt,onEdit:at}),An&&t.createElement(Os.fD,{dashboard:Be,editLinkIdx:nt,onGoBack:_t}))}var Ct=e(99714);const At=10;class tn extends t.PureComponent{constructor(Ae){super(Ae),this.getVersions=(nt=!1)=>{this.setState({isAppending:nt}),Ct.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(ct=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(ct)]}),this.start+=this.limit}).catch(ct=>console.log(ct)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const nt=this.state.versions.filter(An=>An.checked),[ct,wt]=nt,_t=ct.version===this.props.dashboard.version;this.setState({isLoading:!0});const Nt=await Ct.K8.getDashboardVersion(this.props.dashboard.uid,wt.version),at=await Ct.K8.getDashboardVersion(this.props.dashboard.uid,ct.version);this.setState({baseInfo:wt,isLoading:!1,isNewLatest:_t,newInfo:ct,viewMode:"compare",diffData:{lhs:Nt.data,rhs:at.data}})},this.decorateVersions=nt=>nt.map(ct=>({...ct,createdDateString:this.props.dashboard.formatDate(ct.created),ageString:this.props.dashboard.getRelativeTime(ct.created),checked:!1})),this.onCheck=(nt,ct)=>{this.setState({versions:this.state.versions.map(wt=>wt.id===ct?{...wt,checked:nt.currentTarget.checked}:wt)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(nt=>({...nt,checked:!1})),viewMode:"list"})},this.limit=At,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Ae=>Ae.version===1)}render(){const{versions:Ae,viewMode:nt,baseInfo:ct,newInfo:wt,isNewLatest:_t,isLoading:Nt,diffData:at}=this.state,An=Ae.filter($n=>$n.checked).length===2,Fn=Ae.length>1,Gn=Ae.length>=this.limit;return nt==="compare"?t.createElement(c.T,{navModel:this.props.sectionNav},t.createElement(Ct.Cs,{onClick:this.reset,baseVersion:ct?.version,newVersion:wt?.version,isNewLatest:_t}),Nt?t.createElement(Rn,{msg:"Fetching changes\u2026"}):t.createElement(Ct.U$,{newInfo:wt,baseInfo:ct,isNewLatest:_t,diffData:at})):t.createElement(c.T,{navModel:this.props.sectionNav},Nt?t.createElement(Rn,{msg:"Fetching history list\u2026"}):t.createElement(Ct.Sd,{versions:Ae,onCheck:this.onCheck,canCompare:An}),this.state.isAppending&&t.createElement(Rn,{msg:"Fetching more entries\u2026"}),Fn&&t.createElement(Ct.R1,{hasMore:Gn,canCompare:An,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Rn=({msg:Be})=>t.createElement(D.Lh,null,t.createElement(P.$,null),t.createElement("em",null,Be)),Dn=()=>l.E1.partial({editview:null,editIndex:null});function kn({dashboard:Be,editview:Ae,pageNav:nt,sectionNav:ct}){const[wt,_t]=(0,t.useState)(0);(0,t.useEffect)(()=>{Be.events.subscribe(p.hS,()=>_t(Es=>Es+1))},[Be]);const Nt=(0,t.useMemo)(()=>aa(Be),[Be,wt]),at=()=>{Be.meta.hasUnsavedFolderChange=!1},An=Nt.find(Es=>Es.id===Ae)??Nt[0],Fn=u.Vt.hasEditPermissionInFolders,Gn=Be.meta.canSave,$n=(0,n.TH)(),Ra=Tt($n),ts=ia(nt,ct,Nt,An,$n),Ps="sm",vs=[t.createElement(f.zx,{"data-testid":s.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:Ps,onClick:Dn},"Close"),Fn&&t.createElement(pn.t,{dashboard:Be,onSaveSuccess:at,variant:"secondary",key:"save as",size:Ps}),Gn&&t.createElement(pn.i,{dashboard:Be,onSaveSuccess:at,key:"Save",size:Ps})];return t.createElement(t.Fragment,null,t.createElement(r.A,{actions:t.createElement(d.R,{alignment:"right"},vs)}),t.createElement(An.component,{sectionNav:ts,dashboard:Be,editIndex:Ra}))}function aa(Be){const Ae=[];return Be.meta.canEdit&&(Ae.push({title:"General",id:"settings",icon:"sliders-v-alt",component:yr}),Ae.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:dn,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Ae.push({title:"Variables",id:"templating",icon:"calculator-alt",component:xt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Ae.push({title:"Links",id:"links",icon:"link",component:qe})),Be.meta.canMakeEditable&&Ae.push({title:"General",icon:"sliders-v-alt",id:"settings",component:ja}),Be.id&&Be.meta.canSave&&Ae.push({title:"Versions",id:"versions",icon:"history",component:tn}),Be.id&&Be.meta.canAdmin&&(a.ZP.rbacEnabled?u.Vt.hasPermission(i.AccessControlAction.DashboardsPermissionsRead)&&Ae.push({title:"Permissions",id:"permissions",icon:"lock",component:On}):Ae.push({title:"Permissions",id:"permissions",icon:"lock",component:sn})),Ae.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:fr}),Ae}function Qn(Be,Ae){return{...Be,parentItem:Be.parentItem?Qn(Be.parentItem,Ae):Ae}}function ia(Be,Ae,nt,ct,wt){const _t={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};_t.children=nt.map(at=>({text:at.title,icon:at.icon,id:at.id,url:o.u.getUrlForPartial(wt,{editview:at.id,editIndex:null}),active:at===ct,parentItem:_t,subTitle:at.subTitle}));const Nt=Qn(Be,Ae.node);return _t.parentItem=Nt,{main:_t,node:_t.children.find(at=>at.active)}}function ja({dashboard:Be,sectionNav:Ae}){return t.createElement(c.T,{navModel:Ae},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(f.zx,{type:"submit",onClick:()=>Be.makeEditable()},"Make editable"))}function Tt(Be){const Ae=new URLSearchParams(Be.search).get("editIndex");if(Ae!=null)return parseInt(Ae,10)}},18428:(Y,O,e)=>{"use strict";e.d(O,{fD:()=>p,xy:()=>u,zA:()=>c});var t=e(66111),n=e(24799),o=e(46967),s=e(8581),l=e(43339),f=e(20941),d=e(58255),r=e(31403);const c={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},a=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],u={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},i=Object.keys(u).map(g=>({label:g,value:g})),p=({editLinkIdx:g,dashboard:y,onGoBack:E})=>{const[h,v]=(0,t.useState)(g!==null?y.links[g]:c),C=x=>{const A=[...y.links];A.splice(g,1,x),y.links=A,v(x)},m=x=>{C({...h,tags:x})},D=x=>{const A={...h,type:x.value};A.type==="dashboards"?(A.url="",A.tooltip=""):A.tags=[],C(A)},P=x=>{C({...h,icon:x.value})},b=x=>{const A=x.currentTarget;C({...h,[A.name]:A.type==="checkbox"?A.checked:A.value})},M=h.title===c.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(o.I,{name:"title",id:"title",value:h.title,onChange:b,autoFocus:M})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:h.type,options:a,onChange:D})),h.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(l.B,{tags:h.tags,onChange:m}))),h.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(o.I,{name:"url",value:h.url,onChange:b})),t.createElement(n.g,{label:"Tooltip"},t.createElement(o.I,{name:"tooltip",value:h.tooltip,onChange:b,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:h.icon,options:i,onChange:P}))),t.createElement(f.s,{label:"Options",isOpen:!0},h.type==="dashboards"&&t.createElement(n.g,null,t.createElement(d.X,{label:"Show as dropdown",name:"asDropdown",value:h.asDropdown,onChange:b})),t.createElement(n.g,null,t.createElement(d.X,{label:"Include current time range",name:"keepTime",value:h.keepTime,onChange:b})),t.createElement(n.g,null,t.createElement(d.X,{label:"Include current template variable values",name:"includeVars",value:h.includeVars,onChange:b})),t.createElement(n.g,null,t.createElement(d.X,{label:"Open link in new tab",name:"targetBlank",value:h.targetBlank,onChange:b}))),t.createElement(r.zx,{onClick:E},"Apply"))}},91183:(Y,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(9892),n=e(66111),o=e(23934),s=e(68183),l=e(72648),f=e(51275),d=e(31403),r=e(96044),c=e(36281);const a="showCategory",u=n.memo(({id:g,title:y,children:E,forceOpen:h,isOpenDefault:v,renderTitle:C,className:m,itemsCount:D,isNested:P=!1})=>{const b=v!==!1,[M,x]=(0,o.Z)(p(g),{isExpanded:b}),A=(0,l.wW)(i),[T,S]=(0,r.K)(),[U,R]=(0,n.useState)(M?.isExpanded??b),F=(0,n.useRef)(0),B=(0,n.useRef)(null),K=T[a]===g;(0,n.useEffect)(()=>{F.current&&Date.now()-F.current<200||(K||h)&&(U||R(!0),K&&B.current?.scrollIntoView())},[h,U,K]);const L=(0,n.useCallback)(()=>{F.current=Date.now(),S({[a]:U?void 0:g},!0),x({isExpanded:!U}),R(!U)},[x,R,S,U,g]);C||(C=function(V){return V||D===void 0||D===0?y:n.createElement("span",null,y," ",n.createElement(f.A,{value:D}))});const N=(0,t.cx)({[A.box]:!0,[A.boxNestedExpanded]:P&&U},m,"options-group"),z=(0,t.cx)(A.header,{[A.headerExpanded]:U,[A.headerNested]:P}),G=(0,t.cx)(A.body,{[A.bodyNested]:P});return n.createElement("div",{className:N,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(g),ref:B},n.createElement("div",{className:z,onClick:L},n.createElement(d.zx,{"aria-label":s.wl.components.OptionsGroup.toggle(g),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":U,className:A.toggleButton,icon:U?"angle-down":"angle-right",onClick:L}),n.createElement("h6",{id:`button-${g}`,className:A.title},C(U))),U&&n.createElement("div",{className:G,id:g,"aria-labelledby":`button-${g}`},E))});u.displayName="OptionsPaneCategory";const i=g=>({box:t.css`
      border-top: 1px solid ${g.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${g.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${g.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${g.spacing(.5)};
      color: ${g.colors.text.primary};
      font-weight: ${g.typography.fontWeightMedium};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${g.colors.text.primary};
    `,headerNested:t.css`
      padding: ${g.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${g.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${g.colors.border.weak};
      }
    `}),p=g=>`${c.jy}.optionGroup[${g}]`},91752:(Y,O,e)=>{"use strict";e.d(O,{j:()=>o});var t=e(66111),n=e(91183);class o{constructor(l){this.props=l,this.items=[],this.categories=[]}addItem(l){return l.parent=this,this.items.push(l),this}addCategory(l){return l.props.isNested=!0,l.parent=this,this.categories.push(l),this}getCategory(l){let f=this.categories.find(d=>d.props.id===l);return f||(f=new o({title:l,id:l}),this.addCategory(f),f)}render(l){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(f=>f.render(l)),this.categories.map(f=>f.render(l)))}}},66352:(Y,O,e)=>{"use strict";e.d(O,{a:()=>i});var t=e(66111),n=e(55271),o=e.n(n),s=e(68183),l=e(64353),f=e(24799),d=e(9892),r=e(72648),c=e(61860);function a({overrides:p}){const g=(0,r.wW)(u);return t.createElement("div",{className:g.wrapper},p.map((y,E)=>t.createElement(c.u,{content:y.tooltip,key:E.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:g[y.type]}))))}const u=p=>{const g={width:8,height:8,borderRadius:"50%",marginLeft:p.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,d.css)({display:"flex"}),rule:(0,d.css)({...g,backgroundColor:p.colors.primary.main}),data:(0,d.css)({...g,backgroundColor:p.colors.warning.main})}};class i{constructor(g){this.props=g}getLabel(g){const{title:y,description:E,overrides:h}=this.props;if(!g)return this.parent.props.title===y&&!h?.length?null:t.createElement(l._,{description:E},y,h&&h.length>0&&t.createElement(a,{overrides:h}));const v=[];return this.parent.parent&&v.push(this.highlightWord(this.parent.parent.props.title,g)),this.parent.props.title!==y&&v.push(this.highlightWord(this.parent.props.title,g)),t.createElement(l._,{description:E&&this.highlightWord(E,g),category:v},this.highlightWord(y,g),h&&h.length>0&&t.createElement(a,{overrides:h}))}highlightWord(g,y){return t.createElement(o(),{textToHighlight:g,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:g}=this.props;!g||g.length}render(g){const{title:y,description:E,render:h,showIf:v,skipField:C}=this.props,m=`${this.parent.props.id} ${y}`;return v&&!v()?null:C?h():t.createElement(f.g,{label:this.getLabel(g),description:E,key:m,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(m)},h())}}},57054:(Y,O,e)=>{"use strict";e.d(O,{HZ:()=>p,AL:()=>i});var t=e(82897),n=e(66111),o=e(91353),s=e(64703),l=e(91752),f=e(66352);const d="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",r="An override rule exists for this property";function c(g,y,E){const h=[];if(E){for(const C of E)for(const m of C.fields)if((0,t.get)(m.config,g.path)!=null){h.push({type:"data",description:d,tooltip:d});break}}return y.overrides.some(C=>C.properties.some(m=>m.id===g.id))&&h.push({type:"rule",description:r,tooltip:r}),h}var a=e(13505);function u({data:g,replaceVariables:y,options:E,eventBus:h,instanceState:v}){const C=g?.series??[];return{data:C,replaceVariables:y,options:E,eventBus:h,getSuggestions:D=>(0,s.PW)(C,D),instanceState:v}}function i(g){const{plugin:y,panel:E,onPanelOptionsChanged:h,onFieldConfigsChange:v,data:C,dashboard:m,instanceState:D}=g,P=E.getOptions(),b=E.fieldConfig,M={},x=u({data:C,replaceVariables:E.replaceVariables,options:P,eventBus:m.events,instanceState:D}),A=S=>{const U=(S&&S[0])??`${y.meta.name}`,R=M[U];return R||(M[U]=new l.j({title:U,id:U}))},T={getValue:S=>(0,t.get)(P,S),onChange:(S,U)=>{const R=(0,a.hs)(P,S,U);h(R)}};p(y.getPanelOptionsSupplier(),T,A,x);for(const S of y.fieldConfigRegistry.list()){if(S.isCustom&&S.showIf&&!S.showIf(b.defaults.custom,C?.series)||S.hideFromDefaults)continue;const U=A(S.category),R=S.editor,F=b.defaults,B=S.isCustom?F.custom?(0,t.get)(F.custom,S.path):void 0:(0,t.get)(F,S.path);S.getItemsCount&&(U.props.itemsCount=S.getItemsCount(B)),U.addItem(new f.a({title:S.name,description:S.description,overrides:c(S,b,C?.series),render:function(){const L=N=>{v((0,a.uJ)(b,S.path,N,S.isCustom))};return n.createElement(R,{value:B,onChange:L,item:S,context:x,id:S.id})}}))}return Object.values(M)}function p(g,y,E,h,v){const C=new o.rt;g(C,h);for(const m of C.getItems()){if(m.showIf&&!m.showIf(h.options,h.data))continue;let D=v;if(D?m.category?.[0]?.length&&(D=D.getCategory(m.category[0])):D=E(m.category),(0,o.j)(m)){const b=m.getNestedValueAccess(y),M=b.getContext?b.getContext(h):{...h,options:y.getValue(m.path)};p(m.getBuilder(),b,E,M,D);continue}const P=m.editor;D.addItem(new f.a({title:m.name,description:m.description,render:function(){return n.createElement(P,{value:y.getValue(m.path),onChange:M=>{y.onChange(m.path,M)},item:m,context:h,id:m.id})}}))}}},36281:(Y,O,e)=>{"use strict";e.d(O,{Hl:()=>u,K9:()=>y,OT:()=>h,ZP:()=>C,g_:()=>E,jy:()=>d,my:()=>g,yi:()=>p});var t=e(62992),n=e(52666),o=e(75849),s=e(58379),l=e(96161),f=e(16200);const d="grafana.dashboard.editor.ui",r={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:f.d1.Fill},c=()=>{const m=s.Z.getObject(d,r);let D={...m};return typeof m.topPaneSize=="string"&&(D={...m,topPaneSize:parseFloat(m.topPaneSize)/100}),{getPanel:()=>new l.rY({}),getSourcePanel:()=>new l.rY({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,o.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...r,...D}}},a=(0,t.oM)({name:"panelEditor",initialState:c(),reducers:{updateEditorInitState:(m,D)=>{m.getPanel=()=>D.payload.panel,m.getSourcePanel=()=>D.payload.sourcePanel,m.initDone=!0,m.isOpen=!0,m.shouldDiscardChanges=!1},setEditorPanelData:(m,D)=>{m.getData=()=>D.payload},setDiscardChanges:(m,D)=>{m.shouldDiscardChanges=D.payload},setPanelEditorUIState:(m,D)=>{m.ui={...m.ui,...D.payload},!m.ui.isPanelOptionsVisible&&m.isVizPickerOpen&&(m.isVizPickerOpen=!1)},toggleVizPicker:(m,D)=>{m.isVizPickerOpen=D.payload,m.isVizPickerOpen&&(m.ui.isPanelOptionsVisible=!0)},toggleTableView(m){m.tableViewEnabled=!m.tableViewEnabled},closeEditor:m=>{m.getPanel=()=>new l.rY({}),m.getSourcePanel=()=>new l.rY({}),m.isOpen=!1,m.initDone=!1,m.isVizPickerOpen=!1,m.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:i,setDiscardChanges:p,closeEditor:g,setPanelEditorUIState:y,toggleVizPicker:E,toggleTableView:h}=a.actions,C={panelEditor:a.reducer}},16200:(Y,O,e)=>{"use strict";e.d(O,{Ip:()=>t,Ok:()=>f,d1:()=>n,d7:()=>s});var t=(d=>(d.Query="query",d.Transform="transform",d.Visualize="visualize",d.Alert="alert",d))(t||{}),n=(d=>(d[d.Fill=0]="Fill",d[d.Fit=1]="Fit",d[d.Exact=2]="Exact",d))(n||{}),o=(d=>(d[d.Off=0]="Off",d[d.Table=1]="Table",d))(o||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],l=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var f=(d=>(d[d.Visualizations=0]="Visualizations",d[d.LibraryPanels=1]="LibraryPanels",d[d.Suggestions=2]="Suggestions",d))(f||{})},13505:(Y,O,e)=>{"use strict";e.d(O,{hs:()=>r,jF:()=>l,sY:()=>f,uJ:()=>d});var t=e(82897),n=e.n(t),o=e(84952),s=e(16200);function l(c,a,u,i){if(c===s.d1.Fill)return{width:a,height:u};const p=8*6,g=60,E=(window.innerWidth-g-o.hD*4)/o.cz*i.gridPos.w,h=o.K3*i.gridPos.h+p,v=Math.min(a/E,u/h);return E<=a&&h<=u?{width:E,height:h}:{width:E*v,height:h*v}}function f(c){return c?.meta.skipDataQuery===!1}const d=(c,a,u,i)=>{let p={...c.defaults};const g=u==null||u==="";return i?p.custom?g?p.custom=(0,t.omit)(p.custom,a):p.custom=r(p.custom,a,u):g||(p.custom=r(p.custom,a,u)):g?p=(0,t.omit)(p,a):p=r(p,a,u),{...c,defaults:p}};function r(c,a,u){const i=Array.isArray(a)?a:a.split("."),p=i.shift();if(p.endsWith("]")){const y=p.lastIndexOf("["),E=+p.substring(y+1,p.length-1),h=p.substring(0,y);let v=c[h];const C=Array.isArray(v)?[...v]:[];return i.length&&(v=C[E],(v==null||typeof v!="object")&&(v={}),u=r(v,i,u)),C[E]=u,{...c,[h]:C}}if(!i.length)return{...c,[p]:u};let g=c[p];return(g==null||typeof g!="object")&&(g={}),{...c,[p]:r(g,i,u)}}},50432:(Y,O,e)=>{"use strict";e.d(O,{Go:()=>s,Jc:()=>l});var t=e(9892),n=e(66111),o=e(72648);const s=function(){const r=(0,o.wW)(d),c=f();return c.hide?null:n.createElement("div",{className:r.footer},n.createElement("a",{className:r.link,href:c.link,target:"_blank",rel:"noreferrer noopener"},c.text," ",n.createElement("img",{className:r.logoImg,alt:"",src:c.logo})))};function l(r){f=r}let f=()=>({hide:!1,text:"powered by Grafana",logo:"public/img/grafana_icon.svg",link:"https://grafana.com/"});const d=r=>({footer:t.css`
    display: flex;
    justify-content: end;
    height: 30px;
    padding: ${r.spacing(0,2,0,1)};
  `,link:t.css`
    display: flex;
    gap: 4px;
    justify-content: end;
    align-items: center;
  `,logoImg:t.css`
    height: 100%;
    padding: ${r.spacing(.25,0,.5,0)};
  `})},84135:(Y,O,e)=>{"use strict";e.d(O,{i:()=>d,t:()=>r});var t=e(66111),n=e(68183),o=e(41818),s=e(5191),l=e(31403),f=e(63205);const d=({dashboard:c,onSaveSuccess:a,size:u})=>t.createElement(s.JY,null,({showModal:i,hideModal:p})=>t.createElement(l.zx,{size:u,onClick:()=>{i(f.d,{dashboard:c,onSaveSuccess:a,onDismiss:p})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),r=({dashboard:c,onSaveSuccess:a,variant:u,size:i})=>t.createElement(s.JY,null,({showModal:p,hideModal:g})=>t.createElement(l.zx,{size:i,onClick:()=>{(0,o.ff)("grafana_dashboard_save_as_clicked"),p(f.d,{dashboard:c,onSaveSuccess:a,onDismiss:g,isCopy:!0})},variant:u,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},63205:(Y,O,e)=>{"use strict";e.d(O,{d:()=>Le});var t=e(66111),n=e(59679),o=e(54899),s=e(35645),l=e(67487),f=e(30979),d=e(72142),r=e(79841),c=e(29930),a=e(15092),u=e(9892),i=e(72648),p=e(45253);function g({dashboard:Ye}){const it=(0,i.wW)(y),{loading:ht,value:Re,error:ye}=(0,n.Z)(async()=>{const be=Ye.getSaveModelClone();return c.ae.validateDashboard(be).catch(Qe=>{if(Qe.status>=500)throw Qe;return Qe.data})},[Ye]);let Ce;if(ht)Ce=t.createElement(p.b,{severity:"info",title:"Checking dashboard validity"});else if(Re)Re.isValid||(Ce=t.createElement(p.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:it.error},Re.message)));else{const be=ye?.message??"Unknown error";Ce=t.createElement(p.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:it.error},be))}return Ce?t.createElement("div",{className:it.root},Ce):null}const y=Ye=>({root:(0,u.css)({marginTop:Ye.spacing(1)}),error:(0,u.css)({fontFamily:Ye.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),E=g;var h=e(64687),v=e(61017);const C=({diff:Ye,oldValue:it,newValue:ht})=>{const Re=(0,i.wW)(m),ye=(0,n.Z)(async()=>{const be=JSON.stringify(it??{},null,2),We=JSON.stringify(ht??{},null,2);let Qe;const mt=[];let vt=0;if(Ye)for(const[rt,Ot]of Object.entries(Ye)){const Et=t.createElement(h.B,{diffs:Ot,key:rt,title:rt});rt==="schemaVersion"?Qe=Et:mt.push(Et),vt+=Ot.length}return{schemaChange:Qe,diffs:mt,count:vt,showDiffs:vt<15,jsonView:t.createElement(v.Z,{oldValue:be,newValue:We})}},[Ye,it,ht]),{value:Ce}=ye;return!Ce||!it?t.createElement(l.$,null):Ce.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,Ce.schemaChange&&t.createElement("div",{className:Re.spacer},Ce.schemaChange),Ce.showDiffs&&t.createElement("div",{className:Re.spacer},Ce.diffs),t.createElement("h4",null,"JSON Model"),Ce.jsonView)},m=Ye=>({spacer:u.css`
    margin-bottom: ${Ye.v1.spacing.xl};
  `});var D=e(98102),P=e(35029),b=e(31403),M=e(84135),x=e(13821),A=e(72196),T=e(41818),S=e(37932),U=e(18271),R=e(60499),F=e(77582),B=e(61962),K=e(50946),L=e(27876),N=e(45984);const z=async(Ye,it,ht)=>{let Re=it.folderUid;Re===void 0&&(Re=ht.meta.folderUid??Ye.folderUid);const ye=await(0,K.uC)({...it,folderUid:Re,dashboard:Ye});return await F.Vt.fetchUserPermissions(),ye},G=(Ye,it=!1)=>{const ht=(0,L.useDispatch)(),Re=(0,R.iG)(),[ye,Ce]=(0,x.Z)(async(be,We,Qe)=>{try{const mt=await z(be,We,Qe);Qe.version=mt.version,Qe.clearUnsavedChanges(),U.Z.publish(new N.Jd),Re.success("Dashboard saved"),it?(0,T.ff)("grafana_dashboard_copied",{name:Qe.title,url:mt.url}):(0,T.ff)(`grafana_dashboard_${Qe.id?"saved":"created"}`,{name:Qe.title,url:mt.url});const vt=S.E1.getLocation().pathname,rt=A.u.stripBaseFromUrl(mt.url);return rt!==vt&&setTimeout(()=>S.E1.replace(rt)),Qe.meta.isStarred&&ht((0,B.gd)({id:Qe.uid,title:Qe.title,url:rt})),mt}catch(mt){throw mt instanceof Error&&Re.error(mt.message??"Error saving dashboard"),mt}},[ht,Re]);return{state:ye,onDashboardSave:Ce}},I=({dashboard:Ye,dashboardSaveModel:it,error:ht,onDismiss:Re})=>{const{onDashboardSave:ye}=G(Ye);return(0,t.useEffect)(()=>{ht.data&&H(ht.data.status)&&(ht.isHandled=!0)},[ht]),t.createElement(t.Fragment,null,ht.data&&ht.data.status==="version-mismatch"&&t.createElement(D.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await ye(it,{overwrite:!0},Ye),Re()},onDismiss:Re}),ht.data&&ht.data.status==="name-exists"&&t.createElement(D.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await ye(it,{overwrite:!0},Ye),Re()},onDismiss:Re}),ht.data&&ht.data.status==="plugin-dashboard"&&t.createElement(V,{dashboard:Ye,onDismiss:Re}))},V=({onDismiss:Ye,dashboard:it})=>{const{onDashboardSave:ht}=G(it),Re=(0,i.wW)(Q);return t.createElement(P.u,{className:Re.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:Ye},t.createElement("div",{className:Re.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(P.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:Ye,fill:"outline"},"Cancel"),t.createElement(M.t,{dashboard:it,onSaveSuccess:Ye}),t.createElement(b.zx,{variant:"destructive",onClick:async()=>{await ht(it.getSaveModelClone(),{overwrite:!0},it),Ye()}},"Overwrite")))},H=Ye=>{switch(Ye){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},Q=Ye=>({modal:u.css`
    width: 500px;
  `,modalText:u.css`
    font-size: ${Ye.typography.h4.fontSize};
    color: ${Ye.colors.text.primary};
    margin-bottom: ${Ye.spacing(4)}
    padding-top: ${Ye.spacing(2)};
  `,modalButtonRow:u.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${Ye.spacing(2)};
    }
  `});var oe=e(94270),se=e(24799),ie=e(46967),j=e(63619),de=e(8944),ce=e(52081),ee=e(79658),le=e(85385);const q=Ye=>{const it=Ye.getSaveModelClone();return it.id=null,it.uid="",it.title+=" Copy",it.editable=!0,Ye.id>0&&it.panels.forEach(ht=>{ht.type==="graph"&&ht.alert&&delete ht.thresholds,delete ht.alert}),it},fe=({dashboard:Ye,isNew:it,onSubmit:ht,onCancel:Re,onSuccess:ye})=>{const Ce={title:it?Ye.title:`${Ye.title} Copy`,$folder:{uid:Ye.meta.folderUid,title:Ye.meta.folderTitle},copyTags:!1},be=We=>async Qe=>{if(Qe&&Qe===We().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await le.t.validateNewDashboardName(We().$folder.uid,Qe),!0}catch(mt){return mt instanceof Error?mt.message:"Dashboard name is invalid"}};return t.createElement(oe.l,{defaultValues:Ce,onSubmit:async We=>{if(!ht)return;const Qe=q(Ye);Qe.title=We.title,We.copyTags||(Qe.tags=[]),(await ht(Qe,{folderUid:We.$folder.uid},Ye)).status==="success"&&ye()}},({register:We,control:Qe,errors:mt,getValues:vt})=>t.createElement(t.Fragment,null,t.createElement(se.g,{label:"Dashboard name",invalid:!!mt.title,error:mt.title?.message},t.createElement(ie.I,{...We("title",{validate:be(vt)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(se.g,{label:"Folder"},t.createElement(j.g,{render:({field:{ref:rt,...Ot}})=>t.createElement(ee.Es,{...Ot,dashboardId:Ye.id,initialFolderUid:Ye.meta.folderUid,initialTitle:Ye.meta.folderTitle,enableCreateNew:!0}),control:Qe,name:"$folder"})),!it&&t.createElement(se.g,{label:"Copy tags"},t.createElement(de.r,{...We("copyTags")})),t.createElement(ce.Lh,null,t.createElement(b.zx,{type:"button",variant:"secondary",onClick:Re,fill:"outline"},"Cancel"),t.createElement(b.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var Z=e(68183),ne=e(26418),re=e(58255),ve=e(97379);const me=({dashboard:Ye,saveModel:it,options:ht,onSubmit:Re,onCancel:ye,onSuccess:Ce,onOptionsChange:be})=>{const We=(0,t.useMemo)(()=>Ye.hasTimeChanged(),[Ye]),Qe=(0,t.useMemo)(()=>Ye.hasVariableValuesChanged(),[Ye]),[mt,vt]=(0,t.useState)(!1);return t.createElement(oe.l,{onSubmit:async rt=>{if(!Re)return;vt(!0),ht={...ht,message:rt.message},(await Re(it.clone,ht,Ye)).status==="success"?(ht.saveVariables&&Ye.resetOriginalVariables(),ht.saveTimerange&&Ye.resetOriginalTime(),Ce()):vt(!1)}},({register:rt,errors:Ot})=>{const Et=rt("message");return t.createElement(ne.Stack,{direction:"column",gap:2},We&&t.createElement(re.X,{checked:!!ht.saveTimerange,onChange:()=>be({...ht,saveTimerange:!ht.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Z.wl.pages.SaveDashboardModal.saveTimerange}),Qe&&t.createElement(re.X,{checked:!!ht.saveVariables,onChange:()=>be({...ht,saveVariables:!ht.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Z.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(ve.K,{...Et,"aria-label":"message",value:ht.message,onChange:Mt=>{be({...ht,message:Mt.currentTarget.value}),Et.onChange(Mt)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(ne.Stack,{alignItems:"center"},t.createElement(b.zx,{variant:"secondary",onClick:ye,fill:"outline"},"Cancel"),t.createElement(b.zx,{type:"submit",disabled:!it.hasChanges,icon:mt?"fa fa-spinner":void 0,"aria-label":Z.wl.pages.SaveDashboardModal.save},"Save"),!it.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Ie=e(3574),Ge=e(94599);const gt=({dashboard:Ye,onCancel:it})=>{const[ht,Re]=(0,t.useState)(()=>{const Ce=Ye.getSaveModelClone();return delete Ce.id,JSON.stringify(Ce,null,2)}),ye=(0,t.useCallback)(()=>{const Ce=new Blob([ht],{type:"application/json;charset=utf-8"});(0,Ie.saveAs)(Ce,Ye.title+"-"+new Date().getTime()+".json")},[Ye.title,ht]);return t.createElement(t.Fragment,null,t.createElement(ne.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",Ye.meta.provisionedExternalId),t.createElement(ve.K,{spellCheck:!1,value:ht,onChange:Ce=>{Re(Ce.currentTarget.value)},className:Te.json}),t.createElement(ce.Lh,null,t.createElement(b.zx,{variant:"secondary",onClick:it,fill:"outline"},"Cancel"),t.createElement(Ge.m,{icon:"copy",getText:()=>ht},"Copy JSON to clipboard"),t.createElement(b.zx,{type:"submit",onClick:ye},"Save JSON to file"))))},Te={json:u.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Le=({dashboard:Ye,onDismiss:it,onSaveSuccess:ht,isCopy:Re})=>{const[ye,Ce]=(0,t.useState)({}),be=Ye.meta.provisioned,We=Ye.version===0,Qe=(0,n.Z)(async()=>We?void 0:(await c.ae.getDashboardByUid(Ye.uid)).dashboard,[Ye,We]),mt=(0,t.useMemo)(()=>{const Ne=Ye.getSaveModelClone({saveTimerange:Boolean(ye.saveTimerange),saveVariables:Boolean(ye.saveVariables)});if(!Qe.value)return{clone:Ne,diff:{},diffCount:0,hasChanges:!1};const tt=JSON.stringify(Ne,null,2),et=JSON.parse(tt),Ue=(0,a.Q$)(Qe.value,et);let Fe=0;for(const Ee of Object.values(Ue))Fe+=Ee.length;return{clone:Ne,diff:Ue,diffCount:Fe,hasChanges:Fe>0&&!We}},[Ye,Qe.value,ye,We]),[vt,rt]=(0,t.useState)(!1),{state:Ot,onDashboardSave:Et}=G(Ye,Re),Mt=ht?()=>{it(),ht()}:it,ue=()=>vt?t.createElement(C,{diff:mt.diff,oldValue:Qe.value,newValue:mt.clone}):Ot.loading?t.createElement("div",null,t.createElement(l.$,null)):We||Re?t.createElement(fe,{dashboard:Ye,onCancel:it,onSuccess:Mt,onSubmit:Et,isNew:We}):be?t.createElement(gt,{dashboard:Ye,onCancel:it,onSuccess:Mt}):t.createElement(me,{dashboard:Ye,saveModel:mt,onCancel:it,onSuccess:Mt,onSubmit:Et,options:ye,onOptionsChange:Ce});if(Ot.error&&(0,o.kW)(Ot.error)&&!Ot.error.isHandled)return t.createElement(I,{error:Ot.error,dashboard:Ye,dashboardSaveModel:mt.clone,onDismiss:it});let De="Save dashboard";return Re?De="Save dashboard copy":be&&(De="Provisioned dashboard"),t.createElement(f.d,{title:De,onClose:it,subtitle:Ye.title,tabs:t.createElement(d.J,null,t.createElement(r.O,{label:"Details",active:!vt,onChangeTab:()=>rt(!1)}),mt.hasChanges&&t.createElement(r.O,{label:"Changes",active:vt,onChangeTab:()=>rt(!0),counter:mt.diffCount})),scrollableContent:!0},ue(),s.v.featureToggles.showDashboardValidationWarnings&&t.createElement(E,{dashboard:Ye}))}},80882:(Y,O,e)=>{"use strict";e.d(O,{Jd:()=>o,_H:()=>s,Ez:()=>r,_M:()=>d,ek:()=>f,Gt:()=>l,C2:()=>c});var t=e(47694);const n=new Set(["__expr__","aquaqanalytics-kdbbackend-datasource","cloudwatch","datasource","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]);var o=(a=>(a.PUBLIC="public",a.EMAIL="email",a))(o||{});const s=a=>a.length>0,l=a=>a?.uid!==""&&a?.uid!==void 0,f=a=>{let u=new Set;for(const i of a)for(const p of i.targets){let g=p?.datasource?.type;g&&!n.has(g)&&u.add(g)}return Array.from(u).sort()},d=a=>`${(0,t.iE)().appUrl}public-dashboards/${a}`,r=a=>`/d/${a}?shareView=public-dashboard`,c=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i},53818:(Y,O,e)=>{"use strict";e.d(O,{ShareModal:()=>Ht,addDashboardShareTab:()=>jn});var t=e(66111),n=e(41818),o=e(88683),s=e(35029),l=e(94893),f=e(47694),d=e(77582),r=e(35287),c=e(9892),a=e(72648),u=e(67487),i=e(10655),p=e(80882),g=e(21048),y=e(9085),E=e.n(y),h=e(66698),v=e(68183),C=e(35645),m=e(66121),D=e(5191),P=e(52081),b=e(24799),M=e(46967),x=e(94599),A=e(8944),T=e(64353),S=e(82002),U=e(27876),R=e(80600),F=e(84532),B=e(830);const K=()=>{const{width:$t}=(0,B.Z)();return $t>1024};var L=e(45253);const N=v.wl.pages.ShareDashboardModal.PublicDashboard,z=({mode:$t})=>t.createElement(L.b,{severity:"info",title:`You don\u2019t have permission to ${$t} a public dashboard`,"data-testid":N.NoUpsertPermissionsWarningAlert},"Contact your admin to get permission to ",$t," create public dashboards"),G=()=>t.createElement(L.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}),I=v.wl.pages.ShareDashboardModal.PublicDashboard,V=({unsupportedDataSources:$t})=>{const zt=(0,a.wW)(H);return t.createElement(L.b,{severity:"warning",title:"Unsupported data sources","data-testid":I.UnsupportedDataSourcesWarningAlert},t.createElement("p",{className:zt.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",$t,"."),t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:E()("text-link",zt.unsupportedDataSourceDescription)},"Read more about supported data sources"))},H=$t=>({unsupportedDataSourceDescription:c.css`
    color: ${$t.colors.text.secondary};
    margin-bottom: ${$t.spacing(1)};
  `}),Q=v.wl.pages.ShareDashboardModal.PublicDashboard,oe=()=>t.createElement(L.b,{severity:"warning",title:"Template variables are not supported","data-testid":Q.TemplateVariablesWarningAlert},"This public dashboard may not work since it uses template variables");var se=e(13393),ie=e(95794),j=e(74124);const de=v.wl.pages.ShareDashboardModal.PublicDashboard,ce=({disabled:$t,onChange:zt,register:Wt})=>{const jt=(0,a.wW)(ee),pn=(0,U.useSelector)(Mn=>Mn.dashboard).getModel(),Pn=(0,j.O)(pn.getDefaultTime(),pn);return t.createElement(t.Fragment,null,t.createElement(se.C,{disabled:$t,className:jt.dashboardConfig},t.createElement(P.wc,{spacing:"md"},t.createElement(P.Ar,{orientation:1,spacing:"xs",justify:"space-between"},t.createElement(T._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),t.createElement(ie.K,{value:Pn,disabled:!0,onChange:()=>{}})),t.createElement(P.Ar,{orientation:0,spacing:"sm"},t.createElement(A.r,{...Wt("isTimeSelectionEnabled"),"data-testid":de.EnableTimeRangeSwitch,onChange:Mn=>{(0,n.ff)("grafana_dashboards_public_time_selection_clicked",{action:Mn.currentTarget.checked?"enable":"disable"}),zt("isTimeSelectionEnabled",Mn.currentTarget.checked)}}),t.createElement(T._,{description:"Allow viewers to change time range"},"Time range picker enabled")),t.createElement(P.Ar,{orientation:0,spacing:"sm"},t.createElement(A.r,{...Wt("isAnnotationsEnabled"),onChange:Mn=>{(0,n.ff)("grafana_dashboards_public_annotations_clicked",{action:Mn.currentTarget.checked?"enable":"disable"}),zt("isAnnotationsEnabled",Mn.currentTarget.checked)},"data-testid":de.EnableAnnotationsSwitch}),t.createElement(T._,{description:"Show annotations on public dashboard"},"Show annotations")))))},ee=$t=>({dashboardConfig:c.css`
    margin: ${$t.spacing(0,0,3,0)};
  `});var le=e(26202),q=e(31403),fe=e(63619),Z=e(2594);const ne=[{label:"Anyone with a link",value:p.Jd.PUBLIC},{label:"Only specified people",value:p.Jd.EMAIL}],re=v.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,ve=({recipients:$t,dashboardUid:zt,publicDashboardUid:Wt})=>{const jt=(0,a.wW)(Ie),[sn,{isLoading:pn}]=(0,i.r5)(),[Pn,{isLoading:Mn}]=(0,i.RS)(),Cn=pn||Mn,Hn=oa=>{(0,n.ff)("grafana_dashboards_public_delete_sharing_email_clicked"),sn({recipientUid:oa,dashboardUid:zt,uid:Wt})},_n=oa=>{(0,n.ff)("grafana_dashboards_public_reshare_email_clicked"),Pn({recipientUid:oa,uid:Wt})};return t.createElement("table",{className:jt.table,"data-testid":re.EmailSharingList},t.createElement("tbody",null,$t.map((oa,Gt)=>t.createElement("tr",{key:oa.uid},t.createElement("td",null,oa.recipient),t.createElement("td",null,t.createElement(le.h,{className:jt.tableButtonsContainer},t.createElement(q.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:Cn,onClick:()=>Hn(oa.uid),"data-testid":`${re.DeleteEmail}-${Gt}`},"Revoke"),t.createElement(q.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:Cn,onClick:()=>_n(oa.uid),"data-testid":`${re.ReshareLink}-${Gt}`},"Resend")))))))},me=()=>{const{width:$t}=(0,B.Z)(),zt=(0,a.wW)(Ie),jt=(0,U.useSelector)(Ln=>Ln.dashboard).getModel(),{data:sn}=(0,i.Ym)(jt.uid),[pn]=(0,i.Mi)(),[Pn,{isLoading:Mn}]=(0,i.FJ)(),{register:Cn,setValue:Hn,control:_n,watch:oa,handleSubmit:Gt,formState:{errors:Bt},reset:on}=(0,h.cI)({defaultValues:{shareType:sn?.share||p.Jd.PUBLIC,email:""},mode:"onSubmit"}),rn=Ln=>{const Un={dashboard:jt,payload:{...sn,share:Ln}};pn(Un)},In=async Ln=>{(0,n.ff)("grafana_dashboards_public_add_share_email_clicked"),await Pn({recipient:Ln.email,uid:sn.uid,dashboardUid:jt.uid}).unwrap(),on({email:"",shareType:p.Jd.EMAIL})};return t.createElement("form",{"data-testid":re.Container,className:zt.container,onSubmit:Gt(In)},t.createElement(b.g,{label:"Can view dashboard"},t.createElement(fe.g,{name:"shareType",control:_n,render:({field:Ln})=>{const{ref:Un,...qn}=Ln;return t.createElement(Z.S,{...qn,size:$t<480?"sm":"md",options:ne,onChange:da=>{(0,n.ff)("grafana_dashboards_public_share_type_clicked",{type:da}),Hn("shareType",da),rn(da)}})}})),oa("shareType")===p.Jd.EMAIL&&t.createElement(t.Fragment,null,t.createElement(b.g,{label:"Invite",description:"Invite people by email",error:Bt.email?.message,invalid:!!Bt.email?.message||void 0},t.createElement("div",{className:zt.emailContainer},t.createElement(M.I,{className:zt.emailInput,placeholder:"email",autoCapitalize:"none",...Cn("email",{required:"Email is required",pattern:{value:p.C2,message:"Invalid email"}}),"data-testid":re.EmailSharingInput}),t.createElement(q.zx,{type:"submit",variant:"primary",disabled:Mn,"data-testid":re.EmailSharingInviteButton},"Invite ",Mn&&t.createElement(u.$,null)))),!!sn?.recipients?.length&&t.createElement(ve,{recipients:sn.recipients,dashboardUid:jt.uid,publicDashboardUid:sn.uid})))},Ie=$t=>({container:c.css`
    margin-bottom: ${$t.spacing(2)};
  `,emailContainer:c.css`
    display: flex;
    gap: ${$t.spacing(1)};
  `,emailInput:c.css`
    flex-grow: 1;
  `,table:c.css`
    display: flex;
    max-height: 220px;
    overflow-y: scroll;
    margin-bottom: ${$t.spacing(1)};

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${$t.spacing(.5,1)};

      :nth-child(odd) {
        background: ${$t.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:c.css`
    display: flex;
    justify-content: end;
  `}),Ge=v.wl.pages.ShareDashboardModal.PublicDashboard,gt=()=>{const $t=(0,a.wW)(Te),{showModal:zt,hideModal:Wt}=(0,t.useContext)(D.kr),jt=K(),sn=S.Vt.hasAccess(U.AccessControlAction.DashboardsPublicWrite,(0,F.RN)()),pn=!!C.v.featureToggles.publicDashboardsEmailSharing&&(0,m.v)("publicDashboardsEmailSharing"),Mn=(0,U.useSelector)(ha=>ha.dashboard).getModel(),Cn=Mn.getVariables(),Hn=(0,p.ek)(Mn.panels),{data:_n,isFetching:oa}=(0,i.Ym)(Mn.uid),[Gt,{isLoading:Bt}]=(0,i.Mi)(),on=!sn||Bt||oa,{handleSubmit:rn,setValue:In,register:Ln}=(0,h.cI)({defaultValues:{isAnnotationsEnabled:_n?.annotationsEnabled,isTimeSelectionEnabled:_n?.timeSelectionEnabled,isPaused:!_n?.isEnabled}}),Un=async ha=>{const{isAnnotationsEnabled:Ta,isTimeSelectionEnabled:Wa,isPaused:cs}=ha,is={dashboard:Mn,payload:{..._n,annotationsEnabled:Ta,timeSelectionEnabled:Wa,isEnabled:!cs}};Gt(is)},qn=async(ha,Ta)=>{In(ha,Ta),await rn(Wa=>Un(Wa))()},da=()=>{zt(Ht,{dashboard:Mn,onDismiss:Wt,activeTab:"public-dashboard"})};return t.createElement("div",null,sn&&Mn.hasUnsavedChanges()&&t.createElement(G,null),!sn&&t.createElement(z,{mode:"edit"}),(0,p._H)(Cn)&&t.createElement(oe,null),!!Hn.length&&t.createElement(V,{unsupportedDataSources:Hn.join(", ")}),t.createElement("div",{className:$t.titleContainer},t.createElement(P.Lh,{spacing:"sm",align:"center"},t.createElement("h4",{className:$t.title},"Settings"),(Bt||oa)&&t.createElement(u.$,{size:14}))),t.createElement(ce,{disabled:on,onChange:qn,register:Ln}),t.createElement("hr",null),pn&&t.createElement(me,null),t.createElement(b.g,{label:"Dashboard URL",className:$t.publicUrl},t.createElement(M.I,{value:(0,p._M)(_n.accessToken),readOnly:!0,disabled:!_n?.isEnabled,"data-testid":Ge.CopyUrlInput,addonAfter:t.createElement(x.m,{"data-testid":Ge.CopyUrlButton,variant:"primary",disabled:!_n?.isEnabled,getText:()=>(0,p._M)(_n.accessToken)},"Copy")})),t.createElement(P.Ar,{orientation:jt?0:1,justify:jt?"flex-end":"flex-start",align:jt?"center":"normal"},t.createElement(P.Lh,{spacing:"sm"},t.createElement(A.r,{...Ln("isPaused"),disabled:on,onChange:ha=>{(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:ha.currentTarget.checked?"disable":"enable"}),qn("isPaused",ha.currentTarget.checked)},"data-testid":Ge.PauseSwitch}),t.createElement(T._,{className:c.css`
              margin-bottom: 0;
            `},"Pause sharing dashboard")),t.createElement(P.Lh,{justify:"flex-end"},t.createElement(R.H,{className:E()($t.deleteButton,{[$t.deleteButtonMobile]:!jt}),type:"button",disabled:on,"data-testid":Ge.DeleteButton,onDismiss:da,variant:"destructive",fill:"outline",dashboard:Mn,publicDashboard:{uid:_n.uid,dashboardUid:Mn.uid,title:Mn.title}},"Revoke public URL"))))},Te=$t=>({titleContainer:c.css`
    margin-bottom: ${$t.spacing(2)};
  `,title:c.css`
    margin: 0;
  `,publicUrl:c.css`
    width: 100%;
    padding-top: ${$t.spacing(1)};
    margin-bottom: ${$t.spacing(3)};
  `,deleteButton:c.css`
    margin-left: ${$t.spacing(3)};
  `,deleteButtonMobile:c.css`
    margin-top: ${$t.spacing(2)};
  `}),Le=gt;var Ye=e(94270),it=e(58255);const ht=v.wl.pages.ShareDashboardModal.PublicDashboard,Re=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:ht.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:ht.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:ht.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],ye=({disabled:$t,register:zt})=>{const Wt=(0,a.wW)(Ce);return t.createElement(t.Fragment,null,t.createElement("p",{className:Wt.title},"Before you make the dashboard public, acknowledge the following:"),t.createElement(se.C,{disabled:$t},t.createElement(P.wc,{spacing:"md"},Re.map(jt=>t.createElement(P.Lh,{key:jt.type,spacing:"none",align:"center"},t.createElement(it.X,{...zt(jt.type,{required:!0}),label:jt.description,"data-testid":jt.testId}),t.createElement(q.Qj,{variant:"primary",href:jt.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:jt.info.tooltip}))))))},Ce=$t=>({title:c.css`
    font-weight: ${$t.typography.fontWeightBold};
  `}),be=()=>{const $t=(0,a.wW)(We);return t.createElement("div",{className:$t.container},t.createElement("p",{className:$t.description},"Currently, we don\u2019t support template variables or frontend data sources"),t.createElement("p",{className:$t.description},"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:E()("text-link",$t.description)},"GitHub discussion"),"."))},We=$t=>({container:c.css`
    margin-bottom: ${$t.spacing(3)};
  `,description:c.css`
    color: ${$t.colors.text.secondary};
    margin-bottom: ${$t.spacing(1)};
  `}),Qe=v.wl.pages.ShareDashboardModal.PublicDashboard,mt=({isError:$t})=>{const zt=(0,a.wW)(vt),Wt=S.Vt.hasAccess(U.AccessControlAction.DashboardsPublicWrite,(0,F.RN)()),sn=(0,U.useSelector)(_n=>_n.dashboard).getModel(),pn=(0,p.ek)(sn.panels),[Pn,{isLoading:Mn}]=(0,i.zZ)(),Cn=!Wt||Mn||$t,Hn=async()=>{(0,n.ff)("grafana_dashboards_public_create_clicked"),Pn({dashboard:sn,payload:{isEnabled:!0}})};return t.createElement("div",null,t.createElement("p",{className:zt.title},"Welcome to public dashboards public preview!"),t.createElement(be,null),!Wt&&t.createElement(z,{mode:"create"}),(0,p._H)(sn.getVariables())&&t.createElement(oe,null),!!pn.length&&t.createElement(V,{unsupportedDataSources:pn.join(", ")}),t.createElement(Ye.l,{onSubmit:Hn,validateOn:"onChange",maxWidth:"none"},({register:_n,formState:{isValid:oa}})=>t.createElement(t.Fragment,null,t.createElement("div",{className:zt.checkboxes},t.createElement(ye,{disabled:Cn,register:_n})),t.createElement("div",{className:zt.buttonContainer},t.createElement(q.zx,{type:"submit",disabled:Cn||!oa,"data-testid":Qe.CreateButton},"Generate public URL ",Mn&&t.createElement(u.$,{className:zt.loadingSpinner}))))))},vt=$t=>({title:c.css`
    font-size: ${$t.typography.h4.fontSize};
    margin: ${$t.spacing(0,0,2)};
  `,checkboxes:c.css`
    margin: ${$t.spacing(0,0,4)};
  `,buttonContainer:c.css`
    display: flex;
    justify-content: end;
  `,loadingSpinner:c.css`
    margin-left: ${$t.spacing(1)};
  `}),rt=mt,Ot=()=>{const $t=(0,a.wW)(Mt);return t.createElement(g.L,{className:$t.loadingContainer},t.createElement(t.Fragment,null,"Loading configuration",t.createElement(u.$,{size:20,className:$t.spinner})))},Et=$t=>{const{data:zt,isLoading:Wt,isError:jt}=(0,i.Ym)($t.dashboard.uid);return(0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_public_share_viewed")},[]),t.createElement(t.Fragment,null,Wt?t.createElement(Ot,null):(0,p.Gt)(zt)?t.createElement(Le,null):t.createElement(rt,{isError:jt}))},Mt=$t=>({loadingContainer:c.css`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${$t.spacing(1)};
  `,spinner:c.css`
    margin-bottom: ${$t.spacing(0)};
  `});var ue=e(6297),De=e(97379);const Ne=({selectedTheme:$t="current",onChange:zt})=>{const Wt=[{label:(0,r.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,r.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,r.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(b.g,{label:(0,r.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(Z.S,{options:Wt,value:$t,onChange:zt}))};var tt=e(89346);class et extends t.PureComponent{constructor(zt){super(zt),this.buildIframeHtml=()=>{const{panel:Wt,dashboard:jt}=this.props,{useCurrentTimeRange:sn,selectedTheme:pn}=this.state,Pn=(0,tt.S_)(sn,jt.uid,pn,Wt);this.setState({iframeHtml:Pn})},this.onIframeHtmlChange=Wt=>{this.setState({iframeHtml:Wt.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Wt=>{this.setState({selectedTheme:Wt},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:zt,selectedTheme:Wt,iframeHtml:jt}=this.state,pn=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,r.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(b.g,{label:(0,r.t)("share-modal.embed.time-range","Current time range"),description:pn},t.createElement(A.r,{id:"share-current-time-range",value:zt,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Ne,{selectedTheme:Wt,onChange:this.onThemeChange}),t.createElement(b.g,{label:(0,r.t)("share-modal.embed.html","Embed HTML"),description:(0,r.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(De.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:jt,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(x.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(r.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var Ue=e(3574),Fe=e(29930),Ee=e(134),Me=e(45984),He=e(89050),Ze=e(9405);function lt({json:$t,onDismiss:zt}){const Wt=(0,t.useCallback)(()=>$t,[$t]);return t.createElement(s.u,{title:"JSON",onDismiss:zt,onClickBackdrop:zt,isOpen:!0},t.createElement(He.Z,{disableHeight:!0},({width:jt})=>t.createElement(Ze.p,{value:$t,language:"json",showMiniMap:!1,height:"500px",width:jt})),t.createElement(s.u.ButtonRow,null,t.createElement(x.m,{icon:"copy",getText:Wt},t.createElement(r.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class bt extends t.PureComponent{constructor(zt){super(zt),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Wt}=this.props,{shareExternally:jt}=this.state,{trimDefaults:sn}=this.state;jt?this.exporter.makeExportable(Wt).then(pn=>{sn?(0,Fe.i)().post("/api/dashboards/trim",{dashboard:pn}).then(Pn=>{this.openSaveAsDialog(Pn.dashboard)}):this.openSaveAsDialog(pn)}):sn?(0,Fe.i)().post("/api/dashboards/trim",{dashboard:Wt.getSaveModelClone()}).then(pn=>{this.openSaveAsDialog(pn.dashboard)}):this.openSaveAsDialog(Wt.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Wt}=this.props,{shareExternally:jt}=this.state,{trimDefaults:sn}=this.state;jt?this.exporter.makeExportable(Wt).then(pn=>{sn?(0,Fe.i)().post("/api/dashboards/trim",{dashboard:pn}).then(Pn=>{this.openJsonModal(Pn.dashboard)}):this.openJsonModal(pn)}):sn?(0,Fe.i)().post("/api/dashboards/trim",{dashboard:Wt.getSaveModelClone()}).then(pn=>{this.openJsonModal(pn.dashboard)}):this.openJsonModal(Wt.getSaveModelClone())},this.openSaveAsDialog=Wt=>{const jt=JSON.stringify(Wt,null,2),sn=new Blob([jt],{type:"application/json;charset=utf-8"}),pn=new Date().getTime();(0,Ue.saveAs)(sn,`${Wt.title}-${pn}.json`)},this.openJsonModal=Wt=>{d.h$.publish(new Me.Dn({props:{json:JSON.stringify(Wt,null,2)},component:lt})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new Ee.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:zt}=this.props,{shareExternally:Wt}=this.state,{trimDefaults:jt}=this.state,sn=(0,r.t)("share-modal.export.share-externally-label","Export for sharing externally"),pn=(0,r.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(b.g,{label:sn},t.createElement(A.r,{id:"share-externally-toggle",value:Wt,onChange:this.onShareExternallyChange})),C.v.featureToggles.trimDefaults&&t.createElement(b.g,{label:pn},t.createElement(A.r,{id:"trim-defaults-toggle",value:jt,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(q.zx,{variant:"secondary",onClick:zt,fill:"outline"},t.createElement(r.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(q.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(r.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(q.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(r.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var Pt=e(76647);const Je=({panel:$t,initialFolderUid:zt,onDismiss:Wt})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),$t?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(Pt.T,{panel:$t,initialFolderUid:zt,onDismiss:Wt})):null);var Dt=e(39904);class Ve extends t.PureComponent{constructor(zt){super(zt),this.buildUrl=async()=>{const{panel:Wt,dashboard:jt}=this.props,{useCurrentTimeRange:sn,useShortUrl:pn,selectedTheme:Pn}=this.state,Mn=await(0,tt.bl)(sn,Pn,Wt,pn),Cn=(0,tt.Sc)(sn,jt.uid,Pn,Wt);this.setState({shareUrl:Mn,imageUrl:Cn})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Wt=>{this.setState({selectedTheme:Wt})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(zt,Wt){const{useCurrentTimeRange:jt,useShortUrl:sn,selectedTheme:pn}=this.state;(Wt.useCurrentTimeRange!==jt||Wt.selectedTheme!==pn||Wt.useShortUrl!==sn)&&this.buildUrl()}render(){const{panel:zt,dashboard:Wt}=this.props,jt=Wt?Wt.time.to==="now":!1,{useCurrentTimeRange:sn,useShortUrl:pn,selectedTheme:Pn,shareUrl:Mn,imageUrl:Cn}=this.state,Hn=v.wl.pages.SharePanelModal,_n=Boolean(Wt.id),oa=(0,r.t)("share-modal.link.time-range-label","Lock time range"),Gt=(0,r.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Bt=(0,r.t)("share-modal.link.shorten-url","Shorten URL"),on=(0,r.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(se.C,null,t.createElement(b.g,{label:oa,description:jt?Gt:""},t.createElement(A.r,{id:"share-current-time-range",value:sn,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Ne,{selectedTheme:Pn,onChange:this.onThemeChange}),t.createElement(b.g,{label:Bt},t.createElement(A.r,{id:"share-shorten-url",value:pn,onChange:this.onUrlShorten})),t.createElement(b.g,{label:on},t.createElement(M.I,{id:"link-url-input",value:Mn,readOnly:!0,addonAfter:t.createElement(x.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(r.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),zt&&f.ZP.rendererAvailable&&t.createElement(t.Fragment,null,_n&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Cn,target:"_blank",rel:"noreferrer","aria-label":Hn.linkToRenderedImage},t.createElement(Dt.J,{name:"camera"}),"\xA0",t.createElement(r.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!_n&&t.createElement(L.b,{severity:"info",title:(0,r.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(r.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),zt&&!f.ZP.rendererAvailable&&t.createElement(L.b,{severity:"info",title:(0,r.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(r.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var Xe=e(54899),st=e(8581),ut=e(19349),xt=e(10672);const Kt="/api/snapshots";class Jt extends t.PureComponent{constructor(zt){super(zt),this.createSnapshot=Wt=>()=>{const{timeoutSeconds:jt}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Wt)},jt*1e3)},this.saveSnapshot=async(Wt,jt)=>{const{snapshotExpires:sn}=this.state,pn=this.dashboard.getSaveModelClone();this.scrubDashboard(pn);const Pn={dashboard:pn,name:pn.title,expires:sn,external:jt};try{const Mn=await(0,Xe.i)().post(Kt,Pn);this.setState({deleteUrl:Mn.deleteUrl,snapshotUrl:Mn.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:jt?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=Wt=>{const{panel:jt}=this.props,{snapshotName:sn}=this.state;Wt.title=sn,Wt.time=(0,ut.$t)().timeRange(),Wt.links=[],Wt.panels.forEach(Pn=>{Pn.targets=[],Pn.links=[],Pn.datasource=null});const pn=Wt.annotations.list.filter(Pn=>Pn.enable);if(Wt.annotations.list=pn.map(Pn=>({name:Pn.name,enable:Pn.enable,iconColor:Pn.iconColor,snapshotData:Pn.snapshotData,type:Pn.type,builtIn:Pn.builtIn,hide:Pn.hide})),Wt.getVariables().forEach(Pn=>{Pn.query="",Pn.options=Pn.current?[Pn.current]:[],Pn.refresh=xt.Bd.never}),jt){const Pn=jt.getSaveModel();Pn.gridPos.w=24,Pn.gridPos.x=0,Pn.gridPos.y=0,Pn.gridPos.h=20,Wt.panels=[Pn]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Pn=>{delete Pn.snapshotData}),this.dashboard.annotations.list.forEach(Pn=>{delete Pn.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Wt}=this.state;await(0,Xe.i)().get(Wt),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Wt=>{this.setState({snapshotName:Wt.target.value})},this.onTimeoutChange=Wt=>{this.setState({timeoutSeconds:Number(Wt.target.value)})},this.onExpireChange=Wt=>{this.setState({selectedExpireOption:Wt,snapshotExpires:Wt.value})},this.dashboard=zt.dashboard,this.expireOptions=[{label:(0,r.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,r.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,r.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,r.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:zt.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const zt=await(0,Xe.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:zt.externalSnapshotName,externalEnabled:zt.externalEnabled})}renderStep1(){const{onDismiss:zt}=this.props,{snapshotName:Wt,selectedExpireOption:jt,timeoutSeconds:sn,isLoading:pn,sharingButtonText:Pn,externalEnabled:Mn}=this.state,Cn=(0,r.t)("share-modal.snapshot.name","Snapshot name"),Hn=(0,r.t)("share-modal.snapshot.expire","Expire"),_n=(0,r.t)("share-modal.snapshot.timeout","Timeout (seconds)"),oa=(0,r.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(b.g,{label:Cn},t.createElement(M.I,{id:"snapshot-name-input",width:30,value:Wt,onChange:this.onSnapshotNameChange})),t.createElement(b.g,{label:Hn},t.createElement(st.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:jt,onChange:this.onExpireChange})),t.createElement(b.g,{label:_n,description:oa},t.createElement(M.I,{id:"timeout-input",type:"number",width:21,value:sn,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(q.zx,{variant:"secondary",onClick:zt,fill:"outline"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Mn&&t.createElement(q.zx,{variant:"secondary",disabled:pn,onClick:this.createSnapshot(!0)},Pn),t.createElement(q.zx,{variant:"primary",disabled:pn,onClick:this.createSnapshot()},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:zt}=this.state;return t.createElement(t.Fragment,null,t.createElement(b.g,{label:(0,r.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(M.I,{id:"snapshot-url-input",value:zt,readOnly:!0,addonAfter:t.createElement(x.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(q.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:zt,step:Wt}=this.state;return t.createElement(t.Fragment,null,Wt===1&&this.renderStep1(),Wt===2&&this.renderStep2(),Wt===3&&this.renderStep3(),zt&&t.createElement(u.$,{inline:!0}))}}const On=[],Nn=[];function jn($t){On.push($t)}function ya($t){Nn.push($t)}function Lt($t,zt){const jt=[{label:(0,r.t)("share-modal.tab-title.link","Link"),value:"link",component:Ve}];if(d.Vt.isSignedIn&&f.vc.snapshotEnabled){const pn=(0,r.t)("share-modal.tab-title.snapshot","Snapshot");jt.push({label:pn,value:"snapshot",component:Jt})}if($t){const pn=(0,r.t)("share-modal.tab-title.embed","Embed");if(jt.push({label:pn,value:"embed",component:et}),!(0,ue.V)($t)){const Pn=(0,r.t)("share-modal.tab-title.library-panel","Library panel");jt.push({label:Pn,value:"library_panel",component:Je})}jt.push(...Nn)}else{const pn=(0,r.t)("share-modal.tab-title.export","Export");jt.push({label:pn,value:"export",component:bt}),jt.push(...On)}Boolean(f.vc.featureToggles.publicDashboards)&&jt.push({label:"Public dashboard",value:"public-dashboard",component:Et});const sn=jt.find(pn=>pn.value===zt);return{tabs:jt,activeTab:sn?.value??jt[0].value}}function ft($t){const{tabs:zt,activeTab:Wt}=Lt($t.panel,$t.activeTab);return{tabs:zt,activeTab:Wt}}class Ht extends t.Component{constructor(zt){super(zt),this.onSelectTab=Wt=>{this.setState(jt=>({...jt,activeTab:Wt.value}))},this.state=ft(zt)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:zt,activeTab:Wt}=this.state;return zt.find(jt=>jt.value===Wt)}renderTitle(){const{panel:zt}=this.props,{activeTab:Wt}=this.state,jt=zt?(0,r.t)("share-modal.panel.title","Share Panel"):(0,r.t)("share-modal.dashboard.title","Share"),sn=Lt(this.props.panel,this.state.activeTab).tabs;return t.createElement(o.H,{title:jt,icon:"share-alt",tabs:sn,activeTab:Wt,onChangeTab:this.onSelectTab})}render(){const{dashboard:zt,panel:Wt}=this.props,sn=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(l.I,null,t.createElement(sn,{dashboard:zt,panel:Wt,onDismiss:this.props.onDismiss})))}}},89346:(Y,O,e)=>{"use strict";e.d(O,{OS:()=>r,S_:()=>i,Sc:()=>u,bl:()=>c});var t=e(49187),n=e(72196),o=e(67483),s=e(35645),l=e(57465),f=e(19349);function d({useCurrentTimeRange:g,selectedTheme:y,panel:E,search:h=window.location.search,range:v=(0,f.$t)().timeRange(),orgId:C=s.v.bootData.user.orgId}){const m=new URLSearchParams(h);return m.set("from",String(v.from.valueOf())),m.set("to",String(v.to.valueOf())),m.set("orgId",String(C)),g||(m.delete("from"),m.delete("to")),y!=="current"&&m.set("theme",y),E&&!m.has("editPanel")&&m.set("viewPanel",String(E.id)),m}function r(){let g=window.location.href;const y=g.indexOf("?");return y!==-1&&(g=g.substring(0,y)),g}async function c(g,y,E,h){const v=r(),C=d({useCurrentTimeRange:g,selectedTheme:y,panel:E}),m=t.Cj.appendQueryToUrl(v,C.toString());return h?await(0,l.D)(m):m}function a(g,y,E,h){const v=r(),C=d({useCurrentTimeRange:g,selectedTheme:E,panel:h});let m=v.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");m=m.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(v)==="/"&&(m=`${s.v.appUrl}d-solo/${y}`);const P=C.get("editPanel")??C.get("viewPanel")??"";return C.set("panelId",P),C.delete("editPanel"),C.delete("viewPanel"),t.Cj.appendQueryToUrl(m,C.toString())}function u(g,y,E,h){let C=a(g,y,E,h).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return C=C.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),C+="&width=1000&height=500"+p(),C}function i(g,y,E,h){return'<iframe src="'+a(g,y,E,h)+'" width="450" height="200" frameborder="0"></iframe>'}function p(){const g="&tz=UTC"+encodeURIComponent((0,o.CQ)().format("Z"));if(!window.Intl)return g;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return g;const E=y.resolvedOptions();return E.timeZone?"&tz="+encodeURIComponent(E.timeZone):g}},64687:(Y,O,e)=>{"use strict";e.d(O,{B:()=>i});var t=e(9892),n=e(82897),o=e(66111),s=e(72648),l=e(39904);const f=({diff:g})=>{const y=(0,s.wW)(d),E=!(0,n.isUndefined)(g.originalValue)&&!(0,n.isArray)(g.originalValue)&&!(0,n.isObject)(g.originalValue),h=!(0,n.isUndefined)(g.value)&&!(0,n.isArray)(g.value)&&!(0,n.isObject)(g.value);return o.createElement(o.Fragment,null,E&&o.createElement("span",{className:y},String(g.originalValue)),E&&h?o.createElement(l.J,{name:"arrow-right"}):null,h&&o.createElement("span",{className:y},String(g.value)))},d=g=>t.css`
  background-color: ${g.colors.action.hover};
  border-radius: ${g.shape.borderRadius()};
  color: ${g.colors.text.primary};
  font-size: ${g.typography.body.fontSize};
  margin: 0 ${g.spacing(.5)};
  padding: ${g.spacing(.5,1)};
`;var r=e(15092);const c={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},a=({diff:g,title:y})=>{const E=(0,s.wW)(u);return g?o.createElement(o.Fragment,null,o.createElement(l.J,{type:"mono",name:"circle",className:E[g.op]})," ",o.createElement("span",{className:E.embolden},y)," ",o.createElement("span",null,(0,r.dW)(g,g.path.length>1))," ",o.createElement(f,{diff:g})):o.createElement("div",{className:E.withoutDiff},o.createElement(l.J,{type:"mono",name:"circle",className:E.replace})," ",o.createElement("span",{className:E.embolden},y)," ",o.createElement("span",null,(0,r.dW)(c,!1)))},u=g=>({embolden:t.css`
    font-weight: ${g.typography.fontWeightBold};
  `,add:t.css`
    color: ${g.colors.success.main};
  `,replace:t.css`
    color: ${g.colors.success.main};
  `,move:t.css`
    color: ${g.colors.success.main};
  `,copy:t.css`
    color: ${g.colors.success.main};
  `,_get:t.css`
    color: ${g.colors.success.main};
  `,test:t.css`
    color: ${g.colors.success.main};
  `,remove:t.css`
    color: ${g.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${g.spacing(2)};
  `}),i=({diffs:g,title:y})=>{const E=(0,s.wW)(p);return g.length===1?o.createElement("div",{className:E.container,"data-testid":"diffGroup"},o.createElement(a,{title:y,diff:g[0]})):o.createElement("div",{className:E.container,"data-testid":"diffGroup"},o.createElement(a,{title:y}),o.createElement("ul",{className:E.list},g.map((h,v)=>o.createElement("li",{className:E.listItem,key:`${(0,n.last)(h.path)}__${v}`},o.createElement("span",null,(0,r.dW)(h))," ",o.createElement(f,{diff:h})))))},p=g=>({container:t.css`
    background-color: ${g.colors.background.secondary};
    font-size: ${g.typography.h6.fontSize};
    margin-bottom: ${g.spacing(2)};
    padding: ${g.spacing(2)};
  `,list:t.css`
    margin-left: ${g.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${g.spacing(1)};
  `})},61017:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>d});var t=e(9892),n=e(66111),o=e(28072),s=e.n(o),l=e(28550),f=e(72648);const d=({oldValue:r,newValue:c})=>{const a=(0,f.l4)(),u={variables:{dark:{diffViewerBackground:a.colors.background.canvas,diffViewerColor:a.colors.text.primary,addedBackground:(0,l.Z)(a.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,l.Z)(a.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,l.Z)(a.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,l.Z)(a.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,l.Z)(a.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,l.Z)(a.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:a.colors.background.primary,gutterBackgroundDark:a.colors.background.primary,highlightBackground:(0,l.Z)(a.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,l.Z)(a.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:a.colors.background.secondary,codeFoldBackground:a.colors.background.secondary,emptyLineBackground:a.colors.background.secondary,gutterColor:a.colors.text.disabled,addedGutterColor:a.colors.text.primary,removedGutterColor:a.colors.text.primary,codeFoldContentColor:a.colors.text.disabled,diffViewerTitleBackground:a.colors.background.secondary,diffViewerTitleColor:a.colors.text.disabled,diffViewerTitleBorderColor:a.colors.border.strong}},codeFold:{fontSize:a.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,l.Z)(a.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${a.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:u,oldValue:r,newValue:c,splitView:!1,compareMethod:o.DiffMethod.CSS,useDarkTheme:a.isDark}))}},99714:(Y,O,e)=>{"use strict";e.d(O,{U$:()=>L,Cs:()=>M,Sd:()=>m,R1:()=>S,K8:()=>s});var t=e(82897),n=e(54899);class o{getHistoryList(G,I){const V=G&&G.uid?G.uid:void 0;return V?(0,n.i)().get(`api/dashboards/uid/${V}/versions`,I):Promise.resolve([])}getDashboardVersion(G,I){return(0,n.i)().get(`api/dashboards/uid/${G}/versions/${I}`)}restoreDashboard(G,I){const V=G&&G.uid?G.uid:void 0,H=`api/dashboards/uid/${V}/restore`;return V&&(0,t.isNumber)(I)?(0,n.i)().post(H,{version:I}):Promise.resolve({})}}const s=new o;var l=e(9892),f=e(66111),d=e(58255),r=e(34719),c=e(5191),a=e(31403),u=e(98102),i=e(13821),p=e(72196),g=e(37932),y=e(60499),E=e(27876);const h=async(z,G)=>await s.restoreDashboard(G,z),v=z=>{const G=(0,E.useSelector)(Q=>Q.dashboard.getModel()),[I,V]=(0,i.Z)(async()=>await h(z,G),[]),H=(0,y.iG)();return(0,f.useEffect)(()=>{if(I.value){const Q=g.E1.getLocation(),oe=p.u.stripBaseFromUrl(I.value.url),se=Q.state?.routeReloadCounter;g.E1.replace({...Q,pathname:oe,state:{routeReloadCounter:se?se+1:1}}),H.success("Dashboard restored",`Restored from version ${z}`)}},[I,z,H]),{state:I,onRestoreDashboard:V}},C=({hideModal:z,version:G})=>{const{state:I,onRestoreDashboard:V}=v(G);return(0,f.useEffect)(()=>{I.loading===!1&&I.value&&z()},[I,z]),f.createElement(u.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:z,onConfirm:V,body:f.createElement("p",null,"Are you sure you want to restore the dashboard to version ",G,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${G}`})},m=({versions:z,canCompare:G,onCheck:I})=>f.createElement("table",{className:"filter-table gf-form-group"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",{className:"width-4"}),f.createElement("th",{className:"width-4"},"Version"),f.createElement("th",{className:"width-14"},"Date"),f.createElement("th",{className:"width-10"},"Updated by"),f.createElement("th",null,"Notes"),f.createElement("th",null))),f.createElement("tbody",null,z.map((V,H)=>f.createElement("tr",{key:V.id},f.createElement("td",null,f.createElement(d.X,{"aria-label":`Toggle selection of version ${V.version}`,className:l.css`
                display: inline;
              `,checked:V.checked,onChange:Q=>I(Q,V.id),disabled:!V.checked&&G})),f.createElement("td",null,V.version),f.createElement("td",null,V.createdDateString),f.createElement("td",null,V.createdBy),f.createElement("td",null,V.message),f.createElement("td",{className:"text-right"},H===0?f.createElement(r.V,{name:"Latest",colorIndex:17}):f.createElement(c.JY,null,({showModal:Q,hideModal:oe})=>f.createElement(a.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Q(C,{version:V.version,hideModal:oe})}},"Restore")))))));var D=e(72648),P=e(8180),b=e(39904);const M=({onClick:z=t.noop,baseVersion:G=0,newVersion:I=0,isNewLatest:V=!1})=>{const H=(0,D.wW)(x);return f.createElement("h3",{className:H.header},f.createElement(P.h,{name:"arrow-left",size:"xl",onClick:z}),f.createElement("span",null,"Comparing ",G," ",f.createElement(b.J,{name:"arrows-h"})," ",I," ",V&&f.createElement("cite",{className:"muted"},"(Latest)")))},x=z=>({header:l.css`
    font-size: ${z.typography.h3.fontSize};
    display: flex;
    gap: ${z.spacing(2)};
    margin-bottom: ${z.spacing(3)};
  `});var A=e(26418),T=e(61860);const S=({hasMore:z,canCompare:G,getVersions:I,getDiff:V,isLastPage:H})=>f.createElement(A.Stack,null,z&&f.createElement(a.zx,{type:"button",onClick:()=>I(!0),variant:"secondary",disabled:H},"Show more versions"),f.createElement(T.u,{content:"Select two versions to start comparing",placement:"bottom"},f.createElement(a.zx,{type:"button",disabled:!G,onClick:V,icon:"code-branch"},"Compare versions")));var U=e(52081),R=e(20941),F=e(64687),B=e(61017),K=e(15092);const L=({baseInfo:z,newInfo:G,diffData:I,isNewLatest:V})=>{const H=(0,K.Q$)(I.lhs,I.rhs),Q=(0,D.wW)(N);return f.createElement("div",null,f.createElement("div",{className:Q.spacer},f.createElement(U.Lh,{justify:"space-between",align:"center"},f.createElement("div",null,f.createElement("p",{className:Q.versionInfo},f.createElement("strong",null,"Version ",G.version)," updated by ",G.createdBy," ",G.ageString," -"," ",G.message),f.createElement("p",{className:(0,l.cx)(Q.versionInfo,Q.noMarginBottom)},f.createElement("strong",null,"Version ",z.version)," updated by ",z.createdBy," ",z.ageString," -"," ",z.message)),V&&f.createElement(c.JY,null,({showModal:oe,hideModal:se})=>f.createElement(a.zx,{variant:"destructive",icon:"history",onClick:()=>{oe(C,{version:z.version,hideModal:se})}},"Restore to version ",z.version)))),f.createElement("div",{className:Q.spacer},Object.entries(H).map(([oe,se])=>f.createElement(F.B,{diffs:se,key:oe,title:oe}))),f.createElement(R.s,{isOpen:!1,label:"View JSON Diff"},f.createElement(B.Z,{oldValue:JSON.stringify(I.lhs,null,2),newValue:JSON.stringify(I.rhs,null,2)})))},N=z=>({spacer:l.css`
    margin-bottom: ${z.spacing(4)};
  `,versionInfo:l.css`
    color: ${z.colors.text.secondary};
    font-size: ${z.typography.bodySmall.fontSize};
  `,noMarginBottom:l.css`
    margin-bottom: 0;
  `})},15092:(Y,O,e)=>{"use strict";e.d(O,{Q$:()=>l,dW:()=>f});var t=e(92497),n=e(56070),o=e(82897),s=e.n(o);const l=(c,a)=>{const u=(0,t.qu)(c,a),i=n.stringify(c,null,2),p=n.stringify(a,null,2),g=h=>h.map(v=>{let C,m,D=0;const P=(0,o.tail)(v.path.split("/"));return v.op==="replace"&&(C=(0,o.get)(c,P),m=v.value,D=p.pointers[v.path].value.line),v.op==="add"&&(m=v.value,D=p.pointers[v.path].value.line),v.op==="remove"&&(C=(0,o.get)(c,P),D=i.pointers[v.path].value.line),{op:v.op,value:m,path:P,originalValue:C,startLineNumber:D}}),y=h=>(0,o.sortBy)(h,"startLineNumber"),E=h=>h.reduce((v,C)=>{const m=C.path[0];return v[m]||(v[m]=[]),v[m].push(C),v},{});return(0,o.flow)([g,y,E])(u)},f=(c,a=!0)=>{const u=(0,o.last)(c.path),i=d(u),p=c.op==="remove"?c.originalValue:c.value;let g=r(c.op);return a&&(i?g+=` item ${u}`:(0,o.isArray)(p)&&!(0,o.isEmpty)(p)?g+=` ${p.length} ${u}`:g+=` ${u}`),g},d=c=>!(0,o.isNaN)((0,o.toNumber)(c)),r=c=>c==="add"?"added":c==="remove"?"deleted":"changed"},30237:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{SoloPanel:()=>u,SoloPanelPage:()=>a,default:()=>i});var t=e(66111),n=e(67948),o=e(89050),s=e(34177),l=e(76407),f=e(87464);const d=p=>({dashboard:p.dashboard.getModel()}),r={initDashboard:f.mV},c=(0,n.connect)(d,r);class a extends t.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:g,route:y}=this.props;this.props.initDashboard({urlSlug:g.params.slug,urlUid:g.params.uid,urlType:g.params.type,routeName:y.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(g){const{dashboard:y}=this.props;if(y&&(!g.dashboard||g.dashboard.uid!==y.uid)){const E=y.getPanelByUrlId(this.props.queryParams.panelId);if(!E){this.setState({notFound:!0});return}this.setState({panel:E})}}render(){return t.createElement(u,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}a.contextType=s.h;const u=({dashboard:p,notFound:g,panel:y,panelId:E,timezone:h})=>g?t.createElement("div",{className:"alert alert-error"},"Panel with id ",E," not found"):!y||!p?t.createElement("div",null,"Loading & initializing dashboard"):t.createElement("div",{className:"panel-solo"},t.createElement(o.Z,null,({width:v,height:C})=>v===0?null:t.createElement(l.l,{stateKey:y.key,width:v,height:C,dashboard:p,panel:y,isEditing:!1,isViewing:!0,lazy:!1,timezone:h,hideMenu:!0}))),i=c(a)},76407:(Y,O,e)=>{"use strict";e.d(O,{l:()=>oa});var t=e(66111),n=e(67948),o=e(32294),s=e(46732),l=e(49380),f=e(56991);function d({children:Gt,width:Bt,height:on,onLoad:rn,onChange:In}){const Ln=(0,f.L)(),[Un,qn]=(0,t.useState)(!1),[da,ha]=(0,t.useState)(!1),Ta=(0,t.useRef)(null);return(0,l.Z)(()=>{d.addCallback(Ln,cs=>{!Un&&cs.isIntersecting&&(qn(!0),rn?.()),ha(cs.isIntersecting),In?.(cs.isIntersecting)});const Wa=Ta.current;return Wa&&d.observer.observe(Wa),()=>{delete d.callbacks[Ln],Wa&&d.observer.unobserve(Wa),Object.keys(d.callbacks).length===0&&d.observer.disconnect()}}),t.createElement("div",{id:Ln,ref:Ta,style:{width:Bt,height:on}},Un&&(typeof Gt=="function"?Gt({isInView:da}):Gt))}d.callbacks={},d.addCallback=(Gt,Bt)=>d.callbacks[Gt]=Bt,d.observer=new IntersectionObserver(Gt=>{for(const Bt of Gt)d.callbacks[Bt.target.id]&&d.callbacks[Bt.target.id](Bt)},{rootMargin:"100px"});var r=e(9085),c=e.n(r),a=e(53376),u=e(52666),i=e(75849),p=e(68183),g=e(11484),y=e(37932),E=e(38208),h=e(47694),v=e(84952),C=e(73952);function m(Gt){return/(d-solo|dashboard-solo)/.test(Gt?.toLowerCase())}function D(Gt,Bt){return Boolean(Bt.find(on=>on.id==="apps")?.children?.find(on=>on.id===`plugin-page-${Gt}`)?.children?.some(on=>on.url?.endsWith(`/a/${Gt}`)))}var P=e(19349),b=e(2631),M=e(20308),x=e(41818),A=e(39653),T=e(69600),S=e(9892),U=e(97865),R=e(72648),F=e(61860),B=e(39904),K=e(3630),L=e(95130),N=e(71698),z=e(64319);function G({panelLinks:Gt,onShowPanelLinks:Bt}){const on=(0,R.wW)(I),rn=()=>{const In=Bt();return t.createElement(L.v,null,In?.map((Ln,Un)=>t.createElement(L.v.Item,{key:Un,label:Ln.title,url:Ln.href,target:Ln.target,onClick:Ln.onClick})))};if(Gt.length===1){const In=Bt()[0];return t.createElement(E.fm.TitleItem,{href:In.href,onClick:In.onClick,target:In.target,title:In.title},t.createElement(B.J,{name:"external-link-alt",size:"md"}))}else return t.createElement(N.L,{overlay:rn},t.createElement(z.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links",className:on.menuTrigger}))}const I=Gt=>({menuTrigger:(0,S.css)({height:"100%",background:"inherit",border:"none",borderRadius:`${Gt.shape.borderRadius()}`,cursor:"context-menu"})});var V=e(85419);const H=({notice:Gt,onClick:Bt})=>{const on=(0,R.wW)(Q),rn=Gt.severity==="error"||Gt.severity==="warning"?"exclamation-triangle":"info-circle";return Gt.inspect&&Bt?t.createElement(z.h,{className:on.notice,icon:rn,iconSize:"md",key:Gt.severity,tooltip:Gt.text,onClick:In=>Bt(In,Gt.inspect)}):Gt.link?t.createElement("a",{className:on.notice,"aria-label":Gt.text,href:Gt.link,target:"_blank",rel:"noreferrer"},t.createElement(B.J,{name:rn,style:{marginRight:"8px"},size:"md"})):t.createElement(F.u,{key:Gt.severity,content:Gt.text},t.createElement("span",{className:on.iconTooltip},t.createElement(B.J,{name:rn,size:"md"})))},Q=Gt=>({notice:(0,S.css)({background:"inherit",border:"none",borderRadius:Gt.shape.borderRadius()}),iconTooltip:(0,S.css)({color:`${Gt.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${Gt.shape.borderRadius()}`,padding:`${Gt.spacing(0,1)}`,height:` ${Gt.spacing(Gt.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,V.getFocusStyles)(Gt),zIndex:1},"&: focus:not(:focus-visible)":(0,V.getMouseFocusStyles)(Gt),"&:hover ":{boxShadow:`${Gt.shadows.z1}`,color:`${Gt.colors.text.primary}`,background:`${Gt.colors.background.secondary}`}})}),oe=({frames:Gt,panelId:Bt})=>{const on=(0,t.useCallback)((In,Ln)=>{In.stopPropagation(),y.E1.partial({inspect:Bt,inspectTab:Ln})},[Bt]),rn={};for(const In of Gt)if(!(!In.meta||!In.meta.notices))for(const Ln of In.meta.notices)rn[Ln.severity]=Ln;return t.createElement(t.Fragment,null,Object.values(rn).map(In=>t.createElement(H,{notice:In,onClick:on,key:In.severity})))};function se(Gt){const{alertState:Bt,data:on,panelId:rn,onShowPanelLinks:In,panelLinks:Ln}=Gt,Un=(0,R.wW)(ie),qn=t.createElement(F.u,{content:`alerting is ${Bt}`},t.createElement(E.fm.TitleItem,{className:(0,S.cx)({[Un.ok]:Bt===U.Z.OK,[Un.pending]:Bt===U.Z.Pending,[Un.alerting]:Bt===U.Z.Alerting})},t.createElement(B.J,{name:Bt==="alerting"?"heart-break":"heart",className:"panel-alert-icon",size:"md"}))),da=t.createElement(t.Fragment,null,on.request&&on.request.timeInfo&&t.createElement(F.u,{content:t.createElement(K.IF,{timeRange:on.request?.range,timeZone:on.request?.timezone})},t.createElement(E.fm.TitleItem,{className:Un.timeshift},t.createElement(B.J,{name:"clock-nine",size:"md"})," ",on.request?.timeInfo)));return t.createElement(t.Fragment,null,Ln&&Ln.length>0&&In&&t.createElement(G,{onShowPanelLinks:In,panelLinks:Ln}),t.createElement(oe,{panelId:rn,frames:on.series}),da,Bt&&qn)}const ie=Gt=>({ok:(0,S.css)({color:Gt.colors.success.text}),pending:(0,S.css)({color:Gt.colors.warning.text}),alerting:(0,S.css)({color:Gt.colors.error.text}),timeshift:(0,S.css)({color:Gt.colors.text.link,gap:Gt.spacing(.5),whiteSpace:"nowrap","&:hover":{color:Gt.colors.emphasize(Gt.colors.text.link,.03)}})});function j(Gt){let Bt=!1;function on(){return Gt.data.request&&Gt.data.request.timeInfo?!1:!Gt.panel.hasTitle()}const rn=()=>{const ss=(0,M.J)().replace(Gt.panel.description,Gt.panel.scopedVars),Oa=(0,b.a)(ss);return Bt||((0,x.ff)("dashboards_panelheader_description_displayed"),Bt=!0),Oa},In=()=>{const ss=(0,T.H)(Gt.panel);if(!ss)return[];const Oa=ss&&ss.getLinks(Gt.panel.replaceVariables);return Oa.map(Ia=>({...Ia,onClick:(...ys)=>{(0,x.ff)("dashboards_panelheader_datalink_clicked",{has_multiple_links:Oa.length>1}),Ia.onClick?.(...ys)}}))},Ln=(ss,Oa)=>{ss.stopPropagation(),y.E1.partial({inspect:Gt.panel.id,inspectTab:Oa})},Un=ss=>{ss.stopPropagation(),y.E1.partial({inspect:Gt.panel.id,inspectTab:A.q.Error}),(0,x.ff)("dashboards_panelheader_statusmessage_clicked")},qn=()=>{Gt.panel.getQueryRunner().cancelQuery(),(0,x.ff)("dashboards_panelheader_cancelquery_clicked",{data_state:Gt.data.state})},da=Gt.plugin.noPadding?"none":"md",ha=Gt.data.alertState?.state,Wa=(Gt.panel.links&&Gt.panel.links.length>0&&In||Gt.data.series.length>0&&Gt.data.series.some(ss=>(ss.meta?.notices?.length??0)>0)||Gt.data.request&&Gt.data.request.timeInfo||ha)&&t.createElement(se,{alertState:ha,data:Gt.data,panelId:Gt.panel.id,panelLinks:Gt.panel.links,onShowPanelLinks:In}),cs=Gt.panel.description?rn:void 0,is=!(Gt.isViewing||Gt.isEditing)&&Boolean(Gt.isDraggable??!0)?"grid-drag-handle":"",Ha=Gt.panel.getDisplayTitle();return{hasOverlayHeader:on,onShowPanelDescription:rn,onShowPanelLinks:In,onOpenInspector:Ln,onOpenErrorInspect:Un,onCancelQuery:qn,padding:da,description:cs,dragClass:is,title:Ha,titleItems:Wa,onOpenMenu:()=>{(0,x.ff)("dashboards_panelheader_menu",{item:"menu"})}}}var de=e(94437),ce=e(53821);const ee=({state:Gt,onClick:Bt})=>{const on=(0,R.wW)(le);return Gt===u.Gu.Loading?t.createElement("div",{className:"panel-loading",onClick:Bt},t.createElement(F.u,{content:"Cancel query"},t.createElement(B.J,{className:"panel-loading__spinner spin-clockwise",name:"sync"}))):Gt===u.Gu.Streaming?t.createElement("div",{className:"panel-loading",onClick:Bt},t.createElement("div",{title:"Streaming (click to stop)",className:on.streamIndicator})):null};function le(Gt){return{streamIndicator:S.css`
      width: 10px;
      height: 10px;
      background: ${Gt.colors.text.disabled};
      box-shadow: 0 0 2px ${Gt.colors.text.disabled};
      border-radius: 50%;
      position: relative;
      top: 6px;
      right: 1px;
    `}}function q({children:Gt,onOpenMenu:Bt,...on}){const rn=(0,t.useRef)({x:0,y:0}),[In,Ln]=(0,t.useState)(!1),Un=(0,t.useCallback)(da=>{fe(rn.current,Z(da))&&(Ln(!In),In&&Bt?.())},[In,Ln,Bt]),qn=(0,t.useCallback)(da=>{rn.current=Z(da)},[]);return t.createElement("header",{...on,className:"panel-title-container",onClick:Un,onMouseDown:qn},Gt({panelMenuOpen:In,closeMenu:()=>Ln(!1)}))}function fe(Gt,Bt,on=3.5){return Math.sqrt((Gt.x-Bt.x)**2+(Gt.y-Bt.y)**2)<=on}function Z(Gt){return{x:Gt.clientX,y:Gt.clientY}}var ne=e(79860);class re extends t.PureComponent{constructor(){super(...arguments),this.renderItems=(Bt,on=!1)=>t.createElement("ul",{className:c()("dropdown-menu","dropdown-menu--menu","panel-menu",this.props.itemsClassName),style:this.props.style,role:on?"":"menu"},Bt.map((rn,In)=>t.createElement(ne.u,{key:`${rn.text}${In}`,type:rn.type,text:rn.text,iconClassName:rn.iconClassName,onClick:rn.onClick,shortcut:rn.shortcut,href:rn.href},rn.subMenu&&this.renderItems(rn.subMenu,!0))))}render(){return t.createElement("div",{className:c()("panel-menu-container","dropdown","open",this.props.className)},this.renderItems(this.props.items))}}function ve({items:Gt}){const Bt=on=>on.map(rn=>rn.type==="divider"?t.createElement(L.v.Divider,{key:rn.text}):t.createElement(L.v.Item,{key:rn.text,label:rn.text,icon:rn.iconClassName,childItems:rn.subMenu?Bt(rn.subMenu):void 0,url:rn.href,onClick:rn.onClick,shortcut:rn.shortcut,testId:p.wl.components.Panels.Panel.menuItems(rn.text)}));return t.createElement(L.v,null,Bt(Gt))}var me=e(27876),Ie=e(22623),Ge=e(86647),gt=e(54665),Te=e(36032),Le=e(35287),Ye=e(82002),it=e(55935),ht=e(2476),Re=e(6297),ye=e(79543),Ce=e(3153),be=e(48197);function We(Gt,Bt,on){const rn=la=>{la.preventDefault(),y.E1.partial({viewPanel:Bt.id}),(0,x.ff)("dashboards_panelheader_menu",{item:"view"})},In=la=>{la.preventDefault(),y.E1.partial({editPanel:Bt.id}),(0,x.ff)("dashboards_panelheader_menu",{item:"edit"})},Ln=la=>{la.preventDefault(),(0,ht.Po)(Gt,Bt),(0,x.ff)("dashboards_panelheader_menu",{item:"share"})},Un=la=>{la.preventDefault(),(0,ht.Kq)(Gt,Bt),(0,x.ff)("dashboards_panelheader_menu",{item:"createLibraryPanel"})},qn=la=>{la.preventDefault(),(0,ht.oe)(Bt),(0,x.ff)("dashboards_panelheader_menu",{item:"unlinkLibraryPanel"})},da=la=>{y.E1.partial({inspect:Bt.id,inspectTab:la}),(0,x.ff)("dashboards_panelheader_menu",{item:"inspect",tab:la??A.q.Data})},ha=la=>{la.preventDefault()},Ta=la=>{la.preventDefault(),(0,ht.jN)(Gt,Bt),(0,x.ff)("dashboards_panelheader_menu",{item:"duplicate"})},Wa=la=>{la.preventDefault(),(0,ht.bY)(Bt),(0,x.ff)("dashboards_panelheader_menu",{item:"copy"})},cs=la=>{la.preventDefault(),(0,ht.WJ)(Gt,Bt,!0),(0,x.ff)("dashboards_panelheader_menu",{item:"remove"})},is=la=>{la.preventDefault();const Ts=la.ctrlKey||la.metaKey?bs=>window.open(`${h.ZP.appSubUrl}${bs}`):void 0;Ce.h.dispatch((0,be.m$)(Bt,{getDataSourceSrv:Ge.F,getTimeSrv:P.$t,getExploreUrl:it.H6,openInNewWindow:Ts})),(0,x.ff)("dashboards_panelheader_menu",{item:"explore"})},Ha=la=>{la.preventDefault(),(0,ht.qw)(Bt),(0,x.ff)("dashboards_panelheader_menu",{item:"toggleLegend"})},$a=[];Bt.isEditing||$a.push({text:(0,Le.t)("panel.header-menu.view","View"),iconClassName:"eye",onClick:rn,shortcut:"v"}),Gt.canEditPanel(Bt)&&!Bt.isEditing&&$a.push({text:(0,Le.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",onClick:In,shortcut:"e"}),$a.push({text:(0,Le.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:Ln,shortcut:"p s"}),Ye.Vt.hasAccessToExplore()&&!(Bt.plugin&&Bt.plugin.meta.skipDataQuery)&&Bt.datasource?.uid!==ye.oe&&$a.push({text:(0,Le.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",onClick:is,shortcut:"x"});const ss=[];Bt.plugin&&!Bt.plugin.meta.skipDataQuery&&(ss.push({text:(0,Le.t)("panel.header-menu.inspect-data","Data"),onClick:la=>da(A.q.Data)}),Gt.meta.canEdit&&ss.push({text:(0,Le.t)("panel.header-menu.query","Query"),onClick:la=>da(A.q.Query)})),ss.push({text:(0,Le.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:la=>da(A.q.JSON)}),$a.push({type:"submenu",text:(0,Le.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",onClick:la=>{const Ts=la.currentTarget,bs=la.target,ds=bs.closest('[role="menuitem"]');(bs===Ts||ds===Ts)&&da()},shortcut:"i",subMenu:ss});const Oa=[],Ia=Gt.canEditPanel(Bt);if(Bt.isViewing||Bt.isEditing||(Ia?(Oa.push({text:(0,Le.t)("panel.header-menu.duplicate","Duplicate"),onClick:Ta,shortcut:"p d"}),Oa.push({text:(0,Le.t)("panel.header-menu.copy","Copy"),onClick:Wa}),(0,Re.V)(Bt)?Oa.push({text:(0,Le.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:qn}):Oa.push({text:(0,Le.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:Un})):Ye.Vt.isEditor&&Oa.push({text:(0,Le.t)("panel.header-menu.copy","Copy"),onClick:Wa})),on){const la=on.getScope(),Ts=la.$$childHead.ctrl,bs=Ts.getExtendedMenu();for(const ds of bs){const Us={text:ds.text,href:ds.href,shortcut:ds.shortcut};ds.click&&(Us.onClick=()=>{la.$eval(ds.click,{ctrl:Ts})}),Oa.push(Us)}}Bt.options.legend&&Oa.push({text:Bt.options.legend.showLegend?(0,Le.t)("panel.header-menu.hide-legend","Hide legend"):(0,Le.t)("panel.header-menu.show-legend","Show legend"),onClick:Ha,shortcut:"p l"}),Bt.isEditing&&(Oa.length=0),Ia&&Bt.plugin&&!Bt.plugin.meta.skipDataQuery&&Oa.push({text:(0,Le.t)("panel.header-menu.get-help","Get help"),onClick:la=>da(A.q.Help)}),Oa.length&&$a.push({type:"submenu",text:(0,Le.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:Oa,onClick:ha});const{extensions:ys}=(0,gt.I)({extensionPointId:Ie.y.DashboardPanelMenu,context:mt(Bt,Gt)});if(ys.length>0&&!Bt.isEditing){const la=[];for(const Ts of ys)if((0,Te.c)(Ts)){la.push({text:Qe(Ts.title,25),href:Ts.path,onClick:Ts.onClick});continue}$a.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:la})}return Gt.canEditPanel(Bt)&&!Bt.isEditing&&!Bt.isViewing&&($a.push({type:"divider",text:""}),$a.push({text:(0,Le.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:cs,shortcut:"p r"})),$a}function Qe(Gt,Bt){return Gt.length<Bt?Gt:`${Gt.slice(0,Bt-3).trimEnd()}...`}function mt(Gt,Bt){return{id:Gt.id,pluginId:Gt.type,title:Gt.title,timeRange:Bt.time,timeZone:Bt.timezone,dashboard:{uid:Bt.uid,title:Bt.title,tags:Array.from(Bt.tags)},targets:Gt.targets}}function vt({panel:Gt,dashboard:Bt,loadingState:on,children:rn}){const[In,Ln]=(0,t.useState)([]),Un=(0,me.useSelector)(qn=>(0,C.i)(qn,Gt)?.angularComponent);return(0,t.useEffect)(()=>{Ln(We(Bt,Gt,Un))},[Bt,Gt,Un,on,Ln]),rn({items:In})}function rt({panel:Gt,dashboard:Bt,loadingState:on,style:rn,menuItemsClassName:In,menuWrapperClassName:Ln}){return t.createElement(vt,{panel:Gt,dashboard:Bt,loadingState:on},({items:Un})=>t.createElement(re,{className:Ln,itemsClassName:In,style:rn,items:Un}))}function Ot({style:Gt,panel:Bt,dashboard:on,loadingState:rn}){return t.createElement(vt,{panel:Bt,dashboard:on,loadingState:rn},({items:In})=>t.createElement(ve,{style:Gt,items:In}))}function Et({panel:Gt,error:Bt,isViewing:on,isEditing:rn,data:In,alertState:Ln,dashboard:Un}){const qn=()=>Gt.getQueryRunner().cancelQuery(),da=Gt.getDisplayTitle(),ha=(0,S.cx)("panel-header",on||rn?"":"grid-drag-handle"),Ta=(0,R.wW)(Mt),Wa=()=>{(0,x.ff)("dashboards_panelheader_menu",{item:"menu"})};return t.createElement(t.Fragment,null,t.createElement(ee,{state:In.state,onClick:qn}),t.createElement(ce.Z,{panel:Gt,title:Gt.title,description:Gt.description,scopedVars:Gt.scopedVars,links:(0,T.H)(Gt),error:Bt}),t.createElement("div",{className:ha},t.createElement(q,{"data-testid":p.wl.components.Panels.Panel.title(da),onOpenMenu:Wa},({closeMenu:cs,panelMenuOpen:is})=>t.createElement(de.L,{onClick:cs,parent:document},t.createElement("div",{className:"panel-title"},t.createElement(oe,{frames:In.series,panelId:Gt.id}),Ln?t.createElement(B.J,{name:Ln==="alerting"?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}):null,t.createElement("h2",{className:Ta.titleText},da),!Un.meta.publicDashboardAccessToken&&t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(B.J,{name:"angle-down",className:"panel-menu-toggle"}),is?t.createElement(rt,{panel:Gt,dashboard:Un}):null),In.request&&In.request.timeInfo&&t.createElement("span",{className:"panel-time-info"},t.createElement(B.J,{name:"clock-nine",size:"sm"})," ",In.request.timeInfo))))))}const Mt=Gt=>({titleText:S.css`
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      max-width: calc(100% - 38px);
      cursor: pointer;
      font-weight: ${Gt.typography.fontWeightMedium};
      font-size: ${Gt.typography.body.fontSize};
      margin: 0;

      &:hover {
        color: ${Gt.colors.text.primary};
      }
      .panel-has-alert & {
        max-width: calc(100% - 54px);
      }
    `});class ue extends t.PureComponent{constructor(Bt){super(Bt),this.element=null,this.timeSrv=(0,P.$t)(),this.subs=new a.w0,this.state={data:{state:u.Gu.NotStarted,series:[],timeRange:(0,i.JK)()}}}componentDidMount(){const{panel:Bt}=this.props;this.loadAngularPanel();const on=Bt.getQueryRunner();this.subs.add(on.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:rn=>this.onPanelDataUpdate(rn)}))}onPanelDataUpdate(Bt){let on;if(Bt.state===u.Gu.Error){const{error:rn}=Bt;rn&&on!==rn.message&&(on=rn.message)}this.setState({data:Bt,errorMessage:on})}componentWillUnmount(){this.subs.unsubscribe(),this.props.angularComponent&&this.props.angularComponent?.destroy()}componentDidUpdate(Bt,on){const{plugin:rn,height:In,width:Ln,panel:Un}=this.props;Bt.plugin!==rn&&this.loadAngularPanel(),(Bt.width!==Ln||Bt.height!==In)&&this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),Un.render())}getInnerPanelHeight(){const{plugin:Bt,height:on}=this.props,{theme:rn}=h.ZP,In=this.hasOverlayHeader()?0:rn.panelHeaderHeight,Ln=Bt.noPadding?0:rn.panelPadding;return on-In-Ln*2-v.QO}getInnerPanelWidth(){const{plugin:Bt,width:on}=this.props,{theme:rn}=h.ZP,In=Bt.noPadding?0:rn.panelPadding;return on-In*2-v.QO}loadAngularPanel(){const{panel:Bt,dashboard:on,setPanelAngularComponent:rn}=this.props;if(!this.element)return;const In=(0,g.w)(),Ln='<plugin-component type="panel" class="panel-height-helper"></plugin-component>';this.scopeProps={panel:Bt,dashboard:on,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},rn({key:Bt.key,angularComponent:In.load(this.element,this.scopeProps,Ln)})}hasOverlayHeader(){const{panel:Bt}=this.props,{data:on}=this.state;return on.request&&on.request.timeInfo?!1:!Bt.hasTitle()}render(){const{dashboard:Bt,panel:on,isViewing:rn,isEditing:In,plugin:Ln}=this.props,{errorMessage:Un,data:qn}=this.state,{transparent:da}=on,ha=qn.alertState?.state,Ta=j({...this.props,data:qn}),Wa=c()({"panel-container":!0,"panel-container--absolute":m(y.E1.getLocation().pathname),"panel-container--transparent":da,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":on.alert!==void 0,[`panel-alert-state--${ha}`]:ha!==void 0}),cs=c()({"panel-content":!0,"panel-content--no-padding":Ln.noPadding});if(h.ZP.featureToggles.newPanelChromeUI){const is=(on.gridPos?.y??0)===0?-16:void 0,Ha=t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(Ot,{panel:on,dashboard:Bt,loadingState:qn.state}));return t.createElement(E.fm,{width:this.props.width,height:this.props.height,title:Ta.title,loadingState:qn.state,statusMessage:Un,statusMessageOnClick:Ta.onOpenErrorInspect,description:Ta.description,titleItems:Ta.titleItems,menu:this.props.hideMenu?void 0:Ha,dragClass:Ta.dragClass,dragClassCancel:"grid-drag-cancel",padding:Ta.padding,hoverHeaderOffset:is,hoverHeader:Ta.hasOverlayHeader(),displayMode:da?"transparent":"default",onCancelQuery:Ta.onCancelQuery,onOpenMenu:Ta.onOpenMenu},()=>t.createElement("div",{ref:$a=>this.element=$a,className:"panel-height-helper"}))}else return t.createElement("div",{className:Wa,"data-testid":p.wl.components.Panels.Panel.title(on.title),"aria-label":p.wl.components.Panels.Panel.containerByTitle(on.title)},t.createElement(Et,{panel:on,dashboard:Bt,title:on.title,description:on.description,links:on.links,error:Un,isViewing:rn,isEditing:In,data:qn,alertState:ha}),t.createElement("div",{className:cs},t.createElement("div",{ref:is=>this.element=is,className:"panel-height-helper"})))}}const De=(Gt,Bt)=>({angularComponent:(0,C.i)(Gt,Bt.panel)?.angularComponent}),Ne={setPanelAngularComponent:s.o8},tt=(0,n.connect)(De,Ne)(ue);var et=e(56632),Ue=e(23588),Fe=e(67483),Ee=e(73446),Me=e(206),He=e(83881),Ze=e(75363),lt=e(82378),bt=e(35645),Pt=e(60325),Je=e(53546),Dt=e(29494),Ve=e(91162),Xe=e(30002),st=e(59957),ut=e(18271),xt=e(45849),Kt=e(45984),Jt=e(7832);function On(Gt,Bt){return new Promise(on=>{if(Gt.datasource?.uid===xt.JY){Nn(Bt,Gt),on(!0);return}ut.Z.publish(new Kt.VJ({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{Nn(Bt,Gt),on(!0)},onDismiss:()=>{on(!1)}}))})}function Nn(Gt,Bt){const on=Gt.map(In=>(0,st.Y)(In)),rn={refId:"A",queryType:Jt.hR.Snapshot,snapshot:on,datasource:{uid:xt.JY}};Bt.updateQueries({dataSource:{uid:xt.JY},queries:[rn]}),Bt.refresh()}var jn=e(90748),ya=e(53768);const Lt=(Gt,Bt,on)=>{const{overrides:rn}=on,In=on.overrides.findIndex(ha=>ha.matcher.id===jn.mi.byName&&ha.matcher.options===Gt);if(In<0)return{...on,overrides:[...on.overrides,ft(Gt,Bt)]};const Ln=Array.from(rn),Un=Ln[In],qn=Un.properties.findIndex(ha=>ha.id==="color");if(qn<0)return Ln[In]={...Un,properties:[...Un.properties,Ht(Bt)]},{...on,overrides:Ln};const da=Array.from(Un.properties);return da[qn]=Ht(Bt),Ln[In]={...Un,properties:da},{...on,overrides:Ln}},ft=(Gt,Bt)=>({matcher:{id:jn.mi.byName,options:Gt},properties:[Ht(Bt)]}),Ht=Gt=>({id:"color",value:{mode:ya.S.Fixed,fixedColor:Gt}});var $t=e(70659),zt=e(87865),Wt=e(57277),jt=e(91551),sn=e(6911);const pn="Error in plugin";class Pn extends t.PureComponent{constructor(Bt){super(Bt),this.timeSrv=(0,P.$t)(),this.subs=new a.w0,this.eventFilter={onlyLocal:!0},this.getSync=()=>this.props.isEditing?et.m.Off:this.props.dashboard.graphTooltip,this.onInstanceStateChange=rn=>{this.props.onInstanceStateChange(rn),this.setState({context:{...this.state.context,instanceState:rn}})},this.onUpdateData=rn=>On(this.props.panel,rn),this.onSeriesColorChange=(rn,In)=>{this.onFieldConfigChange(Lt(rn,In,this.props.panel.fieldConfig))},this.onSeriesVisibilityChange=(rn,In)=>{this.onFieldConfigChange((0,jt.N)(rn,In,this.props.panel.fieldConfig,this.state.data.series))},this.onToggleLegendSort=rn=>{const In=this.props.panel.options.legend;if(!In)return;let Ln=In.sortDesc,Un=In.sortBy;rn!==Un&&(Ln=void 0),Ln===!1?(Un=void 0,Ln=void 0):(Ln=!Ln,Un=rn),this.onOptionsChange({...this.props.panel.options,legend:{...In,sortBy:Un,sortDesc:Ln}})},this.onRefresh=()=>{const{dashboard:rn,panel:In,isInView:Ln,width:Un}=this.props;if(!Ln){this.setState({refreshWhenInView:!0});return}const qn=(0,ht.W1)(In,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(Un<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),In.runAllPanelQueries({dashboardUID:rn.uid,dashboardTimezone:rn.getTimezone(),publicDashboardAccessToken:rn.meta.publicDashboardAccessToken,timeData:qn,width:Un})}else this.setState({data:{...this.state.data,timeRange:this.timeSrv.timeRange()},renderCounter:this.state.renderCounter+1,liveTime:void 0})},this.onRender=()=>{const rn={renderCounter:this.state.renderCounter+1};this.setState(rn)},this.onOptionsChange=rn=>{this.props.panel.updateOptions(rn)},this.onFieldConfigChange=rn=>{this.props.panel.updateFieldConfig(rn)},this.onPanelError=rn=>{const In=rn.message||pn;this.state.errorMessage!==In&&this.setState({errorMessage:In})},this.onPanelErrorRecover=()=>{this.setState({errorMessage:void 0})},this.onAnnotationCreate=async rn=>{const In=rn.from!==rn.to,Ln={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:In,time:rn.from,timeEnd:In?rn.to:0,tags:rn.tags,text:rn.description};await(0,$t.xD)(Ln),(0,zt.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ue.n1(Ln))},this.onAnnotationDelete=async rn=>{await(0,$t.Dl)({id:rn}),(0,zt.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ue.n1({id:rn}))},this.onAnnotationUpdate=async rn=>{const In=rn.from!==rn.to,Ln={id:rn.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:In,time:rn.from,timeEnd:In?rn.to:0,tags:rn.tags,text:rn.description};await(0,$t._E)(Ln),(0,zt.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ue.n1(Ln))},this.onChangeTimeRange=rn=>{this.timeSrv.setTime({from:(0,Fe.zh)(rn.from),to:(0,Fe.zh)(rn.to)})},this.onAddAdHocFilter=rn=>{const{key:In,value:Ln,operator:Un}=rn,qn=(0,Ve.ak)().getInstanceSettings(this.props.panel.datasource),da=qn&&(0,Ee.iU)(qn);da&&(0,Ce.WI)((0,Xe.m2)({datasource:da,key:In,operator:Un,value:Ln}))};const on=Bt.dashboard.events.newScopedBus(`panel:${Bt.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventBus:on,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:Bt.dashboard.canAddAnnotations.bind(Bt.dashboard),canEditAnnotations:Bt.dashboard.canEditAnnotations.bind(Bt.dashboard),canDeleteAnnotations:Bt.dashboard.canDeleteAnnotations.bind(Bt.dashboard),onAddAdHocFilter:this.onAddAdHocFilter,onUpdateData:this.onUpdateData},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?Me.zj.PanelEditor:this.props.isViewing?Me.zj.PanelViewer:Me.zj.Dashboard}getInitialPanelDataState(){return{state:u.Gu.NotStarted,series:[],timeRange:(0,i.JK)()}}componentDidMount(){const{panel:Bt,dashboard:on}=this.props;if(this.subs.add(Bt.events.subscribe(lt.U5,this.onRefresh)),this.subs.add(Bt.events.subscribe(Kt._z,this.onRender)),on.panelInitialized(this.props.panel),this.hasPanelSnapshot){this.setState({data:(0,Wt.y)(Bt,on),isFirstLoad:!1});return}this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(Bt.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:rn=>this.onDataUpdate(rn)})),sn.A.listen(this)}componentWillUnmount(){this.subs.unsubscribe(),sn.A.remove(this)}liveTimeChanged(Bt){const{data:on}=this.state;if(on.timeRange){const rn=Bt.to.valueOf()-on.timeRange.to.valueOf();if(rn<100){console.log("Skip tick render",this.props.panel.title,rn);return}}this.setState({liveTime:Bt})}componentDidUpdate(Bt){const{isInView:on,width:rn}=this.props,{context:In}=this.state,Ln=this.getPanelContextApp();In.app!==Ln&&this.setState({context:{...In,app:Ln}}),on!==Bt.isInView&&on&&this.state.refreshWhenInView&&this.onRefresh(),rn!==Bt.width&&sn.A.updateInterval(this)}onDataUpdate(Bt){const{dashboard:on,panel:rn,plugin:In}=this.props;if(In.meta.skipDataQuery){this.setState({data:this.getInitialPanelDataState()});return}let{isFirstLoad:Ln}=this.state,Un;switch(Bt.state){case u.Gu.Loading:if(this.state.data.state===u.Gu.Loading)return;break;case u.Gu.Error:const{error:qn,errors:da}=Bt;da?.length?da.length===1?Un=da[0].message:Un="Multiple errors found. Click for more details":qn&&Un!==qn.message&&(Un=qn.message);break;case u.Gu.Done:on.snapshot&&(rn.snapshotData=Bt.series.map(ha=>(0,He.og)(ha))),Ln&&(Ln=!1);break}this.setState({isFirstLoad:Ln,errorMessage:Un,data:Bt,liveTime:void 0})}get hasPanelSnapshot(){const{panel:Bt}=this.props;return Bt.snapshotData&&Bt.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(Bt,on){return Bt===u.Gu.Done||Bt===u.Gu.Error||on.skipDataQuery}skipFirstRender(Bt){const{isFirstLoad:on}=this.state;return this.wantsQueryExecution&&on&&(Bt===u.Gu.Loading||Bt===u.Gu.NotStarted)}renderPanelContent(Bt,on){const{panel:rn,plugin:In,dashboard:Ln}=this.props,{renderCounter:Un,data:qn}=this.state,{state:da}=qn;if(this.skipFirstRender(da))return null;this.shouldSignalRenderingCompleted(da,In.meta)&&Dt.r.renderingCompleted();const ha=In.panel,Ta=this.state.liveTime??qn.timeRange??this.timeSrv.timeRange(),Wa=rn.getOptions();return this.eventFilter.onlyLocal=Ln.graphTooltip===0,t.createElement(t.Fragment,null,t.createElement(Pt._w,{value:this.state.context},t.createElement(ha,{id:rn.id,data:qn,title:rn.title,timeRange:Ta,timeZone:this.props.dashboard.getTimezone(),options:Wa,fieldConfig:rn.fieldConfig,transparent:rn.transparent,width:Bt,height:on,renderCounter:Un,replaceVariables:rn.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:Ln.events})))}renderPanel(Bt,on){const{panel:rn,plugin:In,dashboard:Ln}=this.props,{renderCounter:Un,data:qn}=this.state,{theme:da}=bt.v,{state:ha}=qn;if(this.skipFirstRender(ha))return null;this.shouldSignalRenderingCompleted(ha,In.meta)&&Dt.r.renderingCompleted();const Ta=In.panel,Wa=this.state.liveTime??qn.timeRange??this.timeSrv.timeRange(),cs=this.hasOverlayHeader()?0:da.panelHeaderHeight,is=In.noPadding?0:da.panelPadding,Ha=Bt-is*2-v.QO,$a=on-cs-is*2-v.QO,ss=c()({"panel-content":!0,"panel-content--no-padding":In.noPadding}),Oa=rn.getOptions();this.eventFilter.onlyLocal=Ln.graphTooltip===0;const Ia=this.props.timezone||this.props.dashboard.getTimezone();return t.createElement(t.Fragment,null,t.createElement("div",{className:ss},t.createElement(Ze.b,{meta:In.meta},t.createElement(Pt._w,{value:this.state.context},t.createElement(Ta,{id:rn.id,data:qn,title:rn.title,timeRange:Wa,timeZone:Ia,options:Oa,fieldConfig:rn.fieldConfig,transparent:rn.transparent,width:Ha,height:$a,renderCounter:Un,replaceVariables:rn.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:Ln.events})))))}hasOverlayHeader(){const{panel:Bt}=this.props,{data:on}=this.state;return on.request&&on.request.timeInfo?!1:!Bt.hasTitle()}render(){const{dashboard:Bt,panel:on,isViewing:rn,isEditing:In,width:Ln,height:Un,plugin:qn}=this.props,{errorMessage:da,data:ha}=this.state,{transparent:Ta}=on,Wa=ha.alertState?.state,cs=this.hasOverlayHeader(),is=c()({"panel-container":!0,"panel-container--absolute":m(y.E1.getLocation().pathname),"panel-container--transparent":Ta,"panel-container--no-title":cs,[`panel-alert-state--${Wa}`]:Wa!==void 0}),Ha=j({...this.props,data:ha});if(bt.v.featureToggles.newPanelChromeUI){const $a=(on.gridPos?.y??0)===0?-16:void 0,ss=t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(Ot,{panel:on,dashboard:Bt,loadingState:ha.state}));return t.createElement(E.fm,{width:Ln,height:Un,title:Ha.title,loadingState:ha.state,statusMessage:da,statusMessageOnClick:Ha.onOpenErrorInspect,description:Ha.description,titleItems:Ha.titleItems,menu:this.props.hideMenu?void 0:ss,dragClass:Ha.dragClass,dragClassCancel:"grid-drag-cancel",padding:Ha.padding,hoverHeaderOffset:$a,hoverHeader:Ha.hasOverlayHeader(),displayMode:Ta?"transparent":"default",onCancelQuery:Ha.onCancelQuery,onOpenMenu:Ha.onOpenMenu},(Oa,Ia)=>t.createElement(t.Fragment,null,t.createElement(Je.SV,{dependencies:[ha,qn,on.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:ys})=>ys?null:this.renderPanelContent(Oa,Ia))))}else return t.createElement("section",{className:is,"aria-label":p.wl.components.Panels.Panel.containerByTitle(on.title)},t.createElement(Et,{panel:on,dashboard:Bt,title:on.title,description:on.description,links:on.links,error:da,isEditing:In,isViewing:rn,alertState:Wa,data:ha}),t.createElement(Je.SV,{dependencies:[ha,qn,on.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:$a})=>$a?null:this.renderPanel(Ln,Un)))}}const Mn=(Gt,Bt)=>{const on=Gt.panels[Bt.stateKey];return on?{plugin:on.plugin,instanceState:on.instanceState}:{plugin:null}},Cn={initPanelState:o.JI,setPanelInstanceState:s.pC},Hn=(0,n.connect)(Mn,Cn);class _n extends t.PureComponent{constructor(){super(...arguments),this.onInstanceStateChange=Bt=>{this.props.setPanelInstanceState({key:this.props.stateKey,value:Bt})},this.onVisibilityChange=Bt=>{this.props.panel.isInView=Bt},this.onPanelLoad=()=>{this.props.plugin||this.props.initPanelState(this.props.panel)},this.renderPanel=({isInView:Bt})=>{const{dashboard:on,panel:rn,isViewing:In,isEditing:Ln,width:Un,height:qn,plugin:da,timezone:ha,hideMenu:Ta,isDraggable:Wa=!0}=this.props;return da?da&&da.angularPanelCtrl?t.createElement(tt,{plugin:da,panel:rn,dashboard:on,isViewing:In,isEditing:Ln,isInView:Bt,isDraggable:Wa,width:Un,height:qn}):t.createElement(Pn,{plugin:da,panel:rn,dashboard:on,isViewing:In,isEditing:Ln,isInView:Bt,isDraggable:Wa,width:Un,height:qn,onInstanceStateChange:this.onInstanceStateChange,timezone:ha,hideMenu:Ta}):null}}componentDidMount(){this.props.panel.isInView=!this.props.lazy,this.props.lazy||this.onPanelLoad()}render(){const{width:Bt,height:on,lazy:rn}=this.props;return rn?t.createElement(d,{width:Bt,height:on,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad},this.renderPanel):this.renderPanel({isInView:!0})}}_n.defaultProps={lazy:!0};const oa=Hn(_n)},53821:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>u});var t=e(66111),n=e(2631),o=e(68183),s=e(20308),l=e(37932),f=e(61860),d=e(19349),r=e(39653),c=(i=>(i.Error="Error",i.Info="Info",i.Links="Links",i))(c||{});class a extends t.Component{constructor(){super(...arguments),this.timeSrv=(0,d.$t)(),this.getInfoMode=()=>{const{panel:p,error:g}=this.props;if(g)return"Error";if(p.description)return"Info";if(p.links&&p.links.length)return"Links"},this.getInfoContent=()=>{const{panel:p}=this.props,g=p.description||"",y=(0,s.J)().replace(g,p.scopedVars),E=(0,n.a)(y),h=this.props.links&&this.props.links.getLinks(p.replaceVariables);return t.createElement("div",{className:"panel-info-content markdown-html"},t.createElement("div",{dangerouslySetInnerHTML:{__html:E}}),h&&h.length>0&&t.createElement("ul",{className:"panel-info-corner-links"},h.map((v,C)=>t.createElement("li",{key:C},t.createElement("a",{className:"panel-info-corner-links__item",href:v.href,target:v.target},v.title)))))},this.onClickError=()=>{l.E1.partial({inspect:this.props.panel.id,inspectTab:r.q.Error})}}renderCornerType(p,g,y){const E=p==="Error"?"error":"info",h=`panel-info-corner panel-info-corner--${p.toLowerCase()}`,v=o.wl.components.Panels.Panel.headerCornerInfo(p.toLowerCase());return t.createElement(f.u,{content:g,placement:"top-start",theme:E,interactive:!0},t.createElement("button",{type:"button",className:h,onClick:y,"aria-label":v},t.createElement("i",{"aria-hidden":!0,className:"fa"}),t.createElement("span",{className:"panel-info-corner-inner"})))}render(){const{error:p}=this.props,g=this.getInfoMode();return g?g==="Error"&&p?this.renderCornerType(g,p,this.onClickError):g==="Info"||g==="Links"?this.renderCornerType(g,this.getInfoContent):null:null}}const u=a},79860:(Y,O,e)=>{"use strict";e.d(O,{u:()=>d});var t=e(9892),n=e(66111),o=e(68183),s=e(72648),l=e(40419),f=e(39904);const d=a=>{const[u,i]=(0,n.useState)(null),p=a.type==="submenu",g=a.type==="divider",y=(0,s.wW)(c),E=a.iconClassName?(0,l.toIconName)(a.iconClassName):void 0;return g?n.createElement("li",{className:"divider"}):n.createElement("li",{className:p?`dropdown-submenu ${r(u)}`:void 0,ref:i,"data-testid":o.wl.components.Panels.Panel.menuItems(a.text)},n.createElement("a",{onClick:a.onClick,href:a.href,role:"menuitem"},E&&n.createElement(f.J,{name:E,className:y.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":o.wl.components.Panels.Panel.headerItems(a.text)},a.text,p&&n.createElement(f.J,{name:"angle-right",className:y.shortcutIconClassName})),a.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(f.J,{name:"keyboard",className:y.menuIconClassName})," ",a.shortcut)),a.children)};function r(a){if(!a)return"invisible";const u=a.parentElement.getBoundingClientRect(),i=a.getBoundingClientRect();return i.width===0?"invisible":u.right+i.width+10>window.innerWidth?"pull-left":"pull-right"}function c(a){return{menuIconClassName:(0,t.css)({marginRight:a.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:a.spacing(.5),color:a.colors.text.secondary})}}},91551:(Y,O,e)=>{"use strict";e.d(O,{N:()=>a});var t=e(3947),n=e(73567),o=e(90748),s=e(99098),l=e(30471),f=e(50035),d=e(17882);const r="hideSeriesFrom",c=(0,t.Y4)(r);function a(h,v,C,m){const{overrides:D}=C,P=h,b=D.findIndex(c);if(b<0){if(v===d.R.ToggleSelection){const U=u([P,...E(D,m)]);return{...C,overrides:[...C.overrides,U]}}const T=y(m,P),S=u(T);return{...C,overrides:[...C.overrides,S]}}const M=Array.from(D),[x]=M.splice(b,1);if(v===d.R.ToggleSelection){let T=p(x);const S=E(M,m);if(S.length>0&&(T=T.filter(R=>S.indexOf(R)<0)),T[0]===P&&T.length===1)return{...C,overrides:M};const U=u([P,...S]);return{...C,overrides:[...M,U]}}const A=i(x,P);return g(A,m)?{...C,overrides:M}:{...C,overrides:[...M,A]}}function u(h,v=n.Ys.exclude,C){return C=C??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:r,matcher:{id:o.mi.byNames,options:{mode:v,names:h,prefix:v===n.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...C,value:{viz:!0,legend:!1,tooltip:!1}}]}}const i=(h,v,C=n.Ys.exclude)=>{const m=h.properties.find(b=>b.id==="custom.hideFrom"),D=p(h),P=D.findIndex(b=>b===v);return P<0?D.push(v):D.splice(P,1),u(D,C,m)},p=h=>{const v=h.matcher.options?.names;return Array.isArray(v)?[...v]:[]},g=(h,v)=>p(h).length===y(v).length,y=(h,v)=>{const C=new Set;for(const m of h)for(const D of m.fields){if(D.type!==s.fS.number)continue;const P=(0,l.CZ)(D,m,h);P!==v&&C.add(P)}return Array.from(C)},E=(h,v)=>{let C=[];for(const m of h){const D=m.properties.find(P=>P.id==="custom.hideFrom");if(D!==void 0&&D.value?.legend===!0){const b=f.Ls.get(m.matcher.id).get(m.matcher.options);for(const M of v)for(const x of M.fields){if(x.type!==s.fS.number)continue;const A=(0,l.CZ)(x,M,v);b(x,M,v)&&C.push(A)}}}return C}},6911:(Y,O,e)=>{"use strict";e.d(O,{A:()=>r});var t=e(924),n=e(67483),o=e(47406);const s=100;class l{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const a=Date.now();this.budget=(a-this.lastUpdate)/s;const u=this.ok.getValue(),i=this.budget<=this.threshold;if(u!==i&&this.ok.next(i),this.lastUpdate=a,this.isLive&&this.ok.getValue()&&this.timeRange){let p;for(const g of this.listeners){if(!g.panel.props.isInView)continue;if(a-g.last>=g.intervalMs){if(!p){const{raw:E}=this.timeRange;p={raw:E,from:(0,n.CQ)(a-this.liveTimeOffset),to:(0,n.CQ)(a)}}g.panel.liveTimeChanged(p),g.last=a}}}}}setLiveTimeRange(a){if(this.timeRange=a,this.isLive=a?.raw?.to==="now",this.isLive){const u=o.parse(a.raw.from,!1)?.valueOf(),i=o.parse(a.raw.to,!0)?.valueOf();this.liveTimeOffset=i-u;for(const p of this.listeners)p.intervalMs=d(this.liveTimeOffset,p.panel.props.width)}}listen(a){this.listeners.push({last:this.lastUpdate,panel:a,intervalMs:d(6e4,a.props.width)})}remove(a){this.listeners=this.listeners.filter(u=>u.panel!==a)}updateInterval(a){if(!(!this.timeRange||!this.isLive)){for(const u of this.listeners)if(u.panel===a){u.intervalMs=d(this.liveTimeOffset,u.panel.props.width);return}}}}const f=5*60*1e3;function d(c,a){const u=Math.ceil(c/a/100)*100;return u>f?f:u}const r=new l;setInterval(r.measure,s)},87449:(Y,O,e)=>{"use strict";e.d(O,{Bg:()=>h,pD:()=>v});var t=e(24259),n=e.n(t),o=e(82897),s=e.n(o),l=e(36365),f=e.n(l),d=e(4063),r=e(47406),c=e(54899),a=e(37932),u=e(29930),i=e(13019),p=e(24816),g=e(91162),y=e(77582),E=e(9398);class h{constructor(){}_dashboardLoadFailed(D,P){return P=P||!1,{meta:{canStar:!1,isSnapshot:P,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:D}}}loadDashboard(D,P,b){let M;return D==="script"?M=this._loadScriptedDashboard(P):D==="snapshot"?M=u.ae.get("/api/snapshots/"+P).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):D==="ds"?M=this._loadFromDatasource(P):D==="public"?M=u.ae.getPublicDashboardByUid(b).then(x=>x).catch(x=>{const A=x.data.statusCode===403&&x.data.messageId==="publicdashboards.notEnabled",T=x.data.statusCode===404&&x.data.messageId==="publicdashboards.notFound",S=this._dashboardLoadFailed(A?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...S,meta:{...S.meta,publicDashboardEnabled:T?void 0:!A,dashboardNotFound:T}}}):M=u.ae.getDashboardByUid(b).then(x=>{if(x.meta.isFolder)throw y.h$.emit(d.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return x}).catch(()=>this._dashboardLoadFailed("Not found",!0)),M.then(x=>(x.meta.dashboardNotFound!==!0&&i.Z.addDashboardImpression(x.dashboard.uid),x)),M}_loadScriptedDashboard(D){const P="public/dashboards/"+D.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,c.i)().get(P).then(this._executeScript.bind(this)).then(b=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:b.data}),b=>(console.error("Script dashboard error "+b),y.h$.emit(d.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(D){const P=await(0,g.ak)().get(D);if(!P)return Promise.reject("can not find datasource: "+D);const b=new URLSearchParams(window.location.search),M=b.get("path");if(!M)return Promise.reject("expecting path parameter");const x={};return b.forEach((A,T)=>{x[T]=A}),(0,c.i)().get(`/api/datasources/uid/${P.uid}/resources/${M}`,x).then(A=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:A}))}_executeScript(D){const P={dashboardSrv:(0,E.h4)(),datasourceSrv:(0,g.ak)()},M=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",D)(a.E1.getSearchObject(),p.Z,r,s(),f(),window,document,n(),n(),P);return(0,o.isFunction)(M)?new Promise(x=>{M(A=>{x({data:A})})}):{data:M}}}let v=new h;const C=m=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(Y,O,e)=>{"use strict";e.d(O,{h4:()=>p});var t=e(65583),n=e(4063),o=e(18271),s=e(35287),l=e(29930),f=e(50946),d=e(45984),r=e(82302),c=e(2476);class a{constructor(){this.onRemovePanel=y=>{const E=this.getCurrent();E&&(0,c.WJ)(E,E.getPanelById(y),!0)},o.h.subscribe(d.Eb,y=>this.onRemovePanel(y.payload))}create(y,E){return new r.f(y,E)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const E=JSON.parse(y);return(0,f.uC)({dashboard:E,folderUid:this.dashboard?.meta.folderUid||E.folderUid})}saveDashboard(y,E){return(0,t.n)((0,l.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...E}))}starDashboard(y,E){const h=(0,l.i)(),v={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+y,method:E?"DELETE":"POST"};return h.request(v).then(()=>{const C=!E;this.dashboard?.uid===y&&(this.dashboard.meta.isStarred=C);const m=C?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return o.h.emit(n.SI.alertSuccess,[m]),C})}}let u;function i(g){u=g}function p(){return u||(u=new a),u}},17424:(Y,O,e)=>{"use strict";e.d(O,{Qi:()=>i,lh:()=>g});var t=e(59980),n=e(49372),o=e(53704),s=e(59724),l=e(89424),f=e(83881),d=e(54899),r=e(32689),c=e(7832),a=e(63496),u=e(45849);const i="-- Public --",p="1min";class g extends l.MF{constructor(E){let h={};g.isMixedDatasource(E)&&(h.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:h,uid:g.resolveUid(E),jsonData:{},access:"proxy",readOnly:!0}),this.interval=g.resolveInterval(E),this.annotations={prepareQuery(v){return{...v,queryType:c.hR.Annotations,refId:"anno"}}}}static resolveUid(E){return typeof E=="string"?E:E?.uid??i}static isMixedDatasource(E){return typeof E=="string"||E==null?!1:E?.uid===a.D}static resolveInterval(E){return typeof E=="string"||E==null?p:("interval"in E?E.interval:void 0)??p}query(E){const{intervalMs:h,maxDataPoints:v,requestId:C,publicDashboardAccessToken:m,panelId:D,queryCachingTTL:P,range:{from:b,to:M}}=E;let x;if(!E.targets.length)return(0,t.of)({data:[]});const A=E.targets[0];if(A.queryType===c.hR.Annotations)return A?.datasource?.uid===u.JY?(0,n.D)(this.getAnnotations(E)):(0,t.of)({data:[]});{const T={intervalMs:h,maxDataPoints:v,queryCachingTTL:P,timeRange:{from:b.valueOf().toString(),to:M.valueOf().toString()}};return(0,d.i)().fetch({url:`/api/public/dashboards/${m}/panels/${D}/query`,method:"POST",data:T,requestId:C}).pipe((0,o.w)(S=>(0,t.of)((0,r.z1)(S,x))),(0,s.K)(S=>(0,t.of)((0,r.z1)(S))))}}async getAnnotations(E){const{publicDashboardAccessToken:h,range:{to:v,from:C}}=E,m={from:C.valueOf(),to:v.valueOf()},D=h?await(0,d.i)().get(`/api/public/dashboards/${h}/annotations`,m):[];return{data:[(0,f.g0)(D)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},19349:(Y,O,e)=>{"use strict";e.d(O,{$t:()=>v});var t=e(82897),n=e(67483),o=e(75849),s=e(47891),l=e(47406),f=e(37932),d=e(18271),r=e(47694),c=e(82002),a=e(5242),u=e(74124),i=e(45984),p=e(5562);function g({urlRefresh:C,currentRefresh:m,isAllowedIntervalFn:D,minRefreshInterval:P,refreshIntervals:b=p.o5}){if(!C)return m;const M=D(C),x=b.find(A=>A===C);if(!M||!x){const A=P?b.find(S=>S===P):void 0,T=b?.length?b[0]:void 0;return A??T??m}return C||m}class y{constructor(m){this.contextSrv=m,this.timeRangeForUrl=()=>{const D=this.timeRange().raw;return(0,n.v9)(D.from)&&(D.from=D.from.valueOf().toString()),(0,n.v9)(D.to)&&(D.to=D.to.valueOf().toString()),D},this.time=(0,o.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),d.Z.subscribe(i.p8,D=>{this.zoomOut(D.payload.scale,D.payload.updateUrl)}),d.Z.subscribe(i.Qt,D=>{this.shiftTime(D.payload.direction,D.payload.updateUrl)}),d.Z.subscribe(i.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(m){this.timeModel=m,this.time=m.time,this.refresh=m.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const D=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);D.to.isBefore(D.from)&&this.setTime({from:D.raw.to,to:D.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(m){return this.contextSrv.minRefreshInterval?m.filter(D=>D!=="").filter(this.contextSrv.isAllowedInterval):m}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(m){if(m.indexOf("now")!==-1)return m;if(m.length===8){const D=(0,n.zh)(m,"YYYYMMDD");if(D.isValid())return D}else if(m.length===15){const D=(0,n.zh)(m,"YYYYMMDDTHHmmss");if(D.isValid())return D}if(!isNaN(m)){const D=parseInt(m,10);return(0,n.zh)(D)}return null}getTimeWindow(m,D){const P=parseInt(m,10);let b;return D.match(/^\d+$/)&&parseInt(D,10)?b=parseInt(D,10):b=s.intervalToMs(D),{from:(0,n.zh)(P-b/2),to:(0,n.zh)(P+b/2)}}initTimeFromUrl(){if(r.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const m=f.E1.getSearch();m.get("time")&&m.get("time.window")&&(this.time=this.getTimeWindow(m.get("time"),m.get("time.window"))),m.get("from")&&(this.time.from=this.parseUrlParam(m.get("from"))||this.time.from),m.get("to")&&(this.time.to=this.parseUrlParam(m.get("to"))||this.time.to),m.get("to")&&m.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=g({urlRefresh:m.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:r.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const m=f.E1.getSearch();if(m.get("left"))return;const D=this.timeRangeForUrl(),P=m.get("from"),b=m.get("to");P&&b?(P!==D.from||b!==D.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(m){this.timeModel&&(this.timeModel.refresh=m),this.stopAutoRefresh();const D=f.E1.getSearchObject();if(!m){D.refresh&&f.E1.partial({refresh:null},!0);return}const P=this.contextSrv.getValidInterval(m),b=s.intervalToMs(P);this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(b),this.refreshTimeModel()},b);const M=this.contextSrv.getValidInterval(m);D.refresh!==M&&f.E1.partial({refresh:M},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(m){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(m),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},m)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(m,D=!0){if((0,t.extend)(this.time,m),(0,n.v9)(m.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),D===!0){const P=this.timeRangeForUrl(),b=f.E1.getSearchObject();if(b.from===P.from.toString()&&b.to===P.to.toString())return;b.from=P.from.toString(),b.to=P.to.toString(),f.E1.partial(b)}this.refreshTimeModel()}timeRange(){return(0,u.O)(this.time,this.timeModel)}zoomOut(m,D=!0){const P=this.timeRange(),{from:b,to:M}=(0,a.h)(P,m);this.setTime({from:(0,n.zh)(b),to:(0,n.zh)(M)},D)}shiftTime(m,D=!0){const P=this.timeRange(),{from:b,to:M}=(0,a.e)(m,P);this.setTime({from:(0,n.zh)(b),to:(0,n.zh)(M)},D)}makeAbsoluteTime(){if(f.E1.getSearch().get("left"))return;const{from:D,to:P}=this.timeRange();this.setTime({from:D,to:P},!0)}isRefreshOutsideThreshold(m,D=.05){const P=this.timeRange();if(l.isMathString(P.raw.from)){const b=P.to.diff(P.from),M=Date.now()-m,x=b*D;return M>=x}return!1}}let E;function h(C){E=C}function v(){return E||(E=new y(c.Vt)),E}},7592:(Y,O,e)=>{"use strict";e.d(O,{o:()=>L,p:()=>H});var t=e(82897),n=e(30779),o=e(61618),s=e(73446),l=e(49187),f=e(94976),d=e(32195),r=e(92103),c=e(90748),a=e(99098),u=e(31568),i=e(18820),p=e(86647),g=e(40538),y=e(48010),E=e(52974),h=e(47694),v=e(84952);function C(ee){return Array.from(new Array(ee+1),(le,q)=>q).filter(le=>ee%le===0)}var m=e(24816),D=e(91162),P=e(15546),b=e(96188),M=e(63496),x=e(7149),A=e(98967),T=e(99822),S=e(2868);function U(ee,le){const q=[];if(ee?.statistics&&ee?.statistics.length){ee.statistic=ee.statistics[0];for(const fe of ee.statistics.splice(1))q.push({...ee,statistic:fe})}for(const fe of q)fe.refId=(0,T.Hs)(le),delete fe.statistics,le.push(fe);return delete ee.statistics,q}function R(ee){const le=[];if(ee&&"statistics"in ee&&ee?.statistics?.length){for(const q of ee.statistics.splice(1)){const{statistics:fe,name:Z,...ne}=ee;le.push({...ne,statistic:q,name:`${Z} - ${q}`})}ee.statistic=ee.statistics[0],le.length!==0&&(ee.name=`${ee.name} - ${ee.statistic}`),delete ee.statistics}return le}function F(ee){ee.hasOwnProperty("metricQueryType")||(ee.metricQueryType=S.$5.Search),ee.hasOwnProperty("metricEditorMode")||(ee.metricQueryType===S.$5.Query?ee.metricEditorMode=S.MQ.Code:ee.metricEditorMode=ee.expression?S.MQ.Code:S.MQ.Builder)}var B=e(10672),K=e(96161);n.S.setInit(E.u),n.N.setInit(E.l);class L{constructor(le){this.dashboard=le,(0,p.F)()||(0,p.w)(new D.ND)}updateSchema(le){let q,fe,Z,ne;const re=this.dashboard.schemaVersion,ve=[];if(this.dashboard.schemaVersion=38,re!==this.dashboard.schemaVersion){if(re<2&&(le.services&&le.services.filter&&(this.dashboard.time=le.services.filter.time,this.dashboard.templating.list=le.services.filter.list||[]),ve.push(me=>(me.type==="graphite"&&(me.type="graph"),me.type!=="graph"||((0,t.isBoolean)(me.legend)&&(me.legend={show:me.legend}),me.grid&&(me.grid.min&&(me.grid.leftMin=me.grid.min,delete me.grid.min),me.grid.max&&(me.grid.leftMax=me.grid.max,delete me.grid.max)),me.y_format&&(me.y_formats||(me.y_formats=[]),me.y_formats[0]=me.y_format,delete me.y_format),me.y2_format&&(me.y_formats||(me.y_formats=[]),me.y_formats[1]=me.y2_format,delete me.y2_format)),me))),re<3){let me=this.dashboard.getNextPanelId();ve.push(Ie=>(Ie.id||(Ie.id=me,me+=1),Ie))}if(re<4&&ve.push(me=>(me.type!=="graph"||((0,t.each)(me.aliasYAxis,(Ie,Ge)=>{me.seriesOverrides=[{alias:Ge,yaxis:Ie}]}),delete me.aliasYAxis),me)),re<6){const me=(0,t.find)(le.pulldowns,{type:"annotations"});for(me&&(this.dashboard.annotations={list:me.annotations||[]}),q=0;q<this.dashboard.templating.list.length;q++){const Ie=this.dashboard.templating.list[q];Ie.datasource===void 0&&(Ie.datasource=null),Ie.type==="filter"&&(Ie.type="query"),Ie.type===void 0&&(Ie.type="query"),Ie.allFormat===void 0&&(Ie.allFormat="glob")}}if(re<7&&(le.nav&&le.nav.length&&(this.dashboard.timepicker=le.nav[0]),ve.push(me=>((0,t.each)(me.targets,Ie=>{Ie.refId||(Ie.refId=me.getNextQueryLetter&&me.getNextQueryLetter())}),me))),re<8&&ve.push(me=>((0,t.each)(me.targets,Ie=>{Ie.fields&&Ie.tags&&Ie.groupBy&&(Ie.rawQuery?(delete Ie.fields,delete Ie.fill):(Ie.select=(0,t.map)(Ie.fields,Ge=>{const gt=[];return gt.push({type:"field",params:[Ge.name]}),gt.push({type:Ge.func,params:[]}),Ge.mathExpr&&gt.push({type:"math",params:[Ge.mathExpr]}),Ge.asExpr&&gt.push({type:"alias",params:[Ge.asExpr]}),gt}),delete Ie.fields,(0,t.each)(Ie.groupBy,Ge=>{Ge.type==="time"&&Ge.interval&&(Ge.params=[Ge.interval],delete Ge.interval),Ge.type==="tag"&&Ge.key&&(Ge.params=[Ge.key],delete Ge.key)}),Ie.fill&&(Ie.groupBy.push({type:"fill",params:[Ie.fill]}),delete Ie.fill)))}),me)),re<9&&ve.push(me=>{if(me.type!=="singlestat"&&me.thresholds!=="")return me;if(me.thresholds){const Ie=me.thresholds.split(",");Ie.length>=3&&(Ie.shift(),me.thresholds=Ie.join(","))}return me}),re<10&&ve.push(me=>(me.type!=="table"||(0,t.each)(me.styles,Ie=>{if(Ie.thresholds&&Ie.thresholds.length>=3){const Ge=Ie.thresholds;Ge.shift(),Ie.thresholds=Ge}}),me)),re<12&&(0,t.each)(this.dashboard.getVariables(),me=>{me.refresh&&(me.refresh=1),me.refresh||(me.refresh=0),me.hideVariable?me.hide=2:me.hideLabel&&(me.hide=1)}),re<12&&ve.push(me=>(me.type!=="graph"||!me.grid||me.yaxes||(me.yaxes=[{show:me["y-axis"],min:me.grid.leftMin,max:me.grid.leftMax,logBase:me.grid.leftLogBase,format:me.y_formats[0],label:me.leftYAxisLabel},{show:me["y-axis"],min:me.grid.rightMin,max:me.grid.rightMax,logBase:me.grid.rightLogBase,format:me.y_formats[1],label:me.rightYAxisLabel}],me.xaxis={show:me["x-axis"]},delete me.grid.leftMin,delete me.grid.leftMax,delete me.grid.leftLogBase,delete me.grid.rightMin,delete me.grid.rightMax,delete me.grid.rightLogBase,delete me.y_formats,delete me.leftYAxisLabel,delete me.rightYAxisLabel,delete me["y-axis"],delete me["x-axis"]),me)),re<13&&ve.push(me=>{if(me.type!=="graph"||!me.grid)return me;me.thresholds||(me.thresholds=[]);const Ie={},Ge={};return me.grid.threshold1!==null&&(Ie.value=me.grid.threshold1,me.grid.thresholdLine?(Ie.line=!0,Ie.lineColor=me.grid.threshold1Color,Ie.colorMode="custom"):(Ie.fill=!0,Ie.fillColor=me.grid.threshold1Color,Ie.colorMode="custom")),me.grid.threshold2!==null&&(Ge.value=me.grid.threshold2,me.grid.thresholdLine?(Ge.line=!0,Ge.lineColor=me.grid.threshold2Color,Ge.colorMode="custom"):(Ge.fill=!0,Ge.fillColor=me.grid.threshold2Color,Ge.colorMode="custom")),(0,t.isNumber)(Ie.value)&&((0,t.isNumber)(Ge.value)?Ie.value>Ge.value?(Ie.op=Ge.op="lt",me.thresholds.push(Ie),me.thresholds.push(Ge)):(Ie.op=Ge.op="gt",me.thresholds.push(Ie),me.thresholds.push(Ge)):(Ie.op="gt",me.thresholds.push(Ie))),delete me.grid.threshold1,delete me.grid.threshold1Color,delete me.grid.threshold2,delete me.grid.threshold2Color,delete me.grid.thresholdLine,me}),re<14&&(this.dashboard.graphTooltip=le.sharedCrosshair?1:0),re<16&&this.upgradeToGridLayout(le),re<17&&ve.push(me=>{if(me.minSpan){const Ie=v.cz/me.minSpan,Ge=C(v.cz);me.maxPerRow=Ge[(0,t.findIndex)(Ge,gt=>gt>Ie)-1]}return delete me.minSpan,me}),re<18&&ve.push(me=>(me["options-gauge"]&&(me.options=me["options-gauge"],me.options.valueOptions={unit:me.options.unit,stat:me.options.stat,decimals:me.options.decimals,prefix:me.options.prefix,suffix:me.options.suffix},me.options.thresholds&&me.options.thresholds.reverse(),delete me.options.options,delete me.options.unit,delete me.options.stat,delete me.options.decimals,delete me.options.prefix,delete me.options.suffix,delete me["options-gauge"]),me)),re<19&&ve.push(me=>(me.links&&(0,t.isArray)(me.links)&&(me.links=me.links.map(G)),me)),re<20){const me=Ie=>({...Ie,url:I(Ie.url)});ve.push(Ie=>(Ie.options&&Ie.options.dataLinks&&(0,t.isArray)(Ie.options.dataLinks)&&(Ie.options.dataLinks=Ie.options.dataLinks.map(me)),Ie.options&&Ie.options.fieldOptions&&Ie.options.fieldOptions.defaults&&(Ie.options.fieldOptions.defaults.links&&(0,t.isArray)(Ie.options.fieldOptions.defaults.links)&&(Ie.options.fieldOptions.defaults.links=Ie.options.fieldOptions.defaults.links.map(me)),Ie.options.fieldOptions.defaults.title&&(Ie.options.fieldOptions.defaults.title=I(Ie.options.fieldOptions.defaults.title))),Ie))}if(re<21){const me=Ie=>({...Ie,url:Ie.url.replace(/__series.labels/g,"__field.labels")});ve.push(Ie=>(Ie.options&&Ie.options.dataLinks&&(0,t.isArray)(Ie.options.dataLinks)&&(Ie.options.dataLinks=Ie.options.dataLinks.map(me)),Ie.options&&Ie.options.fieldOptions&&Ie.options.fieldOptions.defaults&&Ie.options.fieldOptions.defaults.links&&(0,t.isArray)(Ie.options.fieldOptions.defaults.links)&&(Ie.options.fieldOptions.defaults.links=Ie.options.fieldOptions.defaults.links.map(me)),Ie))}if(re<22&&ve.push(me=>(me.type!=="table"||(0,t.each)(me.styles,Ie=>{Ie.align="auto"}),me)),re<23)for(const me of this.dashboard.templating.list){if(!(0,P.U4)(me))continue;const{multi:Ie,current:Ge}=me;(0,o.Q)(Ge)||(me.current=(0,b.x)(Ge,Ie))}if(re<24&&ve.push(me=>{const Ie=me.type==="table";if(Ie&&!me.styles)return me;const Ge=me.table==="table2";return!Ie||Ge||(me.type=Ie?"table-old":"table"),me}),re<25,re<26&&ve.push(me=>(me.type==="text2"&&(me.type="text",delete me.options.angular),me)),re<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(me=>{if(!(0,P.VC)(me))return me;const Ie={...me};return Ie.current={selected:!0,text:Ie.query??"",value:Ie.query??""},Ie.options=[Ie.current],Ie.hide===B.bU.dontHide||Ie.hide===B.bU.hideLabel?{...Ie,type:"textbox"}:Ie})),re<28){ve.push(me=>me.type==="singlestat"?V(me):me);for(const me of this.dashboard.templating.list)me.tags&&delete me.tags,me.tagsQuery&&delete me.tagsQuery,me.tagValuesQuery&&delete me.tagValuesQuery,me.useTags&&delete me.useTags}if(re<29)for(const me of this.dashboard.templating.list)me.type==="query"&&(me.refresh!==1&&me.refresh!==2&&(me.refresh=1),me.options?.length&&(me.options=[]));if(re<30&&(ve.push(oe),ve.push(de)),re<31&&ve.push(me=>{if(me.transformations){for(const Ie of me.transformations)if(Ie.id===u.r.id)return Q(me,u.r.id,{id:i.R.id,options:{}})}return me}),re<32,re<33&&ve.push(me=>{if(me.datasource=H(me.datasource,{returnDefaultAsNull:!0}),!me.targets)return me;for(const Ie of me.targets){const Ge=H(Ie.datasource,{returnDefaultAsNull:!0});Ge!=null&&(Ie.datasource=Ge)}return me}),re<34&&(ve.push(me=>(this.migrateCloudWatchQueries(me),me)),this.migrateCloudWatchAnnotationQuery()),re<35&&ve.push(ce),re<36){for(const Ie of this.dashboard.annotations.list)Ie.datasource=H(Ie.datasource,{returnDefaultAsNull:!1});const me=(0,p.F)().getInstanceSettings(null);if(me){for(const Ie of this.dashboard.templating.list)Ie.type==="query"&&Ie.datasource===null&&(Ie.datasource=(0,s.iU)(me));ve.push(Ie=>{if(Ie.targets){let Ge=!1;Ie.datasource==null&&Ie.targets.length>0&&(Ie.datasource=(0,s.iU)(me),Ge=!0);for(const gt of Ie.targets)(gt.datasource==null||gt.datasource.uid==null)&&(Ie.datasource?.uid!==M.D?gt.datasource={...Ie.datasource}:gt.datasource=H(gt.datasource,{returnDefaultAsNull:!1})),Ge&&gt.datasource?.uid!=="__expr__"&&(Ie.datasource=gt.datasource)}return Ie})}}if(re<37&&ve.push(me=>(me.options?.legend&&(me.options.legend.displayMode==="hidden"||me.options.legend.showLegend===!1)?(me.options.legend.displayMode="list",me.options.legend.showLegend=!1):me.options?.legend&&(me.options.legend={...me.options?.legend,showLegend:!0}),me)),re<38&&ve.push(me=>{if(me.type==="table"&&me.fieldConfig!==void 0){const Ie=me.fieldConfig.defaults?.custom?.displayMode;if(Ie!==void 0&&(me.fieldConfig.defaults.custom.cellOptions=(0,y.q7)(Ie),delete me.fieldConfig.defaults.custom.displayMode),me.fieldConfig?.overrides)for(const Ge of me.fieldConfig.overrides)for(let gt=0;gt<Ge.properties?.length;gt++){let Te=Ge.properties[gt].value;Ge.properties[gt].id==="custom.displayMode"&&(Ge.properties[gt].id="custom.cellOptions",Ge.properties[gt].value=(0,y.q7)(Te))}}return me}),ve.length!==0)for(fe=0;fe<this.dashboard.panels.length;fe++)for(Z=0;Z<ve.length;Z++){this.dashboard.panels[fe]=ve[Z].call(this,this.dashboard.panels[fe]);const me=this.dashboard.panels[fe].panels;if(me)for(ne=0;ne<me.length;ne++)me[ne]=ve[Z].call(this,me[ne])}}}migrateCloudWatchQueries(le){for(const q of le.targets||[])if(se(q)&&(F(q),q.hasOwnProperty("statistics"))){const fe=U(q,[...le.targets]);for(const Z of fe)le.targets.push(Z)}}migrateCloudWatchAnnotationQuery(){for(const le of this.dashboard.annotations.list)if(ie(le)){const q=R(le);for(const fe of q)this.dashboard.annotations.list.push(fe)}}upgradeToGridLayout(le){let q=0;const fe=v.cz/12;let ne=(0,t.max)((0,t.flattenDeep)((0,t.map)(le.rows,ve=>(0,t.map)(ve.panels,"id"))))+1;if(!le.rows)return;const re=(0,t.some)(le.rows,ve=>ve.collapse||ve.showTitle||ve.repeat);for(const ve of le.rows){if(ve.repeatIteration)continue;const me=ve.height||v.b0,Ie=N(me),Ge={};let gt;re&&(Ge.id=ne,Ge.type="row",Ge.title=ve.title,Ge.collapsed=ve.collapse,Ge.repeat=ve.repeat,Ge.panels=[],Ge.gridPos={x:0,y:q,w:v.cz,h:Ie},gt=new K.rY(Ge),ne++,q++);const Te=new z(Ie,v.cz,q);for(const Le of ve.panels){Le.span=Le.span||v.kh,Le.minSpan&&(Le.minSpan=Math.min(v.cz,v.cz/12*Le.minSpan));const Ye=Math.floor(Le.span)*fe,it=Le.height?N(Le.height):Ie,ht=Te.getPanelPosition(it,Ye);q=Te.yPos,Le.gridPos={x:ht.x,y:q+ht.y,w:Ye,h:it},Te.addPanel(Le.gridPos),delete Le.span,gt&&Ge.collapsed?gt.panels?.push(Le):this.dashboard.panels.push(new K.rY(Le))}gt&&this.dashboard.panels.push(gt),gt&&Ge.collapsed||(q+=Ie)}}}function N(ee){return(0,t.isString)(ee)&&(ee=parseInt(ee.replace("px",""),10)),ee<v.AV&&(ee=v.AV),Math.ceil(ee/(v.K3+v.hD))}class z{constructor(le,q=v.cz,fe=0){this.area=new Array(q).fill(0),this.yPos=fe,this.height=le}reset(){this.area.fill(0)}addPanel(le){for(let q=le.x;q<le.x+le.w;q++)(!this.area[q]||le.y+le.h-this.yPos>this.area[q])&&(this.area[q]=le.y+le.h-this.yPos);return this.area}getPanelPosition(le,q,fe=!1){let Z,ne,re;for(let ve=this.area.length-1;ve>=0&&this.height-this.area[ve]>0;ve--)if(ne===void 0)ne=ve;else if(ve<this.area.length-1&&this.area[ve]<=this.area[ve+1])Z=ve;else break;if(Z!==void 0&&ne!==void 0&&ne-Z>=q-1){const ve=(0,t.max)(this.area.slice(Z));re={x:Z,y:ve}}else return fe?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(le,q,!0));return re}}function G(ee){let le=ee.url;return!le&&ee.dashboard&&(le=`dashboard/db/${m.Z.slugifyForUrl(ee.dashboard)}`),!le&&ee.dashUri&&(le=`dashboard/${ee.dashUri}`),le||(le="/"),ee.keepTime&&(le=l.Cj.appendQueryToUrl(le,`$${f.W.keepTime}`)),ee.includeVars&&(le=l.Cj.appendQueryToUrl(le,`$${f.W.includeVars}`)),ee.params&&(le=l.Cj.appendQueryToUrl(le,ee.params)),{url:le,title:ee.title,targetBlank:ee.targetBlank}}function I(ee){const le=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return ee.replace(le,(q,fe,Z,ne,re,ve)=>fe?"__series.name":Z?"${__series.name}":ne?"__value.time":re?"__field.name":ve?"${__field.name}":q)}function V(ee){if(h.vc.panels["grafana-singlestat-panel"])return ee.type="grafana-singlestat-panel",ee;let le=!1;return ee.changePlugin||(le=!0,ee=new K.rY(ee)),ee.plugin={angularPanelCtrl:{}},ee.gauge?.show?(x.plugin.meta=h.vc.panels.gauge,ee.changePlugin(x.plugin)):(A.plugin.meta=h.vc.panels.stat,ee.changePlugin(A.plugin)),le?ee.getSaveModel():ee}function H(ee,le){if(le.returnDefaultAsNull&&(ee==null||ee==="default"))return null;if((0,s.cv)(ee))return ee;const q=(0,p.F)().getInstanceSettings(ee);return q?(0,s.iU)(q):{uid:ee}}function Q(ee,le,q){if(ee.transformations){const fe=[];for(const Z of ee.transformations)fe.push(Z),Z.id===le&&fe.push({...q});ee.transformations=fe}return ee}function oe(ee){const le=ee.fieldConfig;if(!le)return ee;if(le.defaults&&le.defaults.mappings&&(le.defaults.mappings=j(le.defaults.mappings,le.defaults.thresholds)),Array.isArray(le.overrides))for(const q of le.overrides)for(const fe of q.properties)fe.id==="mappings"&&(fe.value=j(fe.value));return ee}function se(ee){return ee.hasOwnProperty("dimensions")&&ee.hasOwnProperty("namespace")&&ee.hasOwnProperty("region")&&ee.hasOwnProperty("metricName")}function ie(ee){return ee.hasOwnProperty("dimensions")&&ee.hasOwnProperty("namespace")&&ee.hasOwnProperty("region")&&ee.hasOwnProperty("prefixMatching")&&ee.hasOwnProperty("statistics")}function j(ee,le){if(!ee)return;const q={type:d.H.ValueToText,options:{}},fe=[];for(const Z of ee){if(Z.type&&Z.options){Z.type===d.H.ValueToText?q.options={...q.options,...Z.options}:fe.push(Z);continue}let ne;const re=parseFloat(Z.text);if(le&&!isNaN(re)){const ve=(0,r.m1)(re,le.steps);ve&&ve.color&&(ne=ve.color)}switch(Z.type){case 1:Z.value!=null&&(Z.value==="null"?fe.push({type:d.H.SpecialValue,options:{match:d.e.Null,result:{text:Z.text,color:ne}}}):q.options[String(Z.value)]={text:Z.text,color:ne});break;case 2:fe.push({type:d.H.RangeToText,options:{from:+Z.from,to:+Z.to,result:{text:Z.text,color:ne}}});break}}return Object.keys(q.options).length>0&&fe.unshift(q),fe}function de(ee){return(ee.type==="timeseries"||ee.type==="xychart")&&ee.options.tooltipOptions&&(ee.options={...ee.options,tooltip:ee.options.tooltipOptions},delete ee.options.tooltipOptions),ee}function ce(ee){return ee.type==="timeseries"&&ee.fieldConfig?.defaults.custom?.axisPlacement===g.LB.Hidden&&(ee.fieldConfig={...ee.fieldConfig,overrides:[...ee.fieldConfig.overrides,{matcher:{id:c.mi.byType,options:a.fS.time},properties:[{id:"custom.axisPlacement",value:g.LB.Auto}]}]}),ee}},82302:(Y,O,e)=>{"use strict";e.d(O,{f:()=>B});var t=e(82897),n=e(53376),o=e(50444),s=e(77258),l=e(67483),f=e(35645),d=e(82378),r=e(16514),c=e(84952),a=e(82002);function u(L){return(0,t.isArray)(L)?L.map(u):(0,t.isPlainObject)(L)?Object.keys(L).sort().reduce((N,z)=>{const G=L[z];return G!=null&&(N[z]=u(G)),N},{}):L}var i=e(22323),p=e(85803),g=e(87095),y=e(27876),E=e(45984),h=e(77582),v=e(3153),C=e(10672),m=e(92624),D=e(19349),P=e(86899);const b=new Set(["gridPos","title","description","transparent"]);function M(L,N){const z=[],G={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:z};let I=0;const V=new Map;for(let H of N){let{id:Q}=H;Q||(I||(I=A([L,N])),Q=I++,H={...H,id:Q}),V.set(Q,H)}for(const H of L){const Q=V.get(H.id);if(!Q){G.changed=!0,G.actions.remove.push(H.id),H.destroy();continue}if(V.delete(H.id),Q===H){z.push(H),G.actions.noop.push(H.id);continue}if(H.type===Q.type){const se=H.getSaveModel();let ie=!0,j=!1;for(const[de,ce]of Object.entries(Q))if(!(0,t.isEqualWith)(ce,se[de],x))if(G.changed=!0,ie=!1,b.has(de))H[de]=ce,j=!0;else{j=!1;break}if(ie){z.push(H),G.actions.noop.push(H.id);continue}if(j){z.push(H),G.actions.update.push(H.id);continue}}H.destroy();const oe=new P.r(Q);oe.key=`${oe.id}-update-${Date.now()}`,z.push(oe),G.changed=!0,G.actions.replace.push(H.id)}for(const H of V.values())z.push(new P.r(H)),G.changed=!0,G.actions.add.push(H.id);return G}function x(L,N){if(L==null&&(N===1/0||N===-1/0||N==null)||N==null&&(L===1/0||L===-1/0||L==null))return!0}function A(L){let N=0;for(const z of L)for(const G of z)G.id>N&&(N=G.id);return N+1}var T=e(7592),S=e(96161);function U(L,N){return L.repeatDirection===c.yM?!1:N.gridPos.x>=L.gridPos.x+L.gridPos.w&&N.gridPos.y===L.gridPos.y}function R(L){for(const N of L)if(delete N.scopedVars,N.panels?.length)for(const z of N.panels)delete z.scopedVars}const F=class{constructor(L,N,z){this.timeRangeUpdatedDuringEdit=!1,this.getVariablesFromState=z?.getVariablesFromState??g.gt,this.events=new o.F,this.id=L.id||null,this.uid=L.uid||null,this.revision=L.revision??void 0,this.title=L.title??"No Title",this.description=L.description,this.tags=L.tags??[],this.style=L.style??"dark",this.timezone=L.timezone??"",this.weekStart=L.weekStart??"",this.editable=L.editable!==!1,this.graphTooltip=L.graphTooltip||0,this.time=L.time??{from:"now-6h",to:"now"},this.timepicker=L.timepicker??{},this.liveNow=Boolean(L.liveNow),this.templating=this.ensureListExist(L.templating),this.annotations=this.ensureListExist(L.annotations),this.refresh=L.refresh||"",this.snapshot=L.snapshot,this.schemaVersion=L.schemaVersion??0,this.fiscalYearStartMonth=L.fiscalYearStartMonth??0,this.version=L.version??0,this.links=L.links??[],this.gnetId=L.gnetId||null,this.panels=(0,t.map)(L.panels??[],G=>new S.rY(G)),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(N),this.updateSchema(L),(z?.autoMigrateOldPanels||!f.v.angularSupportEnabled||f.v.featureToggles.autoMigrateOldPanels)&&this.panels.forEach(G=>{const I=S.G7[G.type];!G.autoMigrateFrom&&I&&(G.autoMigrateFrom=G.type,G.type=I)}),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(h.h$.subscribe(C.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(h.h$.subscribe(C.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(h.h$.subscribe(C.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(N=>N.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:r.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(L){L=L||{},L.canShare=L.canShare!==!1,L.canSave=L.canSave!==!1,L.canStar=L.canStar!==!1,L.canEdit=L.canEdit!==!1,L.canDelete=L.canDelete!==!1,L.showSettings=L.canEdit,L.canMakeEditable=L.canSave&&!this.editable,L.hasUnsavedFolderChange=!1,this.editable||(L.canEdit=!1,L.canDelete=!1,L.canSave=!1),this.meta=L}getSaveModelClone(L){const N=(0,t.defaults)(L||{},{saveVariables:!0,saveTimerange:!0});let z={};for(const G in this)F.nonPersistedProperties[G]||!this.hasOwnProperty(G)||(z[G]=(0,t.cloneDeep)(this[G]));return this.updateTemplatingSaveModelClone(z,N),N.saveTimerange||(z.time=this.originalTime),z.panels=this.getPanelSaveModels(),z=u(z),z.getVariables=()=>z.templating.list,z}updatePanels(L){const N=M(this.panels,L??[]);return N.changed&&(this.panels=N.panels??[],this.sortPanelsByGridPos(),this.events.publish(new E._B)),N}getPanelSaveModels(){return this.panels.filter(L=>this.isSnapshotTruthy()||!(L.type==="add-panel"||L.repeatPanelId||L.repeatedByRow)).map(L=>{if(L.libraryPanel){const{id:N,title:z,libraryPanel:G,gridPos:I}=L;return{id:N,title:z,gridPos:I,libraryPanel:{uid:G.uid,name:G.name}}}return this.panelInEdit&&this.panelInEdit.id===L.id?this.panelInEdit.getSaveModel():L.getSaveModel()}).map(L=>(this.isSnapshotTruthy()||(delete L.scopedVars,L.type==="row"&&L.panels&&L.panels.length>0&&(L.panels=L.panels.filter(N=>!N.repeatPanelId).map(N=>(delete N.scopedVars,N)))),L))}updateTemplatingSaveModelClone(L,N){const z=this.originalTemplating,G=this.getVariablesFromState(this.uid);if(L.templating={list:G.map(I=>i.z.get(I.type).getSaveModel(I,N.saveVariables))},!N.saveVariables)for(const I of L.templating.list){const V=z.find(({name:H,type:Q})=>H===I.name&&Q===I.type);V&&(I.type==="adhoc"?I.filters=V.filters:I.current=V.current)}}timeRangeUpdated(L){this.events.publish(new d.md(L)),(0,v.WI)((0,p.DU)(this.uid,L)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(L={refreshAll:!0,panelIds:[]}){if(this.events.publish(new d.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(L.refreshAll||L.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const N of this.panels)!this.otherPanelInFullscreen(N)&&(L.refreshAll||L.panelIds.includes(N.id))&&N.refresh()}render(){this.events.publish(new E._z);for(const L of this.panels)L.render()}panelInitialized(L){const N=L.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(L)&&!N&&L.refresh()}otherPanelInFullscreen(L){return(this.panelInEdit||this.panelInView)&&!(L.isViewing||L.isEditing)}initEditPanel(L){return(0,D.$t)().stopAutoRefresh(),this.panelInEdit=L.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,D.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(L){this.panelInView=L,L.setIsViewing(!0)}exitViewPanel(L){this.panelInView=void 0,L.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const L=new Set;let N=this.getNextPanelId();for(const z of this.panelIterator())(!z.id||L.has(z.id))&&(z.id=N++),L.add(z.id)}ensureListExist(L={}){return L.list??=[],L}getNextPanelId(){let L=0;for(const N of this.panelIterator())N.id>L&&(L=N.id);return L+1}*panelIterator(){for(const L of this.panels){yield L;const N=L.panels??[];for(const z of N)yield z}}forEachPanel(L){for(let N=0;N<this.panels.length;N++)L(this.panels[N],N)}getPanelById(L){return this.panelInEdit&&this.panelInEdit.id===L?this.panelInEdit:this.panels.find(N=>N.id===L)??null}canEditPanel(L){return Boolean(this.meta.canEdit&&L&&!L.repeatPanelId&&L.type!=="row")}canEditPanelById(L){return this.canEditPanel(this.getPanelById(L))}addPanel(L){L.id=this.getNextPanelId(),this.panels.unshift(new S.rY(L)),this.sortPanelsByGridPos(),this.events.publish(new E._B)}updateMeta(L){this.meta={...this.meta,...L},this.events.publish(new E.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((L,N)=>L.gridPos.y===N.gridPos.y?L.gridPos.x-N.gridPos.x:L.gridPos.y-N.gridPos.y)}clearUnsavedChanges(){for(const L of this.panels)L.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const L=this.panels.find(N=>N.hasChanged);return Boolean(L)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;R(this.panels);const L=this.panels.filter(N=>(!N.repeat||N.repeatedByRow)&&N.repeatPanelId);(0,t.pull)(this.panels,...L),L.map(N=>N.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let L=0;L<this.panels.length;L++){const N=this.panels[L];N.repeat&&this.repeatPanel(N,L)}this.sortPanelsByGridPos(),this.events.publish(new E._B)}}cleanUpRowRepeats(L){const N=L.map(G=>G.id),z=L.filter(G=>!G.repeat&&G.repeatPanelId&&N.includes(G.repeatPanelId));(0,t.pull)(L,...z),(0,t.pull)(this.panels,...z)}processRowRepeats(L){if(this.isSnapshotTruthy()||!this.hasVariables())return;let N=L.panels??[];if(!L.collapsed){const z=this.panels.findIndex(G=>G.id===L.id);N=this.getRowPanels(z)}this.cleanUpRowRepeats(N);for(const z of N)if(z.repeat){const G=this.panels.findIndex(I=>I.id===z.id);this.repeatPanel(z,G)}}getPanelRepeatClone(L,N,z){if(N===0)return L;const G=L.getSaveModel();G.id=this.getNextPanelId();const I=new S.rY(G);return this.panels.splice(z+N,0,I),I.repeatPanelId=L.id,I.repeat=void 0,this.panelInView?.id===I.id&&(I.setIsViewing(!0),this.panelInView=I),I}getRowRepeatClone(L,N,z){if(N===0){if(!L.collapsed){const H=this.getRowPanels(z);L.panels=H}return L}const G=new S.rY(L.getSaveModel());let I,V;return L.collapsed?(I=(0,t.cloneDeep)(L.panels)??[],G.panels=I,V=z+N):(I=this.getRowPanels(z),G.panels=I.map(H=>H.getSaveModel()),V=z+(I.length+1)*N),this.panels.splice(V,0,G),this.updateRepeatedPanelIds(G),G}repeatPanel(L,N){const z=this.getPanelRepeatVariable(L);if(!z)return;if(L.type==="row"){this.repeatRow(L,N,z);return}const G=this.getSelectedVariableOptions(z),I=L.maxPerRow||4;let V=0,H=L.gridPos.y;for(let oe=0;oe<G.length;oe++){const se=G[oe];let ie;ie=this.getPanelRepeatClone(L,oe,N),ie.scopedVars??={},ie.scopedVars[z.name]=se,L.repeatDirection===c.OA?(oe>0&&(H+=ie.gridPos.h),ie.gridPos.y=H):(ie.gridPos.w=Math.max(c.cz/G.length,c.cz/I),ie.gridPos.x=V,ie.gridPos.y=H,V+=ie.gridPos.w,V+ie.gridPos.w>c.cz&&(V=0,H+=ie.gridPos.h))}const Q=H-L.gridPos.y;if(Q>0){const oe=N+G.length;for(const se of this.panels.slice(oe))U(L,se)||(se.gridPos.y+=Q)}}repeatRow(L,N,z){const G=this.getSelectedVariableOptions(z);let I=L.gridPos.y;function V(H,Q){H.scopedVars??={},H.scopedVars[z.name]=Q}for(let H=0;H<G.length;H++){const Q=G[H],oe=this.getRowRepeatClone(L,H,N);V(oe,Q);const se=this.getRowHeight(oe),ie=oe.panels||[];let j;if(L.collapsed){for(const de of ie)V(de,Q),H>0&&this.updateRepeatedPanelIds(de,!0);oe.gridPos.y+=H,I+=H,j=N+H+1}else{const de=N+(ie.length+1)*H+1;ie.forEach((ce,ee)=>{if(V(ce,Q),H>0){const le=new S.rY(ce);this.updateRepeatedPanelIds(le,!0),le.gridPos.y+=se*H,this.panels.splice(de+ee,0,le)}}),oe.panels=[],oe.gridPos.y+=se*H,I+=se,j=de+ie.length}if(G.length>1)for(const de of this.panels.slice(j))de.gridPos.y+=I}}updateRepeatedPanelIds(L,N){return L.repeatPanelId=L.id,L.id=this.getNextPanelId(),N?L.repeatedByRow=!0:L.repeat=void 0,L}getSelectedVariableOptions(L){let N;return(0,m.HY)(L)?N=L.options.slice(1,L.options.length):N=(0,t.filter)(L.options,{selected:!0}),N}getRowHeight(L){if(!L.panels||L.panels.length===0)return 0;const N=L.gridPos.y,z=(0,t.map)(L.panels,"gridPos"),G=(0,t.maxBy)(z,I=>I.y+I.h);return G.y+G.h-N}removePanel(L){this.panels=this.panels.filter(N=>N!==L),this.events.publish(new E._B)}removeRow(L,N){(!N&&L.collapsed||N&&!L.collapsed)&&this.toggleRow(L),this.removePanel(L)}expandRows(){const L=this.panels.filter(N=>N.type==="row"&&N.collapsed);for(const N of L)this.toggleRow(N)}collapseRows(){const L=this.panels.filter(N=>N.type==="row"&&!N.collapsed);for(const N of L)this.toggleRow(N)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(L=>L.hide!==2)||this.annotations.list.some(L=>!L.hide)}getPanelInfoById(L){const N=this.panels.findIndex(z=>z.id===L);return N>=0?{panel:this.panels[N],index:N}:null}duplicatePanel(L){const N=L.getSaveModel();return N.id=this.getNextPanelId(),delete N.repeat,delete N.repeatIteration,delete N.repeatPanelId,delete N.scopedVars,N.alert&&delete N.thresholds,delete N.alert,L.gridPos.x+L.gridPos.w*2<=c.cz?N.gridPos.x+=L.gridPos.w:N.gridPos.y+=L.gridPos.h,this.addPanel(N),N}formatDate(L,N){return(0,s.dq)(L,{format:N,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const L of this.panels)L.destroy()}toggleRow(L){const N=(0,t.indexOf)(this.panels,L);if(!L.collapsed){const I=this.getRowPanels(N);(0,t.pull)(this.panels,...I),L.panels=I.map(V=>V.getSaveModel()),L.collapsed=!0,I.some(V=>V.hasChanged)&&L.configRev++,this.events.publish(new E._B);return}L.collapsed=!1;const z=L.panels??[],G=z.some(I=>I.repeat);if(z.length>0){const V=(z[0].gridPos.y??L.gridPos.y)-(L.gridPos.y+L.gridPos.h);let H=N+1,Q=L.gridPos.y;for(const se of z)se.gridPos.y??(se.gridPos.y=L.gridPos.y),se.gridPos.y-=V,this.panels.splice(H,0,new S.rY(se)),H+=1,Q=Math.max(Q,se.gridPos.y+se.gridPos.h);const oe=Q-L.gridPos.y-1;for(const se of this.panels.slice(H))se.gridPos.y+=oe;L.panels=[],G&&this.processRowRepeats(L)}this.sortPanelsByGridPos(),this.events.publish(new E._B)}getRowPanels(L){const N=this.panels.slice(L+1),z=N.findIndex(I=>I.type==="row");return N.slice(0,z>=0?z:this.panels.length)}on(L,N){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(L,N)}off(L,N){console.log("DashboardModel.off is deprecated"),this.events.off(L,N)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(L){return(0,s.E8)(L,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:a.Vt?.user?.timezone}updateSchema(L){new T.o(this).updateSchema(L)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:L,originalTime:N}=this;return!((0,t.isEqual)(L,N)||(0,t.isEqual)((0,l.CQ)(L?.from),(0,l.CQ)(N?.from))&&(0,t.isEqual)((0,l.CQ)(L?.to),(0,l.CQ)(N?.to)))}resetOriginalVariables(L=!1){if(L){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(L,N){const z=Math.max(...this.panels.map(oe=>oe.gridPos.h+oe.gridPos.y)),G=55,I=20;let V=L-G-I;N&&N!==y.KioskMode.TV&&(V+=G);const H=Math.floor(V/(c.K3+c.hD)),Q=z/H;for(const oe of this.panels)oe.gridPos.y=Math.round(oe.gridPos.y/Q)||1,oe.gridPos.h=Math.round(oe.gridPos.h/Q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(y.CoreEvents.nq)}getPanelByUrlId(L){const N=parseInt(L??"0",10),z=this.panels.filter(G=>G.collapsed);for(const G of z)G.panels?.some(V=>V.id===N)&&this.toggleRow(G);return this.getPanelById(N)}toggleLegendsForAll(){const L=this.panels.filter(K),N=L.filter(I=>I.legend.show).length,z=L.length-N,G=N>=z;for(const I of L)I.legend.show=!G,I.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(L){let N=!0;return a.Vt.accessControlEnabled()&&(L?N=!!this.meta.annotationsPermissions?.dashboard.canEdit:N=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&N}canDeleteAnnotations(L){let N=!0;return a.Vt.accessControlEnabled()&&(L?N=!!this.meta.annotationsPermissions?.dashboard.canDelete:N=!!this.meta.annotationsPermissions?.organization.canDelete),N&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(N=>N.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!a.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(L,N){!(0,t.isEqual)(L?.gridPos,N?.gridPos)&&this.events.publish(new E._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(L){return this.getVariablesFromState(this.uid).find(N=>N.name===L.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(L,N){if(L.length!==N.length)return!1;const z=N.map(G=>({name:G.name,type:G.type,current:(0,t.cloneDeep)(G.current),filters:(0,t.cloneDeep)(G.filters)}));return!(0,t.isEqual)(z,L)}cloneVariablesFrom(L){return L.map(N=>({name:N.name,type:N.type,current:(0,t.cloneDeep)(N.current),filters:(0,t.cloneDeep)(N.filters)}))}variablesTimeRangeProcessDoneHandler(L){const N=L.payload.variableIds.length>0;this.variablesChangedHandler(new C.x9({panelIds:[],refreshAll:!0}),N)}variablesChangedHandler(L,N=!0){if(N&&this.processRepeats(),L.payload.refreshAll||(0,D.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=L.payload.panelIds.filter(z=>z!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(L.payload)}variablesChangedInUrlHandler(L){this.templateVariableValueUpdated(),this.startRefresh(L.payload)}};let B=F;B.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0};function K(L){return Boolean(L.legend)}},96161:(Y,O,e)=>{"use strict";e.d(O,{G7:()=>h,Jg:()=>D,rY:()=>C});var t=e(82897),n=e.n(t),o=e(44288),s=e(50444),l=e(206),f=e(16936),d=e(82378),r=e(20308),c=e(47694),a=e(55935),u=e(99822),i=e(45984),p=e(49003);const g={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0},y={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},E={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},h={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},v={"heatmap-new":"heatmap"};class C{constructor(b){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(b),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,o.Z)()}restoreModel(b){for(const x in this)g[x]||!this.hasOwnProperty(x)||b[x]||typeof this[x]!="function"&&typeof this[x]!="symbol"&&delete this[x];for(const x in b)this[x]=b[x];const M=v[this.type];M&&(this.autoMigrateFrom=this.type,this.type=M),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(E)),this.ensureQueryIds()}generateNewKey(){this.key=(0,o.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const b of this.targets)b.refId||(b.refId=(0,u.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(b){this.options=b,this.configRev++,this.events.publish(new i.Wj),this.render()}updateFieldConfig(b){this.fieldConfig=b,this.configRev++,this.events.publish(new i.Wj),this.resendLastResult(),this.render()}getSaveModel(){const b={};for(const M in this)g[M]||!this.hasOwnProperty(M)||(0,t.isEqual)(this[M],E[M])||(b[M]=(0,t.cloneDeep)(this[M]));return this.type==="row"&&this.panels&&this.panels.length>0&&(b.panels=this.panels.map(M=>{if(M.libraryPanel){const{id:x,title:A,libraryPanel:T,gridPos:S}=M;return{id:x,title:A,gridPos:S,libraryPanel:{uid:T.uid,name:T.name}}}return M})),b}setIsViewing(b){this.isViewing=b}updateGridPos(b,M=!0){b.x===this.gridPos.x&&b.y===this.gridPos.y&&b.h===this.gridPos.h&&b.w===this.gridPos.w||(this.gridPos.x=b.x,this.gridPos.y=b.y,this.gridPos.w=b.w,this.gridPos.h=b.h,M&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:b,dashboardTimezone:M,timeData:x,width:A,publicDashboardAccessToken:T}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:b,publicDashboardAccessToken:T,timezone:M,timeRange:x.timeRange,timeInfo:x.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(A),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?l.zj.PanelEditor:this.isViewing?l.zj.PanelViewer:l.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new d.U5)}render(){this.hasRefreshed?this.events.publish(new i._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((b,M)=>g[M]||y[M]?b:{...b,[M]:this[M]},{})}restorePanelOptions(b){const M=this.cachedPluginOptions[b];M&&(Object.keys(M.properties).map(x=>{this[x]=M.properties[x]}),this.fieldConfig=(0,f.__)(this.fieldConfig,M.fieldConfig))}applyPluginOptionDefaults(b,M){const x=(0,f.d4)({plugin:b,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:M});this.fieldConfig=x.fieldConfig,this.options=x.options}pluginLoaded(b){this.plugin=b;const M=m(b);if(this.autoMigrateFrom){const x=h[this.autoMigrateFrom]!=null,A=this.getOptionsToRemember(),T=this.autoMigrateFrom,S=this.type;this.clearPropertiesBeforePluginChange(),this.type=S,this.plugin=b,this.callPanelTypeChangeHandler(b,T,A,x)}b.onPanelMigration&&M!==this.pluginVersion&&(this.options=b.onPanelMigration(this),this.pluginVersion=M),this.applyPluginOptionDefaults(b,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const b of(0,t.keys)(this))y[b]||delete this[b];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,f.aS)(this.fieldConfig.overrides,f._k)}}callPanelTypeChangeHandler(b,M,x,A){if(b.onPanelTypeChanged){const T=A?{angular:x}:x.options;Object.assign(this.options,b.onPanelTypeChanged(this,M,T,this.fieldConfig))}}changePlugin(b){const M=b.meta.id,x=this.getOptionsToRemember(),A=this.fieldConfig,T=this.type,S=this.isAngularPlugin()||Boolean(h[T]);this.cachedPluginOptions[T]={properties:x,fieldConfig:A},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(M),this.callPanelTypeChangeHandler(b,T,x,S),this.type=M,this.plugin=b,this.configRev++,this.applyPluginOptionDefaults(b,!0),b.onPanelMigration&&(this.pluginVersion=m(b))}updateQueries(b){const{dataSource:M}=b;this.datasource={uid:M.uid,type:M.type},this.cacheTimeout=b.cacheTimeout,this.queryCachingTTL=b.queryCachingTTL,this.timeFrom=b.timeRange?.from,this.timeShift=b.timeRange?.shift,this.hideTimeOverride=b.timeRange?.hide,this.interval=b.minInterval,this.maxDataPoints=b.maxDataPoints,this.targets=b.queries,this.configRev++,this.events.publish(new i.pO)}addQuery(b){b=b||{refId:"A"},b.refId=(0,u.Hs)(this.targets),this.targets.push(b),this.configRev++}changeQuery(b,M){b.refId=this.targets[M].refId,this.configRev++,this.targets=this.targets.map((x,A)=>A===M?b:x)}getEditClone(){const b=this.getSaveModel(),M=new C(b);M.isEditing=!0,M.plugin=this.plugin;const x=this.getQueryRunner();return M.getQueryRunner().useLastResultFrom(x),M}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:c.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new p.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(b){this.transformations=b,this.resendLastResult(),this.configRev++,this.events.publish(new i.Xw)}setProperty(b,M){this[b]=M,this.configRev++,b==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(b,M,x){const A=this.getQueryRunner().getLastRequest(),T=Object.assign({},this.scopedVars,A?.scopedVars,M);return(0,r.J)().replace(b,T,x)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(b){for(const[M,x]of Object.entries(b.model)){switch(M){case"id":case"gridPos":case"libraryPanel":continue}this[M]=x}this.libraryPanel=b}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function m(P){return P&&P.meta.info.version?P.meta.info.version:c.ZP.buildInfo.version}function D(P){const b={};return Object.entries(P).filter(([M,x])=>!g[M]&&P.hasOwnProperty(M)&&!(0,t.isEqual)(x,E[M])).forEach(([M,x])=>{b[M]=x}),(0,a.Xh)(b)}},86977:(Y,O,e)=>{"use strict";e.d(O,{$j:()=>E,Qk:()=>g,RF:()=>p,Yq:()=>y,f4:()=>m,fG:()=>h,lw:()=>v,qm:()=>u,tM:()=>C});var t=e(54899),n=e(659),o=e(60499),s=e(30992),l=e(46732),f=e(54294),d=e(85805),r=e(85803),c=e(19349),a=e(58790);function u(D){return async P=>{const b=await(0,t.i)().get(`/api/dashboards/id/${D}/permissions`);P((0,a.O0)(b))}}function i(D){return{userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}}function p(D,P,b){return async(M,x)=>{const{dashboard:A}=x(),T=[];for(const S of A.permissions){if(S.inherited)continue;const U=i(S);P===S&&(U.permission=b),T.push(U)}await(0,t.i)().post(`/api/dashboards/id/${D}/permissions`,{items:T}),await M(u(D))}}function g(D,P){return async(b,M)=>{const x=M().dashboard,A=[];for(const T of x.permissions)T.inherited||T===P||A.push(i(T));await(0,t.i)().post(`/api/dashboards/id/${D}/permissions`,{items:A}),await b(u(D))}}function y(D,P){return async(b,M)=>{const{dashboard:x}=M(),A=[];for(const T of x.permissions)T.inherited||A.push(i(T));A.push({userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}),await(0,t.i)().post(`/api/dashboards/id/${D}/permissions`,{items:A}),await b(u(D))}}function E(D,P){return async b=>{await(0,t.i)().post("/api/dashboards/import",D),b((0,n.$l)((0,o.AT)("Dashboard Imported",P))),b((0,d.m3)())}}function h(D){return async P=>{await(0,t.i)().delete(`/api/dashboards/uid/${D}`),P((0,d.m3)())}}const v=()=>(D,P)=>{const M=P().dashboard.getModel();M&&(M.destroy(),D((0,r.wX)(M.uid))),(0,c.$t)().stopAutoRefresh(),D((0,a.sG)()),D((0,l.Vl)()),s.H.leave()},C=D=>P=>{P((0,f.YT)(D)),(0,c.$t)().refreshTimeModel()},m=D=>P=>{P((0,f.zW)(D)),(0,c.$t)().refreshTimeModel()}},86899:(Y,O,e)=>{"use strict";e.d(O,{f:()=>t.f,r:()=>n.rY});var t=e(82302),n=e(96161)},87464:(Y,O,e)=>{"use strict";e.d(O,{ZQ:()=>F,mV:()=>R,f1:()=>L,$M:()=>K});var t=e(72196),n=e(67483),o=e(23588),s=e(37932),l=e(35645),f=e(54899),d=e(659),r=e(18271),c=e(60499),a=e(29930),u=e(58379),i=e(87449),p=e(9398),g=e(19349),y=e(61986),E=e(30992),h=e(10079),v=e(92624),C=e(27876),m=e(87865),D=e(85803),P=e(87095),b=e(82302),M=e(75552),x=e(41818);function A(N){const z={dashboardId:N.id,dashboardName:N.title,dashboardUid:N.uid,folderName:N.meta.folderTitle,eventName:M.ct.DashboardView};(0,x.r_)(z)}var T=e(58790);async function S(N,z,G){const I=u.Z.getObject(B);if(I)return L(),I;try{switch(N.routeName){case C.DashboardRoutes.Home:{const V=await a.ae.get("/api/dashboards/home");if(V.redirectUri){const H=t.u.stripBaseFromUrl(V.redirectUri);return s.E1.replace(H),null}return V.meta.canSave=!1,V.meta.canShare=!1,V.meta.canStar=!1,V}case C.DashboardRoutes.Public:return await i.pD.loadDashboard("public",N.urlSlug,N.accessToken);case C.DashboardRoutes.Normal:{const V=await i.pD.loadDashboard(N.urlType,N.urlSlug,N.urlUid);if(l.v.featureToggles.nestedFolders&&V.meta.folderUid&&await z((0,y.Pb)(V.meta.folderUid)),N.fixUrl&&V.meta.url&&!h.r0.isPlaying){const H=t.u.stripBaseFromUrl(V.meta.url),Q=s.E1.getLocation().pathname;H!==Q&&(s.E1.replace({...s.E1.getLocation(),pathname:H}),console.log("not correct url correcting",H,Q))}return V}case C.DashboardRoutes.New:return F(N.urlFolderUid,N.panelType);case C.DashboardRoutes.Path:{const V=N.urlSlug??"";return await i.pD.loadDashboard(C.DashboardRoutes.Path,V,V)}default:throw{message:"Unknown route "+N.routeName}}}catch(V){return(0,f.kW)(V)&&V.cancelled||(z((0,T.jA)({message:"Failed to fetch dashboard",error:V})),console.error(V)),null}}const U=(N,z={})=>(N.forEach(G=>{G.panels?U(G.panels,z):G.targets&&G.targets.forEach(I=>{I.datasource?.type&&(z[I.datasource.type]?z[I.datasource.type].push(I):z[I.datasource.type]=[I])})}),z);function R(N){return async(z,G)=>{z((0,T.sf)());const I=await S(N,z,G);if(!I)return;z((0,T.Nv)());let V;try{V=new b.f(I.dashboard,I.meta)}catch(de){z((0,T.jA)({message:"Failed create dashboard model",error:de})),console.error(de);return}const H=G(),Q=s.E1.getSearchObject();Q.orgId||s.E1.partial({orgId:H.user.orgId},!0);const oe=(0,g.$t)();(0,p.h4)().setCurrent(V),oe.init(V);const ie=(0,v.mn)(N.urlUid??V.uid);if(await z((0,D.LX)(ie,V)),(0,m.Tl)({dashboard:V,timeSrv:oe}).run({dashboard:V,range:oe.timeRange()}),(0,P.cp)(G())===ie&&G().dashboard.initPhase===C.DashboardInitPhase.Services){try{V.processRepeats(),Q.autofitpanels&&V.autoFitPanels(window.innerHeight,Q.kiosk),N.keybindingSrv.setupDashboardBindings(V)}catch(de){de instanceof Error&&z((0,d.$l)((0,c.t_)("Dashboard init failed",de))),console.error(de)}N.routeName!==C.DashboardRoutes.New?(A(V),E.H.watch(V.uid)):E.H.leave(),V.weekStart!==""?(0,n.Ls)(V.weekStart):(0,n.Ls)(l.v.bootData.user.weekStart),r.Z.publish(new o.Pl({dashboardId:V.uid,orgId:H.user.orgId,userId:H.user.user?.id,grafanaVersion:l.v.buildInfo.version,queries:U(V.panels)})),z((0,T.dS)(V))}}}function F(N,z){const G=l.v.featureToggles.emptyDashboardPage?[]:[{type:z??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}],I={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:G}};return N&&(I.meta.folderUid=N),I}const B="DASHBOARD_FROM_LS_KEY";function K(N){u.Z.setObject(B,N)}function L(){u.Z.delete(B)}},58790:(Y,O,e)=>{"use strict";e.d(O,{Nv:()=>i,O0:()=>r,Rd:()=>y,ZP:()=>h,dS:()=>u,jA:()=>a,sG:()=>p,sf:()=>c,tq:()=>g});var t=e(62992),n=e(30670),o=e(2024),s=e(27876),l=e(82302);const f={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},d=(0,t.oM)({name:"dashboard",initialState:f,reducers:{loadDashboardPermissions:(v,C)=>{v.permissions=(0,o.A)(C.payload)},dashboardInitFetching:v=>{v.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:v=>{v.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(v,C)=>{v.getModel=()=>C.payload,v.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(v,C)=>{v.initPhase=s.DashboardInitPhase.Failed,v.initError=C.payload,v.getModel=()=>new l.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:v=>{v.initPhase=s.DashboardInitPhase.NotStarted,v.initError=null,v.getModel=()=>null},addPanel:(v,C)=>{},setInitialDatasource:(v,C)=>{v.initialDatasource=C.payload}}}),{loadDashboardPermissions:r,dashboardInitFetching:c,dashboardInitFailed:a,dashboardInitCompleted:u,dashboardInitServices:i,cleanUpDashboard:p,addPanel:g,setInitialDatasource:y}=d.actions,h={dashboard:d.reducer}},663:(Y,O,e)=>{"use strict";e.d(O,{Dh:()=>a,LU:()=>d,L_:()=>r,RB:()=>c,uZ:()=>u});var t=e(82897),n=e.n(t),o=e(47694),s=e(84952),l=e(58379),f=e(2476);function d(i,p){const g={type:"timeseries",title:"Panel Title",gridPos:(0,f.lg)(i),datasource:p?{uid:p}:null,isNew:!0};return i.addPanel(g),g.id}function r(i){const p={type:"row",title:"Row title",gridPos:{x:0,y:0}};i.addPanel(p)}function c(i){const p={type:"add-library-panel",gridPos:(0,f.lg)(i)};i.addPanel(p)}function a(i,p){if(!p)return;const g=(0,f.lg)(i),y={type:p.id,title:"Panel Title",gridPos:{x:g.x,y:g.y,w:p.defaults.gridPos.w,h:p.defaults.gridPos.h}};p.defaults&&((0,t.defaults)(y,p.defaults),y.title=p.defaults.title,l.Z.delete(s.zF)),i.addPanel(y)}function u(){const i=(0,t.chain)(o.ZP.panels).filter({hideFromList:!1}).map(g=>g).value(),p=l.Z.get(s.zF);if(p){const g=JSON.parse(p),y=(0,t.find)(i,{id:g.type});if(y){const E=(0,t.cloneDeep)(y);return E.name=g.title,E.sort=-1,{...E,defaults:{...g}}}}}},57277:(Y,O,e)=>{"use strict";e.d(O,{y:()=>a});var t=e(83881),n=e(75849),o=e(86029),s=e(52666),l=e(76095),f=e(47694),d=e(56422),r=e(19349),c=e(2476);function a(u,i){const p=(0,t.F9)(u.snapshotData),g=new d.g,y={dashboard:i,range:(0,n.JK)()},E=g.canWork(y)?g.getAnnotationsInSnapshot(i,u.id):[],h=[(0,o.P)(E)];return{timeRange:(0,c.W1)(u,(0,r.$t)().timeRange()).timeRange,state:s.Gu.Done,series:(0,l.SM)({data:p,fieldConfig:{defaults:{},overrides:[]},replaceVariables:u.replaceVariables,fieldConfigRegistry:u.plugin.fieldConfigRegistry,theme:f.vc.theme2,timeZone:i.getTimezone()}),annotations:h}}},2476:(Y,O,e)=>{"use strict";e.d(O,{Kq:()=>P,Po:()=>D,W1:()=>A,WJ:()=>v,bY:()=>m,jN:()=>C,lg:()=>U,oe:()=>b,qw:()=>x});var t=e(82897),n=e.n(t),o=e(4063),s=e(47891),l=e(47406),f=e(20308),d=e(18271),r=e(47694),c=e(84952),a=e(58379),u=e(53818),i=e(96161),p=e(76647),g=e(81283),y=e(32294),E=e(3153),h=e(45984);const v=(R,F,B)=>{if(B!==!1){const K=F.alert&&!r.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,L=F.alert?"YES":void 0;d.Z.publish(new h.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:K,icon:"trash-alt",confirmText:L,yesText:"Remove",onConfirm:()=>v(R,F,!1)}));return}R.removePanel(F),(0,E.WI)((0,y.qj)(F.key))},C=(R,F)=>{R.duplicatePanel(F)},m=R=>{let F=R;R instanceof i.rY&&(F=R.getSaveModel()),a.Z.set(c.zF,JSON.stringify(F)),d.Z.emit(o.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},D=(R,F)=>{d.Z.publish(new h.Dn({component:u.ShareModal,props:{dashboard:R,panel:F}}))},P=(R,F)=>{d.Z.publish(new h.Dn({component:p.c,props:{panel:F,initialFolderUid:R.meta.folderUid,isOpen:!0}}))},b=R=>{d.Z.publish(new h.Dn({component:g.i,props:{onConfirm:()=>R.unlinkLibraryPanel(),isOpen:!0}}))},M=R=>{R.refresh()},x=R=>{const F={...R.options};F.legend.showLegend===!0?F.legend.showLegend=!1:F.legend.showLegend=!0,R.updateOptions(F)};function A(R,F){const B={timeInfo:"",timeRange:F};if(R.timeFrom){const K=(0,f.J)().replace(R.timeFrom,R.scopedVars),L=s.describeTextRange(K);if(L.invalid)return B.timeInfo="invalid time override",B;if((0,t.isString)(F.raw.from)){const N=l.parse(L.from);B.timeInfo=L.display,B.timeRange={from:N,to:l.parse(L.to),raw:{from:L.from,to:L.to}}}}if(R.timeShift){const K=(0,f.J)().replace(R.timeShift,R.scopedVars);if(s.describeTextRange(K).invalid)return B.timeInfo="invalid timeshift",B;const N="-"+K;B.timeInfo+=" timeshift "+N;const z=l.parseDateMath(N,B.timeRange.from,!1),G=l.parseDateMath(N,B.timeRange.to,!0);B.timeRange={from:z,to:G,raw:{from:z,to:G}}}return R.hideTimeOverride&&(B.timeInfo=""),B}function T(R){const B=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return R.maxDataPoints?R.maxDataPoints:Math.ceil(B*(R.gridPos.w/24))}function S(R,F){const B=R.plugin&&R.plugin.noPadding?0:config.theme.panelPadding*2,K=R.hasTitle()?config.theme.panelHeaderHeight:0;return F-K-B-PANEL_BORDER}function U(R){for(const B of R.panelIterator())B.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},74124:(Y,O,e)=>{"use strict";e.d(O,{O:()=>o});var t=e(67483),n=e(47406);const o=(s,l)=>{const f={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},d=l?l.getTimezone():void 0;return{from:n.parse(f.from,!1,d,l?.fiscalYearStartMonth),to:n.parse(f.to,!0,d,l?.fiscalYearStartMonth),raw:f}}},3597:(Y,O,e)=>{"use strict";e.d(O,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},96488:(Y,O,e)=>{"use strict";e.d(O,{J_:()=>se,F5:()=>de,M9:()=>I,gv:()=>Q,b2:()=>oe,Kj:()=>ie,bZ:()=>H,kY:()=>V,oe:()=>j});var t=e(72196),n=e(22069),o=e(54899),s=e(35645),l=e(37932),f=e(659),d=e(77582),r=e(29930),c=e(86475),a=e(91162),u=e(13011),i=e(22215),p=e(65583),g=e(95156);const y=async()=>await(0,r.i)().get("/api/datasources"),E=async ce=>{const ee=await(0,p.n)((0,r.i)().fetch({method:"GET",url:`/api/datasources/${ce}`,params:(0,g.y)(),showErrorAlert:!1}));if(ee.ok)return ee.data;throw Error(`Could not find data source by ID: "${ce}"`)},h=async ce=>{const ee=await(0,p.n)((0,r.i)().fetch({method:"GET",url:`/api/datasources/uid/${ce}`,params:(0,g.y)(),showErrorAlert:!1}));if(ee.ok)return ee.data;throw Error(`Could not find data source by UID: "${ce}"`)},v=async ce=>{try{return await h(ce)}catch{console.log(`Failed to lookup data source using UID "${ce}"`)}try{return await E(ce)}catch{console.log(`Failed to lookup data source using ID "${ce}"`)}throw Error("Could not find data source")},C=ce=>(0,r.i)().post("/api/datasources",ce),m=()=>(0,r.i)().get("/api/plugins",{enabled:1,type:"datasource"}),D=ce=>(0,r.i)().put(`/api/datasources/uid/${ce.uid}`,ce,{showErrorAlert:!1,showSuccessAlert:!1}),P=ce=>(0,r.i)().delete(`/api/datasources/uid/${ce}`);var b=e(3597),M=e(63065),x=e(85597),A=e(59250),T=e(66121);function S(ce){const ee=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(Z=>Z),le={},q={},fe=R();for(const Z of ee)le[Z.id]=Z;for(const Z of ce){const ne=fe.find(ve=>ve.id===Z.id);if((Z.enterprise||ne)&&(Z.category="enterprise",Z.unlicensed=!(0,T.v)("enterprise.plugins"),Z.info.links=ne?.info?.links||Z.info.links),Z.info.links)for(const ve of Z.info.links)ve.name="Learn more";(ee.find(ve=>ve.id===Z.category)||le.other).plugins.push(Z),q[Z.id]=Z}for(const Z of ee){if(Z.id==="cloud"&&Z.plugins.push(F()),Z.id==="enterprise")for(const ne of fe)q[ne.id]||Z.plugins.push(ne);U(Z.plugins)}return ee.filter(Z=>Z.plugins.length>0)}function U(ce){const ee={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};ce.sort((le,q)=>{const fe=ee[le.id]||0,Z=ee[q.id]||0;return fe>Z?-1:fe<Z||le.name>q.name?1:-1})}function R(){return[B({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),B({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),B({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),B({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),B({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),B({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),B({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),B({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),B({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),B({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),B({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),B({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),B({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),B({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),B({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),B({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),B({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})]}function F(){return{id:"gcloud",name:"Grafana Cloud",type:A.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function B(ce){return{id:ce.id,name:ce.name,type:A.zV.datasource,module:"phantom",baseUrl:"",info:{description:ce.description,logos:{small:ce.imgUrl,large:ce.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+ce.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var K=e(79508),L=e(41632),N=e(93769);const z=ce=>{let ee,le;return ce.error&&ce.error instanceof n.ZA?(ee=ce.error.message,le=ce.error.details):(0,o.kW)(ce)?ee=ce.data.message??`HTTP error ${ce.statusText}`:ce instanceof Error&&(ee=ce.message),{message:ee,details:le}},G=ce=>{let ee,le,q;return le=ce.status,ee=ce.message,q=ce.details,{status:le,message:ee,details:q}},I=(ce,ee={loadDataSource:Q,loadDataSourceMeta:oe,getDataSource:N.f6,getDataSourceMeta:N.G4,importDataSourcePlugin:i.nL})=>async(le,q)=>{if(!ce){le((0,L.CT)(new Error("Invalid UID")));return}try{const fe=await le(ee.loadDataSource(ce));await le(ee.loadDataSourceMeta(fe));const Z=ee.getDataSource(q().dataSources,ce),ne=ee.getDataSourceMeta(q().dataSources,Z.type),re=await ee.importDataSourcePlugin(ne);le((0,L.iZ)(re))}catch(fe){fe instanceof Error&&le((0,L.CT)(fe))}},V=(ce,ee=b.n.Edit,le={getDatasourceSrv:a.ak,getBackendSrv:r.i})=>async(q,fe)=>{const Z=await le.getDatasourceSrv().get(ce),ne=ee.replace(/:uid/gi,ce);Z.testDatasource&&(q((0,L.j_)()),le.getBackendSrv().withNoBackendCache(async()=>{try{const re=await Z.testDatasource(),ve=G({...re,details:{...re.details}});q((0,L.ng)(ve)),(0,M.Rw)({grafana_version:s.v.buildInfo.version,plugin_id:Z.type,datasource_uid:Z.uid,success:!0,path:ne})}catch(re){const ve=z(re);q((0,L.Aq)({...ve})),(0,M.Rw)({grafana_version:s.v.buildInfo.version,plugin_id:Z.type,datasource_uid:Z.uid,success:!1,path:ne})}}))};function H(){return async ce=>{ce((0,L.MP)());const ee=await y();ce((0,L.be)(ee))}}function Q(ce){return async ee=>{let le=await v(ce);return ce!==le.uid&&(window.location.href=t.u.assureBaseUrl(`/datasources/edit/${le.uid}`),le={}),ee((0,L.rl)(le)),le}}function oe(ce){return async ee=>{const le=await(0,u.a)(ce.type),q=await(0,i.nL)(le),fe=q.DataSourceClass.prototype instanceof n.CK,Z={...le,isBackend:le.backend||fe};ee((0,L.jS)(Z)),q.meta=Z,ee((0,f.RL)((0,K.B1)(ce,q)))}}function se(ce,ee=b.n.Edit){return async(le,q)=>{const fe=await y();le((0,L.be)(fe));const Z=q().dataSources.dataSources,ne=Z.length===0,re={name:ce.name,type:ce.id,access:"proxy",isDefault:ne};(0,x.NV)(Z,re.name)&&(re.name=(0,x.eM)(Z,re.name));const ve=await C(re),me=ee.replace(/:uid/gi,ve.datasource.uid);await(0,a.ak)().reload(),await d.Vt.fetchUserPermissions(),(0,M.Er)({grafana_version:s.v.buildInfo.version,plugin_id:ce.id,datasource_uid:ve.datasource.uid,plugin_version:ve.meta?.info?.version,path:me}),l.E1.push(me)}}function ie(){return async ce=>{ce((0,L.Ww)());const ee=await m(),le=S(ee);ce((0,L.wZ)({plugins:ee,categories:le}))}}function j(ce){return async ee=>{try{await D(ce)}catch(le){const q=z(le);return ee((0,L.Aq)(q)),Promise.reject(ce)}return await(0,a.ak)().reload(),ee(Q(ce.uid))}}function de(){return async(ce,ee)=>{const{uid:le}=ee().dataSources.dataSource;try{await P(le),await(0,a.ak)().reload();const q=s.v.featureToggles.dataConnectionsConsole?c.Z.DataSources:"/datasources";l.E1.push(q)}catch(q){const fe=z(q);ce((0,L.Aq)(fe))}}}},59332:(Y,O,e)=>{"use strict";e.d(O,{V:()=>o});var t=e(66111),n=e(3597);const o=(0,t.createContext)(n.n)},24231:(Y,O,e)=>{"use strict";e.d(O,{E:()=>g,IA:()=>b,MF:()=>A,OU:()=>v,Qs:()=>M,YY:()=>T,_l:()=>x,d7:()=>S,hw:()=>y,nH:()=>C,q6:()=>D,qj:()=>m,wi:()=>h,wl:()=>P,zJ:()=>E});var t=e(66111),n=e(70431),o=e(18271),s=e(77582),l=e(86245),f=e(27876),d=e(45984),r=e(85597),c=e(96488),a=e(59332),u=e(79508),i=e(41632),p=e(93769);const g=U=>{const R=(0,f.useDispatch)();(0,t.useEffect)(()=>(R((0,c.M9)(U)),function(){R((0,n.e)({cleanupAction:B=>B.dataSourceSettings=i.fk}))}),[U,R])},y=U=>{const R=(0,f.useDispatch)(),F=S();return()=>R((0,c.kY)(U,F.Edit))},E=()=>{const U=(0,f.useDispatch)(),R=(0,f.useSelector)(B=>B.dataSources.isLoadingDataSources),F=(0,f.useSelector)(B=>B.dataSources.dataSources);return(0,t.useEffect)(()=>{U((0,c.bZ)())},[U]),{isLoading:R,dataSources:F}},h=U=>{const R=(0,f.useDispatch)();(0,t.useEffect)(()=>{R((0,c.gv)(U))},[R,U])},v=()=>{const U=(0,f.useDispatch)();(0,t.useEffect)(()=>{U((0,c.Kj)())},[U])},C=()=>{const U=(0,f.useDispatch)(),R=S();return F=>{U((0,c.J_)(F,R.Edit))}},m=()=>{const U=(0,f.useDispatch)();return async R=>U((0,c.oe)(R))},D=()=>{const U=(0,f.useDispatch)(),{name:R}=(0,f.useSelector)(F=>F.dataSources.dataSource);return()=>{o.Z.publish(new d.VJ({title:"Delete",text:`Are you sure you want to delete the "${R}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>U((0,c.F5)())}))}},P=U=>(0,f.useSelector)(R=>(0,p.f6)(R.dataSources,U)),b=U=>{const R=P(U);return(0,r.iU)(R)},M=U=>(0,f.useSelector)(R=>(0,p.G4)(R.dataSources,U)),x=()=>(0,f.useSelector)(U=>U.dataSourceSettings),A=(U,R)=>{const F=P(U),{plugin:B,loadError:K,loading:L}=x(),N=(0,f.useSelector)(G=>G.navIndex),z=R?`datasource-${R}-${U}`:`datasource-settings-${U}`;if(K){const G={text:K,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:G,main:G}}return L||!B?(0,l.ht)(N,z,(0,u.xG)("settings")):(0,l.ht)(N,z,(0,u.nI)((0,u.B1)(F,B),R||"settings"))},T=U=>{const R=P(U),F=R.readOnly===!0,B=s.Vt.hasPermissionInMetadata(f.AccessControlAction.DataSourcesWrite,R),K=s.Vt.hasPermissionInMetadata(f.AccessControlAction.DataSourcesDelete,R);return{readOnly:F,hasWriteRights:B,hasDeleteRights:K}},S=()=>(0,t.useContext)(a.V)},25e3:(Y,O,e)=>{"use strict";e.d(O,{BX:()=>l.BX,E:()=>o.E,Ht:()=>l.Ht,I5:()=>f.I5,IA:()=>f.IA,IO:()=>f.IO,J_:()=>t.J_,MF:()=>o.MF,Nu:()=>l.Nu,OU:()=>o.OU,Qs:()=>o.Qs,Rz:()=>o.IA,Vj:()=>n.V,YY:()=>o.YY,_l:()=>o._l,d7:()=>o.d7,hw:()=>o.hw,mt:()=>f.mt,nH:()=>o.nH,q6:()=>o.q6,qj:()=>o.qj,r7:()=>f.r7,rl:()=>l.rl,wi:()=>o.wi,wl:()=>o.wl,xG:()=>s.xG,yr:()=>l.yr,zJ:()=>o.zJ,zT:()=>l.zT});var t=e(96488),n=e(59332),o=e(24231),s=e(79508),l=e(41632),f=e(93769)},79508:(Y,O,e)=>{"use strict";e.d(O,{B1:()=>c,nI:()=>a,xG:()=>u});var t=e(59250),n=e(66121),o=e(73194),s=e(47694),l=e(77582),f=e(77293),d=e(27876);const r="Loading";function c(p,g){const y=g.meta,E=s.ZP.featureToggles.featureHighlights,h={img:y.info.logos.large,id:"datasource-"+p.uid,subTitle:`Type: ${y.name}`,url:"",text:p.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${p.uid}`,text:"Settings",url:`datasources/edit/${p.uid}/`}]};if(g.configPages)for(const x of g.configPages)h.children.push({active:!1,text:x.title,icon:x.icon,url:`datasources/edit/${p.uid}/?page=${x.id}`,id:`datasource-page-${x.id}`});y.includes&&i(y.includes)&&l.Vt.hasRole("Admin")&&h.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${p.uid}`,text:"Dashboards",url:`datasources/edit/${p.uid}/dashboards`});const v=p.type===r,C="feature-highlights-data-source-permissions-badge",m={active:!1,icon:"lock",id:`datasource-permissions-${p.uid}`,text:"Permissions",url:`datasources/edit/${p.uid}/permissions`};(0,f.d5)()&&!v&&(m.tabSuffix=()=>(0,o.Z)({experimentId:C,eventVariant:"trial"})),(0,n.v)("dspermissions.enforcement")?l.Vt.hasPermission(d.AccessControlAction.DataSourcesPermissionsRead)&&h.children.push(m):E&&!v&&h.children.push({...m,url:m.url+"/upgrade",tabSuffix:()=>(0,o.Z)({experimentId:C})});const D="feature-highlights-data-source-insights-badge",P={active:!1,icon:"info-circle",id:`datasource-insights-${p.uid}`,text:"Insights",url:`datasources/edit/${p.uid}/insights`};(0,f.d5)()&&!v&&(P.tabSuffix=()=>(0,o.Z)({experimentId:D,eventVariant:"trial"})),(0,n.v)("analytics")?l.Vt.hasPermission(d.AccessControlAction.DataSourcesInsightsRead)&&h.children.push(P):E&&!v&&h.children.push({...P,url:P.url+"/upgrade",tabSuffix:()=>(0,o.Z)({experimentId:D})});const b="feature-highlights-query-caching-badge",M={active:!1,icon:"database",id:`datasource-cache-${p.uid}`,text:"Cache",url:`datasources/edit/${p.uid}/cache`,hideFromTabs:!y.isBackend||!s.ZP.caching.enabled};return(0,f.d5)()&&!v&&(M.tabSuffix=()=>(0,o.Z)({experimentId:b,eventVariant:"trial"})),(0,n.v)("caching")?l.Vt.hasPermissionInMetadata(d.AccessControlAction.DataSourcesCachingRead,p)&&h.children.push(M):E&&!v&&h.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,o.Z)({experimentId:b})}),h}function a(p,g){let y={text:""};for(const E of p.children)if(E.id.indexOf(g)>0){E.active=!0,y=E;break}return{main:p,node:y}}function u(p){const g=c({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:r,typeName:r,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return a(g,p)}function i(p){return p.find(g=>g.type==="dashboard")!==void 0}},41632:(Y,O,e)=>{"use strict";e.d(O,{Aq:()=>P,BX:()=>p,CT:()=>C,Ht:()=>i,MP:()=>l,Nu:()=>y,Ww:()=>r,ZP:()=>M,be:()=>f,fk:()=>h,iZ:()=>v,jS:()=>d,j_:()=>m,ng:()=>D,rl:()=>s,wZ:()=>c,yr:()=>g,zT:()=>a});var t=e(62992),n=e(89974);const o={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),l=(0,t.PH)("dataSources/dataSourcesLoad"),f=(0,t.PH)("dataSources/dataSourcesLoaded"),d=(0,t.PH)("dataSources/dataSourceMetaLoaded"),r=(0,t.PH)("dataSources/dataSourcePluginsLoad"),c=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),a=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),i=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),p=(0,t.PH)("dataSources/setDataSourceName"),g=(0,t.PH)("dataSources/setIsDefault"),y=(0,t.PH)("dataSources/setIsSortAscending"),E=(x=o,A)=>l.match(A)?{...x,isLoadingDataSources:!0}:f.match(A)?{...x,isLoadingDataSources:!1,dataSources:A.payload,dataSourcesCount:A.payload.length}:s.match(A)?{...x,dataSource:A.payload}:a.match(A)?{...x,searchQuery:A.payload}:u.match(A)?{...x,layoutMode:A.payload}:r.match(A)?{...x,plugins:[],isLoadingDataSourcePlugins:!0}:c.match(A)?{...x,plugins:A.payload.plugins,categories:A.payload.categories,isLoadingDataSourcePlugins:!1}:i.match(A)?{...x,dataSourceTypeSearchQuery:A.payload}:d.match(A)?{...x,dataSourceMeta:A.payload}:p.match(A)?{...x,dataSource:{...x.dataSource,name:A.payload}}:g.match(A)?{...x,dataSource:{...x.dataSource,isDefault:A.payload}}:y.match(A)?{...x,isSortAscending:A.payload}:x,h={testingStatus:{},loadError:null,loading:!0,plugin:null},v=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),C=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),m=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),D=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),P=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),M={dataSources:E,dataSourceSettings:(x=h,A)=>v.match(A)?{...x,plugin:A.payload,loadError:null,loading:!1}:C.match(A)?{...x,plugin:null,loadError:A.payload.message,loading:!1}:m.match(A)?{...x,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:D.match(A)?{...x,testingStatus:{status:A.payload?.status,message:A.payload?.message,details:A.payload?.details}}:P.match(A)?{...x,testingStatus:{status:"error",message:A.payload?.message,details:A.payload?.details}}:x}},93769:(Y,O,e)=>{"use strict";e.d(O,{G4:()=>s,I5:()=>n,IA:()=>r,IO:()=>l,f6:()=>o,mt:()=>t,r7:()=>d});const t=c=>{const a=new RegExp(c.searchQuery,"i");return c.dataSources.filter(i=>a.test(i.name)||a.test(i.database)||a.test(i.type)).sort((i,p)=>c.isSortAscending?i.name.localeCompare(p.name):p.name.localeCompare(i.name))},n=c=>{const a=new RegExp(c.dataSourceTypeSearchQuery,"i");return c.plugins.filter(u=>a.test(u.name))},o=(c,a)=>c.dataSource.uid===a?c.dataSource:{},s=(c,a)=>c.dataSourceMeta.id===a?c.dataSourceMeta:{},l=c=>c.searchQuery,f=c=>c.layoutMode,d=c=>c.dataSourcesCount,r=c=>c.isSortAscending},63065:(Y,O,e)=>{"use strict";e.d(O,{Er:()=>n,Rw:()=>o,U4:()=>s,aL:()=>r,dF:()=>f,hJ:()=>l,ij:()=>d});var t=e(41818);const n=c=>{(0,t.ff)("grafana_ds_add_datasource_clicked",c)},o=c=>{(0,t.ff)("grafana_ds_test_datasource_clicked",c)},s=c=>{(0,t.ff)("grafana_ds_explore_datasource_clicked",c)},l=c=>{(0,t.ff)("grafana_ds_create_dashboard_clicked",c)},f=c=>{(0,t.ff)("grafana_ds_datasources_list_viewed",c)},d=c=>{(0,t.ff)("connections_datasources_settings_clicked",{item:c})},r=c=>{(0,t.ff)("connections_datasources_ds_configured",{item:c})}},85597:(Y,O,e)=>{"use strict";e.d(O,{NV:()=>o,eM:()=>s,iU:()=>c});var t=e(49187),n=e(72196);function o(a,u){return a.filter(i=>i.name.toLowerCase()===u.toLowerCase()).length>0}function s(a,u){for(;o(a,u);)l(u)?u=`${r(u)}${d(f(u))}`:u=`${u}-1`;return u}function l(a){return a.endsWith("-",a.length-1)}function f(a){return parseInt(a.slice(-1),10)}function d(a){return isNaN(a)?1:a+1}function r(a){return a.slice(0,a.length-1)}const c=a=>{const u=JSON.stringify({datasource:a.name,context:"explore"});return t.Cj.renderUrl(n.u.assureBaseUrl("/explore"),{left:u})}},97934:()=>{"use strict"},30785:(Y,O,e)=>{"use strict";e.d(O,{L:()=>r});var t=e(9892),n=e(66111),o=e(72648),s=e(8581),l=e(90208),f=e(80760);const d={label:"Fixed color",value:"_____fixed_____"},r=a=>{const{value:u,context:i,onChange:p}=a,g="dark-green",y=(0,o.wW)(c),E=u?.field,h=Boolean(!E),v=(0,f.IX)(i.data),C=(0,f.nw)(v,E,d),m=(0,n.useCallback)(b=>{const M=b.value;if(M&&M!==d.value)p({...u,field:M});else{const x=u?.fixed??g;p({...u,field:void 0,fixed:x})}},[p,u]),D=(0,n.useCallback)(b=>{p({field:void 0,fixed:b??g})},[p]),P=h?d:C.find(b=>b.value===E);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:P,options:C,onChange:m,noOptionsMessage:"No fields found"}),h&&n.createElement("div",{className:y.picker},n.createElement(l.zH,{color:u?.fixed??g,onChange:D,enableNamedColors:!0}))))},c=a=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(Y,O,e)=>{"use strict";e.d(O,{E:()=>y});var t=e(9892),n=e(66111),o=e(72648),s=e(31403),l=e(11543),f=e(81764),d=e(46967),r=e(39604),c=e(56921),a=e(66120),u=e(16964),i=e(59961),p=e(92484),g=e(26260);const y=h=>{const{value:v,src:C,name:m,placeholder:D,onChange:P,onClear:b,mediaType:M,folderName:x,size:A,color:T}=h,S=(0,o.wW)(E),U=(0,o.l4)(),R=(0,n.createRef)(),F=n.createElement(g.Y,{onChange:P,value:v,mediaType:M,folderName:x});let B=C;!B&&v&&(B=(0,i.t)(v));const K=T&&{fill:U.visualization.getColorByName(T)},L=()=>v&&B?n.createElement(u.V,{src:B,className:S.icon,style:{...K}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),N=()=>n.createElement(l.Z,null,n.createElement(f._,{label:null,grow:!0},n.createElement(d.I,{value:m,placeholder:D,readOnly:!0,prefix:B&&n.createElement(u.V,{src:B,className:S.icon,style:{...K}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:b})})));return n.createElement(r.D,{content:F},(z,G,I)=>n.createElement(n.Fragment,null,R.current&&n.createElement(c.J,{...I,referenceElement:R.current,onMouseEnter:z,onKeyDown:V=>{(0,a.i)(V,G)}}),n.createElement("div",{ref:R,onClick:z,className:S.pointer},A===p.zc.SMALL&&L(),A===p.zc.NORMAL&&N())))},E=h=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>N});var t=e(9892),n=e(29952),o=e(83962),s=e(86922),l=e(66111),f=e(54899),d=e(72648),r=e(31403),c=e(47694),a=e(92484),u=e(24799),i=e(30784),p=e(16964);function g({secondaryText:G="Drag and drop here or browse"}){const I=(0,d.wW)(E);return l.createElement("div",{className:I.iconWrapper},l.createElement("small",{className:I.small},G),l.createElement(r.zx,{type:"button",icon:"upload"},"Upload"))}const y=({mediaType:G,setFormData:I,setUpload:V,error:H})=>{const Q=(0,d.wW)(E),[oe,se]=(0,l.useState)(!1),[ie,j]=(0,l.useState)(""),de=()=>l.createElement(u.g,{label:"Preview"},l.createElement("div",{className:Q.iconPreview},G===a.DD.Icon&&l.createElement(p.V,{src:ie,className:Q.img}),G===a.DD.Image&&l.createElement("img",{src:ie,alt:"Preview of the uploaded file",className:Q.img}))),ce=le=>{fetch(`/api/storage/delete/upload/${le.file.name}`,{method:"DELETE"}).catch(q=>console.error("cannot delete file",q))},ee=G==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return l.createElement(i.Yo,{readAs:"readAsBinaryString",onFileRemove:ce,options:{accept:ee,multiple:!1,onDrop:le=>{let q=new FormData;q.append("file",le[0]),j(URL.createObjectURL(le[0])),se(!0),I(q),V(!0)}}},H.message!==""&&oe?l.createElement("p",null,H.message):oe?l.createElement(de,null):l.createElement(g,null))};function E(G,I){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${G.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${G.colors.border.medium};
      background-color: ${I?G.colors.background.secondary:G.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${G.spacing(2,0,1)};
    `,small:t.css`
      color: ${G.colors.text.secondary};
      margin-bottom: ${G.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${G.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${G.colors.text.primary};
    `}}var h=e(8581),v=e(14747),C=e(91162),m=e(89050),D=e(32436),P=e(7804);const b=(0,l.memo)(function(I){const{columnIndex:V,rowIndex:H,style:Q,data:oe}=I,{cards:se,columnCount:ie,onChange:j,selected:de}=oe,ce=V+H*ie,ee=se[ce],le=(0,d.l4)(),q=M(le);return l.createElement("div",{style:Q},ee&&l.createElement("div",{key:ee.value,className:de===ee.value?(0,t.cx)(q.card,q.selected):q.card,onClick:()=>j(ee.value)},ee.imgUrl.endsWith(".svg")?l.createElement(p.V,{src:ee.imgUrl,className:q.img}):l.createElement("img",{src:ee.imgUrl,alt:"",className:q.img}),l.createElement("h6",{className:q.text},ee.label.slice(0,-4))))},D.wy),M=(0,P.B)(G=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${G.colors.action.hover};
        box-shadow: ${G.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${G.colors.primary.main};
      :hover {
        border-color: ${G.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${G.colors.text.primary};
    `,text:t.css`
      color: ${G.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${G.colors.border.medium};
    `})),x=G=>{const{onChange:I,cards:V,value:H}=G,Q=(0,d.l4)(),oe=M(Q);return l.createElement(m.Z,{defaultWidth:680},({width:se,height:ie})=>{const ce=Math.floor(se/90),ee=Math.ceil(V.length/ce);return l.createElement(D.Ym,{width:se,height:ie,columnCount:ce,columnWidth:90,rowCount:ee,rowHeight:90,itemData:{cards:V,columnCount:ce,onChange:I,selected:H},className:oe.grid},b)})},A=G=>G===a.DD.Icon?[a.QS.Icon,a.QS.IOT,a.QS.Marker]:[a.QS.BG],T=(G,I)=>G.find(V=>I.startsWith(V.value))??G[0],S=G=>{const{value:I,mediaType:V,folderName:H,newValue:Q,setNewValue:oe}=G,se=(0,d.wW)(U),ie=A(V).map(re=>({label:re,value:re})),[j,de]=(0,l.useState)(),[ce,ee]=(0,l.useState)(T(ie,I?.length?I:H)),[le,q]=(0,l.useState)([]),[fe,Z]=(0,l.useState)([]),ne=re=>{re?(re=re.toLowerCase(),Z(le.filter(ve=>ve.search.includes(re)))):Z(le)};return(0,l.useEffect)(()=>{const re=ce?.value;if(re){const ve=V===a.DD.Icon?me=>me.name.endsWith(".svg"):me=>me.name.endsWith(".png")||me.name.endsWith(".gif");(0,C.ak)().get("-- Grafana --").then(me=>{me.listFiles(re).subscribe({next:Ie=>{const Ge=[];Ie.forEach(gt=>{if(ve(gt)){const Te=gt.name.lastIndexOf(".");Ge.push({value:`${re}/${gt.name}`,label:gt.name,search:(Te?gt.name.substring(0,Te):gt.name).toLowerCase(),imgUrl:`public/${re}/${gt.name}`})}}),q(Ge),Z(Ge)}})})}},[V,ce]),l.createElement(l.Fragment,null,l.createElement(u.g,null,l.createElement(h.Ph,{options:ie,onChange:ee,value:ce,menuShouldPortal:!1})),l.createElement(u.g,null,l.createElement(v.H,{value:j??"",placeholder:"Search",onChange:re=>{ne(re),de(re)}})),fe&&l.createElement("div",{className:se.cardsWrapper},l.createElement(x,{cards:fe,onChange:re=>oe(re),value:Q})))},U=G=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var R=e(46967),F=e(64353),B=e(59961);const K=G=>{const{newValue:I,setNewValue:V,mediaType:H}=G,Q=(0,d.wW)(L),oe=(0,B.t)(I);let se=I?.substring(I.lastIndexOf("/")+1,I.lastIndexOf("."));return se.length>20&&(se=se.substring(0,20)+"..."),l.createElement(l.Fragment,null,l.createElement(u.g,null,l.createElement(R.I,{onChange:ie=>V(ie.currentTarget.value),value:I})),l.createElement("div",{className:Q.iconContainer},l.createElement(u.g,{label:"Preview"},l.createElement("div",{className:Q.iconPreview},H===a.DD.Icon&&l.createElement(p.V,{src:oe,className:Q.img}),H===a.DD.Image&&I&&l.createElement("img",{src:oe,alt:"Preview of the selected URL",className:Q.img}))),l.createElement(F._,null,se)))},L=G=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${G.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${G.colors.text.primary};
  `}),N=G=>{const{value:I,onChange:V,mediaType:H,folderName:Q}=G,oe=(0,d.wW)(z),se=()=>{V(I)},ie=(0,l.createRef)(),{dialogProps:j}=(0,n.R)({},ie),{overlayProps:de}=(0,s.Ir)({onClose:se,isDismissable:!0,isOpen:!0},ie),ce=I&&I.includes("://"),[ee,le]=(0,l.useState)(I??""),[q,fe]=(0,l.useState)(ce?a.hQ.URL:a.hQ.Folder),[Z,ne]=(0,l.useState)(new FormData),[re,ve]=(0,l.useState)(!1),[me,Ie]=(0,l.useState)({message:""}),Ge=it=>`${oe.resourcePickerPopoverTab} ${q===it&&oe.resourcePickerPopoverActiveTab}`,gt=()=>l.createElement(S,{value:I,mediaType:H,folderName:Q,newValue:ee,setNewValue:le}),Te=()=>l.createElement(K,{newValue:ee,setNewValue:le,mediaType:H}),Le=()=>l.createElement(y,{mediaType:H,setFormData:ne,setUpload:ve,newValue:ee,error:me}),Ye=()=>{switch(q){case a.hQ.Folder:return gt();case a.hQ.URL:return Te();case a.hQ.Upload:return Le();default:return gt()}};return l.createElement(o.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("section",{ref:ie,...de,...j},l.createElement("div",{className:oe.resourcePickerPopover},l.createElement("div",{className:oe.resourcePickerPopoverTabs},l.createElement("button",{className:Ge(a.hQ.Folder),onClick:()=>fe(a.hQ.Folder)},"Folder"),l.createElement("button",{className:Ge(a.hQ.URL),onClick:()=>fe(a.hQ.URL)},"URL")),l.createElement("div",{className:oe.resourcePickerPopoverContent},Ye(),l.createElement("div",{className:oe.buttonRow},l.createElement(r.zx,{variant:"secondary",onClick:()=>se(),fill:"outline"},"Cancel"),l.createElement(r.zx,{variant:ee&&ee!==I?"primary":"secondary",onClick:()=>{re?fetch("/api/storage/upload",{method:"POST",body:Z}).then(it=>{if(it.status>=400){it.json().then(ht=>Ie(ht));return}else return it.json()}).then(it=>{(0,f.i)().get(`api/storage/read/${it.path}`).then(()=>le(`${c.vc.appUrl}api/storage/read/${it.path}`)).then(()=>V(`${c.vc.appUrl}api/storage/read/${it.path}`))}).catch(it=>console.error(it)):V(ee)}},"Select"))))))},z=G=>({resourcePickerPopover:t.css`
    border-radius: ${G.shape.borderRadius()};
    box-shadow: ${G.shadows.z3};
    background: ${G.colors.background.primary};
    border: 1px solid ${G.colors.border.weak};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${G.spacing(1,0)};
    background: ${G.colors.background.secondary};
    color: ${G.colors.text.secondary};
    font-size: ${G.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${G.colors.text.primary};
    font-weight: ${G.typography.fontWeightMedium};
    background: ${G.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${G.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${G.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${G.shape.borderRadius()} ${G.shape.borderRadius()} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:G.spacing(2),padding:G.spacing(1)})})},38647:(Y,O,e)=>{"use strict";e.d(O,{$:()=>i});var t=e(66111),n=e(40538),o=e(11543),s=e(81764),l=e(2594),f=e(31403),d=e(15448),r=e(37565);const c=[{label:"Fixed",value:n.xy.Fixed,description:"Fixed value"},{label:"Field",value:n.xy.Field,description:"Display field value"}],a={settings:{}},u={settings:{}},i=({value:p,context:g,onChange:y})=>{const h=(0,t.useCallback)(P=>{y({...p,mode:P})},[y,p]),v=(0,t.useCallback)(P=>{y({...p,field:P})},[y,p]),C=(0,t.useCallback)((P="")=>{y({...p,fixed:P})},[y,p]),m=()=>{C("")},D=p?.mode??n.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(o.Z,null,t.createElement(s._,{label:"Source",labelWidth:9,grow:!0},t.createElement(l.S,{value:D,options:c,onChange:h,fullWidth:!0}))),D!==n.xy.Fixed&&t.createElement(o.Z,null,t.createElement(s._,{label:"Field",labelWidth:9,grow:!0},t.createElement(d.b,{context:g,value:p.field??"",onChange:v,item:a}))),D===n.xy.Fixed&&t.createElement(o.Z,{key:p?.fixed},t.createElement(s._,{label:"Value",labelWidth:9,grow:!0},t.createElement(r.A,{context:g,value:p?.fixed,onChange:C,item:u,suffix:p?.fixed&&t.createElement(f.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:m})}))),D===n.xy.Template&&t.createElement(o.Z,null,t.createElement(s._,{label:"Template",labelWidth:9,grow:!0},t.createElement(r.A,{context:g,value:p?.fixed,onChange:C,item:u}))))}},54643:(Y,O,e)=>{"use strict";e.d(O,{Lm:()=>t.L,Lv:()=>y,k9:()=>U,cL:()=>M,$2:()=>F.$});var t=e(30785),n=e(66111);const o=({value:B,onChange:K})=>{const[L,N]=useState(B?[{value:B,label:B}]:[]),[z,G]=useState(),I=window.__grafana_public_path__+"img/icons/unicons/",V=H=>{K(H),G(H)};return useEffect(()=>{getBackendSrv().get(`${I}/index.json`).then(H=>{N(H.files.map(Q=>({value:Q,label:Q})))})},[I]),React.createElement(Select,{options:L,value:z,onChange:H=>{V(H.value)}})},s=null;var l=e(40538),f=e(11543),d=e(81764),r=e(2594),c=e(15448),a=e(25532),u=e(92484),i=e(26786);const p=[{label:"Fixed",value:l.Q8.Fixed,description:"Fixed value"},{label:"Field",value:l.Q8.Field,description:"Use a string field result"}],g={settings:{}},y=B=>{const{value:K,context:L,onChange:N,item:z}=B,G=9,I=(0,n.useCallback)(ce=>{N({...K,mode:ce})},[N,K]),V=(0,n.useCallback)((ce="")=>{N({...K,field:ce})},[N,K]),H=(0,n.useCallback)(ce=>{N({...K,fixed:ce??""})},[N,K]),Q=ce=>{ce.stopPropagation(),N({mode:l.Q8.Fixed,fixed:"",field:""})},oe=K?.mode??l.Q8.Fixed,se=z.settings?.showSourceRadio??!0,ie=z.settings?.resourceType??u.DD.Icon,j=z.settings?.folderName??a.ResourceFolderName.Icon;let de="";return ie===u.DD.Icon&&(K?.fixed?de=(0,a.getPublicOrAbsoluteUrl)(K.fixed):z.settings?.placeholderValue&&(de=(0,a.getPublicOrAbsoluteUrl)(z.settings.placeholderValue))),n.createElement(n.Fragment,null,se&&n.createElement(f.Z,null,n.createElement(d._,{label:"Source",labelWidth:G,grow:!0},n.createElement(r.S,{value:oe,options:p,onChange:I,fullWidth:!0}))),oe!==l.Q8.Fixed&&n.createElement(f.Z,null,n.createElement(d._,{label:"Field",labelWidth:G,grow:!0},n.createElement(c.b,{context:L,value:K.field??"",onChange:V,item:g}))),oe===l.Q8.Fixed&&n.createElement(i.E,{onChange:H,onClear:Q,value:K?.fixed,src:de,placeholder:z.settings?.placeholderText??"Select a value",name:E(K?.fixed)??"",mediaType:ie,folderName:j,size:u.zc.NORMAL}),oe===l.Q8.Mapping&&n.createElement(f.Z,null,n.createElement(d._,{label:"Mappings",labelWidth:G,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function E(B){if(!B)return;const K=B.lastIndexOf("/");return K>0?B.substring(K+1):B}var h=e(9892),v=e(72648),C=e(8581),m=e(80760),D=e(45458),P=e(33048);const b={label:"Fixed value",value:"_____fixed_____"},M=B=>{const{value:K,context:L,onChange:N,item:z}=B,{settings:G}=z,I=(0,v.wW)(x),V=K?.field,H=Boolean(!V),Q=(0,m.IX)(L.data),oe=(0,m.nw)(Q,V,b),se=(0,n.useMemo)(()=>(0,P.x5)(G),[G]),ie=(0,n.useCallback)(fe=>{N((0,P.C)(fe,se))},[N,se]),j=(0,n.useCallback)(fe=>{const Z=fe.value;Z&&Z!==b.value?ie({...K,field:Z}):ie({...K,field:void 0})},[ie,K]),de=(0,n.useCallback)(fe=>{fe!==void 0&&ie({...K,min:fe})},[ie,K]),ce=(0,n.useCallback)(fe=>{fe!==void 0&&ie({...K,max:fe})},[ie,K]),ee=(0,n.useCallback)(fe=>{fe!==void 0&&ie({...K,fixed:fe})},[ie,K]),le=K??{},q=H?b:oe.find(fe=>fe.value===V);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(C.Ph,{value:q,options:oe,onChange:j,noOptionsMessage:"No fields found"})),n.createElement("div",{className:I.range},H&&n.createElement(f.Z,null,n.createElement(d._,{label:"Value",labelWidth:8,grow:!0},n.createElement(D.Y,{value:le.fixed,...se,onChange:ee}))),!H&&!se.hideRange&&n.createElement(n.Fragment,null,n.createElement(f.Z,null,n.createElement(d._,{label:"Min",labelWidth:8,grow:!0},n.createElement(D.Y,{value:le.min,...se,onChange:de}))),n.createElement(f.Z,null,n.createElement(d._,{label:"Max",labelWidth:8,grow:!0},n.createElement(D.Y,{value:le.max,...se,onChange:ce}))))))},x=B=>({range:h.css`
    padding-top: 8px;
  `});var A=e(99098);const T={label:"Fixed value",value:"_____fixed_____"},S=[{label:"Mod",value:l.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:l.eK.Clamped,description:"Use field values, clamped to max and min"}],U=({value:B,context:K,onChange:L,item:N})=>{const{settings:z}=N,G=0,I=B?.field,V=Boolean(!I),H=(0,m.IX)(K.data),Q=(0,m.nw)(H,I,T,A.fS.number),oe=(0,v.wW)(R),se=(0,n.useCallback)(le=>{const q=le.value;if(q&&q!==T.value)L({...B,field:q});else{const fe=B.fixed??G;L({...B,field:void 0,fixed:fe})}},[L,B]),ie=(0,n.useCallback)(le=>{L({...B,mode:le})},[L,B]),j=(0,n.useCallback)(le=>{L({...B,field:void 0,fixed:le??G})},[L,B]),de=B??{},ce=B?.mode??l.eK.Mod,ee=V?T:Q.find(le=>le.value===I);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(f.Z,null,n.createElement(d._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(r.S,{value:ce,options:S,onChange:ie,fullWidth:!0}))),n.createElement(C.Ph,{value:ee,options:Q,onChange:se,noOptionsMessage:"No fields found"})),n.createElement("div",{className:oe.range},V&&n.createElement(f.Z,null,n.createElement(d._,{label:"Value",labelWidth:8,grow:!0},n.createElement(D.Y,{value:de?.fixed??G,onChange:j,max:z?.max,min:z?.min})))))},R=B=>({range:h.css`
    padding-top: 8px;
  `});var F=e(38647)},25532:(Y,O,e)=>{"use strict";e.d(O,{MediaType:()=>t.DD,ResourceFolderName:()=>t.QS,findField:()=>l.PI,findFieldIndex:()=>l.rj,getColorDimension:()=>f,getColorDimensionFromData:()=>l.FP,getPublicOrAbsoluteUrl:()=>g.t,getResourceDimension:()=>g.I,getResourceDimensionFromData:()=>l.Qz,getScalarDimension:()=>E.y,getScalarDimensionFromData:()=>l.z2,getScaleDimensionFromData:()=>l.pb,getScaledDimension:()=>r.W8,getScaledDimensionForField:()=>r.A,getTextDimension:()=>i,getTextDimensionFromData:()=>l.WO});var t=e(92484),n=e(72990),o=e(99601),s=e(6194),l=e(20927);function f(h,v,C){return d((0,l.PI)(h,v.field),v,C)}function d(h,v,C){if(!h){const P=C.visualization.getColorByName(v.fixed??"grey");return{isAssumed:Boolean(v.field?.length)||!v.fixed,fixed:P,value:()=>P,get:b=>P}}const m=(0,n.fD)(h);if(m.isByValue||h.config.mappings?.length){const P=(0,o.xD)(h,!0);P!==h.config&&(h={...h,config:P},h.state=void 0);const b=(0,s.U_)({field:h,theme:C}),M=x=>b(x).color??"#ccc";return{field:h,get:x=>M(h.values[x]),value:()=>M((0,l.cR)(h))}}const D=m.getCalculator(h,C)(0,0);return{fixed:D,value:()=>D,get:P=>D,field:h}}var r=e(33048),c=e(99098),a=e(2703),u=e(40538);function i(h,v){const C=v.field?(0,l.PI)(h,v.field):h?.fields.find(m=>m.type===c.fS.string);return p(C,v)}function p(h,v){let C=v.fixed;const m=v.mode??u.xy.Fixed;if(m===u.xy.Fixed)return{isAssumed:!Boolean(C),fixed:C,value:()=>C,get:P=>C};if(m===u.xy.Template){const P=b=>`TEMPLATE[${v.fixed} // ${b}]`;return h?{field:h,get:b=>P(h.values[b]),value:()=>P((0,l.cR)(h))}:(C=P(""),{isAssumed:!0,fixed:C,value:()=>C,get:b=>C})}if(!h)return{isAssumed:!0,fixed:C,value:()=>C,get:P=>C};let D=P=>(0,a.zc)(h.display(P));return{field:h,get:P=>D(h.values[P]),value:()=>D((0,l.cR)(h))}}var g=e(59961),y=e(97934),E=e(86682)},59961:(Y,O,e)=>{"use strict";e.d(O,{I:()=>s,t:()=>o});var t=e(40538),n=e(20927);function o(l){return l?l.indexOf(":/")>0?l:window.__grafana_public_path__+l:""}function s(l,f){const d=f.mode??t.Q8.Fixed;if(d===t.Q8.Fixed){const a=o(f.fixed);return{isAssumed:!Boolean(a),fixed:a,value:()=>a,get:u=>a}}const r=(0,n.PI)(l,f.field);if(!r){const a="";return{isAssumed:!0,fixed:a,value:()=>a,get:u=>a}}if(d===t.Q8.Mapping){const a=u=>o(`${u}`);return{field:r,get:u=>a(r.values[u]),value:()=>a((0,n.cR)(r))}}const c=a=>{if(r&&r.display){const u=r.display(a).icon;return o(u??"")}return""};return{field:r,get:a=>c(r.values[a]),value:()=>c((0,n.cR)(r))}}},86682:(Y,O,e)=>{"use strict";e.d(O,{y:()=>o});var t=e(40538),n=e(20927);function o(l,f){return s((0,n.PI)(l,f?.field),f)}function s(l,f){if(!l){const c=f.fixed??0;return{isAssumed:Boolean(f.field?.length)||!f.fixed,fixed:c,value:()=>c,get:()=>c}}let d=c=>c%f.max;return f.mode===t.eK.Clamped&&(d=c=>c<f.min?f.min:c>f.max?f.max:c),{field:l,get:c=>{const a=l.values[c];return a===null||typeof a!="number"?0:d(a)},value:()=>(0,n.cR)(l)}}},33048:(Y,O,e)=>{"use strict";e.d(O,{A:()=>l,C:()=>d,W8:()=>s,x5:()=>f});var t=e(99601),n=e(40538),o=e(20927);function s(r,c){return l((0,o.PI)(r,c?.field),c)}function l(r,c,a){if(!r){const E=c.fixed??0;return{isAssumed:Boolean(c.field?.length)||!c.fixed,fixed:E,value:()=>E,get:()=>E}}const u=(0,t.dz)(r),i=c.max-c.min;if(r.values.length<1||i<=0||u.delta<=0)return{fixed:c.min,value:()=>c.min,get:()=>c.min};let g=E=>c.min+E*i;if(a===n.B5.Quad){const E=Math.PI*(c.max/2)**2,h=Math.PI*(c.min/2)**2,v=E-h;g=C=>{let m=h+v*C;return Math.sqrt(m/Math.PI)*2}}const y=E=>{const h=r.values[E];let v=0;return h!==-1/0&&(v=(h-u.min)/u.delta),v>1?v=1:v<0&&(v=0),g(v)};return{get:y,value:()=>y((0,o.cR)(r)),field:r}}function f(r){return r||(r={min:0,max:1}),r.min==null&&(r.min=0),r.max==null&&(r.max=1),r}function d(r,c){let{min:a,max:u}=f(c);if(r||(r={}),r.max==null&&(r.max=u),r.min==null&&(r.min=a),r.min>r.max){const i=r.max;r.max=r.min,r.min=i}return r.min<a&&(r.min=a),r.max>u&&(r.max=u),r.fixed==null&&(r.fixed=r.min+(r.max-r.min)/2),r.field||(r.fixed>u?r.fixed=u:r.fixed<a&&(r.fixed=a)),r}},92484:(Y,O,e)=>{"use strict";e.d(O,{DD:()=>s,QS:()=>o,hQ:()=>l,qj:()=>n,zc:()=>f});var t=e(40538);const n=Object.freeze({fixed:"",mode:t.xy.Field,field:""});var o=(d=>(d.Icon="img/icons/unicons",d.IOT="img/icons/iot",d.Marker="img/icons/marker",d.BG="img/bg",d))(o||{}),s=(d=>(d.Icon="icon",d.Image="image",d))(s||{}),l=(d=>(d.Folder="folder",d.URL="url",d.Upload="upload",d))(l||{}),f=(d=>(d.SMALL="small",d.NORMAL="normal",d))(f||{})},20927:(Y,O,e)=>{"use strict";e.d(O,{FP:()=>f,PI:()=>u,Qz:()=>c,WO:()=>a,cR:()=>p,pb:()=>d,rj:()=>i,z2:()=>r});var t=e(30471),n=e(33750),o=e(35645),s=e(25532),l=e(86682);function f(g,y){if(g?.series&&y.field)for(const E of g.series){const h=(0,s.getColorDimension)(E,y,o.v.theme2);if(!h.isAssumed||g.series.length===1)return h}return(0,s.getColorDimension)(void 0,y,o.v.theme2)}function d(g,y){if(g?.series&&y.field)for(const E of g.series){const h=(0,s.getScaledDimension)(E,y);if(!h.isAssumed||g.series.length===1)return h}return(0,s.getScaledDimension)(void 0,y)}function r(g,y){if(g?.series&&y.field)for(const E of g.series){const h=(0,l.y)(E,y);if(!h.isAssumed||g.series.length===1)return h}return(0,l.y)(void 0,y)}function c(g,y){if(g?.series&&y.field)for(const E of g.series){const h=(0,s.getResourceDimension)(E,y);if(!h.isAssumed||g.series.length===1)return h}return(0,s.getResourceDimension)(void 0,y)}function a(g,y){if(g?.series&&y.field)for(const E of g.series){const h=(0,s.getTextDimension)(E,y);if(!h.isAssumed||g.series.length===1)return h}return(0,s.getTextDimension)(void 0,y)}function u(g,y){const E=i(g,y);return E==null?void 0:g.fields[E]}function i(g,y){if(!(!g||!y?.length))for(let E=0;E<g.fields.length;E++){const h=g.fields[E];if(y===h.name)return E;const v=(0,t.CZ)(h,g);if(y===v)return E}}function p(g){const y=g.state?.calcs;if(y){const v=y[n.gz.lastNotNull];if(v!=null)return v}const E=g.values;let h=E.length-1;for(;h>=0;){const v=E[h--];if(v!=null)return v}}},64563:(Y,O,e)=>{"use strict";e.d(O,{y:()=>A});var t=e(9892),n=e(82897),o=e(66111),s=e(67483),l=e(59472),f=e(53768),d=e(76095),r=e(30471),c=e(56632),a=e(98825),u=e(40538),i=e(72648),p=e(60325),g=e(39904),y=e(31403),E=e(56703),h=e(91551),v=e(39493);function C(S,U,R){return(0,v.ZP)(S,F=>{F.defaults.custom===void 0&&(F.defaults.custom={}),F.defaults.max=R;const{custom:B}=F.defaults;switch(B.stacking===void 0&&(B.stacking={group:"A"}),U){case"lines":B.drawStyle=u.l8.Line,B.stacking.mode=u.o0.None,B.fillOpacity=0;break;case"bars":B.drawStyle=u.l8.Bars,B.stacking.mode=u.o0.None,B.fillOpacity=100;break;case"points":B.drawStyle=u.l8.Points,B.stacking.mode=u.o0.None,B.fillOpacity=0;break;case"stacked_lines":B.drawStyle=u.l8.Line,B.stacking.mode=u.o0.Normal,B.fillOpacity=100;break;case"stacked_bars":B.drawStyle=u.l8.Bars,B.stacking.mode=u.o0.Normal,B.fillOpacity=100;break;default:{const K=U;throw new Error(`Invalid graph-style: ${K}`)}}})}function m(S,U,R){return(0,v.ZP)(S,F=>{F.defaults.thresholds=R,F.defaults.custom=F.defaults.custom??{},F.defaults.custom.thresholdsStyle=U})}var D=e(8243),P=e(82965),b=e(96905);function M(S){const[U,{inc:R}]=(0,D.Z)(0),F=(0,P.Z)(S);return(0,o.useMemo)(()=>{F&&!(0,b.nl)(S,F,b.Ch)&&R()},[S,F,R]),U}const x=20;function A({data:S,height:U,width:R,timeZone:F,absoluteRange:B,onChangeTime:K,loadingState:L,annotations:N,onHiddenSeriesChanged:z,splitOpenFn:G,graphStyle:I,tooltipDisplayMode:V=u.f3.Single,anchorToZero:H=!1,yAxisMaximum:Q,thresholdsConfig:oe,thresholdsStyle:se,eventBus:ie}){const j=(0,i.l4)(),de=(0,i.wW)(T),[ce,ee]=(0,o.useState)(!1),le={from:(0,s.CQ)(B.from),to:(0,s.CQ)(B.to),raw:{from:(0,s.CQ)(B.from),to:(0,s.CQ)(B.to)}},q=(0,o.useMemo)(()=>(0,l.j)((0,E.F)(E.r),"Explore"),[]),[fe,Z]=(0,o.useState)({defaults:{min:H?0:void 0,max:Q||void 0,color:{mode:f.S.PaletteClassic},custom:{drawStyle:u.l8.Line,fillOpacity:0,pointSize:5}},overrides:[]}),ne=(0,o.useMemo)(()=>{const Ge=C(fe,I,Q);return m(Ge,se,oe)},[fe,I,Q,oe,se]),re=(0,o.useMemo)(()=>(0,d.SM)({fieldConfig:ne,data:ce?S:S.slice(0,x),timeZone:F,replaceVariables:Ge=>Ge,theme:j,fieldConfigRegistry:q}),[q,S,F,j,ne,ce]),ve=M(re);(0,o.useEffect)(()=>{if(z){const Ge=[];re.forEach(gt=>{gt.fields.map(Le=>Le.config?.custom?.hideFrom?.viz).every(n.identity)&&Ge.push((0,r.nf)(gt))}),z(Ge)}},[re,z]);const me={eventBus:ie,sync:()=>c.m.Crosshair,onSplitOpen:G,onToggleSeriesVisibility(Ge,gt){Z((0,h.N)(Ge,gt,fe,S))}},Ie=(0,o.useMemo)(()=>({tooltip:{mode:V,sort:u.As.None},legend:{displayMode:u.jK.List,showLegend:!0,placement:"bottom",calcs:[]}}),[V]);return o.createElement(p._w,{value:me},S.length>x&&!ce&&o.createElement("div",{className:de.timeSeriesDisclaimer},o.createElement(g.J,{className:de.disclaimerIcon,name:"exclamation-triangle"}),"Showing only ",x," time series.",o.createElement(y.zx,{variant:"primary",fill:"text",onClick:()=>ee(!0),className:de.showAllButton},"Show all ",S.length)),o.createElement(a.$,{data:{series:re,timeRange:le,state:L,annotations:N,structureRev:ve},pluginId:"timeseries",title:"",width:R,height:U,onChangeTimeRange:K,timeZone:F,options:Ie}))}const T=S=>({timeSeriesDisclaimer:t.css`
    label: time-series-disclaimer;
    margin: ${S.spacing(1)} auto;
    padding: 10px 0;
    text-align: center;
  `,disclaimerIcon:t.css`
    label: disclaimer-icon;
    color: ${S.colors.warning.main};
    margin-right: ${S.spacing(.5)};
  `,showAllButton:t.css`
    margin-left: ${S.spacing(.5)};
  `})},56041:(Y,O,e)=>{"use strict";e.d(O,{F:()=>y});var t=e(66111),n=e(38208),o=e(16983),s=e(64563),l=e(2594),f=e(27876);const d=f.EXPLORE_GRAPH_STYLES.map(E=>({value:E,label:E[0].toUpperCase()+E.slice(1).replace(/_/," ")}));function r(E){const{graphStyle:h,onChangeGraphStyle:v}=E;return t.createElement(l.S,{size:"sm",options:d,value:h,onChange:v})}var c=e(58379);const a="grafana.explore.style.graph",u=E=>{store.set(a,E)},i=()=>g(c.Z.get(a)),p="lines",g=E=>f.EXPLORE_GRAPH_STYLES.find(v=>v===E)??p,y=({data:E,eventBus:h,height:v,width:C,absoluteRange:m,timeZone:D,annotations:P,onChangeTime:b,splitOpenFn:M,thresholdsConfig:x,thresholdsStyle:A,loadingState:T,statusMessage:S})=>{const[U,R]=(0,t.useState)(i),F=(0,t.useCallback)(B=>{(0,o.FG)(B),R(B)},[]);return t.createElement(n.fm,{title:"Graph",width:C,height:v,loadingState:T,statusMessage:S,actions:t.createElement(r,{graphStyle:U,onChangeGraphStyle:F})},(B,K)=>t.createElement(s.y,{graphStyle:U,data:E,height:K,width:B,absoluteRange:m,onChangeTime:b,timeZone:D,annotations:P,splitOpenFn:M,loadingState:T,thresholdsConfig:x,thresholdsStyle:A,eventBus:h}))}},53739:(Y,O,e)=>{"use strict";e.d(O,{q:()=>o});var t=e(66111),n=e(67483);const o=({timeInMs:l,className:f,humanize:d})=>t.createElement("span",{className:f},s(l,d)),s=(l,f=!1)=>{const d=l/1e3;if(!f)return`${d.toFixed(1)}s`;const r=(0,n.Ks)(d,"seconds"),c=r.hours(),a=r.minutes(),u=r.seconds();return c?`${c}h ${a}m ${u}s`:a?`${a}m ${u}s`:`${u}s`}},94619:(Y,O,e)=>{"use strict";e.d(O,{m:()=>Q});var t=e(9892),n=e(66111),o=e(95831),s=e(206),l=e(94976),f=e(35645),d=e(20308),r=e(72648),c=e(83437),a=e(91162),u=e(25405),i=e(27876),p=e(93713),g=e(95638),y=e(13532),E=e(47891),h=e(67483),v=e(39904),C=e(41611);function m({splitOpenFn:se,traceToLogsOptions:ie,traceToMetricsOptions:j,dataFrame:de,createFocusSpanLink:ce,trace:ee}){if(!de)return;let le=R(ee);const q=de.fields.some(Z=>Boolean(Z.config.links?.length));if(de.fields.length===1||!q)return P(se,de.fields[0],ie,j,ce,le);if(q)return function(ne){le={...le,...F(ne)};const re=de.fields.find(ve=>Boolean(ve.config.links?.length));try{const ve=(0,C.a_)({field:re,rowIndex:ne.dataFrameRowIndex,splitOpenFn:se,range:S(ne),dataFrame:de,vars:le});return{logLinks:[{href:ve[0].href,onClick:ve[0].onClick,content:n.createElement(v.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:ve[0].origin}]}}catch(ve){console.error(ve);return}}}const D=["cluster","hostname","namespace","pod"].map(se=>({key:se}));function P(se,ie,j,de,ce,ee){let le;j?.datasourceUid&&(le=(0,a.ak)().getInstanceSettings(j.datasourceUid));const q=le?.type==="grafana-splunk-datasource";let fe;return de?.datasourceUid&&(fe=(0,a.ak)().getInstanceSettings(de.datasourceUid)),function(ne){ee={...ee,...F(ne)};const re={traceLinks:[]};let ve,me="";if(le&&j){const Ie=j.customQuery?j.query:void 0,Ge=j.tags||D;switch(le?.type){case"loki":me=T(ne,Ge),ve=b(ne,j,me,Ie);break;case"grafana-splunk-datasource":me=T(ne,Ge,{joinBy:" "}),ve=x(ne,j,me,Ie);break;case"elasticsearch":case"grafana-opensearch-datasource":me=T(ne,Ge,{labelValueSign:":",joinBy:" AND "}),ve=M(ne,j,me,Ie);break;case"grafana-falconlogscale-datasource":me=T(ne,Ge,{joinBy:" OR "}),ve=A(ne,j,me,Ie)}if(ve){const gt={title:le.name,url:"",internal:{datasourceUid:le.uid,datasourceName:le.name,query:ve}};if(ee={...ee,__tags:{text:"Tags",value:me}},(0,C.lt)(gt.internal.query,ee).allVariablesDefined){const Te=(0,l._)({link:gt,internalLink:gt.internal,scopedVars:ee,range:S(ne,{startMs:j.spanStartTimeShift?E.intervalToMs(j.spanStartTimeShift):0,endMs:j.spanEndTimeShift?E.intervalToMs(j.spanEndTimeShift):0},q),field:{},onClickFn:se,replaceVariables:(0,d.J)().replace.bind((0,d.J)())});re.logLinks=[{href:Te.href,onClick:Te.onClick,content:n.createElement(v.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:ie}]}}}if(fe&&de?.queries){re.metricLinks=[];for(const Ie of de.queries){const Ge=U(Ie,de?.tags||[],ne),gt={title:fe.name,url:"",internal:{datasourceUid:fe.uid,datasourceName:fe.name,query:{expr:Ge,refId:"A"}}},Te=(0,l._)({link:gt,internalLink:gt.internal,scopedVars:{},range:S(ne,{startMs:de.spanStartTimeShift?E.intervalToMs(de.spanStartTimeShift):0,endMs:de.spanEndTimeShift?E.intervalToMs(de.spanEndTimeShift):0}),field:{},onClickFn:se,replaceVariables:(0,d.J)().replace.bind((0,d.J)())});re.metricLinks.push({title:Ie?.name,href:Te.href,onClick:Te.onClick,content:n.createElement(v.J,{name:"chart-line",title:"Explore metrics for this span"}),field:ie})}}if(ne.references&&ce)for(const Ie of ne.references){if(Ie.refType==="CHILD_OF")continue;const Ge=ce(Ie.traceID,Ie.spanID);re.traceLinks.push({href:Ge.href,title:Ie.span?Ie.span.operationName:"View linked span",content:n.createElement(v.J,{name:"link",title:"View linked span"}),onClick:Ge.onClick,field:Ge.origin})}if(ne.subsidiarilyReferencedBy&&ce)for(const Ie of ne.subsidiarilyReferencedBy){const Ge=ce(Ie.traceID,Ie.spanID);re.traceLinks.push({href:Ge.href,title:Ie.span?Ie.span.operationName:"View linked span",content:n.createElement(v.J,{name:"link",title:"View linked span"}),onClick:Ge.onClick,field:Ge.origin})}return re}}function b(se,ie,j,de){const{filterByTraceID:ce,filterBySpanID:ee}=ie;if(de)return{expr:de,refId:""};if(!j)return;let le="{${__tags}}";return ce&&se.traceID&&(le+=' |="${__span.traceId}"'),ee&&se.spanID&&(le+=' |="${__span.spanId}"'),{expr:le,refId:""}}function M(se,ie,j,de){const{filterByTraceID:ce,filterBySpanID:ee}=ie;if(de)return{query:de,refId:"",metrics:[{id:"1",type:"logs"}]};let le=[];return ee&&se.spanID&&le.push('"${__span.spanId}"'),ce&&se.traceID&&le.push('"${__span.traceId}"'),j&&le.push("${__tags}"),{query:le.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function x(se,ie,j,de){const{filterByTraceID:ce,filterBySpanID:ee}=ie;if(de)return{query:de,refId:""};let le="";return j&&(le+="${__tags}"),ce&&se.traceID&&(le+=' "${__span.traceId}"'),ee&&se.spanID&&(le+=' "${__span.spanId}"'),{query:le,refId:""}}function A(se,ie,j,de){const{filterByTraceID:ce,filterBySpanID:ee}=ie;if(de)return{lsql:de,refId:""};if(!j)return;let le="${__tags}";return ce&&se.traceID&&(le+=' or "${__span.traceId}"'),ee&&se.spanID&&(le+=' or "${__span.spanId}"'),{lsql:le,refId:""}}function T(se,ie,{labelValueSign:j="=",joinBy:de=", "}={}){return[...se.process.tags,...se.tags,{key:"spanId",value:se.spanID},{key:"traceId",value:se.traceID},{key:"name",value:se.operationName},{key:"duration",value:se.duration}].map(ce=>{const ee=ie.find(le=>le.key===ce.key);if(ee)return`${ee.value?ee.value:ee.key}${j}"${ce.value}"`}).filter(ce=>Boolean(ce)).join(de)}function S(se,ie={startMs:0,endMs:0},j=!1){const de=Math.floor(se.startTime/1e3+ie.startMs),ce=(0,h.CQ)(de),ee=(se.startTime+se.duration)/1e3;let le=Math.floor(ee+ie.endMs);j&&le-de<1e3?le=de+1e3:de===le&&le++;const q=(0,h.CQ)(le);return{from:ce,to:q,raw:{from:ce,to:q}}}function U(se,ie=[],j){if(!se.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${j.process.serviceName}"}[5m])) by (le))`;let de=se.query;if(ie.length&&de.indexOf("$__tags")!==-1){const ce=[...j.process.tags,...j.tags],le=ie.reduce((q,fe)=>{const Z=ce.find(ne=>ne.key===fe.key)?.value;return Z&&q.push(`${fe.value?fe.value:fe.key}="${Z}"`),q},[])?.join(", ");de=de.replace(/\$__tags/g,le)}return de}function R(se){return{__trace:{text:"Trace",value:{duration:se.duration,name:se.traceName,traceId:se.traceID}}}}function F(se){const ie={};for(const j of se.process.tags)ie[j.key]=j.value;for(const j of se.tags)ie[j.key]=j.value;return{__span:{text:"Span",value:{spanId:se.spanID,traceId:se.traceID,duration:se.duration,name:se.operationName,tags:ie}}}}function B(){const[se,ie]=(0,n.useState)(new Set),j=(0,n.useCallback)(function(fe){if(se.size===0)return;let Z=-1,ne=!0;const re=fe.reduce((ve,me)=>(me.depth<=Z&&(ne=!0),ne&&ve.has(me.spanID)&&(ve.delete(me.spanID),ne=!1,Z=me.depth),ve),new Set(se));ie(re)},[se]),de=(0,n.useCallback)(function(fe){if(K(fe,se))return;let Z;const ne=fe.reduce((re,ve)=>(Z&&ve.depth<=Z.depth?(re.add(Z.spanID),ve.hasChildren&&(Z=ve)):ve.hasChildren&&!re.has(ve.spanID)&&(Z=ve),re),new Set(se));Z&&ne.add(Z.spanID),ie(ne)},[se]),ce=(0,n.useCallback)(function(){ie(new Set)},[]),ee=(0,n.useCallback)(function(fe){if(K(fe,se))return;const Z=fe.reduce((ne,re)=>(re.hasChildren&&ne.add(re.spanID),ne),new Set);ie(Z)},[se]),le=(0,n.useCallback)(function(fe){const Z=new Set(se);se.has(fe)?Z.delete(fe):Z.add(fe),ie(Z)},[se]);return{childrenHiddenIDs:se,expandOne:j,collapseOne:de,expandAll:ce,collapseAll:ee,childrenToggle:le}}function K(se,ie){return se.filter(de=>de.hasChildren).length===ie.size}function L(se){const[ie,j]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{j(new Map)},[se,j]);const de=(0,n.useCallback)(function(q){const fe=new Map(ie);fe.has(q)?fe.delete(q):fe.set(q,new g.DetailState),j(fe)},[ie]),ce=(0,n.useCallback)(function(q,fe){const Z=ie.get(q);if(!Z)return;const ne=Z.toggleLogItem(fe),re=new Map(ie);return re.set(q,ne),j(re)},[ie]),ee=(0,n.useCallback)(function(q,fe){const Z=ie.get(q);if(!Z)return;const ne=Z.toggleReferenceItem(fe),re=new Map(ie);return re.set(q,ne),j(re)},[ie]);return{detailStates:ie,toggleDetail:de,detailLogItemToggle:ce,detailLogsToggle:(0,n.useCallback)(le=>N("logs",ie,j)(le),[ie]),detailWarningsToggle:(0,n.useCallback)(le=>N("warnings",ie,j)(le),[ie]),detailStackTracesToggle:(0,n.useCallback)(le=>N("stackTraces",ie,j)(le),[ie]),detailReferenceItemToggle:ee,detailReferencesToggle:(0,n.useCallback)(le=>N("references",ie,j)(le),[ie]),detailProcessToggle:(0,n.useCallback)(le=>N("process",ie,j)(le),[ie]),detailTagsToggle:(0,n.useCallback)(le=>N("tags",ie,j)(le),[ie])}}function N(se,ie,j){return de=>{const ce=ie.get(de);if(!ce)return;let ee;se==="tags"?ee=ce.toggleTags():se==="process"?ee=ce.toggleProcess():se==="warnings"?ee=ce.toggleWarnings():se==="references"?ee=ce.toggleReferences():se==="stackTraces"?ee=ce.toggleStackTraces():ee=ce.toggleLogs();const le=new Map(ie);le.set(de,ee),j(le)}}function z(){const[se,ie]=(0,n.useState)(new Set),j=(0,n.useCallback)(function(ee){ie(le=>{const q=new Set(le);return q.add(ee),q})},[]),de=(0,n.useCallback)(function(ee){ie(le=>{const q=new Set(le);return q.delete(ee),q})},[]);return{hoverIndentGuideIds:se,addHoverIndentGuideId:j,removeHoverIndentGuideId:de}}var G=e(75151);function I(){const[se,ie]=(0,n.useState)({time:{current:[0,1]}}),j=(0,n.useCallback)(function(ee){ie(le=>{const q={...le.time,...ee};return{...le,time:q}})},[]),de=(0,n.useCallback)(function(ee,le){const fe={current:[ee,le]};ie(Z=>({...Z,time:fe}))},[]);return{viewRange:se,updateViewRangeTime:de,updateNextViewRangeTime:j}}const V=se=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${se.typography.h4.fontSize};
    color: ${se.colors.text.secondary};
  `});function H(){return{}}function Q(se){const{spanFindMatches:ie,traceProp:j,datasource:de,topOfViewRef:ce,topOfViewRefType:ee,exploreId:le}=se,{detailStates:q,toggleDetail:fe,detailLogItemToggle:Z,detailLogsToggle:ne,detailProcessToggle:re,detailReferencesToggle:ve,detailReferenceItemToggle:me,detailTagsToggle:Ie,detailWarningsToggle:Ge,detailStackTracesToggle:gt}=L(se.dataFrames[0]),{removeHoverIndentGuideId:Te,addHoverIndentGuideId:Le,hoverIndentGuideIds:Ye}=z(),{viewRange:it,updateViewRangeTime:ht,updateNextViewRangeTime:Re}=I(),{expandOne:ye,collapseOne:Ce,childrenToggle:be,collapseAll:We,childrenHiddenIDs:Qe,expandAll:mt}=B(),{newTraceViewHeaderSearch:vt,setNewTraceViewHeaderSearch:rt,spanFilterMatches:Ot}=(0,G.F4)(j?.spans),[Et,Mt]=(0,n.useState)(""),[ue,De]=(0,o.Z)(!1),[Ne,tt]=(0,n.useState)(!1),[et,Ue]=(0,n.useState)(0),Fe=(0,r.wW)(V),[Ee,Me]=(0,n.useState)(.25),[He,Ze]=oe({refId:se.dataFrames[0]?.refId,exploreId:se.exploreId,datasource:de,splitOpenFn:se.splitOpenFn}),lt=(0,n.useMemo)(()=>({childrenHiddenIDs:Qe,detailStates:q,hoverIndentGuideIds:Ye,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:Ee,traceID:se.traceProp?.traceID}),[Qe,q,Ye,Ee,se.traceProp?.traceID]),bt=(0,a.ak)().getInstanceSettings(de?.name),Pt=(0,c.p)(bt?.jsonData),Je=bt?.jsonData?.tracesToMetrics,Dt=bt?.jsonData,Ve=(0,n.useMemo)(()=>m({splitOpenFn:se.splitOpenFn,traceToLogsOptions:Pt,traceToMetricsOptions:Je,dataFrame:se.dataFrames[0],createFocusSpanLink:Ze,trace:j}),[se.splitOpenFn,Pt,Je,se.dataFrames,Ze,j]),Xe=(0,i.useSelector)(xt=>(0,u.Z)(xt.user)),st=de?de?.type:"unknown",ut=se.scrollElement?se.scrollElement:document.getElementsByClassName(se.scrollElementClass??"")[0];return n.createElement(n.Fragment,null,se.dataFrames?.length&&j?n.createElement(n.Fragment,null,f.v.featureToggles.newTraceViewHeader?n.createElement(n.Fragment,null,n.createElement(g.NewTracePageHeader,{trace:j,data:se.dataFrames[0],timeZone:Xe,search:vt,setSearch:rt,showSpanFilters:ue,setShowSpanFilters:De,showSpanFilterMatchesOnly:Ne,setShowSpanFilterMatchesOnly:tt,setFocusedSpanIdForSearch:Mt,spanFilterMatches:Ot,datasourceType:st,setHeaderHeight:Ue,app:le?s.zj.Explore:s.zj.Unknown}),n.createElement(y.Z,{trace:j,viewRange:it,updateNextViewRangeTime:Re,updateViewRangeTime:ht})):n.createElement(g.TracePageHeader,{trace:j,updateNextViewRangeTime:Re,updateViewRangeTime:ht,viewRange:it,timeZone:Xe}),n.createElement(g.TraceTimelineViewer,{registerAccessors:H,scrollToFirstVisibleSpan:H,findMatchesIDs:f.v.featureToggles.newTraceViewHeader?Ot:ie,trace:j,datasourceType:st,spanBarOptions:Dt?.spanBar,traceTimeline:lt,updateNextViewRangeTime:Re,updateViewRangeTime:ht,viewRange:it,timeZone:Xe,setSpanNameColumnWidth:Me,collapseAll:We,collapseOne:Ce,expandAll:mt,expandOne:ye,childrenToggle:be,clearShouldScrollToFirstUiFindMatch:H,detailLogItemToggle:Z,detailLogsToggle:ne,detailWarningsToggle:Ge,detailStackTracesToggle:gt,detailReferencesToggle:ve,detailReferenceItemToggle:me,detailProcessToggle:re,detailTagsToggle:Ie,detailToggle:fe,setTrace:H,addHoverIndentGuideId:Le,removeHoverIndentGuideId:Te,linksGetter:()=>[],uiFind:se.search,createSpanLink:Ve,scrollElement:ut,focusedSpanId:He,focusedSpanIdForSearch:f.v.featureToggles.newTraceViewHeader?Et:se.focusedSpanIdForSearch,showSpanFilterMatchesOnly:Ne,createFocusSpanLink:Ze,topOfViewRef:ce,topOfViewRefType:ee,headerHeight:et})):n.createElement("div",{className:Fe.noDataMsg},"No data"))}function oe(se){const ie=(0,i.useSelector)(q=>q.explore[se.exploreId]?.panelsState.trace),j=ie?.spanId,de=(0,i.useDispatch)(),ce=q=>de((0,p.km)(se.exploreId,"trace",{...ie,spanId:q})),ee=(0,i.useSelector)(q=>q.explore[se.exploreId]?.queries.find(fe=>fe.refId===se.refId));return[j,(q,fe)=>{const Z={title:"Deep link to this span",url:"",internal:{datasourceUid:se.datasource?.uid,datasourceName:se.datasource?.name,query:{...ee,query:q},panelsState:{trace:{spanId:fe}}}},ne=ee?.queryType==="traceql"&&ee.query===q;return(0,l._)({link:Z,internalLink:Z.internal,scopedVars:{},range:{},field:{},onClickFn:ne?()=>ce(j===fe?void 0:fe):se.splitOpenFn?()=>se.splitOpenFn({datasourceUid:se.datasource?.uid,query:{...ee,query:q},panelsState:{trace:{spanId:fe}}}):void 0,replaceVariables:(0,d.J)().replace.bind((0,d.J)())})}]}},99746:(Y,O,e)=>{"use strict";e.d(O,{h:()=>n});var t=e(28550);function n(o,s,l){if(o.isLight)return s;{if(l){const r=(0,t.Z)(s);return t.Z.mostReadable(l,[r.clone().lighten(25),r.clone().lighten(10),r,r.clone().darken(10),r.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=(0,t.Z)(s).toHsl();f.l=1-f.l;const d=(0,t.Z)(f);return d.isLight()?d.darken(5).toHex8String():d.lighten(5).toHex8String()}}},13532:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>H});var t=e(9085),n=e.n(t),o=e(58635),s=e(66111),l=e(42413),f=e(9892),d=e(7804),r=e(72648),c=e(99746),a=e(9096);const u=.8,i=2,p=200,g=10,y=60,E=6;function h(Q,oe,se,ie,j){const de=new Map,ce=oe.length<y?y:Math.min(oe.length,p),ee=window.innerWidth*2;Q.width=ee,Q.height=ce;const le=Math.min(E,Math.max(i,ce/oe.length)),q=ce/oe.length,fe=Q.getContext("2d",{alpha:!1});if(fe){fe.fillStyle=j,fe.fillRect(0,0,ee,ce);for(let Z=0;Z<oe.length;Z++){const{valueWidth:ne,valueOffset:re,serviceName:ve}=oe[Z],me=re/se*ee;let Ie=ne/se*ee;Ie<g&&(Ie=g);let Ge=de.get(ve);Ge||(Ge=`rgba(${ie(ve).concat(u).join()})`,de.set(ve,Ge)),fe.fillStyle=Ge,fe.fillRect(me,Z*q,Ie,le)}}}const v=(0,d.B)(Q=>({CanvasSpanGraph:f.css`
      label: CanvasSpanGraph;
      background: ${(0,c.h)(Q,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class C extends s.PureComponent{constructor(oe){super(oe),this.getColor=se=>(0,a.e6)(se,this.props.theme),this._setCanvasRef=se=>{this._canvasElm=se},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:oe,items:se}=this.props;h(this._canvasElm,se,oe,this.getColor,(0,c.h)(this.props.theme,"#fff"))}}render(){return s.createElement("canvas",{className:v(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const m=(0,r.HE)(C);var D=e(320);const P=()=>({TickLabels:f.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:f.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function b(Q){const{numTicks:oe,duration:se}=Q,ie=(0,r.wW)(P),j=[];for(let de=0;de<oe+1;de++){const ce=de/oe,ee=ce===1?{right:"0%"}:{left:`${ce*100}%`};j.push(s.createElement("div",{key:ce,className:ie.TickLabelsLabel,style:ee,"data-testid":"tick"},(0,D.LU)(se*ce)))}return s.createElement("div",{className:ie.TickLabels,"data-testid":"TickLabels"},j)}var M=e(31403),x=e(54373);const A=()=>({GraphTick:f.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function T(Q){const{numTicks:oe}=Q,se=(0,r.wW)(A),ie=[];for(let j=1;j<oe;j++){const de=`${j/oe*100}%`;ie.push(s.createElement("line",{className:se.GraphTick,x1:de,y1:"0%",x2:de,y2:"100%",key:j/oe}))}return s.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},ie)}const S=()=>({ScrubberHandleExpansion:n()(f.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:n()(f.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:n()(f.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:f.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:f.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function U({isDragging:Q,onMouseDown:oe,onMouseEnter:se,onMouseLeave:ie,position:j}){const de=`${j*100}%`,ce=(0,r.wW)(S),ee=n()({[ce.ScrubberDragging]:Q});return s.createElement("g",{className:ee,"data-testid":"scrubber-component"},s.createElement("g",{"data-testid":"scrubber-component-g",className:ce.ScrubberHandles,onMouseDown:oe,onMouseEnter:se,onMouseLeave:ie},s.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:de,className:ce.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),s.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:de,className:ce.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),s.createElement("line",{className:ce.ScrubberLine,y2:"100%",x1:de,x2:de,"data-testid":"scrubber-component-line"}))}const R=(0,d.B)(Q=>{const oe="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",se=f.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:f.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${oe} {
        display: unset;
      }
    `,ViewingLayerGraph:f.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,c.h)(Q,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:f.css`
      label: ViewingLayerInactive;
      fill: ${(0,c.h)(Q,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:f.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,c.h)(Q,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:f.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:f.css`
      label: ViewingLayerDrag;
      fill: ${(0,c.h)(Q,"#44f")};
    `,ViewingLayerFullOverlay:f.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:se,ViewingLayerResetZoomHoverClassName:oe}}),F={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function B(Q,oe){const[se,ie]=Q<oe?[Q,oe]:[oe,Q];return{x:`${se*100}%`,width:`${(ie-se)*100}%`,leadingX:`${oe*100}%`}}class K extends s.PureComponent{constructor(oe){super(oe),this._setRoot=se=>{this._root=se},this._getDraggingBounds=se=>{if(!this._root)throw new Error("invalid state");const{left:ie,width:j}=this._root.getBoundingClientRect(),[de,ce]=this.props.viewRange.time.current;let ee=1,le=0;return se===F.SHIFT_START?ee=ce:se===F.SHIFT_END&&(le=de),{clientXLeft:ie,maxValue:ee,minValue:le,width:j}},this._handleReframeMouseMove=({value:se})=>{this.props.updateNextViewRangeTime({cursor:se})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:se})=>{const ie=se,{time:j}=this.props.viewRange,ce={reframe:{anchor:j.reframe?j.reframe.anchor:ie,shift:ie}};this.props.updateNextViewRangeTime(ce)},this._handleReframeDragEnd=({manager:se,value:ie})=>{const{time:j}=this.props.viewRange,de=j.reframe?j.reframe.anchor:ie,[ce,ee]=ie<de?[ie,de]:[de,ie];se.resetBounds(),this.props.updateViewRangeTime(ce,ee,"minimap")},this._handleScrubberEnterLeave=({type:se})=>{const ie=se===x.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:ie})},this._handleScrubberDragUpdate=({event:se,tag:ie,type:j,value:de})=>{j===x.EUpdateTypes.DragStart&&se.stopPropagation(),ie===F.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:de}):ie===F.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:de})},this._handleScrubberDragEnd=({manager:se,tag:ie,value:j})=>{const[de,ce]=this.props.viewRange.time.current;let ee;if(ie===F.SHIFT_START)ee=[j,ce];else if(ie===F.SHIFT_END)ee=[de,j];else throw new Error("bad state");se.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(ee[0],ee[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:F.REFRAME}),this._draggerStart=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:F.SHIFT_START}),this._draggerEnd=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:F.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(oe,se){const ie=R(this.props.theme),j=B(oe,se);return[s.createElement("rect",{key:"fill",className:n()(ie.ViewingLayerDraggedShift,ie.ViewingLayerDrag),x:j.x,y:"0",width:j.width,height:this.props.height-2}),s.createElement("rect",{key:"edge",className:n()(ie.ViewingLayerDrag),x:j.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:oe,viewRange:se,numTicks:ie,theme:j}=this.props,{preventCursorLine:de}=this.state,{current:ce,cursor:ee,shiftStart:le,shiftEnd:q,reframe:fe}=se.time,Z=le!=null||q!=null||fe!=null,[ne,re]=ce;let ve=0;ne&&(ve=ne*100);let me=100;re&&(me=100-re*100);let Ie;!Z&&ee!=null&&!de&&(Ie=`${ee*100}%`);const Ge=R(j);return s.createElement("div",{"aria-hidden":!0,className:Ge.ViewingLayer,style:{height:oe}},(ne!==0||re!==1)&&s.createElement(M.zx,{onClick:this._resetTimeZoomClickHandler,className:n()(Ge.ViewingLayerResetZoom,Ge.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),s.createElement("svg",{height:oe,className:Ge.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},ve>0&&s.createElement("rect",{x:0,y:0,height:"100%",width:`${ve}%`,className:Ge.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),me>0&&s.createElement("rect",{x:`${100-me}%`,y:0,height:"100%",width:`${me}%`,className:Ge.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),s.createElement(T,{numTicks:ie}),Ie&&s.createElement("line",{className:Ge.ViewingLayerCursorGuide,x1:Ie,y1:"0",x2:Ie,y2:oe-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),le!=null&&this._getMarkers(ne,le),q!=null&&this._getMarkers(re,q),s.createElement(U,{isDragging:le!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ne||0}),s.createElement(U,{isDragging:q!=null,position:re||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),fe!=null&&this._getMarkers(fe.anchor,fe.shift)),Z&&s.createElement("div",{className:Ge.ViewingLayerFullOverlay}))}}const L=(0,r.HE)(K),N=60,z=4;function G(Q){return{valueOffset:Q.relativeStartTime,valueWidth:Q.duration,serviceName:Q.process.serviceName}}function I(Q){return Q.spans.map(G)}const V=(0,o.Z)(I);class H extends s.PureComponent{render(){const{height:oe,trace:se,viewRange:ie,updateNextViewRangeTime:j,updateViewRangeTime:de}=this.props;if(!se)return s.createElement("div",null);const ce=V(se);return s.createElement("div",{className:n()(l.GL,l.H3)},s.createElement(b,{numTicks:z,duration:se.duration}),s.createElement("div",{className:l.WW},s.createElement(m,{valueWidth:se.duration,items:ce}),s.createElement(L,{viewRange:ie,numTicks:z,height:oe||N,updateViewRangeTime:de,updateNextViewRangeTime:j})))}}H.defaultProps={height:N}},72861:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>g});var t=e(9892),n=e(9085),o=e.n(n),s=e(66111),l=e(41818),f=e(35645),d=e(72648),r=e(31403),c=e(8180),a=e(46967);class u extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:E,inputProps:h,value:v}=this.props,C=s.createElement(s.Fragment,null,h.suffix,E&&v&&v.length&&s.createElement(c.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(a.I,{placeholder:"Find...",...h,onChange:m=>this.props.onChange(m.currentTarget.value),suffix:C,value:v})}}u.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var i=e(42413);const p=y=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${y.zIndex.navbarFixed};
      background: ${y.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: ${y.shape.radius.default};
      box-shadow: ${y.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),g=(0,s.memo)(function(E){const{navigable:h,setSearch:v,searchValue:C,searchBarSuffix:m,spanFindMatches:D,focusedSpanIdForSearch:P,setSearchBarSuffix:b,setFocusedSpanIdForSearch:M,datasourceType:x}=E,A=(0,d.wW)(p),T=C?s.createElement("span",{className:A.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},m):null,S=o()(A.TracePageSearchBarBtn,{[A.TracePageSearchBarBtnDisabled]:!C}),U={className:o()(A.TracePageSearchBarBar,i.A4),name:"search",suffix:T},R=L=>{M(""),b(""),v(L)},F=()=>{(0,l.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:f.v.buildInfo.version,direction:"next"});const L=Array.from(D),N=L.indexOf(P)?L.indexOf(P):0;if(N===-1||N===L.length-1){M(L[0]),b(K(1));return}M(L[N+1]),b(K(N+2))},B=()=>{(0,l.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:f.v.buildInfo.version,direction:"prev"});const L=Array.from(D),N=L.indexOf(P)?L.indexOf(P):0;if(N===-1||N===0){M(L[L.length-1]),b(K(L.length));return}M(L[N-1]),b(K(N))},K=L=>D?.size&&D?.size>0?L+" of "+D?.size:"";return s.createElement("div",{className:A.TracePageSearchBar},s.createElement("span",{className:i.NY,style:{display:"flex"}},s.createElement(u,{onChange:R,value:C,inputProps:U,allowClear:!0}),s.createElement(s.Fragment,null,h&&s.createElement(s.Fragment,null,s.createElement(r.zx,{className:S,variant:"secondary",disabled:!C,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:F}),s.createElement(r.zx,{className:S,variant:"secondary",disabled:!C,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:B})))))})},55478:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>c});var t=e(9892),n=e(9085),o=e.n(n),s=e(66111),l=e(72648),f=e(99746),d=e(5861);const r=a=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,f.h)(a,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function c(a){const{endTime:u,numTicks:i,showLabels:p,startTime:g}=a;let y;if(p){y=[];const v=(u||0)-(g||0);for(let C=0;C<i;C++){const m=(g||0)+C/(i-1)*v;y.push((0,d.LU)(m))}}const E=(0,l.wW)(r),h=[];for(let v=0;v<i;v++){const C=v/(i-1);h.push(s.createElement("div",{"data-testid":"TicksID",key:C,className:E.TicksTick,style:{left:`${C*100}%`}},y&&s.createElement("span",{className:o()(E.TicksTickLabel,{[E.TicksTickLabelEndAnchor]:C>=1})},y[v])))}return s.createElement("div",{className:E.Ticks},h)}c.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(9892),n=e(9085),o=e.n(n),s=e(66111),l=e(72648),f=e(42413);const d=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function r(a){const{children:u,className:i="",...p}=a,g=(0,l.wW)(d);return s.createElement("div",{className:o()(g.flexRow,i),...p},u)}r.defaultProps={className:""};function c(a){const{children:u,className:i="",width:p,style:g,...y}=a,E=`${p*100}%`,h={...g,flexBasis:E,maxWidth:E};return s.createElement("div",{className:o()(f.WW,i),style:h,"data-testid":"TimelineRowCell",...y},u)}c.defaultProps={className:"",style:{}},r.Cell=c},93183:(Y,O,e)=>{"use strict";e.d(O,{l4:()=>Ve,ZP:()=>ya});var t=e(9892),n=e(82897),o=e(58635),s=e(66111),l=e(41818),f=e(35645),d=e(7804),r=e(64319),c=e(72648);const a="peer.service";var u=e(9096);class i{constructor(ft){this.ys=[],this.heights=[],this.bufferLen=ft,this.dataLen=-1,this.lastI=-1}profileData(ft){ft!==this.dataLen&&(this.dataLen=ft,this.ys.length=ft,this.heights.length=ft,this.lastI>=ft&&(this.lastI=ft-1))}calcHeights(ft,Ht,$t){$t!=null&&(this.lastI=$t);let zt=ft+this.bufferLen;if(zt<=this.lastI)return;zt>=this.heights.length&&(zt=this.heights.length-1);let Wt=this.lastI;for(this.lastI===-1&&(Wt=0,this.ys[0]=0);Wt<=zt;){const jt=this.heights[Wt]=Ht(Wt);this.ys[Wt+1]=this.ys[Wt]+jt,Wt++}this.lastI=zt}calcYs(ft,Ht){for(;(this.ys[this.lastI]==null||ft>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Ht)}confirmHeight(ft,Ht){let $t=ft;if($t>this.lastI){this.calcHeights($t,Ht);return}const zt=Ht($t);if(zt===this.heights[$t])return;const Wt=zt-this.heights[$t];for(this.heights[$t]=zt;++$t<=this.lastI;)this.ys[$t]+=Wt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Wt)}findFloorIndex(ft,Ht){this.calcYs(ft,Ht);let $t=0,zt=this.lastI;if(this.ys.length<2||ft<this.ys[1])return 0;if(ft>this.ys[zt])return zt;let Wt;for(;$t<zt;)if(Wt=$t+.5*(zt-$t)|0,ft>this.ys[Wt]){if(ft<=this.ys[Wt+1])return Wt;$t=Wt}else if(ft<this.ys[Wt]){if(ft>=this.ys[Wt-1])return Wt-1;zt=Wt}else return Wt;throw new Error(`unable to find floor index for y=${ft}`)}getRowPosition(ft,Ht){return this.confirmHeight(ft,Ht),{height:this.heights[ft],y:this.ys[ft]}}getEstimatedHeight(){const ft=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?ft|0:ft/(this.lastI+1)*this.heights.length|0}}const p=100;class g extends s.Component{constructor(ft){super(ft),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Ht=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Ht,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Ht=>this._yPositions.getRowPosition(Ht,this._getHeight),this.scrollToIndex=(Ht,$t)=>{const{scrollElement:zt}=this.props,Wt=zt?.getBoundingClientRect().top||0,sn=(zt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Wt,pn=this.getRowPosition(Ht).y;this.props.scrollElement?.scrollTo({top:pn+sn-$t-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Ht=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,$t=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Ht<this._startIndexDrawn||$t>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Ht=>{this.props.windowScroller&&(this._wrapperElm=Ht,Ht&&(this._viewHeight=Ht.clientHeight))},this._initItemHolder=Ht=>{this._itemHolderElm=Ht,this._scanItemHeights()},this._scanItemHeights=()=>{const Ht=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let $t=null,zt=null,Wt=!1;const jt=this._itemHolderElm.childNodes,sn=jt.length;for(let pn=0;pn<sn;pn++){const Pn=jt[pn],Mn=Pn.getAttribute("data-item-key");if(!Mn){console.warn("itemKey not found");continue}const Hn=(Pn.firstElementChild||Pn).clientHeight,_n=this._knownHeights.get(Mn);Hn!==_n&&(this._knownHeights.set(Mn,Hn),Wt?zt=Mn:(Wt=!0,$t=zt=Mn))}if($t!=null&&zt!=null){const pn=Ht($t),Pn=zt===$t?pn:Ht(zt);this._yPositions.calcHeights(Pn,this._getHeight,pn),this.forceUpdate()}},this._getHeight=Ht=>{const $t=this.props.getKeyFromIndex(Ht),zt=this._knownHeights.get($t);return zt!=null&&zt===zt?zt:this.props.itemHeightGetter(Ht,$t)},this._yPositions=new i(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:ft}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=ft+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(ft){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&ft.scrollElement!==this.props.scrollElement&&(ft.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const ft=this.props.windowScroller,Ht=ft?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,$t=ft?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Ht!==this._viewHeight||$t!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Ht=this._scrollTop,$t=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Ht,this._getHeight),this._endIndex=this._yPositions.findFloorIndex($t,this._getHeight)}render(){const{dataLength:ft,getKeyFromIndex:Ht,initialDraw:$t=p,itemRenderer:zt,viewBuffer:Wt,viewBufferMin:jt}=this.props,sn=this._getHeight,pn=[];let Pn,Mn;if(this._yPositions.profileData(ft),!this._wrapperElm)Pn=0,Mn=($t<ft?$t:ft)-1;else{this._isViewChanged()&&this._calcViewIndexes();const _n=jt>this._startIndex?0:this._startIndex-jt,oa=jt<ft-this._endIndex?this._endIndex+jt:ft-1;_n<this._startIndexDrawn||oa>this._endIndexDrawn?(Pn=Wt>this._startIndex?0:this._startIndex-Wt,Mn=this._endIndex+Wt,Mn>=ft&&(Mn=ft-1)):(Pn=this._startIndexDrawn>ft-1?0:this._startIndexDrawn,Mn=this._endIndexDrawn>ft-1?ft-1:this._endIndexDrawn)}this._yPositions.calcHeights(Mn,sn,Pn||-1),this._startIndexDrawn=Pn,this._endIndexDrawn=Mn,pn.length=Mn-Pn+1;for(let _n=Pn;_n<=Mn;_n++){const{y:oa,height:Gt}=this._yPositions.getRowPosition(_n,sn),Bt={height:Gt,top:oa,position:"absolute"},on=Ht(_n),rn={"data-item-key":on};pn.push(zt(on,Bt,_n,rn))}const Cn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Cn.onScroll=this._onScroll,Cn.style.height="100%",Cn.style.overflowY="auto");const Hn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...Cn,"data-testid":"ListView"},s.createElement("div",{style:Hn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},pn)))}}g.defaultProps={initialDraw:p,itemsWrapperClassName:"",windowScroller:!1};var y=e(9085),E=e.n(y),h=e(39904),v=e(99746),C=e(52541),m=e(68183),D=e(39604),P=e(56921);function b({children:Lt,content:ft,overlayClassName:Ht}){const $t=(0,s.useRef)(null);return s.createElement(D.D,{content:ft,hideAfter:300},(zt,Wt,jt)=>s.createElement(s.Fragment,null,$t.current&&s.createElement(P.J,{...jt,referenceElement:$t.current,wrapperClassName:Ht,onMouseLeave:Wt,onMouseEnter:zt}),s.cloneElement(Lt,{ref:$t,onMouseEnter:zt,onMouseLeave:Wt})))}var M=e(42413),x=e(5861);const A="label";var T=e(61860),S=e(31403);const U=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function R(Lt){const ft=(0,c.wW)(U),[Ht,$t]=(0,s.useState)(!1),zt=()=>{navigator.clipboard.writeText(Lt.copyText),$t(!0)};return s.createElement(T.u,{content:Ht?"Copied":Lt.tooltipTitle},s.createElement(S.zx,{className:E()(ft.CopyIcon),type:"button",icon:Lt.icon,onClick:zt}))}R.defaultProps={icon:"copy",className:void 0};var F=e(23932),B=e.n(F);const K="copyIcon",L=Lt=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,v.h)(Lt,"#fff")};
      border: 1px solid ${(0,v.h)(Lt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,v.h)(Lt,"#f5f5f5")};
      }
      &:not(:hover) .${K} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,v.h)(Lt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),N=/^(\[|\{)/;function z(Lt){if(typeof Lt=="string"&&N.test(Lt))try{return JSON.parse(Lt)}catch{}return Lt}const G=Lt=>s.createElement("a",{href:Lt.href,title:Lt.title,target:"_blank",rel:"noopener noreferrer"},Lt.children," ",s.createElement(h.J,{name:"external-link-alt"}));G.defaultProps={title:""};function I(Lt){const{data:ft,linksGetter:Ht}=Lt,$t=(0,c.wW)(L);return s.createElement("div",{className:E()($t.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:M.K9},s.createElement("tbody",{className:$t.body},ft.map((zt,Wt)=>{const jt={__html:B()(z(zt.value))},sn=s.createElement("div",{className:M.b$,dangerouslySetInnerHTML:jt}),pn=Ht?Ht(ft,Wt):null;let Pn;return pn&&pn.length?Pn=s.createElement("div",null,s.createElement(G,{href:pn[0].url,title:pn[0].text},sn)):Pn=sn,s.createElement("tr",{className:$t.row,key:`${zt.key}-${Wt}`},s.createElement("td",{className:$t.keyColumn,"data-testid":"KeyValueTable--keyColumn"},zt.key),s.createElement("td",null,Pn),s.createElement("td",{className:$t.copyColumn},s.createElement(R,{className:K,copyText:JSON.stringify(zt,null,2),tooltipTitle:"Copy JSON"})))}))))}const V=Lt=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,v.h)(Lt,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,v.h)(Lt,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,v.h)(Lt,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,v.h)(Lt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,v.h)(Lt,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,v.h)(Lt,"#bbb")};
      padding: 0 0.2em;
    `});function H(Lt){const{data:ft}=Lt,Ht=(0,c.wW)(V);return!Array.isArray(ft)||!ft.length?null:s.createElement("ul",{className:Ht.summary},ft.map(($t,zt)=>s.createElement("li",{className:Ht.summaryItem,key:`${$t.key}-${zt}`},s.createElement("span",{className:Ht.summaryLabel},$t.key),s.createElement("span",{className:Ht.summaryDelim},"="),String($t.value))))}H.defaultProps={data:null};function Q(Lt){const{className:ft,data:Ht,highContrast:$t,interactive:zt,isOpen:Wt,label:jt,linksGetter:sn,onToggle:pn}=Lt,Pn=!Array.isArray(Ht)||!Ht.length,Mn=(0,c.wW)(V),Cn=E()(M.Im,{[Mn.emptyIcon]:Pn});let Hn=null,_n=null;return zt&&(Hn=Wt?s.createElement(h.J,{name:"angle-down",className:Cn}):s.createElement(h.J,{name:"angle-right",className:Cn}),_n={"aria-checked":Wt,onClick:Pn?null:pn,role:"switch"}),s.createElement("div",{className:E()(ft,M.ty)},s.createElement("div",{className:E()(Mn.header,{[Mn.headerEmpty]:Pn,[Mn.headerHighContrast]:$t&&!Pn}),..._n,"data-testid":"AccordianKeyValues--header"},Hn,s.createElement("strong",{"data-test":A},jt,Wt||":"),!Wt&&s.createElement(H,{data:Ht})),Wt&&s.createElement(I,{data:Ht,linksGetter:sn}))}Q.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const oe=Lt=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,v.h)(Lt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,v.h)(Lt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(Lt,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,v.h)(Lt,"#f0f0f0")};
      border-top: 1px solid ${(0,v.h)(Lt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,v.h)(Lt,"#999")};
    `});function se(Lt){const{interactive:ft,isOpen:Ht,linksGetter:$t,logs:zt,openedItems:Wt,onItemToggle:jt,onToggle:sn,timestamp:pn}=Lt;let Pn=null,Mn="span",Cn=null;ft&&(Pn=Ht?s.createElement(h.J,{name:"angle-down",className:M.Im}):s.createElement(h.J,{name:"angle-right",className:"u-align-icon"}),Mn="a",Cn={"aria-checked":Ht,onClick:sn,role:"switch"});const Hn=(0,c.wW)(oe);return s.createElement("div",{className:Hn.AccordianLogs},s.createElement(Mn,{className:Hn.AccordianLogsHeader,...Cn},Pn," ",s.createElement("strong",null,"Events")," (",zt.length,")"),Ht&&s.createElement("div",{className:Hn.AccordianLogsContent},(0,n.sortBy)(zt,"timestamp").map((_n,oa)=>s.createElement(Q,{key:`${_n.timestamp}-${oa}`,className:oa<zt.length-1?M.bi:null,data:_n.fields||[],highContrast:!0,interactive:ft,isOpen:Wt?Wt.has(_n):!1,label:`${(0,x.LU)(_n.timestamp-pn)}`,linksGetter:$t,onToggle:ft&&jt?()=>jt(_n):null})),s.createElement("small",{className:Hn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}se.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ie=Lt=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,v.h)(Lt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,v.h)(Lt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function j(Lt){return`${(Lt*100).toFixed(1)}%`}function de({viewEnd:Lt,viewStart:ft,getViewedBounds:Ht,color:$t,shortLabel:zt,longLabel:Wt,onClick:jt,rpc:sn,traceStartTime:pn,span:Pn,className:Mn,labelClassName:Cn}){const[Hn,_n]=(0,s.useState)(zt),oa=()=>_n(zt),Gt=()=>_n(Wt),Bt=(0,n.groupBy)(Pn.logs,rn=>{const In=Ht(rn.timestamp,rn.timestamp).start;return j(Math.round(In*500)/500)}),on=(0,c.wW)(ie);return s.createElement("div",{className:E()(on.wrapper,Mn),onBlur:oa,onClick:jt,onFocus:Gt,onMouseOut:oa,onMouseOver:Gt,"aria-hidden":!0,"data-testid":m.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":Hn,className:on.bar,style:{background:$t,left:j(ft),width:j(Lt-ft)}},s.createElement("div",{className:E()(on.label,Cn),"data-testid":"SpanBar--label"},Hn)),s.createElement("div",null,Object.keys(Bt).map(rn=>s.createElement(b,{key:rn,content:s.createElement(se,{interactive:!1,isOpen:!0,logs:Bt[rn],timestamp:pn})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:on.logMarker,style:{left:rn}})))),sn&&s.createElement("div",{className:on.rpc,style:{background:sn.color,left:j(sn.viewStart),width:j(sn.viewEnd-sn.viewStart)}}))}const ce=s.memo(de);var ee=e(14391),le=e(42044),q=e(30909);const fe=(Lt,ft,Ht,$t)=>s.createElement(s.Fragment,null,Lt.logLinks?.length?s.createElement(ee.k,{label:"Logs"},Lt.logLinks.map((zt,Wt)=>s.createElement(le.s,{key:Wt,label:"Logs for this span",onClick:zt.onClick?jt=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:$t,grafana_version:f.v.buildInfo.version,type:"log",location:"menu"}),jt?.preventDefault(),zt.onClick(jt),Ht()}:void 0,url:zt.href,className:ft.menuItem}))):null,Lt.metricLinks?.length?s.createElement(ee.k,{label:"Metrics"},Lt.metricLinks.map((zt,Wt)=>s.createElement(le.s,{key:Wt,label:zt.title??"Metrics for this span",onClick:zt.onClick?jt=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:$t,grafana_version:f.v.buildInfo.version,type:"metric",location:"menu"}),jt?.preventDefault(),zt.onClick(jt),Ht()}:void 0,url:zt.href,className:ft.menuItem}))):null,Lt.traceLinks?.length?s.createElement(ee.k,{label:"Traces"},Lt.traceLinks.map((zt,Wt)=>s.createElement(le.s,{key:Wt,label:zt.title??"View linked span",onClick:zt.onClick?jt=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:$t,grafana_version:f.v.buildInfo.version,type:"trace",location:"menu"}),jt?.preventDefault(),zt.onClick(jt),Ht()}:void 0,url:zt.href,className:ft.menuItem}))):null),Z=({links:Lt,datasourceType:ft})=>{const Ht=(0,c.wW)(ne),[$t,zt]=(0,s.useState)(!1),[Wt,jt]=(0,s.useState)({x:0,y:0}),sn=()=>zt(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:pn=>{zt(!0),jt({x:pn.pageX,y:pn.pageY})},className:Ht.button},s.createElement(h.J,{name:"link",className:Ht.button})),$t?s.createElement(q.x,{onClose:()=>zt(!1),renderMenuItems:()=>fe(Lt,Ht,sn,ft),focusOnOpen:!0,x:Wt.x,y:Wt.y}):null)},ne=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function re(Lt){return(0,n.get)((0,n.find)(Lt.references,({span:ft,refType:Ht})=>ft&&ft.spanID&&(Ht==="CHILD_OF"||Ht==="FOLLOWS_FROM")),"span")}function ve(Lt){const ft=[];if(!Lt)return ft;let Ht=re(Lt);for(;Ht;)ft.push(Ht.spanID),Ht=re(Ht);return ft}const me=(0,d.B)(Lt=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,v.h)(Lt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,v.h)(Lt,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,v.h)(Lt,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Ie extends s.PureComponent{constructor(ft){super(ft),this.handleMouseLeave=(Ht,$t)=>{(!(Ht.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Ht,"relatedTarget.dataset.ancestorId")!==$t)&&this.props.removeHoverIndentGuideId($t)},this.handleMouseEnter=(Ht,$t)=>{(!(Ht.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Ht,"relatedTarget.dataset.ancestorId")!==$t)&&this.props.addHoverIndentGuideId($t)},this.ancestorIds=ve(ft.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:ft,onClick:Ht,showChildrenIcon:$t,span:zt,theme:Wt}=this.props,{hasChildren:jt,spanID:sn}=zt,pn=jt?{onClick:Ht,role:"switch","aria-checked":ft}:null,Pn=$t&&jt&&(ft?s.createElement(h.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(h.J,{name:"angle-right","data-testid":"icon-arrow-right"})),Mn=me(Wt);return s.createElement("span",{className:E()(Mn.SpanTreeOffset,{[Mn.SpanTreeOffsetParent]:jt}),...pn},this.ancestorIds.map(Cn=>s.createElement("span",{key:Cn,className:E()(Mn.indentGuide,{[Mn.indentGuideActive]:this.props.hoverIndentGuideIds.has(Cn)}),"data-ancestor-id":Cn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:Hn=>this.handleMouseEnter(Hn,Cn),onMouseLeave:Hn=>this.handleMouseLeave(Hn,Cn)})),Pn&&s.createElement("span",{className:Mn.iconWrapper,onMouseEnter:Cn=>this.handleMouseEnter(Cn,sn),onMouseLeave:Cn=>this.handleMouseLeave(Cn,sn),"data-testid":"icon-wrapper"},Pn))}}Ie.displayName="UnthemedSpanTreeOffset",Ie.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const Ge=(0,c.HE)(Ie);var gt=e(55478),Te=e(93804);const Le="spanBar",Ye="spanBarLabel",it="nameWrapper",ht="nameWrapperMatchingFilter",Re="jaegerView",ye="nameColumn",Ce=(0,d.B)((Lt,ft)=>{const Ht={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,v.h)(Lt,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},$t=ft?"":(0,v.h)(Lt,"#fffce4");return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${$t};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,v.h)(Lt,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,v.h)(Lt,"#f8f8f8")};
      outline: 1px solid ${(0,v.h)(Lt,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,v.h)(Lt,"#fff3d7")};
      outline: 1px solid ${(0,v.h)(Lt,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Le} {
        opacity: 1;
      }
      &:hover .${Ye} {
        color: ${(0,v.h)(Lt,"#000")};
      }
      &:hover .${it} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,v.h)(Lt,"#fafafa")},
          ${(0,v.h)(Lt,"#f8f8f8")} 75%,
          ${(0,v.h)(Lt,"#eee")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,v.h)(Lt,"#f5f5f5")};
        outline: 1px solid ${(0,v.h)(Lt,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${ye}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,v.h)(Lt,"rgba(25, 25, 25, 0.25)")},
          ${(0,v.h)(Lt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Re}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,v.h)(Lt,"rgba(25, 25, 25, 0.25)")},
          ${(0,v.h)(Lt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Le} {
        opacity: 1;
      }
      & .${Ye} {
        color: ${(0,v.h)(Lt,"#000")};
      }
      & .${it}, &:hover .${it} {
        background: ${(0,v.h)(Lt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,v.h)(Lt,"#ddd")};
      }
      & .${ht} {
        background: ${(0,v.h)(Lt,"#fff3d7")};
      }
      &:hover .${Re} {
        background: ${(0,v.h)(Lt,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      // background-color: ${(0,v.h)(Lt,"#fffbde")};
      &:hover .${it} {
        background: linear-gradient(
          90deg,
          ${(0,v.h)(Lt,"#fffbde")},
          ${(0,v.h)(Lt,"#fffbde")} 75%,
          ${(0,v.h)(Lt,"#f7f1c6")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,v.h)(Lt,"#f7f1c6")};
        outline: 1px solid ${(0,v.h)(Lt,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,v.h)(Lt,"#cbe7ff")};
      animation: ${Ht.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${it}, .${Re}, .${ht} {
        background-color: ${(0,v.h)(Lt,"#cbe7ff")};
        animation: ${Ht.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Le} {
        opacity: 1;
      }
      & .${Ye} {
        color: ${(0,v.h)(Lt,"#000")};
      }
      &:hover .${it}, :hover .${Re} {
        background: ${(0,v.h)(Lt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,v.h)(Lt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Re} {
        background: ${(0,v.h)(Lt,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,v.h)(Lt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,v.h)(Lt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,v.h)(Lt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class be extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(ft,Ht,$t)=>{const zt=Ht?.type??"";if(zt===C.Hn)return"";if(zt===""||zt===C.th)return`(${$t})`;if(zt===C.Kg){const Wt=Ht?.tag?.trim()??"";if(Wt!==""&&ft.tags){const jt=ft.tags?.find(pn=>pn.key===Wt),sn=ft.process?.tags?.find(pn=>pn.key===Wt);if(jt)return`(${jt.value})`;if(sn)return`(${sn.value})`}}return""}}render(){const{className:ft,color:Ht,spanBarOptions:$t,columnDivision:zt,isChildrenExpanded:Wt,isDetailExpanded:jt,isMatchingFilter:sn,showSpanFilterMatchesOnly:pn,isFocused:Pn,numTicks:Mn,rpc:Cn,noInstrumentedServer:Hn,showErrorIcon:_n,getViewedBounds:oa,traceStartTime:Gt,span:Bt,hoverIndentGuideIds:on,addHoverIndentGuideId:rn,removeHoverIndentGuideId:In,clippingLeft:Ln,clippingRight:Un,theme:qn,createSpanLink:da,datasourceType:ha}=this.props,{duration:Ta,hasChildren:Wa,operationName:cs,process:{serviceName:is}}=Bt,Ha=(0,x.LU)(Ta),$a=oa(Bt.startTime,Bt.startTime+Bt.duration),ss=$a.start,Oa=$a.end,Ia=Ce(qn,pn),ys=`${is}::${cs}`;let la,Ts;ss>1-Oa?(la=`${ys} | ${Ha}`,Ts=Ia.labelLeft):(la=`${Ha} | ${ys}`,Ts=Ia.labelRight);const bs=ds=>ds?Object.values(ds).reduce((Us,Za)=>Us+Za.length,0):0;return s.createElement(Te.Z,{className:E()(Ia.row,{[Ia.rowExpanded]:jt,[Ia.rowMatchingFilter]:sn,[Ia.rowExpandedAndMatchingFilter]:sn&&jt,[Ia.rowFocused]:Pn,[Ia.rowClippingLeft]:Ln,[Ia.rowClippingRight]:Un},ft)},s.createElement(Te.Z.Cell,{className:E()(Ia.nameColumn,ye),width:zt},s.createElement("div",{className:E()(Ia.nameWrapper,it,{[Ia.nameWrapperMatchingFilter]:sn,nameWrapperMatchingFilter:sn})},s.createElement(Ge,{onClick:Wa?this._childrenToggle:void 0,childrenVisible:Wt,span:Bt,hoverIndentGuideIds:on,addHoverIndentGuideId:rn,removeHoverIndentGuideId:In}),s.createElement("button",{type:"button",className:E()(Ia.name,{[Ia.nameDetailExpanded]:jt}),"aria-checked":jt,title:ys,onClick:this._detailToggle,role:"switch",style:{borderColor:Ht},tabIndex:0},s.createElement("span",{className:E()(Ia.svcName,{[Ia.svcNameChildrenCollapsed]:Wa&&!Wt})},_n&&s.createElement(h.J,{name:"exclamation-circle",style:{backgroundColor:Bt.errorIconColor?(0,v.h)(qn,Bt.errorIconColor):(0,v.h)(qn,"#db2828")},className:Ia.errorIcon}),is," ",Cn&&s.createElement("span",null,s.createElement(h.J,{name:"arrow-right"})," ",s.createElement("i",{className:Ia.rpcColorMarker,style:{background:Cn.color}}),Cn.serviceName),Hn&&s.createElement("span",null,s.createElement(h.J,{name:"arrow-right"})," ",s.createElement("i",{className:Ia.rpcColorMarker,style:{background:Hn.color}}),Hn.serviceName)),s.createElement("small",{className:Ia.endpointName},Cn?Cn.operationName:cs),s.createElement("small",{className:Ia.endpointName}," ",this.getSpanBarLabel(Bt,$t,Ha))),da&&(()=>{const ds=da(Bt),Us=bs(ds);if(ds&&Us===1){const Za=ds.logLinks?.[0]??ds.metricLinks?.[0]??ds.traceLinks?.[0]??void 0;return Za?s.createElement("a",{href:Za.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:Za.onClick?Ks=>{!(Ks.ctrlKey||Ks.metaKey||Ks.shiftKey)&&Za.onClick&&(Ks.preventDefault(),Za.onClick(Ks))}:void 0},Za.content):null}else return ds&&Us>1?s.createElement(Z,{links:ds,datasourceType:ha}):null})())),s.createElement(Te.Z.Cell,{className:E()(Ia.view,Re,{[Ia.viewExpanded]:jt,[Ia.viewExpandedAndMatchingFilter]:sn&&jt}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-zt,onClick:this._detailToggle},s.createElement(gt.Z,{numTicks:Mn}),s.createElement(ce,{rpc:Cn,viewStart:ss,viewEnd:Oa,getViewedBounds:oa,color:Ht,shortLabel:Ha,longLabel:la,traceStartTime:Gt,span:Bt,labelClassName:`${Ye} ${Ts}`,className:Le})))}}be.displayName="UnthemedSpanBarRow",be.defaultProps={className:"",rpc:null};const We=(0,c.HE)(be);var Qe=e(77258),mt=e(89719),vt=e(97379);const rt=Lt=>({Divider:t.css`
      background: ${(0,v.h)(Lt,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function Ot({className:Lt,style:ft,type:Ht}){const $t=(0,c.wW)(rt);return s.createElement("div",{style:ft,className:(0,t.cx)($t.Divider,Ht==="horizontal"?$t.DividerHorizontal:$t.DividerVertical,Lt)})}var Et=e(82736);function Mt(Lt){const{reference:ft,children:Ht,createFocusSpanLink:$t}=Lt,zt=$t(ft.traceID,ft.spanID);return s.createElement("a",{href:zt.href,target:zt.target,rel:"noopener noreferrer",onClick:zt.onClick?Wt=>{Wt.preventDefault(),zt.onClick(Wt)}:void 0},Ht)}const ue=Lt=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,v.h)(Lt,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,v.h)(Lt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,v.h)(Lt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(Lt,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,v.h)(Lt,"#f0f0f0")};
      border-top: 1px solid ${(0,v.h)(Lt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,v.h)(Lt,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function De(Lt){const{data:ft,createFocusSpanLink:Ht,openedItems:$t,onItemToggle:zt,interactive:Wt}=Lt,jt=(0,c.wW)(ue);return s.createElement("div",{className:jt.AccordianReferencesContent},ft.map((sn,pn)=>s.createElement("div",{className:pn<ft.length-1?jt.AccordianReferenceItem:void 0,key:pn},s.createElement("div",{className:jt.item,key:`${sn.spanID}`},s.createElement(Mt,{reference:sn,createFocusSpanLink:Ht},s.createElement("span",{className:jt.itemContent},sn.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",jt.serviceName)},sn.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},sn.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",jt.title)},"View Linked Span ",s.createElement(h.J,{name:"external-link-alt"})),s.createElement("small",{className:jt.debugInfo},s.createElement("span",{className:jt.debugLabel,"data-label":"TraceID:"},sn.traceID),s.createElement("span",{className:jt.debugLabel,"data-label":"SpanID:"},sn.spanID))))),!!sn.tags?.length&&s.createElement("div",{className:jt.AccordianKeyValues},s.createElement(Q,{className:pn<ft.length-1?M.bi:null,data:sn.tags||[],highContrast:!0,interactive:Wt,isOpen:$t?$t.has(sn):!1,label:"attributes",linksGetter:null,onToggle:Wt&&zt?()=>zt(sn):null})))))}const Ne=({data:Lt,interactive:ft=!0,isOpen:Ht,onToggle:$t,onItemToggle:zt,openedItems:Wt,createFocusSpanLink:jt})=>{const sn=!Array.isArray(Lt)||!Lt.length;let pn=null,Pn="span",Mn=null;ft&&(pn=Ht?s.createElement(h.J,{name:"angle-down",className:M.Im}):s.createElement(h.J,{name:"angle-right",className:M.Im}),Pn="a",Mn={"aria-checked":Ht,onClick:sn?null:$t,role:"switch"});const Cn=(0,c.wW)(ue);return s.createElement("div",{className:Cn.AccordianReferences},s.createElement(Pn,{className:Cn.AccordianReferencesHeader,...Mn},pn,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Lt.length,")"),Ht&&s.createElement(De,{data:Lt,openedItems:Wt,createFocusSpanLink:jt,onItemToggle:zt,interactive:ft}))},tt=s.memo(Ne),et=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Ue(Lt){const{data:ft}=Lt,Ht=(0,c.wW)(et);return s.createElement("div",{className:E()(Ht.TextList),"data-testid":"TextList"},s.createElement("ul",{className:Ht.List},ft.map(($t,zt)=>s.createElement("li",{className:Ht.item,key:`${zt}`},$t))))}const Fe=Lt=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,v.h)(Lt,"#e8e8e8")};
      }
    `});function Ee({data:Lt}){return s.createElement(Ue,{data:Lt})}function Me(Lt){const{className:ft,data:Ht,headerClassName:$t,interactive:zt,isOpen:Wt,label:jt,onToggle:sn,TextComponent:pn=Ee}=Lt,Pn=!Array.isArray(Ht)||!Ht.length,Mn=(0,c.wW)(V),Cn=E()(M.Im,{[Mn.emptyIcon]:Pn});let Hn=null,_n=null;zt&&(Hn=Wt?s.createElement(h.J,{name:"angle-down",className:Cn}):s.createElement(h.J,{name:"angle-right",className:Cn}),_n={"aria-checked":Wt,onClick:Pn?null:sn,role:"switch"});const oa=(0,c.wW)(Fe);return s.createElement("div",{className:ft||""},s.createElement("div",{className:E()(oa.header,$t),..._n,"data-testid":"AccordianText--header"},Hn,s.createElement("strong",null,jt)," (",Ht.length,")"),Wt&&s.createElement(pn,{data:Ht}))}Me.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const He=Lt=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,v.h)(Lt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,v.h)(Lt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,v.h)(Lt,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,v.h)(Lt,"#fafafa")};
      border: 1px solid ${(0,v.h)(Lt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,v.h)(Lt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(Lt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,v.h)(Lt,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,v.h)(Lt,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function Ze(Lt){const{detailState:ft,linksGetter:Ht,logItemToggle:$t,logsToggle:zt,processToggle:Wt,span:jt,tagsToggle:sn,traceStartTime:pn,warningsToggle:Pn,stackTracesToggle:Mn,referencesToggle:Cn,referenceItemToggle:Hn,createSpanLink:_n,createFocusSpanLink:oa,topOfViewRefType:Gt,datasourceType:Bt}=Lt,{isTagsOpen:on,isProcessOpen:rn,logs:In,isWarningsOpen:Ln,references:Un,isStackTracesOpen:qn}=ft,{operationName:da,process:ha,duration:Ta,relativeStartTime:Wa,startTime:cs,traceID:is,spanID:Ha,logs:$a,tags:ss,warnings:Oa,references:Ia,stackTraces:ys}=jt,{timeZone:la}=Lt,Ts=[{key:"svc",label:"Service:",value:ha.serviceName},{key:"duration",label:"Duration:",value:(0,x.LU)(Ta)},{key:"start",label:"Start Time:",value:(0,x.LU)(Wa)+lt(cs,la)},...jt.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:jt.childSpanCount}]:[]],bs=(0,c.wW)(He);let ds;if(_n){const Za=_n(jt);Za?.logLinks?ds=s.createElement(mt.k,{link:{...Za.logLinks[0],title:"Logs for this span",target:"_blank",origin:Za.logLinks[0].field,onClick:Ks=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Bt,grafana_version:f.v.buildInfo.version,type:"log",location:"spanDetails"}),Za?.logLinks?.[0].onClick?.(Ks)}},buttonProps:{icon:"gf-logs"}}):ds=s.createElement(S.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const Us=oa(is,Ha);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:bs.header},s.createElement("h2",{className:E()(M.h2)},da),s.createElement("div",{className:bs.listWrapper},s.createElement(Et.Z,{className:M.xb,divider:!0,items:Ts}))),ds,s.createElement(Ot,{className:M.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(Q,{data:ss,label:"Attributes",linksGetter:Ht,isOpen:on,onToggle:()=>sn(Ha)}),ha.tags&&s.createElement(Q,{className:M.bi,data:ha.tags,label:"Resource",linksGetter:Ht,isOpen:rn,onToggle:()=>Wt(Ha)})),$a&&$a.length>0&&s.createElement(se,{linksGetter:Ht,logs:$a,isOpen:In.isOpen,openedItems:In.openedItems,onToggle:()=>zt(Ha),onItemToggle:Za=>$t(Ha,Za),timestamp:pn}),Oa&&Oa.length>0&&s.createElement(Me,{className:bs.AccordianWarnings,headerClassName:bs.AccordianWarningsHeader,label:s.createElement("span",{className:bs.AccordianWarningsLabel},"Warnings"),data:Oa,isOpen:Ln,onToggle:()=>Pn(Ha)}),ys&&ys.length&&s.createElement(Me,{label:"Stack trace",data:ys,isOpen:qn,TextComponent:Za=>{let Ks;return Za.data?.length>1?Ks=Za.data.map((dn,ln)=>`StackTrace ${ln+1}:
${dn}`).join(`
`):Ks=Za.data?.[0],s.createElement(vt.K,{className:bs.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Ks})},onToggle:()=>Mn(Ha)}),Ia&&Ia.length>0&&(Ia.length>1||Ia[0].refType!=="CHILD_OF")&&s.createElement(tt,{data:Ia,isOpen:Un.isOpen,openedItems:Un.openedItems,onToggle:()=>Cn(Ha),onItemToggle:Za=>Hn(Ha,Za),createFocusSpanLink:oa}),Gt===Ve.Explore&&s.createElement("small",{className:bs.debugInfo},s.createElement("a",{...Us,onClick:Za=>{Us.onClick&&Za.button===0&&(!Za.currentTarget.target||Za.currentTarget.target==="_self")&&!(Za.metaKey||Za.altKey||Za.ctrlKey||Za.shiftKey)&&(Za.preventDefault(),Us.onClick(Za))}},s.createElement(h.J,{name:"link",className:E()(M.Im,bs.LinkIcon)})),s.createElement("span",{className:bs.debugLabel,"data-label":"SpanID:"})," ",Ha)))}const lt=(Lt,ft)=>{const Ht=(0,Qe.dq)(Lt/1e3,{timeZone:ft,defaultWithMS:!0}),$t=Ht.split(" ");return` (${$t[1]?$t[1]:Ht})`},bt=(0,d.B)(Lt=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,v.h)(Lt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Pt extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(ft,Ht)=>{const{linksGetter:$t,span:zt}=this.props;return $t(zt,ft,Ht)}}render(){const{color:ft,columnDivision:Ht,detailState:$t,logItemToggle:zt,logsToggle:Wt,processToggle:jt,referenceItemToggle:sn,referencesToggle:pn,warningsToggle:Pn,stackTracesToggle:Mn,span:Cn,timeZone:Hn,tagsToggle:_n,traceStartTime:oa,hoverIndentGuideIds:Gt,addHoverIndentGuideId:Bt,removeHoverIndentGuideId:on,theme:rn,createSpanLink:In,focusedSpanId:Ln,createFocusSpanLink:Un,topOfViewRefType:qn,datasourceType:da}=this.props,ha=bt(rn);return s.createElement(Te.Z,null,s.createElement(Te.Z.Cell,{width:Ht,style:{overflow:"hidden"}},s.createElement(Ge,{span:Cn,showChildrenIcon:!1,hoverIndentGuideIds:Gt,addHoverIndentGuideId:Bt,removeHoverIndentGuideId:on}),s.createElement(S.zx,{fill:"text",onClick:this._detailToggle,className:E()(ha.expandedAccent,(0,S.gN)(rn)),style:{borderColor:ft},"data-testid":"detail-row-expanded-accent"})),s.createElement(Te.Z.Cell,{width:1-Ht},s.createElement("div",{className:ha.infoWrapper,style:{borderTopColor:ft}},s.createElement(Ze,{detailState:$t,linksGetter:this._linksGetter,logItemToggle:zt,logsToggle:Wt,processToggle:jt,referenceItemToggle:sn,referencesToggle:pn,warningsToggle:Pn,stackTracesToggle:Mn,span:Cn,timeZone:Hn,tagsToggle:_n,traceStartTime:oa,createSpanLink:In,focusedSpanId:Ln,createFocusSpanLink:Un,topOfViewRefType:qn,datasourceType:da}))))}}const Je=(0,c.HE)(Pt),Dt=(0,d.B)(Lt=>{const{topOfViewRefType:ft}=Lt,Ht=ft===Ve.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${Ht};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var Ve=(Lt=>(Lt.Explore="Explore",Lt.Panel="Panel",Lt))(Ve||{});const Xe={bar:28,detail:161,detailWithLogs:197},st=5;function ut(Lt,ft,Ht,$t,zt){if(!Lt)return[];zt&&$t&&(Lt=Lt.filter(sn=>$t.has(sn.spanID)));let Wt=null;const jt=[];for(let sn=0;sn<Lt.length;sn++){const pn=Lt[sn],{spanID:Pn,depth:Mn}=pn;let Cn=!1;Wt!=null&&(Mn>=Wt?Cn=!0:Wt=null),!Cn&&(ft.has(Pn)&&(Wt=Mn+1),jt.push({span:pn,isDetail:!1,spanIndex:sn}),Ht.has(Pn)&&jt.push({span:pn,isDetail:!0,spanIndex:sn}))}return jt}function xt(Lt){const[ft,Ht]=Lt;return{left:ft>0,right:Ht<1}}function Kt(Lt,ft,Ht,$t,zt){return Lt?ut(Lt.spans,ft,Ht,$t,zt):[]}const Jt=(0,o.Z)(Kt),On=(0,o.Z)(x._h,n.isEqual),Nn=(0,o.Z)(xt,n.isEqual);class jn extends s.Component{constructor(ft){super(ft),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Wt=>this.getRowStates()[Wt].spanIndex,this.mapSpanIndexToRowIndex=Wt=>{const jt=this.getRowStates().length;for(let sn=0;sn<jt;sn++){const{spanIndex:pn}=this.getRowStates()[sn];if(pn===Wt)return sn}throw new Error(`unable to find row for span index: ${Wt}`)},this.setListView=Wt=>{const jt=this.listView!==Wt;this.listView=Wt,Wt&&jt&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=Wt=>{const{isDetail:jt,span:sn}=this.getRowStates()[Wt];return`${sn.traceID}--${sn.spanID}--${jt?"detail":"bar"}`},this.getIndexFromKey=Wt=>{const jt=Wt.split("--"),sn=jt[0],pn=jt[1],Pn=jt[2]==="detail",Mn=this.getRowStates().length;for(let Cn=0;Cn<Mn;Cn++){const{span:Hn,isDetail:_n}=this.getRowStates()[Cn];if(Hn.spanID===pn&&Hn.traceID===sn&&_n===Pn)return Cn}return-1},this.getRowHeight=Wt=>{const{span:jt,isDetail:sn}=this.getRowStates()[Wt];return sn?Array.isArray(jt.logs)&&jt.logs.length?Xe.detailWithLogs:Xe.detail:Xe.bar},this.renderRow=(Wt,jt,sn,pn)=>{const{isDetail:Pn,span:Mn,spanIndex:Cn}=this.getRowStates()[sn];return Pn?this.renderSpanDetailRow(Mn,Wt,jt,pn):this.renderSpanBarRow(Mn,Cn,Wt,jt,pn)},this.scrollToSpan=(Wt,jt)=>{if(jt==null)return;const sn=this.getRowStates().findIndex(pn=>pn.span.spanID===jt);sn>=0&&this.listView?.scrollToIndex(sn,Wt)},this.scrollToTop=()=>{const{topOfViewRef:Wt,datasourceType:jt,trace:sn}=this.props;Wt?.current?.scrollIntoView({behavior:"smooth"}),(0,l.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:jt,grafana_version:f.v.buildInfo.version,numServices:sn.services.length,numSpans:sn.spans.length})};const{setTrace:Ht,trace:$t,uiFind:zt}=ft;Ht($t,zt)}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(ft){let Ht;for(Ht in ft)if(ft[Ht]!==this.props[Ht])if(Ht==="shouldScrollToFirstUiFindMatch"){if(ft[Ht])return!0}else return!0;return!1}componentDidUpdate(ft){const{registerAccessors:Ht,trace:$t,headerHeight:zt}=ft,{shouldScrollToFirstUiFindMatch:Wt,clearShouldScrollToFirstUiFindMatch:jt,scrollToFirstVisibleSpan:sn,registerAccessors:pn,setTrace:Pn,trace:Mn,uiFind:Cn,focusedSpanId:Hn,focusedSpanIdForSearch:_n}=this.props;$t!==Mn&&Pn(Mn,Cn),this.listView&&Ht!==pn&&pn(this.getAccessors()),Wt&&(sn(),jt()),Hn!==ft.focusedSpanId&&this.scrollToSpan(zt,Hn),_n!==ft.focusedSpanIdForSearch&&this.scrollToSpan(zt,_n)}getRowStates(){const{childrenHiddenIDs:ft,detailStates:Ht,trace:$t,findMatchesIDs:zt,showSpanFilterMatchesOnly:Wt}=this.props;return Jt($t,ft,Ht,zt,Wt)}getClipping(){const{currentViewRangeTime:ft}=this.props;return Nn(ft)}getViewedBounds(){const{currentViewRangeTime:ft,trace:Ht}=this.props,[$t,zt]=ft;return On({min:Ht.startTime,max:Ht.endTime,viewStart:$t,viewEnd:zt})}getAccessors(){const ft=this.listView;if(!ft)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:ft.getViewHeight,getBottomRowIndexVisible:ft.getBottomVisibleIndex,getTopRowIndexVisible:ft.getTopVisibleIndex,getRowPosition:ft.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(ft,Ht,$t,zt,Wt){const{spanID:jt}=ft,{serviceName:sn}=ft.process,{childrenHiddenIDs:pn,childrenToggle:Pn,detailStates:Mn,detailToggle:Cn,findMatchesIDs:Hn,spanNameColumnWidth:_n,trace:oa,spanBarOptions:Gt,hoverIndentGuideIds:Bt,addHoverIndentGuideId:on,removeHoverIndentGuideId:rn,createSpanLink:In,focusedSpanId:Ln,focusedSpanIdForSearch:Un,showSpanFilterMatchesOnly:qn,theme:da,datasourceType:ha}=this.props;if(!oa)return null;const Ta=(0,u._K)(sn,da),Wa=pn.has(jt),cs=Mn.has(jt),is=Hn?Hn.has(jt):!1,Ha=jt===Ln||jt===Un,$a=(0,x.yM)(ft)||Wa&&(0,x.Qx)(oa.spans,Ht);let ss=null;if(Wa){const la=(0,x.s2)(oa.spans.slice(Ht));if(la){const Ts=this.getViewedBounds()(la.startTime,la.startTime+la.duration);ss={color:(0,u._K)(la.process.serviceName,da),operationName:la.operationName,serviceName:la.process.serviceName,viewEnd:Ts.end,viewStart:Ts.start}}}const Oa=ft.tags.find(la=>la.key===a);let Ia=null;!ft.hasChildren&&Oa&&(0,x.JE)(ft)&&(Ia={serviceName:Oa.value,color:(0,u._K)(Oa.value,da)});const ys=Dt(this.props);return s.createElement("div",{className:ys.row,key:$t,style:zt,...Wt},s.createElement(We,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Ta,spanBarOptions:Gt,columnDivision:_n,isChildrenExpanded:!Wa,isDetailExpanded:cs,isMatchingFilter:is,isFocused:Ha,showSpanFilterMatchesOnly:qn,numTicks:st,onDetailToggled:Cn,onChildrenToggled:Pn,rpc:ss,noInstrumentedServer:Ia,showErrorIcon:$a,getViewedBounds:this.getViewedBounds(),traceStartTime:oa.startTime,span:ft,hoverIndentGuideIds:Bt,addHoverIndentGuideId:on,removeHoverIndentGuideId:rn,createSpanLink:In,datasourceType:ha}))}renderSpanDetailRow(ft,Ht,$t,zt){const{spanID:Wt}=ft,{serviceName:jt}=ft.process,{detailLogItemToggle:sn,detailLogsToggle:pn,detailProcessToggle:Pn,detailReferencesToggle:Mn,detailReferenceItemToggle:Cn,detailWarningsToggle:Hn,detailStackTracesToggle:_n,detailStates:oa,detailTagsToggle:Gt,detailToggle:Bt,spanNameColumnWidth:on,trace:rn,timeZone:In,hoverIndentGuideIds:Ln,addHoverIndentGuideId:Un,removeHoverIndentGuideId:qn,linksGetter:da,createSpanLink:ha,focusedSpanId:Ta,createFocusSpanLink:Wa,topOfViewRefType:cs,theme:is,datasourceType:Ha}=this.props,$a=oa.get(Wt);if(!rn||!$a)return null;const ss=(0,u._K)(jt,is),Oa=Dt(this.props);return s.createElement("div",{className:Oa.row,key:Ht,style:{...$t,zIndex:1},...zt},s.createElement(Je,{color:ss,columnDivision:on,onDetailToggled:Bt,detailState:$a,linksGetter:da,logItemToggle:sn,logsToggle:pn,processToggle:Pn,referenceItemToggle:Cn,referencesToggle:Mn,warningsToggle:Hn,stackTracesToggle:_n,span:ft,timeZone:In,tagsToggle:Gt,traceStartTime:rn.startTime,hoverIndentGuideIds:Ln,addHoverIndentGuideId:Un,removeHoverIndentGuideId:qn,createSpanLink:ha,focusedSpanId:Ta,createFocusSpanLink:Wa,topOfViewRefType:cs,datasourceType:Ha}))}render(){const ft=Dt(this.props),{scrollElement:Ht}=this.props;return s.createElement(s.Fragment,null,s.createElement(g,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:ft.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Ht}),s.createElement(r.h,{className:ft.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const ya=(0,c.HE)(jn)},88989:()=>{"use strict"},5861:(Y,O,e)=>{"use strict";e.d(O,{JE:()=>u,LU:()=>t.LU,Qx:()=>c,_h:()=>n,s2:()=>a,yM:()=>r});var t=e(320);function n(i){const{min:p,max:g,viewStart:y,viewEnd:E}=i,h=g-p,v=p+y*h,m=g-(1-E)*h-v;return(D,P)=>({start:(D-v)/m,end:(P-v)/m})}function o(i,p,g){return!Array.isArray(g.tags)||!g.tags.length?!1:g.tags.some(y=>y.key===i&&y.value===p)}const s=o.bind(null,"span.kind","client"),l=o.bind(null,"span.kind","server"),f=o.bind(null,"error",!0),d=o.bind(null,"error","true"),r=i=>f(i)||d(i);function c(i,p){const{depth:g}=i[p];let y=p+1;for(;y<i.length&&i[y].depth>g;y++)if(r(i[y]))return!0;return!1}function a(i){if(i.length<=1||!s(i[0]))return!1;const g=i[0].depth+1;let y=1;for(;y<i.length&&i[y].depth===g;){if(l(i[y]))return i[y];y++}return null}const u=i=>i.tags.some(({key:p,value:g})=>p==="span.kind"&&g==="client")},82736:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(9892),n=e(9085),o=e.n(n),s=e(66111),l=e(72648),f=e(99746);const d=c=>a=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${c&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${c&&`
        border-right: 1px solid ${(0,f.h)(a,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${a.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function r(c){const{className:a,divider:u=!1,items:i}=c,p=(0,l.wW)(d(u));return s.createElement("ul",{className:o()(p.LabeledList,a)},i.map(({key:g,label:y,value:E})=>s.createElement("li",{className:p.LabeledListItem,key:`${g}`},s.createElement("span",{className:p.LabeledListLabel},y),s.createElement("strong",{className:p.LabeledListValue},E))))}},95638:(Y,O,e)=>{"use strict";e.d(O,{DetailState:()=>Ln,NewTracePageHeader:()=>Bt,SpanBarSettings:()=>rn.ZP,TracePageHeader:()=>He,TraceTimelineViewer:()=>H,autoColor:()=>d.h,filterSpans:()=>Cn,filterSpansNewTraceViewHeader:()=>Ht,transformTraceData:()=>fn});var t=e(9892),n=e(66111),o=e(41818),s=e(35645),l=e(7804),f=e(72648),d=e(99746),r=e(21710),c=e.n(r);const u={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let i;function p(){if(i)return i;const qe=new(c())(document.body);return i=qe,qe}function g(qe){const Ct=p();Object.keys(qe).forEach(At=>{const tn=qe[At];tn&&Ct.bind(u[At].binding,tn)})}function y(){p().reset()}var E=e(9085),h=e.n(E),v=e(42413),C=e(55478),m=e(93804),D=e(8180);const P=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function b(qe){const{onExpandAll:Ct,onExpandOne:At,onCollapseAll:tn,onCollapseOne:Rn}=qe,Dn=(0,f.wW)(P);return n.createElement("div",{className:Dn.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(D.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:At}),n.createElement(D.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Rn}),n.createElement(D.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Ct}),n.createElement(D.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:tn}))}var M=e(54373);const x=(0,l.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class A extends n.PureComponent{constructor(Ct){super(Ct),this._setRootElm=At=>{this._rootElm=At},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:At,width:tn}=this._rootElm.getBoundingClientRect(),{min:Rn,max:Dn}=this.props;return{clientXLeft:At,width:tn,maxValue:Dn,minValue:Rn}},this._handleDragUpdate=({value:At})=>{this.setState({dragPosition:At})},this._handleDragEnd=({manager:At,value:tn})=>{At.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(tn)},this._dragManager=new M.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Ct,At;const{position:tn,columnResizeHandleHeight:Rn}=this.props,{dragPosition:Dn}=this.state;Ct=`${tn*100}%`;const kn={left:Ct};let aa=!1,Qn=!1;const ia=x();if(this._dragManager.isDragging()&&this._rootElm&&Dn!=null){aa=Dn<tn,Qn=Dn>tn;const Tt=`${Math.min(tn,Dn)*100}%`,Be=`calc(${(1-Math.max(tn,Dn))*100}% - 1px)`;At={left:Tt,right:Be}}else At=kn;At.height=Rn;const ja=aa||Qn;return n.createElement("div",{className:ia.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:h()(ia.gripIcon,ja&&ia.gripIconDragging),style:kn,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:h()(ia.dragger,ja&&ia.draggerDragging,Qn&&ia.draggerDraggingRight,aa&&ia.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:At,"data-testid":"TimelineColumnResizer--dragger"}))}}const T=(0,l.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function S(qe){return Reflect.has(qe,"isOutOfView")}function U(qe,Ct,At){return qe+At*(Ct-qe)}function R(qe,Ct,At){return(At-qe)/(Ct-qe)}function F(qe,Ct){let[At,tn]=qe<Ct?[qe,Ct]:[Ct,qe];return At>=1||tn<=0?{isOutOfView:!0}:(At<0&&(At=0),tn>1&&(tn=1),{isDraggingLeft:qe>Ct,left:`${At*100}%`,width:`${(tn-At)*100}%`})}function B(qe,Ct,At,tn,Rn){const Dn=R(qe,Ct,At),kn=R(qe,Ct,tn),aa=F(Dn,kn);if(S(aa))return null;const{isDraggingLeft:Qn,left:ia,width:ja}=aa,Tt=T(),Be=(0,t.cx)({[Tt.TimelineViewingLayerDraggedDraggingRight]:!Qn,[Tt.TimelineViewingLayerDraggedReframeDrag]:!Rn,[Tt.TimelineViewingLayerDraggedShiftDrag]:Rn});return n.createElement("div",{className:(0,t.cx)(Tt.TimelineViewingLayerDragged,Tt.TimelineViewingLayerDraggedDraggingLeft,Be),style:{left:ia,width:ja},"data-testid":"Dragged"})}class K extends n.PureComponent{constructor(Ct){super(Ct),this._setRoot=At=>{this._root=At},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:At,width:tn}=this._root.getBoundingClientRect();return{clientXLeft:At,width:tn}},this._handleReframeMouseMove=({value:At})=>{const[tn,Rn]=this.props.viewRangeTime.current,Dn=U(tn,Rn,At);this.props.updateNextViewRangeTime({cursor:Dn})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:At})=>{const{current:tn,reframe:Rn}=this.props.viewRangeTime,[Dn,kn]=tn,aa=U(Dn,kn,At),ia={reframe:{anchor:Rn?Rn.anchor:aa,shift:aa}};this.props.updateNextViewRangeTime(ia)},this._handleReframeDragEnd=({manager:At,value:tn})=>{const{current:Rn,reframe:Dn}=this.props.viewRangeTime,[kn,aa]=Rn,Qn=U(kn,aa,tn),ia=Dn?Dn.anchor:Qn,[ja,Tt]=Qn<ia?[Qn,ia]:[ia,Qn];At.resetBounds(),this.props.updateViewRangeTime(ja,Tt,"timeline-header")},this._draggerReframe=new M.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Ct){const{boundsInvalidator:At}=this.props;At!==Ct.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Ct}=this.props,{current:At,cursor:tn,reframe:Rn,shiftEnd:Dn,shiftStart:kn}=Ct,[aa,Qn]=At,ia=Rn!=null||Dn!=null||kn!=null;let ja;!ia&&tn!=null&&tn>=aa&&tn<=Qn&&(ja=`${R(aa,Qn,tn)*100}%`);const Tt=T();return n.createElement("div",{"aria-hidden":!0,className:Tt.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},ja!=null&&n.createElement("div",{className:Tt.TimelineViewingLayerCursorGuide,style:{left:ja},"data-testid":"TimelineViewingLayer--cursorGuide"}),Rn!=null&&B(aa,Qn,Rn.anchor,Rn.shift,!1),Dn!=null&&B(aa,Qn,Qn,Dn,!0),kn!=null&&B(aa,Qn,aa,kn,!0))}}const L=qe=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,d.h)(qe,"#ececec")};
      border-bottom: 1px solid ${(0,d.h)(qe,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function N(qe){const{duration:Ct,nameColumnWidth:At,numTicks:tn,onCollapseAll:Rn,onCollapseOne:Dn,onColummWidthChange:kn,onExpandAll:aa,onExpandOne:Qn,updateViewRangeTime:ia,updateNextViewRangeTime:ja,viewRangeTime:Tt,columnResizeHandleHeight:Be}=qe,[Ae,nt]=Tt.current,ct=(0,f.wW)(L);return n.createElement(m.Z,{className:ct.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(m.Z.Cell,{className:h()(v.oD,v.H3,ct.TimelineHeaderWrapper),width:At},n.createElement("h4",{className:ct.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(b,{onCollapseAll:Rn,onExpandAll:aa,onCollapseOne:Dn,onExpandOne:Qn})),n.createElement(m.Z.Cell,{width:1-At},n.createElement(K,{boundsInvalidator:At,updateNextViewRangeTime:ja,updateViewRangeTime:ia,viewRangeTime:Tt}),n.createElement(C.Z,{numTicks:tn,startTime:Ae*Ct,endTime:nt*Ct,showLabels:!0})),n.createElement(A,{columnResizeHandleHeight:Be,position:At,onChange:kn,min:.2,max:.85}))}var z=e(93183);const G=(0,l.B)(qe=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,d.h)(qe,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,d.h)(qe,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,d.h)(qe,"teal")};
      }

      & .json-markup-null {
        color: ${(0,d.h)(qe,"teal")};
      }

      & .json-markup-number {
        color: ${(0,d.h)(qe,"blue","black")};
      }
    `})),I=5;class V extends n.PureComponent{constructor(Ct){super(Ct),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,o.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){g({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Ct,updateNextViewRangeTime:At,updateViewRangeTime:tn,viewRange:Rn,traceTimeline:Dn,theme:kn,topOfViewRef:aa,focusedSpanIdForSearch:Qn,...ia}=this.props,{trace:ja}=ia,Tt=G(kn);return n.createElement("div",{className:Tt.TraceTimelineViewer,ref:Be=>Be&&this.setState({height:Be.getBoundingClientRect().height})},n.createElement(N,{duration:ja.duration,nameColumnWidth:Dn.spanNameColumnWidth,numTicks:I,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Ct,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Rn.time,updateNextViewRangeTime:At,updateViewRangeTime:tn,columnResizeHandleHeight:this.state.height}),n.createElement(z.ZP,{...ia,...Dn,setSpanNameColumnWidth:Ct,currentViewRangeTime:Rn.time.current,topOfViewRef:aa,focusedSpanIdForSearch:Qn,datasourceType:this.props.datasourceType}))}}const H=(0,f.HE)(V);var Q=e(82897),oe=e(77258),se=e(39904);const ie=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function j(qe){const{isLarge:Ct,className:At,...tn}=qe,Rn=(0,f.wW)(ie),Dn=h()({[Rn.NewWindowIconLarge]:Ct},At);return n.createElement(se.J,{className:Dn,name:"anchor",...tn})}j.defaultProps={isLarge:!1};const de=qe=>n.createElement("a",{href:qe.href,title:qe.title,target:"_blank",rel:"noopener noreferrer",className:qe.className},qe.children," ",n.createElement(j,null));function ce(qe){const{links:Ct}=qe;return n.createElement(de,{href:Ct[0].url,title:Ct[0].text,className:qe.className})}var ee=e(82736);const le=100,q="<trace-without-root-span>",fe=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),Z=/\W*\w+\W*/g;function ne(qe){const{className:Ct,text:At,wordRegexp:tn=Z}=qe,Rn=(0,f.wW)(fe);if(!At)return null;const Dn=[];tn.exec("");let kn=tn.exec(At)||[At];for(;kn;)Dn.push(n.createElement("span",{key:`${At}-${Dn.length}`,className:Ct||Rn.BreakableText},kn[0])),kn=tn.exec(At);return Dn}ne.defaultProps={wordRegexp:Z};const re=qe=>({TraceName:t.css`
      label: TraceName;
      font-size: ${qe.typography.size.lg};
    `});function ve(qe){const{className:Ct,traceName:At}=qe,tn=(0,f.wW)(re),Rn=String(At||q),Dn=n.createElement(ne,{text:Rn});return n.createElement("span",{className:h()(tn.TraceName,Ct)},Dn)}var me=e(87855);const Ie=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:le,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Ge(){return Ie}function gt(qe){return(0,Q.get)(Ge(),qe)}function Te(qe){const Ct=qe.references?qe.references.find(At=>At.refType==="CHILD_OF"):null;return Ct?Ct.span:null}const Le=/#\{([^{}]*)\}/g;function Ye(qe){const Ct=new Set;return qe.replace(Le,(At,tn)=>(Ct.add(tn),At)),Array.from(Ct)}function it(qe,Ct,At){return qe.replace(Le,(tn,Rn)=>{const Dn=At[Rn];return Dn==null?"":Ct(Dn)})}function ht(qe,Ct){if(typeof qe!="string")throw new Error("Invalid template");return{parameters:Ye(qe),template:it.bind(null,qe,Ct)}}function Re(qe){if(typeof qe=="string")return Ct=>Ct===qe;if(Array.isArray(qe))return Ct=>qe.indexOf(Ct)>-1;if(qe==null)return()=>!0;throw new Error(`Invalid value: ${qe}`)}const ye=qe=>qe;function Ce(qe){try{const Ct=ht(qe.url,encodeURIComponent),At=ht(qe.text,ye);return{object:qe,type:Re(qe.type),key:Re(qe.key),value:Re(qe.value),url:Ct,text:At,parameters:(0,Q.uniq)(Ct.parameters.concat(At.parameters))}}catch(Ct){return console.error(`Ignoring invalid link pattern: ${Ct}`,qe),null}}function be(qe,Ct){if(Ct)return Ct.find(At=>At.key===qe)}function We(qe,Ct){let At=Ct;for(;At;){const tn=be(qe,At.tags)||be(qe,At.process.tags);if(tn)return tn;At=Te(At)}}function Qe(qe,Ct){return qe.template(Ct)}function mt(qe,Ct){const At=[],tn=Object.keys(Ct).filter(Rn=>typeof Ct[Rn]=="string"||Ct[Rn]==="number");return qe?.filter(Rn=>Rn?.type("traces")).forEach(Rn=>{const Dn={};Rn?.parameters.every(aa=>{const Qn=aa;return tn.includes(Qn)?(Dn[aa]=Ct[Qn],!0):!1})&&At.push({url:Qe(Rn.url,Dn),text:Qe(Rn.text,Dn)})}),At}function vt(qe,Ct,At,tn){const Rn=At[tn];let Dn="logs";const kn=Ct.process.tags===At;kn&&(Dn="process"),Ct.tags===At&&(Dn="tags");const Qn=[];return qe.forEach(ia=>{if(ia.type(Dn)&&ia.key(Rn.key)&&ia.value(Rn.value)){const ja={};ia.parameters.every(Be=>{let Ae=be(Be,At);return!Ae&&!kn&&(Ae=We(Be,Ct)),Ae?(ja[Be]=Ae.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Be} for key ${Rn.key} in ${Dn}.`,ia.object),!1)})&&Qn.push({url:Qe(ia.url,ja),text:Qe(ia.text,ja)})}}),Qn}function rt(qe,Ct){return(At,tn,Rn)=>{if(qe.length===0)return[];const Dn=tn[Rn];let kn=Ct.get(Dn);return kn||(kn=vt(qe,At,tn,Rn),Ct.set(Dn,kn)),kn}}const Ot=(gt("linkPatterns")||[]).map(Ce).filter(qe=>Boolean(qe)),Et=(0,me.Z)(10)(qe=>{const Ct=[];return qe?mt(Ot,qe):Ct}),Mt=rt(Ot,new WeakMap);function ue(qe){let Ct;const At=new Set(qe.map(({spanID:tn})=>tn));for(let tn=0;tn<qe.length;tn++){if(qe[tn].references&&qe[tn].references.some(({traceID:aa,spanID:Qn})=>aa===qe[tn].traceID&&At.has(Qn)))continue;if(!Ct){Ct=qe[tn];continue}const Dn=qe[tn].references&&qe[tn].references.length||0,kn=Ct.references&&Ct.references.length||0;(Dn<kn||Dn===kn&&qe[tn].startTime<Ct.startTime)&&(Ct=qe[tn])}return Ct?`${Ct.process.serviceName}: ${Ct.operationName}`:""}const De=(0,Q.memoize)(ue,qe=>qe.length?qe[0].traceID:0);function Ne(qe){for(let Ct=0;Ct<qe.length;Ct++){const At=qe[Ct].tags.filter(Dn=>Dn.key==="http.method"),tn=qe[Ct].tags.filter(Dn=>Dn.key==="http.status_code"),Rn=qe[Ct].tags.filter(Dn=>Dn.key==="http.url"||Dn.key==="http.target"||Dn.key==="http.path");if(At.length>0||tn.length>0||Rn.length>0)return{method:At,status:tn,url:Rn}}return{}}const tt=(0,Q.memoize)(Ne,qe=>qe.length?qe[0].traceID:0);var et=e(320),Ue=e(13532);const Fe=qe=>({theme:qe,TracePageHeader:t.css`
      label: TracePageHeader;
      & > :last-child {
        border-bottom: 1px solid ${(0,d.h)(qe,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.3em;
      padding-bottom: 0.5em;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      background-color: ${(0,d.h)(qe,"#eee")};
      border-bottom: 1px solid ${(0,d.h)(qe,"#e4e4e4")};
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:h()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `,titleBorderBottom:t.css`
      border-bottom: 1px solid ${(0,d.h)(qe,"#e8e8e8")};
    `}),Ee=(qe,Ct,At)=>{const tn=(0,oe.dq)(qe.startTime/1e3,{timeZone:Ct,defaultWithMS:!0}),Rn=tn.match(/^(.+)(:\d\d\.\d+)$/);return Rn?n.createElement("span",{className:At.TracePageHeaderOverviewItemValue},Rn[1],n.createElement("span",{className:At.TracePageHeaderOverviewItemValueDetail},Rn[2])):tn},Me=[{key:"timestamp",label:"Trace Start:",renderer:Ee},{key:"duration",label:"Duration:",renderer:qe=>(0,et.LU)(qe.duration)},{key:"service-count",label:"Services:",renderer:qe=>new Set((0,Q.values)(qe.processes).map(Ct=>Ct.serviceName)).size},{key:"depth",label:"Depth:",renderer:qe=>(0,Q.get)((0,Q.maxBy)(qe.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:qe=>qe.spans.length}];function He(qe){const{trace:Ct,updateNextViewRangeTime:At,updateViewRangeTime:tn,viewRange:Rn,timeZone:Dn}=qe,kn=(0,f.wW)(Fe),aa=n.useMemo(()=>Ct?Et(Ct):[],[Ct]);if(!Ct)return null;const Qn=Me.map(ja=>{const{renderer:Tt,...Be}=ja;return{...Be,value:Tt(Ct,Dn,kn)}}),ia=n.createElement("h1",{className:kn.TracePageHeaderTitle},n.createElement(ve,{traceName:De(Ct.spans)})," ",n.createElement("small",{className:h()(kn.TracePageHeaderTraceId,v.pQ)},Ct.traceID));return n.createElement("header",{className:kn.TracePageHeader},n.createElement("div",{className:h()(kn.TracePageHeaderTitleRow,kn.titleBorderBottom)},aa&&aa.length>0&&n.createElement(ce,{links:aa,className:kn.TracePageHeaderBack}),ia),Qn&&n.createElement(ee.Z,{className:kn.TracePageHeaderOverviewItems,items:Qn}),n.createElement(Ue.Z,{trace:Ct,viewRange:Rn,updateNextViewRangeTime:At,updateViewRangeTime:tn}))}var Ze=e(61860),lt=e(19985),bt=e(47694),Pt=e(65066),Je=e(31403);const Dt=qe=>({ActionButton:t.css`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      width: 110px;
      justify-content: center;
      &:after {
        content: '';
        background: ${qe.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function Ve(qe){const{onClick:Ct,ariaLabel:At,label:tn,icon:Rn}=qe,Dn=(0,f.wW)(Dt);return n.createElement(Je.zx,{className:Dn.ActionButton,variant:"secondary",fill:"outline",type:"button",icon:Rn,"aria-label":At,onClick:Ct},tn)}const Xe=qe=>({TracePageActions:t.css`
      label: TracePageActions;
      display: flex;
      gap: 4px;
      margin-top: 2px;
    `,feedback:t.css`
      margin: 6px;
      color: ${qe.colors.text.secondary};
      font-size: ${qe.typography.bodySmall.fontSize};
      &:hover {
        color: ${qe.colors.text.link};
      }
    `});function st(qe){const{traceId:Ct,data:At,app:tn}=qe,Rn=(0,f.l4)(),Dn=Xe(Rn),[kn,aa]=(0,n.useState)(!1),Qn=()=>{navigator.clipboard.writeText(Ct),aa(!0),setTimeout(()=>{aa(!1)},5e3)},ia=()=>{const ja=(0,Pt.gb)(At,"Trace-"+Ct.substring(Ct.length-6));(0,o.ff)("grafana_traces_download_traces_clicked",{app:tn,grafana_version:bt.vc.buildInfo.version,trace_format:ja,location:"trace-view"})};return n.createElement("div",{className:Dn.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:Dn.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(se.J,{name:"comment-alt-message"})," Give feedback"),n.createElement(Ve,{onClick:Qn,ariaLabel:"Copy Trace ID",label:kn?"Copied!":"Trace ID",icon:"copy"}),n.createElement(Ve,{onClick:ia,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var ut=e(13572),xt=e(26418),Kt=e(2352),Jt=e(11543),On=e(81764),Nn=e(52081),jn=e(8581),ya=e(46967),Lt=e(75151),ft=e(8944);function Ht(qe,Ct){if(!Ct)return;let At=!1;qe.serviceName&&(Ct=sn(Ct,qe),At=!0),qe.spanName&&(Ct=pn(Ct,qe),At=!0),(qe.from||qe.to)&&(Ct=Pn(Ct,qe),At=!0);const tn=$t(Ct,qe.tags);return tn&&(Ct=tn,At=!0),At?new Set(Ct.map(Rn=>Rn.spanID)):void 0}const $t=(qe,Ct)=>{if(Ct=Ct.filter(At=>At.key&&At.key!==""||At.value),Ct.length>0)return qe.filter(At=>Ct.every(tn=>{if(tn.key&&tn.value){if(At.tags.some(Rn=>Wt(tn,Rn)))return jt(tn.operator,!0);if(At.process.tags.some(Rn=>Wt(tn,Rn)))return jt(tn.operator,!0);if(At.logs.some(Rn=>Rn.fields.some(Dn=>Wt(tn,Dn))))return jt(tn.operator,!0)}else if(tn.key){if(At.tags.some(Rn=>zt(tn.key,Rn.key)))return jt(tn.operator,!0);if(At.process.tags.some(Rn=>zt(tn.key,Rn.key)))return jt(tn.operator,!0);if(At.logs&&At.logs.some(Rn=>Rn.fields.some(Dn=>zt(tn.key,Dn.key))))return jt(tn.operator,!0)}return jt(tn.operator,!1)}))},zt=(qe,Ct)=>qe===Ct.toString(),Wt=(qe,Ct)=>qe.key===Ct.key.toString()&&qe.value===Ct.value.toString(),jt=(qe,Ct)=>qe==="="?Ct:!Ct,sn=(qe,Ct)=>qe.filter(At=>Ct.serviceNameOperator==="="?At.process.serviceName===Ct.serviceName:At.process.serviceName!==Ct.serviceName),pn=(qe,Ct)=>qe.filter(At=>Ct.spanNameOperator==="="?At.operationName===Ct.spanName:At.operationName!==Ct.spanName),Pn=(qe,Ct)=>{const At=Mn(Ct?.from||""),tn=Mn(Ct?.to||"");let Rn=[];if(At&&(Rn=qe.filter(Dn=>Ct.fromOperator===">"?Dn.duration>At:Dn.duration>=At)),tn){const Dn=kn=>Ct.toOperator==="<"?kn.duration<tn:kn.duration<=tn;Rn=Rn.length>0?Rn.filter(kn=>Dn(kn)):qe.filter(kn=>Dn(kn))}return Rn},Mn=qe=>{if(qe.includes("\u03BCs"))return parseFloat(qe.split("\u03BCs")[0]);if(qe.includes("ms"))return parseFloat(qe.split("ms")[0])*1e3;if(qe.includes("s"))return parseFloat(qe.split("s")[0])*1e3*1e3;if(qe.includes("m"))return parseFloat(qe.split("m")[0])*1e3*1e3*60;if(qe.includes("h"))return parseFloat(qe.split("h")[0])*1e3*1e3*60*60};function Cn(qe,Ct){if(!Ct)return;const At=[],tn=[];qe.split(/\s+/).filter(Boolean).forEach(Qn=>{Qn[0]==="-"?tn.push(Qn.slice(1).toLowerCase()):At.push(Qn.toLowerCase())});const Rn=(Qn,ia)=>Qn.some(ja=>ia.toLowerCase().includes(ja)),Dn=Qn=>Qn?Qn.some(ia=>Rn(tn,ia.key)?!1:Rn(At,ia.key)||Rn(At,ia.value.toString())):!1,kn=Qn=>Rn(At,Qn.operationName)||Rn(At,Qn.process.serviceName)||Dn(Qn.tags)||Qn.logs!==null&&Qn.logs.some(ia=>Dn(ia.fields))||Dn(Qn.process.tags)||At.some(ia=>ia===Qn.spanID);return new Set(Ct.filter(kn).map(Qn=>Qn.spanID))}const Hn=(0,n.memo)(function(Ct){const{search:At,spanFilterMatches:tn,showSpanFilterMatchesOnly:Rn,setShowSpanFilterMatchesOnly:Dn,setFocusedSpanIdForSearch:kn,datasourceType:aa,reset:Qn,totalSpans:ia}=Ct,[ja,Tt]=(0,n.useState)(-1),Be=(0,f.wW)(_n);(0,n.useEffect)(()=>{Tt(-1),kn("")},[kn,tn]),(0,n.useEffect)(()=>{if(tn){const at=Array.from(tn);kn(at[ja])}},[ja,kn,tn]);const Ae=()=>{if((0,o.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:aa,grafana_version:s.v.buildInfo.version,direction:"next"}),ja===-1||tn&&ja===tn.size-1){Tt(0);return}Tt(ja+1)},nt=()=>{if((0,o.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:aa,grafana_version:s.v.buildInfo.version,direction:"prev"}),tn&&(ja===-1||ja===0)){Tt(tn.size-1);return}Tt(ja-1)},ct=tn&&tn?.size>0,wt=(0,n.useMemo)(()=>At.serviceName&&At.serviceName!==""||At.spanName&&At.spanName!==""||Mn(At.from||"")||Mn(At.to||"")||At.tags.length>1||At.tags.some(at=>at.key),[At.serviceName,At.spanName,At.from,At.to,At.tags]),_t=tn?.size===1?"match":"matches",Nt=tn?.size===0?n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),n.createElement(Ze.u,{content:"There are 0 span matches for the filters selected. Please try removing some of the selected filters.",placement:"left"},n.createElement("span",{className:Be.matchesTooltip},n.createElement(se.J,{name:"info-circle",size:"lg"})))):ja!==-1?`${ja+1}/${tn?.size} ${_t}`:`${tn?.size} ${_t}`;return n.createElement("div",{className:Be.searchBar},n.createElement("div",{className:Be.buttons},n.createElement(n.Fragment,null,n.createElement("div",{className:Be.resetButton},n.createElement(Je.zx,{variant:"destructive",disabled:!wt,type:"button",fill:"outline","aria-label":"Reset filters button",onClick:Qn},"Reset"),n.createElement("div",{className:Be.matchesOnly},n.createElement(ft.r,{value:Rn,onChange:at=>Dn(at.currentTarget.checked??!1),label:"Show matches only switch"}),n.createElement("span",{onClick:()=>Dn(!Rn)},"Show matches only"))),n.createElement("div",{className:Be.nextPrevButtons},n.createElement("span",{className:Be.matches},tn?Nt:`${ia} spans`),n.createElement(Je.zx,{variant:"secondary",disabled:!ct,type:"button",fill:"outline","aria-label":"Prev result button",onClick:nt},"Prev"),n.createElement(Je.zx,{variant:"secondary",disabled:!ct,type:"button",fill:"outline","aria-label":"Next result button",onClick:Ae},"Next")))))}),_n=()=>({searchBar:t.css`
      display: inline;
    `,matchesOnly:t.css`
      display: inline-flex;
      margin: 0 0 0 10px;
      vertical-align: middle;

      span {
        cursor: pointer;
        margin: -3px 0 0 5px;
      }
    `,buttons:t.css`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,resetButton:t.css`
      order: 1;
    `,nextPrevButtons:t.css`
      margin-left: auto;
      order: 2;

      button {
        margin-left: 8px;
      }
    `,matches:t.css`
      margin-right: 5px;
    `,matchesTooltip:t.css`
      color: #aaa;
      margin: -2px 0 0 10px;
    `}),oa=(0,n.memo)(qe=>{const{trace:Ct,search:At,setSearch:tn,showSpanFilters:Rn,setShowSpanFilters:Dn,showSpanFilterMatchesOnly:kn,setShowSpanFilterMatchesOnly:aa,setFocusedSpanIdForSearch:Qn,spanFilterMatches:ia,datasourceType:ja}=qe,Tt={...(0,f.wW)(Gt)},[Be,Ae]=(0,n.useState)(),[nt,ct]=(0,n.useState)(),[wt,_t]=(0,n.useState)(),[Nt,at]=(0,n.useState)({}),An=(0,n.useCallback)(()=>{Ae(void 0),ct(void 0),_t(void 0),at({}),tn(Lt.js)},[tn]);if((0,n.useEffect)(()=>{An()},[An,Ct]),!Ct)return null;const Fn=()=>{if(!Be){const ma=Ct.spans.map(ba=>ba.process.serviceName);Ae((0,Q.uniq)(ma).sort().map(ut.E))}},Gn=()=>{if(!nt){const ma=Ct.spans.map(ba=>ba.operationName);ct((0,Q.uniq)(ma).sort().map(ut.E))}},$n=()=>{if(!wt){let ma=[],ba=[];Ct.spans.forEach(as=>{as.tags.forEach(ms=>{ma.push(ms.key)}),as.process.tags.forEach(ms=>{ma.push(ms.key)}),as.logs!==null&&as.logs.forEach(ms=>{ms.fields.forEach(Ya=>{ba.push(Ya.key)})})}),ma=(0,Q.uniq)(ma).sort(),ba=(0,Q.uniq)(ba).sort(),_t([...ma,...ba].map(ut.E))}},Ra=async ma=>{const ba=[];return Ct.spans.forEach(as=>{const ms=as.tags.find(Is=>Is.key===ma)?.value;ms&&ba.push(ms.toString());const Ya=as.process.tags.find(Is=>Is.key===ma)?.value;Ya&&ba.push(Ya.toString()),as.logs!==null&&as.logs.forEach(Is=>{const ws=Is.fields.find(Gs=>Gs.key===ma)?.value;ws&&ba.push(ws.toString())})}),(0,Q.uniq)(ba).sort().map(ut.E)},ts=(ma,ba)=>{tn({...At,tags:At.tags?.map(ms=>ms.id===ma.id?{...ms,key:ba?.value||"",value:void 0}:ms)}),(async()=>{if(ba?.value)at({...Nt,[ma.id]:await Ra(ba.value)});else{const ms={...Nt};ms[ma.id]&&delete ms[ma.id],at(ms)}})()},Ps=()=>{const ma={id:(0,Lt.kb)(),operator:"="};tn({...At,tags:[...At.tags,ma]})},vs=ma=>{let ba=At.tags.filter(as=>as.id!==ma);ba.length===0&&(ba=[{id:(0,Lt.kb)(),operator:"="}]),tn({...At,tags:ba})},Es=n.createElement(Ze.u,{content:"Filter your spans below. The more filters, the more specific the filtered spans.",placement:"right"},n.createElement("span",{className:Tt.collapseLabel},"Span Filters",n.createElement(se.J,{size:"md",name:"info-circle"})));return n.createElement("div",{className:Tt.container},n.createElement(Kt.U,{label:Es,collapsible:!0,isOpen:Rn,onToggle:Dn},n.createElement(Jt.Z,null,n.createElement(On._,{label:"Service Name",labelWidth:16},n.createElement(Nn.Lh,{spacing:"xs"},n.createElement(jn.Ph,{"aria-label":"Select service name operator",onChange:ma=>tn({...At,serviceNameOperator:ma.value}),options:[(0,ut.E)("="),(0,ut.E)("!=")],value:At.serviceNameOperator}),n.createElement(jn.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:ma=>tn({...At,serviceName:ma?.value||""}),onOpenMenu:Fn,options:Be,placeholder:"All service names",value:At.serviceName||null})))),n.createElement(Jt.Z,null,n.createElement(On._,{label:"Span Name",labelWidth:16},n.createElement(Nn.Lh,{spacing:"xs"},n.createElement(jn.Ph,{"aria-label":"Select span name operator",onChange:ma=>tn({...At,spanNameOperator:ma.value}),options:[(0,ut.E)("="),(0,ut.E)("!=")],value:At.spanNameOperator}),n.createElement(jn.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:ma=>tn({...At,spanName:ma?.value||""}),onOpenMenu:Gn,options:nt,placeholder:"All span names",value:At.spanName||null})))),n.createElement(Jt.Z,null,n.createElement(On._,{label:"Duration",labelWidth:16},n.createElement(Nn.Lh,{spacing:"xs"},n.createElement(jn.Ph,{"aria-label":"Select from operator",onChange:ma=>tn({...At,fromOperator:ma.value}),options:[(0,ut.E)(">"),(0,ut.E)(">=")],value:At.fromOperator}),n.createElement(ya.I,{"aria-label":"Select from value",onChange:ma=>tn({...At,from:ma.currentTarget.value}),placeholder:"e.g. 100ms, 1.2s",value:At.from||"",width:18}),n.createElement(jn.Ph,{"aria-label":"Select to operator",onChange:ma=>tn({...At,toOperator:ma.value}),options:[(0,ut.E)("<"),(0,ut.E)("<=")],value:At.toOperator}),n.createElement(ya.I,{"aria-label":"Select to value",onChange:ma=>tn({...At,to:ma.currentTarget.value}),placeholder:"e.g. 100ms, 1.2s",value:At.to||"",width:18})))),n.createElement(Jt.Z,null,n.createElement(On._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,At.tags.map((ma,ba)=>n.createElement("div",{key:ba},n.createElement(Nn.Lh,{spacing:"xs",width:"auto"},n.createElement(jn.Ph,{"aria-label":"Select tag key",isClearable:!0,key:ma.key,onChange:as=>ts(ma,as),onOpenMenu:$n,options:wt,placeholder:"Select tag",value:ma.key||null}),n.createElement(jn.Ph,{"aria-label":"Select tag operator",onChange:as=>{tn({...At,tags:At.tags?.map(ms=>ms.id===ma.id?{...ms,operator:as.value}:ms)})},options:[(0,ut.E)("="),(0,ut.E)("!=")],value:ma.operator}),n.createElement("span",{className:Tt.tagValues},n.createElement(jn.Ph,{"aria-label":"Select tag value",isClearable:!0,key:ma.value,onChange:as=>{tn({...At,tags:At.tags?.map(ms=>ms.id===ma.id?{...ms,value:as?.value||""}:ms)})},options:Nt[ma.id]?Nt[ma.id]:[],placeholder:"Select value",value:ma.value})),n.createElement(xt.AccessoryButton,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>vs(ma.id),title:"Remove tag"}),n.createElement("span",{className:Tt.addTag},At?.tags?.length&&ba===At.tags.length-1&&n.createElement(xt.AccessoryButton,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:Ps,title:"Add tag"})))))))),n.createElement(Hn,{search:At,spanFilterMatches:ia,showSpanFilterMatchesOnly:kn,setShowSpanFilterMatchesOnly:aa,setFocusedSpanIdForSearch:Qn,datasourceType:ja,reset:An,totalSpans:Ct.spans.length})))});oa.displayName="SpanFilters";const Gt=()=>({container:t.css`
      margin: 0.5em 0 -8px 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:t.css`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,addTag:t.css`
      margin: 0 0 0 10px;
    `,tagValues:t.css`
      max-width: 200px;
    `}),Bt=(0,n.memo)(qe=>{const{trace:Ct,data:At,app:tn,timeZone:Rn,search:Dn,setSearch:kn,showSpanFilters:aa,setShowSpanFilters:Qn,showSpanFilterMatchesOnly:ia,setShowSpanFilterMatchesOnly:ja,setFocusedSpanIdForSearch:Tt,spanFilterMatches:Be,datasourceType:Ae,setHeaderHeight:nt}=qe,ct={...(0,f.wW)(Fe),...(0,f.wW)(on)};(0,n.useEffect)(()=>{nt(document.querySelector("."+ct.header)?.scrollHeight??0)},[nt,aa,ct.header]);const wt=(0,n.useMemo)(()=>Ct?Et(Ct):[],[Ct]);if(!Ct)return null;const _t=n.createElement("h1",{className:h()(ct.title)},n.createElement(ve,{traceName:De(Ct.spans)}),n.createElement("small",{className:ct.duration},(0,et.LU)(Ct.duration))),{method:Nt,status:at,url:An}=tt(Ct.spans);let Fn="green";return at&&at.length>0&&(at[0].value.toString().charAt(0)==="4"?Fn="orange":at[0].value.toString().charAt(0)==="5"&&(Fn="red")),n.createElement("header",{className:ct.header},n.createElement("div",{className:ct.titleRow},wt&&wt.length>0&&n.createElement(ce,{links:wt,className:ct.TracePageHeaderBack}),_t,n.createElement(st,{traceId:Ct.traceID,data:At,app:tn})),n.createElement("div",{className:ct.subtitle},n.createElement("span",{className:ct.timestamp},Ee(Ct,Rn,ct)),n.createElement("span",{className:ct.tagMeta},Nt&&Nt.length>0&&n.createElement(Ze.u,{content:"http.method",interactive:!0},n.createElement("span",{className:ct.tag},n.createElement(lt.C,{text:Nt[0].value,color:"blue"}))),at&&at.length>0&&n.createElement(Ze.u,{content:"http.status_code",interactive:!0},n.createElement("span",{className:ct.tag},n.createElement(lt.C,{text:at[0].value,color:Fn}))),An&&An.length>0&&n.createElement(Ze.u,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:ct.url},An[0].value)))),n.createElement(oa,{trace:Ct,showSpanFilters:aa,setShowSpanFilters:Qn,showSpanFilterMatchesOnly:ia,setShowSpanFilterMatchesOnly:ja,search:Dn,setSearch:kn,spanFilterMatches:Be,setFocusedSpanIdForSearch:Tt,datasourceType:Ae}))});Bt.displayName="NewTracePageHeader";const on=qe=>({header:t.css`
      label: TracePageHeader;
      background-color: ${qe.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:t.css`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:t.css`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:t.css`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:t.css`
      margin: 0 0.5em 0 0;
    `,duration:t.css`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:t.css`
      vertical-align: middle;
    `,tagMeta:t.css`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:t.css`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});var rn=e(52541),In=e(88989);class Ln{constructor(Ct){const{isTagsOpen:At,isProcessOpen:tn,isReferencesOpen:Rn,isWarningsOpen:Dn,isStackTracesOpen:kn,logs:aa,references:Qn}=Ct||{};this.isTagsOpen=Boolean(At),this.isProcessOpen=Boolean(tn),this.isReferencesOpen=Boolean(Rn),this.isWarningsOpen=Boolean(Dn),this.isStackTracesOpen=Boolean(kn),this.logs={isOpen:Boolean(aa&&aa.isOpen),openedItems:aa&&aa.openedItems?new Set(aa.openedItems):new Set},this.references={isOpen:Boolean(Qn&&Qn.isOpen),openedItems:Qn&&Qn.openedItems?new Set(Qn.openedItems):new Set}}toggleTags(){const Ct=new Ln(this);return Ct.isTagsOpen=!this.isTagsOpen,Ct}toggleProcess(){const Ct=new Ln(this);return Ct.isProcessOpen=!this.isProcessOpen,Ct}toggleReferences(){const Ct=new Ln(this);return Ct.references.isOpen=!this.references.isOpen,Ct}toggleReferenceItem(Ct){const At=new Ln(this);return At.references.openedItems.has(Ct)?At.references.openedItems.delete(Ct):At.references.openedItems.add(Ct),At}toggleWarnings(){const Ct=new Ln(this);return Ct.isWarningsOpen=!this.isWarningsOpen,Ct}toggleStackTraces(){const Ct=new Ln(this);return Ct.isStackTracesOpen=!this.isStackTracesOpen,Ct}toggleLogs(){const Ct=new Ln(this);return Ct.logs.isOpen=!this.logs.isOpen,Ct}toggleLogItem(Ct){const At=new Ln(this);return At.logs.openedItems.has(Ct)?At.logs.openedItems.delete(Ct):At.logs.openedItems.add(Ct),At}}var Un=e(90158);class qn{static iterFunction(Ct,At=0){return tn=>Ct(tn.value,tn,At)}static searchFunction(Ct){return typeof Ct=="function"?Ct:(At,tn)=>Ct instanceof qn?tn===Ct:At===Ct}constructor(Ct,At=[]){this.value=Ct,this.children=At}get depth(){return this.children?.reduce((Ct,At)=>Math.max(At.depth+1,Ct),1)}get size(){let Ct=0;return this.walk(()=>Ct++),Ct}addChild(Ct){return this.children?.push(Ct instanceof qn?Ct:new qn(Ct)),this}find(Ct){if(qn.iterFunction(qn.searchFunction(Ct))(this))return this;for(let tn=0;tn<this.children.length;tn++){const Rn=this.children[tn].find(Ct);if(Rn)return Rn}return null}getPath(Ct){const At=qn.iterFunction(qn.searchFunction(Ct)),tn=(Rn,Dn)=>{const kn=Dn.concat([Rn]);if(At(Rn))return kn;for(let aa=0;aa<Rn.children.length;aa++){const Qn=Rn.children[aa],ia=tn(Qn,kn);if(ia)return ia}return null};return tn(this,[])}walk(Ct,At=0){const tn=[];let Rn=At;for(tn.push({node:this,depth:Rn});tn.length;){const Dn=tn.pop();if(Dn){const{node:kn,depth:aa}=Dn;Ct(kn.value,kn,aa),Rn=(aa||0)+1;let Qn=kn.children.length-1;for(;Qn>=0;)tn.push({node:kn.children[Qn],depth:Rn}),Qn--}}}}function da(qe,Ct){return qe.localeCompare(Ct)}function ha(qe,Ct){return qe-Ct}function Ta(qe){return`sorted ${qe===1?"ascending":"descending"}`}function Wa(qe,Ct){const{defaultDir:At=1}=Ct;return{key:Ct.name,dir:qe.key===Ct.name?-1*qe.dir:At}}const cs=qe=>qe.serviceName,is=qe=>qe.tags;var Ha=e(27303);const $a=qe=>qe.spanID,ss=qe=>qe.operationName,Oa=qe=>qe.duration,Ia=qe=>qe.startTime,ys=qe=>qe.processID,la=qe=>qe.references||[],Ts=(0,Un.P1)((0,Un.P1)(({span:qe})=>qe,la),({type:qe})=>qe,(qe,Ct)=>qe.find(At=>At.refType===Ct)),bs=(0,Un.P1)(qe=>Ts({span:qe,type:"CHILD_OF"}),qe=>qe?qe.spanID:null),ds=qe=>{if(!qe.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return qe.process},Us=(0,Un.P1)(ds,cs),Za=(0,Un.P1)(({spans:qe})=>qe,({leftBound:qe})=>qe,({rightBound:qe})=>qe,(qe,Ct,At)=>qe.filter(tn=>Ia(tn)>=Ct&&Ia(tn)<=At)),Ks=(0,Un.P1)(({spans:qe})=>qe,({text:qe})=>qe,(qe,Ct)=>qe.filter(At=>At?(0,Ha.C)(`${Us(At)} ${ss(At)}`,Ct).found:!1)),dn=qe=>qe.traceID,ln=qe=>qe.spans,Tn=qe=>qe.processes,zn=(0,Un.P1)(qe=>qe.span,qe=>qe.processes,(qe,Ct)=>({...qe,process:Ct[ys(qe)]})),ga=(0,Un.P1)(ln,qe=>qe.reduce((Ct,At)=>Ct.set($a(At),At),new Map)),va="__root__";function Ga(qe){const Ct=new Map(qe.spans.map(Dn=>[Dn.spanID,new qn(Dn.spanID)])),At=new Map(qe.spans.map(Dn=>[Dn.spanID,Dn])),tn=new qn(va);qe.spans.forEach(Dn=>{const kn=Ct.get(Dn.spanID);if(Array.isArray(Dn.references)&&Dn.references.length){const{refType:aa,spanID:Qn}=Dn.references[0];if(aa==="CHILD_OF"||aa==="FOLLOWS_FROM")(Ct.get(Qn)||tn).children?.push(kn);else throw new Error(`Unrecognized ref type: ${aa}`)}else tn.children.push(kn)});const Rn=(Dn,kn)=>{const aa=Dn?.value?At.get(Dn.value.toString()):void 0,Qn=kn?.value?At.get(kn.value.toString()):void 0;return+(aa?.startTime>Qn?.startTime)||+(aa?.startTime===Qn?.startTime)-1};return qe.spans.forEach(Dn=>{const kn=Ct.get(Dn.spanID);kn.children.length>1&&kn?.children.sort(Rn)}),tn.children.sort(Rn),tn}const qa=qe=>{const Ct=ln(qe),At=Tn(qe);return{...qe,spans:Ct.map(tn=>zn({span:tn,processes:At}))}},es=(0,Un.P1)(ln,qe=>qe.length),us=(0,Un.P1)(ln,qe=>qe.reduce((Ct,At)=>Ct?Math.min(Ct,Ia(At)):Ia(At),0)),hs=(0,Un.P1)(ln,us,(qe,Ct)=>qe.reduce((At,tn)=>At?Math.max(Ia(tn)-Ct+Oa(tn),At):Oa(tn),0)),$s=(0,Un.P1)(Ga,ga,(qe,Ct)=>qe.children.map(At=>Ct.get(At.value)).sort((At,tn)=>ha(Ia(At),Ia(tn)))[0]),tr=(0,Un.P1)(Ga,qe=>qe.depth-1),mr=(0,Un.P1)((0,Un.P1)(qe=>qe.trace,Ga),(0,Un.P1)(qe=>qe.span,$a),(qe,Ct)=>qe.getPath(Ct).length-1),ur=(0,Un.P1)(Tn,qe=>Object.keys(qe).reduce((Ct,At)=>Ct.add(cs(qe[At])),new Set)),sr=(0,Un.P1)(ur,qe=>qe.size),er={ms:et.Cz,s:et.Gk},ks=(0,Un.P1)(hs,qe=>qe>=et.WT?er.s:er.ms),Er=(0,Un.P1)(({duration:qe})=>qe,({unit:qe})=>er[qe],(qe,Ct)=>Ct(qe)),Vs=(0,Un.P1)(({duration:qe})=>qe,(0,Un.P1)(({trace:qe})=>qe,ks),(qe,Ct)=>Ct(qe)),Tr=(0,Un.P1)(({trace:qe})=>qe,({spans:qe})=>qe,({sort:qe})=>qe,(qe,Ct,{dir:At,comparator:tn,selector:Rn})=>[...Ct].sort((Dn,kn)=>At*tn(Rn(Dn,qe),Rn(kn,qe)))),pr=(0,Un.P1)((0,Un.P1)(qe=>qe.trace,Ga),(0,Un.P1)(qe=>qe.span,$a),(qe,Ct)=>{const At=qe.find(Ct);return At?At.size-1:-1}),yr=(0,Un.P1)((0,Un.P1)((0,Un.P1)(qa,$s),(0,Un.zB)({name:ss,serviceName:Us})),({name:qe,serviceName:Ct})=>`${Ct}: ${qe}`),Cr=(0,Un.P1)(({spans:qe})=>qe,(0,Un.P1)(({trace:qe})=>qe,Ga),({collapsed:qe})=>qe,(qe,Ct,At)=>{const tn=At.reduce((Rn,Dn)=>(Ct.find(Dn).walk(kn=>kn!==Dn&&Rn.add(kn)),Rn),new Set);return tn.size>0?qe.filter(Rn=>!tn.has($a(Rn))):qe}),Or=4,fr=3,Js=(0,Un.P1)(({trace:qe})=>qe,({interval:qe=Or})=>qe,({width:qe=fr})=>qe,(qe,Ct,At)=>[...Array(Ct+1).keys()].map(tn=>({timestamp:us(qe)+hs(qe)*(tn/Ct),width:At})));function Os(qe){const Ct=new Map,At=qe.reduce((Rn,Dn)=>(Rn.some(kn=>kn.key===Dn.key&&kn.value===Dn.value)?Ct.set(`${Dn.key}:${Dn.value}`,`Duplicate tag "${Dn.key}:${Dn.value}"`):Rn.push(Dn),Rn),[]),tn=Array.from(Ct.values());return{tags:At,warnings:tn}}function lr(qe,Ct){const At=qe?.slice()??[],tn=(Ct||[]).map(Rn=>Rn.toLowerCase());return At.sort((Rn,Dn)=>{const kn=Rn.key.toLowerCase(),aa=Dn.key.toLowerCase();for(let Qn=0;Qn<tn.length;Qn++){const ia=tn[Qn];if(kn.startsWith(ia)&&!aa.startsWith(ia))return-1;if(!kn.startsWith(ia)&&aa.startsWith(ia))return 1}return kn>aa?1:kn<aa?-1:0}),At}function fn(qe){if(!qe?.traceID)return null;const Ct=qe.traceID.toLowerCase();let At=0,tn=Number.MAX_SAFE_INTEGER;const Rn=new Map,Dn=new Map;qe.spans=qe.spans.filter(Be=>Boolean(Be.startTime)),qe.processes=Object.entries(qe.processes).reduce((Be,[Ae,nt])=>(Be[Ae]={...nt,tags:lr(nt.tags)},Be),{});const kn=qe.spans.length;for(let Be=0;Be<kn;Be++){const Ae=qe.spans[Be],{startTime:nt,duration:ct,processID:wt}=Ae;let _t=Ae.spanID;nt<tn&&(tn=nt),nt+ct>At&&(At=nt+ct);const Nt=Rn.get(_t);Nt!=null?(console.warn(`Dupe spanID, ${Nt+1} x ${_t}`,Ae,Dn.get(_t)),(0,Q.isEqual)(Ae,Dn.get(_t))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Rn.set(_t,Nt+1),_t=`${_t}_${Nt}`,Ae.spanID=_t):Rn.set(_t,1),Ae.process=qe.processes[wt],Dn.set(_t,Ae)}const aa=Ga(qe),Qn=[],ia={};aa.walk((Be,Ae,nt=0)=>{if(Be==="__root__"||typeof Be!="string")return;const ct=Dn.get(Be);if(!ct)return;const{serviceName:wt}=ct.process;ia[wt]=(ia[wt]||0)+1,ct.relativeStartTime=ct.startTime-tn,ct.depth=nt-1,ct.hasChildren=Ae.children.length>0,ct.childSpanCount=Ae.children.length,ct.warnings=ct.warnings||[],ct.tags=ct.tags||[],ct.references=ct.references||[];const _t=Os(ct.tags);ct.tags=lr(_t.tags,gt("topTagPrefixes")),ct.warnings=ct.warnings.concat(_t.warnings),ct.references.forEach((Nt,at)=>{const An=Dn.get(Nt.spanID);An&&(Nt.span=An,at>0&&(An.subsidiarilyReferencedBy=An.subsidiarilyReferencedBy||[],An.subsidiarilyReferencedBy.push({spanID:Be,traceID:Ct,span:ct,refType:Nt.refType})))}),Qn.push(ct)});const ja=De(Qn);return{services:Object.keys(ia).map(Be=>({name:Be,numberOfSpans:ia[Be]})),spans:Qn,traceID:Ct,traceName:ja,processes:qe.processes,duration:At-tn,startTime:tn,endTime:At}}},52541:(Y,O,e)=>{"use strict";e.d(O,{Hn:()=>u,Kg:()=>p,ZP:()=>g,th:()=>i});var t=e(9892),n=e(66111),o=e(13572),s=e(73446),l=e(72648),f=e(11543),d=e(81764),r=e(8581),c=e(46967),a=e(62911);const u="None",i="Duration",p="Tag";function g({options:E,onOptionsChange:h}){const v=(0,l.wW)(y),C=[u,i,p].map(o.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar"),n.createElement("div",{className:v.infoText},"Add additional info next to the service and operation on a span bar row in the trace view",n.createElement(a.j,{hrefSuffix:`${E.type}/#span-bar`})),n.createElement(f.Z,{className:v.row},n.createElement(d._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(r.Ph,{inputId:"label",options:C,value:E.jsonData.spanBar?.type||"",onChange:m=>{(0,s.tp)({onOptionsChange:h,options:E},"spanBar",{...E.jsonData.spanBar,type:m?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),E.jsonData.spanBar?.type===p&&n.createElement(f.Z,{className:v.row},n.createElement(d._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(c.I,{type:"text",placeholder:"Enter tag key",onChange:m=>(0,s.tp)({onOptionsChange:h,options:E},"spanBar",{...E.jsonData.spanBar,tag:m.currentTarget.value}),value:E.jsonData.spanBar?.tag||"",width:40}))))}const y=E=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(Y,O,e)=>{"use strict";e.d(O,{A4:()=>u,GL:()=>d,H3:()=>f,Im:()=>g,K9:()=>E,NY:()=>v,WW:()=>n,b$:()=>p,bi:()=>o,h2:()=>l,im:()=>s,oD:()=>r,pQ:()=>h,ty:()=>y,xb:()=>i});var t=e(9892);const n=t.css`
  position: relative;
`,o=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,l=t.css`
  margin: 0;
`,f=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,d=t.css`
  padding-bottom: 0.5rem;
`,r=t.css`
  display: flex;
`,c=t.css`
  align-items: center;
`,a=t.css`
  align-items: start;
`,u=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,i=t.css`
  text-align: right;
`,p=t.css`
  display: inline-block;
`,g=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.css`
  text-overflow: ellipsis;
`,E=t.css`
  width: 100%;
`,h=t.css`
  color: #aaa;
`,v=t.css`
  justify-content: flex-end;
`},54373:(Y,O,e)=>{"use strict";e.d(O,{EUpdateTypes:()=>n,default:()=>l});var t=(f=>(f.DragEnd="DragEnd",f.DragMove="DragMove",f.DragStart="DragStart",f.MouseEnter="MouseEnter",f.MouseLeave="MouseLeave",f.MouseMove="MouseMove",f))(t||{});const n=t;var o=e(82897);const s=0;class l{constructor({getBounds:d,tag:r,resetBoundsOnResize:c=!0,...a}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=u=>{const{button:i,clientX:p,type:g}=u;if(this._isDragging||i!==s)return;let y=null,E;if(g==="mouseenter")y=n.MouseEnter,E=this._onMouseEnter;else if(g==="mouseleave")y=n.MouseLeave,E=this._onMouseLeave;else if(g==="mousemove")y=n.MouseMove,E=this._onMouseMove;else throw new Error(`invalid event type: ${g}`);if(!E)return;const{value:h,x:v}=this._getPosition(p);E({event:u,type:y,value:h,x:v,manager:this,tag:this.tag})},this._handleDragEvent=u=>{const{button:i,clientX:p,type:g}=u;let y=null,E;if(g==="mousedown"){if(this._isDragging||i!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const C=(0,o.get)(document,"body.style");C&&(C.userSelect="none"),this._isDragging=!0,y=n.DragStart,E=this._onDragStart}else if(g==="mousemove"){if(!this._isDragging)return;y=n.DragMove,E=this._onDragMove}else if(g==="mouseup"){if(!this._isDragging)return;this._stopDragging(),y=n.DragEnd,E=this._onDragEnd}else throw new Error(`invalid event type: ${g}`);if(!E)return;const{value:h,x:v}=this._getPosition(p);E({event:u,type:y,value:h,x:v,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=d,this.tag=r,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(c),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=a.onMouseEnter,this._onMouseLeave=a.onMouseLeave,this._onMouseMove=a.onMouseMove,this._onDragStart=a.onDragStart,this._onDragMove=a.onDragMove,this._onDragEnd=a.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(d){const{clientXLeft:r,maxValue:c,minValue:a,width:u}=this._getBounds();let i=d-r,p=i/u;return a!=null&&p<a?(p=a,i=a*u):c!=null&&p>c&&(p=c,i=c*u),{value:p,x:i}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const d=(0,o.get)(document,"body.style");d&&(d.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},9096:(Y,O,e)=>{"use strict";e.d(O,{_K:()=>r,e6:()=>c});var t=e(58635),n=e(28550),o=e(16514);function s(u){if(u.length!==7)return[0,0,0];const i=u.slice(1,3),p=u.slice(3,5),g=u.slice(5);return[parseInt(i,16),parseInt(p,16),parseInt(g,16)]}class l{constructor(i,p){const g=a(i,p);this.colorsHex=g,this.colorsRgb=g.map(s),this.cache=new Map}_getColorIndex(i){let p=this.cache.get(i);if(p==null){const g=this.hashCode(i.toLowerCase());p=Math.abs(g%this.colorsHex.length);const y=Array.from(this.cache).pop();if(y&&y[1]){y[1]===p&&(p=this.getNextIndex(p));const E=this.colorsHex[y[1]];if(n.Z.readability(E,this.colorsHex[p])<1.5){let h=p;for(let v=0;v<this.colorsHex.length;v++)if(h=this.getNextIndex(h),n.Z.readability(E,this.colorsHex[h])>1.5){p=h;break}}}this.cache.set(i,p)}return p}getNextIndex(i){return i+1<this.colorsHex.length?i+1:0}hashCode(i){let p=0,g,y;for(g=0;g<i.length;g++)y=i.charCodeAt(g),p=(p<<5)-p+y;return p}getColorByKey(i){const p=this._getColorIndex(i);return this.colorsHex[p]}getRgbColorByKey(i){const p=this._getColorIndex(i);return this.colorsRgb[p]}clear(){this.cache.clear()}}const f=(0,t.Z)((u,i)=>new l(u,i));function d(u){f([],u)}function r(u,i){return f(o.O9,i).getColorByKey(u)}function c(u,i){return f(o.O9,i).getRgbColorByKey(u)}function a(u,i){const p=u.indexOf("#E24D42");p>-1&&u.splice(p,1);const g=u.indexOf("#BF1B00");g>-1&&u.splice(g,1);let y=[];for(const E of u)n.Z.readability(i.colors.background.primary,E)>=3&&y.push(E);return y}},320:(Y,O,e)=>{"use strict";e.d(O,{WT:()=>r,LU:()=>C,Cz:()=>h,Gk:()=>v});var t=e(82897),n=e(6835),o=e.n(n);function s(m,D){const P=Math.floor(Math.log10(Math.abs(m)))+1,b=D+P;return b<=0?Math.trunc(m):Number(m.toPrecision(b))}const l="YYYY-MM-DD",f="HH:mm",d=1e3,r=1e3*d,c=60*r,a=60*c,u=24*a,i=Math.log10(d),p=[{unit:"d",microseconds:u,ofPrevious:24},{unit:"h",microseconds:a,ofPrevious:60},{unit:"m",microseconds:c,ofPrevious:60},{unit:"s",microseconds:r,ofPrevious:1e3},{unit:"ms",microseconds:d,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],g=(m,D,P)=>s(m/P,D)*P;function y(m){return moment(m/d).format(l)}function E(m){return moment(m/d).format(f)}function h(m){const D=g(m,i,d);return`${o().duration(D/d).asMilliseconds()}ms`}function v(m){const D=g(m,i,r);return`${o().duration(D/d).asSeconds()}s`}function C(m){const[D,P]=(0,t.dropWhile)(p,({microseconds:T},S)=>S<p.length-1&&T>m);if(D.ofPrevious===1e3)return`${(0,t.round)(m/D.microseconds,2)}${D.unit}`;const M=`${Math.floor(m/D.microseconds)}${D.unit}`,x=Math.round(m/P.microseconds%D.ofPrevious),A=`${x}${P.unit}`;return x===0?M:`${M} ${A}`}},75151:(Y,O,e)=>{"use strict";e.d(O,{F4:()=>d,Rx:()=>r,js:()=>f,kb:()=>s});var t=e(66111),n=e(44288),o=e(95638);const s=()=>(0,n.Z)().slice(0,12),f={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function d(c){const[a,u]=(0,t.useState)(f),i=(0,t.useMemo)(()=>c&&(0,o.filterSpansNewTraceViewHeader)(a,c),[a,c]);return{newTraceViewHeaderSearch:a,setNewTraceViewHeaderSearch:u,spanFilterMatches:i}}function r(c){const[a,u]=(0,t.useState)(""),i=(0,t.useMemo)(()=>a&&c?(0,o.filterSpans)(a,c):void 0,[a,c]);return{search:a,setSearch:u,spanFindMatches:i}}},335:(Y,O,e)=>{"use strict";e.d(O,{N:()=>o});var t=e(12115),n=e(95638);function o(l){if(!l)return null;let f=l.fields.length===1?l.fields[0].values[0]:s(l);return(0,n.transformTraceData)(f)}function s(l){const f=new t.U(l),d={};for(let r=0;r<f.length;r++){const c=f.get(r);d[c.spanID]||(d[c.spanID]={serviceName:c.serviceName,tags:c.serviceTags})}return{traceID:f.get(0).traceID,processes:d,spans:f.toArray().map((r,c)=>{const a=[];return r.parentSpanID&&a.push({refType:"CHILD_OF",spanID:r.parentSpanID,traceID:r.traceID}),r.references&&a.push(...r.references.map(u=>({refType:"FOLLOWS_FROM",...u}))),{...r,duration:r.duration*1e3,startTime:r.startTime*1e3,processID:r.spanID,flags:0,references:a,logs:r.logs?.map(u=>({...u,timestamp:u.timestamp*1e3}))||[],dataFrameRowIndex:c}})}}},46526:(Y,O,e)=>{"use strict";e.d(O,{eX:()=>u,zU:()=>a});var t=e(62992),n=e(41818),o=e(5562),s=e(55935),l=e(98589),f=e(73257),d=e(86297),r=e(16983);const c=(0,t.PH)("explore/updateDatasourceInstance");function a(i,p,g){return async(y,E)=>{const h=E().user.orgId,{history:v,instance:C}=await(0,r.r_)(h,{uid:p}),m=E().explore[i].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(m?.meta?.mixed?"mixed":m?.type)||"unknown",to:C.meta.mixed?"mixed":C.type,exploreId:i}),y(c({exploreId:i,datasourceInstance:C,history:v})),g?.importQueries){const D=E().explore[i].queries;await y((0,f.GJ)(i,D,m,C))}E().explore[i].isLive&&y((0,d.oz)(i,o.dP.offOption.value)),g?.importQueries&&y((0,f.aA)(i))}}const u=(i,p)=>{if(c.match(p)){const{datasourceInstance:g,history:y}=p.payload;return(0,s.RZ)(i.querySubscription),{...i,datasourceInstance:g,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,l.DK)(),queryResponse:(0,r.lp)(),loading:!1,queryKeys:[],history:y,datasourceMissing:!1}}return i}},93713:(Y,O,e)=>{"use strict";e.d(O,{CK:()=>C,Om:()=>m,iz:()=>D,km:()=>y,qN:()=>v});var t=e(62992),n=e(82897),o=e.n(n),s=e(86647),l=e(55935),f=e(25405),d=e(46526),r=e(13582),c=e(48197),a=e(73257),u=e(86297),i=e(16983);const p=(0,t.PH)("explore/changeSize"),g=(0,t.PH)("explore/changePanels");function y(b,M,x){return async(A,T)=>{const S=T().explore[b];if(S===void 0)return;const{panelsState:U}=S;A(g({exploreId:b,panelsState:{...U,[M]:x}})),A((0,c.og)())}}const E=(0,t.PH)("explore/initializeExplore"),h=(0,t.PH)("explore/setUrlReplaced");function v(b,{height:M,width:x}){return p({exploreId:b,height:M,width:x})}function C(b,M,x,A,T,S,U,R){return async(F,B)=>{const K=(0,s.F)().getList();let L,N=[];if(K.length>=1){const z=B().user.orgId,G=await(0,i.r_)(z,M);L=G.instance,N=G.history}F(E({exploreId:b,containerWidth:T,eventBridge:S,queries:x,range:A,datasourceInstance:L,history:N,isFromCompactUrl:R})),U!==void 0&&F(g({exploreId:b,panelsState:U})),F((0,u.b3)({exploreId:b})),L&&F((0,a.aA)(b,{replaceUrl:!0}))}}function m(b,M){return async(x,A)=>{const T=A().explore[b];if(!T?.initialized)return;const S=(0,l.J5)(M),U=P(S,(0,i.D)(T)),{containerWidth:R,eventBridge:F}=T,{datasource:B,queries:K,range:L,panelsState:N}=S,z=[];for(let H=0;H<K.length;H++){const Q=K[H];z.push((0,l.fR)(Q,z,H))}const G=(0,f.Z)(A().user),I=(0,f.i)(A().user),V=(0,l.vP)(L,G,I);if(U.datasource){const H=await(0,l.Z8)(K);await x(C(b,B,H,V,R,F,N));return}U.range&&x((0,u.b3)({exploreId:b,rawRange:V.raw})),U.queries&&x((0,a.SE)({exploreId:b,queries:z})),U.panelsState&&N!==void 0&&x(g({exploreId:b,panelsState:N})),(U.queries||U.range)&&x((0,a.aA)(b))}}const D=(b=(0,i.t5)(),M)=>{if(b=(0,a.Y)(b,M),b=(0,d.eX)(b,M),b=(0,u.ok)(b,M),b=(0,r.Oo)(b,M),c.ZU.match(M)){const{richHistory:x,total:A}=M.payload.richHistoryResults;return{...b,richHistory:x,richHistoryTotal:A}}if(c.Zy.match(M)){const x=M.payload.filters;return{...b,richHistorySearchFilters:x}}if(p.match(M)){const x=M.payload.width;return{...b,containerWidth:x}}if(g.match(M)){const{panelsState:x}=M.payload;return{...b,panelsState:x}}if(E.match(M)){const{containerWidth:x,eventBridge:A,queries:T,range:S,datasourceInstance:U,history:R,isFromCompactUrl:F}=M.payload;return{...b,containerWidth:x,eventBridge:A,range:S,queries:T,initialized:!0,queryKeys:(0,l.$$)(T),datasourceInstance:U,history:R,datasourceMissing:!U,queryResponse:(0,i.lp)(),cache:[],isFromCompactUrl:F||!1}}return b},P=(b,M)=>{const x=!(0,n.isEqual)(M?.datasource,b?.datasource),A=!(0,n.isEqual)(M?.queries,b?.queries),T=!(0,n.isEqual)(M?.range||l.UI,b?.range||l.UI),S=!(0,n.isEqual)(M?.panelsState,b?.panelsState);return{datasource:x,queries:A,range:T,panelsState:S}}},13582:(Y,O,e)=>{"use strict";e.d(O,{Cs:()=>E,Ff:()=>u,KZ:()=>C,NV:()=>i,Oo:()=>m,TV:()=>g,WY:()=>c,ch:()=>v,ev:()=>a,fM:()=>f,ik:()=>p,io:()=>y,sO:()=>h});var t=e(62992),n=e(51424),o=e(27876),s=e(4219),l=e(48197);const f=(0,t.PH)("explore/historyUpdated"),d=({updatedQuery:D,deletedId:P})=>async(b,M)=>{r(M().explore,(x,A)=>{const T=x.richHistory.map(U=>U.id===D?.id?D:U).filter(U=>U.id!==P),S=x.richHistory.length-T.length;b((0,l.ZU)({richHistoryResults:{richHistory:T,total:x.richHistoryTotal-S},exploreId:A}))})},r=(D,P)=>{P(D.left,o.ExploreId.left),D.right&&P(D.right,o.ExploreId.right)},c=(D,P,b)=>async(M,x)=>{const{richHistoryStorageFull:A,limitExceeded:T}=await(0,n.au)(D,P,b,!1,"",!x().explore.richHistoryStorageFull,!x().explore.richHistoryLimitExceededWarningShown);A&&M((0,l.fm)()),T&&M((0,l.QN)())},a=(D,P)=>async(b,M)=>{const x=await(0,n.VI)(D,P);b(d({updatedQuery:x}))},u=(D,P)=>async b=>{const M=await(0,n.gt)(D,P);b(d({updatedQuery:M}))},i=D=>async P=>{const b=await(0,n.y9)(D);P(d({deletedId:b}))},p=()=>async D=>{await(0,n.HK)(),D((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:o.ExploreId.left})),D((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:o.ExploreId.right}))},g=D=>async(P,b)=>{const M=b().explore[D]?.richHistorySearchFilters;if(M){const x=await(0,n.ub)(M);P((0,l.ZU)({richHistoryResults:x,exploreId:D}))}},y=D=>async(P,b)=>{const M=b().explore[D]?.richHistorySearchFilters,x=b().explore[D]?.richHistory;if(M&&x){const A={...M,page:(M?.page||1)+1},T=await(0,n.ub)(A),S=[...x,...T.richHistory];P((0,l.Zy)({filters:A,exploreId:D})),P((0,l.ZU)({richHistoryResults:{richHistory:S,total:T.total},exploreId:D}))}},E=D=>async P=>{P((0,l.Zy)({filters:void 0,exploreId:D})),P((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:D}))},h=()=>async(D,P)=>{let b=P().explore.richHistorySettings;b||(b=await(0,n.di)(),D((0,l.e8)(b)))},v=D=>async P=>{P((0,l.e8)(D)),await(0,n.kg)(D)},C=(D,P)=>async(b,M)=>{await b((0,l.Zy)({exploreId:D,filters:{...P}}));const x=M().explore.richHistorySettings;(0,s.X)().lastUsedDataSourcesAvailable&&await b(v({...x,lastUsedDatasourceFilters:P.datasourceFilters}))},m=(D,P)=>f.match(P)?{...D,history:P.payload.history}:D},48197:(Y,O,e)=>{"use strict";e.d(O,{AP:()=>h,CL:()=>g,IS:()=>D,QN:()=>u,Sx:()=>y,WK:()=>v,YV:()=>b,ZP:()=>S,ZU:()=>c,Zy:()=>p,bW:()=>P,e8:()=>i,fm:()=>a,m$:()=>M,nL:()=>E,og:()=>m,tl:()=>r});var t=e(62992),n=e(49187),o=e(37932),s=e(55935),l=e(3032),f=e(93713),d=e(16983);const r=(0,t.PH)("explore/syncTimes"),c=(0,t.PH)("explore/richHistoryUpdated"),a=(0,t.PH)("explore/richHistoryStorageFullAction"),u=(0,t.PH)("explore/richHistoryLimitExceededAction"),i=(0,t.PH)("explore/richHistorySettingsUpdated"),p=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),g=(0,t.PH)("explore/saveCorrelationsAction"),y=(0,t.PH)("explore/splitSizeUpdateAction"),E=(0,t.PH)("explore/maximizePaneAction"),h=(0,t.PH)("explore/evenPaneResizeAction"),v=(0,t.PH)("explore/resetExplore"),C=(0,t.PH)("explore/splitClose"),m=U=>(R,F)=>{const{left:B,right:K}=F().explore,N={orgId:F().user.orgId.toString()};N.left=(0,n.S)((0,d.D)(B)),K?N.right=(0,n.S)((0,d.D)(K)):N.right=null,D.right=N.right,D.left=N.left,o.E1.partial({...N},U?.replace)},D={},P=U=>async(R,F)=>{const B=F().explore[l.Kd.left];let L=(0,d.D)(B);if(U){const{query:z,queries:G}=U;L={datasource:U.datasourceUid,queries:G??(z?[z]:[]),range:U.range||B.range,panelsState:U.panelsState}}const N=(0,n.S)(L);o.E1.partial({right:N},!0)};function b(U){return(R,F)=>{R(C({itemId:U})),R(m())}}const M=(U,R)=>async F=>{const{getDataSourceSrv:B,getTimeSrv:K,getExploreUrl:L,openInNewWindow:N}=R,z=B(),G=await L({panel:U,datasourceSrv:z,timeSrv:K()});if(N&&G){N(G);return}o.E1.push(G)},x=(0,d.t5)(),A={syncedTimes:!1,left:x,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},S={explore:(U=A,R)=>{if(C.match(R)){const{itemId:F}=R.payload,B={left:F===l.Kd.left?U.right:U.left,right:void 0};return{...U,...B,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(y.match(R)){const{largerExploreId:F}=R.payload;return{...U,largerExploreId:F,maxedExploreId:void 0,evenSplitPanes:F===void 0}}if(E.match(R)){const{exploreId:F}=R.payload;return{...U,largerExploreId:F,maxedExploreId:F,evenSplitPanes:!1}}if(h.match(R))return{...U,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(g.match(R))return{...U,correlations:R.payload};if(r.match(R))return{...U,syncedTimes:R.payload.syncedTimes};if(a.match(R))return{...U,richHistoryStorageFull:!0};if(u.match(R))return{...U,richHistoryLimitExceededWarningShown:!0};if(v.match(R)){const F=U[l.Kd.left],B=U[l.Kd.right];return(0,s.RZ)(F.querySubscription),B&&(0,s.RZ)(B.querySubscription),{...A,left:{...x,queries:U.left.queries}}}if(i.match(R)){const F=R.payload;return{...U,richHistorySettings:F}}if(R.payload){const{exploreId:F}=R.payload;if(F!==void 0){const B=U[F];return{...U,[F]:(0,f.iz)(B,R)}}}return U}}},73257:(Y,O,e)=>{"use strict";e.d(O,{CS:()=>vt,K8:()=>He,ci:()=>rt,qV:()=>Mt,LK:()=>Ze,Sv:()=>Ce,GJ:()=>ue,W1:()=>lt,sK:()=>De,Y:()=>Pt,aA:()=>tt,EA:()=>Me,P4:()=>We,sQ:()=>ye,KO:()=>Ee,SE:()=>ht,z0:()=>bt});var t=e(62992),n=e(10322),o=e.n(n),s=e(82897),l=e(23351),f=e(59980),d=e(11572),r=e(84946),c=e(39859),a=e(98803),u=e(52666),i=e(89749),p=e(13787),g=e(89424),y=e(4063),E=e(83881),h=e(35645),v=e(86647),C=e(41818),m=e(55935),D=e(5242),P=e(25405),b=e(63496),M=e(3153),x=e(27876),A=e(3032),T=e(659),S=e(60499),U=e(75434),R=e(9471),F=e(50928),B=e(6194),K=e(99098),L=e(20053),N=e(3281);const z=(Ve,Xe,st)=>(Ve.forEach(ut=>{const xt=ut.refId;if(!xt)return;const Kt=st[xt],Jt=Xe.filter(On=>On.source.uid===Kt);G(ut,Jt)}),Ve),G=(Ve,Xe)=>{Ve.fields.forEach(st=>{st.config.links=st.config.links?.filter(ut=>ut.origin!==N.n1.Correlations)||[],Xe.map(ut=>{ut.config?.field===st.name&&st.config.links.push({internal:{query:ut.config?.target,datasourceUid:ut.target.uid,datasourceName:ut.target.name,transformations:ut.config?.transformations},url:"",title:ut.label||ut.target.name,origin:N.n1.Correlations})})})};var I=e(81042);const V=Ve=>{const Xe=[],st=[],ut=[],xt=[],Kt=[],Jt=[],On=[];for(const Nn of Ve.series)switch(Nn.meta?.preferredVisualisationType){case"logs":xt.push(Nn);break;case"graph":Xe.push(Nn);break;case"trace":Kt.push(Nn);break;case"table":st.push(Nn);break;case"rawPrometheus":ut.push(Nn);break;case"nodeGraph":Jt.push(Nn);break;case"flamegraph":On.push(Nn);break;default:de(Nn)&&Xe.push(Nn),st.push(Nn)}return{...Ve,graphFrames:Xe,tableFrames:st,logsFrames:xt,traceFrames:Kt,nodeGraphFrames:Jt,flameGraphFrames:On,rawPrometheusFrames:ut,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},H=({queries:Ve,correlations:Xe})=>st=>{if(Ve?.length&&Xe?.length){const ut=(0,s.mapValues)((0,s.groupBy)(Ve,"refId"),"0.datasource.uid");z(st.series,Xe,ut)}return st},Q=Ve=>Ve.graphFrames.length?{...Ve,graphResult:Ve.graphFrames}:{...Ve,graphResult:null},oe=Ve=>{if(Ve.tableFrames.length===0)return(0,f.of)({...Ve,tableResult:null});Ve.tableFrames.sort((xt,Kt)=>{const Jt=xt.refId,On=Kt.refId;return Jt>On?1:Jt<On?-1:0});const Xe=Ve.tableFrames.every(xt=>de(xt)),st={interpolate:xt=>xt};return(Xe?(0,f.of)(Ve.tableFrames).pipe(F.Y.joinByFieldTransformer.operator({},st)):(0,f.of)(Ve.tableFrames).pipe(F.Y.mergeTransformer.operator({},st))).pipe((0,R.U)(xt=>{for(const Kt of xt)for(const Jt of Kt.fields)Jt.display=Jt.display??(0,B.U_)({field:Jt,theme:h.v.theme2,timeZone:Ve.request?.timezone??"browser"});return{...Ve,tableResult:xt}}))},se=Ve=>{const Xe=Ve.rawPrometheusFrames;if(!Xe||Xe.length===0)return(0,f.of)({...Ve,tableResult:null});Xe.sort((Kt,Jt)=>{const On=Kt.refId,Nn=Jt.refId;return On>Nn?1:On<Nn?-1:0});const st=Xe.every(Kt=>de(Kt)),ut={interpolate:Kt=>Kt};return(st?(0,f.of)(Xe).pipe(F.Y.joinByFieldTransformer.operator({},ut)):(0,f.of)(Xe).pipe(F.Y.mergeTransformer.operator({},ut))).pipe((0,R.U)(Kt=>{const Jt=Kt[0];for(const On of Jt.fields)On.display=On.display??(0,B.U_)({field:On,theme:h.v.theme2,timeZone:Ve.request?.timezone??"browser"});return{...Ve,rawPrometheusResult:Jt}}))},ie=(Ve={})=>Xe=>{if(Xe.logsFrames.length===0)return{...Xe,logsResult:null};const st=Xe.request?.intervalMs,ut=(0,L.aB)(Xe.logsFrames,st,Ve.absoluteRange,Ve.queries),xt=(0,m.Oy)(Ve.refreshInterval),Kt=(0,I.j0)(ut,xt),Jt=Kt.rows,On=Kt.series,Nn={...Kt,rows:Jt,series:On};return{...Xe,logsResult:Nn}};function j(Ve,Xe,st,ut,xt,Kt){return(0,f.of)(Ve).pipe((0,R.U)(Jt=>(0,E.zR)(Jt,Xe)),(0,R.U)(H({queries:xt,correlations:Kt})),(0,R.U)(V),(0,R.U)(Q),(0,R.U)(Q),(0,R.U)(ie({absoluteRange:st,refreshInterval:ut,queries:xt})),(0,c.z)(se),(0,c.z)(oe))}function de(Ve){const Xe=(0,s.groupBy)(Ve.fields,st=>st.type);return Boolean(Object.keys(Xe).length===2&&Xe[K.fS.time]?.length===1&&Xe[K.fS.number])}var ce=e(98589),ee=e(13582),le=e(48197),q=e(86297),fe=e(16983);const Z=(0,t.PH)("explore/addQueryRow"),ne=(0,t.PH)("explore/changeQueries"),re=(0,t.PH)("explore/cancelQueries"),ve=(0,t.PH)("explore/queriesImported"),me=(0,t.PH)("explore/queryStoreSubscription"),Ie=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),Ge=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),gt=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Te=(0,t.PH)("explore/cleanSupplementaryQueryAction"),Le=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Ye=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),it=(0,t.PH)("explore/queryStreamUpdated"),ht=(0,t.PH)("explore/setQueries"),Re=(0,t.PH)("changeLoadingState"),ye=(0,t.PH)("explore/setPausedState"),Ce=(0,t.PH)("explore/clearLogs"),be=(0,t.PH)("explore/scanStart"),We=(0,t.PH)("explore/scanStop"),Qe=(0,t.PH)("explore/addResultsToCache"),mt=(0,t.PH)("explore/clearCache");function vt(Ve,Xe){return async(st,ut)=>{const xt=ut().explore[Ve].queries;let Kt;if(xt.length===0){const On=ut().explore[Ve].datasourceInstance;(!h.v.featureToggles.exploreMixedDatasource||!On?.meta.mixed)&&(Kt=On)}const Jt=await(0,m.Xk)(xt,Xe,Kt?.getRef());st(Z({exploreId:Ve,index:Xe,query:Jt}))}}function rt(Ve){return(Xe,st)=>{Xe(We({exploreId:Ve})),Xe(re({exploreId:Ve}));const ut=st().explore[Ve].supplementaryQueries;for(const xt of ce.SY)Xe(gt({exploreId:Ve,type:xt})),ut[xt]?.data?.state!==u.Gu.Done&&Xe(Te({exploreId:Ve,type:xt}));Xe((0,le.og)())}}const Ot=(Ve,Xe)=>{const st=Ve.getRef();return Xe.map(ut=>({...ut,datasource:st}))},Et=async(Ve,Xe,st)=>{let ut=[];if(Xe.meta?.id===Ve.meta?.id)ut=st;else if((0,i.p)(Xe)&&(0,i.CZ)(Ve)){const xt=await Xe.exportToAbstractQueries(st);ut=await Ve.importFromAbstractQueries(xt)}else Ve.importQueries&&(ut=await Ve.importQueries(st,Xe));return Ot(Ve,ut)},Mt=(0,x.createAsyncThunk)("explore/changeQueries",async({queries:Ve,exploreId:Xe},{getState:st,dispatch:ut})=>{let xt=!1;const Kt=st().explore[Xe].queries;for(const Jt of Ve)for(const On of Kt)if(Jt.refId===On.refId&&Jt.datasource?.type!==On.datasource?.type){const Nn=await(0,v.F)().get(On.datasource),jn=await(0,v.F)().get({uid:Jt.datasource?.uid});await ut(ue(Xe,Kt,Nn,jn,Jt.refId)),xt=!0}xt||ut(ne({queries:Ve,exploreId:Xe})),Ve.length<Kt.length&&ut(tt(Xe))}),ue=(Ve,Xe,st,ut,xt)=>async Kt=>{if(!st){Kt(ve({exploreId:Ve,queries:Xe}));return}let Jt=Xe;if(ut.uid===b.D)Jt=Xe.map(Nn=>({...Nn,datasource:st.getRef()}));else if(st.uid===b.D){const Nn=(0,s.groupBy)(Xe,ya=>ya.datasource?.uid),jn=await Promise.all(Object.keys(Nn).map(async ya=>{const Lt=await(0,v.F)().get({uid:ya});return await Et(ut,Lt,Nn[ya])}));Jt=(0,s.flatten)(jn.filter(ya=>ya.length>0))}else{let Nn=Xe;if(xt!==void 0){const jn=Xe.find(ya=>ya.refId===xt);jn&&(Nn=[jn])}Jt=await Et(ut,st,Nn)}let On=await(0,m.Z8)(Jt,ut.getRef());if(xt!==void 0){Jt.length===0&&(Jt=[await(0,m.Xk)([],void 0,ut.getRef())]);const Nn=Xe.findIndex(ya=>ya.refId===xt),jn={...On[0],refId:Xe[Nn].refId};On=[...Xe],On[Nn]=jn}return Kt(ve({exploreId:Ve,queries:On})),On};function De(Ve,Xe,st){return async(ut,xt)=>{const Kt=xt().explore[Ve],{queries:Jt}=Kt,Nn=(await Promise.all(Jt.map(jn=>st({...jn},Xe)))).map((jn,ya)=>(0,m.fR)(jn,Jt,ya));ut(ht({exploreId:Ve,queries:Nn})),Xe.preventSubmit||ut(tt(Ve))}}async function Ne(Ve,Xe,st,ut,xt,Kt){const Jt=ut.meta.id,On=(0,m._Q)(st,Jt,xt);Ve((0,ee.fM)({exploreId:Kt,history:On})),Ve((0,ee.WY)(ut.uid,ut.name,xt)),await Ve((0,ee.TV)(A.Kd.left)),await Ve((0,ee.TV)(A.Kd.right))}const tt=(Ve,Xe)=>(st,ut)=>{st((0,q.b3)({exploreId:Ve}));const xt=Je();Xe?.preserveCache===!0||st(Ze(Ve));const Jt=ut().explore[Ve],{datasourceInstance:On,containerWidth:Nn,isLive:jn,range:ya,scanning:Lt,queryResponse:ft,querySubscription:Ht,refreshInterval:$t,absoluteRange:zt,cache:Wt,supplementaryQueries:jt}=Jt;let sn,pn;const Pn=Jt.queries.map(Cn=>({...Cn,datasource:Cn.datasource||On?.getRef()}));On!=null&&Ne(st,ut().explore,Jt.history,On,Pn,Ve),st((0,le.og)({replace:Xe?.replaceUrl}));const Mn=(0,fe.M0)(Wt,zt);if(Mn)sn=(0,l.a)([(0,f.of)(Mn),xt]).pipe((0,c.z)(([Cn,Hn])=>j(Cn,ft,zt,$t,Pn,Hn))),pn=sn.subscribe(Cn=>{Cn.error||st((0,le.og)()),st(it({exploreId:Ve,response:Cn}))});else{if(!(0,m.z_)(Pn)){st((0,le.og)({replace:Xe?.replaceUrl}));return}if(!On)return;const Cn=On?.interval;(0,m.RZ)(Ht);const Hn={minInterval:Cn,maxDataPoints:Nn,liveStreaming:jn},_n=(0,P.Z)(ut().user),oa=(0,m.Zf)(Ve,Pn,Hn,ya,Lt,_n);if(st(Re({exploreId:Ve,loadingState:u.Gu.Loading})),sn=(0,l.a)([(0,U.v7)(On,oa.request).pipe(jn?(0,a.p)(500):d.y),xt]).pipe((0,c.z)(([Gt,Bt])=>j(Gt,ft,zt,$t,Pn,Bt))),pn=sn.subscribe({next(Gt){if(Gt.logsResult!==null&&(0,C.ff)("grafana_explore_logs_result_displayed",{datasourceType:On.type}),st(it({exploreId:Ve,response:Gt})),ut().explore[Ve].scanning)if(Gt.state===u.Gu.Done&&Gt.series.length===0){const Bt=(0,D.e)(-1,ut().explore[Ve].range);st((0,q.b3)({exploreId:Ve,absoluteRange:Bt})),st(tt(Ve))}else st(We({exploreId:Ve}))},error(Gt){st((0,T.$l)((0,S.t_)("Query processing error",Gt))),st(Re({exploreId:Ve,loadingState:u.Gu.Error})),console.error(Gt)},complete(){ut().explore[Ve].queryResponse.state===u.Gu.Loading&&st(Re({exploreId:Ve,loadingState:u.Gu.Done}))}}),jn)for(const Gt of ce.SY)st(gt({exploreId:Ve,type:Gt})),st(Te({exploreId:Ve,type:Gt}));else st(Ue({exploreId:Ve,datasourceInstance:On,transaction:oa,newQuerySource:sn,supplementaryQueries:jt,queries:Pn,absoluteRange:zt}))}st(me({exploreId:Ve,querySubscription:pn}))},et=async(Ve,Xe)=>{const st=Ve.filter(xt=>xt.datasource?.uid!==b.D),ut=(0,s.groupBy)(st,"datasource.uid");return await Promise.all(Object.values(ut).map(async xt=>({datasource:await(0,v.F)().get(xt[0].datasource,Xe),targets:xt})))},Ue=(0,x.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:Ve,exploreId:Xe,transaction:st,newQuerySource:ut,supplementaryQueries:xt,queries:Kt,absoluteRange:Jt},{dispatch:On})=>{let Nn;Ve.meta.mixed?Nn=await et(st.request.targets,st.request.scopedVars):Nn=[{datasource:Ve,targets:st.request.targets}];for(const jn of ce.SY){const ya=(0,ce.Z9)(Nn,jn,{...st.request,requestId:`${st.request.requestId}_${(0,s.snakeCase)(jn)}`},ut);ya?(On(Ge({exploreId:Xe,type:jn,dataProvider:ya})),Fe(xt[jn].data,Kt,Jt)||(On(Te({exploreId:Xe,type:jn})),xt[jn].enabled&&On(lt(Xe,jn)))):On(gt({exploreId:Xe,type:jn}))}});function Fe(Ve,Xe,st){if(!Ve)return!1;const ut=(0,s.zipObject)((0,s.map)(Xe,"refId"),Xe),xt=(0,s.mapValues)((0,s.groupBy)(Ve.data.map(Nn=>Nn.meta?.custom?.sourceQuery),"refId"),s.head),Kt=Ve.data.every(Nn=>Nn.meta?.custom?.logsVolumeType===p.o8.FullRange),Jt=o()(ut,xt),On=Ve.data.every(Nn=>{const jn=Nn.meta?.custom?.absoluteRange;return jn?jn&&jn.from<=st.from&&st.to<=jn.to:!0});return Kt&&Jt&&On}function Ee(Ve,Xe){return(st,ut)=>{const xt=ut().explore[Ve].queries,Kt=Xe.map((Jt,On)=>(0,m.fR)(Jt,xt,On));st(ht({exploreId:Ve,queries:Kt})),st(tt(Ve))}}function Me(Ve){return(Xe,st)=>{Xe(be({exploreId:Ve}));const ut=(0,D.e)(-1,st().explore[Ve].range);Xe((0,q.b3)({exploreId:Ve,absoluteRange:ut})),Xe(tt(Ve))}}function He(Ve){return(Xe,st)=>{const ut=st().explore[Ve].queryResponse,xt=st().explore[Ve].absoluteRange,Kt=(0,fe.M7)(xt);ut.state===u.Gu.Done&&Xe(Qe({exploreId:Ve,cacheKey:Kt,queryResponse:ut}))}}function Ze(Ve){return(Xe,st)=>{Xe(mt({exploreId:Ve}))}}function lt(Ve,Xe){return(st,ut)=>{const{supplementaryQueries:xt}=ut().explore[Ve],Kt=xt[Xe].dataProvider;if(Kt){const Jt=Kt.subscribe({next:On=>{st(Ye({exploreId:Ve,type:Xe,data:On}))}});st(Le({exploreId:Ve,type:Xe,dataSubscription:Jt}))}}}function bt(Ve,Xe,st){return(ut,xt)=>{ut(Ie({exploreId:Ve,enabled:Xe,type:st})),(0,ce.B9)(Xe,st),Xe&&ut(lt(Ve,st))}}const Pt=(Ve,Xe)=>{if(Z.match(Xe)){const{queries:st}=Ve,{index:ut,query:xt}=Xe.payload,Kt=[...st.slice(0,ut+1),{...xt},...st.slice(ut+1)];return{...Ve,queries:Kt,queryKeys:(0,m.$$)(Kt)}}if(ne.match(Xe)){const{queries:st}=Xe.payload;return{...Ve,queries:st}}if(re.match(Xe))return(0,m.RZ)(Ve.querySubscription),{...Ve,loading:!1};if(ht.match(Xe)){const{queries:st}=Xe.payload;return{...Ve,queries:st.slice(),queryKeys:(0,m.$$)(st)}}if(me.match(Xe)){const{querySubscription:st}=Xe.payload;return{...Ve,querySubscription:st}}if(Ie.match(Xe)){const{enabled:st,type:ut}=Xe.payload,{supplementaryQueries:xt}=Ve,Kt=xt[ut].dataSubscription;!st&&Kt&&Kt.unsubscribe();const Jt={...xt,[ut]:{...xt[ut],enabled:st,data:void 0}};return{...Ve,supplementaryQueries:Jt}}if(Ge.match(Xe)){const{dataProvider:st,type:ut}=Xe.payload,{supplementaryQueries:xt}=Ve,Kt=xt[ut];Kt?.dataSubscription&&Kt.dataSubscription.unsubscribe();const Jt={...xt,[ut]:{...Kt,dataProvider:st,dataSubscription:void 0}};return{...Ve,supplementaryQueries:Jt}}if(gt.match(Xe)){const{type:st}=Xe.payload,{supplementaryQueries:ut}=Ve,xt=ut[st];xt?.dataSubscription&&xt.dataSubscription.unsubscribe();const Kt={...ut,[st]:{...xt,dataProvider:void 0,dataSubscription:void 0}};return{...Ve,supplementaryQueries:Kt}}if(Te.match(Xe)){const{type:st}=Xe.payload,{supplementaryQueries:ut}=Ve,xt={...ut,[st]:{...ut[st],data:void 0}};return{...Ve,supplementaryQueries:xt}}if(Le.match(Xe)){const{dataSubscription:st,type:ut}=Xe.payload,{supplementaryQueries:xt}=Ve,Kt={...xt,[ut]:{...xt[ut],dataSubscription:st}};return{...Ve,supplementaryQueries:Kt}}if(Ye.match(Xe)){let{data:st,type:ut}=Xe.payload;const{supplementaryQueries:xt}=Ve,Kt={...xt,[ut]:{...xt[ut],data:st}};return{...Ve,supplementaryQueries:Kt}}if(it.match(Xe))return Dt(Ve,Xe);if(ve.match(Xe)){const{queries:st}=Xe.payload;return{...Ve,queries:st,queryKeys:(0,m.$$)(st)}}if(Re.match(Xe)){const{loadingState:st}=Xe.payload;return{...Ve,queryResponse:{...Ve.queryResponse,state:st},loading:st===u.Gu.Loading||st===u.Gu.Streaming}}if(ye.match(Xe)){const{isPaused:st}=Xe.payload;return{...Ve,isPaused:st}}if(be.match(Xe))return{...Ve,scanning:!0};if(We.match(Xe))return{...Ve,scanning:!1,scanRange:void 0};if(Qe.match(Xe)){const{cache:ut}=Ve,{queryResponse:xt,cacheKey:Kt}=Xe.payload;let Jt=[...ut];return Jt.some(Nn=>Nn.key===Kt)||(Jt=[{key:Kt,value:xt},...Jt].slice(0,5)),{...Ve,cache:Jt}}if(mt.match(Xe))return{...Ve,cache:[]};if(Ce.match(Xe)){if(!Ve.logsResult)return{...Ve,clearedAtIndex:null};if(Ve.queryResponse.state===u.Gu.Loading)return{...Ve,clearedAtIndex:null,logsResult:{...Ve.logsResult,rows:[]}};const st=Ve.clearedAtIndex?Ve.clearedAtIndex+Ve.logsResult.rows.length:Ve.logsResult.rows.length-1;return{...Ve,clearedAtIndex:st,logsResult:{...Ve.logsResult,rows:[]}}}return Ve},Je=()=>new r.y(Ve=>{const Xe=M.h.getState().explore.correlations;if(Xe)Ve.next(Xe),Ve.complete();else{const st=M.h.subscribe(()=>{const{correlations:ut}=M.h.getState().explore;ut&&(st(),Ve.next(ut),Ve.complete())})}}),Dt=(Ve,Xe)=>{const{response:st}=Xe.payload,{request:ut,state:xt,series:Kt,error:Jt,graphResult:On,logsResult:Nn,tableResult:jn,rawPrometheusResult:ya,traceFrames:Lt,nodeGraphFrames:ft,flameGraphFrames:Ht,rawPrometheusFrames:$t}=st;if(Jt){if(Jt.type===g.eA.Timeout)return{...Ve,queryResponse:st,loading:xt===u.Gu.Loading||xt===u.Gu.Streaming};if(Jt.type===g.eA.Cancelled)return Ve;h.v.angularSupportEnabled&&Ve.datasourceInstance?.components?.QueryCtrl&&Ve.eventBridge.emit(y.Kh.dataError,Jt)}if(!ut)return{...Ve};if(h.v.angularSupportEnabled&&Ve.datasourceInstance?.components?.QueryCtrl){const zt=Kt.map(Wt=>(0,E.Zr)(Wt));Ve.eventBridge.emit(y.Kh.dataReceived,zt)}return{...Ve,queryResponse:st,graphResult:On,tableResult:jn,rawPrometheusResult:ya,logsResult:Ve.isLive&&Nn?{...Nn,rows:(0,fe.bG)(Ve.clearedAtIndex,Nn.rows)}:Nn,loading:xt===u.Gu.Loading||xt===u.Gu.Streaming,showLogs:!!Nn,showMetrics:!!On,showTable:!!jn?.length,showTrace:!!Lt.length,showNodeGraph:!!ft.length,showRawPrometheus:!!$t.length,showFlameGraph:!!Ht.length,clearedAtIndex:Ve.isLive?Ve.clearedAtIndex:null}}},86297:(Y,O,e)=>{"use strict";e.d(O,{F9:()=>C,b3:()=>h,cD:()=>y,mG:()=>v,ok:()=>m,oz:()=>E});var t=e(62992),n=e(67483),o=e(52666),s=e(20308),l=e(5562),f=e(55935),d=e(81042),r=e(25405),c=e(3032),a=e(19349),u=e(48197),i=e(73257);const p=(0,t.PH)("explore/changeRange"),g=(0,t.PH)("explore/changeRefreshInterval"),y=D=>(P,b)=>{const{syncedTimes:M}=b().explore;M?(P(h({...D,exploreId:c.Kd.left})),P((0,i.aA)(c.Kd.left,{preserveCache:!0})),P(h({...D,exploreId:c.Kd.right})),P((0,i.aA)(c.Kd.right,{preserveCache:!0}))):(P(h({...D})),P((0,i.aA)(D.exploreId,{preserveCache:!0})))};function E(D,P){return g({exploreId:D,refreshInterval:P})}const h=D=>(P,b)=>{const{exploreId:M,absoluteRange:x,rawRange:A}=D,T=b().explore[M],S=(0,r.Z)(b().user),U=(0,r.i)(b().user),{range:R}=T;let F=R.raw;x&&(F={from:(0,n.GY)(S,x.from),to:(0,n.GY)(S,x.to)}),A&&(F=A);const B=(0,f.OQ)(S,F,U),K={from:B.from.valueOf(),to:B.to.valueOf()},L={time:B.raw,refresh:!1,timepicker:{},getTimezone:()=>S,timeRangeUpdated:N=>{P(y({exploreId:M,rawRange:N}))}};(0,a.$t)().init(L),(0,s.J)().updateTimeRange((0,a.$t)().timeRange()),P(p({exploreId:M,range:B,absoluteRange:K}))};function v(D){return(P,b)=>{if(D===c.Kd.left){const x=b().explore.left;P(y({exploreId:c.Kd.right,rawRange:x.range.raw}))}else{const x=b().explore.right;P(y({exploreId:c.Kd.left,rawRange:x.range.raw}))}const M=b().explore.syncedTimes;P((0,u.tl)({syncedTimes:!M})),P((0,u.og)())}}function C(){return(D,P)=>{const b=(0,r.Z)(P().user),M=(0,r.i)(P().user),x=P().explore.left,A=(0,f.OQ)(b,x.range.raw,M),T={from:A.from.valueOf(),to:A.to.valueOf()};D(h({exploreId:c.Kd.left,absoluteRange:T}));const S=P().explore.right;if(S){const U=(0,f.OQ)(b,S.range.raw,M),R={from:U.from.valueOf(),to:U.to.valueOf()};D(h({exploreId:c.Kd.right,absoluteRange:R}))}D((0,u.og)())}}const m=(D,P)=>{if(g.match(P)){const{refreshInterval:b}=P.payload,M=l.dP.isLive(b),x=(0,f.Oy)(b),A=(0,d.j0)(D.logsResult,x);return l.dP.isLive(D.refreshInterval)&&!M&&(0,f.RZ)(D.querySubscription),{...D,refreshInterval:b,queryResponse:{...D.queryResponse,state:M?o.Gu.Streaming:o.Gu.Done},isLive:M,isPaused:M?!1:D.isPaused,loading:M,logsResult:A}}if(p.match(P)){const{range:b,absoluteRange:M}=P.payload;return{...D,range:b,absoluteRange:M}}return D}},16983:(Y,O,e)=>{"use strict";e.d(O,{M7:()=>v,lp:()=>g,bG:()=>m,M0:()=>C,D:()=>h,r_:()=>y,t5:()=>p,FG:()=>i});var t=e(82897),n=e(52666),o=e(75849),s=e(58379),l=e(55935),f=e(91162),d=e(98589),r=e(67483);const c=D=>{let P=D.raw.from;(0,r.v9)(P)&&(P=P.valueOf().toString(10));let b=D.raw.to;return(0,r.v9)(b)&&(b=b.valueOf().toString(10)),{from:P,to:b}},a={from:"now-6h",to:"now"},u="grafana.explore.style.graph",i=D=>{s.Z.set(u,D)},p=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:a},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:g(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,d.DK)(),panelsState:{}}),g=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,o.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(D,P){let b;try{b=await(0,f.ak)().get(P)}catch{b=await(0,f.ak)().get()}if(b.init)try{b.init()}catch(A){console.error(A)}const M=`grafana.explore.history.${b.meta?.id}`,x=s.Z.getObject(M,[]);return s.Z.set((0,l.I$)(D),b.uid),{history:x,instance:b}}function E(D){let P=(0,t.mapValues)(D,b=>(0,t.isObject)(b)?E(b):b);if(P=(0,t.omitBy)(P,t.isEmpty),!(0,t.isEmpty)(P))return P}function h(D){return{datasource:D.datasourceInstance?.uid||"",queries:D.queries.map(l.uC),range:c(D.range),panelsState:E(D.panelsState)}}function v(D){const P={from:D.from,to:D.to};return Object.entries(P).map(([M,x])=>`${encodeURIComponent(M)}=${encodeURIComponent(x.toString())}`).join("&")}function C(D,P){const b=v(P),M=D.findIndex(A=>A.key===b);return M>=0?D[M].value:void 0}const m=(D,P)=>P?D?P.slice(D+1):P:[]},41611:(Y,O,e)=>{"use strict";e.d(O,{a_:()=>v,Rb:()=>C,lt:()=>D,u8:()=>m});var t=e(82897),n=e(66111),o=e(72769),s=e(3281),l=e(206),f=e(94976),d=e(20308),r=e(41818),c=e(82002),a=e(27854),u=e.n(a),i=e(55935);const p=(b,M,x)=>{let A={},T={};if(b.type===s.sN.Regex&&b.expression){const S=new RegExp(b.expression,"gi"),U=M.matchAll(S);for(const R of U)R.groups?T=R.groups:T[b.mapValue||x]=R[1]||R[0]}else b.type===s.sN.Logfmt&&(T=u().parse(M));return Object.keys(T).forEach(S=>{const U=typeof T[S]=="string"?T[S]:(0,i.Xh)(T[S]);A[S]={value:U}}),A};var g=e(64703);const E=[b=>!b.internal||c.Vt.hasAccessToExplore()],h="grafana_data_link_clicked",v=b=>{const{field:M,vars:x,splitOpenFn:A,range:T,rowIndex:S,dataFrame:U}=b,R={...x||{}};R.__value={value:{raw:M.values[S]},text:"Raw value"};let F;return U&&(F=(0,o.z)({frame:U,rowIndex:S}),R.__data={value:{name:U.name,refId:U.refId,fields:F},text:"Data"},U.fields.forEach(B=>{F&&F[B.name]&&(R[B.name]={value:F[B.name]})}),R.__targetField={value:F[M.name]}),M.config.links?M.config.links.filter(L=>E.every(N=>N(L,R))).map(L=>{if(L.internal){let N={};L.internal?.transformations&&L.internal?.transformations.forEach(H=>{let Q;H.field?Q=U?.fields.find(se=>se.name===H.field)?.values[S]:Q=M.values[S],N={...N,...p(H,Q,M.name)}});const z={...R,...N},G=D(L,z);let I=[];if(G.variables.length===0){const H=M.name.toString();I.push({variableName:H,value:"",match:""})}else I=G.variables;const V=H=>{(0,r.ff)(h,{origin:L.origin||s.n1.Datasource,app:l.zj.Explore,internal:!0}),A?.(H)};return G.allVariablesDefined?{...(0,f._)({link:L,internalLink:L.internal,scopedVars:z,range:T,field:M,onClickFn:b.splitOpenFn?Q=>V(Q):void 0,replaceVariables:(0,d.J)().replace.bind((0,d.J)())}),variables:I}:void 0}else{const N=(G,I)=>(0,d.J)().replace(G,{...I,...R}),z=(0,g.Bq)().getDataLinkUIModel(L,N,M);return z.title||(z.title=C(z.href)),z}}).filter(L=>!!L):[]};function C(b){b.indexOf("://")<0&&(b=`http://${b}`);let M;try{M=new URL(b).hostname}catch{M=b}return M}function m(b,M){return(0,n.useCallback)((x,A)=>x.fields.flatMap(T=>T.config?.links&&T.config?.links.length?v({field:T,rowIndex:A,range:b,dataFrame:x,splitOpenFn:M}):[]),[b,M])}function D(b,M){let x=[];return(0,d.J)().replace.bind((0,d.J)())(P(b),M,void 0,x),x=(0,t.uniqBy)(x,"variableName"),{variables:x,allVariablesDefined:x.every(T=>T.found)}}function P(b){let M="",x;for(x in b)typeof b[x]=="string"?M+=" "+b[x]:typeof b[x]=="object"&&(M+=" "+P(b[x]));return M}},98589:(Y,O,e)=>{"use strict";e.d(O,{B9:()=>p,DK:()=>g,SY:()=>u,Z9:()=>h});var t=e(82897),n=e.n(t),o=e(84946),s=e(12877),l=e(95515),f=e(446),d=e(13787),r=e(52666),c=e(20053),a=e(58379);const u=[d.v8.LogsVolume,d.v8.LogsSample],i=v=>`grafana.explore.logs.enable${v}`,p=(v,C)=>{a.Z.set(i(C),v?"true":"false")},g=()=>{let v={[d.v8.LogsVolume]:{enabled:!0},[d.v8.LogsSample]:{enabled:!1}};for(const C of u){if(C===d.v8.LogsVolume){const D="grafana.explore.logs.enableVolumeHistogram",P=a.Z.get(D);if(P){v[C]={enabled:P==="true"},p(P==="true",d.v8.LogsVolume),localStorage.removeItem(D);continue}}if(C===d.v8.LogsSample)continue;a.Z.get(i(C))==="false"&&(v[C]={enabled:!1})}return v},y=(v,C,m)=>new o.y(D=>{v.subscribe(P=>{if(P.logsResult&&P.logsResult.rows&&P.logsResult.visibleRange&&P.logsResult.bucketSize!==void 0&&P.state===r.Gu.Done){const b=P.logsResult.bucketSize,M=C.map(T=>T.refId),x=(0,t.groupBy)(P.logsResult.rows,"dataFrame.refId");let A=[];M.forEach(T=>{if(x[T]?.length){const S=(0,c.Nw)(x[T],b);A=[...A,...S];const U={logsVolumeType:d.o8.Limited,absoluteRange:P.logsResult?.visibleRange,datasourceName:m,sourceQuery:C.find(R=>R.refId===T)};D.next({data:A.map(R=>{const F=R.meta?.custom||{};return{...R,meta:{custom:{...F,...U}}}}),state:P.state})}}),D.complete()}})}),E=(v,C,m,D)=>{if(v===d.v8.LogsVolume)return y(C,m,D)},h=(v,C,m,D)=>{const b=v.map(({datasource:M,targets:x},A)=>{const T=(0,t.cloneDeep)(m);return T.requestId=`${T.requestId||""}_${A}`,T.targets=x,(0,d.mN)(M,C)?M.getDataProvider(C,T):E(C,D,x,M.name)}).filter(r.fQ);if(b.length!==0)return b.length===1?b[0]:(0,s.T)(...b).pipe((0,f.R)((M,x)=>M.errors&&M.errors.length||x.state===r.Gu.NotStarted?M:x.state===r.Gu.Loading&&M.state===r.Gu.NotStarted?{...M,state:r.Gu.Loading}:x.state&&x.state!==r.Gu.Done?M:{...M,data:[...M.data,...x.data],state:r.Gu.Done},{data:[],state:r.Gu.NotStarted}),(0,l.E)())}},47471:(Y,O,e)=>{"use strict";e.d(O,{mV:()=>P,bE:()=>D});var t=e(49372),n=e(39859),o=e(59250),s=e(22069),l=e(20308),f=e(86647),d=e(66111),r=e(81764),c=e(8581),a=e(5076),u=e(71263),i=e(75897),p=e(436),g=e(17349),y=e(97573),E=e(51935);const h=14;function v(){const b=(0,d.useRef)({}),M=(0,d.useCallback)(A=>{switch(A){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return b.current[A];case y.Us.classic:return}},[]),x=(0,d.useCallback)((A,T)=>{switch(A){case y.Us.math:b.current.math=T;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:b.current.reduce=T,b.current.resample=T,b.current.threshold=T;break}},[]);return{getCachedExpression:M,setCachedExpression:x}}function C(b){const{query:M,queries:x,onRunQuery:A,onChange:T}=b,{getCachedExpression:S,setCachedExpression:U}=v();(0,d.useEffect)(()=>{U(M.type,M.expression)},[M.expression,M.type,U]);const R=(0,d.useCallback)(K=>{const L=S(K.value),N=(0,E.J)({...M,type:K.value});T({...N,expression:L??N.expression})},[M,T,S]),F=()=>{const K=x.filter(L=>M.refId!==L.refId).map(L=>({value:L.refId,label:L.refId}));switch(M.type){case y.Us.math:return d.createElement(u.Z,{onChange:T,query:M,labelWidth:h,onRunQuery:A});case y.Us.reduce:return d.createElement(i.v,{refIds:K,onChange:T,labelWidth:h,query:M});case y.Us.resample:return d.createElement(p.p,{query:M,labelWidth:h,onChange:T,refIds:K});case y.Us.classic:return d.createElement(a.I,{onChange:T,query:M,refIds:K});case y.Us.threshold:return d.createElement(g.M,{onChange:T,query:M,labelWidth:h,refIds:K})}},B=y._M.find(K=>K.value===M.type);return d.createElement("div",null,d.createElement(r._,{label:"Operation",labelWidth:h},d.createElement(c.Ph,{options:y._M,value:B,onChange:R,width:25})),F())}class m extends s.CK{constructor(M){super(M),this.instanceSettings=M}applyTemplateVariables(M,x){const A=(0,l.J)();return{...M,expression:A.replace(M.expression,x),window:A.replace(M.window,x)}}getCollapsedText(M){return`Expression: ${M.type}`}query(M){let x=M.targets.map(async T=>{const S=await(0,f.F)().get(T.datasource);return S.interpolateVariablesInQueries?S?.interpolateVariablesInQueries([T],M.scopedVars)[0]:T});return(0,t.D)(Promise.all(x)).pipe((0,n.z)(T=>super.query({...M,targets:T})))}newQuery(M){return{refId:"--",datasource:s.hr,type:M?.type??y.Us.math,...M}}}const D={id:-100,uid:y.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:o.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},P=new m(D);P.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},P.components={QueryEditor:C}},5076:(Y,O,e)=>{"use strict";e.d(O,{I:()=>C});var t=e(66111),n=e(11543),o=e(81764),s=e(31403),l=e(39904),f=e(51935),d=e(9892),r=e(26418),c=e(72648),a=e(44342),u=e(8581),i=e(46967),p=e(67162);const g=p.Z.reducerTypes.map(m=>({label:m.text,value:m.value})),y=p.Z.evalOperators.map(m=>({label:m.text,value:m.value})),E=p.Z.evalFunctions.map(m=>({label:m.text,value:m.value})),h=({condition:m,index:D,onChange:P,onRemoveCondition:b,refIds:M})=>{const x=(0,c.wW)(v),A=K=>{P({...m,operator:{type:K.value}})},T=K=>{P({...m,reducer:{type:K.value,params:[]}})},S=K=>{P({...m,query:{params:[K.value]}})},U=K=>{P({...m,evaluator:{params:m.evaluator.params,type:K.value}})},R=(K,L)=>{const N=parseFloat(K.currentTarget.value),z=[...m.evaluator.params];z[L]=N,P({...m,evaluator:{...m.evaluator,params:z}})},F=d.css`
    width: 60px;
  `,B=m.evaluator.type===p.$.IsWithinRange||m.evaluator.type===p.$.IsOutsideRange;return t.createElement(r.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,D===0?t.createElement("div",{className:(0,d.cx)(x.button,F)},"WHEN"):t.createElement(a.d,{className:(0,d.cx)(x.buttonSelectText,F),options:y,onChange:A,value:y.find(K=>K.value===m.operator.type)}),t.createElement(u.Ph,{options:g,onChange:T,width:20,value:g.find(K=>K.value===m.reducer.type)}),t.createElement("div",{className:x.button},"OF"),t.createElement(u.Ph,{onChange:S,options:M,width:"auto",value:M.find(K=>K.value===m.query.params[0])})),t.createElement(n.Z,null,t.createElement(a.d,{className:x.buttonSelectText,options:E,onChange:U,value:E.find(K=>K.value===m.evaluator.type)}),B?t.createElement(t.Fragment,null,t.createElement(i.I,{type:"number",width:10,onChange:K=>R(K,0),value:m.evaluator.params[0]}),t.createElement("div",{className:x.button},"TO"),t.createElement(i.I,{type:"number",width:10,onChange:K=>R(K,1),value:m.evaluator.params[1]})):m.evaluator.type!==p.$.HasNoValue?t.createElement(i.I,{type:"number",width:10,onChange:K=>R(K,0),value:m.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>b(D)},t.createElement(l.J,{name:"trash-alt"})))},v=m=>{const D=d.css`
    color: ${m.colors.primary.text};
    font-size: ${m.typography.bodySmall.fontSize};
  `;return{buttonSelectText:D,button:(0,d.cx)(d.css`
        display: flex;
        align-items: center;
        border-radius: ${m.shape.borderRadius(1)};
        font-weight: ${m.typography.fontWeightMedium};
        border: 1px solid ${m.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${m.spacing(1)};
        background-color: ${m.colors.background.canvas};
      `,D)}},C=({onChange:m,query:D,refIds:P})=>{const b=(A,T)=>{D.conditions&&m({...D,conditions:[...D.conditions.slice(0,T),A,...D.conditions.slice(T+1)]})},M=()=>{if(D.conditions){const A=D.conditions.at(-1)?.query?.params??[],T={...f.R,query:{params:A}};m({...D,conditions:D.conditions.length>0?[...D.conditions,T]:[T]})}},x=A=>{if(D.conditions){const T=D.conditions[A],S=D.conditions.filter(U=>U!==T).map((U,R)=>R===0?{...U,operator:{type:"when"}}:U);m({...D,conditions:S})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(o._,{label:"Conditions",labelWidth:14},t.createElement("div",null,D.conditions?.map((A,T)=>{if(A)return t.createElement(h,{key:T,index:T,condition:A,onChange:S=>b(S,T),onRemoveCondition:x,refIds:P})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:M},t.createElement(l.J,{name:"plus-circle"})))}},71263:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>u});var t=e(9892),n=e(66111),o=e(26418),s=e(72648),l=e(81764),f=e(77117),d=e(39904),r=e(97379),c=e(42042);const a="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",u=({labelWidth:y,onChange:E,query:h,onRunQuery:v})=>{const C=P=>{E({...h,expression:P.target.value})},m=(0,s.wW)(p),D=()=>{h.expression&&v()};return n.createElement(o.Stack,{direction:"row"},n.createElement(l._,{label:n.createElement(f.W,{width:"auto"},n.createElement(c.z,{content:n.createElement("div",{className:m.documentationContainer},n.createElement("header",{className:m.documentationHeader},n.createElement(d.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:m.documentationHeader},"Available Math functions"),n.createElement("div",{className:m.documentationFunctions},n.createElement(i,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(i,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(i,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(i,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(i,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(i,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(i,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(i,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(i,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(i,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:m.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(d.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(d.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(r.K,{value:h.expression,onChange:C,rows:1,placeholder:a,onBlur:D,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},i=({name:y,description:E})=>{const h=(0,s.wW)(g);return n.createElement(n.Fragment,null,n.createElement("span",{className:h.name},y),n.createElement("span",{className:h.description},E))},p=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),g=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(Y,O,e)=>{"use strict";e.d(O,{v:()=>d});var t=e(66111),n=e(81764),o=e(46967),s=e(11543),l=e(8581),f=e(97573);const d=({labelWidth:r="auto",onChange:c,refIds:a,query:u})=>{const i=f.SQ.find(m=>m.value===u.reducer),p=m=>{c({...u,expression:m.value})},g=m=>{c({...u,reducer:m.value})},y=m=>{c({...u,settings:m})},E=m=>{let D;switch(m.value){case f.kN.ReplaceNonNumbers:let P=0;u.settings?.mode===f.kN.ReplaceNonNumbers&&(P=u.settings?.replaceWithValue??0),D={mode:f.kN.ReplaceNonNumbers,replaceWithValue:P};break;default:D={mode:m.value}}y(D)},h=m=>{const D=m.currentTarget.valueAsNumber;y({mode:f.kN.ReplaceNonNumbers,replaceWithValue:D??0})},v=u.settings?.mode??f.kN.Strict,C=()=>{if(v===f.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:r},t.createElement(o.I,{type:"number",width:10,onChange:h,value:u.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:r},t.createElement(l.Ph,{options:f.SQ,value:i,onChange:g,width:20})),t.createElement(n._,{label:"Input",labelWidth:r},t.createElement(l.Ph,{onChange:p,options:a,value:u.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:r},t.createElement(l.Ph,{onChange:E,options:f.YM,value:v,width:25})),C()))}},436:(Y,O,e)=>{"use strict";e.d(O,{p:()=>d});var t=e(66111),n=e(11543),o=e(81764),s=e(8581),l=e(46967),f=e(97573);const d=({labelWidth:r="auto",onChange:c,refIds:a,query:u})=>{const i=f.Fr.find(v=>v.value===u.downsampler),p=f.r8.find(v=>v.value===u.upsampler),g=v=>{c({...u,window:v.target.value})},y=v=>{c({...u,expression:v.value})},E=v=>{c({...u,downsampler:v.value})},h=v=>{c({...u,upsampler:v.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(o._,{label:"Input",labelWidth:r},t.createElement(s.Ph,{onChange:y,options:a,value:u.expression,width:20}))),t.createElement(n.Z,null,t.createElement(o._,{label:"Resample to",labelWidth:r,tooltip:"10s, 1m, 30m, 1h"},t.createElement(l.I,{onChange:g,value:u.window,width:15})),t.createElement(o._,{label:"Downsample"},t.createElement(s.Ph,{options:f.Fr,value:i,onChange:E,width:25})),t.createElement(o._,{label:"Upsample"},t.createElement(s.Ph,{options:f.r8,value:p,onChange:h,width:25}))))}},17349:(Y,O,e)=>{"use strict";e.d(O,{M:()=>i});var t=e(9892),n=e(66111),o=e(72648),s=e(11543),l=e(81764),f=e(8581),d=e(44342),r=e(46967),c=e(67162),a=e(97573);const u=c.$.IsAbove,i=({labelWidth:y,onChange:E,refIds:h,query:v})=>{const C=(0,o.wW)(g),m={type:"query",evaluator:{type:u,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},D=v.conditions?.length?v.conditions:[m],P=D[0],b=a.Mi.find(S=>S.value===D[0].evaluator?.type),M=S=>{E({...v,expression:S.value})},x=S=>{const U=S.value??u;E({...v,conditions:p(D,{type:U})})},A=(S,U)=>{const R=parseFloat(S.currentTarget.value),F=[...P.evaluator.params];F[U]=R,E({...v,conditions:p(D,{params:F})})},T=P.evaluator.type===c.$.IsWithinRange||P.evaluator.type===c.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(l._,{label:"Input",labelWidth:y},n.createElement(f.Ph,{onChange:M,options:h,value:v.expression,width:20})),n.createElement(d.d,{className:C.buttonSelectText,options:a.Mi,onChange:x,value:b}),T?n.createElement(n.Fragment,null,n.createElement(r.I,{type:"number",width:10,onChange:S=>A(S,0),defaultValue:P.evaluator.params[0]}),n.createElement("div",{className:C.button},"TO"),n.createElement(r.I,{type:"number",width:10,onChange:S=>A(S,1),defaultValue:P.evaluator.params[1]})):n.createElement(r.I,{type:"number",width:10,onChange:S=>A(S,0),defaultValue:D[0].evaluator.params[0]||0}))};function p(y,E){return[{...y[0],evaluator:{...y[0].evaluator,...E}}]}const g=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(Y,O,e)=>{"use strict";e.d(O,{j:()=>o});var t=e(22069),n=e(97573);const o=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const l=s;return typeof l.type!="string"?!1:Object.values(n.Us).includes(l.type)}},97573:(Y,O,e)=>{"use strict";e.d(O,{Fr:()=>c,Mi:()=>u,SQ:()=>f,Us:()=>s,YM:()=>r,Yq:()=>o,_M:()=>l,kN:()=>d,r8:()=>a});var t=e(33750),n=e(67162);const o="__expr__";var s=(i=>(i.math="math",i.reduce="reduce",i.resample="resample",i.classic="classic_conditions",i.threshold="threshold",i))(s||{});const l=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],f=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var d=(i=>(i.Strict="",i.ReplaceNonNumbers="replaceNN",i.DropNonNumbers="dropNN",i))(d||{});const r=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],c=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],a=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],u=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(Y,O,e)=>{"use strict";e.d(O,{J:()=>s,R:()=>l});var t=e(33750),n=e(67162),o=e(97573);const s=f=>{switch(f.type){case o.Us.reduce:f.reducer||(f.reducer=t.gz.mean);break;case o.Us.resample:f.downsampler||(f.downsampler=t.gz.mean),f.upsampler||(f.upsampler="fillna"),f.reducer=void 0;break;case o.Us.math:f.expression=void 0;break;case o.Us.classic:f.conditions||(f.conditions=[l]);break;default:f.reducer=void 0}return f},l={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(Y,O,e)=>{"use strict";e.d(O,{Go:()=>p,J6:()=>y,OD:()=>i,Pb:()=>u,Uk:()=>v,W7:()=>m,a:()=>g,pz:()=>C,v7:()=>h});var t=e(65583),n=e(72196),o=e(37932),s=e(54899),l=e(659),f=e(60499),d=e(77582),r=e(29930),c=e(60492),a=e(15932);function u(D){return async P=>{const b=await r.ae.getFolderByUid(D);return P((0,a.G3)(b)),P((0,l.RL)((0,c.B1)(b))),b}}function i(D){return async P=>{const b=await r.ae.put(`/api/folders/${D.uid}`,{title:D.title,version:D.version});P((0,l.$l)((0,f.AT)("Folder saved"))),P((0,a.G3)(b)),o.E1.push(n.u.stripBaseFromUrl(`${b.url}/settings`))}}function p(D){return async()=>{await r.ae.delete(`/api/folders/${D}?forceDeleteRules=false`),o.E1.push("/dashboards")}}function g(D){return async P=>{const b=await r.ae.get(`/api/folders/${D}/permissions`);P((0,a.R7)(b))}}function y(D){return async P=>{try{await(0,t.n)(r.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${D}/permissions`})),P((0,a.$$)(!0))}catch(b){(0,s.kW)(b)&&b.status!==403&&P((0,l.$l)((0,f.ZR)("Error checking folder permissions",b.data?.message))),P((0,a.$$)(!1))}}}function E(D){return{userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}}function h(D,P){return async(b,M)=>{const x=M().folder,A=[];for(const T of x.permissions){if(T.inherited)continue;const S=E(T);D===T&&(S.permission=P),A.push(S)}await r.ae.post(`/api/folders/${x.uid}/permissions`,{items:A}),await b(g(x.uid))}}function v(D){return async(P,b)=>{const M=b().folder,x=[];for(const A of M.permissions)A.inherited||A===D||x.push(E(A));await r.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await P(g(M.uid))}}function C(D){return async(P,b)=>{const M=b().folder,x=[];for(const A of M.permissions)A.inherited||x.push(E(A));x.push({userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}),await r.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await P(g(M.uid))}}function m(D,P){return async b=>{const M=await(0,s.i)().post("/api/folders",{title:D,parentUid:P});await d.Vt.fetchUserPermissions(),b((0,l.$l)((0,f.AT)("Folder Created","OK"))),o.E1.push(n.u.stripBaseFromUrl(M.url))}}},60492:(Y,O,e)=>{"use strict";e.d(O,{B1:()=>a,Pr:()=>l,_l:()=>u,y3:()=>s});var t=e(35645),n=e(82002),o=e(27876);const s="manage-folder",l=i=>`folder-dashboards-${i}`,f=i=>`folder-library-panels-${i}`,d=i=>`folder-alerting-${i}`,r=i=>`folder-permissions-${i}`,c=i=>`folder-settings-${i}`;function a(i,p=i.parents){const g={icon:"folder",id:s,subTitle:"Manage folder dashboards and permissions",url:i.url,text:i.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:l(i.uid),text:"Dashboards",url:i.url}]};if(p&&p.length>0){const y=p[p.length-1],E=p.slice(0,p.length-1);g.parentItem=a(y,E)}return g.children.push({active:!1,icon:"library-panel",id:f(i.uid),text:"Panels",url:`${i.url}/library-panels`}),n.Vt.hasPermission(o.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&g.children.push({active:!1,icon:"bell",id:d(i.uid),text:"Alert rules",url:`${i.url}/alerting`}),i.canAdmin&&g.children.push({active:!1,icon:"lock",id:r(i.uid),text:"Permissions",url:`${i.url}/permissions`}),i.canSave&&g.children.push({active:!1,icon:"cog",id:c(i.uid),text:"Settings",url:`${i.url}/settings`}),g}function u(i){const p=a({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return p.children[i].active=!0,{main:p,node:p.children[i]}}},15932:(Y,O,e)=>{"use strict";e.d(O,{$$:()=>r,G3:()=>f,R7:()=>l,Ss:()=>d,ZP:()=>a});var t=e(62992),n=e(2024);const o={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:o,reducers:{loadFolder:(u,i)=>({...u,...i.payload,hasChanged:!1}),setFolderTitle:(u,i)=>({...u,title:i.payload,hasChanged:i.payload.trim().length>0}),loadFolderPermissions:(u,i)=>({...u,permissions:(0,n.A)(i.payload)}),setCanViewFolderPermissions:(u,i)=>(u.canViewFolderPermissions=i.payload,u)}}),{loadFolderPermissions:l,loadFolder:f,setFolderTitle:d,setCanViewFolderPermissions:r}=s.actions,a={folder:s.reducer}},74311:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>c});var t=e(9892),n=e(66111),o=e(72648),s=e(8581),l=e(45253),f=e(7804),d=e(73063);const r=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:d.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],c=({value:u,onChange:i,context:p,item:g})=>{const y=a((0,o.l4)()),[E,h]=(0,n.useState)(),v=g.settings;(0,n.useEffect)(()=>{async function D(){const P=await(0,d.so)(u);h(P)}D()},[u,h]);const{current:C,options:m}=(0,n.useMemo)(()=>{let D=v?.options?[...v.options]:[...r],P=D?.find(b=>b.value===E?.path);return!P&&E&&(P={label:E.path,value:E.path},D.push(P)),{options:D,current:P}},[E,v?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:C,options:m,onChange:D=>i(D.value),allowCustomValue:!0,formatCreateLabel:D=>`Load from URL: ${D}`}),E&&n.createElement(n.Fragment,null,E.error&&n.createElement(l.b,{title:E.error,severity:"warning"}),E.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",E.count,")"),E.examples(10).map(D=>n.createElement("span",{key:D},D,",")),E.count>10&&" ...")))},a=(0,f.B)(u=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(Y,O,e)=>{"use strict";e.d(O,{C:()=>h});var t=e(99098),n=e(40538),o=e(74311),s=e(9892),l=e(66111),f=e(68183),d=e(72648),r=e(45253),c=e(39904),a=e(8581),u=e(52081),i=e(43524);const p=[{value:n.q1.Auto,label:"Auto",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],g="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:v,onChange:C,context:m,item:D})=>{const[P,b]=(0,l.useState)();(0,l.useEffect)(()=>{D.settings?.source&&D.settings?.data?.length&&D.settings.data[0]&&(0,i.cJ)(D.settings.source).then(A=>{D.settings&&D.settings.data&&b((0,i.g6)(D.settings.data[0],A))})},[D.settings]);const M=(0,d.wW)(E),x=()=>{if(P){if(P.warning)return l.createElement(r.b,{title:P.warning,severity:"warning",buttonContent:l.createElement(c.J,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const A=window.open(g,"_blank","noopener,noreferrer");A&&(A.opener=null)}});if(v===n.q1.Auto&&P.description)return l.createElement("span",null,P.description)}return null};return l.createElement(l.Fragment,null,l.createElement(a.Ph,{options:p,value:v,onChange:A=>{C(A.value)}}),l.createElement(u.Lh,{className:M.hGroup},x()))},E=v=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function h(v,C,m,D,P){switch(m.addCustomEditor({id:"modeEditor",path:`${C}mode`,name:"Location Mode",editor:y,settings:{data:P,source:D}}),D?.mode){case n.q1.Coords:m.addFieldNamePicker({path:`${C}latitude`,name:"Latitude field",settings:{filter:b=>b.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${C}longitude`,name:"Longitude field",settings:{filter:b=>b.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:m.addFieldNamePicker({path:`${C}geohash`,name:"Geohash field",settings:{filter:b=>b.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:m.addFieldNamePicker({path:`${C}lookup`,name:"Lookup field",settings:{filter:b=>b.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${C}gazetteer`,name:"Gazetteer",editor:o.Q})}}},50466:(Y,O,e)=>{"use strict";e.d(O,{EK:()=>i,Fh:()=>p,ie:()=>u,uZ:()=>c,zS:()=>a});var t=e(63897),n=e(30292),o=e(17792),s=e(29501),l=e(99098),f=e(14573);function d(y){if(!y?.length)return;const E=[16,8,4,2,1],h="0123456789bcdefghjkmnpqrstuvwxyz";let v=!0;const C=[],m=[];C[0]=-90,C[1]=90,m[0]=-180,m[1]=180;let D;y.split("").forEach(M=>{D=h.indexOf(M),E.forEach(x=>{r(v?m:C,D,x),v=!v})});const P=(C[0]+C[1])/2;return[(m[0]+m[1])/2,P]}function r(y,E,h){E&h?y[0]=(y[0]+y[1])/2:y[1]=(y[0]+y[1])/2}function c(y){return{name:y.name??"Point",type:l.fS.geo,values:y.values.map(E=>{const h=d(E);if(h)return new t.Z((0,s.mi)(h))}),config:g}}function a(y,E){const h=new Array(y.values.length);for(let v=0;v<y.values.length;v++){const C=y.values[v],m=E.values[v];C===null||m===null||(h[v]=new t.Z((0,s.mi)([C,m])))}return{name:"Point",type:l.fS.geo,values:h,config:g}}function u(y,E){const h=E.values.length,v=new Array(h);for(let C=0;C<h;C++)v[C]=y.find(E.values[C])?.geometry();return{name:"Geometry",type:l.fS.geo,values:v,config:g}}function i(y,E){const h=y.values,v=E.values;if(!h||!v)throw"missing src/dest";if(h.length!==v.length)throw"Source and destination field lengths do not match";const C=y.values.length,m=new Array(C);for(let D=0;D<C;D++){const P=h[D],b=v[D];P&&b?m[D]=new n.Z([P,b]):P?m[D]=P:b&&(m[D]=b)}return{name:"Geometry",type:l.fS.geo,values:m,config:g}}function p(y,E){const h=y.values,v=E.values;if(!h||!v)throw"missing src/dest";if(h.length!==v.length)throw"Source and destination field lengths do not match";const C=y.values.length,m=new Array(C);for(let D=0;D<C;D++){const P=h[D],b=v[D];P&&b&&(m[D]=new o.Z([(0,f.Lb)(P),(0,f.Lb)(b)]))}return{name:"Geometry",type:l.fS.geo,values:m,config:g}}const g=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(Y,O,e)=>{"use strict";e.d(O,{LI:()=>y,so:()=>E});var t=e(55839),n=e(63897),o=e(83881),s=e(99098),l=e(54899),f=e(69396);function d(h){const v=new f.Z().readFeatures(h,{featureProjection:"EPSG:3857"}),C=v.length,m=new Array(C).fill(null),D=[],P=new Map,b=T=>{let S=P.get(T);return S||(S={types:new Set,values:new Array(C).fill(null),count:0},D.push(T),P.set(T,S)),S},M=(...T)=>{for(const S of T)if(!P.has(S))return S;return"___"+T[0]},x={types:new Set,values:new Array(C).fill(null),count:0};for(let T=0;T<C;T++){const S=v[T];m[T]=S.getGeometry();const U=S.getId();U!=null&&(x.values[T]=U,x.types.add((0,o.DP)(U)),x.count++);for(const R of S.getKeys()){const F=S.get(R);if(F===m[T]||F==null)continue;const B=b(R);B.values[T]=F,B.types.add((0,o.DP)(F)),B.count++}}const A=[];if(x.count>0){const T=r(x);A.push({name:M("id","_id","__id"),type:T,values:x.values,config:{}})}A.push({name:M("geo","geometry"),type:s.fS.geo,values:m,config:{}});for(const T of D){const S=P.get(T);if(!S)continue;const U=r(S);A.push({name:T,type:U,values:S.values,config:{}})}return{fields:A,length:C}}function r(h){return h.count<1?s.fS.other:h.types.size>1?(h.values=h.values.map(v=>v!=null?`${v}`:v),s.fS.string):h.types.values().next().value}var c=e(50466),a=e(29501);function u(h,v){let C=0;const m=new Map;for(const D of v){const P=new n.Z((0,a.mi)([D.longitude,D.latitude])),b={point:()=>P,geometry:()=>P};if(D.name&&(m.set(D.name,b),m.set(D.name.toUpperCase(),b)),D.key&&(m.set(D.key,b),m.set(D.key.toUpperCase(),b)),D.keys)for(const M of D.keys)m.set(M,b),m.set(M.toUpperCase(),b);C++}return{path:h,find:D=>{let P=m.get(D);return!P&&typeof D=="string"&&(P=m.get(D.toUpperCase())),P},count:C,examples:D=>{const P=[];if(m.size<1)P.push("no values found");else for(const b of m.keys())if(P.push(b),P.length>=D)break;return P}}}function i(h,v){let C;if(Array.isArray(v)){const m=v[0];if(m.latitude&&m.longitude&&(m.key||m.keys))return u(h,v)}else Array.isArray(v?.features)&&v?.type==="FeatureCollection"&&(C=d(v));if(!C)try{C=(0,o.g0)(v)}catch(m){return{path:h,error:`${m}`,find:D=>{},examples:D=>[]}}return p(C,{path:h})}function p(h,v){const C=[];let m,D,P,b,M;for(const T of h.fields)if(T.type===s.fS.geo&&(m=T),!M&&T.type===s.fS.string&&(M=T),T.name){v.keys&&v.keys.includes(T.name)&&C.push(T);const S=T.name.toUpperCase();switch(S){case"LAT":case"LATITUTE":D=T;break;case"LON":case"LNG":case"LONG":case"LONGITUE":P=T;break;case"GEOHASH":b=T;break;case"ID":case"UID":case"KEY":case"CODE":v.keys||C.push(T);break;default:v.keys||(S.endsWith("_ID")||S.endsWith("_CODE"))&&C.push(T)}}!C.length&&M&&C.push(M);let x=!1;m?x=m.values[0]?.getType()==="Point":b?(m=(0,c.uZ)(b),x=!0):D&&P&&(m=(0,c.zS)(P,D),x=!0);const A=new Map;return C.forEach(T=>{T.values.forEach((S,U)=>{const R=`${S}`;A.set(R.toUpperCase(),U),A.set(R,U)})}),{path:v.path,find:T=>{const S=A.get(T);if(S!=null){const U=m?.values[S];return{frame:h,index:S,point:()=>!U||x?U:new n.Z((0,t.qg)(U.getExtent())),geometry:()=>U}}},examples:T=>{const S=[];for(let U of A.keys())if(S.push(U),S.length>T)break;return S},frame:()=>h,count:h.length}}const g={},y="public/gazetteer/countries.json";async function E(h){h||(h=y);let v=g[h];if(!v){try{const C=await(0,l.i)().get(h);v=i(h,C)}catch(C){console.warn("Error loading placename lookup",h,C),v={path:h,error:"Error loading URL",find:m=>{},examples:m=>[]}}g[h]=v}return v}},43524:(Y,O,e)=>{"use strict";e.d(O,{cJ:()=>u,g6:()=>p});var t=e(30471),n=e(99098),o=e(50035),s=e(90748),l=e(40538),f=e(50466),d=e(73063);function r(g){return y=>{for(const E of y.fields)if(g(E,y,[]))return E}}function c(g){return y=>{for(const E of y.fields){if(g.has(E.name.toLowerCase()))return E;const h=(0,t.CZ)(E,y);if(g.has(h))return E}}}const a={mode:l.q1.Auto,geohash:c(new Set(["geohash"])),latitude:c(new Set(["latitude","lat"])),longitude:c(new Set(["longitude","lon","lng"])),h3:c(new Set(["h3"])),wkt:c(new Set(["wkt"])),lookup:c(new Set(["lookup"])),geo:g=>g.fields.find(y=>y.type===n.fS.geo)};async function u(g){const y={...a,mode:g?.mode??l.q1.Auto};switch(y.gazetteer=await(0,d.so)(g?.gazetteer),y.mode){case l.q1.Geohash:g?.geohash?y.geohash=r((0,o.sq)({id:s.mi.byName,options:g.geohash})):y.geohash=()=>{};break;case l.q1.Lookup:const E=g?.lookup?.length?(0,o.sq)({id:s.mi.byName,options:g.lookup}):(0,o.sq)({id:s.mi.byType,options:n.fS.string});y.lookup=r(E);break;case l.q1.Coords:g?.latitude?y.latitude=r((0,o.sq)({id:s.mi.byName,options:g.latitude})):y.latitude=()=>{},g?.longitude?y.longitude=r((0,o.sq)({id:s.mi.byName,options:g.longitude})):y.longitude=()=>{};break}return y}function i(g,y){const E={mode:y.mode??l.q1.Auto};if(E.mode===l.q1.Auto){if(E.geo=y.geo(g),E.geo)return E;if(E.latitude=y.latitude(g),E.longitude=y.longitude(g),E.latitude&&E.longitude)return E.mode=l.q1.Coords,E;if(E.geohash=y.geohash(g),E.geohash)return E.mode=l.q1.Geohash,E;if(E.lookup=y.lookup(g),E.lookup)return E.mode=l.q1.Lookup,E}switch(E.mode){case l.q1.Coords:E.latitude=y.latitude(g),E.longitude=y.longitude(g);break;case l.q1.Geohash:E.geohash=y.geohash(g);break;case l.q1.Lookup:E.lookup=y.lookup(g);break}return E}function p(g,y){const E=i(g,y);switch(E.mode){case l.q1.Auto:return E.geo?{field:E.geo}:{warning:"Unable to find location fields"};case l.q1.Coords:return E.latitude&&E.longitude?{field:(0,f.zS)(E.longitude,E.latitude),derived:!0,description:`${E.mode}: ${E.latitude.name}, ${E.longitude.name}`}:{warning:"Select latitude/longitude fields"};case l.q1.Geohash:return E.geohash?{field:(0,f.uZ)(E.geohash),derived:!0,description:`${E.mode}`}:{warning:"Select geohash field"};case l.q1.Lookup:return E.lookup?y.gazetteer?{field:(0,f.ie)(y.gazetteer,E.lookup),derived:!0,description:`${E.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},39653:(Y,O,e)=>{"use strict";e.d(O,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Help="help",n))(t||{})},65066:(Y,O,e)=>{"use strict";e.d(O,{Fc:()=>a,KO:()=>i,gb:()=>p,gv:()=>u});var t=e(3574),n=e.n(t),o=e(77258),s=e(13512),l=e(76015),f=e(53678),d=e(96606),r=e(86146),c=e(26991);function a(g,y){let E="";g.meta?.forEach(C=>{const m=`${C.label}: ${JSON.stringify(C.value)}
`;E=E+m}),E=E+`

`,g.rows.forEach(C=>{const m=(0,o.lf)(C.timeEpochMs)+"	"+C.entry+`
`;E=E+m});const h=new Blob([E],{type:"text/plain;charset=utf-8"}),v=`${y}-logs-${(0,o.dq)(new Date)}.txt`;n()(h,v)}function u(g,y,E,h=s.W.noop){const v=(0,l.MJ)([g],E),C=new Blob([String.fromCharCode(65279),v],{type:"text/csv;charset=utf-8"}),m=h!==s.W.noop?"-as-"+h.toLocaleLowerCase():"",D=`${y}-data${m}-${(0,o.dq)(new Date)}.csv`;n()(C,D)}function i(g,y){const E=new Blob([JSON.stringify(g)],{type:"application/json"}),h=`${y}-${(0,o.dq)(new Date)}.json`;n()(E,h)}function p(g,y){let E="otlp";switch(g.meta?.custom?.traceFormat){case"jaeger":{let h=(0,d.c6)(new f.v(g));i(h,y),E="jaeger";break}case"zipkin":{let h=(0,c.H)(new f.v(g));i(h,y),E="zipkin";break}case"otlp":default:{let h=(0,r.g9)(new f.v(g));i(h,y);break}}return E}},90336:(Y,O,e)=>{"use strict";e.d(O,{GY:()=>f,MA:()=>l,nW:()=>s});var t=e(54899),n=e(77582),o=e(27876);const s=(0,o.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(o.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),l=(0,o.createAsyncThunk)("users/addInvitee",async(d,{dispatch:r})=>{await(0,t.i)().post("/api/org/invites",d),await r(s())}),f=(0,o.createAsyncThunk)("users/revokeInvite",async d=>(await(0,t.i)().patch(`/api/org/invites/${d}/revoke`,{}),d))},75804:(Y,O,e)=>{"use strict";e.d(O,{ZP:()=>r,wl:()=>s});var t=e(62992),n=e(90336);const o=(0,t.HF)({selectId:c=>c.code}),s=o.getSelectors(),l=o.getInitialState({status:"idle"}),r={invites:(0,t.oM)({name:"invites",initialState:l,reducers:{},extraReducers:c=>{c.addCase(n.nW.pending,a=>{a.status="loading"}).addCase(n.nW.fulfilled,(a,{payload:u})=>{o.setAll(a,u),a.status="succeeded"}).addCase(n.nW.rejected,a=>{a.status="failed"}).addCase(n.GY.fulfilled,(a,{payload:u})=>{o.removeOne(a,u),a.status="succeeded"})}}).reducer}},76647:(Y,O,e)=>{"use strict";e.d(O,{T:()=>p,c:()=>g});var t=e(66111),n=e(93006),o=e(59679),s=e(54899),l=e(24799),f=e(46967),d=e(35029),r=e(31403),c=e(79658),a=e(35287),u=e(86648),i=e(2313);const p=({panel:y,initialFolderUid:E,onDismiss:h})=>{const[v,C]=(0,t.useState)(E),[m,D]=(0,t.useState)(y.title),[P,b]=(0,t.useState)(y.title),[M,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>x(!0),[m]),(0,n.Z)(()=>b(m),350,[m]);const{saveLibraryPanel:A}=(0,i.E)(),T=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:m},A(y,v).then(R=>{R instanceof Error||h()})},[y,m,v,h,A]),S=(0,o.Z)(async()=>{try{return!(await(0,u.jh)(m)).some(R=>R.folderUid===v)}catch(R){return(0,s.kW)(R)&&(R.isHandled=!0),!0}finally{x(!1)}},[P,v]),U=!S?.value&&S.value!==void 0&&m===P&&!M;return t.createElement(t.Fragment,null,t.createElement(l.g,{label:(0,a.t)("library-panel.add-modal.name","Library panel name"),invalid:U,error:U?(0,a.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(f.I,{id:"share-panel-library-panel-name-input",name:"name",value:m,onChange:R=>D(R.currentTarget.value)})),t.createElement(l.g,{label:(0,a.t)("library-panel.add-modal.folder","Save in folder"),description:(0,a.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(c.Es,{onChange:({uid:R})=>C(R),initialFolderUid:E,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(d.u.ButtonRow,null,t.createElement(r.zx,{variant:"secondary",onClick:h,fill:"outline"},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(r.zx,{onClick:T,disabled:U},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},g=({isOpen:y=!1,panel:E,initialFolderUid:h,...v})=>t.createElement(d.u,{title:"Create library panel",isOpen:y,onDismiss:v.onDismiss},t.createElement(p,{panel:E,initialFolderUid:h,onDismiss:v.onDismiss}))},81283:(Y,O,e)=>{"use strict";e.d(O,{i:()=>o});var t=e(66111),n=e(98102);const o=({isOpen:s,onConfirm:l,onDismiss:f})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{l(),f()},onDismiss:f,isOpen:s})},6297:(Y,O,e)=>{"use strict";e.d(O,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(Y,O,e)=>{"use strict";e.d(O,{E8:()=>p,Ef:()=>i,Kq:()=>c,Mh:()=>d,Ob:()=>a,Pq:()=>f,UO:()=>u,jh:()=>r});var t=e(65583),n=e(30670),o=e(86899),s=e(29930),l=e(59096);async function f({searchString:g="",perPage:y=100,page:E=1,excludeUid:h="",sortDirection:v="",typeFilter:C=[],folderFilterUIDs:m=[]}={}){const D=new URLSearchParams;D.append("searchString",g),D.append("sortDirection",v),D.append("typeFilter",C.join(",")),D.append("folderFilterUIDs",m.join(",")),D.append("excludeUid",h),D.append("perPage",y.toString(10)),D.append("page",E.toString(10)),D.append("kind",l.V.Panel.toString(10));const{result:P}=await(0,s.i)().get(`/api/library-elements?${D.toString()}`);return P}async function d(g,y=!1){const E=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${g}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:h}=E.data,v=new o.f({...n.Ql,schemaVersion:35,panels:[h.model]}),C=v.panels[0].getSaveModel();return v.destroy(),{...h,model:C}}async function r(g){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${g}`);return y}async function c(g,y){const{result:E}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:g.libraryPanel.name,model:g,kind:l.V.Panel});return E}async function a(g){const{libraryPanel:y,...E}=g,{uid:h,name:v,version:C,folderUid:m}=y,D=l.V.Panel,{result:P}=await(0,s.i)().patch(`/api/library-elements/${h}`,{folderUid:m,name:v,model:E,version:C,kind:D});return P}function u(g){return(0,s.i)().delete(`/api/library-elements/${g}`)}async function i(g){const{result:y}=await(0,s.i)().get(`/api/library-elements/${g}/connections`);return y}async function p(g){const y=await i(g);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(h=>h.connectionUid)})}},59096:(Y,O,e)=>{"use strict";e.d(O,{V:()=>t});var t=(o=>(o[o.Panel=1]="Panel",o))(t||{}),n=(o=>(o[o.Dashboard=1]="Dashboard",o))(n||{})},2313:(Y,O,e)=>{"use strict";e.d(O,{E:()=>y});var t=e(66111),n=e(55986),o=e(54899),s=e(659),l=e(35287),f=e(27876),d=e(60499),r=e(86648);function c(E){return(0,d.t_)(E)}function a(E){return(0,d.AT)(E)}async function u(E,h){const v=i(E),C=await g(v,h);return p(E,C),C}function i(E){let h=E.getSaveModel();return h={libraryPanel:{name:E.title,uid:void 0},...h},h}function p(E,h){E.restoreModel({...h.model,configRev:0,libraryPanel:h,title:E.title}),E.hasSavedPanelEditChange=!0,E.refresh()}function g(E,h){return E.libraryPanel?E.libraryPanel&&E.libraryPanel.uid===""?(0,r.Kq)(E,h):(0,r.Ob)(E):Promise.reject()}const y=()=>{const E=(0,f.useDispatch)(),[h,v]=(0,n.default)(async(C,m)=>{try{return await u(C,m)}catch(D){throw(0,o.kW)(D)?(D.isHandled=!0,new Error(D.data.message)):D}},[]);return(0,t.useEffect)(()=>{if(h.error){const C=h.error.message;E((0,s.$l)(c((0,l.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:C}))))}h.value&&E((0,s.$l)(a((0,l.t)("library-panels.save.success","Library panel saved"))))},[E,h]),{state:h,saveLibraryPanel:v}}},30992:(Y,O,e)=>{"use strict";e.d(O,{H:()=>m});var t=e(44288),n=e(8891),o=e(4063),s=e(75118),l=e(37932),f=e(77582),d=e(45984),r=e(9398),c=e(9892),a=e(66111),u=e(72648),i=e(35029),p=e(31403),g=e(7804),y=(D=>(D.Saved="saved",D.EditingStarted="editing-started",D.EditingCanceled="editing-cancelled",D.Deleted="deleted",D))(y||{});function E({onDismiss:D,event:P}){const b=(0,u.wW)(h),M=()=>{if(P?.action===y.Deleted){l.E1.push("/");return}m.reloadPage(),D()};return a.createElement(i.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:D,onClickBackdrop:()=>{},className:b.modal},a.createElement("div",{className:b.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),a.createElement(i.u.ButtonRow,null,a.createElement(p.zx,{onClick:D,variant:"secondary",fill:"outline"},"Continue editing"),a.createElement(p.zx,{onClick:M,variant:"destructive"},"Discard local changes")))}const h=(0,g.B)(D=>({modal:(0,c.css)({width:"600px"}),description:(0,c.css)({color:D.colors.text.secondary,paddingBottom:D.spacing(1)})})),v=(0,t.Z)();class C{constructor(){this.editing=!1,this.observer={next:P=>{if((0,n.se)(P)&&this.editing&&P.state===n.yS.Connected&&this.sendEditingState(),(0,n.RL)(P)){if(P.message.sessionId===v)return;const{action:b}=P.message;switch(b){case y.EditingStarted:case y.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const M=(0,r.h4)().getCurrent();if(M?.uid!==P.message.uid){console.log("dashboard event for different dashboard?",P,M);return}const x=this.editing||M.hasUnsavedChanges();if(b===y.Saved)x?f.h$.publish(new d.Dn({component:E,props:{event:P}})):(f.h$.emit(o.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(x&&b===y.EditingStarted&&!this.hasSeenNotice){const A=P.message,T=this.getRecentEditingEvent();(!T||T.message!==A.message)&&(this.hasSeenNotice=!0,f.h$.emit(o.SI.alertWarning,["Another session is editing this dashboard",A.message])),this.lastEditing=A}return}}}}}}setEditingState(P){const b=this.editing=P;this.editing=P,this.hasSeenNotice=!1,b&&f.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:P,uid:b}=this;P&&b&&(0,s.gj)().publish(P,{sessionId:v,uid:b,action:this.editing?y.EditingStarted:y.EditingCanceled,timestamp:Date.now()})}watch(P){const b=(0,s.gj)();b&&P!==this.uid&&(this.channel={scope:n.z.Grafana,namespace:"dashboard",path:`uid/${P}`},this.leave(),P&&(this.subscription=b.getStream(this.channel).subscribe(this.observer)),this.uid=P)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){l.E1.reload()}}const m=new C},28625:(Y,O,e)=>{"use strict";e.d(O,{Av:()=>u,Ko:()=>g,MB:()=>E,_A:()=>i});var t=e(83881),n=e(99098),o=e(59957),s=e(7569),l=e(17587),f=e(75118),d=e(44332);const r="__name__";var c=(D=>(D[D.wide=0]="wide",D[D.labels=1]="labels",D))(c||{});const a=class{constructor(D){this.options=D,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:f.T0.Replace,length:0},this.serialize=(P,b,M)=>{const x=b?Object.assign({},{...this.options,...b}):this.options,A=(0,t.Aw)(this,P),T=C(A.fields.map(U=>U.values),typeof M?.maxLength=="number"?Math.min(M.maxLength,x.maxLength):x.maxLength,this.timeFieldIndex,x.maxDelta);A.fields=A.fields.map(U=>({...U,values:U.values.slice(T)}));const S=A.fields[0]?.values?.length??0;return{...A,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:S,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:x}},this.initFromSerialized=P=>{this.name=P.name,this.refId=P.refId,this.meta=P.meta,this.length=P.length,this.labels=P.labels,this.schemaFields=P.schemaFields,this.timeFieldIndex=P.timeFieldIndex,this.pushMode=P.pushMode,this.packetInfo.length=P.packetInfo.length,this.packetInfo.number=P.packetInfo.number,this.packetInfo.action=f.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=P.fields.map(b=>({...b,type:b.type??n.fS.other,config:b.config??{},values:b.values??[]})),v(this.fields.map(b=>b.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:P,maxDelta:b})=>{const M=P&&this.options.maxLength<P,x=b&&this.options.maxDelta<b,A=b&&this.options.maxDelta===1/0;return Boolean(M||x||A)},this.resize=({maxLength:P,maxDelta:b})=>{b&&(this.options.maxDelta===1/0?this.options.maxDelta=b:this.options.maxDelta=Math.max(b,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,P??0)},this.pushNewValues=P=>{if(!P?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=P[0].length,this.packetInfo.schemaChanged=!1,this.options.action===f.T0.Append?h(this.fields.map(M=>M.values),P,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(P.forEach((M,x)=>{this.fields[x]&&(this.fields[x].values=M)}),v(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const b=this.fields?.[0]?.values.length;b!==void 0&&(this.length=b)},this.resetStateCalculations=()=>{this.fields.forEach(P=>{P.state={...P.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=P=>this.fields.map((b,M)=>P(b)?M:void 0).filter(b=>b!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(P=>{const b=P.values;return b.slice(Math.max(b.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===f.T0.Replace}push(D){const{schema:P,data:b}=D;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,P){this.pushMode=0,this.timeFieldIndex=P.fields.findIndex(T=>T.type===n.fS.time);const M=P.fields[0];this.timeFieldIndex===1&&M.type===n.fS.string&&(M.name==="labels"||M.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const x=this.pushMode===1?P.fields.slice(1):P.fields;this.refId=P.refId,P.meta&&(this.meta={...P.meta});const{displayNameFormat:A}=this.options;if(m(this.schemaFields,x)){const T=x.length;this.fields.forEach((S,U)=>{const R=x[U%T];S.config=R.config??{},S.labels=R.labels}),A&&this.fields.forEach(S=>{const U={[r]:S.name,...S.labels};S.config.displayNameFromDS=(0,d.W)(A,U)})}else{this.packetInfo.schemaChanged=!0;const T=this.pushMode===0;this.fields=x.map(S=>{const U=S.config??{};if(A){const R={[r]:S.name,...S.labels};U.displayNameFromDS=(0,d.W)(A,R)}return{config:U,name:S.name,labels:S.labels,type:S.type??n.fS.other,values:T?this.fields.find(R=>R.name===S.name&&S.type===R.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=x}if(b&&b.values.length&&b.values[0].length){let{values:M,entities:x}=b;if(x&&x.forEach((T,S)=>{T&&(0,o.Jy)(T,M[S])}),this.pushMode===1){const T=p(M);for(const R of T.keys())this.labels.has(R)||(this.packetInfo.schemaChanged=!0,this.addLabel(R));let S=Array(this.schemaFields.length).fill([]),U=[];this.labels.forEach(R=>{U.push(T.get(R)??S)}),M=(0,l.v_)(U)}if(M.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${M.length} (labels=${this.pushMode===1})`);this.fields=M.map((T,S)=>{let U=`Field ${S}`,R=(0,t.LI)(T[0]);return S===0&&R===n.fS.number&&T[0]>1600016688632&&(R=n.fS.time,U="Time"),{name:U,type:R,config:{},values:[]}})}let A=M;this.packetInfo.length=M[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=f.T0.Replace:(this.packetInfo.action=f.T0.Append,A=this.fields.map(T=>T.values),h(A,M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),A.forEach((T,S)=>{const U=this.fields[S],{state:R}=U;U.values=T,R&&(R.calcs=void 0)}),this.length=A[0].length}return{...this.packetInfo}}addLabel(D){const{displayNameFormat:P}=this.options,b=this.labels.size,M=y(D);if(b===0)this.fields.forEach((x,A)=>{if(A>0&&(x.labels=M,P)){const T={[r]:x.name,...M};x.config.displayNameFromDS=(0,d.W)(P,T)}});else for(let x=1;x<this.schemaFields.length;x++){let A=this.schemaFields[x];const T=A.config??{};if(P){const S={[r]:A.name,...M};T.displayNameFromDS=(0,d.W)(P,S)}this.fields.push({...A,config:T,labels:M,values:Array(this.length).fill(void 0)})}this.labels.add(D)}};let u=a;u.deserialize=D=>{const P=new a(D.options);return P.initFromSerialized(D),P},u.empty=D=>new a(i(D)),u.fromDataFrameJSON=(D,P)=>{const b=new a(i(P));return b.push(D),b};function i(D){return{maxLength:D?.maxLength??1e3,maxDelta:D?.maxDelta??1/0,action:D?.action??f.T0.Append,displayNameFormat:D?.displayNameFormat}}function p(D){let P=new Set(D[0]),b=new Map;P.forEach(M=>{let x=Array(D.length-1).fill(null).map(()=>[]);b.set(M,x)});for(let M=0;M<D[0].length;M++){let x=b.get(D[0][M]);for(let A=1;A<D.length;A++)x[A-1].push(D[A][M])}return b}function g(D,P,b,M){let x;b=b||0,M=M||P.length-1;let A=M<=2147483647;for(;M-b>1;)x=A?b+M>>1:Math.floor((b+M)/2),P[x]<D?b=x:M=x;return D-P[b]<=P[M]-D?b:M}function y(D){if(!D.length)return{};if(D.charAt(0)==="{")return(0,s.J8)(D);const P={};return D.split(",").forEach(b=>{const[M,x]=b.trim().split("=");P[M]=x}),P}function E(D){const P=D.packetInfo;return P?.action?P:void 0}function h(D,P,b=1/0,M=0,x=1/0){for(let A=0;A<D.length;A++)for(let T=0;T<P[A].length;T++)D[A].push(P[A][T]);return v(D,b,M,x)}function v(D,P=1/0,b=0,M=1/0){const x=C(D,P,b,M);if(x)for(let A=0;A<D.length;A++)D[A].splice(0,x);return x}function C(D,P=1/0,b=0,M=1/0){if(!D[0]?.length)return 0;const x=D[0].length;let A=0;if(x>P&&(A=x-P),M!==1/0&&b>=0){const T=D[b],S=T[A],U=T[x-1];U-S>M&&(A=g(U-M,T,A))}return A}function m(D,P){if(D?.length!==P.length)return!1;for(let b=0;b<D.length;b++){const M=D[b],x=P[b];if(M.name!==x.name||M.type!==x.type)return!1}return!0}},14035:(Y,O,e)=>{"use strict";e.d(O,{A1:()=>o,g0:()=>n,iL:()=>f});var t=e(83881),n=(d=>(d.NewValuesSameSchema="NewValuesSameSchema",d.FullFrame="FullFrame",d))(n||{});const o=(d,r)=>"type"in d&&d.type===r,s=Object.values(n),l=d=>"type"in d&&s.includes(d.type),f=d=>(0,t.aY)(d)&&"packetInfo"in d},54972:(Y,O,e)=>{"use strict";e.d(O,{j:()=>l});var t=e(9892),n=e(66111),o=e(72648);const s=["level","lvl","filename"],l=({labels:d})=>{const r=(0,o.wW)(f),c=Object.keys(d).filter(a=>!a.startsWith("_")&&!s.includes(a));return c.length===0?n.createElement("span",{className:(0,t.cx)([r.logsLabels])},n.createElement("span",{className:(0,t.cx)([r.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([r.logsLabels])},c.sort().map(a=>{const u=d[a];if(!u)return;const i=`${a}: ${u}`;return n.createElement("span",{key:a,className:(0,t.cx)([r.logsLabel])},n.createElement("span",{className:(0,t.cx)([r.logsLabelValue]),title:i},u))}))},f=d=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${d.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${d.spacing(0,.25)};
      background-color: ${d.colors.background.secondary};
      border-radius: ${d.shape.borderRadius(1)};
      margin: ${d.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${d.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>c});var t=e(2525),n=e(66111),o=e(55271),s=e.n(o),l=e(52216),f=e(72648);function d(a,u){return u.split(/;\s*/).reduce((i,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:a.colors.text.secondary};const g=p.match(/([^:\s]+)\s*:\s*(.+)/);if(g&&g[1]&&g[2]){const y=g[1].replace(/-([a-z])/g,(E,h)=>h.toUpperCase());i[y]=g[2]}return i},{})}class r extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(u,i){return u.value===i.prevValue?null:{chunks:t.ZP.parse(u.value).spans.map(g=>g.css?{style:d(u.theme,g.css),text:g.text}:{text:g.text}),prevValue:u.value}}render(){const{chunks:u}=this.state;return u.map((i,p)=>{const g=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:i.text,searchWords:this.props.highlight.searchWords,findChunks:l.Xt,highlightClassName:this.props.highlight.highlightClassName}):i.text;return i.style?n.createElement("span",{key:p,style:i.style,"data-testid":"ansiLogLine"},g):g})}}const c=(0,f.HE)(r);c.displayName="LogMessageAnsi"},70821:(Y,O,e)=>{"use strict";e.d(O,{n:()=>a,r:()=>p});var t=e(9892),n=e(58635),o=e(66111),s=e(55271),l=e.n(s),f=e(52216),d=e(8180),r=e(61860),c=e(25287);const a=1e5;function u(g,y,E,h){const v=E&&E.length>0&&E[0]&&E[0].length>0&&y.length<a,C=E??[];if(g){const m=v?{searchWords:C,highlightClassName:h}:void 0;return o.createElement(c.Q,{value:y,highlight:m})}else return v?o.createElement(l(),{textToHighlight:y,searchWords:C,findChunks:f.Xt,highlightClassName:h}):y}const i=(0,n.Z)((g,y)=>{if(y)try{return JSON.stringify(JSON.parse(g),void 0,2)}catch{return g}return g});class p extends o.PureComponent{constructor(){super(...arguments),this.onShowContextClick=y=>{const{onOpenContext:E}=this.props;y.stopPropagation(),E(this.props.row)}}render(){const{row:y,wrapLogMessage:E,prettifyLogMessage:h,showContextToggle:v,styles:C}=this.props,{hasAnsi:m,raw:D}=y,P=i(D,h),b=v?v(y):!1;return o.createElement(o.Fragment,null,o.createElement("td",{className:C.logsRowMessage},o.createElement("div",{className:(0,t.cx)({[C.positionRelative]:E},{[C.horizontalScroll]:!E})},o.createElement("button",{className:(0,t.cx)(C.logLine,C.positionRelative)},u(m,P,y.searchWords,C.logsRowMatchHighLight)))),o.createElement("td",{className:(0,t.cx)("log-row-menu-cell",C.logRowMenuCell)},o.createElement("span",{className:(0,t.cx)("log-row-menu",C.rowMenu),onClick:M=>M.stopPropagation()},b&&o.createElement(d.h,{tooltip:"Show context",tooltipPlacement:"top",size:"md",name:"gf-show-context",onClick:this.onShowContextClick}),o.createElement(r.u,{placement:"top",content:"Copy"},o.createElement(d.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(P)})))))}}},59985:(Y,O,e)=>{"use strict";e.d(O,{w:()=>G});var t=e(58635),n=e(66111),o=e(40538),s=e(72648),l=e(81042),f=e(9892),d=e(82897),r=e(77258),c=e(41818),a=e(61860),u=e(39904),i=e(94599),p=e(8180),g=e(89719),y=e(7804);const E=I=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(I.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${I.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${I.spacing(.75)};
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${I.spacing(.75)};
    width: ${I.spacing(4.5)};
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: ${I.spacing(.5)};
    overflow: hidden;
    background: ${I.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: ${I.spacing(.5)};
    overflow: hidden;
    background: ${I.colors.primary.main};
  `}),h=({active:I,count:V,proportion:H,value:Q})=>{const oe=(0,s.wW)(E),se=`${Math.round(H*100)}%`,ie={width:se},j=I?(0,f.cx)([oe.logsStatsRow,oe.logsStatsRowActive]):(0,f.cx)([oe.logsStatsRow]);return n.createElement("div",{className:j},n.createElement("div",{className:(0,f.cx)([oe.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([oe.logsStatsRowValue]),title:Q},Q),n.createElement("div",{className:(0,f.cx)([oe.logsStatsRowCount])},V),n.createElement("div",{className:(0,f.cx)([oe.logsStatsRowPercent])},se)),n.createElement("div",{className:(0,f.cx)([oe.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([oe.logsStatsRowInnerBar]),style:ie})))};h.displayName="LogLabelStatsRow";const v=5,C=(0,y.B)(I=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${I.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${I.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${I.typography.fontWeightMedium};
      padding-right: ${I.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class m extends n.PureComponent{render(){const{label:V,rowCount:H,stats:Q,value:oe,theme:se,isLabel:ie}=this.props,j=C(se),de=Q.slice(0,v);let ce=de.find(re=>re.value===oe),ee=Q.slice(v);const le=!ce;le&&(ce=ee.find(re=>re.value===oe),ee=ee.filter(re=>re.value!==oe));const q=ee.reduce((re,ve)=>re+ve.count,0),Z=de.reduce((re,ve)=>re+ve.count,0)+q,ne=q/Z;return n.createElement("div",{className:j.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:j.logsStatsHeader},n.createElement("div",{className:j.logsStatsTitle},V,": ",Z," of ",H," rows have that ",ie?"label":"field")),n.createElement("div",{className:j.logsStatsBody},de.map(re=>n.createElement(h,{key:re.value,...re,active:re.value===oe})),le&&ce&&n.createElement(h,{key:ce.value,...ce,active:!0}),q>0&&n.createElement(h,{key:"__OTHERS__",count:q,value:"Other",proportion:ne})))}}const D=(0,s.HE)(m);D.displayName="LogLabelStats";var P=e(34282);const b=(0,t.Z)(I=>({wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:f.css`
      & > button {
        color: ${I.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${I.spacing(I.components.height.sm)};
        width: ${I.spacing(I.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${I.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:f.css`
      margin-left: ${I.spacing(1)};
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:f.css`
      padding: 0 ${I.spacing(1)};
    `,logDetailsValue:f.css`
      display: flex;
      align-items: center;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `,buttonRow:f.css`
      display: flex;
      flex-direction: row;
      gap: ${I.spacing(.5)};
      margin-left: ${I.spacing(.5)};
    `}));class M extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:V,parsedKeys:H,row:Q}=this.props;V&&V(H[0]),(0,c.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Q.datasourceType,logRowUid:Q.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:V,parsedKeys:H,row:Q}=this.props;V&&V(H[0]),(0,c.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Q.datasourceType,logRowUid:Q.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:V,parsedKeys:H,parsedValues:Q,row:oe}=this.props;V&&V(H[0],Q[0]),(0,c.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:oe.datasourceType,filterType:"include",logRowUid:oe.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:V,parsedKeys:H,parsedValues:Q,row:oe}=this.props;V&&V(H[0],Q[0]),(0,c.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:oe.datasourceType,filterType:"exclude",logRowUid:oe.uid})},this.updateStats=()=>{const{getStats:V}=this.props,H=V(),Q=H?H.reduce((oe,se)=>oe+se.count,0):0;(!(0,d.isEqual)(this.state.fieldStats,H)||Q!==this.state.fieldCount)&&this.setState({fieldStats:H,fieldCount:Q})},this.showStats=()=>{const{isLabel:V,row:H,app:Q}=this.props,{showFieldsStats:oe}=this.state;oe||this.updateStats(),this.toggleFieldsStats(),(0,c.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:H.datasourceType,fieldType:V?"label":"detectedField",type:oe?"close":"open",logRowUid:H.uid,app:Q})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(V=>({showFieldsStats:!V.showFieldsStats}))}generateClipboardButton(V){const{theme:H}=this.props,Q=b(H);return n.createElement("div",{className:(0,f.cx)("show-on-hover",Q.copyButton)},n.createElement(i.m,{getText:()=>V,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(V,H){return n.createElement("table",null,n.createElement("tbody",null,V?.map((Q,oe)=>n.createElement("tr",{key:`${Q}-${oe}`},n.createElement("td",null,Q,H&&Q!==""&&this.generateClipboardButton(Q))))))}render(){const{theme:V,parsedKeys:H,parsedValues:Q,isLabel:oe,links:se,displayedFields:ie,wrapLogMessage:j,onClickFilterLabel:de,onClickFilterOutLabel:ce,disableActions:ee}=this.props,{showFieldsStats:le,fieldStats:q,fieldCount:fe}=this.state,Z=b(V),ne=(0,P.h)(V),re=H==null?!1:H.length===1,ve=Q==null?!1:Q.length===1,me=!ee&&de&&ce,Ie=!ve&&Q!=null&&!Q.every(gt=>gt===""),Ge=ie&&H!=null&&ie.includes(H[0])?n.createElement(p.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):n.createElement(p.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,f.cx)(ne.logDetailsValue)},n.createElement("td",{className:ne.logsDetailsIcon},n.createElement("div",{className:Z.buttonRow},me&&n.createElement(p.h,{name:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),me&&n.createElement(p.h,{name:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),!ee&&ie&&Ge,!ee&&n.createElement(p.h,{variant:le?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!re,onClick:this.showStats}))),n.createElement("td",{className:ne.logDetailsLabel},re?H[0]:this.generateMultiVal(H)),n.createElement("td",{className:(0,f.cx)(Z.wordBreakAll,j&&Z.wrapLine)},n.createElement("div",{className:Z.logDetailsValue},ve?Q[0]:this.generateMultiVal(Q,!0),ve&&this.generateClipboardButton(Q[0]),n.createElement("div",{className:(0,f.cx)((ve||Ie)&&Z.adjoiningLinkButton)},se?.map((gt,Te)=>n.createElement("span",{key:`${gt.title}-${Te}`},n.createElement(g.k,{link:gt}))))))),le&&re&&ve&&n.createElement("tr",null,n.createElement("td",null,n.createElement(p.h,{variant:le?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),n.createElement("td",{colSpan:2},n.createElement("div",{className:Z.logDetailsStats},n.createElement(D,{stats:q,label:H[0],value:Q[0],rowCount:fe,isLabel:oe})))))}}const x=(0,s.HE)(M);x.displayName="LogDetailsRow";var A=e(35160);class T extends n.PureComponent{render(){const{app:V,row:H,theme:Q,hasError:oe,onClickFilterOutLabel:se,onClickFilterLabel:ie,getRows:j,showDuplicates:de,className:ce,onClickShowField:ee,onClickHideField:le,displayedFields:q,getFieldLinks:fe,wrapLogMessage:Z,styles:ne}=this.props,re=(0,P.p)(Q,H.logLevel),ve=H.labels?H.labels:{},me=Object.keys(ve).length>0,Ie=(0,A.YD)(H,fe);let Ge=Ie.filter(ye=>ye.links?.length);const gt=Ge.filter(ye=>ye.fieldIndex!==H.entryFieldIndex).sort(),Te=Ge.filter(ye=>ye.fieldIndex===H.entryFieldIndex).sort(),Le=(0,A.DC)(Te),Ye=Ie.filter(ye=>ye.links?.length===0&&ye.fieldIndex!==H.entryFieldIndex).sort(),it=Ye&&Ye.length>0,ht=gt&&gt.length>0||Le&&Le.length>0,Re=oe?"":`${re.logsRowLevelColor} ${ne.logsRowLevel} ${ne.logsRowLevelDetails}`;return n.createElement("tr",{className:(0,f.cx)(ce,ne.logDetails)},de&&n.createElement("td",null),n.createElement("td",{className:Re,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:ne.logDetailsContainer},n.createElement("table",{className:ne.logDetailsTable},n.createElement("tbody",null,(me||it)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:ne.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(ve).sort().map((ye,Ce)=>{const be=ve[ye];return n.createElement(x,{key:`${ye}=${be}-${Ce}`,parsedKeys:[ye],parsedValues:[be],isLabel:!0,getStats:()=>(0,l.lL)(j(),ye),onClickFilterOutLabel:se,onClickFilterLabel:ie,onClickShowField:ee,onClickHideField:le,row:H,app:V,wrapLogMessage:Z,displayedFields:q,disableActions:!1})}),Ye.map((ye,Ce)=>{const{keys:be,values:We,fieldIndex:Qe}=ye;return n.createElement(x,{key:`${be[0]}=${We[0]}-${Ce}`,parsedKeys:be,parsedValues:We,onClickShowField:ee,onClickHideField:le,onClickFilterOutLabel:se,onClickFilterLabel:ie,getStats:()=>(0,l.i6)(H.dataFrame.fields[Qe].values),displayedFields:q,wrapLogMessage:Z,row:H,app:V,disableActions:!1})}),ht&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:ne.logDetailsHeading,"aria-label":"Data Links"},"Links")),gt.map((ye,Ce)=>{const{keys:be,values:We,links:Qe,fieldIndex:mt}=ye;return n.createElement(x,{key:`${be[0]}=${We[0]}-${Ce}`,parsedKeys:be,parsedValues:We,links:Qe,onClickShowField:ee,onClickHideField:le,getStats:()=>(0,l.i6)(H.dataFrame.fields[mt].values),displayedFields:q,wrapLogMessage:Z,row:H,app:V,disableActions:!1})}),Le?.map((ye,Ce)=>{const{keys:be,values:We,links:Qe,fieldIndex:mt}=ye;return n.createElement(x,{key:`${be[0]}=${We[0]}-${Ce}`,parsedKeys:be,parsedValues:We,links:Qe,onClickShowField:ee,onClickHideField:le,getStats:()=>(0,l.i6)(H.dataFrame.fields[mt].values),displayedFields:q,wrapLogMessage:Z,row:H,app:V,disableActions:!0})}),!it&&!me&&!ht&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const S=(0,s.HE)(T);S.displayName="LogDetails";var U=e(54972),R=e(70821);class F extends n.PureComponent{render(){const{row:V,showDetectedFields:H,getFieldLinks:Q,wrapLogMessage:oe}=this.props,se=(0,A.YD)(V,Q),ie=oe?"":f.css`
          white-space: nowrap;
        `,j=H.map(de=>{const ce=se.find(ee=>{const{keys:le}=ee;return le[0]===de});return ce!=null?`${de}=${ce.values}`:V.labels[de]!==void 0&&V.labels[de]!==null?`${de}=${V.labels[de]}`:null}).filter(de=>de!==null).join(" ");return n.createElement("td",{className:ie},j)}}const B=(0,s.HE)(F);B.displayName="LogRowMessageDisplayedFields";class K extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.debouncedContextClose=(0,d.debounce)(()=>{this.setState({showContext:!1})},3e3),this.onOpenContext=V=>{this.setState({showContext:!0}),this.props.onOpenContext(V,this.debouncedContextClose)},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,c.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(V=>({showDetails:!V.showDetails})))},this.onMouseEnter=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(void 0)}}renderTimeStamp(V){return(0,r.dq)(V,{timeZone:this.props.timeZone,defaultWithMS:!0})}render(){const{getRows:V,onClickFilterLabel:H,onClickFilterOutLabel:Q,onClickShowField:oe,onClickHideField:se,enableLogDetails:ie,row:j,showDuplicates:de,showContextToggle:ce,showLabels:ee,showTime:le,displayedFields:q,wrapLogMessage:fe,prettifyLogMessage:Z,theme:ne,getFieldLinks:re,forceEscape:ve,app:me,styles:Ie}=this.props,{showDetails:Ge,showContext:gt}=this.state,Te=(0,P.p)(ne,j.logLevel),{errorMessage:Le,hasError:Ye}=(0,l.Mi)(j),it=(0,f.cx)(Ie.logsRow,{[Ie.errorLogRow]:Ye,[Ie.contextBackground]:gt}),ht=j.hasUnescapedContent&&ve?{...j,entry:(0,l.l3)(j.entry),raw:(0,l.l3)(j.raw)}:j;return n.createElement(n.Fragment,null,n.createElement("tr",{className:it,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},de&&n.createElement("td",{className:Ie.logsRowDuplicates},ht.duplicates&&ht.duplicates>0?`${ht.duplicates+1}x`:null),n.createElement("td",{className:Ye?"":`${Te.logsRowLevelColor} ${Ie.logsRowLevel}`},Ye&&n.createElement(a.u,{content:`Error: ${Le}`,placement:"right",theme:"error"},n.createElement(u.J,{className:Ie.logIconError,name:"exclamation-triangle",size:"xs"}))),ie&&n.createElement("td",{title:Ge?"Hide log details":"See log details",className:Ie.logsRowToggleDetails},n.createElement(u.J,{className:Ie.topVerticalAlign,name:Ge?"angle-down":"angle-right"})),le&&n.createElement("td",{className:Ie.logsRowLocalTime},this.renderTimeStamp(j.timeEpochMs)),ee&&ht.uniqueLabels&&n.createElement("td",{className:Ie.logsRowLabels},n.createElement(U.j,{labels:ht.uniqueLabels})),q&&q.length>0?n.createElement(B,{row:ht,showDetectedFields:q,getFieldLinks:re,wrapLogMessage:fe}):n.createElement(R.r,{row:ht,showContextToggle:ce,wrapLogMessage:fe,prettifyLogMessage:Z,onOpenContext:this.onOpenContext,app:me,styles:Ie})),this.state.showDetails&&n.createElement(S,{className:it,showDuplicates:de,getFieldLinks:re,onClickFilterLabel:H,onClickFilterOutLabel:Q,onClickShowField:oe,onClickHideField:se,getRows:V,row:ht,wrapLogMessage:fe,hasError:Ye,displayedFields:q,app:me,styles:Ie}))}}const L=(0,s.HE)(K);L.displayName="LogRow";const N=100;class z extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.openContext=(V,H)=>{this.props.onOpenContext&&this.props.onOpenContext(V,H)},this.makeGetRows=(0,t.Z)(V=>()=>V),this.sortLogs=(0,t.Z)((V,H)=>(0,l.$u)(V,H))}componentDidMount(){const{logRows:V,previewLimit:H}=this.props,oe=(V?V.length:0)<=H*2;oe?this.setState({renderAll:oe}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:V,showContextToggle:H,showLabels:Q,showTime:oe,wrapLogMessage:se,prettifyLogMessage:ie,logRows:j,deduplicatedRows:de,timeZone:ce,onClickFilterLabel:ee,onClickFilterOutLabel:le,theme:q,enableLogDetails:fe,previewLimit:Z,getFieldLinks:ne,logsSortOrder:re,displayedFields:ve,onClickShowField:me,onClickHideField:Ie,forceEscape:Ge,onLogRowHover:gt,app:Te,getLogRowContextUi:Le}=this.props,{renderAll:Ye}=this.state,it=(0,P.h)(q),ht=de||j,Re=j&&j.length>0,ye=ht?ht.reduce((Ot,Et)=>Et.duplicates?Ot+Et.duplicates:Ot,0):0,Ce=V!==o.Y4.none&&ye>0,be=ht||[],We=re?this.sortLogs(be,re):be,Qe=We.slice(0,Z),mt=We.slice(Z,We.length),vt=this.makeGetRows(We),rt=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve({data:[]});return n.createElement("table",{className:it.logsRowsTable},n.createElement("tbody",null,Re&&Qe.map((Ot,Et)=>n.createElement(L,{key:Ot.uid,getRows:vt,getRowContext:rt,getLogRowContextUi:Le,row:Ot,showContextToggle:H,showDuplicates:Ce,showLabels:Q,showTime:oe,displayedFields:ve,wrapLogMessage:se,prettifyLogMessage:ie,timeZone:ce,enableLogDetails:fe,onClickFilterLabel:ee,onClickFilterOutLabel:le,onClickShowField:me,onClickHideField:Ie,getFieldLinks:ne,logsSortOrder:re,forceEscape:Ge,onOpenContext:this.openContext,onLogRowHover:gt,app:Te,styles:it})),Re&&Ye&&mt.map((Ot,Et)=>n.createElement(L,{key:Ot.uid,getRows:vt,getRowContext:rt,getLogRowContextUi:Le,row:Ot,showContextToggle:H,showDuplicates:Ce,showLabels:Q,showTime:oe,displayedFields:ve,wrapLogMessage:se,prettifyLogMessage:ie,timeZone:ce,enableLogDetails:fe,onClickFilterLabel:ee,onClickFilterOutLabel:le,onClickShowField:me,onClickHideField:Ie,getFieldLinks:ne,logsSortOrder:re,forceEscape:Ge,onOpenContext:this.openContext,onLogRowHover:gt,app:Te,styles:it})),Re&&!Ye&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",We.length-Z," rows..."))))}}z.defaultProps={previewLimit:N};const G=(0,s.HE)(z);G.displayName="LogsRows"},34282:(Y,O,e)=>{"use strict";e.d(O,{h:()=>d,p:()=>f});var t=e(9892),n=e(58635),o=e(28550),s=e(13787),l=e(85419);const f=(r,c)=>{let a=r.isLight?r.v1.palette.gray5:r.v1.palette.gray2;switch(c){case s.in.crit:case s.in.critical:a="#705da0";break;case s.in.error:case s.in.err:a="#e24d42";break;case s.in.warning:case s.in.warn:a=r.colors.warning.main;break;case s.in.info:a="#7eb26d";break;case s.in.debug:a="#1f78c1";break;case s.in.trace:a="#6ed0e0";break}return{logsRowLevelColor:t.css`
      &::after {
        background-color: ${a};
      }
    `}},d=(0,n.Z)(r=>{const c=l.hoverColor(r.colors.background.secondary,r),a=(0,o.Z)(r.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${r.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${r.spacing(.5)};
      }
    `,logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${r.components.textHighlight.text}
      background-color: ${r.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      width: 100%;
      margin-bottom: ${r.spacing(2.25)}; /* This is to make sure the last row's LogRowMenu is not cut off. */
    `,contextBackground:t.css`
      background: ${c};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${c};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${r.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:t.css`
      color: ${r.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${r.colors.border.medium};
      padding: 0 ${r.spacing(1)} ${r.spacing(1)};
      border-radius: ${r.shape.radius.default};
      margin: ${r.spacing(2.5)} ${r.spacing(1)} ${r.spacing(2.5)} ${r.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${r.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${r.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${r.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${r.typography.fontWeightBold};
      padding: ${r.spacing(1)} 0 ${r.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${c};
      }
    `,topVerticalAlign:t.css`
      label: topVerticalAlign;
      margin-top: -${r.spacing(.9)};
      margin-left: -${r.spacing(.25)};
    `,detailsOpen:t.css`
      &:hover {
        background-color: ${l.hoverColor(r.colors.background.primary,r)};
      }
    `,errorLogRow:t.css`
      label: erroredLogRow;
      color: ${r.colors.text.secondary};
    `,positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${a};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${r.colors.background.primary};
      box-shadow: ${r.shadows.z3};
      padding: ${r.spacing(.5,.5,.5,1)};
      z-index: 100;
      visibility: hidden;
      gap: ${r.spacing(.5)};
    `,logRowMenuCell:t.css`
      position: sticky;
      z-index: ${r.zIndex.dropdown};
      margin-top: -${r.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      letter-spacing: ${r.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:t.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:t.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${r.colors.background.primary};
      }
    `}})},35160:(Y,O,e)=>{"use strict";e.d(O,{B2:()=>l,DC:()=>s,YD:()=>o});var t=e(58635),n=e(99098);const o=(0,t.Z)((d,r)=>{const c=l(d,r);return Object.values(c)}),s=(0,t.Z)(d=>{let r=[];return d.forEach(c=>{c.links?.forEach(a=>{if(a.variables){const u=a.variables.map(p=>{const g=p.variableName,y=p.fieldPath?`.${p.fieldPath}`:"";return`${g}${y}`}),i=a.variables.map(p=>p.found?p.value:"");r.push({keys:u,values:i,links:[a],fieldIndex:c.fieldIndex})}})}),r}),l=(0,t.Z)((d,r)=>d.dataFrame.fields.map((c,a)=>({...c,index:a})).filter((c,a)=>!f(c,a,d)).map(c=>{const a=r?r(c,d.rowIndex,d.dataFrame):[];return{keys:[c.name],values:[c.values[d.rowIndex].toString()],links:a,fieldIndex:c.index}}));function f(d,r,c){if(d.name==="labels"&&d.type===n.fS.other||d.name==="id"||d.name==="tsNs")return!0;const a=c.dataFrame.fields.find(u=>u.type===n.fS.time);return!!(d.name===a?.name&&d.type===n.fS.time&&d.values[0]===a.values[0]||d.config.custom?.hidden||d.values[c.rowIndex]==null)}},81042:(Y,O,e)=>{"use strict";e.d(O,{$u:()=>h,DA:()=>g,Di:()=>m,FP:()=>M,Js:()=>b,Mi:()=>v,ZO:()=>c,_c:()=>P,hY:()=>D,i6:()=>i,j0:()=>E,jx:()=>a,l3:()=>C,lL:()=>u});var t=e(82897),n=e.n(t),o=e(13787),s=e(40538),l=e(5109),f=e(99098),d=e(53678),r=e(35160);function c(x){if(!x)return o.in.unknown;let A=o.in.unknown,T;for(const S of Object.keys(o.in)){const R=new RegExp(`\\b${S}\\b`,"i").exec(x);R&&(T===void 0||R.index<T)&&(A=o.in[S],T=R.index)}return A}function a(x){const A=o.in[x.toString().toLowerCase()];return A||o.in.unknown}function u(x,A){const T=x.filter(R=>R.labels[A]!==void 0),S=T.length,U=(0,t.countBy)(T,R=>R.labels[A]);return p(U,S)}function i(x){const A=x.filter(S=>S!=null),T=(0,t.countBy)(A);return p(T,A.length)}const p=(x,A)=>(0,t.chain)(x).map((T,S)=>({count:T,value:S,proportion:T/A})).sortBy("count").reverse().value(),g=(x,A)=>x.timeEpochMs<A.timeEpochMs?-1:x.timeEpochMs>A.timeEpochMs?1:x.timeEpochNs<A.timeEpochNs?-1:x.timeEpochNs>A.timeEpochNs?1:0,y=(x,A)=>x.timeEpochMs>A.timeEpochMs?-1:x.timeEpochMs<A.timeEpochMs?1:x.timeEpochNs>A.timeEpochNs?-1:x.timeEpochNs<A.timeEpochNs?1:0,E=(x,A)=>{const T=x?h(x.rows,A):[];return x?{...x,rows:T}:{hasUniqueLabels:!1,rows:T}},h=(x,A)=>A===s.UV.Ascending?x.sort(g):x.sort(y),v=x=>x.labels.__error__?{hasError:!0,errorMessage:x.labels.__error__}:{hasError:!1},C=x=>x.replace(/\\r\\n|\\n|\\t|\\r/g,A=>A.slice(1)==="t"?"	":`
`);function m(x){return x.map(A=>{const T=(0,r.B2)(A).reduce((S,U)=>{const R=U.keys[0];return S[R]=U.values[0],S},{});return{line:A.entry,timestamp:A.timeEpochNs,fields:{...T,...A.labels}}})}const D=x=>{let A={from:1/0,to:-1/0};return x.forEach(T=>{const S=T.meta?.custom||{};S.absoluteRange?.from&&S.absoluteRange?.to&&(A={from:Math.min(A.from,S.absoluteRange.from),to:Math.max(A.to,S.absoluteRange.to)})}),A},P=x=>{if(x.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const A={},T={};let S=-1/0;const U={};let R=[];return x.forEach(F=>{const B=new l.N(F),K=B.getFirstFieldOfType(f.fS.time),L=B.getFirstFieldOfType(f.fS.number);if(!K)throw new Error("Missing time field");if(!L)throw new Error("Missing value field");const N=L.config.displayNameFromDS||F.name||"logs",z=L.values.length;U[N]={meta:F.meta,valueFieldConfig:L.config,timeFieldConfig:K.config};for(let G=0;G<z;G++){const I=K.values[G],V=L.values[G];A[N]??={},A[N][I]=(A[N][I]||0)+V,T[I]=(T[I]||0)+V,S=Math.max(T[I],S)}}),Object.keys(A).forEach(F=>{const B=new d.v,{meta:K,timeFieldConfig:L,valueFieldConfig:N}=U[F];B.name=F,B.meta=K,B.addField({name:"Time",type:f.fS.time,config:L}),B.addField({name:"Value",type:f.fS.number,config:N});for(const z in A[F]){const G=A[F][z];B.add({Time:Number(z),Value:G})}R.push(B)}),{dataFrames:R,maximum:S}},b=x=>{const A=x[0]?.meta?.custom;return A&&A.datasourceName?{name:A.datasourceName}:null},M=x=>x[0]?.meta?.custom?.logsVolumeType===o.o8.Limited},80600:(Y,O,e)=>{"use strict";e.d(O,{H:()=>u});var t=e(66111),n=e(5191),o=e(31403),s=e(10655),l=e(9892),f=e(72648),d=e(98102);const r=({title:i})=>{const p=(0,f.wW)(a);return t.createElement("p",{className:p.description},i?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},c=({dashboardTitle:i,onConfirm:p,onDismiss:g})=>t.createElement(d.s,{isOpen:!0,body:t.createElement(r,{title:i}),onConfirm:p,onDismiss:g,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),a=i=>({title:l.css`
    margin-bottom: ${i.spacing(1)};
  `,description:l.css`
    font-size: ${i.typography.body.fontSize};
  `}),u=({dashboard:i,publicDashboard:p,loader:g,children:y,onDismiss:E,...h})=>{const[v,{isLoading:C}]=(0,s.bS)(),m=(D,P)=>{v({dashboard:i,uid:D.uid,dashboardUid:D.dashboardUid}),P()};return t.createElement(n.JY,null,({showModal:D,hideModal:P})=>t.createElement(o.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>D(c,{dashboardTitle:p.title,onConfirm:()=>m(p,P),onDismiss:()=>{E?E():P()}}),...h},C&&g?g:y))}},85385:(Y,O,e)=>{"use strict";e.d(O,{t:()=>l});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class o extends Error{constructor(d,r){super(r),this.type=d}}class s{constructor(){this.rootName="general"}validateNewDashboardName(d,r){return this.validate(d,r,"A dashboard or a folder with the same name already exists")}validateNewFolderName(d){return this.validate(0,d,"A folder or dashboard in the general folder with the same name already exists")}async validate(d,r,c){r=(r||"").trim();const a=r.toLowerCase();if(r.length===0)throw new o("REQUIRED","Name is required");if(d===0&&a===this.rootName)throw new o("EXISTING","This is a reserved name and cannot be used for a folder.");const u=[];u.push(t.ae.search({type:n.FOLDER,folderIds:[d],query:r})),u.push(t.ae.search({type:n.DASHBOARD,folderIds:[d],query:r}));const i=await Promise.all(u);let p=[];i.length>0&&i[0].length>0&&(p=i[0]),i.length>1&&i[1].length>0&&(p=p.concat(i[1]));for(const g of p)if(a===g.title.toLowerCase())throw new o("EXISTING",c)}}const l=new s},50946:(Y,O,e)=>{"use strict";e.d(O,{$j:()=>h,EW:()=>F,Fd:()=>b,Jx:()=>C,L6:()=>A,Pb:()=>R,ZL:()=>U,ct:()=>m,iM:()=>B,nQ:()=>p,q_:()=>i,uC:()=>M,ys:()=>E});var t=e(72196),n=e(54899),o=e(37932),s=e(86647),l=e(659),f=e(60499),d=e(30992),r=e(27876),c=e(86648),a=e(59096),u=e(24693);function i(L){return async N=>{try{N((0,u.AK)());const z=await(0,n.i)().get(`/api/gnet/dashboards/${L}`);N((0,u.S9)(z)),N(g(z.json)),N(y(z.json))}catch(z){N((0,u.eh)()),(0,n.kW)(z)&&N((0,l.$l)((0,f.t_)(z.data.message||z)))}}}function p(L){return async N=>{N((0,u.Nw)(L)),N(g(L)),N(y(L))}}function g(L){return N=>{if(L&&L.__inputs){const z=[];L.__inputs.forEach(G=>{const I={name:G.name,label:G.label,info:G.description,value:G.value,type:G.type,pluginId:G.pluginId,options:[]};G.type===u.n$.DataSource?v(G,I):I.info||(I.info="Specify a string constant"),z.push(I)}),N((0,u.Zc)(z))}}}function y(L){return async function(N){if(!L||!L.__elements)return;const z=[];for(const G of Object.values(L.__elements)){if(G.kind!==a.V.Panel)continue;const I=G.model,{type:V,description:H}=I,{uid:Q,name:oe}=G,se={model:{model:I,uid:Q,name:oe,version:0,type:V,kind:a.V.Panel,description:H},state:u.KQ.New};try{const ie=await(0,c.Mh)(Q,!0);se.state=u.KQ.Exists,se.model=ie}catch(ie){if(ie.status!==404)throw ie}z.push(se)}N((0,u.C2)(z))}}function E(){return L=>{L((0,u.MO)())}}function h(L){return async(N,z)=>{const G=z().importDashboard.dashboard,I=z().importDashboard.inputs;let V=[];L.dataSources?.forEach((oe,se)=>{const ie=I.dataSources[se];V.push({name:ie.name,type:ie.type,pluginId:ie.pluginId,value:oe.uid})}),L.constants?.forEach((oe,se)=>{const ie=I.constants[se];V.push({value:oe,name:ie.name,type:ie.type})});const H=await(0,n.i)().post("api/dashboards/import",{dashboard:{...G,title:L.title,uid:L.uid||G.uid},overwrite:!0,inputs:V,folderUid:L.folder.uid}),Q=t.u.stripBaseFromUrl(H.importedUrl);o.E1.push(Q)}}const v=(L,N)=>{(0,s.F)().getList({pluginId:L.pluginId}).length===0?N.info="No data sources of type "+L.pluginName+" found":N.info||(N.info="Select a "+L.pluginName+" data source")};async function C(L,N){const z={totalCount:L.length,successCount:0};for(const G of L)try{await T(G,N)!==null&&(z.successCount+=1)}catch(I){console.error("Failed to move a folder",I)}return z}function m(L,N){const z=[];for(const G of L)z.push(P(D,!0,G,N));return K(z).then(G=>({totalCount:G.length,successCount:G.filter(I=>I.succeeded).length,alreadyInFolderCount:G.filter(I=>I.alreadyInFolder).length}))}async function D(L,N){const z=await(0,n.i)().get(`/api/dashboards/uid/${L}`);if((z.meta.folderUid===void 0||z.meta.folderUid===null)&&N.uid===""||z.meta.folderUid===N.uid)return{alreadyInFolder:!0};const G={dashboard:z.dashboard,folderUid:N.uid,overwrite:!1};try{return await M(G),{succeeded:!0}}catch(I){if((0,n.kW)(I)){if(I.data?.status!=="plugin-dashboard")return{succeeded:!1};I.isHandled=!0}G.overwrite=!0;try{return await M(G),{succeeded:!0}}catch{return{succeeded:!1}}}}function P(L,N,...z){return async G=>{try{const I=await L(...z);return Array.prototype.concat(G,[I])}catch(I){if(N)return G;throw I}}}function b(L,N){const z=[];for(const G of L)z.push(P(x,!0,G,!0));for(const G of N)z.push(P(B,!0,G,!0));return K(z)}function M(L){return d.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:L.dashboard,message:L.message??"",overwrite:L.overwrite??!1,folderUid:L.folderUid})}function x(L,N){return(0,n.i)().delete(`/api/folders/${L}?forceDeleteRules=false`,void 0,{showSuccessAlert:N})}function A(L){return(0,n.i)().post("/api/folders",L)}function T(L,N){const z={parentUid:N.uid};return(0,n.i)().post(`/api/folders/${L}/move`,z,{showErrorAlert:!1})}const S=1e3;function U(L,N,z=r.SearchQueryType.Folder){return(0,n.i)().get("/api/search",{query:L,type:z,permission:N,limit:S})}function R(L){return(0,n.i)().get(`/api/folders/${L}`)}function F(L){return(0,n.i)().get(`/api/folders/id/${L}`)}function B(L,N){return(0,n.i)().delete(`/api/dashboards/uid/${L}`,{showSuccessAlert:N})}function K(L){return L.reduce((N,z)=>Promise.resolve(N).then(z),[])}},24693:(Y,O,e)=>{"use strict";e.d(O,{AK:()=>g,C2:()=>i,G7:()=>o,KQ:()=>l,MO:()=>r,Nw:()=>u,S9:()=>a,ZP:()=>E,Zc:()=>c,eh:()=>p,n$:()=>s,wg:()=>f});var t=e(62992),n=e(52666),o=(h=>(h[h.Gcom=0]="Gcom",h[h.Json=1]="Json",h))(o||{}),s=(h=>(h.DataSource="datasource",h.Constant="constant",h.LibraryPanel="libraryPanel",h))(s||{}),l=(h=>(h.New="new",h.Exists="exists",h.Different="different",h))(l||{});const f={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},d=(0,t.oM)({name:"manageDashboards",initialState:f,reducers:{setGcomDashboard:(h,v)=>{h.dashboard={...v.payload.json,id:null},h.meta={updatedAt:v.payload.updatedAt,orgName:v.payload.orgName},h.source=0,h.state=n.Gu.Done},setJsonDashboard:(h,v)=>{h.dashboard={...v.payload,id:null},h.meta=f.meta,h.source=1,h.state=n.Gu.Done},clearDashboard:h=>{h.dashboard={},h.state=n.Gu.NotStarted},setInputs:(h,v)=>{h.inputs={dataSources:v.payload.filter(C=>C.type==="datasource"),constants:v.payload.filter(C=>C.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(h,v)=>{h.inputs.libraryPanels=v.payload},fetchFailed:h=>{h.dashboard={},h.state=n.Gu.Error},fetchDashboard:h=>{h.state=n.Gu.Loading}}}),{clearDashboard:r,setInputs:c,setGcomDashboard:a,setJsonDashboard:u,setLibraryPanelInputs:i,fetchFailed:p,fetchDashboard:g}=d.actions,E={importDashboard:d.reducer}},2183:(Y,O,e)=>{"use strict";e.d(O,{FV:()=>l,JE:()=>r,Q$:()=>f,RF:()=>s,Yi:()=>d});var t=e(54899),n=e(659),o=e(17283);function s(c={getBackendSrv:t.i}){return async a=>{const u=await c.getBackendSrv().get("/api/org");return a((0,o.jR)(u)),u}}function l(c={getBackendSrv:t.i}){return async(a,u)=>{const i=u().organization.organization;await c.getBackendSrv().put("/api/org",{name:i.name}),a((0,n.H7)(i.name)),a(s(c))}}function f(c,a={getBackendSrv:t.i}){return async u=>{const i=await a.getBackendSrv().post("/api/user/using/"+c);u((0,n.H7)(i.name))}}function d(c,a={getBackendSrv:t.i}){return async u=>{const i=await a.getBackendSrv().post("/api/orgs/",c);u(f(i.orgId))}}function r(c={getBackendSrv:t.i}){return async a=>{const u=await c.getBackendSrv().get("/api/user/orgs");return a((0,o.IM)(u)),u}}},17283:(Y,O,e)=>{"use strict";e.d(O,{IM:()=>f,ZP:()=>r,jR:()=>l,xR:()=>s});var t=e(62992);const n={organization:{},userOrgs:[]},o=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(c,a)=>({...c,organization:a.payload}),setOrganizationName:(c,a)=>({...c,organization:{...c.organization,name:a.payload}}),userOrganizationsLoaded:(c,a)=>({...c,userOrgs:a.payload})}}),{setOrganizationName:s,organizationLoaded:l,userOrganizationsLoaded:f}=o.actions,r={organization:o.reducer}},51927:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>E});var t=e(9892),n=e(66111),o=e(82229),s=e(206),l=e(37932),f=e(72648),d=e(60325),r=e(52822),c=e(84952),a=e(58379),u=e(36281),i=e(16200),p=e(9398),g=e(27876),y=e(32294);function E(C){const m=(0,f.wW)(v),D=(0,d.R9)(),P=new o.mi(C.data),{dataSummary:b}=P,M=h(C,b),x=(0,g.useDispatch)(),A=(0,p.h4)().getCurrent()?.getPanelById(C.panelId),T=()=>{a.Z.setObject(c.FL,i.Ok.Suggestions),x((0,u.g_)(!0))},S=()=>{A&&x((0,y.Kc)({panel:A,pluginId:"table"}))},U=R=>{A&&(x((0,y.Kc)({...R,panel:A})),R.transformations&&setTimeout(()=>{l.E1.partial({tab:"transform"})},100))};return n.createElement("div",{className:m.wrapper},n.createElement("div",{className:m.message},M),D.app===s.zj.PanelEditor&&b.hasData&&A&&n.createElement("div",{className:m.actions},C.suggestions&&n.createElement(n.Fragment,null,C.suggestions.map(R=>n.createElement(r.x,{key:R.name,icon:"process",onClick:()=>U(R)},R.name))),n.createElement(r.x,{icon:"table",onClick:S},"Switch to table"),n.createElement(r.x,{icon:"chart-line",onClick:T},"Open visualization suggestions")))}function h({data:C,fieldConfig:m,message:D,needsNumberField:P,needsTimeField:b,needsStringField:M},x){return D||(!C.series||C.series.length===0||C.series.every(A=>A.length===0)?m?.defaults.noValue??"No data":M&&!x.hasStringField?"Data is missing a string field":P&&!x.hasNumberField?"Data is missing a number field":b&&!x.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const v=C=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:C.colors.text.secondary,fontSize:C.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:C.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:C.spacing(1),rowGap:C.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(Y,O,e)=>{"use strict";e.d(O,{F:()=>d,X:()=>r});var t=e(66111),n=e(36873),o=e(59250),s=e(45253),l=e(27876);class f extends t.PureComponent{constructor(a){super(a)}render(){const a={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:a},t.createElement(s.b,{severity:l.AppNotificationSeverity.Error,...this.props}))}}function d(c,a){const u=class extends t.PureComponent{render(){const g=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(f,{title:`Error loading: ${c.id}`,text:g})}},i=new n.c(u);return i.meta=c,i.loadError=!0,i}function r(c,a){const u=class extends t.PureComponent{render(){return t.createElement(f,{title:`Panel plugin not found: ${c}`})}},i=new n.c(a?()=>null:u);return i.meta={id:c,name:c,sort:100,type:o.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},i}},98141:(Y,O,e)=>{"use strict";e.d(O,{$:()=>i});var t=e(66111),n=e(10753),o=e(76095),s=e(75363),l=e(16936),f=e(20308),d=e(72648),r=e(53546),c=e(77582),a=e(38490);const u={defaults:{},overrides:[]};function i(g){const{pluginId:y,data:E,timeZone:h=(0,n.Z)(),options:v={},width:C,height:m,title:D,onOptionsChange:P=()=>{},onChangeTimeRange:b=()=>{},onFieldConfigChange:M=()=>{},fieldConfig:x=u}=g,A=(0,d.l4)(),T=(0,f.J)(),S=(0,t.useMemo)(()=>T.replace.bind(T),[T]),[U,R]=(0,t.useState)((0,a.q1)(y)),[F,B]=(0,t.useState)(),K=p(U,v,x),L=(0,o.Cc)(U,K?.fieldConfig,E,h,A,S);if((0,t.useEffect)(()=>{U&&U.hasPluginId(y)||(0,a.Ub)(y).then(z=>R(z)).catch(z=>{B(z.message)})},[y,U]),F)return t.createElement("div",null,"Failed to load plugin: ",F);if(!U||!U.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!U.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!L)return t.createElement("div",null,"No panel data");const N=U.panel;return t.createElement(r.z4,{dependencies:[U,E]},t.createElement(s.b,{meta:U.meta},t.createElement(N,{id:1,data:L,title:D,timeRange:L.timeRange,timeZone:h,options:K.options,fieldConfig:x,transparent:!1,width:C,height:m,renderCounter:0,replaceVariables:z=>z,onOptionsChange:P,onFieldConfigChange:M,onChangeTimeRange:b,eventBus:c.h$})))}function p(g,y,E){return(0,t.useMemo)(()=>{if(g)return(0,l.d4)({plugin:g,currentOptions:y,currentFieldConfig:E,isAfterPluginChange:!1})},[g,E,y])}},69600:(Y,O,e)=>{"use strict";e.d(O,{H:()=>f,n:()=>l});var t=e(83881),n=e(2703),o=e(72769),s=e(64703);const l=d=>{const r=d.field.links;if(!(!r||r.length===0))return{getLinks:c=>{const a={};if(d.view){const{dataFrame:i}=d.view;a.__series={value:{name:i.name,refId:i.refId},text:"Series"};const p=d.colIndex!==void 0?i.fields[d.colIndex]:void 0;if(p){if(a.__field={value:{name:p.name,labels:p.labels},text:"Field"},d.rowIndex!==void 0&&d.rowIndex>=0){const{timeField:g}=(0,t.sV)(i);a.__value={value:{raw:p.values[d.rowIndex],numeric:d.display.numeric,text:(0,n.zc)(d.display),time:g?g.values[d.rowIndex]:void 0},text:"Value"}}d.view&&(a.__data={value:{name:i.name,refId:i.refId,fields:(0,o.z)({frame:i,rowIndex:d.rowIndex})},text:"Data"})}else a.__value={value:{raw:d.display.numeric,numeric:d.display.numeric,text:(0,n.zc)(d.display),calc:d.name},text:"Value"}}else console.log("VALUE",d);const u=(i,p,g)=>{const y={...a,...p};return c(i,y,g)};return r.map(i=>(0,s.Bq)().getDataLinkUIModel(i,u,d))}}},f=d=>{const r=d.links;if(!(!r||r.length===0))return{getLinks:()=>r.map(c=>(0,s.Bq)().getDataLinkUIModel(c,d.replaceVariables,d))}}},64703:(Y,O,e)=>{"use strict";e.d(O,{Bq:()=>S,PR:()=>m,PW:()=>b});var t=e(82897),n=e.n(t),o=e(94976),s=e(3281),l=e(30471),f=e(99098),d=e(72196),r=e(63418),c=e(49187),a=e(55024),u=e(20308),i=e(40538),p=e(47694),g=e(19349),y=e(69155);const E=[{value:`${o.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L8.BuiltIn},{value:`${o.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L8.BuiltIn},{value:`${o.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L8.BuiltIn}],h=[{value:`${o.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L8.Series}],v=[{value:`${o.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L8.Value},{value:`${o.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L8.Value},{value:`${o.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L8.Value}],C=U=>U.includes(".")||U.trim().includes(" ")?`["${U}"]`:`.${U}`,m=()=>[...(0,u.J)().getVariables().map(U=>({value:U.name,label:U.name,origin:s.L8.Template})),{value:`${o.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L8.Template},...E],D=U=>{const R=[];for(const B of U)for(const K of B.fields)if(K.labels)for(const L of Object.keys(K.labels))R.push(L);const F=(0,t.chain)(R).flatten().uniq().value();return[{value:`${o.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L8.Field},...F.map(B=>({value:`__field.labels${C(B)}`,label:`labels.${B}`,documentation:`${B} label value`,origin:s.L8.Field}))]},P=U=>{let R,F;const B=[],K={};if(U.length!==1)return[];const L=U[0];for(const N of L.fields){const z=(0,l.CZ)(N,L,U);K[z]||(B.push({value:`__data.fields${C(z)}`,label:`${z}`,documentation:`Formatted value for ${z} on the same row`,origin:s.L8.Fields}),K[z]=!0,!R&&N.type===f.fS.number&&(R={...N,name:z}),!F&&N.config.displayName&&N.config.displayName!==N.name&&(F={...N,name:z}))}return B.length&&B.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L8.Fields}),R&&(B.push({value:`__data.fields${C(R.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L8.Fields}),B.push({value:`__data.fields${C(R.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L8.Fields})),F&&B.push({value:`__data.fields${C(F.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L8.Fields}),B},b=(U,R)=>{const F={value:`${o.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L8.Value};return R===s.o3.Values?[...h,...D(U),...v,F,...P(U),...m()]:[...h,...D(U),...P(U),...m()]},M=U=>{const R=D(U),F={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...h,...R,...v,F,...m()]};class x{constructor(){this.getDataLinkUIModel=(R,F,B)=>{let K=R.url;R.onBuildUrl&&(K=R.onBuildUrl({origin:B,replaceVariables:F}));const L={href:d.u.assureBaseUrl(K.replace(/\n/g,"")),title:R.title??"",target:R.targetBlank?"_blank":void 0,origin:B};return F&&(L.href=F(L.href,void 0,i.b8.UriEncode),L.title=F(R.title)),R.onClick&&(L.onClick=N=>{R.onClick({origin:B,replaceVariables:F,e:N})}),L.href=(0,p.iE)().disableSanitizeHtml?L.href:r.QX.sanitizeUrl(L.href),L}}getLinkUrl(R){let F=d.u.assureBaseUrl((0,u.J)().replace(R.url||"")),B={};if(R.keepTime){const K=(0,g.$t)().timeRangeForUrl();B.from=K.from,B.to=K.to}return R.includeVars&&(B={...B,...(0,y.c)()}),F=c.Cj.appendQueryToUrl(F,c.Cj.toUrlParams(B)),(0,p.iE)().disableSanitizeHtml?F:r.QX.sanitizeUrl(F)}getAnchorInfo(R){const F=(0,u.J)(),B={};return B.href=this.getLinkUrl(R),B.title=F.replace(R.title||""),B.tooltip=F.replace(R.tooltip||""),B}getPanelLinkAnchorInfo(R,F){(0,a.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const B=(K,L,N)=>(0,u.J)().replace(K,{...F,...L},N);return this.getDataLinkUIModel(R,B,{})}}let A;function T(U){A=U}function S(){return A||(A=new x),A}},32294:(Y,O,e)=>{"use strict";e.d(O,{JI:()=>d,Kc:()=>c,ih:()=>a,qj:()=>r});var t=e(16936),n=e(86648),o=e(35974),s=e(85805),l=e(45984),f=e(46732);function d(i){return async(p,g)=>{if(i.libraryPanel?.uid&&!("model"in i.libraryPanel)){p(u(i));return}let y=i.type,E=g().plugins.panels[y];if(!E)try{E=await p((0,s.Ro)(y))}catch{E=(0,o.X)(y,y==="row")}i.plugin||i.pluginLoaded(E),p((0,f.bc)({key:i.key,plugin:E}))}}function r(i){return p=>{p((0,f.WJ)({key:i}))}}function c({panel:i,pluginId:p,options:g,fieldConfig:y,transformations:E}){return async(h,v)=>{if(i.type===p&&!g&&!y&&!E)return;let m=v().plugins.panels[p];if(m||(m=await h((0,s.Ro)(p))),i.type!==p&&i.changePlugin(m),g||y||E){const D=(0,t.d4)({plugin:m,currentOptions:g||i.options,currentFieldConfig:y||i.fieldConfig,isAfterPluginChange:!1});i.options=D.options,i.fieldConfig=D.fieldConfig,i.transformations=E||i.transformations,i.configRev++}i.generateNewKey(),h((0,f.bc)({key:i.key,plugin:m}))}}function a(i,p){return async(g,y)=>{const E=p.model.type,h=i.type;if(i.restoreModel({...p.model,gridPos:i.gridPos,id:i.id,libraryPanel:p}),i.getQueryRunner().clearLastResult(),h!==E){let C=y().plugins.panels[E];C||(C=await g((0,s.Ro)(E))),i.pluginLoaded(C),i.generateNewKey(),await g((0,f.bc)({key:i.key,plugin:C}))}else{const v=i.key;i.generateNewKey(),g((0,f.mr)({oldKey:v,newKey:i.key}))}i.configRev=0,i.hasSavedPanelEditChange=!0,i.refresh(),i.events.publish(l.pO),i.events.publish(l.Wj)}}function u(i){return async p=>{const g=i.libraryPanel.uid;try{const y=await(0,n.Mh)(g,!0);i.initLibraryPanel(y),p(d(i))}catch(y){console.log("ERROR: ",y),p((0,f.bc)({key:i.key,plugin:(0,o.X)("Unable to load library panel: "+g,!1)}))}}}},46732:(Y,O,e)=>{"use strict";e.d(O,{Vl:()=>c,WJ:()=>r,ZP:()=>u,bc:()=>s,mr:()=>d,o8:()=>l,pC:()=>f});var t=e(62992);const n={},o=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(i,p)=>{i[p.payload.key]={plugin:p.payload.plugin}},changePanelKey:(i,p)=>{i[p.payload.newKey]=i[p.payload.oldKey],delete i[p.payload.oldKey]},removePanel:(i,p)=>{delete i[p.payload.key]},removeAllPanels:i=>{Object.keys(i).forEach(p=>delete i[p])},setPanelInstanceState:(i,p)=>{i[p.payload.key].instanceState=p.payload.value},setPanelAngularComponent:(i,p)=>{const g=i[p.payload.key];g.angularComponent=p.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:l,setPanelInstanceState:f,changePanelKey:d,removePanel:r,removeAllPanels:c}=o.actions,u={panels:o.reducer}},73952:(Y,O,e)=>{"use strict";e.d(O,{i:()=>t});function t(n,o){return n.panels[o.key]}},10079:(Y,O,e)=>{"use strict";e.d(O,{r0:()=>a});var t=e(82897),n=e.n(t),o=e(72196),s=e(49187),l=e(47891),f=e(37932),d=e(6129);const r={kiosk:!0,autofitpanels:!0,orgId:!0};class c{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const p=this.urls[this.index],g=f.E1.getSearchObject(),y=(0,t.pickBy)(g,(h,v)=>r[v]),E=o.u.stripBaseFromUrl(p);this.index++,this.validPlaylistUrl=E,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),f.E1.push(E+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(i){i.pathname!==this.validPlaylistUrl&&this.stop()}async start(i){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=f.E1.getHistory().listen(this.locationUpdated);const p=[];let g=await(0,d.A5)(i);if(!g.items?.length)return;this.interval=l.intervalToMs(g.interval);const y=await(0,d.jc)(g.items);for(const E of y)if(E.dashboards)for(const h of E.dashboards)p.push(h.url);p.length&&(this.urls=p,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),f.E1.getSearchObject().kiosk&&f.E1.partial({kiosk:null}))}}const a=new c},6129:(Y,O,e)=>{"use strict";e.d(O,{A5:()=>g,CE:()=>i,Ds:()=>C,Dv:()=>y,cg:()=>u,d5:()=>v,jc:()=>h,l8:()=>p});var t=e(65583),n=e(12115),o=e(54899),s=e(35645),l=e(659),f=e(60499),d=e(35821),r=e(7832),c=e(3153),a=e(82e3);async function u(m){await E(()=>(0,o.i)().post("/api/playlists",m))}async function i(m,D){await E(()=>(0,o.i)().put(`/api/playlists/${m}`,D))}async function p(m){await E(()=>(0,o.i)().delete(`/api/playlists/${m}`),"Playlist deleted")}async function g(m){const D=await(0,o.i)().get(`/api/playlists/${m}`);if(D.items){for(const P of D.items)if(P.type==="dashboard_by_id"){P.type="dashboard_by_uid";const b=await(0,o.i)().get(`/api/dashboards/ids/${P.value}`);b.length&&(P.value=b[0])}}return D}async function y(){return(0,o.i)().get("/api/playlists/")}async function E(m,D="Playlist saved"){try{await m(),(0,c.WI)((0,l.$l)((0,f.AT)(D)))}catch(P){P instanceof Error&&(0,c.WI)((0,l.$l)((0,f.t_)("Unable to save playlist",P)))}}async function h(m){let D=0;if(!m?.length)return[];const P=[];for(const x of m){const A={query:"*",kind:["dashboard"],limit:1e3};switch(x.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":A.uid=[x.value];break;case"dashboard_by_tag":A.tags=[x.value];break}P.push({refId:`${D++}`,queryType:r.hR.Search,search:A})}if(!s.v.featureToggles.panelTitleSearch){const x=(0,a.getGrafanaSearcher)(),A=[];for(let T=0;T<P.length;T++){const S=(await x.search(P[T].search)).view;A.push({...m[T],dashboards:S.map(U=>({...U}))})}return A}const b=await(0,d.e)(),M=await(0,t.n)(b.query({targets:P}));if(M.data.length!==m.length)throw new Error("unexpected result size");return m.map((x,A)=>{const T=new n.U(M.data[A]);return{...x,dashboards:T.map(S=>({...S}))}})}function v(){return{items:[],interval:"5m",name:"",uid:""}}function C(m,D){return D?.length?(D=D.toLowerCase(),m.filter(P=>P.name.toLowerCase().includes(D))):m}},73354:(Y,O,e)=>{"use strict";e.d(O,{$F:()=>d,E1:()=>i,GP:()=>g,GV:()=>f,P6:()=>y,Tk:()=>p,jL:()=>r});var t=e(2631),n=e(54899),o=e(95156),s=e(11212),l=e(59210);async function f(h){const v=await c(h),C=Boolean(v),[m,D,P]=await Promise.all([i(),a(h,C),u(h)]),b=m.find(x=>x.id===h),M=b?.dependencies||v?.json?.dependencies;return{grafanaDependency:M?.grafanaDependency??M?.grafanaVersion??"",pluginDependencies:M?.plugins||[],links:b?.info.links||v?.json?.info.links||[],readme:P||v?.readme,versions:D}}async function d(){const{items:h}=await(0,n.i)().get(`${s.tB}/plugins`);return h.filter(l.wB)}async function r(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function c(h){try{return await(0,n.i)().get(`${s.tB}/plugins/${h}`,{})}catch(v){(0,n.kW)(v)&&(v.isHandled=!0);return}}async function a(h,v){try{return v?((await(0,n.i)().get(`${s.tB}/plugins/${h}/versions`)).items||[]).map(m=>({version:m.version,createdAt:m.createdAt,isCompatible:m.isCompatible,grafanaDependency:m.grafanaDependency})):[]}catch(C){return(0,n.kW)(C)&&(C.isHandled=!0),[]}}async function u(h){try{const v=await(0,n.i)().get(`${s.O2}/${h}/markdown/README`);return v?(0,t.a)(v):""}catch(v){return(0,n.kW)(v)&&(v.isHandled=!0),""}}async function i(){return(await(0,n.i)().get(`${s.O2}`,(0,o.y)({embedded:0}))).filter(l.EP)}async function p(h){return await(0,n.i)().post(`${s.O2}/${h}/install`,void 0,{showErrorAlert:!1})}async function g(h){return await(0,n.i)().post(`${s.O2}/${h}/uninstall`)}async function y(h,v){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${h}/settings`,method:"POST",data:v}))?.data}const E={getRemotePlugins:d,getInstalledPlugins:i,installPlugin:p,uninstallPlugin:g}},21048:(Y,O,e)=>{"use strict";e.d(O,{L:()=>s});var t=e(9892),n=e(66111),o=e(72648);const s=({children:f,wrap:d,className:r})=>{const c=(0,o.l4)(),a=l(c,d);return n.createElement("div",{className:(0,t.cx)(a.container,r)},f)},l=(f,d)=>({container:t.css`
    display: flex;
    flex-direction: row;
    flex-wrap: ${d?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${f.spacing()};
      margin-right: ${f.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},43714:(Y,O,e)=>{"use strict";e.d(O,{a:()=>o});var t=e(66111),n=e(61744);const o=({text:s="Loading..."})=>t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:s}))},11212:(Y,O,e)=>{"use strict";e.d(O,{O2:()=>t,tB:()=>n,uJ:()=>o});const t="/api/plugins",n="/api/gnet",o="plugins"},59210:(Y,O,e)=>{"use strict";e.d(O,{AA:()=>E,EP:()=>b,HT:()=>P,Nh:()=>y,RU:()=>m,Uj:()=>g,XB:()=>C,ZG:()=>i,fG:()=>D,uR:()=>c,wB:()=>M});var t=e(59250),n=e(29826),o=e(35645),s=e(66121),l=e(77582),f=e(29930),d=e(27876),r=e(84532);function c(S=[],U=[],R){const F=[],B=h(R);return S.forEach(K=>{const L=U.find(z=>z.slug===K.id),N=B[K.id];L||F.push(a(K,void 0,N))}),U.forEach(K=>{const L=S.find(z=>z.id===K.slug),N=B[K.slug];F.push(a(L,K,N))}),F}function a(S,U,R){return!S&&U?u(U,R):S&&!U?i(S,R):p(S,U,R)}function u(S,U){const{name:R,slug:F,description:B,version:K,orgName:L,popularity:N,downloads:z,typeCode:G,updatedAt:I,createdAt:V,status:H}=S,Q=!!U||A(G);return{description:B,downloads:z,id:F,info:{logos:{small:`https://grafana.com/api/plugins/${F}/versions/${K}/logos/small`,large:`https://grafana.com/api/plugins/${F}/versions/${K}/logos/large`}},name:R,orgName:L,popularity:N,publishedAt:V,signature:v({remote:S,error:U}),updatedAt:I,hasUpdate:!1,isPublished:!0,isInstalled:Q,isDisabled:Q,isCore:S.internal,isDev:!1,isEnterprise:H==="enterprise",type:G,error:U?.errorCode}}function i(S,U){const{name:R,info:{description:F,version:B,logos:K,updated:L,author:N},id:z,dev:G,type:I,signature:V,signatureOrg:H,signatureType:Q,hasUpdate:oe,accessControl:se}=S,ie=!!U||A(I);return{description:F,downloads:0,id:z,info:{logos:K},name:R,orgName:N.name,popularity:0,publishedAt:"",signature:v({local:S,error:U}),signatureOrg:H,signatureType:Q,updatedAt:L,installedVersion:B,hasUpdate:oe,isInstalled:!0,isDisabled:ie,isCore:V==="internal",isPublished:!1,isDev:Boolean(G),isEnterprise:!1,type:I,error:U?.errorCode,accessControl:se}}function p(S,U,R){const F=S?.info.version,B=U?.slug||S?.id||"",K=S?.type||U?.typeCode,L=!!R||A(K);let N={small:`/public/img/icn-${K}.svg`,large:`/public/img/icn-${K}.svg`};return U?N={small:`https://grafana.com/api/plugins/${B}/versions/${U.version}/logos/small`,large:`https://grafana.com/api/plugins/${B}/versions/${U.version}/logos/large`}:S&&S.info.logos&&(N=S.info.logos),{description:S?.info.description||U?.description||"",downloads:U?.downloads||0,hasUpdate:S?.hasUpdate||!1,id:B,info:{logos:N},isCore:Boolean(U?.internal||S?.signature===t.Xy.internal),isDev:Boolean(S?.dev),isEnterprise:U?.status==="enterprise",isInstalled:Boolean(S)||L,isDisabled:L,isPublished:!0,name:U?.name||S?.name||"",orgName:U?.orgName||S?.info.author.name||"",popularity:U?.popularity||0,publishedAt:U?.createdAt||"",type:K,signature:v({local:S,remote:U,error:R}),signatureOrg:S?.signatureOrg||U?.versionSignedByOrgName,signatureType:S?.signatureType||U?.versionSignatureType||U?.signatureType||void 0,updatedAt:U?.updatedAt||S?.info.updated||"",installedVersion:F,error:R?.errorCode,accessControl:S?.accessControl}}const g=S=>`${o.v.pluginCatalogURL}${S}`;var y=(S=>(S.nameAsc="nameAsc",S.nameDesc="nameDesc",S.updated="updated",S.published="published",S.downloads="downloads",S))(y||{});const E=(S,U)=>{const R={nameAsc:(F,B)=>F.name.localeCompare(B.name),nameDesc:(F,B)=>B.name.localeCompare(F.name),updated:(F,B)=>(0,n.J)(B.updatedAt).valueOf()-(0,n.J)(F.updatedAt).valueOf(),published:(F,B)=>(0,n.J)(B.publishedAt).valueOf()-(0,n.J)(F.publishedAt).valueOf(),downloads:(F,B)=>B.downloads-F.downloads};return R[U]?S.sort(R[U]):S};function h(S=[]){return S.reduce((U,R)=>(U[R.pluginId]=R,U),{})}function v(S){const{error:U,local:R,remote:F}=S;if(U)switch(U.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return R?.signature?R.signature:F?.signatureType||F?.versionSignatureType?t.Xy.valid:t.Xy.missing}const C=()=>(0,f.i)().get("/api/frontend/settings").then(S=>{o.v.panels=S.panels});function m(S){if(!S)return;const[U]=S.filter(R=>Boolean(R.isCompatible));return U}const D=()=>o.v.pluginAdminEnabled,P=(S,U,R)=>{const F=o.v.pluginAdminExternalManageEnabled,B=l.Vt.hasAccess(d.AccessControlAction.PluginsInstall,(0,r.bO)()),K=Boolean(R);return S.type===t.zV.renderer||S.type===t.zV.secretsmanager||S.isEnterprise&&!(0,s.v)("enterprise.plugins")||S.isDev||!B&&!F||!S.isPublished||!K||!U},b=S=>x(S.id),M=S=>x(S.slug);function x(S){const{pluginCatalogHiddenPlugins:U}=o.v;return!U.includes(S)}function A(S){return S===t.zV.secretsmanager&&!o.v.secretsManagerPluginEnabled}function T(S){return Boolean(S?.signature==="internal")}},84532:(Y,O,e)=>{"use strict";e.d(O,{Gg:()=>f,RN:()=>l,bO:()=>s});var t=e(47694),n=e(82002),o=e(27876);function s(){return t.vc.bootData.user.isGrafanaAdmin}function l(){return n.Vt.hasRole("Admin")}function f(){return n.Vt.hasPermission(o.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(o.AccessControlAction.DataSourcesWrite)}},85805:(Y,O,e)=>{"use strict";e.d(O,{DD:()=>u,LP:()=>E,N9:()=>i,Qd:()=>r,Ro:()=>h,Tz:()=>g,bQ:()=>p,bp:()=>c,m3:()=>y,tQ:()=>a});var t=e(62992),n=e(54899),o=e(38490),s=e(82907),l=e(73354),f=e(11212),d=e(59210);const r=(0,t.hg)(`${f.uJ}/fetchAll`,async(v,C)=>{try{const{dispatch:m}=C,[D,P,{payload:b}]=await Promise.all([(0,l.E1)(),(0,l.jL)(),m(a())]);return(0,d.uR)(D,b,P)}catch{return C.rejectWithValue("Unknown error.")}}),c=(0,t.hg)(`${f.uJ}/fetchAllLocal`,async(v,C)=>{try{return(await(0,l.E1)()).map(D=>(0,d.ZG)(D))}catch{return C.rejectWithValue("Unknown error.")}}),a=(0,t.hg)(`${f.uJ}/fetchRemotePlugins`,async(v,C)=>{try{return await(0,l.$F)()}catch(m){return(0,n.kW)(m)&&(m.isHandled=!0),C.rejectWithValue([])}}),u=(0,t.hg)(`${f.uJ}/fetchDetails`,async(v,C)=>{try{const m=await(0,l.GV)(v);return{id:v,changes:{details:m}}}catch{return C.rejectWithValue("Unknown error.")}}),i=(0,t.hg)(`${f.uJ}/install`,async({id:v,version:C,isUpdating:m=!1},D)=>{const P=m?{isInstalled:!0,installedVersion:C,hasUpdate:!1}:{isInstalled:!0,installedVersion:C};try{return await(0,l.Tk)(v),await(0,d.XB)(),m&&(0,s.Hl)(v),{id:v,changes:P}}catch(b){return console.error(b),(0,n.kW)(b)?D.rejectWithValue(b.data):D.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${f.uJ}/install`,async()=>({})),g=(0,t.hg)(`${f.uJ}/uninstall`,async(v,C)=>{try{return await(0,l.GP)(v),await(0,d.XB)(),(0,s.Hl)(v),{id:v,changes:{isInstalled:!1,installedVersion:void 0}}}catch(m){return console.error(m),C.rejectWithValue("Unknown error.")}}),y=(0,t.hg)(`${f.uJ}/loadPluginDashboards`,async(v,C)=>{const P=`api/plugins/${C.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(P)}),E=(0,t.PH)(`${f.uJ}/panelPluginLoaded`),h=v=>async(C,m)=>{let D=m().plugins.panels[v];return D||(D=await(0,o.Ub)(v),m().plugins.panels[v]||C(E(D))),D}},74509:(Y,O,e)=>{"use strict";e.d(O,{iY:()=>N,bt:()=>U,ZV:()=>S,Pj:()=>m,UQ:()=>b,bJ:()=>D,x3:()=>M,IS:()=>R,y9:()=>T,S1:()=>A,wq:()=>F,kH:()=>x});var t=e(66111),n=e(27876),o=e(59210),s=e(85805),l=e(66552),f=e(90158),d=e(79086),r=e(48996);const c=z=>z.plugins,a=(0,f.P1)(c,({items:z})=>z),u=(0,f.P1)(c,({settings:z})=>z.displayMode),{selectAll:i,selectById:p}=l.CD.getSelectors(a),g=z=>(0,f.P1)(i,G=>{const I=z.keyword?(0,d.x6)(z.keyword.toLowerCase()):"";return G.filter(V=>{const H=[V.name,V.orgName].filter(Boolean).map(Q=>Q.toLowerCase());return!(I&&!H.some(Q=>Q.includes(I))||z.type&&V.type!==z.type||z.isInstalled!==void 0&&V.isInstalled!==z.isInstalled||z.isCore!==void 0&&V.isCore!==z.isCore||z.isEnterprise!==void 0&&V.isEnterprise!==z.isEnterprise)})}),y=(0,f.P1)(i,z=>z?z.filter(G=>Boolean(G.error)).map(G=>({pluginId:G.id,errorCode:G.error})):[]),E=z=>(0,f.P1)(c,({requests:G={}})=>G[z]),h=z=>(0,f.P1)(E(z),G=>G?.status===r.eE.Pending),v=z=>(0,f.P1)(E(z),G=>G?.status===r.eE.Rejected?G?.error:null),C=z=>(0,f.P1)(E(z),G=>G===void 0),m=(z,G=o.Nh.nameAsc)=>{B();const I=(0,t.useMemo)(()=>g(z),[z]),V=(0,n.useSelector)(I),{isLoading:H,error:Q}=S(),oe=(0,o.AA)(V,G);return{isLoading:H,error:Q,plugins:oe}},D=z=>(B(),L(z),(0,n.useSelector)(G=>p(G,z))),P=z=>(K(),useSelector(G=>selectById(G,z))),b=()=>(B(),(0,n.useSelector)(y)),M=()=>{const z=(0,n.useDispatch)();return(G,I,V)=>z((0,s.N9)({id:G,version:I,isUpdating:V}))},x=()=>{const z=(0,n.useDispatch)();return()=>z((0,s.bQ)())},A=()=>{const z=(0,n.useDispatch)();return G=>z((0,s.Tz)(G))},T=()=>(0,n.useSelector)(v(s.tQ.typePrefix))===null,S=()=>{const z=(0,n.useSelector)(h(s.Qd.typePrefix)),G=(0,n.useSelector)(v(s.Qd.typePrefix));return{isLoading:z,error:G}},U=()=>{const z=(0,n.useSelector)(h(s.DD.typePrefix)),G=(0,n.useSelector)(v(s.DD.typePrefix));return{isLoading:z,error:G}},R=()=>{const z=(0,n.useSelector)(h(s.N9.typePrefix)),G=(0,n.useSelector)(v(s.N9.typePrefix));return{isInstalling:z,error:G}},F=()=>{const z=(0,n.useSelector)(h(s.Tz.typePrefix)),G=(0,n.useSelector)(v(s.Tz.typePrefix));return{isUninstalling:z,error:G}},B=()=>{const z=(0,n.useDispatch)(),G=(0,n.useSelector)(C(s.Qd.typePrefix));(0,t.useEffect)(()=>{G&&z((0,s.Qd)())},[])},K=()=>{const z=useDispatch(),G=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{G&&z(fetchAllLocal())},[])},L=z=>{const G=(0,n.useDispatch)(),I=(0,n.useSelector)(Q=>p(Q,z)),H=!(0,n.useSelector)(h(s.DD.typePrefix))&&I&&!I.details;(0,t.useEffect)(()=>{H&&G((0,s.DD)(z))},[I])},N=()=>{const z=(0,n.useDispatch)();return{displayMode:(0,n.useSelector)(u),setDisplayMode:I=>z((0,l.UC)(I))}}},66552:(Y,O,e)=>{"use strict";e.d(O,{CD:()=>l,I6:()=>p,UC:()=>i});var t=e(62992),n=e(11212),o=e(48996),s=e(85805);const l=(0,t.HF)(),f=g=>new RegExp(`${n.uJ}/(.*)/pending`).test(g.type),d=g=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(g.type),r=g=>new RegExp(`${n.uJ}/(.*)/rejected`).test(g.type),c=g=>{const y=g.lastIndexOf("/");return g.substring(0,y)},a={items:l.getInitialState(),requests:{},settings:{displayMode:o.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},u=(0,t.oM)({name:"plugins",initialState:a,reducers:{setDisplayMode(g,y){g.settings.displayMode=y.payload}},extraReducers:g=>g.addCase(s.Qd.fulfilled,(y,E)=>{l.upsertMany(y.items,E.payload)}).addCase(s.bp.fulfilled,(y,E)=>{l.upsertMany(y.items,E.payload)}).addCase(s.DD.fulfilled,(y,E)=>{l.updateOne(y.items,E.payload)}).addCase(s.N9.fulfilled,(y,E)=>{l.updateOne(y.items,E.payload)}).addCase(s.Tz.fulfilled,(y,E)=>{l.updateOne(y.items,E.payload)}).addCase(s.LP,(y,E)=>{y.panels[E.payload.meta.id]=E.payload}).addCase(s.m3.pending,(y,E)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,E)=>{y.isLoadingPluginDashboards=!1,y.dashboards=E.payload}).addMatcher(f,(y,E)=>{y.requests[c(E.type)]={status:o.eE.Pending}}).addMatcher(d,(y,E)=>{y.requests[c(E.type)]={status:o.eE.Fulfilled}}).addMatcher(r,(y,E)=>{y.requests[c(E.type)]={status:o.eE.Rejected,error:E.payload}})}),{setDisplayMode:i}=u.actions,p=u.reducer},48996:(Y,O,e)=>{"use strict";e.d(O,{Co:()=>o,cd:()=>n,eE:()=>d,lL:()=>t,tu:()=>f,vF:()=>s,xc:()=>l});var t=(r=>(r.Grid="grid",r.List="list",r))(t||{}),n=(r=>(r.Home="plugins-home",r.Browse="plugins-browse",r.Details="plugins-details",r))(n||{}),o=(r=>(r.app="apps",r.datasource="database",r.panel="credit-card",r.renderer="capture",r.secretsmanager="key-skeleton-alt",r))(o||{}),s=(r=>(r.INSTALL="INSTALL",r.UNINSTALL="UNINSTALL",r.UPDATE="UPDATE",r.REINSTALL="REINSTALL",r))(s||{}),l=(r=>(r.OVERVIEW="Overview",r.VERSIONS="Version history",r.CONFIG="Config",r.DASHBOARDS="Dashboards",r.USAGE="Usage",r))(l||{}),f=(r=>(r.OVERVIEW="overview",r.VERSIONS="version-history",r.CONFIG="config",r.DASHBOARDS="dashboards",r.USAGE="usage",r))(f||{}),d=(r=>(r.Pending="Pending",r.Fulfilled="Fulfilled",r.Rejected="Rejected",r))(d||{})},52889:(Y,O,e)=>{"use strict";e.d(O,{a:()=>s,v:()=>n});var t=e(66111);const n=t.createContext(o());n.displayName="PluginPageContext";function o(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(l){return{sectionNav:l??o().sectionNav}}},91162:(Y,O,e)=>{"use strict";e.d(O,{ND:()=>p,ak:()=>E});var t=e(89424),n=e(4063),o=e(20308),s=e(70926),l=e(54899),f=e(86647),d=e(22069),r=e(18271),c=e(47694),a=e(47471),u=e(97573),i=e(22215);class p{constructor(v=(0,o.J)()){this.templateSrv=v,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(v,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=v,this.defaultName=C;for(const m of Object.values(v))m.uid||(m.uid=m.name),this.settingsMapByUid[m.uid]=m,this.settingsMapById[m.id]=m;this.datasources[d.hr.type]=a.mV,this.datasources[u.Yq]=a.mV,this.settingsMapByUid[d.hr.uid]=a.bE,this.settingsMapByUid[u.Yq]=a.bE}getDataSourceSettingsByUid(v){return this.settingsMapByUid[v]}getInstanceSettings(v,C){let m=g(v);if((0,d.Pr)(m))return a.bE;if(m==="default"||m==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(m[0]==="$"){const D=this.templateSrv.replace(m,C,y);let P;return D==="default"?P=this.settingsMapByName[this.defaultName]:P=this.settingsMapByUid[D]??this.settingsMapByName[D],P?{...P,isDefault:!1,name:m,uid:m,rawRef:{type:P.type,uid:P.uid}}:void 0}return this.settingsMapByUid[m]??this.settingsMapByName[m]??this.settingsMapById[m]}get(v,C){let m=g(v);if(!m)return this.get(this.defaultName);if((0,d.Pr)(v))return Promise.resolve(this.datasources[u.Yq]);const D=this.settingsMapByName[m];return D&&(m=D.uid),this.datasources[m]?Promise.resolve(this.datasources[m]):(m=this.templateSrv.replace(m,C,y),m==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[m]?Promise.resolve(this.datasources[m]):this.loadDatasource(m))}async loadDatasource(v){if(this.datasources[v])return Promise.resolve(this.datasources[v]);const C=this.getInstanceSettings(v);if(!C)return Promise.reject({message:`Datasource ${v} was not found`});try{const m=await(0,i.nL)(C.meta);if(this.datasources[v])return this.datasources[v];const D=m.DataSourceClass.length!==1;let P;if(D?P=(0,s.V)().instantiate(m.DataSourceClass,{instanceSettings:C}):P=new m.DataSourceClass(C),P.components=m.components,!(P instanceof t.MF)){const b=P;b.name=C.name,b.id=C.id,b.type=C.type,b.meta=C.meta,b.uid=C.uid,P.getRef=t.MF.prototype.getRef}return this.datasources[v]=P,this.datasources[P.uid]=P,P}catch(m){return m instanceof Error&&r.Z.emit(n.SI.alertError,[C.name+" plugin failed",m.toString()]),Promise.reject({message:`Datasource: ${v} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(v={}){const C=Object.values(this.settingsMapByName).filter(D=>!(D.meta.id==="grafana"||D.meta.id==="mixed"||D.meta.id==="dashboard"||v.metrics&&!D.meta.metrics||v.tracing&&!D.meta.tracing||v.logs&&D.meta.category!=="logging"&&!D.meta.logs||v.annotations&&!D.meta.annotations||v.alerting&&!D.meta.alerting||v.pluginId&&D.meta.id!==v.pluginId||v.filter&&!v.filter(D)||v.type&&(Array.isArray(v.type)?!v.type.includes(D.type):v.type!==D.type)||!v.all&&D.meta.metrics!==!0&&D.meta.annotations!==!0&&D.meta.tracing!==!0&&D.meta.logs!==!0&&D.meta.alerting!==!0));if(v.variables)for(const D of this.templateSrv.getVariables()){if(D.type!=="datasource")continue;let P=D.current.value==="default"?this.defaultName:D.current.value;Array.isArray(P)&&P.length===1&&(P=P[0]);const b=!Array.isArray(P)&&this.settingsMapByName[P];if(b){const M=`\${${D.name}}`;C.push({...b,name:M,uid:M})}}const m=C.sort((D,P)=>D.name.toLowerCase()>P.name.toLowerCase()?1:D.name.toLowerCase()<P.name.toLowerCase()?-1:0);if(!v.pluginId&&!v.alerting){if(v.mixed){const D=this.getInstanceSettings("-- Mixed --");D&&C.push(D)}if(v.dashboard){const D=this.getInstanceSettings("-- Dashboard --");D&&C.push(D)}if(!v.tracing){const D=this.getInstanceSettings("-- Grafana --");D&&C.push(D)}}return m}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(v=>({name:v.name,value:v.name,meta:v.meta}))}getMetricSources(v){return this.getList({metrics:!0,variables:!v?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const v=await(0,l.i)().get("/api/frontend/settings");c.ZP.datasources=v.datasources,c.ZP.defaultDatasource=v.defaultDatasource,this.init(v.datasources,v.defaultDatasource)}}function g(h){return(0,d.Pr)(h)?d.hr.uid:typeof h=="string"?h:h?.uid}function y(h){return Array.isArray(h)?h[0]:h}const E=()=>(0,f.F)()},38490:(Y,O,e)=>{"use strict";e.d(O,{Ub:()=>d,_2:()=>r,q1:()=>c});var t=e(36873),n=e(47694),o=e(35974),s=e(22215);const l={},f={};function d(u){const i=l[u];if(i)return i;const p=n.ZP.panels[u];if(!p)throw new Error(`Plugin ${u} not found`);return l[u]=a(p),l[u]}function r(u){return a(u)}function c(u){return f[u]}function a(u){return(0,s.N$)(u.module,u.info?.version).then(i=>{if(i.plugin)return i.plugin;if(i.PanelCtrl){const p=new t.c(null);return p.angularPanelCtrl=i.PanelCtrl,p}throw new Error("missing export: plugin or PanelCtrl")}).then(i=>(i.meta=u,f[u.id]=i,i)).catch(i=>(console.warn("Error loading panel plugin: "+u.id,i),(0,o.F)(u,i)))}},13011:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>s,a:()=>o});var t=e(54899);const n={};function o(l,f){const d=n[l];return d?Promise.resolve(d):(0,t.i)().get(`/api/plugins/${l}/settings`,void 0,void 0,f).then(r=>(n[l]=r,r)).catch(r=>Promise.reject(new Error("Unknown Plugin")))}const s=l=>l?delete n[l]:Object.keys(n).forEach(f=>delete n[f])},22215:(Y,O,e)=>{"use strict";e.d(O,{kY:()=>Ls,Av:()=>zg,nL:()=>ig,N$:()=>Lm});var t={};e.r(t),e.d(t,{plugin:()=>bt});var n={};e.r(n),e.d(n,{plugin:()=>yr});var o={};e.r(o),e.d(o,{plugin:()=>Be});var s={};e.r(s),e.d(s,{plugin:()=>cc});var l={};e.r(l),e.d(l,{plugin:()=>Do});var f={};e.r(f),e.d(f,{plugin:()=>gu});var d={};e.r(d),e.d(d,{plugin:()=>wc});var r={};e.r(r),e.d(r,{plugin:()=>Iu});var c={};e.r(c),e.d(c,{plugin:()=>wu});var a={};e.r(a),e.d(a,{plugin:()=>Qc});var u={};e.r(u),e.d(u,{plugin:()=>Ku});var i={};e.r(i),e.d(i,{plugin:()=>Hu});var p={};e.r(p),e.d(p,{plugin:()=>Qu});var g={};e.r(g),e.d(g,{plugin:()=>Hl});var y={};e.r(y),e.d(y,{plugin:()=>sl});var E={};e.r(E),e.d(E,{plugin:()=>vo});var h={};e.r(h),e.d(h,{plugin:()=>hm});var v={};e.r(v),e.d(v,{plugin:()=>ym});var C={};e.r(C),e.d(C,{plugin:()=>cl});var m={};e.r(m),e.d(m,{plugin:()=>xm});var D={};e.r(D),e.d(D,{plugin:()=>_});var P={};e.r(P),e.d(P,{plugin:()=>tf});var b={};e.r(b),e.d(b,{plugin:()=>sf});var M={};e.r(M),e.d(M,{plugin:()=>Bf});var x={};e.r(x),e.d(x,{plugin:()=>ac});var A={};e.r(A),e.d(A,{plugin:()=>Xf});var T=e(9892),S=e(71667),U=e(47700),R=e(24259),F=e.n(R),B=e(82897),K=e.n(B),L=e(36365),N=e.n(L),z=e(57706),G=e.n(z),I=e(66111),V=e(15638),H=e(67948),Q=e(51947),oe=e(6260),se=e(83829),ie=e(43031),j=e(20674),de=e(95787),ce=e(43809),ee=e(56975),le=e(36873),q=e(89424),fe=e(206),Z=e(38412),ne=e(47406),re=e(19920),ve=e(35670),me=e(40419),Ie=e(37219),Ge=e(47694),gt=e(77582),Te=e(29930),Le=e(13019),Ye=e(4050),it=e(40229),ht=e(24816),Re=e(97724),ye=e(94984),Ce=e(45849),be=e(35645),We=e(68226),Qe=e(69945),mt=e(72004),vt=e(20194),rt=e(37190),Ot=e(46818),Et=e(27876),Mt=e(76282),ue=e(72648),De=e(31403),Ne=e(52694),tt=e(33950),et=e(96308),Ue=e(53715),Fe=e(10505),Ee=e(39031);const Me=({alertManagerSourceName:w,group:J,expandAll:ae})=>{const[he,Pe]=(0,I.useState)(ae),xe=(0,ue.wW)(He),we=(0,ue.wW)(Ue.r);return(0,I.useEffect)(()=>Pe(ae),[ae]),I.createElement("div",{className:xe.group,"data-testid":"alert-group"},Object.keys(J.labels).length>0?I.createElement(Ne.s,{labels:J.labels}):I.createElement("div",{className:xe.noGroupingText},"No grouping"),I.createElement("div",{className:xe.row},I.createElement(tt.U,{isCollapsed:!he,onToggle:()=>Pe(!he)})," ",I.createElement(et.Z,{group:J})),he&&I.createElement("div",{className:xe.alerts},J.alerts.map((je,_e)=>{const pt=je.status.state.toUpperCase(),dt=(0,Mt.vT)({start:new Date(je.startsAt),end:Date.now()});return I.createElement("div",{"data-testid":"alert-group-alert",className:xe.alert,key:`${je.fingerprint}-${_e}`},I.createElement("div",null,I.createElement("span",{className:we[je.status.state]},pt," "),"for ",dt),I.createElement("div",null,I.createElement(Ne.s,{labels:je.labels})),I.createElement("div",{className:xe.actionsRow},je.status.state===Ee.Z9.Suppressed&&I.createElement(De.Qj,{href:`${(0,Fe.eQ)("/alerting/silences",w)}&silenceIds=${je.status.silencedBy.join(",")}`,className:xe.button,icon:"bell",size:"sm"},"Manage silences"),je.status.state===Ee.Z9.Active&&I.createElement(De.Qj,{href:(0,Fe.VN)(w,je.labels),className:xe.button,icon:"bell-slash",size:"sm"},"Silence"),je.generatorURL&&I.createElement(De.Qj,{className:xe.button,href:je.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},He=w=>({noGroupingText:T.css`
    height: ${w.spacing(4)};
  `,group:T.css`
    background-color: ${w.colors.background.secondary};
    margin: ${w.spacing(.5,1,.5,1)};
    padding: ${w.spacing(1)};
  `,row:T.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${w.spacing(1)};
  `,alerts:T.css`
    margin: ${w.spacing(0,2,0,4)};
  `,alert:T.css`
    padding: ${w.spacing(1,0)};
    & + & {
      border-top: 1px solid ${w.colors.border.medium};
    }
  `,button:T.css`
    & + & {
      margin-left: ${w.spacing(1)};
    }
  `,actionsRow:T.css`
    padding: ${w.spacing(1,0)};
  `}),Ze=(w,J)=>(0,I.useMemo)(()=>w.filter(ae=>(0,vt.eD)(ae.labels,J)||ae.alerts.some(he=>(0,vt.eD)(he.labels,J))),[w,J]),lt=w=>{const J=(0,Et.useDispatch)(),ae=be.v.unifiedAlertingEnabled,he=w.options.expandAll,Pe=w.options.alertmanager,we=((0,Qe._)(dt=>dt.amAlertGroups)||Ot.oq)[Pe||""]?.result||[],je=w.options.labels?(0,vt.Zh)(w.options.labels):[],_e=Ze(we,je);(0,I.useEffect)(()=>{function dt(){Pe&&J((0,mt.mS)(Pe))}dt();const It=setInterval(dt,rt.iF);return()=>{clearInterval(It)}},[J,Pe]);const pt=_e.length>0;return I.createElement(We.$,{autoHeightMax:"100%",autoHeightMin:"100%"},ae&&I.createElement("div",null,pt&&_e.map(dt=>I.createElement(Me,{alertManagerSourceName:Pe,key:JSON.stringify(dt.labels),group:dt,expandAll:he})),!pt&&"No alerts"))},bt=new le.c(lt).setPanelOptions(w=>w.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:Ce.GC,category:["Options"],editor:function(ae){const he=(0,I.useMemo)(Ce.z3,[]);return I.createElement(ye.P,{current:ae.value,onChange:Pe=>ae.onChange(Pe),dataSources:he})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var Pt=e(53117),Je=e(43339),Dt=e(79658),Ve=e(99151),Xe=e.n(Ve),st=e(68183),ut=e(8581),xt=e(10216),Kt=e(50946);async function Jt({query:w,permissionLevel:J}){return(await(0,Kt.ZL)(w,J)).map(Pe=>({id:Pe.id,title:Pe.title,url:Pe.url}))}async function On({query:w,permissionLevel:J,extraFolders:ae}){const he=await Jt({query:w,permissionLevel:J}),Pe=ae??[],xe=w?Pe.filter(we=>we.title?.toLowerCase().includes(w.toLowerCase())):Pe;return he?xe.concat(he):xe}async function Nn({query:w,permissionLevel:J=Et.PermissionLevelString.View,extraFolders:ae=[]}){return(await On({query:w,permissionLevel:J,extraFolders:ae})).map(Pe=>({value:Pe,label:Pe.title}))}function jn(w,J){return w?.find(ae=>ae.value?.id===J)}async function ya(w){if(w!=null)try{const{id:J,title:ae}=await(0,Kt.EW)(w);return{value:{id:J,title:ae},label:ae}}catch{console.error(`Could not find folder with id:${w}`)}}const Lt={id:void 0,title:"All"},ft={id:xt.pW,title:xt.fy};function Ht({onChange:w,extraFolders:J=[],initialFolderId:ae,permissionLevel:he=Et.PermissionLevelString.View}){const[Pe,xe]=(0,I.useState)(!1),[we,je]=(0,I.useState)(void 0),[_e,pt]=(0,I.useState)(void 0),dt=(0,I.useCallback)(async Xt=>{let cn=jn(Xt,ae);cn||(cn=await ya(ae)??Xt[0],w(cn.value)),xe(!0),pt(Xt),je(cn)},[ae,w]),It=(0,I.useCallback)(async Xt=>{const cn=await Nn({query:Xt,permissionLevel:he,extraFolders:J});return Pe||await dt(cn),cn},[he,J,Pe,dt]),Ft=Xe()(It,300,{leading:!0}),St=(0,I.useCallback)(({value:Xt})=>{const cn=jn(_e,Xt?.id);je(cn),w(Xt)},[_e,w]);return I.createElement("div",{"data-testid":st.wl.components.ReadonlyFolderPicker.container},I.createElement(ut.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:we,value:we,loadOptions:Ft,onChange:St}))}var $t=e(59679),zt=e(67483),Wt=e(20308),jt=e(54899),sn=e(72948),pn=e(39904),Pn=e(67162),Mn=e(9398),Cn=e(40286);function Hn(w){const[J,ae]=(0,I.useState)(""),he=(0,$t.Z)(async()=>{if(w.options.showOptions!==Cn.kx.Current)return;const we={state:oa(w.options.stateFilter)},je=(0,Mn.h4)().getCurrent()?.getPanelById(w.id);w.options.alertName&&(we.query=(0,Wt.J)().replace(w.options.alertName,je.scopedVars)),w.options.folderId>=0&&(we.folderId=w.options.folderId),w.options.dashboardTitle&&(we.dashboardQuery=w.options.dashboardTitle),w.options.dashboardAlerts&&(we.dashboardId=(0,Mn.h4)().getCurrent()?.id),w.options.tags&&(we.dashboardTag=w.options.tags);const _e=await(0,jt.i)().get("/api/alerts",we,`alert-list-get-current-alert-state-${w.id}`);let pt=_n(w.options.sortOrder,_e.map(dt=>({...dt,stateModel:Pn.Z.getStateDisplayModel(dt.state),newStateDateAgo:(0,zt.CQ)(dt.newStateDate).locale("en").fromNow(!0)})));return pt.length>w.options.maxItems&&(pt=pt.slice(0,w.options.maxItems)),ae(pt.length===0?"No alerts":""),pt},[w.options.showOptions,w.options.stateFilter.alerting,w.options.stateFilter.execution_error,w.options.stateFilter.no_data,w.options.stateFilter.ok,w.options.stateFilter.paused,w.options.stateFilter.pending,w.options.maxItems,w.options.tags,w.options.dashboardAlerts,w.options.dashboardTitle,w.options.folderId,w.options.alertName,w.options.sortOrder,w.timeRange]),Pe=(0,$t.Z)(async()=>{if(w.options.showOptions!==Cn.kx.RecentChanges)return;const we={limit:w.options.maxItems,type:"alert",newState:oa(w.options.stateFilter)},je=(0,Mn.h4)().getCurrent();w.options.dashboardAlerts&&(we.dashboardId=je?.id),we.from=ne.parse(je?.time.from).unix()*1e3,we.to=ne.parse(je?.time.to).unix()*1e3;const _e=await(0,jt.i)().get("/api/annotations",we,`alert-list-get-state-changes-${w.id}`),pt=_n(w.options.sortOrder,_e.map(dt=>({...dt,time:je?.formatDate(dt.time,"MMM D, YYYY HH:mm:ss"),stateModel:Pn.Z.getStateDisplayModel(dt.newState),info:Pn.Z.getAlertAnnotationInfo(dt)})));return ae(pt.length===0?"No alerts in current time range":""),pt},[w.options.showOptions,w.options.maxItems,w.options.stateFilter.alerting,w.options.stateFilter.execution_error,w.options.stateFilter.no_data,w.options.stateFilter.ok,w.options.stateFilter.paused,w.options.stateFilter.pending,w.options.dashboardAlerts,w.options.sortOrder]),xe=(0,ue.wW)(Gt);return I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},I.createElement("div",{className:xe.container},J&&I.createElement("div",{className:xe.noAlertsMessage},J),I.createElement("section",null,I.createElement("ol",{className:xe.alertRuleList},w.options.showOptions===Cn.kx.Current?!he.loading&&he.value&&he.value.map(we=>I.createElement("li",{className:xe.alertRuleItem,key:`alert-${we.id}`},I.createElement(sn.Z,{href:`${we.url}?viewPanel=${we.panelId}`,className:xe.cardContainer},I.createElement(sn.Z.Heading,null,we.name),I.createElement(sn.Z.Figure,{className:(0,T.cx)(xe.alertRuleItemIcon,we.stateModel.stateClass)},I.createElement(pn.J,{name:we.stateModel.iconClass,size:"xl",className:xe.alertIcon})),I.createElement(sn.Z.Meta,null,I.createElement("div",{className:xe.alertRuleItemText},I.createElement("span",{className:we.stateModel.stateClass},we.stateModel.text),I.createElement("span",{className:xe.alertRuleItemTime}," for ",we.newStateDateAgo)))))):!Pe.loading&&Pe.value&&Pe.value.map(we=>I.createElement("li",{className:xe.alertRuleItem,key:`alert-${we.id}`},I.createElement(sn.Z,{className:xe.cardContainer},I.createElement(sn.Z.Heading,null,we.alertName),I.createElement(sn.Z.Figure,{className:(0,T.cx)(xe.alertRuleItemIcon,we.stateModel.stateClass)},I.createElement(pn.J,{name:we.stateModel.iconClass,size:"xl"})),I.createElement(sn.Z.Meta,null,I.createElement("span",{className:(0,T.cx)(xe.alertRuleItemText,we.stateModel.stateClass)},we.stateModel.text),I.createElement("span",null,we.time),we.info&&I.createElement("span",{className:xe.alertRuleItemInfo},we.info)))))))))}function _n(w,J){if(w===Cn.As.Importance)return(0,B.sortBy)(J,he=>Pn.Z.alertStateSortScore[he.state||he.newState]);if(w===Cn.As.TimeAsc)return(0,B.sortBy)(J,he=>new Date(he.newStateDate||he.time));if(w===Cn.As.TimeDesc)return(0,B.sortBy)(J,he=>new Date(he.newStateDate||he.time)).reverse();const ae=(0,B.sortBy)(J,he=>(he.name||he.alertName).toLowerCase());return w===Cn.As.AlphaDesc&&ae.reverse(),ae}function oa(w){return Object.entries(w).filter(([J,ae])=>ae).map(([J,ae])=>J)}const Gt=w=>({cardContainer:T.css`
    padding: ${w.spacing(.5)} 0 ${w.spacing(.25)} 0;
    line-height: ${w.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:T.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:T.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:T.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${w.colors.background.secondary};
    padding: ${w.spacing(.5)} ${w.spacing(1)};
    border-radius: ${w.shape.borderRadius()};
    margin-bottom: ${w.spacing(.5)};
  `,alertRuleItemIcon:T.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${w.spacing(4)};
    padding: 0 ${w.spacing(.5)} 0 ${w.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:T.css`
    font-weight: ${w.typography.fontWeightBold};
    font-size: ${w.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:T.css`
    color: ${w.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:T.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:T.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:T.css`
    margin-right: ${w.spacing(.5)};
  `}),Bt=w=>{const J={showOptions:w.options.showOptions??w.show??Cn.kx.Current,maxItems:w.options.maxItems??w.limit??10,sortOrder:w.options.sortOrder??w.sortOrder??Cn.As.AlphaAsc,dashboardAlerts:w.options.dashboardAlerts??w.onlyAlertsOnDashboard??!1,alertName:w.options.alertName??w.nameFilter??"",dashboardTitle:w.options.dashboardTitle??w.dashboardFilter??"",folderId:w.options.folderId??w.folderId,tags:w.options.tags??w.dashboardTags??[],stateFilter:w.options.stateFilter??w.stateFilter?.reduce((he,Pe)=>({...he,[Pe]:!0}),{})??{}};return parseFloat(w.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Pe=>delete w[Pe]),J};var on=e(46063),rn=e(43055);function In(w,J){const ae=(0,vt.Zh)(w);return(0,vt.eD)(J,ae)}function Ln(w,J){const{stateFilter:ae,alertInstanceLabelFilter:he}=w;return(0,B.isEmpty)(ae)?J:J.filter(Pe=>(ae.firing&&((0,rn.j)(Pe,on.bj.Alerting)||(0,rn.j)(Pe,on.x_.Firing))||ae.pending&&((0,rn.j)(Pe,on.bj.Pending)||(0,rn.j)(Pe,on.x_.Pending))||ae.noData&&(0,rn.j)(Pe,on.bj.NoData)||ae.normal&&(0,rn.j)(Pe,on.bj.Normal)||ae.error&&(0,rn.j)(Pe,on.bj.Error)||ae.inactive&&(0,rn.j)(Pe,on.x_.Inactive))&&(he?In(w.alertInstanceLabelFilter,Pe.labels):!0))}function Un(w){return!(w.startsWith("__")&&w.endsWith("__"))}const qn=w=>{const{onChange:J,id:ae,defaultValue:he}=w,Pe=(0,Et.useDispatch)();(0,I.useEffect)(()=>{Pe((0,mt.lB)())},[Pe]);const xe=(0,Qe._)(pt=>pt.promRules),we=(0,Ot.PE)(xe),je=(0,Ot.yR)(xe),_e=(0,I.useMemo)(()=>{if((0,B.isEmpty)(xe))return[];if(!we)return[];const pt=Object.keys(xe).flatMap(dt=>xe[dt].result??[]).flatMap(dt=>dt.groups).flatMap(dt=>dt.rules.filter(It=>It.type===on.pz.Alerting)).flatMap(dt=>dt.alerts??[]).map(dt=>Object.keys(dt.labels??{})).flatMap(dt=>dt.filter(Un));return(0,B.uniq)(pt)},[we,xe]);return I.createElement(ut.NU,{id:ae,isLoading:je,defaultValue:he,"aria-label":"group by label keys",placeholder:"Group by",prefix:I.createElement(pn.J,{name:"tag-alt"}),onChange:pt=>{J(pt.map(dt=>dt.value??""))},options:_e.map(pt=>({label:pt,value:pt}))})};var da=e(95831),ha=e(49380),Ta=e(82378),Wa=e(45253),cs=e(61744),is=e(57426),Ha=e(82002),$a=e(89149),ss=e(61627),Oa=e(79662),Ia=e(24782),ys=e(64681),la=e.n(ys),Ts=e(48563),bs=e(84952);const ds=({alerts:w,options:J,grafanaTotalInstances:ae,handleInstancesLimit:he,limitInstances:Pe,grafanaFilteredInstancesTotal:xe})=>{const we=J.groupMode===Cn.LM.Custom?!0:J.showInstances,[je,_e]=(0,I.useState)(we),pt=(0,ue.wW)(Us),dt=(0,ue.wW)(De.gN),It=(0,I.useCallback)(()=>{_e(Ss=>!Ss)},[]),Ft=(0,I.useMemo)(()=>Ln(J,(0,Fe.Zl)(J.sortOrder,w))??[],[w,J]),St=ae!==void 0,Xt=ae&&xe?ae-xe:0,cn=w.length-Ft.length,qt=St?Xt:cn,Ut=Ft.length>0,gn=Ut?It:B.noop;(0,I.useEffect)(()=>{Ft.length===0&&_e(!1)},[Ft]);const nn=async()=>{he&&(he(!1),_e(!0))},Sn=async()=>{he&&(he(!0),_e(!0))},Kn=Pe?xe:Ft.length,Bn=Ft.length,Yn=St?Kn:Bn,ca=Pe?`Showing ${$a.gr} of ${ae} instances`:`Showing all ${ae} instances`,na=Pe?"View all instances":`Limit the result to ${$a.gr} instances`,Da=ae&&$a.gr===Ft.length&&ae>Ft.length,Pa=ae&&$a.gr<Ft.length&&!Pe,xa=Da||Pa?I.createElement("div",{className:pt.footerRow},I.createElement("div",null,ca),I.createElement(De.zx,{size:"sm",variant:"secondary",onClick:Pe?nn:Sn},na)):void 0;return I.createElement("div",null,J.groupMode===Cn.LM.Default&&I.createElement("button",{className:(0,T.cx)(dt,Ut?pt.clickable:""),onClick:()=>gn()},Ut&&I.createElement(pn.J,{name:je?"angle-down":"angle-right",size:"md"}),I.createElement("span",null,`${Yn} ${la()("instance",Yn)}`),qt>0&&I.createElement("span",null,", ",`${qt} hidden by filters`)),je&&I.createElement(Ts.o,{instances:Ft,pagination:{itemsPerPage:2*bs.gN},footerRow:xa}))},Us=w=>({clickable:T.css`
    cursor: pointer;
  `,footerRow:T.css`
    display: flex;
    flex-direction: column;
    gap: ${w.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Za="__ungrouped__",Ks=({rules:w,options:J})=>{const ae=(0,ue.wW)(ks),he=J.groupBy,Pe=(0,I.useMemo)(()=>{const xe=new Map,we=pt=>he?Tn(pt,he):!0;w.forEach(pt=>{const dt=(0,Oa.Re)(pt),It=we(pt);(dt?.alerts??[]).forEach(Ft=>{const St=It?dn(he,Ft.labels):Za,Xt=xe.get(St)??[];xe.set(St,[...Xt,Ft])})});const je=xe.get(Za)??[];return xe.delete(Za),xe.set(Za,je),Array.from(xe.entries()).reduce((pt,[dt,It])=>{const Ft=Ln(J,It);return Ft.length>0&&pt.set(dt,Ft),pt},new Map)},[he,w,J]);return I.createElement(I.Fragment,null,Array.from(Pe).map(([xe,we])=>I.createElement("li",{className:ae.alertRuleItem,key:xe,"data-testid":xe},I.createElement("div",null,I.createElement("div",{className:ae.customGroupDetails},I.createElement("div",{className:ae.alertLabels},xe!==Za&&ln(xe).map(([je,_e])=>I.createElement(Ia.i,{key:je,labelKey:je,value:_e})),xe===Za&&"No grouping")),I.createElement(ds,{alerts:we,options:J})))))};function dn(w,J){return new URLSearchParams(w.map(ae=>[ae,J[ae]])).toString()}function ln(w){return[...new URLSearchParams(w)]}function Tn(w,J){const ae=(0,Oa.Re)(w);return J.every(he=>(ae?.alerts??[]).some(Pe=>Pe.labels[he]))}const zn=Ks;var ga=e(16753),va=e(26418),Ga=e(63029),qa=e(60048),es=e(93411);function us(w){return Object.values(w).filter(J=>J!==void 0).reduce((J,ae)=>J+ae,0)}const hs=({rules:w,options:J,handleInstancesLimit:ae,limitInstances:he})=>{const Pe=(0,ue.wW)(ks),xe=(0,ue.wW)($s),{href:we}=(0,ga.Z)(),je=w.length<=J.maxItems?w:w.slice(0,J.maxItems);return I.createElement(I.Fragment,null,I.createElement("ol",{className:Pe.alertRuleList},je.map((_e,pt)=>{const{namespaceName:dt,groupName:It,dataSourceName:Ft}=_e,St=(0,Oa.x_)(_e.promRule)?_e.promRule:void 0,Xt=(0,Oa.ub)(St),cn=(0,qa.Yd)(_e.dataSourceName,_e),qt=(0,qa.$V)(cn),Ut=_e.dataSourceName===Ce.GC?us(_e.instanceTotals):void 0,gn=_e.dataSourceName===Ce.GC?us(_e.filteredInstanceTotals):void 0,nn=(0,es.u)(`/alerting/${encodeURIComponent(Ft)}/${encodeURIComponent(qt)}/view`,{returnTo:we??""});return St?I.createElement("li",{className:Pe.alertRuleItem,key:`alert-${dt}-${It}-${_e.name}-${pt}`},I.createElement("div",{className:xe.icon},I.createElement(pn.J,{name:Pn.Z.getStateDisplayModel(St.state).iconClass,className:xe[(0,Oa.Aq)(St.state)],size:"lg"})),I.createElement("div",{className:Pe.alertNameWrapper},I.createElement("div",{className:Pe.instanceDetails},I.createElement(va.Stack,{direction:"row",gap:1,wrap:!1},I.createElement("div",{className:Pe.alertName,title:_e.name},_e.name),I.createElement(Ga.L,null),nn&&I.createElement("a",{href:nn,target:"__blank",className:Pe.link,rel:"noopener"},I.createElement(va.Stack,{alignItems:"center",gap:1},"View alert rule",I.createElement(pn.J,{name:"external-link-alt",size:"sm"})))),I.createElement("div",{className:Pe.alertDuration},I.createElement("span",{className:xe[(0,Oa.Aq)(St.state)]},(0,Oa.SS)(St.state))," ",Xt&&St.state!==on.x_.Inactive&&I.createElement(I.Fragment,null,"for"," ",I.createElement("span",null,(0,Mt.vT)({start:Xt,end:Date.now()}))))),I.createElement(ds,{alerts:St.alerts??[],options:J,grafanaTotalInstances:Ut,grafanaFilteredInstancesTotal:gn,handleInstancesLimit:ae,limitInstances:he}))):null})))},$s=w=>({common:T.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${w.shape.borderRadius()};
    font-size: ${w.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:T.css`
    margin-top: ${w.spacing(2.5)};
    align-self: flex-start;
  `,good:T.css`
    color: ${w.colors.success.main};
  `,bad:T.css`
    color: ${w.colors.error.main};
  `,warning:T.css`
    color: ${w.colors.warning.main};
  `,neutral:T.css`
    color: ${w.colors.secondary.main};
  `,info:T.css`
    color: ${w.colors.primary.main};
  `}),tr=hs;function mr(w){const J=(ae,[he,Pe])=>Boolean(Pe)?[...ae,he]:ae;return Object.entries(w).reduce(J,[])}function ur(w){const J=(0,Et.useDispatch)(),ae=(0,I.useMemo)(Ce.mA,[]),[he,Pe]=(0,da.Z)(!0);(0,I.useEffect)(()=>{w.options.stateFilter.inactive===!0&&(w.options.stateFilter.normal=!0),w.options.stateFilter.inactive=void 0},[w.options.stateFilter]);let xe;(0,ha.Z)(()=>{xe=(0,Mn.h4)().getCurrent()});const we=(0,I.useMemo)(()=>mr(w.options.stateFilter),[w.options.stateFilter]),{options:je,replaceVariables:_e}=w,pt={...w.options,alertName:_e(je.alertName),alertInstanceLabelFilter:_e(je.alertInstanceLabelFilter)},dt=(0,I.useMemo)(()=>(0,vt.Zh)(pt.alertInstanceLabelFilter),[pt.alertInstanceLabelFilter]);(0,I.useEffect)(()=>{w.options.groupMode===Cn.LM.Default&&J((0,mt.ei)(!1,{limitAlerts:he?$a.gr:void 0,matcher:dt,state:we}))},[w.options.groupMode,he,J,dt,we]),(0,I.useEffect)(()=>{J((0,mt.ei)(!1,{limitAlerts:he?$a.gr:void 0,matcher:dt,state:we}));const Pa=xe?.events.subscribe(Ta.md,()=>J((0,mt.ei)(!1,{limitAlerts:he?$a.gr:void 0,matcher:dt,state:we})));return()=>{Pa?.unsubscribe()}},[J,xe,dt,we,Pe,he]);const It=Pa=>{Pa?(J((0,mt.ei)(!1,{limitAlerts:$a.gr,matcher:dt,state:we})),Pe(!0)):(J((0,mt.ei)(!1,{matcher:dt,state:we})),Pe(!1))},{prom:Ft,ruler:St}=(0,Qe._)(Pa=>({prom:Pa.promRules[Ce.GC]||Ot.oq,ruler:Pa.rulerRules[Ce.GC]||Ot.oq})),Xt=Ft.loading||St.loading,cn=!!Ft.result||!!St.result,qt=(0,Qe._)(Pa=>Pa.promRules),Ut=(0,Qe._)(Pa=>Pa.rulerRules),gn=(0,ss.Zo)(),nn=ae.some(Pa=>qt[Pa]?.dispatched),Sn=ae.some(Pa=>Ut[Pa]?.dispatched),Kn=nn||Sn,Bn=(0,ue.wW)(ks),Yn=(0,Oa.C7)(gn),ca=w.options.sortOrder,na=(0,I.useMemo)(()=>er(w,sr(ca,Yn)),[Yn,ca,w]),Da=na.length===0?"No alerts matching filters":void 0;return!Ha.Vt.hasPermission(Et.AccessControlAction.AlertingRuleRead)&&!Ha.Vt.hasPermission(Et.AccessControlAction.AlertingRuleExternalRead)?I.createElement(Wa.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},I.createElement("div",{className:Bn.container},Kn&&Xt&&!cn&&I.createElement(cs.u,{text:"Loading..."}),Da&&I.createElement("div",{className:Bn.noAlertsMessage},Da),I.createElement("section",null,w.options.viewMode===Cn.wO.Stat&&cn&&I.createElement(is.w6,{width:w.width,height:w.height,graphMode:is.IG.None,textMode:is.jG.Auto,justifyMode:is.ap.Auto,theme:Ge.vc.theme2,value:{text:`${na.length}`,numeric:na.length}}),w.options.viewMode===Cn.wO.List&&w.options.groupMode===Cn.LM.Custom&&cn&&I.createElement(zn,{rules:na,options:pt}),w.options.viewMode===Cn.wO.List&&w.options.groupMode===Cn.LM.Default&&cn&&I.createElement(tr,{rules:na,options:pt,handleInstancesLimit:It,limitInstances:he}))))}function sr(w,J){if(w===Cn.As.Importance)return(0,B.sortBy)(J,he=>Pn.Z.alertStateSortScore[he.state]);if(w===Cn.As.TimeAsc)return(0,B.sortBy)(J,he=>{const Pe=(0,Oa.Re)(he)??void 0;return(0,Oa.ub)(Pe)||new Date});if(w===Cn.As.TimeDesc)return(0,B.sortBy)(J,he=>{const Pe=(0,Oa.Re)(he)??void 0;return(0,Oa.ub)(Pe)||new Date}).reverse();const ae=(0,B.sortBy)(J,he=>he.name.toLowerCase());return w===Cn.As.AlphaDesc&&ae.reverse(),ae}function er(w,J){const{options:ae,replaceVariables:he}=w;let Pe=[...J];if(ae.dashboardAlerts){const xe=(0,Mn.h4)().getCurrent()?.uid;Pe=Pe.filter(({annotations:we={}})=>Object.entries(we).some(([je,_e])=>je===rt.q6.dashboardUID&&_e===xe))}if(ae.alertName){const xe=he(ae.alertName);Pe=Pe.filter(({name:we})=>we.toLocaleLowerCase().includes(xe.toLocaleLowerCase()))}if(Pe=Pe.filter(xe=>{const we=(0,Oa.Re)(xe);return we?ae.stateFilter.firing&&we.state===on.x_.Firing||ae.stateFilter.pending&&we.state===on.x_.Pending||ae.stateFilter.normal&&we.state===on.x_.Inactive:!1}),ae.folder&&(Pe=Pe.filter(xe=>xe.namespaceName===ae.folder.title)),ae.datasource){const xe=ae.datasource===Ce.JY;Pe=Pe.filter(xe?({dataSourceName:we})=>we===Ce.GC:({dataSourceName:we})=>we===ae.datasource)}return Pe=Pe.reduce((xe,we)=>{const je=(0,Oa.Re)(we);return(je?Ln({stateFilter:ae.stateFilter,alertInstanceLabelFilter:he(ae.alertInstanceLabelFilter)},je.alerts??[]):[]).length&&xe.push(we),xe},[]),Pe}const ks=w=>({cardContainer:T.css`
    padding: ${w.spacing(.5)} 0 ${w.spacing(.25)} 0;
    line-height: ${w.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:T.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:T.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:T.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${w.colors.background.secondary};
    padding: ${w.spacing(.5)} ${w.spacing(1)};
    border-radius: ${w.shape.borderRadius()};
    margin-bottom: ${w.spacing(.5)};

    gap: ${w.spacing(2)};
  `,alertName:T.css`
    font-size: ${w.typography.h6.fontSize};
    font-weight: ${w.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:T.css`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:T.css`
    > * {
      margin-right: ${w.spacing(.5)};
    }
  `,alertDuration:T.css`
    font-size: ${w.typography.bodySmall.fontSize};
  `,alertRuleItemText:T.css`
    font-weight: ${w.typography.fontWeightBold};
    font-size: ${w.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:T.css`
    color: ${w.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:T.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:T.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:T.css`
    margin-right: ${w.spacing(.5)};
  `,instanceDetails:T.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:T.css`
    margin-bottom: ${w.spacing(.5)};
  `,link:T.css`
    word-break: break-all;
    color: ${w.colors.primary.text};
  `});class Er{getSuggestionsForData(J){const{dataSummary:ae}=J;if(ae.hasData)return;J.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Vs(w){return w.showOptions===Cn.kx.Current}const Tr=new le.c(Hn).setPanelOptions(w=>{w.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:Cn.kx.Current},{label:"Recent state changes",value:Cn.kx.RecentChanges}]},defaultValue:Cn.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:Cn.As.AlphaAsc},{label:"Alphabetical (desc)",value:Cn.As.AlphaDesc},{label:"Importance",value:Cn.As.Importance},{label:"Time (asc)",value:Cn.As.TimeAsc},{label:"Time (desc)",value:Cn.As.TimeDesc}]},defaultValue:Cn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Vs}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Vs}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:ae,onChange:he}){return I.createElement(Ht,{initialFolderId:ae,onChange:Pe=>he(Pe?.id),extraFolders:[Lt,ft]})},category:["Filter"],showIf:Vs}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(J){return I.createElement(Je.B,{tags:J.value,onChange:J.onChange})},category:["Filter"],showIf:Vs}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Vs}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Vs}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Vs}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Vs}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Vs}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Vs})}).setMigrationHandler(Bt).setSuggestionsSupplier(new Er),pr=new le.c(ur).setPanelOptions(w=>{w.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:Cn.wO.List,settings:{options:[{label:"List",value:Cn.wO.List},{label:"Stat",value:Cn.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:Cn.LM.Default,settings:{options:[{value:Cn.LM.Default,label:"Default grouping"},{value:Cn.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:J=>J.groupMode===Cn.LM.Custom,category:["Options"],editor:J=>I.createElement(qn,{id:J.id??"groupBy",defaultValue:J.value.map(ae=>({label:ae,value:ae})),onChange:J.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:Cn.As.AlphaAsc},{label:"Alphabetical (desc)",value:Cn.As.AlphaDesc},{label:"Importance",value:Cn.As.Importance},{label:"Time (asc)",value:Cn.As.TimeAsc},{label:"Time (desc)",value:Cn.As.TimeDesc}]},defaultValue:Cn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ae){return I.createElement(Dt.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ae.value?.title,initialFolderUid:ae.value?.uid,permissionLevel:Et.PermissionLevelString.View,onClear:()=>ae.onChange(""),...ae})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(ae){return I.createElement(Pt.q,{...ae,type:["prometheus","loki","grafana"],noDefault:!0,current:ae.value,onChange:he=>ae.onChange(he.name),onClear:()=>ae.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),yr=be.v.unifiedAlertingEnabled?pr:Tr;var Cr=e(53376),Or=e(72196),fr=e(4063),Js=e(23588),Os=e(37932),lr=e(34807),fn=e(7804),qe=e(398),Ct=e(18271),At=e(39856),tn=e(61860);const Rn=({options:w,annotation:J,formatDate:ae,onClick:he,onAvatarClick:Pe,onTagClick:xe})=>{const we=(0,ue.wW)(aa),{showUser:je,showTags:_e,showTime:pt}=w,{text:dt="",login:It,email:Ft,avatarUrl:St,tags:Xt,time:cn,timeEnd:qt}=J,Ut=()=>{he(J)},gn=()=>{Pe(J)},nn=It&&je,Sn=cn&&pt,Kn=qt&&qt!==cn&&pt;return I.createElement(sn.Z,{className:we.card,onClick:Ut},I.createElement(sn.Z.Heading,null,I.createElement(At.D,{className:we.heading,onClick:Bn=>{Bn.stopPropagation()},content:dt})),Sn&&I.createElement(sn.Z.Description,{className:we.timestamp},I.createElement(kn,{formatDate:ae,time:cn}),Kn&&I.createElement(I.Fragment,null,I.createElement("span",{className:we.time},"-"),I.createElement(kn,{formatDate:ae,time:qt})," ")),nn&&I.createElement(sn.Z.Meta,{className:we.meta},I.createElement(Dn,{email:Ft,login:It,avatarUrl:St,onClick:gn})),_e&&Xt&&I.createElement(sn.Z.Tags,null,I.createElement(lr.P,{tags:Xt,onClick:Bn=>xe(Bn,!1)})))},Dn=({onClick:w,avatarUrl:J,login:ae,email:he})=>{const Pe=(0,ue.wW)(aa),xe=je=>{je.stopPropagation(),w()},we=I.createElement("span",null,"Created by:",I.createElement("br",null)," ",he);return I.createElement(tn.u,{content:we,theme:"info",placement:"top"},I.createElement("button",{onClick:xe,className:Pe.avatar,"aria-label":`Created by ${he}`},I.createElement("img",{src:J,alt:"avatar icon"})))},kn=({time:w,formatDate:J})=>{const ae=(0,ue.wW)(aa);return I.createElement("span",{className:ae.time},I.createElement("span",null,J(w)))};function aa(w){return{card:(0,T.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:w.spacing(1),margin:w.spacing(.5),width:"inherit"}),heading:(0,T.css)({a:{zIndex:1,position:"relative",color:w.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,T.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,T.css)({margin:0,alignSelf:"center"}),time:(0,T.css)({marginLeft:w.spacing(1),marginRight:w.spacing(1),fontSize:w.typography.bodySmall.fontSize,color:w.colors.text.secondary}),avatar:(0,T.css)({border:"none",background:"inherit",margin:0,padding:w.spacing(.5),img:{borderRadius:"50%",width:w.spacing(2),height:w.spacing(2)}})}}class Qn extends I.PureComponent{constructor(J){super(J),this.style=ia(be.v.theme2),this.subs=new Cr.w0,this.tagListRef=I.createRef(),this.onAnnoClick=async ae=>{if(!ae.time)return;const{options:he}=this.props,xe=(0,Mn.h4)().getCurrent(),we={from:this._timeOffset(ae.time,he.navigateBefore,!0),to:this._timeOffset(ae.timeEnd??ae.time,he.navigateAfter,!1)};if(he.navigateToPanel&&(we.viewPanel=ae.panelId),xe?.uid===ae.dashboardUID){Os.E1.partial(we);return}const je=await(0,jt.i)().get("/api/search",{dashboardUIDs:ae.dashboardUID});if(je&&je.length&&je[0].uid===ae.dashboardUID){const _e=je[0],pt=new URL(_e.url,window.location.origin);pt.searchParams.set("from",we.from),pt.searchParams.set("to",we.to),Os.E1.push(Or.u.stripBaseFromUrl(pt.toString()));return}Ct.Z.emit(fr.SI.alertWarning,["Unknown Dashboard: "+ae.dashboardUID])},this.onTagClick=(ae,he)=>{if(!he&&this.state.queryTags.includes(ae))return;const Pe=he?this.state.queryTags.filter(we=>we!==ae):[...this.state.queryTags,ae];let xe;if(he){const we=document.activeElement,je=we?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(we)&&je){const _e=Number.parseInt(je,10),pt=this.tagListRef.current.querySelector(`[data-tag-id="${_e+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${_e-1}"]`);pt instanceof HTMLElement&&(xe=pt)}}this.setState({queryTags:Pe},()=>xe?.focus())},this.onUserClick=ae=>{this.setState({queryUser:{id:ae.userId,login:ae.login,email:ae.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ae,he)=>{const{options:Pe}=this.props,xe=(0,Mn.h4)().getCurrent();return xe?I.createElement(Rn,{annotation:ae,formatDate:xe.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Pe}):I.createElement(I.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Js.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(J,ae){const{options:he,timeRange:Pe}=this.props;(he!==J.options||this.state.queryTags!==ae.queryTags||this.state.queryUser!==ae.queryUser||J.renderCounter!==this.props.renderCounter||he.onlyInTimeRange&&Pe!==J.timeRange)&&this.doSearch()}async doSearch(){const{options:J}=this.props,{queryUser:ae,queryTags:he}=this.state,Pe={tags:J.tags,limit:J.limit,type:"annotation"};J.onlyFromThisDashboard&&(Pe.dashboardUID=(0,Mn.h4)().getCurrent()?.uid);let xe="";if(J.onlyInTimeRange){const{timeRange:je}=this.props;Pe.from=je.from.valueOf(),Pe.to=je.to.valueOf()}else xe="All Time";ae&&(Pe.userId=ae.id),J.tags&&J.tags.length&&(Pe.tags=J.tags.map(je=>this.props.replaceVariables(je))),he.length&&(Pe.tags=Pe.tags?[...Pe.tags,...he]:he);const we=await(0,jt.i)().get("/api/annotations",Pe,`anno-list-panel-${this.props.id}`);this.setState({annotations:we,timeInfo:xe,loaded:!0})}_timeOffset(J,ae,he=!1){let Pe=5,xe="m";const we=/^(\d+)(\w)/.exec(ae);we&&we.length===3&&(Pe=parseInt(we[1],10),xe=we[2]);const je=(0,zt.CQ)(J);return he&&(Pe*=-1),je.add(Pe,xe).valueOf()}render(){const{loaded:J,annotations:ae,queryUser:he,queryTags:Pe}=this.state;if(!J)return I.createElement("div",null,"loading...");const xe=he||Pe.length>0;return I.createElement(We.$,{autoHeightMin:"100%"},xe&&I.createElement("div",{className:this.style.filter},I.createElement("b",null,"Filter:"),he&&I.createElement(De.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${he.email}`},he.email),Pe.length>0&&I.createElement(lr.P,{icon:"times",tags:Pe,onClick:we=>this.onTagClick(we,!0),getAriaLabel:we=>`Remove ${we} tag`,className:this.style.tagList,ref:this.tagListRef})),ae.length<1&&I.createElement("div",{className:this.style.noneFound},"No Annotations Found"),I.createElement(qe.L,{items:ae,renderItem:this.renderItem,getItemKey:we=>`${we.id}`}))}}const ia=(0,fn.B)(w=>({noneFound:T.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,T.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:w.spacing(.5),padding:w.spacing(.5)}),tagList:(0,T.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),ja=Object.freeze([0,0]),Tt={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Be=new le.c(Qn).setPanelOptions(w=>{w.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Tt.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Tt.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(J){return I.createElement(Je.B,{tags:J.value,onChange:J.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Tt.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Tt.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Tt.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Tt.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Tt.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Tt.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Tt.navigateAfter,description:""})}).setPanelChangeHandler((w,J,ae)=>J==="ryantxu-annolist-panel"?ae:w.options);var Ae=e(3947),nt=e(53768),ct=e(72293),wt=e(30471),_t=e(82229),Nt=e(99098),at=e(40538),An=e(26372),Fn=e(34315),Gn=e(91511),$n=e(77587),Ra=e(31911),ts=e(25272),Ps=e(74855),vs=e(96905),Es=e(87670),ma=e(60325),ba=e(4176),as=e(23888),ms=e(729),Ya=e(78056),Is=e(68416),ws=e(72269),Gs=e(85511),Ir=e(20888),Dr=e(56632),$e=e(1105);const kt=({config:w,onUPlotClick:J,setFocusedSeriesIdx:ae,setFocusedPointIdx:he,setCoords:Pe,setHover:xe,isToolTipOpen:we,isActive:je,setIsActive:_e,sync:pt})=>{we.current=!1;const dt=()=>{_e&&_e(!0)},It=()=>{we.current||(Pe(null),_e&&_e(!1))};let Ft=null,St=null;w.addHook("init",Ut=>{Ft=Ut.root.parentElement,St=Ut.over,Ft?.addEventListener("click",J),St.addEventListener("mouseleave",It),St.addEventListener("mouseenter",dt),pt&&pt()===Dr.m.Crosshair&&Ut.root.classList.add("shared-crosshair")});const Xt=()=>{we.current&&(Pe(null),J())};w.addHook("drawClear",Xt),w.addHook("destroy",()=>{Ft?.removeEventListener("click",J),St?.removeEventListener("mouseleave",It),St?.removeEventListener("mouseenter",dt),Xt()});let cn;w.addHook("syncRect",(Ut,gn)=>{cn=gn});const qt=w.getTooltipInterpolator();return qt&&w.addHook("setCursor",Ut=>{we.current||qt(ae,he,gn=>{if(gn){Pe(null);return}if(!cn)return;const{x:nn,y:Sn}=(0,$e._)(Ut,cn);nn!==void 0&&Sn!==void 0&&Pe({canvas:{x:Ut.cursor.left,y:Ut.cursor.top},viewport:{x:nn,y:Sn}})},Ut)}),w.addHook("setLegend",Ut=>{if(!we.current&&!qt&&he(Ut.legend.idx),Ut.cursor.idxs!=null)for(let gn=0;gn<Ut.cursor.idxs.length;gn++){const nn=Ut.cursor.idxs[gn];if(nn!=null){const Sn={xIndex:nn,yIndex:0,pageX:cn.left+Ut.cursor.left,pageY:cn.top+Ut.cursor.top};(!we.current||!Sn)&&xe(Sn);return}}}),w.addHook("setSeries",(Ut,gn)=>{we.current||ae(gn)}),w};var Yt=e(50796),un=e(97551),yn=e(16225),hn=e(75974),Wn=e(2703),fa=e(72990),sa=e(17587),ra=e(6194),Aa=e(33750),zs=e(13347),Rs=e(2445),Va=e(25532),La=e(5680),rs=e(28586),fs=e(60892);const Ur=rs.Gj,wr=rs.Gj,Bi=8,Fo=30,Po=.65,rc=.1,Zd=.15,Jd=5,$o=10,fl=.1;function oc(w,J,ae,he,Pe){const xe=(0,ba.X1)(w,14),we=J/(xe.width+2)*14,je=ae/he,_e=Math.min(je,we);return{fontSize:Math.min(_e,Pe??_e),textMetrics:xe}}function Ko(w,J){const{xOri:ae,xDir:he,rawValue:Pe,getColor:xe,formatValue:we,formatShortValue:je,fillOpacity:_e=1,showValue:pt,xSpacing:dt=0}=w,It=ae===at.wN.Horizontal,Ft=!Boolean(w.text?.valueSize),St=w.stacking!==at.o0.None,Xt=w.stacking===at.o0.Percent;let{groupWidth:cn,barWidth:qt,barRadius:Ut=0}=w;St&&([cn,qt]=[qt,cn]);let gn,nn;const Sn=ge=>Array.from(ge.data[0].map((Oe,Ke)=>Ke)),Kn=dt===0?void 0:(ge,Oe)=>{const Ke=ge.bbox.width,ot=he*(It?1:-1);let Rt=Oe.length,en=Rt-1,Qt=0,vn=Ke/hn.Z.pxRatio,bn=Math.abs(Math.floor(vn/dt));Qt=Rt<bn?0:Math.ceil(Rt/bn);let mn=Oe.map((xn,Jn)=>Qt!==0&&(dt>0?Jn:en-Jn)%Qt>0?null:xn);return ot===1?mn:mn.reverse()},Bn=(ge,Oe,Ke,ot,Rt)=>{if(w.xTimeAuto){let en=ge.scales.x,Qt=en.min,vn=en.max;en.min=ge.data[0][0],en.max=ge.data[0][ge.data[0].length-1];let bn=(0,as.mr)(ge,Oe,Ke,ot,Rt);return en.min=Qt,en.max=vn,bn}return Oe.map(en=>It?je(0,en):we(0,en))},Yn=(ge,Oe,Ke)=>{Oe=0,Ke=Math.max(1,ge.data[0].length-1);let ot=0;(0,rs.Qm)(ge.data[0].length,cn,Ur,0,(en,Qt,vn)=>{ot=Qt+vn/2});let Rt=Ke-Oe;if(ot===.5)Oe-=Rt;else{let Qt=(1/(1-ot*2)*Rt-Rt)/2;Oe-=Qt,Ke+=Qt}return[Oe,Ke]};let ca=(ge,Oe)=>{let Ke=Array.from({length:Oe},()=>({offs:Array(ge).fill(0),size:Array(ge).fill(0)}));return(0,rs.Qm)(ge,cn,Ur,null,(ot,Rt,en)=>{(0,rs.Qm)(Oe,qt,wr,null,(Qt,vn,bn)=>{Ke[Qt].offs[ot]=Rt+en*vn,Ke[Qt].size[ot]=en*bn})}),Ke},na=(ge,Oe)=>{let Ke=Array.from({length:Oe},()=>({offs:Array(ge).fill(0),size:Array(ge).fill(0)}));return(0,rs.Qm)(ge,cn,Ur,null,(ot,Rt,en)=>{(0,rs.Qm)(Oe,qt,wr,null,(Qt,vn,bn)=>{Ke[Qt].offs[ot]=Rt,Ke[Qt].size[ot]=en})}),Ke};const Da=It?rc:Zd,Pa=It?Jd:$o;let xa=[],Ss=[],Qa=1,Ea,Ja=w.text?.valueSize??Fo,os=Pa,Ys=1/0,Ms=1/0,Qs=xe!=null,_s=Qs?{fill:{unit:3,values:(ge,Oe)=>Ss[Oe].fill},stroke:{unit:3,values:(ge,Oe)=>Ss[Oe].stroke}}:{},Na=hn.Z.paths.bars({radius:Xt?0:St?(ge,Oe)=>Oe===ge.data.length-1?[Ut,0]:[0,0]:Ut,disp:{x0:{unit:2,values:(ge,Oe)=>xa[Oe].offs},size:{unit:2,values:(ge,Oe)=>xa[Oe].size},..._s},each:(ge,Oe,Ke,ot,Rt,en,Qt)=>{ot-=ge.bbox.left,Rt-=ge.bbox.top;let vn=ge.data[Oe][Ke];It?(Ys=Math.min(Ys,vn<0?ge.bbox.height-(Rt+Qt):Rt),Ms=en):(Ys=Qt,Ms=Math.min(Ms,vn<0?ot:ge.bbox.width-(ot+en)));let bn={x:ot,y:Rt,w:en,h:Qt,sidx:Oe,didx:Ke};if(w.fullHighlight&&(w.xOri===at.wN.Horizontal?(bn.y=0,bn.h=ge.bbox.height):(bn.x=0,bn.w=ge.bbox.width)),gn.add(bn),pt!==at.Jp.Never){const mn=Pe(Oe,Ke);let xn=1;Xt&&W[Oe][Ke]&&(xn=W[Oe][Ke]);const Jn=xn===0?0:mn/xn,Zn=we(Oe,Jn);if(os=Math.min(os,Math.round(Da*(It?en:Qt))),Ea[Ke]===void 0&&(Ea[Ke]={}),Ea[Ke][Oe]={text:Zn,value:Pe(Oe,Ke),hidden:!1},Ft){const{fontSize:ta,textMetrics:pa}=oc(Ea[Ke][Oe].text,Ms*(It?Po:1)-(It?0:os),Ys*(It?1:Po)-(It?os:0),1);Ea[Ke][Oe].textMetrics=pa;let Sa=Math.round(Math.min(Ja,Fo,ta));Qa=Sa/Ja*(Sa/14),Ja=Sa}else Ea[Ke][Oe].textMetrics=(0,ba.X1)(Ea[Ke][Oe].text,Ja);let Vn=It?0:-Math.round(fl*Ja),ea=Pe(Oe,Ke);if(w.negY?.[Oe]&&ea!=null&&(ea*=-1),ea!=null){const ta=ge.bbox.left+(It?ot+en/2:ea<0?ot-os:ot+en+os),pa=ge.bbox.top+(It?ea<0?Rt+Qt+os:Rt-os:Rt+Qt/2-Vn),{textMetrics:Sa={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Ea[Ke][Oe];let wa=0,Fa=0;It?(wa=Sa.width*Qa/2,Fa=ea>0?(Sa.actualBoundingBoxAscent+Sa.actualBoundingBoxDescent)*Qa:0):(Fa=(Sa.actualBoundingBoxAscent+Sa.actualBoundingBoxDescent)*Qa/2,wa=ea<0?Sa.width*Qa:0),Ea[Ke][Oe].x=ta,Ea[Ke][Oe].y=pa,Ea[Ke][Oe].bbox={x:ta-wa,y:pa-Fa,w:Sa.width*Qa,h:(Sa.actualBoundingBoxAscent+Sa.actualBoundingBoxDescent)*Qa}}}}});const ua=ge=>{let Oe=ge.over;Oe.style.overflow="hidden",ge.root.querySelectorAll(".u-cursor-pt").forEach(Ke=>{Ke instanceof HTMLElement&&(Ke.style.borderRadius="0",w.fullHighlight&&(Ke.style.zIndex="-1"))})},Ua={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(ge,Oe)=>{if(Oe===1){nn=null;let Ke=ge.cursor.left*hn.Z.pxRatio,ot=ge.cursor.top*hn.Z.pxRatio;gn.get(Ke,ot,1,1,Rt=>{(0,fs.Pn)(Ke,ot,Rt.x,Rt.y,Rt.x+Rt.w,Rt.y+Rt.h)&&(St?(nn==null||Rt.h*Rt.w<nn.h*nn.w)&&(nn=Rt):nn=Rt)})}return nn&&Oe===nn.sidx?nn.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(ge,Oe)=>{let Ke=nn&&Oe===nn.sidx,ot=0,Rt=0;if(St&&Ke){const en=nn&&nn.sidx>1&&(0,fs.zZ)(gn,nn.sidx-1,nn.didx);en&&(It?ot=en.h:Rt=en.w)}return{left:Ke?(nn.x+Rt)/hn.Z.pxRatio:-10,top:Ke?nn.y/hn.Z.pxRatio:-10,width:Ke?(nn.w-Rt)/hn.Z.pxRatio:0,height:Ke?(nn.h-ot)/hn.Z.pxRatio:0}}}},Xa=ge=>{if(gn=gn||new fs.lW(0,0,ge.bbox.width,ge.bbox.height),gn.clear(),ge.series.forEach(Oe=>{Oe._paths=null}),St?xa=[null].concat(na(ge.data[0].length,ge.data.length-1)):xa=[null].concat(ca(ge.data[0].length,ge.data.length-1)),Qs){Ss=[null];for(let Oe=1;Oe<ge.data.length;Oe++){let Ke=ge.data[Oe].map((ot,Rt)=>ot!=null?xe(Oe,Rt,ot):null);Ss.push({fill:_e<1?Ke.map(ot=>ot!=null?(0,La.alpha)(ot,_e):null):Ke,stroke:Ke})}}Ea={},Ja=w.text?.valueSize??Fo,os=Pa,Ys=Ms=1/0},Bs=ge=>{if(pt===at.Jp.Never||Ja<Bi)return;ge.ctx.save(),ge.ctx.fillStyle=J.colors.text.primary,ge.ctx.font=`${Ja}px ${J.typography.fontFamily}`;let Oe,Ke;for(const ot in Ea){let Rt=!0;for(const en in Ea[ot]){const Qt=Ea[ot][en],{text:vn,x:bn=0,y:mn=0}=Qt;let{value:xn}=Qt;w.negY?.[en]&&xn!=null&&(xn*=-1);let Jn=It?"center":xn!==null&&xn<0?"right":"left",Zn=It?xn!==null&&xn<0?"top":"alphabetic":"middle";if(Jn!==Oe&&(ge.ctx.textAlign=Oe=Jn),Zn!==Ke&&(ge.ctx.textBaseline=Ke=Zn),pt===at.Jp.Always)ge.ctx.fillText(vn,bn,mn);else if(pt===at.Jp.Auto){let{bbox:Vn}=Qt,ea=!1;if(Vn==null)ea=!0,Qt.hidden=!0;else if(!Rt)for(const ta in Ea[ot]){if(ta===en)continue;const pa=Ea[ot][ta],{bbox:Sa,hidden:wa}=pa;if(!wa&&Sa&&(0,fs.kK)(Vn,Sa)){ea=!0,Qt.hidden=!0;break}}Rt=!1,!ea&&ge.ctx.fillText(vn,bn,mn)}}}ge.ctx.restore()},ps=(ge,Oe,Ke,ot)=>{nn?(ge(nn.sidx),Oe(nn.didx),Ke()):Ke(!0)};let W=null;function te(ge,Oe){return W=null,(0,Rs.Bj)(ge[0],Oe,({totals:Ke})=>{W=Ke})}return{cursor:Ua,xRange:Yn,xValues:Bn,xSplits:Sn,hFilter:Kn,barsBuilder:Na,init:ua,drawClear:Xa,draw:Bs,interpolateTooltip:ps,prepData:te}}const li=Object.freeze([0,0]),Qr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:at.wm.Auto,showValue:at.Jp.Auto,stacking:at.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},ic={fillOpacity:80,gradientMode:at.FI.None,lineWidth:1};function ci(w){return w===_t.wm.Vertical?{xOri:at.wN.Horizontal,xDir:at.bQ.Right,yOri:at.wN.Vertical,yDir:at.bQ.Up}:{xOri:at.wN.Vertical,xDir:at.bQ.Down,yOri:at.wN.Horizontal,yDir:at.bQ.Right}}const Nm=({frame:w,theme:J,orientation:ae,showValue:he,groupWidth:Pe,barWidth:xe,barRadius:we=0,stacking:je,text:_e,rawValue:pt,getColor:dt,fillOpacity:It,allFrames:Ft,xTickLabelRotation:St,xTickLabelMaxLength:Xt,xTickLabelSpacing:cn=0,legend:qt,timeZone:Ut,fullHighlight:gn})=>{const nn=new zs.U,Sn=(Qa,Ea)=>(0,Wn.zc)(w.fields[Qa].display(Ea)),Kn=(Qa,Ea)=>Ni(Sn(Qa,Ea),Xt),Bn=ci(ae);w.fields.length===2&&(Pe=xe,xe=1);const Yn={xOri:Bn.xOri,xDir:Bn.xDir,groupWidth:Pe,barWidth:xe,barRadius:we,stacking:je,rawValue:pt,getColor:dt,fillOpacity:It,formatValue:Sn,formatShortValue:Kn,timeZone:Ut,text:_e,showValue:he,legend:qt,xSpacing:cn,xTimeAuto:w.fields[0]?.type===Nt.fS.time&&!w.fields[0].config.unit?.startsWith("time:"),negY:w.fields.map(Qa=>Qa.config.custom?.transform===at.pR.NegativeY),fullHighlight:gn},ca=Ko(Yn,J);if(nn.setCursor(ca.cursor),nn.addHook("init",ca.init),nn.addHook("drawClear",ca.drawClear),nn.addHook("draw",ca.draw),nn.setTooltipInterpolator(ca.interpolateTooltip),St!==0){let Qa=50,Ea=Bn.xOri===at.wN.Horizontal?14:5;nn.setPadding(Co(w,St,Xt,Qa,Ea))}nn.setPrepData(ca.prepData),nn.addScale({scaleKey:"x",isTime:!1,range:ca.xRange,distribution:at.wf.Ordinal,orientation:Bn.xOri,direction:Bn.xDir});const na=w.fields[0].config.custom?.axisPlacement!==at.LB.Hidden?Bn.xOri===at.wN.Horizontal?at.LB.Bottom:at.LB.Left:at.LB.Hidden,Da=w.fields[0].config.custom?.axisPlacement!==at.LB.Hidden;nn.addAxis({scaleKey:"x",isTime:!1,placement:na,label:w.fields[0].config.custom?.axisLabel,splits:ca.xSplits,filter:Bn.xOri===0?ca.hFilter:void 0,values:ca.xValues,timeZone:Ut,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Bn.xOri===0?St*-1:0,theme:J,show:Da});let Pa=0;const xa=lc(qt);for(let Qa=1;Qa<w.fields.length;Qa++){const Ea=w.fields[Qa];Pa++;const Ja={...ic,...Ea.config.custom},os=Ea.config.unit||ws.j,Ys=(0,fa.fD)(Ea),Qs=(0,fa.YO)(Ea,J).color;let _s=Ja.axisSoftMin,Na=Ja.axisSoftMax;if(_s==null&&Ea.config.min==null&&(_s=0),Na==null&&Ea.config.max==null&&(Na=0),Ja.thresholdsStyle&&Ea.config.thresholds&&(Ja.thresholdsStyle.mode??at.i3.Off)!==at.i3.Off&&nn.addThresholds({config:Ja.thresholdsStyle,thresholds:Ea.config.thresholds,scaleKey:os,theme:J,hardMin:Ea.config.min,hardMax:Ea.config.max,softMin:Ja.axisSoftMin,softMax:Ja.axisSoftMax}),nn.addSeries({scaleKey:os,pxAlign:!0,lineWidth:Ja.lineWidth,lineColor:Qs,fillOpacity:Ja.fillOpacity,theme:J,colorMode:Ys,pathBuilder:ca.barsBuilder,show:!Ja.hideFrom?.viz,gradientMode:Ja.gradientMode,thresholds:Ea.config.thresholds,hardMin:Ea.config.min,hardMax:Ea.config.max,softMin:_s,softMax:Na,dataFrameFieldIndex:{fieldIndex:xa?Qa:Ft[0].fields.findIndex(ua=>ua.type===Nt.fS.number&&ua.state?.seriesIndex===Pa-1),frameIndex:0}}),nn.addScale({scaleKey:os,min:Ea.config.min,max:Ea.config.max,softMin:_s,softMax:Na,orientation:Bn.yOri,direction:Bn.yDir,distribution:Ja.scaleDistribution?.type,log:Ja.scaleDistribution?.log}),Ja.axisPlacement!==at.LB.Hidden){let ua=Ja.axisPlacement;(!ua||ua===at.LB.Auto)&&(ua=at.LB.Left),Bn.xOri===1&&(ua===at.LB.Left&&(ua=at.LB.Bottom),ua===at.LB.Right&&(ua=at.LB.Top)),nn.addAxis({scaleKey:os,label:Ja.axisLabel,size:Ja.axisWidth,placement:ua,formatValue:(Ua,Xa)=>(0,Wn.zc)(Ea.display(Ua,Xa)),filter:Bn.yOri===0?ca.hFilter:void 0,tickLabelRotation:Bn.xOri===1?St*-1:0,theme:J,grid:{show:Ja.axisGridShow}})}}let Ss=(0,Rs.i7)(w);return nn.setStackingGroups(Ss),nn};function Ni(w,J){return w.length>J?w.substring(0,J).concat("..."):w}function Co(w,J,ae,he=0,Pe=0){const xe=w.fields[0].values,we=as.gD,je=w.fields[0].display,_e=St=>je?je(xe[St]):xe[St];let pt=0;for(let St=0;St<xe.length;St++){let Xt=(0,ba.X1)(Ni((0,Wn.zc)(_e(St)),ae),we);pt=Xt.width>pt?Xt.width:pt}const dt=J>0?Math.cos(J*Math.PI/180)*(0,ba.X1)(Ni((0,Wn.zc)(_e(xe.length-1)),ae),we).width:0,It=J<0?Math.cos(J*-1*Math.PI/180)*(0,ba.X1)(Ni((0,Wn.zc)(_e(0)),ae),we).width:0,Ft=Math.sin((J>=0?J:J*-1)*Math.PI/180)*pt-Pe;return[Math.round(as.gD*hn.Z.pxRatio),dt,Ft,Math.max(0,It-he)]}function Vo(w,J,ae){if(!w?.length)return{warn:"No data in response"};const he=w.length===1?(0,sa.Y3)(w[0],w[0].fields.findIndex(It=>It.type===Nt.fS.time)):(0,sa._9)({frames:w});if(!he)return{warn:"Unable to join data"};let Pe;if(ae.colorByField&&(Pe=(0,Va.findField)(he,ae.colorByField),!Pe))return{warn:"Color field not found"};let xe;if(ae.xField&&(xe=(0,Va.findField)(he,ae.xField),!xe))return{warn:"Configured x field not found"};let we,je,_e=[];for(const It of he.fields)if(It!==xe)switch(It.type){case Nt.fS.string:we||(we=It);break;case Nt.fS.time:je||(je=It);break;case Nt.fS.number:{const Ft={...It,state:{...It.state,seriesIndex:_e.length},config:{...It.config,custom:{...It.config.custom,stacking:{group:"_",mode:ae.stacking}}},values:It.values.map(St=>Number.isFinite(St)||St==null?St:null)};ae.stacking===at.o0.Percent&&(Ft.config.unit="percentunit",Ft.display=(0,ra.U_)({field:Ft,theme:J})),_e.push(Ft)}}let pt=xe;if(pt||(pt=we||je),!pt)return{warn:"Bar charts requires a string or time field"};if(!_e.length)return{warn:"No numeric fields found"};if(Pe&&_e.length>1){const It=_e.find(Ft=>Ft!==Pe);It&&(_e=[It])}if(lc(ae.legend)){const It=ae.legend.sortBy.toLowerCase(),Ft=ae.legend.calcs??[It];_e=(0,B.orderBy)(_e,St=>(0,Aa.Kx)({field:St,reducers:Ft})[It],ae.legend.sortDesc?"desc":"asc")}let dt=_e;return ae.stacking===at.o0.Percent&&(dt=_e.map(It=>{const Ft=he.fields.find(Xt=>Xt.name===It.name),St={...It,config:{...Ft.config},values:It.values};return St.display=(0,ra.U_)({field:St,theme:J}),St}),dt.unshift(pt)),_e.unshift(pt),{aligned:he,colorByField:Pe,viz:[{length:pt.values.length,fields:_e}],legend:{fields:dt,length:pt.values.length}}}const lc=w=>Boolean(w?.sortBy&&w.sortDesc!==null),zo=10,_a=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(w,J)=>J.text?.valueSize===w.text?.valueSize],eo=({data:w,options:J,fieldConfig:ae,width:he,height:Pe,timeZone:xe,id:we})=>{const je=(0,ue.l4)(),{eventBus:_e}=(0,ma.R9)(),pt=(0,I.useRef)(void 0),dt=(0,I.useRef)(!1),[It,Ft]=(0,I.useState)(void 0),[St,Xt]=(0,I.useState)(null),[cn,qt]=(0,I.useState)(null),[Ut,gn]=(0,I.useState)(null),[nn,Sn]=(0,I.useState)(!1),[Kn,Bn]=(0,I.useState)(!1),Yn=()=>{dt.current=!1,Xt(null),Bn(!1)},ca=()=>{dt.current=!dt.current,Bn(dt.current)},na=(0,I.useRef)(),Da=(0,I.useRef)(),Pa=(0,I.useMemo)(()=>Vo(w.series,je,J),[w.series,je,J]),xa="viz"in Pa?Pa:null;Da.current=xa?.colorByField;const Ss=(0,I.useRef)(1e4);(0,I.useMemo)(()=>{Ss.current++},[J]);const Qa=(0,I.useMemo)(()=>{const ua=xa?.viz[0],Ua=na.current;return ua&&Ua&&(0,vs.Ch)(ua,Ua,!0)||Ss.current++,na.current=ua,(w.structureRev??0)+Ss.current},[xa,w.structureRev]),Ea=(0,I.useMemo)(()=>!J.orientation||J.orientation===_t.wm.Auto?he<Pe?_t.wm.Horizontal:_t.wm.Vertical:J.orientation,[he,Pe,J.orientation]),Ja=(0,I.useMemo)(()=>{if(J.xTickLabelMaxLength)return J.xTickLabelMaxLength;{const ua=J.xTickLabelRotation,Ua=(0,ba.X1)("M",as.gD).width;return Pe/2/(Math.sin((ua>=0?ua:ua*-1)*Math.PI/180)*Ua)-3}},[Pe,J.xTickLabelRotation,J.xTickLabelMaxLength]);if("warn"in Pa)return I.createElement(Es.Z,{panelId:we,fieldConfig:ae,data:w,message:Pa.warn,needsNumberField:!0});const os=(ua,Ua,Xa)=>{const Bs=Ua==null?null:ua.fields[Ua];if(Bs){const te=(0,wt.CZ)(Bs,ua);Ua=Pa.aligned.fields.findIndex(ge=>te===(0,wt.CZ)(ge,Pa.aligned))}const ps=J.fullHighlight&&J.stacking!==at.o0.None?at.f3.Multi:J.tooltip.mode,W=J.tooltip.mode===at.f3.Multi?J.tooltip.sort:at.As.None;return I.createElement(I.Fragment,null,Kn&&I.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},I.createElement(Yt.P,{onClick:Yn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),I.createElement(yn.H,{data:Pa.aligned,rowIndex:Xa,columnIndex:Ua,sortOrder:W,mode:ps}))},Ys=ua=>{const{legend:Ua}=J;if(!ua||Ua.showLegend===!1)return null;if(Pa.colorByField){const Xa=(0,un.$m)([Pa.colorByField],je);if(Xa?.length)return I.createElement(ms.AY.Legend,{placement:Ua.placement},I.createElement(Ya.l,{placement:Ua.placement,items:Xa,displayMode:Ua.displayMode}))}return I.createElement(Is.l,{data:[Pa.legend],config:ua,maxHeight:"35%",maxWidth:"60%",...J.legend})},Ms=(ua,Ua)=>na.current.fields[ua].values[Ua];let Qs,_s=1;if(Pa.colorByField){const ua=Pa.colorByField,Ua=ua.display;_s=(ua.config.custom.fillOpacity??100)/100,Qs=(Xa,Bs)=>Ua(Da.current?.values[Bs]).color}else na.current.fields.some(Ua=>Ua.config.custom?.gradientMode===at.FI.Scheme&&Ua.config.color?.mode===nt.S.Thresholds||Ua.config.mappings?.some(Bs=>Bs.type==="value"?Object.values(Bs.options).some(ps=>ps.color!=null):Bs.options.result.color!=null))&&(_s=(na.current.fields.find(Xa=>Xa.type===Nt.fS.number).config.custom.fillOpacity??100)/100,Qs=(Xa,Bs)=>{let ps=na.current.fields[Xa];return ps.display(ps.values[Bs]).color});const Na=(ua,Ua,Xa)=>{const{barWidth:Bs,barRadius:ps=0,showValue:W,groupWidth:te,stacking:ge,legend:Oe,tooltip:Ke,text:ot,xTickLabelRotation:Rt,xTickLabelSpacing:en,fullHighlight:Qt}=J;return Nm({frame:ua,getTimeRange:Xa,timeZone:xe,theme:je,timeZones:[xe],eventBus:_e,orientation:Ea,barWidth:Bs,barRadius:ps,showValue:W,groupWidth:te,xTickLabelRotation:Rt,xTickLabelMaxLength:Ja,xTickLabelSpacing:en,stacking:ge,legend:Oe,tooltip:Ke,text:ot,rawValue:Ms,getColor:Qs,fillOpacity:_s,allFrames:Pa.viz,fullHighlight:Qt})};return I.createElement(ws.d,{theme:je,frames:Pa.viz,prepConfig:Na,propsToDiff:_a,preparePlotFrame:ua=>ua[0],renderLegend:Ys,legend:J.legend,timeZone:xe,timeRange:{from:1,to:1},structureRev:Qa,width:he,height:Pe},ua=>(pt.current!==ua&&(pt.current=kt({config:ua,onUPlotClick:ca,setFocusedSeriesIdx:qt,setFocusedPointIdx:gn,setCoords:Xt,setHover:Ft,isToolTipOpen:dt,isActive:nn,setIsActive:Sn})),J.tooltip.mode===at.f3.None?null:I.createElement(Gs.h_,null,It&&St&&cn&&I.createElement(Ir.S,{position:{x:St.viewport.x,y:St.viewport.y},offset:{x:zo,y:zo},allowPointerEvents:dt.current},os(Pa.viz[0],cn,Ut)))))};var rr=e(52081),lo=e(2594),Xd=e(58255);const Ui=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],gl=w=>{let J=w.value??0;const ae=J<0;ae&&(J*=-1);let he=Ui[0];for(const we of Ui)if(he=we,J<=he.value)break;const Pe=we=>{w.onChange(we*(ae?-1:1))},xe=()=>{w.onChange(w.value*-1)};return I.createElement(rr.Lh,null,I.createElement(lo.S,{value:he.value,options:Ui,onChange:Pe}),J!==0&&I.createElement(tn.u,{content:"Require space from the right side",placement:"top"},I.createElement("div",null,I.createElement(Xd.X,{value:ae,onChange:xe,label:"RTL"}))))};var xs=e(26410);class Pr{getListWithDefaults(J){return J.getListAppender({name:xs.y.BarChart,pluginId:"barchart",options:{showValue:at.Jp.Never,legend:{calcs:[],displayMode:at.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ae=>{ae.options.barWidth=.8}}})}getSuggestionsForData(J){const ae=this.getListWithDefaults(J),{dataSummary:he}=J;he.frameCount===1&&(!he.hasNumberField||!he.hasStringField||he.rowCountTotal>50||(ae.append({name:xs.y.BarChart}),he.numberFieldCount>1&&(ae.append({name:xs.y.BarChartStacked,options:{stacking:at.o0.Normal}}),ae.append({name:xs.y.BarChartStackedPercent,options:{stacking:at.o0.Percent}})),ae.append({name:xs.y.BarChartHorizontal,options:{orientation:_t.wm.Horizontal}}),he.numberFieldCount>1&&(ae.append({name:xs.y.BarChartHorizontalStacked,options:{stacking:at.o0.Normal,orientation:_t.wm.Horizontal}}),ae.append({name:xs.y.BarChartHorizontalStackedPercent,options:{orientation:_t.wm.Horizontal,stacking:at.o0.Percent}}))))}}const cc=new le.c(eo).useFieldConfig({standardOptions:{[Ae.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:nt.S.PaletteClassic}}},useCustomConfig:w=>{const J=ic;w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:J.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:J.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:An.q.fillGradient[0].value,settings:{options:An.q.fillGradient}}),w.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:at.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:at.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),w.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:at.i3.Off},settings:{options:An.q.thresholdsDisplayModes},editor:Ps.F,override:Ps.F,process:ct.kG,shouldApply:()=>!0}),Fn.r(w,J,!1),Gn.B(w)}}).setPanelOptions((w,J)=>{const ae=Vo(J.data,be.v.theme2,J.options??{});let he="First string or time field";const Pe="viz"in ae?ae.viz[0]:void 0;if(Pe?.fields?.length){const xe=Pe.fields[0];he+=` (${(0,wt.CZ)(xe,Pe)})`}w.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:he}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:_t.wm.Auto,label:"Auto"},{value:_t.wm.Horizontal,label:"Horizontal"},{value:_t.wm.Vertical,label:"Vertical"}]},defaultValue:Qr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Qr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:xe=>xe.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Qr.xTickLabelSpacing,editor:gl}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:at.Jp.Auto,label:"Auto"},{value:at.Jp.Always,label:"Always"},{value:at.Jp.Never,label:"Never"}]},defaultValue:Qr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:An.q.stacking},defaultValue:Qr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Qr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(xe,we)=>xe.stacking&&xe.stacking!==at.o0.None?!1:Ho(we)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Qr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Qr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Qr.fullHighlight}),w.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!J.options?.fullHighlight||J.options?.stacking===at.o0.None)&&$n.L(w),Ra.J(w),ts.Z(w,!1)}).setSuggestionsSupplier(new Pr);function Ho(w){let J=0;if(w)for(const ae of w)for(const he of ae.fields)he.type===Nt.fS.number&&J++;return J}var pl=e(50954),ko=e(30383);const hl=w=>(0,pl.rD)(w);var qd=e(63992);const eu=Object.freeze([0,0]),Go={displayMode:at.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:at.M8.Color};class dc{getSuggestionsForData(J){const{dataSummary:ae}=J;if(!ae.hasData||!ae.hasNumberField)return;const he=J.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ae.numberFieldCount>50||(ae.hasStringField&&ae.frameCount===1&&ae.rowCountTotal<30?(he.append({name:xs.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:at.QH.Basic,orientation:_t.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),he.append({name:xs.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:at.QH.Lcd,orientation:_t.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(he.append({name:xs.y.BarGaugeBasic,options:{displayMode:at.QH.Basic,orientation:_t.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),he.append({name:xs.y.BarGaugeLCD,options:{displayMode:at.QH.Lcd,orientation:_t.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Do=new le.c(qd.M).useFieldConfig().setPanelOptions(w=>{(0,ko.j)(w),(0,ko.h)(w),ts.Z(w),w.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:at.QH.Gradient,label:"Gradient"},{value:at.QH.Lcd,label:"Retro LCD"},{value:at.QH.Basic,label:"Basic"}]},defaultValue:Go.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:at.M8.Color,label:"Value color"},{value:at.M8.Text,label:"Text color"},{value:at.M8.Hidden,label:"Hidden"}]},defaultValue:Go.valueMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Go.showUnfilled,showIf:J=>J.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Go.minVizWidth,showIf:J=>J.orientation===_t.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Go.minVizHeight,showIf:J=>J.orientation===_t.wm.Horizontal})}).setPanelChangeHandler(pl.ZH).setMigrationHandler(hl).setSuggestionsSupplier(new dc);var to=e(56703),jo=e(76095),di=e(68948),wi=e(99375),ui=e(41611),tu=e(41213),Wi=e(10092),mo=e(16514);const mi=w=>J=>{const ae=w.visualization.getColorByName(J?.color||mo.Jx);return{markerTriangle:T.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${ae};
      `,markerBar:T.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${ae};
      `}};var uc=e(55986),nu=e(53165),au=e(94270),Hs=e(24799),mc=e(97379),su=e(63619),vl=e(24357),fc=e(70659);const El=I.forwardRef(({annotation:w,onSave:J,onDismiss:ae,timeFormatter:he,className:Pe,...xe},we)=>{const je=(0,ue.wW)(Hr),_e=(0,ma.R9)(),pt=(0,I.useRef)(null);(0,nu.Z)(pt,()=>{ae()});const[dt,It]=(0,uc.default)(async Kn=>{const Bn=await _e.onAnnotationCreate(Kn);return J&&J(),Bn}),[Ft,St]=(0,uc.default)(async Kn=>{const Bn=await _e.onAnnotationUpdate(Kn);return J&&J(),Bn}),Xt=w.id!==void 0,cn=w.time!==w.timeEnd,qt=Xt?St:It,Ut=Xt?Ft:dt,gn=cn?`${he(w.time)} - ${he(w.timeEnd)}`:he(w.time),nn=({tags:Kn,description:Bn})=>{qt({id:w.id,tags:Kn,description:Bn,from:Math.round(w.time),to:Math.round(w.timeEnd)})},Sn=I.createElement("div",{ref:we,className:(0,T.cx)(je.editor,Pe),...xe},I.createElement("div",{className:je.header},I.createElement(rr.Lh,{justify:"space-between",align:"center"},I.createElement("div",{className:je.title},"Add annotation"),I.createElement("div",{className:je.ts},gn))),I.createElement("div",{className:je.editorForm},I.createElement(au.l,{onSubmit:nn,defaultValues:{description:w?.text,tags:w?.tags||[]}},({register:Kn,errors:Bn,control:Yn})=>I.createElement(I.Fragment,null,I.createElement(Hs.g,{label:"Description",invalid:!!Bn.description,error:Bn?.description?.message},I.createElement(mc.K,{...Kn("description",{required:"Annotation description is required"})})),I.createElement(Hs.g,{label:"Tags"},I.createElement(su.g,{control:Yn,name:"tags",render:({field:{ref:ca,onChange:na,...Da}})=>I.createElement(vl.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:na,tagOptions:fc.lK,tags:Da.value})})),I.createElement(rr.Lh,{justify:"flex-end"},I.createElement(De.zx,{size:"sm",variant:"secondary",onClick:ae,fill:"outline"},"Cancel"),I.createElement(De.zx,{size:"sm",type:"submit",disabled:Ut?.loading},Ut?.loading?"Saving":"Save"))))));return I.createElement(I.Fragment,null,I.createElement("div",{className:je.backdrop}),I.createElement("div",{ref:pt},Sn))});El.displayName="AnnotationEditorForm";const Hr=w=>({backdrop:T.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${w.zIndex.navbarFixed};
    `,editorContainer:T.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:T.css`
      background: ${w.colors.background.primary};
      box-shadow: ${w.shadows.z3};
      z-index: ${w.zIndex.dropdown};
      border: 1px solid ${w.colors.border.weak};
      border-radius: ${w.shape.borderRadius()};
      width: 460px;
    `,editorForm:T.css`
      padding: ${w.spacing(1)};
    `,header:T.css`
      border-bottom: 1px solid ${w.colors.border.weak};
      padding: ${w.spacing(1.5,1)};
    `,title:T.css`
      font-weight: ${w.typography.fontWeightMedium};
    `,ts:T.css`
      font-size: ${w.typography.bodySmall.fontSize};
      color: ${w.colors.text.secondary};
    `}),gc=({onDismiss:w,onSave:J,timeZone:ae,data:he,selection:Pe,annotation:xe,style:we})=>{const je=(0,ue.l4)(),_e=(0,ue.wW)(ru),pt=(0,ue.wW)(mi),[dt,It]=(0,I.useState)(null),[Ft,St]=(0,I.useState)(null),Xt=(0,Wi.D)(dt,Ft,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let cn=he.fields[0];if(!cn)return null;const qt=cn.display||(0,ra.U_)({field:cn,timeZone:ae,theme:je}),Ut=Pe.min!==Pe.max;return I.createElement(Gs.h_,null,I.createElement(I.Fragment,null,I.createElement("div",{style:we},I.createElement("div",{className:(0,T.cx)(T.css`
                position: absolute;
                top: ${Pe.bbox.top}px;
                left: ${Pe.bbox.left}px;
                width: ${Pe.bbox.width}px;
                height: ${Pe.bbox.height}px;
              `,Ut?_e.overlayRange(xe):_e.overlay(xe))},I.createElement("div",{ref:It,className:Ut?(0,T.cx)(pt(xe).markerBar,_e.markerBar):(0,T.cx)(pt(xe).markerTriangle,_e.markerTriangle)}))),I.createElement(El,{annotation:xe||{time:Pe.min,timeEnd:Pe.max},timeFormatter:gn=>qt(gn).text,onSave:J,onDismiss:w,ref:St,style:Xt.styles.popper,...Xt.attributes.popper})))},ru=w=>({overlay:J=>{const ae=w.visualization.getColorByName(J?.color||mo.Jx);return T.css`
        border-left: 1px dashed ${ae};
      `},overlayRange:J=>{const ae=w.visualization.getColorByName(J?.color||mo.Jx);return T.css`
        background: ${La.alpha(ae,.1)};
        border-left: 1px dashed ${ae};
        border-right: 1px dashed ${ae};
      `},markerTriangle:T.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:T.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),_r=({data:w,timeZone:J,config:ae,children:he})=>{const Pe=(0,I.useRef)(),[xe,we]=(0,I.useState)(),[je,_e]=(0,I.useState)(!1),[pt,dt]=(0,I.useState)(null),It=(0,tu.Z)(),Ft=(0,I.useCallback)(()=>{dt(null),Pe.current&&Pe.current.setSelect({top:0,left:0,width:0,height:0}),_e(!1)},[_e,dt]);(0,I.useLayoutEffect)(()=>{let Xt=!1;ae.addHook("init",qt=>{Pe.current=qt;const Ut=qt.hooks.setSelect;if(Ut)for(let gn=0;gn<Ut.length;gn++){const nn=Ut[gn];nn!==cn&&(Ut[gn]=(...Sn)=>{!Xt&&nn(...Sn)})}}),ae.addHook("syncRect",(qt,Ut)=>{It()&&we(Ut)});const cn=qt=>{Xt&&(_e(!0),dt({min:qt.posToVal(qt.select.left,"x"),max:qt.posToVal(qt.select.left+qt.select.width,"x"),bbox:{left:qt.select.left,top:0,height:qt.select.height,width:qt.select.width}}),Xt=!1)};ae.addHook("setSelect",cn),ae.setCursor({bind:{mousedown:(qt,Ut,gn)=>nn=>(Xt=nn.button===0&&(nn.metaKey||nn.ctrlKey),gn(nn),null),mouseup:(qt,Ut,gn)=>nn=>(Xt&&qt.select.width===0&&(qt.select.left=qt.cursor.left,qt.select.height=qt.bbox.height/window.devicePixelRatio),gn(nn),null)}})},[ae,we,It]);const St=(0,I.useCallback)(({coords:Xt})=>{if(!Pe.current||!xe||!Xt)return;const cn=Pe.current.posToVal(Xt.plotCanvas.x,"x");cn&&(dt({min:cn,max:cn,bbox:{left:Xt.plotCanvas.x,top:0,height:xe.height,width:0}}),_e(!0))},[xe]);return I.createElement(I.Fragment,null,je&&pt&&xe&&I.createElement(gc,{selection:pt,onDismiss:Ft,onSave:Ft,data:w,timeZone:J,style:{position:"absolute",top:`${xe.top}px`,left:`${xe.left}px`,width:`${xe.width}px`,height:`${xe.height}px`}}),he?he({startAnnotating:St}):null)};var yl=e(12115),Pl=e(66243),fi=e(77258),pc=e(82410),Fi=e(85419),Cl=e(63418),bo=e(8180),Dl=e(34719);const hc=({annotation:w,timeFormatter:J,canEdit:ae,canDelete:he,onEdit:Pe,onDelete:xe})=>{const we=(0,ue.wW)(ou),je=J(w.time),_e=J(w.timeEnd);let pt=w.text;const dt=w.tags;let It="",Ft,St,Xt=null;const cn=I.createElement("span",{className:we.time},Boolean(w.isRegion)?`${je} - ${_e}`:je);if(w.login&&w.avatarUrl&&(Ft=I.createElement("img",{className:we.avatar,alt:"Annotation avatar",src:w.avatarUrl})),w.alertId!==void 0&&w.newState){const qt=Pn.Z.getStateDisplayModel(w.newState);Xt=I.createElement("div",{className:we.alertState},I.createElement("i",{className:qt.stateClass},qt.text)),It=Pn.Z.getAlertAnnotationInfo(w)}else w.title&&(pt=w.title+"<br />"+(typeof pt=="string"?pt:""));return(ae||he)&&(St=I.createElement("div",{className:we.editControls},ae&&I.createElement(bo.h,{name:"pen",size:"sm",onClick:Pe}),he&&I.createElement(bo.h,{name:"trash-alt",size:"sm",onClick:xe}))),I.createElement("div",{className:we.wrapper},I.createElement("div",{className:we.header},I.createElement(rr.Lh,{justify:"space-between",align:"center",spacing:"md"},I.createElement("div",{className:we.meta},I.createElement("span",null,Ft,Xt),cn),St)),I.createElement("div",{className:we.body},pt&&I.createElement("div",{dangerouslySetInnerHTML:{__html:Cl.QX.sanitize(pt)}}),It,I.createElement(I.Fragment,null,I.createElement(rr.Lh,{spacing:"xs",wrap:!0},dt?.map((qt,Ut)=>I.createElement(Dl.V,{name:qt,key:`${qt}-${Ut}`}))))))};hc.displayName="AnnotationTooltip";const ou=w=>({wrapper:T.css`
      max-width: 400px;
    `,commentWrapper:T.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:T.css`
      padding: ${w.spacing(.5,1)};
      border-bottom: 1px solid ${w.colors.border.weak};
      font-size: ${w.typography.bodySmall.fontSize};
      display: flex;
    `,meta:T.css`
      display: flex;
      justify-content: space-between;
    `,editControls:T.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:T.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${w.spacing(1)};
    `,alertState:T.css`
      padding-right: ${w.spacing(1)};
      font-weight: ${w.typography.fontWeightMedium};
    `,time:T.css`
      color: ${w.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:T.css`
      padding: ${w.spacing(1)};

      a {
        color: ${w.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),vc=6,Rr={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function bl({annotation:w,timeZone:J,width:ae}){const{canAddAnnotations:he,canEditAnnotations:Pe,canDeleteAnnotations:xe,...we}=(0,ma.R9)(),je=(0,ue.wW)(mi),_e=(0,ue.wW)(fo),[pt,dt]=(0,I.useState)(!1),[It,Ft]=(0,I.useState)(!1),[St,Xt]=(0,I.useState)(null),[cn,qt]=(0,I.useState)(null),[Ut,gn]=(0,I.useState)(null),nn=(0,I.useRef)(),Sn=(0,Wi.D)(St,cn,Rr),Kn=(0,Wi.D)(St,Ut,Rr),Bn=(0,I.useCallback)(()=>{Ft(!0),dt(!1)},[Ft,dt]),Yn=(0,I.useCallback)(()=>{we.onAnnotationDelete&&we.onAnnotationDelete(w.id)},[w,we]),ca=(0,I.useCallback)(()=>{nn.current&&clearTimeout(nn.current),dt(!0)},[dt]),na=(0,I.useCallback)(()=>{nn.current&&clearTimeout(nn.current)},[]),Da=(0,I.useCallback)(()=>{nn.current=setTimeout(()=>{dt(!1)},100)},[dt]),Pa=(0,I.useCallback)(Ja=>(0,fi.dq)(Ja,{format:pc.U6.fullDate,timeZone:J}),[J]),xa=(0,I.useCallback)(()=>I.createElement(hc,{annotation:w,timeFormatter:Pa,onEdit:Bn,onDelete:Yn,canEdit:Pe(w.dashboardUID),canDelete:xe(w.dashboardUID)}),[Pe,xe,Yn,Bn,Pa,w]),Ss=Boolean(w.isRegion)&&ae>vc;let Qa=`${ae/2}px`,Ea=I.createElement("div",{className:je(w).markerTriangle,style:{left:Qa,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Ss&&(Ea=I.createElement("div",{className:je(w).markerBar,style:{width:`${ae}px`,transform:"translate3d(0,-50%, 0)"}})),I.createElement(I.Fragment,null,I.createElement("div",{ref:Xt,onMouseEnter:ca,onMouseLeave:Da,className:Ss?void 0:_e.markerWrapper,"data-testid":st.wl.pages.Dashboard.Annotations.marker},Ea),pt&&I.createElement(Gs.h_,null,I.createElement("div",{ref:qt,style:Sn.styles.popper,...Sn.attributes.popper,className:_e.tooltip,onMouseEnter:na,onMouseLeave:Da},xa())),It&&I.createElement(Gs.h_,null,I.createElement(El,{onDismiss:()=>Ft(!1),onSave:()=>Ft(!1),timeFormatter:Pa,annotation:w,ref:gn,style:Kn.styles.popper,...Kn.attributes.popper})))}const fo=w=>({markerWrapper:T.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:T.css`
      max-width: 400px;
    `,tooltip:T.css`
      ${(0,Fi.getTooltipContainerStyles)(w)};
      padding: 0;
    `}),Ws=({annotations:w,timeZone:J,config:ae})=>{const he=(0,ue.l4)(),Pe=(0,I.useRef)(),xe=(0,I.useRef)();(0,I.useEffect)(()=>{const _e=[];for(const pt of w)_e.push(new yl.U(pt));return xe.current=_e,()=>{xe.current=[]}},[w]),(0,I.useLayoutEffect)(()=>{ae.addHook("init",_e=>{Pe.current=_e}),ae.addHook("draw",_e=>{if(!xe.current)return null;const pt=_e.ctx;if(!pt)return;pt.save(),pt.beginPath(),pt.rect(_e.bbox.left,_e.bbox.top,_e.bbox.width,_e.bbox.height),pt.clip();const dt=(It,Ft)=>{pt.beginPath(),pt.lineWidth=2,pt.strokeStyle=Ft,pt.setLineDash([5,5]),pt.moveTo(It,_e.bbox.top),pt.lineTo(It,_e.bbox.top+_e.bbox.height),pt.stroke(),pt.closePath()};for(let It=0;It<xe.current.length;It++){const Ft=xe.current[It];for(let St=0;St<Ft.length;St++){const Xt=Ft.get(St);if(!Xt.time)continue;let cn=_e.valToPos(Xt.time,"x",!0);const qt=he.visualization.getColorByName(Xt.color);if(dt(cn,qt),Xt.isRegion&&Xt.timeEnd){let Ut=_e.valToPos(Xt.timeEnd,"x",!0);dt(Ut,qt),pt.fillStyle=La.alpha(qt,.1),pt.rect(cn,_e.bbox.top,Ut-cn,_e.bbox.height),pt.fill()}}}pt.restore()})},[ae,he]);const we=(0,I.useCallback)((_e,pt)=>{const It=new yl.U(_e).get(pt.fieldIndex);if(!It.time||!Pe.current)return;let Ft=Pe.current.valToPos(It.time,"x");return Ft<0&&(Ft=0),{x:Ft,y:Pe.current.bbox.height/window.devicePixelRatio+4}},[]),je=(0,I.useCallback)((_e,pt)=>{let dt=0;const Ft=new yl.U(_e).get(pt.fieldIndex);if(Boolean(Ft.isRegion)&&Pe.current){let Xt=Pe.current.valToPos(Ft.time,"x"),cn=Pe.current.valToPos(Ft.timeEnd,"x");Xt<0&&(Xt=0),cn>Pe.current.bbox.width/window.devicePixelRatio&&(cn=Pe.current.bbox.width/window.devicePixelRatio),dt=cn-Xt}return I.createElement(bl,{annotation:Ft,timeZone:J,width:dt})},[J]);return I.createElement(Pl.T,{id:"annotations",config:ae,events:w,renderEventMarker:je,mapEventToXYCoords:we})};var Ec=e(65788),iu=e(17650),yc=e(65987),xl=e(14391),Wr=e(42044),$i=e(30909);const no=({data:w,config:J,onClose:ae,timeZone:he,replaceVariables:Pe,...xe})=>{const we=(0,I.useRef)(),[je,_e]=(0,I.useState)(null),[pt,dt]=(0,I.useState)(null),[It,Ft]=(0,I.useState)(!1),St=(0,I.useCallback)(()=>{Ft(!0)},[Ft]),Xt=(0,I.useCallback)(()=>{Ft(!1)},[Ft]),cn=(0,I.useCallback)(()=>{(0,Rs.Zp)("ContextMenuPlugin",!1,"clearing click selection"),dt(null)},[dt]);(0,I.useLayoutEffect)(()=>{let Ut;const gn=nn=>{let Sn={viewport:{x:nn.clientX,y:nn.clientY},plotCanvas:{x:0,y:0}};Ut&&(Sn={...Sn,plotCanvas:{x:nn.clientX-Ut.left,y:nn.clientY-Ut.top}}),_e(Sn)};J.addHook("syncRect",(nn,Sn)=>{Ut=Sn}),J.addHook("init",nn=>{const Sn=nn.over;we.current=Sn||void 0,we.current?.addEventListener("mousedown",gn),(0,Rs.Zp)("ContextMenuPlugin",!1,"init");let Kn=!1,Bn=Array.from(nn.root.querySelectorAll(".u-cursor-pt"));we.current?.addEventListener("mousedown",()=>{Kn=!0}),we.current?.addEventListener("mousemove",()=>{Kn=!1}),we.current?.addEventListener("mouseup",Yn=>{if(!Kn||Yn.metaKey||Yn.ctrlKey){dt(null);return}Kn=!0,Yn.target instanceof HTMLElement&&(Yn.target.classList.contains("u-cursor-pt")||((0,Rs.Zp)("ContextMenuPlugin",!1,"canvas click"),dt({seriesIdx:null,dataIdx:null}))),St()}),Bn.length>0&&Bn.forEach((Yn,ca)=>{Yn.addEventListener("click",()=>{const na=ca+1,Da=nn.cursor.idx;(0,Rs.Zp)("ContextMenuPlugin",!1,na,Da),dt({seriesIdx:na,dataIdx:Da??null})})})})},[J,St,_e,dt]);const qt=(0,I.useMemo)(()=>xe.defaultItems?xe.defaultItems.map(Ut=>({...Ut,items:Ut.items.map(gn=>({...gn,onClick:nn=>{je&&gn.onClick?.(nn,{coords:je})}}))})):[],[je,xe.defaultItems]);return I.createElement(I.Fragment,null,I.createElement(Ec.Global,{styles:Ec.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),It&&je&&I.createElement(lu,{data:w,frames:xe.frames,defaultItems:qt,timeZone:he,selection:{point:pt,coords:je},replaceVariables:Pe,onClose:()=>{cn(),Xt(),ae&&ae()}}))},lu=({selection:w,timeZone:J,defaultItems:ae,replaceVariables:he,data:Pe,...xe})=>{const we=(0,I.useRef)(null),je=()=>{xe.onClose&&xe.onClose()};(0,iu.Z)(we,()=>{je()});const _e=Pe.fields[0];if(!_e)return null;const pt=ae?[...ae]:[];let dt=()=>null;if(w.point){const{seriesIdx:Ft,dataIdx:St}=w.point,Xt=_e.display;if(Ft&&St!==null){const cn=Pe.fields[Ft],qt=cn.display(cn.values[St]);cn.config.links&&cn.config.links.length>0&&cn.getLinks&&pt.push({items:cn.getLinks({valueRowIndex:St}).map(gn=>({label:gn.title,ariaLabel:gn.title,url:gn.href,target:gn.target,icon:gn.target==="_self"?"link":"external-link-alt",onClick:gn.onClick}))}),dt=()=>I.createElement(yc.b,{timestamp:Xt(_e.values[St]).text,displayValue:qt,seriesColor:qt.color,displayName:(0,wt.CZ)(cn,Pe,xe.frames)})}}const It=()=>pt?.map((Ft,St)=>I.createElement(xl.k,{key:`${Ft.label}${St}`,label:Ft.label},(Ft.items||[]).map(Xt=>I.createElement(Wr.s,{key:Xt.label,url:Xt.url,label:Xt.label,target:Xt.target,icon:Xt.icon,active:Xt.active,onClick:Xt.onClick}))));return I.createElement($i.x,{renderMenuItems:It,renderHeader:dt,x:w.coords.viewport.x,y:w.coords.viewport.y,onClose:je})};var Pc=e(45576),Ki=e(7211);const Cc=({timeZone:w,dataFrame:J,dataFrameFieldIndex:ae,config:he,getFieldLinks:Pe,exemplarColor:xe,clickedExemplarFieldIndex:we,setClickedExemplarFieldIndex:je})=>{const _e=(0,ue.wW)(Dc),[pt,dt]=(0,I.useState)(!1),[It,Ft]=(0,I.useState)(!1),[St,Xt]=I.useState(null),[cn,qt]=I.useState(null),{styles:Ut,attributes:gn}=(0,Wi.D)(St,cn,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),nn=(0,I.useRef)();(0,I.useEffect)(()=>{we?.fieldIndex===ae.fieldIndex&&we?.frameIndex===ae.frameIndex||Ft(!1)},[we,ae]);const Sn=()=>{const Da=[I.createElement("rect",{fill:xe,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),I.createElement("path",{fill:xe,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),I.createElement("path",{fill:xe,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),I.createElement("rect",{fill:xe,key:"rectangle",width:"5",height:"5"}),I.createElement("path",{fill:xe,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),I.createElement("path",{fill:xe,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return Da[ae.frameIndex%Da.length]},Kn=(0,I.useCallback)(()=>{we===void 0&&(nn.current&&clearTimeout(nn.current),dt(!0))},[dt,we]),Bn=()=>{Ft(!0)},Yn=(0,I.useCallback)(()=>{nn.current=setTimeout(()=>{dt(!1)},150)},[dt]),ca=(0,I.useCallback)(()=>{const Da=J.fields.find(Qa=>Qa.name==="traceID")||J.fields[0],Pa=[Da,...J.fields.filter(Qa=>Da!==Qa)],xa=Qa=>(0,fi.dq)(Qa,{format:pc.U6.fullDate,timeZone:w}),Ss=()=>{Ft(!1),dt(!1),je(void 0)};return I.createElement("div",{onMouseEnter:Kn,onMouseLeave:Yn,className:_e.tooltip,ref:qt,style:Ut.popper,...gn.popper},I.createElement("div",{className:_e.wrapper},It&&I.createElement(Ki.o,{onClick:Ss}),I.createElement("div",{className:_e.body},I.createElement("div",{className:_e.header},I.createElement("span",{className:_e.title},"Exemplars")),I.createElement("div",null,I.createElement("table",{className:_e.exemplarsTable},I.createElement("tbody",null,Pa.map((Qa,Ea)=>{const Ja=Qa.values[ae.fieldIndex],os=Qa.config.links?.length?Pe(Qa,ae.fieldIndex):void 0;return I.createElement("tr",{key:Ea},I.createElement("td",{valign:"top"},Qa.name),I.createElement("td",null,I.createElement("div",{className:_e.valueWrapper},I.createElement("span",null,Qa.type===Nt.fS.time?xa(Ja):Ja),os&&I.createElement(Pc.Z,{links:os}))))})))))))},[gn.popper,J.fields,Pe,ae,Kn,Yn,Ut.popper,_e,w,It,je]),na=he.getSeries().find(Da=>Da.props.dataFrameFieldIndex?.frameIndex===ae.frameIndex)?.props.lineColor;return I.createElement(I.Fragment,null,I.createElement("div",{ref:Xt,onClick:()=>{je(ae),Bn()},onMouseEnter:Kn,onMouseLeave:Yn,className:_e.markerWrapper,"aria-label":st.wl.components.DataSource.Prometheus.exemplarMarker},I.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:na},className:(0,T.cx)(_e.marble,(pt||It)&&_e.activeMarble)},Sn())),(pt||It)&&I.createElement(Gs.h_,null,ca()))},Dc=w=>{const J=w.isDark?w.v1.palette.dark2:w.v1.palette.white,ae=w.isDark?w.v1.palette.dark9:w.v1.palette.gray5,he=w.isDark?w.v1.palette.black:w.v1.palette.white,Pe=w.isDark?w.v1.palette.dark3:w.v1.palette.gray6;return{markerWrapper:T.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:T.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${w.v1.palette.red};
      pointer-events: none;
    `,wrapper:T.css`
      background: ${J};
      border: 1px solid ${ae};
      border-radius: ${w.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${he};
      padding: ${w.spacing(1)};
    `,exemplarsTable:T.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${w.components.panel.background};
      }

      tr {
        background-color: ${w.colors.background.primary};

        &:nth-child(even) {
          background-color: ${Pe};
        }
      }
    `,valueWrapper:T.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${w.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:T.css`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:T.css`
      background: ${ae};
      padding: 6px 10px;
      display: flex;
    `,title:T.css`
      font-weight: ${w.typography.fontWeightMedium};
      padding-right: ${w.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:T.css`
      font-weight: ${w.typography.fontWeightMedium};
      border-radius: ${w.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:T.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:T.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},bc=({exemplars:w,timeZone:J,getFieldLinks:ae,config:he,visibleSeries:Pe})=>{const xe=(0,I.useRef)(),[we,je]=(0,I.useState)();(0,I.useLayoutEffect)(()=>{he.addHook("init",dt=>{xe.current=dt})},[he]);const _e=(0,I.useCallback)((dt,It)=>{const Ft=dt.fields.find(gn=>gn.name===Nt.Ls),St=dt.fields.find(gn=>gn.name===Nt.M5);if(!Ft||!St||!xe.current)return;const Xt=Object.keys(xe.current.scales).find(gn=>!["x","y"].some(nn=>nn===gn))??ws.j,cn=xe.current.scales[Xt].min,qt=xe.current.scales[Xt].max;let Ut=St.values[It.fieldIndex];return cn!=null&&Ut<cn&&(Ut=cn),qt!=null&&Ut>qt&&(Ut=qt),{x:xe.current.valToPos(Ft.values[It.fieldIndex],"x"),y:xe.current.valToPos(Ut,Xt)}},[]),pt=(0,I.useCallback)((dt,It)=>{const Ft=Pe!==void 0?xc(Pe,dt,It):!0,St=Pe!==void 0?xf(dt,It,Pe):void 0;return Ft?I.createElement(Cc,{setClickedExemplarFieldIndex:je,clickedExemplarFieldIndex:we,timeZone:J,getFieldLinks:ae,dataFrame:dt,dataFrameFieldIndex:It,config:he,exemplarColor:St}):I.createElement(I.Fragment,null)},[he,J,ae,Pe,je,we]);return I.createElement(Pl.T,{config:he,id:"exemplars",events:w,renderEventMarker:pt,mapEventToXYCoords:_e})},Um=(w,J)=>{const ae=w.series.filter(Pe=>Pe.props.show),he=[];return J?.length&&ae.forEach(Pe=>{const xe=Pe.props?.dataFrameFieldIndex?.frameIndex,we=Pe.props?.dataFrameFieldIndex?.fieldIndex;if(xe!==void 0&&we!==void 0){const je=J[xe]?.fields[we];je?.labels&&he.push({labels:je.labels,color:Pe.props?.lineColor??""})}}),{labels:he,totalSeriesCount:w.series.length}},xf=(w,J,ae)=>{let he;return ae.labels.some(Pe=>{const xe=Object.keys(Pe.labels),we=w.fields.filter(je=>xe.find(_e=>_e===je.name));return we.length&&we.every((_e,pt,dt)=>{const It=_e.values[J.fieldIndex];return Pe.labels[_e.name]===It})?(he=Pe.color,!0):!1}),he},xc=(w,J,ae)=>{let he=!1;return w.labels.length===w.totalSeriesCount?he=!0:w.labels.some(Pe=>{const xe=Object.keys(Pe.labels);if(Object.keys(Pe.labels).length===0)he=!0;else{const we=J.fields.filter(je=>xe.find(_e=>_e===je.name));we.length&&(he=w.labels.some(je=>Object.keys(je.labels).every(_e=>{const pt=je.labels[_e];return we.find(dt=>dt.values[ae.fieldIndex]===pt)})))}return he}),he},co=({config:w,onChangeTimeRange:J})=>{const ae=(0,I.useRef)(),[he,Pe]=(0,I.useState)([]),[xe,we]=(0,I.useState)();if((0,I.useLayoutEffect)(()=>{w.addHook("init",St=>{ae.current=St}),w.addHook("setScale",St=>{Pe(St.data?.[0]??[]),we(St.scales.x??void 0)})},[w]),he.length<2||!J||!xe||!xe.time||!xe.min||!xe.max)return null;let je=0,_e=he.length-1;for(;je<=_e&&he[je]==null;)je++;for(;_e>=0&&he[_e]==null;)_e--;const pt=he[je],dt=he[_e],It=xe.min,Ft=xe.max;return pt==null||dt==null||pt<=Ft&&dt>=It?null:I.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},I.createElement("div",null,I.createElement("div",null,"Data outside time range"),I.createElement(De.zx,{onClick:St=>J({from:pt,to:dt}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};co.displayName="OutsideRangePlugin";var cu=e(86979),br=e(53004),Sc=e.n(br);const Yo=({step:w,y:J,dragBounds:ae,mapPositionToValue:he,formatValue:Pe,onChange:xe})=>{const we=(0,ue.l4)();let je=J,_e="none";J<(ae.top??0)&&(_e="top"),J>(ae.bottom??0)+22&&(_e="bottom"),_e==="bottom"&&(je=ae.bottom??J),_e==="top"&&(je=ae.top??J);const pt=typeof xe!="function",dt=(0,ue.wW)(Xt=>Vi(Xt,w,_e,pt)),[It,Ft]=(0,I.useState)(w.value),St=(0,I.useMemo)(()=>we.colors.getContrastText(we.visualization.getColorByName(w.color)),[w.color,we]);return I.createElement(Sc(),{axis:"y",grid:[1,1],disabled:pt,onStop:pt?B.noop:(Xt,cn)=>(xe(he(cn.lastY)),!1),onDrag:(Xt,cn)=>Ft(he(cn.lastY)),position:{x:0,y:je},bounds:ae},I.createElement("div",{className:dt.handle,style:{color:St}},I.createElement("span",{className:dt.handleText},Pe(It))))};Yo.displayName="ThresholdDragHandle";const Vi=(w,J,ae,he)=>{const Pe=w.visualization.getColorByName(J.color),xe=du(ae),we=ae!=="none";return{handle:T.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Pe};
      cursor: ${he?"initial":"grab"};
      border-top-right-radius: ${w.shape.borderRadius(1)};
      border-bottom-right-radius: ${w.shape.borderRadius(1)};
      ${we&&T.css`
        margin-top: 0;
        border-radius: ${w.shape.borderRadius(1)};
      `}
      background: ${Pe};
      font-size: ${w.typography.bodySmall.fontSize};
      &:before {
        ${xe};
      }
    `,handleText:T.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function du(w){const J=w==="none",ae=he=>T.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${he}px;
    border-right-color: inherit;
    border-top: ${he}px solid transparent;
    border-bottom: ${he}px solid transparent;
  `;return J?T.css`
      ${ae(9)};
      left: -9px;
    `:w==="top"?T.css`
      ${ae(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:w==="bottom"?T.css`
      ${ae(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Mc=60,Sl=({config:w,fieldConfig:J,onThresholdsChange:ae})=>{const he=(0,I.useRef)(),[Pe,xe]=(0,I.useState)(0);(0,I.useLayoutEffect)(()=>{w.setPadding([0,Mc,0,0]),w.addHook("init",je=>{he.current=je}),w.addHook("draw",()=>{xe(je=>je+1)})},[w]);const we=(0,I.useMemo)(()=>{const je=he.current;if(!je)return null;const _e=J.defaults.thresholds;if(!_e)return null;const pt=(0,cu.z)(J.defaults),dt=J.defaults.decimals,It=[];for(let Ft=0;Ft<_e.steps.length;Ft++){const St=_e.steps[Ft],Xt=je.valToPos(St.value,pt);if(Number.isNaN(Xt)||!Number.isFinite(Xt))continue;const cn=je.bbox.height/window.devicePixelRatio,Ut=typeof ae=="function"?nn=>{const Sn=[..._e.steps.slice(0,Ft),..._e.steps.slice(Ft+1),{..._e.steps[Ft],value:nn}].sort((Kn,Bn)=>Kn.value-Bn.value);ae({..._e,steps:Sn})}:void 0,gn=I.createElement(Yo,{key:`${St.value}-${Ft}`,step:St,y:Xt,dragBounds:{top:0,bottom:cn},mapPositionToValue:nn=>je.posToVal(nn,pt),formatValue:nn=>(0,Wn.Cf)(pt)(nn,dt).text,onChange:Ut});It.push(gn)}return It},[Pe,J,ae]);return he.current?I.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(he.current.bbox.left+he.current.bbox.width)/window.devicePixelRatio}px`,top:`${he.current.bbox.top/window.devicePixelRatio}px`,width:`${Mc}px`,height:`${he.current.bbox.height/window.devicePixelRatio}px`}},we):null};Sl.displayName="ThresholdControlsPlugin";var Tc=e(88971),Oc=e(49052),uu=e(45778),Ic=e(45389);function zi(w,J,ae,he){if(!w?.length)return null;let Pe=he!=null;he!=null&&he>0&&(w=[{...w[0],fields:[w[0].fields[he],...w[0].fields.filter((je,_e)=>_e!==he)]}]);for(let je of w)for(let _e of je.fields)_e.type===Nt.fS.time&&typeof _e.values[0]!="number"&&(_e.values=(0,Oc.p8)(_e,{destinationType:Nt.fS.time}).values);let xe;const we=[];for(let je of w){const _e=[];let pt=!1,dt=!1,It=Pe?je:(0,uu.w)({frame:je,refFieldPseudoMin:ae?.from.valueOf(),refFieldPseudoMax:ae?.to.valueOf()});const Ft=(0,Ic.I)(It).fields;for(let St=0;St<Ft?.length;St++){const Xt=Ft[St];switch(Xt.type){case Nt.fS.time:pt=!0,_e.push(Xt);break;case Nt.fS.number:dt=Pe?St>0:!0,xe={...Xt,values:Xt.values.map(Ut=>Number.isFinite(Ut)||Ut==null?Ut:null)},_e.push(xe);break;case Nt.fS.string:xe={...Xt,values:Xt.values},_e.push(xe);break;case Nt.fS.boolean:dt=!0;const cn=Xt.config?.custom??{},qt={...Xt.config,max:1,min:0,custom:cn};cn.lineInterpolation!==at.KC.StepBefore&&(cn.lineInterpolation=at.KC.StepAfter),xe={...Xt,config:qt,type:Nt.fS.number,values:Xt.values.map(Ut=>Ut==null?Ut:Boolean(Ut)?1:0)},(0,Wn.br)(qt.unit)||(qt.unit="bool",xe.display=(0,ra.U_)({field:xe,theme:J})),_e.push(xe);break}}(Pe||pt)&&dt&&we.push({...je,length:It.length,fields:_e})}return we.length?(wm(we,J,0),we):null}const wm=(w,J,ae)=>{let he=0;w.forEach(Pe=>{Pe.fields.forEach((xe,we)=>{we!==ae&&(xe.type===Nt.fS.number||xe.type===Nt.fS.boolean)&&(xe.state={...xe.state,seriesIndex:he++},xe.display=(0,ra.U_)({field:xe,theme:J}))})})};function Hi(w,J){return!w||!w.length?[J]:w.map(ae=>ae?.length?ae:J)}function Rc(w,J,ae,he){return w.fields.forEach(Pe=>{if(Pe.state?.origin?.frameIndex===void 0||J[Pe.state?.origin?.frameIndex]===void 0)return;const xe=[];for(const je of J[Pe.state?.origin?.frameIndex].fields)if(je.type===Nt.fS.string)if(Pe.values instanceof Tc.o){const _e={...je};_e.values=new Tc.o(je.values,Pe.values.getOrderArray()),xe.push(_e)}else xe.push(je);const we={fields:[...w.fields,...xe],length:w.fields.length+xe.length};Pe.getLinks=(0,jo.oB)(we,Pe,Pe.state.scopedVars,ae,he)}),w}const Wm=Object.freeze([1,0]);var Vr=(w=>(w.CandlesVolume="candles+volume",w.Candles="candles",w.Volume="volume",w))(Vr||{}),gi=(w=>(w.Candles="candles",w.OHLCBars="ohlcbars",w))(gi||{}),xo=(w=>(w.OpenClose="open-close",w.CloseClose="close-close",w))(xo||{});const ki={up:"green",down:"red",flat:"gray"},go={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:ki,fields:{},legend:{displayMode:at.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},po={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Ml(w,J,ae){const he=(0,Va.findField)(w,ae[J.key]);if(!he)for(const Pe of w.fields){const xe=(0,wt.CZ)(Pe,w).toLowerCase();if(J.defaults.includes(xe)||J.defaults.includes(Pe.name))return Pe}return he}function So(w,J,ae,he){if(!w?.length)return null;const Pe=J.fields??{},xe=w.length===1?(0,sa.Y3)(w[0],w[0].fields.findIndex(St=>St.type===Nt.fS.time)):(0,sa._9)({frames:w});if(!xe?.length)return null;const we={aligned:xe,frame:xe,names:{}},je=zi([xe],ae,he);if(!je)return null;const _e=we.frame=je[0],pt=_e.fields.findIndex(St=>St.type===Nt.fS.time);if(pt<0)return null;const dt=new Set;for(const St of Object.values(po)){const Xt=Ml(_e,St,Pe);Xt&&(we[St.key]=Xt,dt.add(Xt))}if(!we.open&&!we.close&&(we.open=_e.fields.find(St=>St.type===Nt.fS.number),we.open&&dt.add(we.open)),we.open&&!we.close&&!Pe.close){const St=we.open.values.slice(1);St.push(St[St.length-1]),we.close={...we.open,values:St,name:"Next open",state:void 0},dt.add(we.close),_e.fields.push(we.close),we.autoOpenClose=!0}if(we.close&&!we.open&&!Pe.open){const St=we.close.values.slice();St.unshift(St[0]),St.length=_e.length,we.open={...we.close,values:St,name:"Previous close",state:void 0},dt.add(we.open),_e.fields.push(we.open),we.autoOpenClose=!0}!we.high&&!Pe.high&&(we.high=we.open),!we.low&&!Pe.low&&(we.low=we.open),J.mode===Vr.Volume?(we.high&&(we.high!==we.open&&dt.delete(we.high),we.high=void 0),we.low&&(we.low!==we.open&&dt.delete(we.low),we.low=void 0)):J.mode===Vr.Candles&&we.volume&&(dt.delete(we.volume),we.volume=void 0);for(const St of Object.values(po)){const Xt=we[St.key];Xt&&(we.names[St.key]=(0,wt.CZ)(Xt,we.frame))}const It=_e.fields[pt],Ft=[It];J.includeAllFields?Ft.push(..._e.fields.filter(St=>St!==It)):Ft.push(...dt),we.frame={...we.frame,fields:Ft};for(let St=0;St<we.frame.fields.length;St++){const Xt=we.frame.fields[St];Xt.state={...Xt.state,seriesIndex:St-1,origin:{fieldIndex:St,frameIndex:0}}}return we}const{alpha:pi}=La;function mu(w){let{mode:J,candleStyle:ae,fields:he,colorStrategy:Pe,upColor:xe,downColor:we,flatColor:je,volumeAlpha:_e,flatAsUp:pt=!0}=w;const dt=J!==Vr.Volume&&he.high!=null&&he.low!=null,It=dt&&ae===gi.Candles,Ft=J!==Vr.Candles&&he.volume!=null;function St(Sn,Kn,Bn,Yn,ca){return Sn>0?Bn:Sn<0?Yn:ca?Bn:Kn}let Xt=0,cn=he.open,qt=he.high,Ut=he.low,gn=he.close,nn=he.volume;return Sn=>{let Kn,Bn,Yn,ca,na,Da;dt&&(Yn=new Path2D,Bn=new Path2D,Kn=new Path2D),Ft&&(ca=new Path2D,na=new Path2D,Da=new Path2D);let Pa=new Path2D,xa=Sn.ctx,Ss=Sn.data[Xt],Qa=Sn.data[cn],Ea=Sn.data[gn],Ja=dt?Sn.data[qt]:null,os=dt?Sn.data[Ut]:null,Ys=Ft?Sn.data[nn]:null,Ms=nn!=null?Math.round(Sn.valToPos(0,Sn.series[nn].scale,!0)):null,[Qs,_s]=Sn.series[0].idxs,Na=Sn.data[0],ua=Qa,Ua=Sn.bbox.width;if(Na.length>1){let te=null;for(let ge=0,Oe=1/0;ge<Na.length;ge++)if(ua[ge]!==void 0){if(te!=null){let Ke=Math.abs(Na[ge]-Na[te]);Ke<Oe&&(Oe=Ke,Ua=Math.abs(Sn.valToPos(Na[ge],"x",!0)-Sn.valToPos(Na[te],"x",!0)))}te=ge}}let Xa=Math.round(.6*Ua),Bs=2,ps=2;Xa<=12&&(Bs=ps=1);let W=Math.floor(Xa/2);for(let te=Qs;te<=_s;te++){let ge=Math.round(Sn.valToPos(Ss[te],"x",!0)),Oe=te===Qs?0:Math.sign(Ea[te]-Ea[te-1]),Ke=Math.sign(Ea[te]-Qa[te]);if(Ft){let ot=St(Pe===xo.CloseClose?Oe:Ke,Da,na,ca,te===Qs&&xo.CloseClose?!1:pt),Rt=Math.round(Sn.valToPos(Ys[te],Sn.series[nn].scale,!0));ot.rect(ge-W,Rt,Xa,Ms-Rt)}if(dt){let ot=St(Pe===xo.CloseClose?Oe:Ke,Yn,Bn,Kn,te===Qs&&xo.CloseClose?!1:pt),Rt=Math.round(Sn.valToPos(Ja[te],Sn.series[qt].scale,!0)),en=Math.round(Sn.valToPos(os[te],Sn.series[Ut].scale,!0));ot.rect(ge-Math.floor(Bs/2),Rt,Bs,en-Rt);let Qt=Math.round(Sn.valToPos(Qa[te],Sn.series[cn].scale,!0)),vn=Math.round(Sn.valToPos(Ea[te],Sn.series[gn].scale,!0));if(It){let bn=Math.min(Qt,vn),mn=Math.max(Qt,vn),xn=Math.max(1,mn-bn);ot.rect(ge-W,bn,Xa,xn),Pe===xo.CloseClose&&Ke>=0&&xn>ps*2&&Pa.rect(ge-W+ps,bn+ps,Xa-ps*2,xn-ps*2)}else ot.rect(ge-W,Qt,W,Bs),ot.rect(ge,vn,W,Bs)}}xa.save(),xa.rect(Sn.bbox.left,Sn.bbox.top,Sn.bbox.width,Sn.bbox.height),xa.clip(),Ft&&(xa.fillStyle=pi(xe,_e),xa.fill(na),xa.fillStyle=pi(we,_e),xa.fill(ca),xa.fillStyle=pi(je,_e),xa.fill(Da)),dt&&(xa.fillStyle=xe,xa.fill(Bn),xa.fillStyle=we,xa.fill(Kn),xa.fillStyle=je,xa.fill(Yn),xa.globalCompositeOperation="destination-out",xa.fill(Pa)),xa.restore()}}const fu=({data:w,id:J,timeRange:ae,timeZone:he,width:Pe,height:xe,options:we,fieldConfig:je,onChangeTimeRange:_e,replaceVariables:pt})=>{const{sync:dt,canAddAnnotations:It,onThresholdsChange:Ft,canEditThresholds:St,showThresholds:Xt,onSplitOpen:cn}=(0,ma.R9)(),qt=(ca,na)=>(0,ui.a_)({field:ca,rowIndex:na,splitOpenFn:cn,range:ae}),Ut=(0,ue.l4)(),gn=(0,I.useMemo)(()=>So(w.series,we,Ut,ae),[w.series,we,Ut,ae]),{renderers:nn,tweakScale:Sn,tweakAxis:Kn,shouldRenderPrice:Bn}=(0,I.useMemo)(()=>{let ca=(ps,W)=>ps,na=(ps,W)=>ps,Da={renderers:[],tweakScale:ca,tweakAxis:na,shouldRenderPrice:!1};if(!gn)return Da;const Pa=gn.names;if(!Object.keys(Pa).length)return Da;const{mode:xa,candleStyle:Ss,colorStrategy:Qa}=we,Ea={...ki,...we.colors};let{open:Ja,high:os,low:Ys,close:Ms,volume:Qs}=Pa;if(Ja==null||Ms==null)return Da;let _s=.5,Na=-1,ua=!1;if(Qs!=null&&xa!==Vr.Candles){let ps=gn.volume;if(ps!=null){ua=!0;let{fillOpacity:W}=ps.config.custom;W&&(_s=W/100),xa!==Vr.Volume&&(ps.config={...ps.config},ps.config.unit="short",ps.display=(0,ra.U_)({field:ps,theme:Ge.vc.theme2}),na=(te,ge)=>{if(ge.name===gn.volume?.name){let Oe=(Ke,ot)=>{let Rt=[],en=Ke.series[Na].max;for(let Qt=0;Qt<ot.length&&(Rt.push(ot[Qt]),!(ot[Qt]>en));Qt++);return Rt};te.space=20,te.filter=Oe,te.ticks={...te.ticks,filter:Oe}}return te},ca=(te,ge)=>(ge.name===gn.volume?.name&&(te.range=(Oe,Ke,ot)=>[0,ot*7]),te))}}let Ua=xa!==Vr.Volume&&os!=null&&Ys!=null;if(!Ua&&!ua)return Da;let Xa={},Bs=[];return Ua?Xa={open:Ja,high:os,low:Ys,close:Ms}:Bs.push(Ja,Ms),ua&&(Xa.volume=Qs,Xa.open=Ja,Xa.close=Ms),{shouldRenderPrice:Ua,renderers:[{fieldMap:Xa,indicesOnly:Bs,init:(ps,W)=>{Na=W.volume,ps.addHook("drawAxes",mu({mode:xa,fields:W,upColor:Ge.vc.theme2.visualization.getColorByName(Ea.up),downColor:Ge.vc.theme2.visualization.getColorByName(Ea.down),flatColor:Ge.vc.theme2.visualization.getColorByName(Ea.flat),volumeAlpha:_s,colorStrategy:Qa,candleStyle:Ss,flatAsUp:!0}))}}],tweakScale:ca,tweakAxis:na}},[we,w.structureRev,w.series.length]);if(!gn)return I.createElement(Es.Z,{panelId:J,fieldConfig:je,data:w,needsTimeField:!0,needsNumberField:!0});if(Bn)for(let ca in nn[0].fieldMap){let na=gn[ca];na.config={...na.config,custom:{...na.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const Yn=Boolean(It&&It());return I.createElement(di.p,{frames:[gn.frame],structureRev:w.structureRev,timeRange:ae,timeZone:he,width:Pe,height:xe,legend:we.legend,renderers:nn,tweakAxis:Kn,tweakScale:Sn,options:we},(ca,na)=>(na.fields.forEach(Da=>{Da.getLinks=(0,jo.oB)(na,Da,Da.state.scopedVars,pt,he)}),I.createElement(I.Fragment,null,I.createElement(wi.R,{config:ca,onZoom:_e}),I.createElement($e.i,{data:na,config:ca,mode:at.f3.Multi,sync:dt,timeZone:he}),w.annotations&&I.createElement(Ws,{annotations:w.annotations,config:ca,timeZone:he}),Yn?I.createElement(_r,{data:na,timeZone:he,config:ca},({startAnnotating:Da})=>I.createElement(no,{data:na,config:ca,timeZone:he,replaceVariables:pt,defaultItems:Yn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Pa,xa)=>{xa&&Da({coords:xa.coords})}}]}]:[]})):I.createElement(no,{data:na,config:ca,timeZone:he,replaceVariables:pt,defaultItems:[]}),w.annotations&&I.createElement(bc,{config:ca,exemplars:w.annotations,timeZone:he,getFieldLinks:qt}),(St&&Ft||Xt)&&I.createElement(Sl,{config:ca,fieldConfig:je,onThresholdsChange:St?Ft:void 0}),I.createElement(co,{config:ca,onChangeTimeRange:_e}))))};class Ac{getSuggestionsForData(J){const{dataSummary:ae}=J;if(!J.data?.series||!ae.hasData||ae.timeFieldCount<1||ae.numberFieldCount<2||ae.numberFieldCount>10)return;const he=So(J.data.series,go,be.v.theme2);if(!he||he.open===he.high&&he.open===he.low)return;J.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:xs.y.Candlestick,options:go,fieldConfig:{defaults:{},overrides:[]},score:he.autoOpenClose?_t._.Good:_t._.Best})}}const Lc=[{label:"Candles",value:Vr.Candles},{label:"Volume",value:Vr.Volume},{label:"Both",value:Vr.CandlesVolume}],Gi=[{label:"Candles",value:gi.Candles},{label:"OHLC Bars",value:gi.OHLCBars}],Fm=[{label:"Since Open",value:xo.OpenClose},{label:"Since Prior Close",value:xo.CloseClose}],$m=w=>w.type===Nt.fS.number;function hi(w,J,ae){let he="Auto ";if(ae){const Pe=ae[J.key];Pe?.config?(he+="= "+(0,wt.CZ)(Pe),Pe===ae?.open&&J.key!=="open"&&(he+=` (${J.defaults.join(",")})`)):he+=`(${J.defaults.join(",")})`}w.addFieldNamePicker({path:`fields.${J.key}`,name:J.name,description:J.description,settings:{filter:$m,placeholderText:he}})}const gu=new le.c(fu).useFieldConfig((0,to.F)(to.r)).setPanelOptions((w,J)=>{const ae=J.options??go,he=So(J.data,ae,be.v.theme2);w.addRadio({path:"mode",name:"Mode",description:"",defaultValue:go.mode,settings:{options:Lc}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:go.candleStyle,settings:{options:Gi},showIf:Pe=>Pe.mode!==Vr.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:go.colorStrategy,settings:{options:Fm}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:ki.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:ki.down}),hi(w,po.open,he),ae.mode!==Vr.Volume&&(hi(w,po.high,he),hi(w,po.low,he)),hi(w,po.close,he),ae.mode!==Vr.Candles&&hi(w,po.volume,he),w.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:go.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),Ra.J(w)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Ac);var Bc=e(49187),Qo=e(61962),Nc=e(19349),pu=e(69155);const Uc=w=>({dashlistSectionHeader:T.css`
    padding: ${w.spacing(.25,1)};
    margin-right: ${w.spacing(1)};
  `,dashlistSection:T.css`
    margin-bottom: ${w.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:T.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${w.colors.border.weak};
    margin-right: ${w.spacing(1)};
    padding: ${w.spacing(1)};

    &:hover {
      a {
        color: ${w.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:T.css`
    align-self: center;
    margin-right: 0px;
    color: ${w.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:T.css`
    color: ${w.colors.text.secondary};
    font-size: ${w.typography.bodySmall.fontSize};
    line-height: ${w.typography.body.lineHeight};
  `,dashlistTitle:T.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:T.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:T.css`
    position: relative;
    list-style: none;
  `,gridContainer:T.css`
    display: grid;
    gap: ${w.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${w.spacing(1)};
  `});async function hu(w,J){let ae=Promise.resolve([]);if(w.showStarred){const dt={limit:w.maxItems,starred:"true"};ae=(0,Te.i)().search(dt)}let he=Promise.resolve([]),Pe=[];if(w.showRecentlyViewed){let dt=await Le.Z.getDashboardOpened();Pe=(0,B.take)(dt,w.maxItems),he=(0,Te.i)().search({dashboardUIDs:Pe,limit:w.maxItems})}let xe=Promise.resolve([]);if(w.showSearch){const dt={limit:w.maxItems,query:J(w.query,{},"text"),folderIds:w.folderId,tag:w.tags.map(It=>J(It,{},"text")),type:"dash-db"};xe=(0,Te.i)().search(dt)}const[we,je,_e]=await Promise.all([ae,xe,he]);let pt=new Map;for(const dt of Pe){const It=_e.find(Ft=>Ft.uid===dt);It&&pt.set(dt,{...It,isRecent:!0})}return je.forEach(dt=>{dt.uid&&(pt.has(dt.uid)?pt.get(dt.uid).isSearchResult=!0:pt.set(dt.uid,{...dt,isSearchResult:!0}))}),we.forEach(dt=>{dt.uid&&(pt.has(dt.uid)?pt.get(dt.uid).isStarred=!0:pt.set(dt.uid,{...dt,isStarred:!0}))}),pt}function vu(w){const[J,ae]=(0,I.useState)(new Map),he=(0,Et.useDispatch)();(0,I.useEffect)(()=>{hu(w.options,w.replaceVariables).then(cn=>{ae(cn)})},[w.options,w.replaceVariables,w.renderCounter]);const Pe=async(cn,qt)=>{const{uid:Ut,title:gn,url:nn}=qt;cn.preventDefault(),cn.stopPropagation();const Sn=await(0,Mn.h4)().starDashboard(qt.uid,qt.isStarred),Kn=new Map(J);Kn.set(qt?.uid??"",{...qt,isStarred:Sn}),ae(Kn),he((0,Qo.OQ)({id:Ut??"",title:gn,url:nn,isStarred:Sn}))},[xe,we,je]=(0,I.useMemo)(()=>{const cn=[...J.values()];return[cn.filter(qt=>qt.isStarred).sort((qt,Ut)=>qt.title.localeCompare(Ut.title)),cn.filter(qt=>qt.isRecent),cn.filter(qt=>qt.isSearchResult).sort((qt,Ut)=>qt.title.localeCompare(Ut.title))]},[J]),{showStarred:_e,showRecentlyViewed:pt,showHeadings:dt,showSearch:It}=w.options,Ft=[{header:"Starred dashboards",dashboards:xe,show:_e},{header:"Recently viewed dashboards",dashboards:we,show:pt},{header:"Search",dashboards:je,show:It}],St=(0,ue.wW)(Uc),Xt=cn=>I.createElement("ul",null,cn.map(qt=>{let Ut=qt.url,gn={};if(w.options.keepTime){const nn=(0,Nc.$t)().timeRangeForUrl();gn.from=nn.from,gn.to=nn.to}return w.options.includeVars&&(gn={...gn,...(0,pu.c)()}),Ut=Bc.Cj.appendQueryToUrl(Ut,Bc.Cj.toUrlParams(gn)),Ut=(0,Ge.iE)().disableSanitizeHtml?Ut:Cl.QX.sanitizeUrl(Ut),I.createElement("li",{className:St.dashlistItem,key:`dash-${qt.uid}`},I.createElement("div",{className:St.dashlistLink},I.createElement("div",{className:St.dashlistLinkBody},I.createElement("a",{className:St.dashlistTitle,href:Ut},qt.title),qt.folderTitle&&I.createElement("div",{className:St.dashlistFolder},qt.folderTitle)),I.createElement(Km,{"aria-label":`Star dashboard "${qt.title}".`,className:St.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:qt.isStarred,onClick:nn=>Pe(nn,qt)})))}));return I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ft.map(({show:cn,header:qt,dashboards:Ut},gn)=>cn&&I.createElement("div",{className:St.dashlistSection,key:`dash-group-${gn}`},dt&&I.createElement("h6",{className:St.dashlistSectionHeader},qt),Xt(Ut))))}function Km({enabled:w,disabled:J,checked:ae,onClick:he,className:Pe,"aria-label":xe,...we}){const je=(0,I.useCallback)(It=>{It.preventDefault(),It.stopPropagation(),he?.(It)},[he]),pt={...we,...ae?w:J},dt=(0,ue.wW)(Mo);return I.createElement("label",{className:dt.wrapper},I.createElement("input",{type:"checkbox",defaultChecked:ae,onClick:je,className:dt.checkBox,"aria-label":xe}),I.createElement(pn.J,{className:(0,T.cx)(dt.icon,Pe),...pt}))}const Mo=(0,fn.B)(w=>({wrapper:(0,T.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,T.css)({appearance:"none","&:focus-visible + *":{...(0,Fi.getFocusStyles)(w),borderRadius:w.shape.borderRadius(1)}}),icon:(0,T.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Vm=Object.freeze([0,0]),ao={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},wc=new le.c(vu).setPanelOptions(w=>{w.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:ao.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:ao.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:ao.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:ao.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:ao.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:ao.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:ao.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:ao.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:ae,onChange:he}){return I.createElement(Ht,{initialFolderId:ae,onChange:Pe=>he(Pe?.id),extraFolders:[Lt,ft]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:ao.tags,editor(J){return I.createElement(Je.B,{tags:J.value,onChange:J.onChange})}})}).setMigrationHandler(w=>{const J={showStarred:w.options.showStarred??w.starred,showRecentlyViewed:w.options.showRecentlyViewed??w.recent,showSearch:w.options.showSearch??w.search,showHeadings:w.options.showHeadings??w.headings,maxItems:w.options.maxItems??w.limit,query:w.options.query??w.query,folderId:w.options.folderId??w.folderId,tags:w.options.tags??w.tags};return parseFloat(w.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Pe=>delete w[Pe]),J});var $r=e(51385),ji=e(50387);const Eu=({onBlur:w,placeholder:J})=>{const ae=(0,I.useRef)(null);(0,I.useEffect)(()=>{ae.current&&ae.current.focus()});const he=Pe=>{Pe.key==="Enter"&&Pe.currentTarget.blur()};return I.createElement("input",{type:"text",placeholder:J,onBlur:w,ref:ae,onKeyDown:he,"data-testid":"column-input"})},yu=({divStyle:w,onColumnInputBlur:J})=>{const[ae,he]=(0,I.useState)(!1),Pe=()=>{he(!0)},xe=we=>{const je=we.target.value;je&&J(je),he(!1)};return I.createElement("div",{className:w},ae?I.createElement(Eu,{placeholder:"Column Name",onBlur:xe}):I.createElement("button",{onClick:Pe},"+"))};var Yi=e(97456);const hr=()=>be.v.featureToggles.enableDatagridEditing,Tl="600 13px Inter",Wc="400 13px Inter",Fc=document.createElement("canvas"),Ol=20,Pu=300,Cu=65,Du="both",Il="number",_o={isContextMenuOpen:!1},Qi={isInputOpen:!1},$c={name:"A",fields:[],length:0},bu={kind:$r.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},Kc={columns:$r.EV.empty(),rows:$r.EV.empty()},Rl={sticky:!1,tint:!0},xu={fill:!0,sticky:!1};async function Zr(w,J){if(J&&hr()){for(let ae=0;ae<w.fields.length;ae++)delete w.fields[ae].config.displayName,delete w.fields[ae].config.displayNameFromDS;return await J([w])}return!1}const _i=(w,J=!1)=>{const ae=Fc.getContext("2d");return ae.font=J?Tl:Wc,ae.measureText(w).width},Vc=w=>Math.max(_i(w.name,!0)+Cu,Math.min(Pu,w.values.toArray().reduce((J,ae)=>{const he=_i(ae?.toString()??"");return he>J?he:J},0)+Ol)),Zi=(w,J,ae=!1)=>{const he={...w,fields:w.fields.map(Pe=>({...Pe,values:Pe.values.slice()}))};for(const Pe of he.fields){const xe=Pe.values.toArray();for(let we=J.length-1;we>=0;we--)ae?xe.splice(J[we],1):xe.splice(J[we],1,null);Pe.values=[...xe]}return{...he,length:he.fields[0]?.values.length??0}},To=(w,J)=>{const ae=J.x,he=J.y,Pe=J.x+J.width-1,xe={...w,fields:w.fields.map(we=>({...we,values:we.values.slice()}))};for(let we=ae;we<=Pe;we++){const je=xe.fields[we],_e=je.values.toArray();_e.splice(he,J.height,...new Array(J.height).fill(null)),je.values=[..._e]}return{...xe,length:xe.fields[0]?.values.length??0}},Su=w=>{const J=w.values.toArray();w.values=J.map(ae=>ae==="undefined"||ae==="null"?null:ae)};function zm(w){return{accentColor:w.colors.primary.main,accentFg:w.colors.secondary.main,textDark:w.colors.text.primary,textMedium:w.colors.text.secondary,textLight:w.colors.text.secondary,textBubble:w.colors.text.primary,textHeader:w.colors.text.primary,bgCell:w.colors.background.primary,bgCellMedium:w.colors.background.primary,bgHeader:w.colors.background.primary,bgHeaderHasFocus:w.colors.background.secondary,bgHeaderHovered:w.colors.background.secondary,linkColor:w.colors.text.link,fontFamily:w.typography.fontFamily,headerFontStyle:`${w.typography.fontWeightMedium} ${w.typography.fontSize}px`,fgIconHeader:w.colors.secondary.contrastText,bgIconHeader:w.colors.secondary.main}}const zc=(w,J,ae=!1)=>{const he=w.values.get(J);switch(w.type){case Nt.fS.boolean:return{kind:$r.p6.Boolean,data:he||!1,allowOverlay:!1,readonly:!1};case Nt.fS.number:return{kind:$r.p6.Number,data:he||0,allowOverlay:hr()&&!ae,readonly:!1,displayData:he!=null?he.toString():""};case Nt.fS.string:return{kind:$r.p6.Text,data:he||"",allowOverlay:hr()&&!ae,readonly:!1,displayData:he!=null?he.toString():""};default:return{kind:$r.p6.Text,data:he||"",allowOverlay:hr()&&!ae,readonly:!1,displayData:he!=null?he.toString():""}}},Oo=(w,J)=>({dataEditor:T.css`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${w.colors.background.secondary} ${w.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${w.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:T.css`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${w.colors.background.primary};
      button {
        pointer-events: ${J?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${w.colors.background.primary};
        color: ${w.colors.text.primary};
        border-right: 1px solid ${w.components.panel.borderColor};
        border-bottom: 1px solid ${w.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${w.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${w.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:T.css`
      height: 37px;
      border: 1px solid ${w.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),vi=w=>w.rows.length||w.columns.length?!0:w.current===void 0?!1:w.current.range&&!(w.current.range.height===1&&w.current.range.width===1);var gr=(w=>(w.columnResizeStart="columnResizeStart",w.columnResizeEnd="columnResizeEnd",w.columnMove="columnMove",w.updateColumns="updateColumns",w.showColumnRenameInput="showColumnRenameInput",w.hideColumnRenameInput="hideColumnRenameInput",w.openCellContextMenu="openCellContextMenu",w.openHeaderContextMenu="openHeaderContextMenu",w.openHeaderDropdownMenu="openHeaderDropdownMenu",w.closeContextMenu="closeContextMenu",w.multipleCellsSelected="multipleCellsSelected",w.gridSelectionCleared="gridSelectionCleared",w.columnFreezeReset="columnFreezeReset",w.columnFreezeChanged="columnFreezeChanged",w.openSearch="openSearch",w.closeSearch="closeSearch",w))(gr||{});const Hc={columns:[],contextMenuData:_o,renameColumnInputData:Qi,gridSelection:Kc,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},Ji=new Map([[Nt.fS.number,$r.PE.HeaderNumber],[Nt.fS.string,$r.PE.HeaderTextTemplate],[Nt.fS.boolean,$r.PE.HeaderBoolean],[Nt.fS.time,$r.PE.HeaderDate],[Nt.fS.other,$r.PE.HeaderReference]]),Ei=(w,J)=>{let ae=[];switch(J.type){case"columnResizeStart":ae=[...w.columns];const he=J.payload;return ae[he.columnIndex]={...w.columns[he.columnIndex],width:he.width},{...w,columns:ae,isResizeInProgress:!0};case"columnMove":ae=[...w.columns];const Pe=J.payload,xe=w.columns[Pe.from].width;let we=ae.splice(Pe.from,1)[0];return we={...we,width:xe},ae.splice(Pe.to,0,we),{...w,columns:ae};case"columnResizeEnd":return{...w,isResizeInProgress:!1};case"updateColumns":const je=J.payload;return ae=[...je.frame.fields.map((Ut,gn)=>{const nn=w.columns.find(Kn=>Kn.title===Ut.name)?.width;return{title:(0,wt.CZ)(Ut,je.frame),width:nn??Vc(Ut),icon:Ji.get(Ut.type),hasMenu:hr(),trailingRowOptions:{targetColumn:--gn}}})],{...w,columns:ae};case"showColumnRenameInput":return{...w,renameColumnInputData:{...w.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...w,renameColumnInputData:{...w.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const _e=J.payload,pt=_e.event,dt=_e.cell;return{...w,contextMenuData:{x:pt.bounds.x+pt.localEventX,y:pt.bounds.y+pt.localEventY,column:dt[0]===-1?void 0:dt[0],row:dt[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const It=J.payload,Ft=It.event;return{...w,contextMenuData:{x:Ft.bounds.x+Ft.localEventX,y:Ft.bounds.y+Ft.localEventY,column:It.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const St=J.payload,Xt=St.screenPosition;return{...w,contextMenuData:{x:Xt.x+Xt.width,y:Xt.y+Xt.height,column:St.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Xt.x,y:Xt.y,width:Xt.width,height:Xt.height,columnIdx:St.columnIndex,isInputOpen:!1,inputValue:St.value}};case"closeContextMenu":return{...w,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...w,toggleSearch:!1};case"openSearch":return{...w,toggleSearch:!0};case"multipleCellsSelected":const cn=J.payload;return{...w,gridSelection:cn.selection};case"gridSelectionCleared":return{...w,gridSelection:Kc};case"columnFreezeReset":return{...w,columnFreezeIndex:0};case"columnFreezeChanged":const qt=J.payload;return{...w,columnFreezeIndex:qt.columnIndex};default:return w}},Mu=({menuData:w,data:J,saveData:ae,closeContextMenu:he,dispatch:Pe,gridSelection:xe,columnFreezeIndex:we,renameColumnClicked:je})=>{let _e=[],pt=[];const{row:dt,column:It,x:Ft,y:St,isHeaderMenu:Xt}=w;xe.rows&&(_e=xe.rows.toArray()),xe.columns&&(pt=xe.columns.toArray());let cn="Delete row";_e.length&&_e.length>1&&(cn=`Delete ${_e.length} rows`);let qt="Delete column";pt.length&&pt.length>1&&(qt=`Delete ${pt.length} columns`);const Ut=dt!==void 0&&dt>=0||_e.length,gn=It!==void 0&&It>=0&&dt!==void 0||pt.length,nn=dt!==void 0&&dt>=0&&!_e.length,Sn=It!==void 0&&It>=0&&dt!==void 0&&!pt.length,Kn=()=>I.createElement(I.Fragment,null,Ut?I.createElement(Wr.s,{label:cn,onClick:()=>{if(_e.length){ae(Zi(J,_e,!0)),Pe({type:gr.gridSelectionCleared});return}dt!==void 0&&dt>=0&&ae(Zi(J,[dt],!0))}}):null,gn?I.createElement(Wr.s,{label:qt,onClick:()=>{if(pt.length){ae({...J,fields:J.fields.filter((Yn,ca)=>!pt.includes(ca))}),Pe({type:gr.gridSelectionCleared});return}It!==void 0&&It>=0&&ae({...J,fields:J.fields.filter((Yn,ca)=>ca!==It)})}}):null,gn||Ut?I.createElement(Yi.R,null):null,nn?I.createElement(Wr.s,{label:"Clear row",onClick:()=>{ae(Zi(J,[dt]))}}):null,Sn?I.createElement(Wr.s,{label:"Clear column",onClick:()=>{const Yn=J.fields[It];Yn.values=Yn.values.map(()=>null),ae({...J})}}):null,nn||Sn?I.createElement(Yi.R,null):null,I.createElement(Wr.s,{label:"Remove all data",onClick:()=>{ae($c)}}),I.createElement(Wr.s,{label:"Search...",onClick:()=>Pe({type:gr.openSearch})})),Bn=()=>{if(It==null)return null;const Yn=J.fields[It].type,ca=[],na=xa=>{ca.push({label:(0,B.capitalize)(xa),options:{targetField:J.fields[It].name,destinationType:xa}})};Yn===Nt.fS.string?(na(Nt.fS.number),na(Nt.fS.boolean)):Yn===Nt.fS.number?(na(Nt.fS.string),na(Nt.fS.boolean)):Yn===Nt.fS.boolean?(na(Nt.fS.number),na(Nt.fS.string)):(na(Nt.fS.string),na(Nt.fS.number),na(Nt.fS.boolean));let Da="Set column freeze position";const Pa=It+1;return we===Pa&&(Da="Unset column freeze"),I.createElement(I.Fragment,null,ca.length?I.createElement(xl.k,{label:"Set field type"},ca.map((xa,Ss)=>I.createElement(Wr.s,{key:Ss,label:xa.label,onClick:()=>{const Qa=(0,Oc.p8)(J.fields[It],xa.options);xa.options.destinationType===Nt.fS.string&&Su(Qa);const Ea={name:J.name,fields:[...J.fields],length:J.length};Ea.fields[It]=Qa,ae(Ea)}}))):null,I.createElement(Yi.R,null),I.createElement(Wr.s,{label:Da,onClick:()=>{Pe(we===Pa?{type:gr.columnFreezeReset}:{type:gr.columnFreezeChanged,payload:{columnIndex:Pa}})}}),I.createElement(Wr.s,{label:"Rename column",onClick:je}),I.createElement(Yi.R,null),I.createElement(Wr.s,{label:"Delete column",onClick:()=>{ae({...J,fields:J.fields.filter((xa,Ss)=>Ss!==It)}),Pe({type:gr.gridSelectionCleared})}}),I.createElement(Wr.s,{label:"Clear column",onClick:()=>{const xa=J.fields[It];xa.values=xa.values.map(()=>null),ae({...J})}}))};return I.createElement($i.x,{renderMenuItems:Xt?Bn:Kn,x:Ft,y:St,onClose:he})},kc=({renameColumnData:w,onColumnInputBlur:J,classStyle:ae})=>{const{x:he,y:Pe,width:xe,height:we,inputValue:je,columnIdx:_e}=w,[pt,dt]=(0,I.useState)({}),[It,Ft]=(0,I.useState)(je),St=(0,I.useRef)(null);(0,I.useLayoutEffect)(()=>{St.current?.focus();const Ut=St.current?.getBoundingClientRect();if(Ut){const gn={right:window.innerWidth<he+Ut.width,bottom:window.innerHeight<Pe+Ut.height};dt({position:"fixed",left:gn.right?he-Ut.width:he,top:gn.bottom?Pe-Ut.height:Pe,width:xe,height:we})}},[we,xe,he,Pe]);const Xt=Ut=>{const gn=Ut.target.value;gn&&J(gn,_e)},cn=Ut=>{Ft(Ut.target.value)},qt=Ut=>{Ut.key==="Enter"&&Ut.currentTarget.blur()};return I.createElement(Gs.h_,null,I.createElement("input",{type:"text",className:ae,value:It,onBlur:Xt,ref:St,style:pt,onChange:cn,onKeyDown:qt}))};function Zo({options:w,data:J,id:ae,fieldConfig:he,width:Pe,height:xe}){const[we,je]=(0,I.useReducer)(Ei,Hc),{onUpdateData:_e}=(0,ma.R9)(),{columns:pt,contextMenuData:dt,renameColumnInputData:It,gridSelection:Ft,columnFreezeIndex:St,toggleSearch:Xt,isResizeInProgress:cn}=we,qt=J.series[w.selectedSeries??0],Ut=(0,ue.l4)(),gn=zm(Ut);(0,I.useEffect)(()=>{qt&&je({type:gr.updateColumns,payload:{frame:qt}})},[qt]);const nn=([Na,ua])=>{const Ua=qt.fields[Na];return!Ua||ua>qt.length?bu:zc(Ua,ua,vi(Ft))},Sn=(Na,ua)=>{if(vi(Ft))return;const[Ua,Xa]=Na,Bs={...qt,fields:qt.fields.map(te=>({...te,values:[...te.values]}))},ps=Bs.fields[Ua];if(!ps)return;const W=ps.values.toArray();W[Xa]=ua.data,ps.values=[...W],Zr(Bs,_e)},Kn=Na=>{const ua=qt.length??0;Zr({...qt,fields:[...qt.fields,{name:Na,type:Nt.fS.string,config:{},values:new Array(ua).fill("")}]},_e)},Bn=()=>{const Na=qt.fields.map(ua=>{const Ua=ua.values.slice();return Ua.push(null),{...ua,values:Ua}});Zr({...qt,fields:Na,length:qt.length+1},_e)},Yn=(Na,ua,Ua,Xa)=>{je({type:gr.columnResizeStart,payload:{columnIndex:Ua,width:ua}})},ca=(Na,ua,Ua,Xa)=>{je({type:gr.columnResizeEnd})},na=()=>{je({type:gr.closeContextMenu})},Da=Na=>{if(Na.current&&Na.current.range)return Zr(To(qt,Na.current.range),_e),!0;const ua=Na.rows.toArray(),Ua=Na.columns.toArray();if(ua.length)return Zr(Zi(qt,ua),_e),!0;if(Ua.length){const Xa={...qt,fields:qt.fields.map((Bs,ps)=>Ua.includes(ps)?{...Bs,values:new Array(qt.length).fill(null)}:Bs)};return Zr(Xa,_e),!0}return!1},Pa=(Na,ua)=>{ua.preventDefault(),je({type:gr.openCellContextMenu,payload:{event:ua,cell:Na}})},xa=(Na,ua)=>{ua.preventDefault(),je({type:gr.openHeaderContextMenu,payload:{event:ua,columnIndex:Na}})},Ss=(Na,ua)=>{je({type:gr.openHeaderDropdownMenu,payload:{screenPosition:ua,columnIndex:Na,value:we.columns[Na].title}})},Qa=async(Na,ua)=>{const Ua=qt.fields.map(ps=>ps),Xa=Ua[Na];Ua.splice(Na,1),Ua.splice(ua,0,Xa),await Zr({...qt,fields:Ua},_e)&&je({type:gr.columnMove,payload:{from:Na,to:ua}})},Ea=(Na,ua)=>{const Ua=qt.fields.map(Xa=>({...Xa,values:Xa.values.slice()}));for(const Xa of Ua){const Bs=Xa.values[Na];Xa.values.splice(Na,1),Xa.values.splice(ua,0,Bs)}Zr({...qt,fields:Ua},_e)},Ja=()=>{je({type:gr.showColumnRenameInput})},os=(Na,ua)=>{const Ua=qt.fields.map(Xa=>Xa);Ua[ua].name=Na,je({type:gr.hideColumnRenameInput}),Zr({...qt,fields:Ua},_e)},Ys=()=>{je({type:gr.closeSearch})},Ms=Na=>{je({type:gr.multipleCellsSelected,payload:{selection:Na}})},Qs=Na=>{Zr(Na,_e)};if(!qt)return I.createElement(Es.Z,{panelId:ae,fieldConfig:he,data:J});if(!hr())return I.createElement(Es.Z,{panelId:ae,message:"Datagrid is not enabled",fieldConfig:he,data:J});if(!document.getElementById("portal")){const Na=document.createElement("div");Na.id="portal",document.body.appendChild(Na)}const _s=Oo(Ut,cn);return I.createElement(I.Fragment,null,I.createElement($r.ZP,{className:_s.dataEditor,getCellContent:nn,columns:pt,rows:qt.length,width:Pe,height:xe,initialSize:[Pe,xe],theme:gn,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:hr()?Sn:void 0,getCellsForSelection:hr()?!0:void 0,showSearch:hr()?Xt:!1,onSearchClose:Ys,gridSelection:Ft,onGridSelectionChange:hr()?Ms:void 0,onRowAppended:hr()?Bn:void 0,onDelete:hr()?Da:void 0,rowMarkers:hr()?Du:Il,onColumnResize:Yn,onColumnResizeEnd:ca,onCellContextMenu:hr()?Pa:void 0,onHeaderContextMenu:hr()?xa:void 0,onHeaderMenuClick:hr()?Ss:void 0,trailingRowOptions:Rl,rightElement:hr()?I.createElement(yu,{onColumnInputBlur:Kn,divStyle:_s.addColumnDiv}):null,rightElementProps:xu,freezeColumns:St,onRowMoved:hr()?Ea:void 0,onColumnMoved:hr()?Qa:void 0}),dt.isContextMenuOpen&&I.createElement(Mu,{menuData:dt,data:qt,saveData:Qs,closeContextMenu:na,dispatch:je,gridSelection:Ft,columnFreezeIndex:St,renameColumnClicked:Ja}),It.isInputOpen?I.createElement(kc,{onColumnInputBlur:os,renameColumnData:It,classStyle:_s.renameColumnInput}):null)}const Tu=Object.freeze([0,0]),Ou={selectedSeries:0},Iu=new le.c(Zo).setPanelOptions((w,J)=>{const ae=J.data.map((he,Pe)=>({value:Pe,label:he.refId}));return J.options&&!ae.map(he=>he.value).includes(J.options.selectedSeries??0)&&(J.options.selectedSeries=Ou.selectedSeries),w.addSelect({path:"selectedSeries",name:"Select series",defaultValue:Ou.selectedSeries,settings:{options:ae}})});class Ru extends I.Component{constructor(){super(...arguments),this.subscription=new Cr.w0,this.state={}}componentDidMount(){const{eventBus:J}=this.props;this.subscription.add(J.subscribe(Js.es,ae=>{this.setState({event:ae})})),this.subscription.add(J.subscribe(Js.xH,ae=>{this.setState({event:ae})})),this.subscription.add(J.subscribe(fr.IA,ae=>{this.setState({event:ae})})),this.subscription.add(J.subscribe(fr.oi,ae=>{this.setState({event:ae})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:J}=this.state;if(!J)return I.createElement("div",null,"no events yet");const{type:ae,payload:he,origin:Pe}=J;return I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},I.createElement("h3",null,"Origin: ",Pe?.path),I.createElement("span",null,"Type: ",ae),Boolean(he)&&I.createElement(I.Fragment,null,I.createElement("pre",null,JSON.stringify(he.point,null,"  ")),he.data&&I.createElement(yn.H,{data:he.data,rowIndex:he.rowIndex,columnIndex:he.columnIndex})))}}var Au=e(74911);let Al=100;class Gc extends I.PureComponent{constructor(J){super(J),this.history=new Au.d({capacity:40,append:"head"}),this.eventObserver={next:he=>{const Pe=he.origin;this.history.add({key:Al++,type:he.type,path:Pe?.path,payload:he.payload}),this.setState({counter:Al})}},this.state={counter:Al};const ae=[];ae.push(J.eventBus.getStream(Js.es).subscribe(this.eventObserver)),ae.push(J.eventBus.getStream(Js.xH).subscribe(this.eventObserver)),ae.push(J.eventBus.getStream(Js.v9).subscribe(this.eventObserver)),this.subs=ae}componentWillUnmount(){for(const J of this.subs)J.unsubscribe()}render(){return I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((J,ae)=>I.createElement("div",{key:J.key},JSON.stringify(J.path)," ",J.type," / X:",JSON.stringify(J.payload.x)," / Y:",JSON.stringify(J.payload.y))))}}class Ll extends I.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(J){const{data:ae,options:he}=this.props;if(J.data!==ae&&(this.counters.dataChanged++,he.counters?.schemaChanged)){const Pe=J.data?.series,xe=ae.series;xe&&Pe&&((0,vs.nl)(xe,Pe,vs.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:J,options:ae}=this.props,he=ae.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Pe=Date.now(),xe=Pe-this.lastRender;this.lastRender=Pe;const we=Aa.TB.get(Aa.gz.lastNotNull);return I.createElement("div",null,I.createElement("div",null,I.createElement(bo.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),I.createElement("span",null,he.render&&I.createElement("span",null,"Render: ",this.counters.render,"\xA0"),he.dataChanged&&I.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),he.schemaChanged&&I.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),I.createElement("span",null,"TIME: ",xe,"ms"))),J.series&&J.series.map((je,_e)=>I.createElement("div",{key:`${_e}/${je.refId}`},I.createElement("h4",null,(0,wt.nf)(je,_e)," (",je.length,")"),I.createElement("table",{className:"filter-table"},I.createElement("thead",null,I.createElement("tr",null,I.createElement("td",null,"Field"),I.createElement("td",null,"Type"),I.createElement("td",null,"Last"))),I.createElement("tbody",null,je.fields.map((pt,dt)=>{const It=we.reduce(pt,!1,!1)[we.id];return I.createElement("tr",{key:`${dt}/${pt.name}`},I.createElement("td",null,(0,wt.CZ)(pt,je,J.series)),I.createElement("td",null,pt.type),I.createElement("td",null,`${It}`))}))))))}}var Lu=e(46967);function Bu(w){const J=(0,ma.R9)(),ae=he=>{J.onInstanceStateChange({name:he.currentTarget.value})};return I.createElement(I.Fragment,null,I.createElement(Hs.g,{label:"State name"},I.createElement(Lu.I,{value:J.instanceState?.name??"",onChange:ae})))}function Nu({value:w,context:J,onChange:ae,item:he}){return I.createElement("div",null,"Current value: ",J.instanceState?.name," ")}const Uu=Object.freeze([0,0]);var xr=(w=>(w.Cursor="cursor",w.Events="events",w.Render="render",w.State="State",w.ThrowError="ThrowError",w))(xr||{});class jc extends I.Component{render(){const{options:J}=this.props;switch(J.mode){case xr.Events:return I.createElement(Gc,{eventBus:this.props.eventBus});case xr.Cursor:return I.createElement(Ru,{eventBus:this.props.eventBus});case xr.State:return I.createElement(Bu,{...this.props});case xr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return I.createElement(Ll,{...this.props})}}}const wu=new le.c(jc).useFieldConfig().setPanelOptions(w=>{w.addSelect({path:"mode",name:"Mode",defaultValue:xr.Render,settings:{options:[{label:"Render",value:xr.Render},{label:"Events",value:xr.Events},{label:"Cursor",value:xr.Cursor},{label:"Cursor",value:xr.Cursor},{label:"Share state",value:xr.State},{label:"Throw error",value:xr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:J})=>J===xr.State,editor:Nu}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:J})=>J===xr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:J})=>J===xr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:J})=>J===xr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Bl=e(19919);const Yc=w=>I.createElement(Bl.Z,{data:w.data.series[0],app:fe.zj.Unknown}),Qc=new le.c(Yc);var Xi=e(7149),Sr=e(67487);const yi=(w,J)=>{const ae="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",he=J?ae:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Pe=J?ae:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",xe=w.isDark?he:Pe;return`
      background-color: ${w.colors.background.secondary};
      margin-right: ${w.spacing(4)};
      border: 1px solid ${w.colors.border.weak};
      border-bottom-left-radius: ${w.shape.borderRadius(2)};
      border-bottom-right-radius: ${w.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${w.breakpoints.down("xxl")} {
        margin-right: ${w.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${xe};
      }
`},_c=(w,J)=>T.css`
  color: ${J?w.v1.palette.blue95:w.colors.text.secondary};

  ${w.breakpoints.down("sm")} {
    display: none;
  }
`,Zc=T.css`
  padding: 16px;
`,Nl=({card:w})=>{const J=(0,ue.wW)((0,I.useCallback)(he=>Wu(he,w.done),[w.done])),ae=(0,ue.wW)((0,I.useCallback)(he=>_c(he,w.done),[w.done]));return I.createElement("div",{className:J.card},I.createElement("div",{className:Zc},I.createElement("a",{href:`${w.href}?utm_source=grafana_gettingstarted`,className:J.url},I.createElement("div",{className:J.heading},w.done?"complete":w.heading),I.createElement("h4",{className:J.title},w.title),I.createElement("div",null,I.createElement(pn.J,{className:ae,name:w.icon,size:"xxl"})))),I.createElement("a",{href:`${w.learnHref}?utm_source=grafana_gettingstarted`,className:J.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",I.createElement(pn.J,{name:"external-link-alt"})))},Wu=(w,J)=>({card:T.css`
      ${yi(w,J)}

      min-width: 230px;

      ${w.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:T.css`
      text-transform: uppercase;
      color: ${J?w.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${w.spacing(2)};
    `,title:T.css`
      margin-bottom: ${w.spacing(2)};
    `,url:T.css`
      display: inline-block;
    `,learnUrl:T.css`
      border-top: 1px solid ${w.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var qi=e(58379);const Fu=({card:w})=>{const J=(0,ue.wW)((0,I.useCallback)(he=>Ba(he,w.done),[w.done])),ae=(0,ue.wW)((0,I.useCallback)(he=>_c(he,w.done),[w.done]));return I.createElement("a",{className:J.card,target:"_blank",rel:"noreferrer",href:`${w.href}?utm_source=grafana_gettingstarted`,onClick:he=>Jo(he,w)},I.createElement("div",{className:Zc},I.createElement("div",{className:J.type},w.type),I.createElement("div",{className:J.heading},w.done?"complete":w.heading),I.createElement("h4",{className:J.cardTitle},w.title),I.createElement("div",{className:J.info},w.info),I.createElement(pn.J,{className:ae,name:w.icon,size:"xxl"})))},Jo=(w,J)=>{w.preventDefault(),qi.Z.get(J.key)||qi.Z.set(J.key,!0)},Ba=(w,J)=>({card:T.css`
      ${yi(w,J)}
      width: 460px;
      min-width: 460px;

      ${w.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${w.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:T.css`
      color: ${w.colors.primary.text};
      text-transform: uppercase;
    `,heading:T.css`
      text-transform: uppercase;
      color: ${w.colors.primary.text};
      margin-bottom: ${w.spacing(1)};
    `,cardTitle:T.css`
      margin-bottom: ${w.spacing(2)};
    `,info:T.css`
      margin-bottom: ${w.spacing(2)};
    `,status:T.css`
      display: flex;
      justify-content: flex-end;
    `}),Jc=({step:w})=>{const J=(0,ue.wW)(Xc);return I.createElement("div",{className:J.setup},I.createElement("div",{className:J.info},I.createElement("h2",{className:J.title},w.title),I.createElement("p",null,w.info)),I.createElement("div",{className:J.cards},w.cards.map((ae,he)=>{const Pe=`${ae.title}-${he}`;return ae.type==="tutorial"?I.createElement(Fu,{key:Pe,card:ae}):I.createElement(Nl,{key:Pe,card:ae})})))},Xc=w=>({setup:T.css`
      display: flex;
      width: 95%;
    `,info:T.css`
      width: 172px;
      margin-right: 5%;

      ${w.breakpoints.down("xxl")} {
        margin-right: ${w.spacing(4)};
      }
      ${w.breakpoints.down("sm")} {
        display: none;
      }
    `,title:T.css`
      color: ${w.v1.palette.blue95};
    `,cards:T.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${w.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var so=e(91162);const Jr="Grafana fundamentals",qc="Create users and teams",Ul="getting.started.",el=`${Ul}${Jr.replace(" ","-").trim().toLowerCase()}`,As=`${Ul}${qc.replace(" ","-").trim().toLowerCase()}`,Pi=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Jr,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(qi.Z.get(el)),key:el,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(w=>{w((0,so.ak)().getMetricSources().filter(J=>J.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Te.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:As,check:()=>Promise.resolve(qi.Z.get(As)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const w=await(0,Te.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(w.length>0)},done:!1}]}];class $u extends I.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:Pi()},this.onForwardClick=()=>{this.setState(J=>({currentStep:J.currentStep+1}))},this.onPreviousClick=()=>{this.setState(J=>({currentStep:J.currentStep-1}))},this.dismiss=()=>{const{id:J}=this.props,ae=(0,Mn.h4)().getCurrent(),he=ae?.getPanelById(J);ae?.removePanel(he),Te.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Pe=>{gt.Vt.user.helpFlags1=Pe.helpFlags1})}}async componentDidMount(){const{steps:J}=this.state,ae=J.map(async Pe=>{const xe=Pe.cards.map(async je=>je.check().then(_e=>({...je,done:_e}))),we=await Promise.all(xe);return{...Pe,done:we.every(je=>je.done),cards:we}}),he=await Promise.all(ae);this.setState({currentStep:he[0].done?1:0,steps:he,checksDone:!0})}render(){const{checksDone:J,currentStep:ae,steps:he}=this.state,Pe=Ci(),xe=he[ae];return I.createElement("div",{className:Pe.container},J?I.createElement(I.Fragment,null,I.createElement(De.zx,{variant:"secondary",fill:"text",className:Pe.dismiss,onClick:this.dismiss},"Remove this panel"),ae===he.length-1&&I.createElement(De.zx,{className:(0,T.cx)(Pe.backForwardButtons,Pe.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),I.createElement("div",{className:Pe.content},I.createElement(Jc,{step:xe})),ae<he.length-1&&I.createElement(De.zx,{className:(0,T.cx)(Pe.backForwardButtons,Pe.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):I.createElement("div",{className:Pe.loading},I.createElement("div",{className:Pe.loadingText},"Checking completed setup steps"),I.createElement(Sr.$,{size:24,inline:!0})))}}const Ci=(0,fn.B)(()=>{const w=be.v.theme2;return{container:T.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${w.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${w.spacing(4)} ${w.spacing(2)} 0;
    `,content:T.css`
      label: content;
      display: flex;
      justify-content: center;

      ${w.breakpoints.down("xxl")} {
        margin-left: ${w.spacing(3)};
        justify-content: flex-start;
      }
    `,header:T.css`
      label: header;
      margin-bottom: ${w.spacing(3)};
      display: flex;
      flex-direction: column;

      ${w.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:T.css`
      height: 58px;
      padding-right: ${w.spacing(2)};
      display: none;

      ${w.breakpoints.up("md")} {
        display: block;
      }
    `,heading:T.css`
      label: heading;
      margin-right: ${w.spacing(3)};
      margin-bottom: ${w.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${w.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:T.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:T.css`
      left: 10px;

      ${w.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:T.css`
      right: 10px;

      ${w.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:T.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${w.spacing(1)};
    `,loading:T.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:T.css`
      margin-right: ${w.spacing(1)};
    `}}),Ku=new le.c($u).setNoPadding();var Fr=e(75133),ed=e(3200);const Hm=Object.freeze([0,0]),wl={bucketOffset:0},td={fillOpacity:80,gradientMode:at.FI.None,lineWidth:1};function nd(w,J){return Math.floor(w/J)*J}function Wl(w,J){return Math.ceil(w/J)*J}function Fl(w){return w.fields[1].values[0]-w.fields[0].values[0]}const ad=(w,J)=>{let{min:ae,max:he}=w.fields[2].config,Pe=new zs.U,xe=Fl(w),we=(St,Xt,cn,qt,Ut,gn)=>{let nn=St.axes[Xt]._space,Sn=St.valToPos(St.data[0][0]+xe,"x")-St.valToPos(St.data[0][0],"x"),Kn=nd(ae??St.data[0][0],xe),Bn=Wl(he??St.data[0][St.data[0].length-1]+xe,xe),Yn=[],ca=Math.ceil(nn/Sn);for(let na=0,Da=Kn;Da<=Bn;na++,Da+=xe)!(na%ca)&&Yn.push(Da);return Yn};Pe.addScale({scaleKey:"x",isTime:!1,distribution:at.wf.Linear,orientation:at.wN.Horizontal,direction:at.bQ.Right,range:(St,Xt,cn)=>{ae!=null&&(Xt=ae),he!=null&&(cn=he);let qt=St.data[0][0],Ut=St.data[0][St.data[0].length-1];return cn===Ut?cn+=xe:cn=Wl(cn,xe),Xt>qt&&(Xt=nd(Xt,xe)),[Xt,cn]}}),Pe.addScale({scaleKey:"y",isTime:!1,distribution:at.wf.Linear,orientation:at.wN.Vertical,direction:at.bQ.Up});const je=w.fields[0].display,_e=St=>(0,Wn.zc)(je(St));Pe.addAxis({scaleKey:"x",isTime:!1,placement:at.LB.Bottom,incrs:Fr.Zi,splits:we,values:(St,Xt)=>{const cn=Xt.map(_e),qt=cn.reduce((Sn,Kn)=>Math.max((0,ba.X1)(Kn,as.gD).width,Sn),0),Ut=10,gn=St.bbox.width/((qt+Ut)*devicePixelRatio),nn=Math.ceil(cn.length/gn);return cn.map((Sn,Kn)=>Kn%nn===0?Sn:null)},theme:J});let dt=w.fields[2].display;Pe.addAxis({scaleKey:"y",isTime:!1,placement:at.LB.Left,formatValue:(St,Xt)=>(0,Wn.zc)(dt(St,Xt)),theme:J}),Pe.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let It=hn.Z.paths.bars({align:1,size:[1,1/0]}),Ft=0;for(let St=2;St<w.fields.length;St++){const Xt=w.fields[St];Xt.state=Xt.state??{},Xt.state.seriesIndex=Ft++;const cn={...td,...Xt.config.custom},qt="y",Ut=(0,fa.fD)(Xt),nn=(0,fa.YO)(Xt,J).color;Pe.addSeries({scaleKey:qt,lineWidth:cn.lineWidth,lineColor:nn,fillOpacity:cn.fillOpacity,theme:J,colorMode:Ut,pathBuilder:It,show:!cn.hideFrom?.viz,gradientMode:cn.gradientMode,thresholds:Xt.config.thresholds,hardMin:Xt.config.min,hardMax:Xt.config.max,softMin:cn.axisSoftMin,softMax:cn.axisSoftMax,dataFrameFieldIndex:Xt.state.origin})}return Pe},Vu=w=>{let J=[];for(const ae of w.fields)ae.name!==Fr.cO&&J.push(ae.values);for(let ae=1;ae<J.length;ae++){let he=J[ae];for(let Pe=0;Pe<he.length;Pe++)he[Pe]===0&&(he[Pe]=null)}return J};class km extends I.Component{constructor(J){super(J),this.state=this.prepState(J)}prepState(J,ae=!0){let he=null;const{alignedFrame:Pe}=J;return Pe&&(he={alignedData:Vu(Pe)},ae&&(he.config=ad(Pe,this.props.theme))),he}renderLegend(J){const{legend:ae}=this.props;return!J||ae.showLegend===!1?null:I.createElement(Is.l,{data:this.props.rawSeries,config:J,maxHeight:"35%",maxWidth:"60%",...ae})}componentDidUpdate(J){const{structureRev:ae,alignedFrame:he,bucketSize:Pe}=this.props;if(he!==J.alignedFrame){let xe=this.prepState(this.props,!1);xe&&(Pe!==J.bucketSize||this.props.options!==J.options||this.state.config===void 0||ae!==J.structureRev||!ae)&&(xe.config=ad(he,this.props.theme)),xe&&this.setState(xe)}}render(){const{width:J,height:ae,children:he,alignedFrame:Pe}=this.props,{config:xe}=this.state;return xe?I.createElement(ms.AY,{width:J,height:ae,legend:this.renderLegend(xe)},(we,je)=>I.createElement(ed.N,{config:this.state.config,data:this.state.alignedData,width:we,height:je,timeRange:null},he?he(xe,Pe):null)):null}}const zu=({data:w,options:J,width:ae,height:he})=>{const Pe=(0,ue.l4)(),xe=(0,I.useMemo)(()=>{if(!w.series.length)return;if(w.series.forEach((_e,pt)=>{_e.fields.forEach((dt,It)=>{dt.state={...dt.state,origin:{frameIndex:pt,fieldIndex:It}}})}),w.series.length===1){const _e=(0,Fr.qr)(w.series[0]);if(_e)return(0,Fr.zM)(_e)}const je=(0,Fr.gY)(w.series,J);if(je)return(0,Fr.zM)(je,Pe)},[w.series,J,Pe]);if(!xe||!xe.fields.length)return I.createElement("div",{className:"panel-empty"},I.createElement("p",null,"No histogram found in response"));const we=Fl(xe);return I.createElement(km,{options:J,theme:Pe,legend:J.legend,rawSeries:w.series,structureRev:w.structureRev,width:ae,height:he,alignedFrame:xe,bucketSize:we},(je,_e)=>null)};function tl(w){if(w?.length!==1)return!1;const J=w[0];if(J.fields.length<3||!(0,Fr.Ok)(J.fields[0].name)||!(0,Fr.kl)(J.fields[1].name))return!1;for(const ae of J.fields)if(ae.type!==Nt.fS.number)return!1;return!0}const Hu=new le.c(zu).setPanelOptions(w=>{w.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(J,ae)=>tl(ae)}).addNumberInput({path:"bucketSize",name:Fr.py.bucketSize.name,description:Fr.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:wl.bucketSize,showIf:(J,ae)=>!tl(ae)}).addNumberInput({path:"bucketOffset",name:Fr.py.bucketOffset.name,description:Fr.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:wl.bucketOffset,showIf:(J,ae)=>!tl(ae)}).addBooleanSwitch({path:"combine",name:Fr.py.combine.name,description:Fr.py.combine.description,defaultValue:wl.combine,showIf:(J,ae)=>!tl(ae)}),Ra.J(w)}).useFieldConfig({standardOptions:{[Ae.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:nt.S.PaletteClassic}}},useCustomConfig:w=>{const J=td;w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:J.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:J.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:An.q.fillGradient[0].value,settings:{options:An.q.fillGradient}}),Gn.B(w)}});var zr=e(8891),nl=e(64353);const sd=[{label:"Grafana",value:zr.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:zr.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:zr.z.Plugin,description:"Plugins with live support"}];class rd extends I.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=J=>{J.value&&this.props.onChange({scope:J.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=J=>{const ae={scope:this.props.value?.scope,path:void 0};J.value&&(ae.namespace=J.value),this.props.onChange(ae)},this.onPathChanged=J=>{const{value:ae,onChange:he}=this.props,Pe={scope:ae.scope,namespace:ae.namespace};J.value&&(Pe.path=J.value),he(Pe)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(J){this.props.value!==J.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:J,paths:ae}=this.state,{scope:he,namespace:Pe,path:xe}=this.props.value,we=Ar(Ge.vc.theme2);return I.createElement(I.Fragment,null,I.createElement(Wa.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),I.createElement("div",null,I.createElement("div",{className:we.dropWrap},I.createElement(nl._,null,"Scope"),I.createElement(ut.Ph,{options:sd,value:sd.find(je=>je.value===he),onChange:this.onScopeChanged})),he&&I.createElement("div",{className:we.dropWrap},I.createElement(nl._,null,"Namespace"),I.createElement(ut.Ph,{options:J,value:J.find(je=>je.value===Pe)??(Pe?{label:Pe,value:Pe}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),he&&Pe&&I.createElement("div",{className:we.dropWrap},I.createElement(nl._,null,"Path"),I.createElement(ut.Ph,{options:ae,value:ku(ae,xe),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function ku(w,J){const ae=w.find(he=>he.value===J);if(ae)return ae;if(J)return{label:J,value:J}}const Ar=(0,fn.B)(w=>({dropWrap:T.css`
    margin-bottom: ${w.spacing(1)};
  `}));var js=e(52666),Io=e(75118),od=e(16065),$l=e(9405),Di=e(28625),ho=e(90748),Gm=e(88144);function Gu(w){const{data:J,height:ae,width:he,options:Pe,fieldConfig:xe,id:we,timeRange:je}=w,_e=(0,ue.l4)(),pt=(0,ma.R9)(),dt=J.series,It=dt.filter(Kn=>Kn.meta?.custom?.parentRowIndex===void 0),Ft=dt.filter(Kn=>Kn.meta?.custom?.parentRowIndex!==void 0),St=It?.length,Xt=It[0]?.fields.length,cn=ju(It,Pe),qt=It[cn];let Ut=ae,gn=Ft;if(!St||!Xt)return I.createElement(Es.Z,{panelId:we,fieldConfig:xe,data:J});if(St>1){const Kn=_e.spacing.gridSize*_e.components.height.md,Bn=_e.spacing.gridSize;Ut=ae-Kn-Bn,gn=Ft.filter(Yn=>Yn.refId===qt.refId)}const nn=I.createElement(Gm.i,{height:Ut,width:he,data:qt,noHeader:!Pe.showHeader,showTypeIcons:Pe.showTypeIcons,resizable:!0,initialSortBy:Pe.sortBy,onSortByChange:Kn=>Kl(Kn,w),onColumnResize:(Kn,Bn)=>Yu(Kn,Bn,w),onCellFilterAdded:pt.onAddAdHocFilter,footerOptions:Pe.footer,enablePagination:Pe.footer?.enablePagination,subData:gn,cellHeight:Pe.cellHeight,timeRange:je});if(St===1)return nn;const Sn=It.map((Kn,Bn)=>({label:(0,wt.nf)(Kn),value:Bn}));return I.createElement("div",{className:cr.wrapper},nn,I.createElement("div",{className:cr.selectWrapper},I.createElement(ut.Ph,{options:Sn,value:Sn[cn],onChange:Kn=>or(Kn,w)})))}function ju(w,J){return J.frameIndex>0&&J.frameIndex<w.length?J.frameIndex:0}function Yu(w,J,ae){const{fieldConfig:he}=ae,{overrides:Pe}=he,xe=ho.mi.byName,we="custom.width",je=Pe.find(_e=>_e.matcher.id===xe&&_e.matcher.options===w);if(je){const _e=je.properties.find(pt=>pt.id===we);_e?_e.value=J:je.properties.push({id:we,value:J})}else Pe.push({matcher:{id:xe,options:w},properties:[{id:we,value:J}]});ae.onFieldConfigChange({...he,overrides:Pe})}function Kl(w,J){J.onOptionsChange({...J.options,sortBy:w})}function or(w,J){J.onOptionsChange({...J.options,frameIndex:w.value||0})}const cr={wrapper:T.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:T.css`
    padding: 8px 8px 0px 8px;
  `};var Cs=(w=>(w.Raw="raw",w.JSON="json",w.Auto="auto",w.None="none",w))(Cs||{});class Ro extends I.PureComponent{constructor(J){super(J),this.styles=Ao(be.v.theme2),this.streamObserver={next:ae=>{(0,zr.se)(ae)?this.setState({status:ae,changed:Date.now()}):(0,zr.RL)(ae)?this.setState({message:ae.message,changed:Date.now()}):console.log("ignore",ae)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=ae=>{const{options:he,onOptionsChange:Pe}=this.props;try{const xe=JSON.parse(ae);Pe({...he,json:xe})}catch(xe){console.log("Error reading JSON",xe)}},this.onPublishClicked=async()=>{const{addr:ae}=this.state;if(!ae){console.log("invalid address");return}const he=this.props.options?.json;if(!he){console.log("nothing to publish");return}const Pe=await(0,Io.gj)().publish(ae,he);console.log("onPublishClicked (response from publish)",Pe)},this.isValid=!!(0,Io.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(J){this.props.options?.channel!==J.options?.channel&&this.loadChannel()}async loadChannel(){const J=this.props.options?.channel;if(!(0,zr.nU)(J)){console.log("INVALID",J),this.unsubscribe(),this.setState({addr:void 0});return}if((0,B.isEqual)(J,this.state.addr)){console.log("Same channel",this.state.addr);return}const ae=(0,Io.gj)();if(!ae){console.log("INVALID",J),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",J);try{this.subscription=ae.getStream(J).subscribe(this.streamObserver),this.setState({addr:J,error:void 0})}catch(he){this.setState({addr:void 0,error:he})}}renderNotEnabled(){const J=`[feature_toggles]
    enable = live`;return I.createElement(Wa.b,{title:"Grafana Live",severity:"info"},I.createElement("p",null,"Grafana live requires a feature flag to run"),I.createElement("b",null,"custom.ini:"),I.createElement("pre",null,J))}renderMessage(J){const{options:ae}=this.props,{message:he}=this.state;if(!he)return I.createElement("div",null,I.createElement("h4",null,"Waiting for data:"),ae.channel?.scope,"/",ae.channel?.namespace,"/",ae.channel?.path);if(ae.message===Cs.JSON)return I.createElement(od.g,{json:he,open:5});if(ae.message===Cs.Auto&&he instanceof Di.Av){const Pe={series:(0,jo.SM)({data:[he],theme:be.v.theme2,replaceVariables:we=>we,fieldConfig:{defaults:{},overrides:[]}}),state:js.Gu.Streaming},xe={...this.props,options:{frameIndex:0,showHeader:!0}};return I.createElement(Gu,{...xe,data:Pe,height:J})}return I.createElement("pre",null,JSON.stringify(he))}renderPublish(J){const{options:ae}=this.props;return I.createElement(I.Fragment,null,I.createElement($l.p,{height:J-32,language:"json",value:ae.json?JSON.stringify(ae.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),I.createElement("div",{style:{height:32}},I.createElement(De.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:J}=this.state;if(J?.state===zr.yS.Connected)return;let ae="";return J&&(ae=this.styles.status[J.state]),I.createElement("div",{className:(0,T.cx)(ae,this.styles.statusWrap)},J?.state)}renderBody(){const{status:J}=this.state,{options:ae,height:he}=this.props;if(ae.publish){if(ae.message===Cs.None)return I.createElement("div",null,this.renderPublish(he));const Pe=he/2;return I.createElement("div",null,I.createElement("div",{style:{height:Pe,overflow:"hidden"}},I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Pe))),I.createElement("div",null,this.renderPublish(Pe)))}return ae.message===Cs.None?I.createElement("pre",null,JSON.stringify(J)):I.createElement("div",{style:{overflow:"hidden",height:he}},I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(he)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:J,error:ae}=this.state;return J?ae?I.createElement("div",null,I.createElement("h2",null,"ERROR"),I.createElement("div",null,JSON.stringify(ae))):I.createElement(I.Fragment,null,this.renderStatus(),this.renderBody()):I.createElement(Wa.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Ao=(0,fn.B)(w=>({statusWrap:T.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${w.components.panel.background};
    padding: 10px;
    z-index: ${w.zIndex.modal};
  `,status:{[zr.yS.Pending]:T.css`
      border: 1px solid ${w.v1.palette.orange};
    `,[zr.yS.Connected]:T.css`
      border: 1px solid ${w.colors.success.main};
    `,[zr.yS.Connecting]:T.css`
      border: 1px solid ${w.v1.palette.brandWarning};
    `,[zr.yS.Disconnected]:T.css`
      border: 1px solid ${w.colors.warning.main};
    `,[zr.yS.Shutdown]:T.css`
      border: 1px solid ${w.colors.error.main};
    `,[zr.yS.Invalid]:T.css`
      border: 1px solid red;
    `}})),Qu=new le.c(Ro).setPanelOptions(w=>{w.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:rd,defaultValue:{}}),w.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Cs.Raw,label:"Raw Text"},{value:Cs.JSON,label:"JSON"},{value:Cs.Auto,label:"Auto"},{value:Cs.None,label:"None"}]},defaultValue:Cs.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var al=e(13787),Vl=e(20053),_u=e(51927),zl=e(54972),id=e(59985);const Xo=({data:w,timeZone:J,fieldConfig:ae,options:{showLabels:he,showTime:Pe,wrapLogMessage:xe,showCommonLabels:we,prettifyLogMessage:je,sortOrder:_e,dedupStrategy:pt,enableLogDetails:dt},title:It,id:Ft})=>{const St=_e===at.UV.Ascending,Xt=(0,ue.wW)(qo(It,St)),[cn,qt]=(0,I.useState)(0),Ut=(0,I.useRef)(null),{eventBus:gn}=(0,ma.R9)(),nn=(0,I.useCallback)(na=>{na?gn.publish(new Js.es({point:{time:na.timeEpochMs}})):gn.publish(new Js.xH)},[gn]),[Sn,Kn,Bn]=(0,I.useMemo)(()=>{const na=w?(0,Vl.aB)(w.series,w.request?.intervalMs,void 0,w.request?.targets):null,Da=na?.rows||[],Pa=na?.meta?.find(Ss=>Ss.label===Vl.Qp),xa=(0,Vl.UW)(Da,pt);return[Da,xa,Pa]},[w,pt]);(0,I.useLayoutEffect)(()=>{St&&Ut.current?qt(Ut.current.offsetHeight):qt(0)},[St,Sn]);const Yn=(0,I.useCallback)((na,Da)=>(0,ui.a_)({field:na,rowIndex:Da,range:w.timeRange}),[w]);if(!w||Sn.length===0)return I.createElement(_u.Z,{fieldConfig:ae,panelId:Ft,data:w,needsStringField:!0});const ca=()=>I.createElement("div",{className:Xt.labelContainer},I.createElement("span",{className:Xt.label},"Common labels:"),I.createElement(zl.j,{labels:Bn?Bn.value:{labels:"(no common labels)"}}));return I.createElement(We.$,{autoHide:!0,scrollTop:cn},I.createElement("div",{className:Xt.container,ref:Ut},we&&!St&&ca(),I.createElement(id.w,{logRows:Sn,deduplicatedRows:Kn,dedupStrategy:pt,showLabels:he,showTime:Pe,wrapLogMessage:xe,prettifyLogMessage:je,timeZone:J,getFieldLinks:Yn,logsSortOrder:_e,enableLogDetails:dt,previewLimit:St?Sn.length:void 0,onLogRowHover:nn,app:fe.zj.Dashboard}),we&&St&&ca()))},qo=(w,J)=>ae=>({container:T.css`
    margin-bottom: ${ae.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${ae.spacing(w?0:2.5)};
  `,labelContainer:T.css`
    margin: ${J?ae.spacing(.5,0,.5,0):ae.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:T.css`
    margin-right: ${ae.spacing(.5)};
    font-size: ${ae.typography.bodySmall.fontSize};
    font-weight: ${ae.typography.fontWeightMedium};
  `});class ei{getSuggestionsForData(J){const ae=J.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:he}=J;!he.hasData||!he.hasTimeField||!he.hasStringField||(he.preferredVisualisationType==="logs"?ae.append({name:xs.y.Logs,score:_t._.Best}):ae.append({name:xs.y.Logs}))}}const Hl=new le.c(Xo).setPanelOptions(w=>{w.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:at.Y4.none,label:"None",description:al.Uv[at.Y4.none]},{value:at.Y4.exact,label:"Exact",description:al.Uv[at.Y4.exact]},{value:at.Y4.numbers,label:"Numbers",description:al.Uv[at.Y4.numbers]},{value:at.Y4.signature,label:"Signature",description:al.Uv[at.Y4.signature]}]},defaultValue:at.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:at.UV.Descending,label:"Newest first"},{value:at.UV.Ascending,label:"Oldest first"}]},defaultValue:at.UV.Descending})}).setSuggestionsSupplier(new ei);var Zu=e(53764),ti=e(6981),Ju=e(13724);function Xu(w){const{width:J,options:{feedUrl:ae=ti.k,showImage:he}}=w,{state:Pe,getNews:xe}=(0,Ju.j)(ae);return(0,I.useEffect)(()=>{const we=w.eventBus.subscribe(Ta.U5,xe);return()=>{we.unsubscribe()}},[xe,w.eventBus]),(0,I.useEffect)(()=>{xe()},[xe]),Pe.error?I.createElement("div",null,"Error loading RSS feed."):Pe.loading?I.createElement("div",null,"Loading..."):Pe.value?I.createElement(We.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Pe.value.map((we,je)=>I.createElement(Zu.S,{key:je,index:je,width:J,showImage:he,data:Pe.value}))):null}const jm=Object.freeze([0,0]),ld={showImage:!0},sl=new le.c(Xu).setPanelOptions(w=>{w.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:ti.k},defaultValue:ld.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:ld.showImage})});var cd=e(58635),bi=e(74538),qu=e(68545);const xi=({width:w,height:J,data:ae,options:he})=>{const Pe=(0,ui.u8)(ae.timeRange);if(!ae||!ae.series.length)return I.createElement("div",{className:"panel-empty"},I.createElement("p",null,"No data found in response"));const xe=(0,cd.Z)(qu.Ee);return I.createElement("div",{style:{width:w,height:J}},I.createElement(bi.E,{dataFrames:xe(ae.series,he),getLinks:Pe}))};var em=e(90208),ni=e(15448);const tm=({value:w,onChange:J,context:ae})=>{const he=(0,ue.wW)(nm),Pe=()=>{const je={field:"",color:""};J(w?[...w,je]:[je])},xe=je=>{const _e=w?.slice();_e.splice(je,1),J(_e)},we=(je,_e,pt)=>{let dt=w?.slice()??[];dt[je][_e]=pt,J(dt)};return I.createElement(I.Fragment,null,w?.map((je,_e)=>I.createElement("div",{className:he.section,key:_e},I.createElement(ni.b,{context:ae,value:je.field??"",onChange:pt=>{we(_e,"field",pt)},item:{settings:{filter:pt=>pt.name.includes("arc__")},id:`arc-field-${_e}`,name:`arc-field-${_e}`,editor:()=>null}}),I.createElement(em.zH,{color:je.color||"#808080",onChange:pt=>{we(_e,"color",pt)}}),I.createElement(De.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>xe(_e),title:"Remove arc"}))),I.createElement(De.zx,{size:"sm",icon:"plus",onClick:Pe,variant:"secondary"},"Add arc"))},nm=()=>({section:T.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),vo=new le.c(xi).setPanelOptions((w,J)=>{w.addNestedOptions({category:["Nodes"],path:"nodes",build:ae=>{ae.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ae.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),ae.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:tm})}}),w.addNestedOptions({category:["Edges"],path:"edges",build:ae=>{ae.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ae.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var am=e(92156),dd=e(26993),sm=e(9521),rm=e(32567),om=e(68970),Eo=e(66838),ud=e(46495),kl=e(95670),Gl=e(28550),md=e(18543),ro=e(50800);let kr=0;const im=()=>kr++;function fd(w){const J=(0,I.useRef)(null);return J.current===null&&(J.current=w+im()),J.current.toString()}const Ym=Object.freeze([0,0]);var Gr=(w=>(w.Donut="donut",w.Pie="pie",w))(Gr||{}),jr=(w=>(w.Name="name",w.Percent="percent",w.Value="value",w))(jr||{}),oo=(w=>(w.Percent="percent",w.Value="value",w))(oo||{});const Qm={values:[]},_m={displayLabels:[]};function gd(w){return!w.field.custom?.hideFrom?.viz&&!isNaN(w.display.numeric)}function ai(w,J){return J.display.numeric+w}const si=({fieldDisplayValues:w,pieType:J,width:ae,height:he,highlightedTitle:Pe,displayLabels:xe=[],tooltipOptions:we})=>{const je=(0,ue.l4)(),_e=fd("PieChart"),pt=(0,ue.wW)(Bo),dt=(0,ud.Z)(),{containerRef:It,TooltipInPortal:Ft}=(0,kl.Z)({detectBounds:!0,scroll:!0}),St=w.filter(gd),Xt=Bn=>Bn.display.numeric,cn=Bn=>`${_e}-${(0,Gl.Z)(Bn).toHex()}`,qt=Bn=>`url(#${cn(Bn)})`,Ut=xe.length>0,gn=we.mode!=="none"&&dt.tooltipOpen,nn=St.reduce(ai,0),Sn=Yl(ae,he,J),Kn=[...new Set(St.map(Bn=>Bn.display.color??nt.R))];return I.createElement("div",{className:pt.container},I.createElement("svg",{width:Sn.size,height:Sn.size,ref:It,style:{overflow:"visible"}},I.createElement(om.Z,{top:Sn.position,left:Sn.position},Kn.map(Bn=>I.createElement(rm.Z,{key:Bn,id:cn(Bn),from:dm(Bn,je),to:um(Bn,je),fromOffset:Sn.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Sn.outerRadius})),I.createElement(Eo.Z,{data:St,pieValue:Xt,outerRadius:Sn.outerRadius,innerRadius:Sn.innerRadius,cornerRadius:3,padAngle:.005},Bn=>I.createElement(I.Fragment,null,Bn.arcs.map(Yn=>{const ca=Yn.data.display.color??nt.R,na=Si(Pe,Yn);return Yn.data.hasLinks&&Yn.data.getLinks?I.createElement(md.V,{key:Yn.index,links:Yn.data.getLinks},Da=>I.createElement(pd,{tooltip:dt,highlightState:na,arc:Yn,pie:Bn,fill:qt(ca),openMenu:Da.openMenu,tooltipOptions:we})):I.createElement(pd,{key:Yn.index,highlightState:na,tooltip:dt,arc:Yn,pie:Bn,fill:qt(ca),tooltipOptions:we})}),Ut&&Bn.arcs.map(Yn=>{const ca=Si(Pe,Yn);return I.createElement(lm,{arc:Yn,key:Yn.index,highlightState:ca,outerRadius:Sn.outerRadius,innerRadius:Sn.innerRadius,displayLabels:xe,total:nn,color:je.colors.text.primary})}))))),gn?I.createElement(Ft,{key:Math.random(),top:dt.tooltipTop,className:pt.tooltipPortal,left:dt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},I.createElement(ro.c,{series:dt.tooltipData})):null)};function pd({arc:w,pie:J,highlightState:ae,openMenu:he,fill:Pe,tooltip:xe,tooltipOptions:we}){const je=(0,ue.l4)(),_e=(0,ue.wW)(Bo),{eventBus:pt}=(0,ma.R9)(),dt=(0,I.useCallback)(St=>{pt?.publish({type:Js.xH.type,payload:{raw:St,x:0,y:0,dataId:w.data.display.title}}),xe.hideTooltip()},[pt,w,xe]),It=(0,I.useCallback)(St=>{pt?.publish({type:Js.es.type,payload:{raw:St,x:0,y:0,dataId:w.data.display.title}});const Xt=St.currentTarget.ownerSVGElement;if(Xt){const cn=(0,sm.Z)(Xt,St);xe.showTooltip({tooltipLeft:cn.x,tooltipTop:cn.y,tooltipData:jl(J,w,we)})}},[pt,w,xe,J,we]),Ft=Lo(ae,_e);return I.createElement("g",{key:w.data.display.title,className:Ft,onMouseMove:we.mode!=="none"?It:void 0,onMouseOut:dt,onClick:he,"aria-label":st.wl.components.Panels.Visualization.PieChart.svgSlice},I.createElement("path",{d:J.path({...w}),fill:Pe,stroke:je.colors.background.primary,strokeWidth:1}))}function lm({arc:w,outerRadius:J,innerRadius:ae,displayLabels:he,total:Pe,color:xe,highlightState:we}){const je=(0,ue.wW)(Bo),_e=ae===0?J/6:ae,[pt,dt]=cm(w,J,_e);if(!(w.endAngle-w.startAngle>=.3))return null;let Ft=he.includes(jr.Name)?Math.min(Math.max(J/150*14,12),30):Math.min(Math.max(J/100*14,12),36);return I.createElement("g",{className:Lo(we,je)},I.createElement("text",{fill:xe,x:pt,y:dt,dy:".33em",fontSize:Ft,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},he.includes(jr.Name)&&I.createElement("tspan",{x:pt,dy:"1.2em"},w.data.display.title),he.includes(jr.Value)&&I.createElement("tspan",{x:pt,dy:"1.2em"},(0,Wn.zc)(w.data.display)),he.includes(jr.Percent)&&I.createElement("tspan",{x:pt,dy:"1.2em"},(w.data.display.numeric/Pe*100).toFixed(w.data.field.decimals??0)+"%")))}function jl(w,J,ae){return ae.mode==="multi"?w.arcs.filter(he=>{const Pe=he.data.field;return Pe&&!Pe.custom?.hideFrom?.tooltip&&!Pe.custom?.hideFrom?.viz}).map(he=>({color:he.data.display.color??nt.R,label:he.data.display.title,value:(0,Wn.zc)(he.data.display),isActive:he.index===J.index})):[{color:J.data.display.color??nt.R,label:J.data.display.title,value:(0,Wn.zc)(J.data.display)}]}function cm(w,J,ae){const he=(J+ae)/2,Pe=(+w.startAngle+ +w.endAngle)/2-Math.PI/2;return[Math.cos(Pe)*he,Math.sin(Pe)*he]}function dm(w,J){return(0,Gl.Z)(w).darken(20*(J.isDark?1:-.7)).spin(4).toRgbString()}function um(w,J){return(0,Gl.Z)(w).darken(10*(J.isDark?1:-.7)).spin(-4).toRgbString()}function Yl(w,J,ae,he=16){const Pe=Math.min(J,w),xe=(Pe-he*2)/2,we=ae===Gr.Pie?xe:Math.max(xe/3,20),je=xe-we,_e=(Pe-he*2)/2,pt=1-(xe-je)/xe;return{position:_e+he,size:Pe,outerRadius:xe,innerRadius:je,gradientFromOffset:pt}}var rl=(w=>(w[w.Highlighted=0]="Highlighted",w[w.Deemphasized=1]="Deemphasized",w[w.Normal=2]="Normal",w))(rl||{});function Si(w,J){return w?w===J.data.display.title?0:1:2}function Lo(w,J){switch(w){case 0:return J.svgArg.highlighted;case 1:return J.svgArg.deemphasized;case 2:default:return J.svgArg.normal}}const Bo=w=>({container:T.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:T.css`
        transition: all 200ms ease-in-out;
      `,highlighted:T.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:T.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:T.css`
      ${(0,Fi.getTooltipContainerStyles)(w)}
    `}),hd={displayMode:at.jK.List,showLegend:!0,placement:"right",calcs:[],values:[oo.Percent]};function mm(w){const{data:J,timeZone:ae,fieldConfig:he,replaceVariables:Pe,width:xe,height:we,options:je,id:_e}=w,pt=(0,ue.l4)(),dt=gm(),It=(0,am.nG)({fieldConfig:he,reduceOptions:je.reduceOptions,data:J.series,theme:pt,replaceVariables:Pe,timeZone:ae});return Ql(It)?I.createElement(ms.AY,{width:xe,height:we,legend:fm(w,It)},(Ft,St)=>I.createElement(si,{width:Ft,height:St,highlightedTitle:dt,fieldDisplayValues:It,tooltipOptions:je.tooltip,pieType:je.pieType,displayLabels:je.displayLabels})):I.createElement(Es.Z,{panelId:_e,fieldConfig:he,data:J})}function fm(w,J){const ae=w.options.legend??hd;if(ae.showLegend===!1)return;const he=J.filter(gd).reduce(ai,0),Pe=J.sort((xe,we)=>isNaN(xe.display.numeric)?1:isNaN(we.display.numeric)?-1:we.display.numeric-xe.display.numeric).map((xe,we)=>{const je=xe.field.custom?.hideFrom??{};if(je.legend)return;const _e=Boolean(je.viz),pt=xe.display;return{label:pt.title??"",color:pt.color??nt.R,yAxis:1,disabled:_e,getItemKey:()=>(pt.title??"")+we,getDisplayValues:()=>{const dt=ae.values??[];let It=[];if(dt.includes(oo.Value)&&It.push({numeric:pt.numeric,text:(0,Wn.zc)(pt),title:"Value"}),dt.includes(oo.Percent)){const Ft=_e?0:pt.numeric/he,St=Ft*100;It.push({numeric:Ft,percent:St,text:_e||isNaN(Ft)?w.fieldConfig.defaults.noValue??"-":St.toFixed(xe.field.decimals??0)+"%",title:dt.length>1?"Percent":""})}return It}}}).filter(xe=>!!xe);return I.createElement(Ya.l,{items:Pe,seriesVisibilityChangeBehavior:dd.Y.Hide,placement:ae.placement,displayMode:ae.displayMode})}function Ql(w){return w.some(J=>J.view?.dataFrame.length)}function gm(){const[w,J]=(0,I.useState)(),{eventBus:ae}=(0,ma.R9)();return(0,I.useEffect)(()=>{const he=we=>{J(we.payload.dataId)},Pe=we=>{J(void 0)},xe=new Cr.w0;return xe.add(ae.getStream(Js.es).subscribe({next:he})),xe.add(ae.getStream(Js.xH).subscribe({next:Pe})),()=>{xe.unsubscribe()}},[J,ae]),w}const pm=(w,J,ae)=>{if(J==="grafana-piechart-panel"&&ae.angular){const he=ae.angular,Pe=[];let xe=w.options;if(he.aliasColors)for(const we of Object.keys(he.aliasColors)){const je=he.aliasColors[we];je&&Pe.push({matcher:{id:ho.mi.byName,options:we},properties:[{id:Ae.qb.Color,value:{mode:nt.S.Fixed,fixedColor:je}}]})}if(w.fieldConfig={overrides:Pe,defaults:{unit:he.format,decimals:he.decimals?he.decimals:0}},xe.legend={placement:"right",values:[],displayMode:at.jK.Table,showLegend:!0,calcs:[]},he.valueName)switch(xe.reduceOptions={calcs:[]},he.valueName){case"current":xe.reduceOptions.calcs=["lastNotNull"];break;case"min":xe.reduceOptions.calcs=["min"];break;case"max":xe.reduceOptions.calcs=["max"];break;case"avg":xe.reduceOptions.calcs=["mean"];break;case"total":xe.reduceOptions.calcs=["sum"];break}switch(he.legendType){case"Under graph":xe.legend.placement="bottom";break;case"Right side":xe.legend.placement="right";break}switch(he.pieType){case"pie":xe.pieType=Gr.Pie;break;case"donut":xe.pieType=Gr.Donut;break}return he.legend&&(he.legend.show||(xe.legend.showLegend=!1),he.legend.values&&xe.legend.values.push(oo.Value),he.legend.percentage&&xe.legend.values.push(oo.Percent)),he.legendType==="On graph"&&(xe.legend.showLegend=!1,xe.displayLabels=[jr.Name],he.legend.values&&xe.displayLabels.push(jr.Value),he.legend.percentage&&xe.displayLabels.push(jr.Percent)),xe}return{}};class _l{getSuggestionsForData(J){const ae=J.getListAppender({name:xs.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[jr.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Pe=>{Pe.options.legend.showLegend=!1}}}),{dataSummary:he}=J;if(he.hasNumberField){if(he.hasStringField&&he.frameCount===1){if(he.rowCountTotal>30||he.rowCountTotal<2)return;ae.append({name:xs.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ae.append({name:xs.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Gr.Donut}});return}he.numberFieldCount>30||he.numberFieldCount<2||(ae.append({name:xs.y.PieChart}),ae.append({name:xs.y.PieChartDonut,options:{pieType:Gr.Donut}}))}}}const hm=new le.c(mm).setPanelChangeHandler(pm).useFieldConfig({disableStandardOptions:[Ae.qb.Thresholds],standardOptions:{[Ae.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:nt.S.PaletteClassic}}},useCustomConfig:w=>{Gn.B(w)}}).setPanelOptions(w=>{(0,ko.j)(w),w.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Gr.Pie,label:"Pie"},{value:Gr.Donut,label:"Donut"}]},defaultValue:Gr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:jr.Percent,label:"Percent"},{value:jr.Name,label:"Name"},{value:jr.Value,label:"Value"}]}}),$n.L(w),Ra.J(w,!1),w.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:oo.Percent,label:"Percent"},{value:oo.Value,label:"Value"}]},showIf:J=>J.legend.showLegend!==!1})}).setSuggestionsSupplier(new _l);var vd=e(98967),Ed=e(49616),Zl=e(59420);const ol=({data:w,alignedData:J,seriesIdx:ae,datapointIdx:he,timeZone:Pe,onAnnotationAdd:xe})=>{const we=(0,ue.l4)();if(!w||he==null)return null;const je=J.fields[ae],_e=[],pt=new Set;if(je.getLinks){const Bn=je.values[he],Yn=je.display?je.display(Bn):{text:`${Bn}`,numeric:+Bn};je.getLinks({calculatedValue:Yn,valueRowIndex:he}).forEach(ca=>{const na=`${ca.title}/${ca.href}`;pt.has(na)||(_e.push(ca),pt.add(na))})}const dt=J.fields[0],It=dt.display||(0,ra.U_)({field:dt,timeZone:Pe,theme:we}),Ft=je.state?.origin,St=je.display||(0,ra.U_)({field:je,timeZone:Pe,theme:we}),Xt=je.values[he],cn=St(Xt),qt=Ft?(0,wt.CZ)(w[Ft.frameIndex].fields[Ft.fieldIndex],w[Ft.frameIndex],w):null,Ut=(0,un.iK)(je,he);let gn;Ut&&(gn=dt.values[Ut]);const nn=dt.values[he];let Sn=null,Kn=null;if(gn){const Bn=gn&&(0,un.Y)(gn-nn);Kn=I.createElement(I.Fragment,null,I.createElement("br",null),I.createElement("strong",null,"Duration:")," ",Bn),Sn=I.createElement(I.Fragment,null," to"," ",I.createElement("strong",null,It(dt.values[Ut]).text))}return I.createElement("div",null,I.createElement("div",{style:{fontSize:we.typography.bodySmall.fontSize}},qt,I.createElement("br",null),I.createElement(ro.V,{label:cn.text,color:cn.color||nt.R,isActive:!0}),"From ",I.createElement("strong",null,It(dt.values[he]).text),Sn,Kn),I.createElement("div",{style:{margin:we.spacing(1,-1,-1,-1),borderTop:`1px solid ${we.colors.border.weak}`}},xe&&I.createElement(Wr.s,{label:"Add annotation",icon:"comment-alt",onClick:xe}),_e.length>0&&_e.map((Bn,Yn)=>I.createElement(Wr.s,{key:Yn,icon:"external-link-alt",target:Bn.target,label:Bn.title,url:Bn.href,onClick:Bn.onClick}))))};ol.displayName="StateTimelineTooltip";const il=10,yd=({data:w,timeRange:J,timeZone:ae,options:he,width:Pe,height:xe,replaceVariables:we,onChangeTimeRange:je})=>{const _e=(0,ue.l4)(),pt=(0,I.useRef)(void 0),dt=(0,I.useRef)(!1),[It,Ft]=(0,I.useState)(void 0),[St,Xt]=(0,I.useState)(null),[cn,qt]=(0,I.useState)(null),[Ut,gn]=(0,I.useState)(null),[nn,Sn]=(0,I.useState)(!1),[Kn,Bn]=(0,I.useState)(!1),{sync:Yn,canAddAnnotations:ca}=(0,ma.R9)(),na=()=>{dt.current=!1,Xt(null),Bn(!1)},Da=()=>{dt.current=!dt.current,Bn(dt.current)},{frames:Pa,warn:xa}=(0,I.useMemo)(()=>(0,un.AR)(w.series,he.mergeValues??!0,J,_e),[w.series,he.mergeValues,J,_e]),Ss=(0,I.useMemo)(()=>(0,un.SA)(Pa,he.legend,_e),[Pa,he.legend,_e]),Qa=(0,I.useMemo)(()=>Hi(he.timezone,ae),[he.timezone,ae]),Ea=(0,I.useCallback)((os,Ys,Ms,Qs)=>{const _s=Pa??[],Na=_s.reduce((ua,Ua)=>ua+Ua.fields.filter(Xa=>Xa.type!==Nt.fS.time).length,0);return Ys===null||Ms===null||!os.meta?.transformations?.length&&os.fields.length-1!==Na||!os.fields[Ys]?null:I.createElement(I.Fragment,null,Kn&&I.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},I.createElement(Yt.P,{onClick:na,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),I.createElement(ol,{data:_s,alignedData:os,seriesIdx:Ys,datapointIdx:Ms,timeZone:ae,onAnnotationAdd:Qs}))},[ae,Pa,Kn]);if(!Pa||xa)return I.createElement("div",{className:"panel-empty"},I.createElement("p",null,xa??"No data found in response"));if(Pa.length===1){const os=(0,Di.MB)(Pa[0])}const Ja=Boolean(ca&&ca());return I.createElement(Zl.K,{theme:_e,frames:Pa,structureRev:w.structureRev,timeRange:J,timeZone:Qa,width:Pe,height:xe,legendItems:Ss,...he,mode:un.KN.Changes},(os,Ys)=>(pt.current!==os&&(pt.current=kt({config:os,onUPlotClick:Da,setFocusedSeriesIdx:qt,setFocusedPointIdx:gn,setCoords:Xt,setHover:Ft,isToolTipOpen:dt,isActive:nn,setIsActive:Sn,sync:Yn})),I.createElement(I.Fragment,null,I.createElement(wi.R,{config:os,onZoom:je}),I.createElement(co,{config:os,onChangeTimeRange:je}),w.annotations&&I.createElement(Ws,{annotations:w.annotations,config:os,timeZone:ae}),Ja?I.createElement(_r,{data:Ys,timeZone:ae,config:os},({startAnnotating:Ms})=>he.tooltip.mode===at.f3.None||Ut===null||!nn&&Yn&&Yn()===Dr.m.Crosshair?null:I.createElement(Gs.h_,null,It&&St&&cn&&I.createElement(Ir.S,{position:{x:St.viewport.x,y:St.viewport.y},offset:{x:il,y:il},allowPointerEvents:dt.current},Ea(Ys,cn,Ut,()=>{Ms({coords:{plotCanvas:St.canvas,viewport:St.viewport}}),na()})))):I.createElement(Gs.h_,null,he.tooltip.mode!==at.f3.None&&It&&St&&I.createElement(Ir.S,{position:{x:St.viewport.x,y:St.viewport.y},offset:{x:il,y:il},allowPointerEvents:dt.current},Ea(Ys,cn,Ut))))))};var Pd=e(32195);const vm=(w,J,ae)=>{let he=w.options??{};if(J==="natel-discrete-panel"&&ae.angular){const Pe=ae.angular,xe=w.fieldConfig??{defaults:{},overrides:[]};Pe.units&&(xe.defaults.unit=Pe.units);const we={fillOpacity:100,lineWidth:0};xe.defaults.custom=we,he.mergeValues=!0;const je={type:Pd.H.ValueToText,options:{}};if(xe.defaults.mappings=[je],(0,B.isArray)(Pe.colorMaps))for(const _e of Pe.colorMaps){const pt=_e.color;pt&&(je.options[_e.text]={color:pt})}if((0,B.isArray)(Pe.valueMaps))for(const _e of Pe.valueMaps){const pt=_e.text,dt=_e.value;if(pt&&dt){let It=je.options[dt];It?It.text=pt:je.options[dt]={text:pt}}}if((0,B.isArray)(Pe.rangeMaps))for(const _e of Pe.rangeMaps){let pt=+_e.from,dt=+_e.to;const It=_e.text;It&&xe.defaults.mappings.push({type:Pd.H.RangeToText,options:{from:pt,to:dt,result:{text:It}}})}w.fieldConfig=xe}return he},Zm=Object.freeze([0,0]),ll={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:at.Jp.Auto},Cd={fillOpacity:70,lineWidth:0};class Em{getSuggestionsForData(J){const{dataSummary:ae}=J;if(!ae.hasData||!ae.hasTimeField||!ae.hasStringField&&!ae.hasNumberField||ae.numberFieldCount>=30||ae.preferredVisualisationType==="logs")return;J.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:xs.y.StateTimeline})}}const ym=new le.c(yd).setPanelChangeHandler(vm).useFieldConfig({standardOptions:{[Ae.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:nt.S.ContinuousGrYlRd}}},useCustomConfig:w=>{w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Cd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Cd.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:Ed.c,override:Ed.c,shouldApply:J=>J.type!==Nt.fS.time,process:ct.kG})}}).setPanelOptions(w=>{w.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:ll.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:at.Jp.Auto,label:"Auto"},{value:at.Jp.Always,label:"Always"},{value:at.Jp.Never,label:"Never"}]},defaultValue:ll.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:ll.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:ll.rowHeight}),Ra.J(w,!1),$n.L(w,!0)}).setSuggestionsSupplier(new Em).setDataSupport({annotations:!0}),Dd=({data:w,alignedData:J,seriesIdx:ae,datapointIdx:he,timeZone:Pe})=>{const xe=(0,ue.l4)();if(!w||he==null)return null;const we=J.fields[ae],je=[],_e=new Set;if(we.getLinks){const qt=we.values[he],Ut=we.display?we.display(qt):{text:`${qt}`,numeric:+qt};we.getLinks({calculatedValue:Ut,valueRowIndex:he}).forEach(gn=>{const nn=`${gn.title}/${gn.href}`;_e.has(nn)||(je.push(gn),_e.add(nn))})}const pt=J.fields[0],dt=pt.display||(0,ra.U_)({field:pt,timeZone:Pe,theme:xe}),It=we.state?.origin,Ft=we.display||(0,ra.U_)({field:we,timeZone:Pe,theme:xe}),St=we.values[he],Xt=Ft(St),cn=It?(0,wt.CZ)(w[It.frameIndex].fields[It.fieldIndex],w[It.frameIndex],w):null;return I.createElement("div",null,I.createElement("div",{style:{fontSize:xe.typography.bodySmall.fontSize}},I.createElement("strong",null,dt(pt.values[he]).text),I.createElement("br",null),I.createElement(ro.V,{label:Xt.text,color:Xt.color||nt.R,isActive:!0}),cn),je.length>0&&I.createElement("div",{style:{margin:xe.spacing(1,-1,-1,-1),borderTop:`1px solid ${xe.colors.border.weak}`}},je.map((qt,Ut)=>I.createElement(Wr.s,{key:Ut,icon:"external-link-alt",target:qt.target,label:qt.title,url:qt.href,onClick:qt.onClick}))))};Dd.displayName="StatusHistoryTooltip";const bd=10,Pm=({data:w,timeRange:J,timeZone:ae,options:he,width:Pe,height:xe,onChangeTimeRange:we})=>{const je=(0,ue.l4)(),_e=(0,I.useRef)(void 0),pt=(0,I.useRef)(!1),[dt,It]=(0,I.useState)(void 0),[Ft,St]=(0,I.useState)(null),[Xt,cn]=(0,I.useState)(null),[qt,Ut]=(0,I.useState)(null),[gn,nn]=(0,I.useState)(!1),[Sn,Kn]=(0,I.useState)(!1),{sync:Bn}=(0,ma.R9)(),Yn=()=>{pt.current=!1,St(null),Kn(!1)},ca=()=>{pt.current=!pt.current,Kn(pt.current)},{frames:na,warn:Da}=(0,I.useMemo)(()=>(0,un.AR)(w.series,!1,J,je),[w.series,J,je]),Pa=(0,I.useMemo)(()=>(0,un.SA)(na,he.legend,je),[na,he.legend,je]),xa=(0,I.useCallback)((Ea,Ja,os)=>{const Ys=na??[],Ms=Ys.reduce((Qs,_s)=>Qs+_s.fields.filter(Na=>Na.type!==Nt.fS.time).length,0);return Ja===null||os===null||!Ea.meta?.transformations?.length&&Ea.fields.length-1!==Ms||!Ea.fields[Ja]?null:I.createElement(I.Fragment,null,Sn&&I.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},I.createElement(Yt.P,{onClick:Yn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),I.createElement(Dd,{data:Ys,alignedData:Ea,seriesIdx:Ja,datapointIdx:os,timeZone:ae}))},[ae,na,Sn]),Ss=Ea=>he.tooltip.mode===at.f3.None||qt===null||!gn&&Bn&&Bn()===Dr.m.Crosshair?null:I.createElement(Gs.h_,null,dt&&Ft&&Xt&&I.createElement(Ir.S,{position:{x:Ft.viewport.x,y:Ft.viewport.y},offset:{x:bd,y:bd},allowPointerEvents:pt.current},xa(Ea,Xt,qt))),Qa=(0,I.useMemo)(()=>Hi(he.timezone,ae),[he.timezone,ae]);return!na||Da?I.createElement("div",{className:"panel-empty"},I.createElement("p",null,Da??"No data found in response")):na[0].length>Pe/2?I.createElement("div",{className:"panel-empty"},I.createElement("p",null,"Too many points to visualize properly. ",I.createElement("br",null),"Update the query to return fewer points. ",I.createElement("br",null),"(",na[0].length," points received)")):I.createElement(Zl.K,{theme:je,frames:na,structureRev:w.structureRev,timeRange:J,timeZone:Qa,width:Pe,height:xe,legendItems:Pa,...he,mode:un.KN.Samples},(Ea,Ja)=>(_e.current!==Ea&&(_e.current=kt({config:Ea,onUPlotClick:ca,setFocusedSeriesIdx:cn,setFocusedPointIdx:Ut,setCoords:St,setHover:It,isToolTipOpen:pt,isActive:gn,setIsActive:nn})),I.createElement(I.Fragment,null,I.createElement(wi.R,{config:Ea,onZoom:we}),Ss(Ja),I.createElement(co,{config:Ea,onChangeTimeRange:we}))))},Jm=Object.freeze([0,0]),Xm={colWidth:.9,rowHeight:.9,showValue:at.Jp.Auto},xd={fillOpacity:70,lineWidth:1};class Jl{getSuggestionsForData(J){const{dataSummary:ae}=J;if(!ae.hasData||!ae.hasTimeField||!ae.hasStringField&&!ae.hasNumberField||ae.numberFieldCount>=30||ae.rowCountMax>100||ae.preferredVisualisationType==="logs")return;J.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:nt.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Pe=>{Pe.options.colWidth=.7}}}).append({name:xs.y.StatusHistory})}}const cl=new le.c(Pm).useFieldConfig({standardOptions:{[Ae.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:nt.S.Thresholds}}},useCustomConfig:w=>{w.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:xd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:xd.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(w=>{w.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:at.Jp.Auto,label:"Auto"},{value:at.Jp.Always,label:"Always"},{value:at.Jp.Never,label:"Never"}]},defaultValue:at.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),Ra.J(w,!1),$n.L(w,!0)}).setSuggestionsSupplier(new Jl);var ri=e(30779);const oi={align:"auto",inspect:!1,cellOptions:{type:at.h2.Auto}};var Cm=e(8944);function Sd({onChange:w,value:J,context:ae}){const he=Pe=>{Pe?.currentTarget.checked&&(ae.options.footer.show=!1),w(Pe?.currentTarget.checked)};return I.createElement(Cm.r,{value:Boolean(J),onChange:he})}function Dm({cellOptions:w,onChange:J}){const ae=Pe=>{w.mode=Pe,J(w)},he=Pe=>{w.valueDisplayMode=Pe,J(w)};return I.createElement(va.Stack,{direction:"column",gap:0},I.createElement(Hs.g,{label:"Gauge display mode"},I.createElement(lo.S,{value:w?.mode??at.QH.Gradient,onChange:ae,options:Md})),I.createElement(Hs.g,{label:"Value display"},I.createElement(lo.S,{value:w?.valueDisplayMode??at.M8.Text,onChange:he,options:Xl})))}const Md=[{value:at.QH.Basic,label:"Basic"},{value:at.QH.Gradient,label:"Gradient"},{value:at.QH.Lcd,label:"Retro LCD"}],Xl=[{value:at.M8.Color,label:"Value color"},{value:at.M8.Text,label:"Text color"},{value:at.M8.Hidden,label:"Hidden"}],Mi=[{value:at.v7.Basic,label:"Basic"},{value:at.v7.Gradient,label:"Gradient"}],Xr=({cellOptions:w,onChange:J})=>{const ae=he=>{w.mode=he,J(w)};return I.createElement(Hs.g,{label:"Background display mode"},I.createElement(lo.S,{value:w?.mode??at.v7.Gradient,onChange:ae,options:Mi}))};var Td=e(59472),No=e(24115);const ql=["drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"],ec=w=>{const{cellOptions:J,onChange:ae}=w,he=(0,I.useMemo)(()=>{const we=(0,to.F)(No.U);return(0,Td.j)(we,"ChartCell")},[]),Pe=(0,ue.wW)(Id),xe={...No.U,...J};return I.createElement(rr.wc,null,he.list(ql.map(we=>`custom.${we}`)).map(we=>{if(we.showIf&&!we.showIf(xe))return null;const je=we.editor,_e=we.path;return I.createElement(Hs.g,{label:we.name,key:we.id,className:Pe.field},I.createElement(je,{onChange:pt=>ae({...J,[_e]:pt}),value:(Od(_e,xe)?xe[_e]:void 0)??we.defaultValue,item:we,context:{data:[]}}))}))};function Od(w,J){return w in J}const Id=()=>({field:T.css`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Rd=({value:w,onChange:J})=>{const ae=w.type,he=(0,ue.wW)(Oi),Pe=Ti.find(pt=>pt.value.type===ae);let[xe,we]=(0,I.useState)({});const je=pt=>{pt.value!==void 0&&(w=pt.value,xe[w.type]!==void 0&&Object.keys(xe[w.type]).length>1&&(w=(0,B.merge)(w,xe[w.type])),J(w))},_e=pt=>{xe[w.type]=(0,B.merge)(w,pt),we(xe),J(xe[w.type])};return I.createElement("div",{className:he.fixBottomMargin},I.createElement(Hs.g,null,I.createElement(ut.Ph,{options:Ti,value:Pe,onChange:je})),ae===at.h2.Gauge&&I.createElement(Dm,{cellOptions:w,onChange:_e}),ae===at.h2.ColorBackground&&I.createElement(Xr,{cellOptions:w,onChange:_e}),ae===at.h2.Sparkline&&I.createElement(ec,{cellOptions:w,onChange:_e}))},io={value:{type:at.h2.Sparkline},label:"Sparkline"},Ti=[{value:{type:at.h2.Auto},label:"Auto"},...be.v.featureToggles.timeSeriesTable?[io]:[],{value:{type:at.h2.ColorText},label:"Colored text"},{value:{type:at.h2.ColorBackground},label:"Colored background"},{value:{type:at.h2.Gauge},label:"Gauge"},{value:{type:at.h2.JSONView},label:"JSON View"},{value:{type:at.h2.Image},label:"Image"}],Oi=w=>({fixBottomMargin:(0,T.css)({marginBottom:w.spacing(-2)})});var Ad=e(69098);const Ld=w=>(!w.pluginVersion&&w.columns&&console.log("Was angular table",w),w.options),Bd={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Nd={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},dl={cell:"color-background",row:"color-background",value:"color-text"},Ud=(w,J)=>[-1/0,...w].map((ae,he)=>({color:J[he],value:(0,B.isNumber)(ae)?ae:parseInt(ae,10)})),wd=(w,J)=>{const ae=w.transformations??[];if(Object.keys(Bd).includes(J.transform)){const he={reducers:[]};J.transform==="timeseries_aggregations"&&(he.includeTimeField=!1,he.reducers=J.columns.map(Pe=>Nd[Pe.value])),ae.push({id:Bd[J.transform],options:he})}return ae},Wd=w=>{const ae={matcher:{id:/^\/.*\/$/.test(w.pattern)?ho.mi.byRegexp:ho.mi.byName,options:w.pattern},properties:[]};return w.alias&&ae.properties.push({id:"displayName",value:w.alias}),w.unit&&ae.properties.push({id:"unit",value:w.unit}),w.decimals&&ae.properties.push({id:"decimals",value:w.decimals}),w.type==="date"&&ae.properties.push({id:"unit",value:`time: ${w.dateFormat}`}),w.link&&ae.properties.push({id:"links",value:[{title:(0,B.defaultTo)(w.linkTooltip,""),url:(0,B.defaultTo)(w.linkUrl,""),targetBlank:(0,B.defaultTo)(w.linkTargetBlank,!1)}]}),w.colorMode&&ae.properties.push({id:"custom.cellOptions",value:{type:dl[w.colorMode]}}),w.align&&ae.properties.push({id:"custom.align",value:w.align==="auto"?null:w.align}),w.thresholds?.length&&ae.properties.push({id:"thresholds",value:{mode:Ad.H.Absolute,steps:Ud(w.thresholds,w.colors)}}),ae},bm=w=>{let J={custom:{}};if(w){if(J=(0,B.omitBy)({unit:w.unit,decimals:w.decimals,displayName:w.alias,custom:{align:w.align==="auto"?null:w.align}},B.isNil),w.thresholds.length){const ae={mode:Ad.H.Absolute,steps:Ud(w.thresholds,w.colors)};J.thresholds=ae}w.colorMode&&(J.custom.cellOptions={type:dl[w.colorMode]})}return J},Fd=(w,J,ae)=>{if(J==="table-old"&&ae.angular){const he=ae.angular,Pe=wd(w,he),xe=he.styles.find(_e=>_e.pattern==="/.*/"),we=bm(xe),je=he.styles.filter(_e=>_e.pattern!=="/.*/").map(Wd);w.transformations=Pe,w.fieldConfig={defaults:we,overrides:je}}return{}},$d=Object.freeze([0,0]),Ii={cellHeight:at.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class ul{getSuggestionsForData(J){const ae=J.getListAppender({name:xs.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:he=>{he.fieldConfig.defaults.custom.minWidth=50}}});J.dataSummary.fieldCount===0?ae.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ae.append({})}}const Ri="Table footer",tc=["Cell options"],xm=new le.c(Gu).setPanelChangeHandler(Fd).setMigrationHandler(Ld).useFieldConfig({useCustomConfig:w=>{w.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:oi.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:oi.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:oi.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Rd,override:Rd,defaultValue:oi.cellOptions,process:ct.kG,category:tc,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:tc,showIf:J=>J.cellOptions.type===at.h2.Auto||J.cellOptions.type===at.h2.JSONView||J.cellOptions.type===at.h2.ColorText||J.cellOptions.type===at.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:oi.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(w=>{w.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:Ii.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:Ii.cellHeight,settings:{options:[{value:at.Ss.Sm,label:"Small"},{value:at.Ss.Md,label:"Medium"},{value:at.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[Ri],name:"Show table footer",defaultValue:Ii.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Ri],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:ri.S.get("stats-picker").editor,defaultValue:[Aa.gz.sum],showIf:J=>J.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Ri],name:"Count rows",description:"Display a single count for all data rows",defaultValue:Ii.footer?.countRows,showIf:J=>J.footer?.reducer?.length===1&&J.footer?.reducer[0]===Aa.gz.count}).addMultiSelect({path:"footer.fields",category:[Ri],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async J=>{const ae=[];if(J&&J.data&&J.data.length>0){const he=J.data[0];for(const Pe of he.fields)if(Pe.type===Nt.fS.number){const xe=(0,wt.CZ)(Pe,he,J.data),we=Pe.name;ae.push({value:we,label:xe})}}return ae}},defaultValue:"",showIf:J=>J.footer?.show&&!J.footer?.countRows||J.footer?.reducer?.length===1&&J.footer?.reducer[0]!==Aa.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Sd})}).setSuggestionsSupplier(new ul);var Sm=e(54391),Ai=e(93006),Mm=e(2631);const qm=Object.freeze([0,0]);var Lr=(w=>(w.Code="code",w.HTML="html",w.Markdown="markdown",w))(Lr||{}),Kd=(w=>(w.Go="go",w.Html="html",w.Json="json",w.Markdown="markdown",w.Plaintext="plaintext",w.Sql="sql",w.Typescript="typescript",w.Xml="xml",w.Yaml="yaml",w))(Kd||{});const ef="plaintext",Li={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Vd={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function ml(w){const J=(0,ue.wW)(nc),[ae,he]=(0,I.useState)({mode:w.options.mode,content:Uo(w.options,w.replaceVariables,Ge.ZP.disableSanitizeHtml)});if((0,Ai.Z)(()=>{const{options:Pe,replaceVariables:xe}=w,we=Uo(Pe,xe,Ge.ZP.disableSanitizeHtml);(we!==ae.content||Pe.mode!==ae.mode)&&he({mode:Pe.mode,content:we})},100,[w]),ae.mode===Lr.Code){const Pe=w.options.code??Li;return I.createElement($l.p,{key:`${Pe.showLineNumbers}/${Pe.showMiniMap}`,value:ae.content,language:Pe.language??Li.language,width:w.width,height:w.height,containerStyles:J.codeEditorContainer,showMiniMap:Pe.showMiniMap,showLineNumbers:Pe.showLineNumbers,readOnly:!0})}return I.createElement(We.$,{autoHeightMin:"100%"},I.createElement(Sm.Z,{html:ae.content,className:J.markdown,"data-testid":"TextPanel-converted-content"}))}function Uo(w,J,ae){let{mode:he,content:Pe}=w;if(!Pe)return"";switch(Pe=J(Pe,{},w.code?.language==="json"?"json":"html"),he){case Lr.Code:break;case Lr.HTML:ae||(Pe=Cl.QX.sanitizeTextPanelContent(Pe));break;case Lr.Markdown:default:Pe=(0,Mm.x)(Pe,{noSanitize:ae})}return Pe}const nc=w=>({codeEditorContainer:T.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${w.colors.background.primary};
    }
  `,markdown:(0,T.cx)("markdown-html",T.css`
      height: 100%;
    `)});var zd=e(89050),Hd=e(25503);const Tm=({value:w,onChange:J,context:ae})=>{const he=(0,I.useMemo)(()=>ae.options?.mode??Lr.Markdown,[ae]),Pe=(0,ue.wW)(ii),xe=()=>ae.getSuggestions?ae.getSuggestions().map(we=>(0,Hd.T)(we)):[];return I.createElement("div",{className:(0,T.cx)(Pe.editorBox)},I.createElement(zd.Z,{disableHeight:!0},({width:we})=>we===0?null:I.createElement($l.p,{value:w,onBlur:J,onSave:J,language:he,width:we,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:xe})))},ii=w=>({editorBox:T.css`
    label: editorBox;
    border: 1px solid ${w.colors.border.medium};
    border-radius: ${w.shape.borderRadius(1)};
    margin: ${w.spacing(.5)} 0;
    width: 100%;
  `}),kd=w=>{const J=parseFloat(w.pluginVersion||"6.1");let ae=w.options;if(w.hasOwnProperty("content")&&w.hasOwnProperty("mode")){const Pe=w,xe=Pe.content,we=Pe.mode;delete Pe.content,delete Pe.mode,J<7.1&&(ae={content:xe,mode:we})}return[Lr.Code,Lr.HTML,Lr.Markdown].find(Pe=>Pe===ae.mode)||(ae={...ae,mode:Lr.Markdown}),ae},_=new le.c(ml).setPanelOptions(w=>{w.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Lr.Markdown,label:"Markdown"},{value:Lr.HTML,label:"HTML"},{value:Lr.Code,label:"Code"}]},defaultValue:Vd.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Kd).map(J=>({value:J,label:J}))},defaultValue:Li.language,showIf:J=>J.mode===Lr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Li.showLineNumbers,showIf:J=>J.mode===Lr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Li.showMiniMap,showIf:J=>J.mode===Lr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Tm,defaultValue:Vd.content})}).setMigrationHandler(kd);var k=e(39393),X=e(16366),pe=e(13512);class Se{getSuggestionsForData(J){const{dataSummary:ae}=J;if(!ae.hasTimeField||!ae.hasNumberField||ae.rowCountTotal<2)return;const he=J.getListAppender({name:xs.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.options.legend.showLegend=!1,xe.fieldConfig?.defaults.custom?.drawStyle!==at.l8.Bars&&(xe.fieldConfig.defaults.custom.lineWidth=Math.max(xe.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Pe=100;if(he.append({name:xs.y.LineChart}),ae.rowCountMax<200&&he.append({name:xs.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:at.KC.Smooth}},overrides:[]}}),ae.numberFieldCount===1){he.append({name:xs.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),he.append({name:xs.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:nt.S.ContinuousGrYlRd},custom:{gradientMode:at.FI.Scheme,lineInterpolation:at.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ae.rowCountMax<Pe&&(he.append({name:xs.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:at.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:at.FI.Hue}},overrides:[]}}),he.append({name:xs.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:nt.S.ContinuousGrYlRd},custom:{drawStyle:at.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:at.FI.Scheme}},overrides:[]}}));return}he.append({name:xs.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:at.o0.Normal,group:"A"}}},overrides:[]}}),he.append({name:xs.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:at.o0.Percent,group:"A"}}},overrides:[]}}),ae.rowCountTotal/ae.numberFieldCount<Pe&&(he.append({name:xs.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:at.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:at.FI.Hue,stacking:{mode:at.o0.Normal,group:"A"}}},overrides:[]}}),he.append({name:xs.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:at.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:at.FI.Hue,stacking:{mode:at.o0.Percent,group:"A"}}},overrides:[]}}))}}function ze(w){const J=(0,Mn.h4)().getCurrent()?.getPanelById(w);if(J){const ae=J.transformations?[...J.transformations]:[];return ae.push({id:pe.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:ae}}}const ke=({data:w,timeRange:J,timeZone:ae,width:he,height:Pe,options:xe,fieldConfig:we,onChangeTimeRange:je,replaceVariables:_e,id:pt})=>{const{sync:dt,canAddAnnotations:It,onThresholdsChange:Ft,canEditThresholds:St,showThresholds:Xt,onSplitOpen:cn}=(0,ma.R9)(),qt=(Kn,Bn)=>(0,ui.a_)({field:Kn,rowIndex:Bn,splitOpenFn:cn,range:J}),Ut=(0,I.useMemo)(()=>zi(w.series,Ge.vc.theme2,J),[w.series,J]),gn=(0,I.useMemo)(()=>Hi(xe.timezone,ae),[xe.timezone,ae]),nn=(0,I.useMemo)(()=>{if(Ut?.length&&Ut.every(Kn=>Kn.meta?.type===k.P.TimeSeriesLong)){const Kn=ze(pt);return{message:"Long data must be converted to wide",suggestions:Kn?[Kn]:void 0}}},[Ut,pt]);if(!Ut||nn)return I.createElement(Es.Z,{panelId:pt,message:nn?.message,fieldConfig:we,data:w,needsTimeField:!0,needsNumberField:!0,suggestions:nn?.suggestions});const Sn=Boolean(It&&It());return I.createElement(di.p,{frames:Ut,structureRev:w.structureRev,timeRange:J,timeZone:gn,width:he,height:Pe,legend:xe.legend,options:xe},(Kn,Bn)=>(Bn.fields.some(Yn=>Boolean(Yn.config.links?.length))&&(Bn=Rc(Bn,Ut,_e,ae)),I.createElement(I.Fragment,null,I.createElement(X.C,{config:Kn}),I.createElement(wi.R,{config:Kn,onZoom:je}),xe.tooltip.mode===at.f3.None||I.createElement($e.i,{frames:Ut,data:Bn,config:Kn,mode:xe.tooltip.mode,sortOrder:xe.tooltip.sort,sync:dt,timeZone:ae}),w.annotations&&I.createElement(Ws,{annotations:w.annotations,config:Kn,timeZone:ae}),Sn?I.createElement(_r,{data:Bn,timeZone:ae,config:Kn},({startAnnotating:Yn})=>I.createElement(no,{data:Bn,config:Kn,timeZone:ae,replaceVariables:_e,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(ca,na)=>{na&&Yn({coords:na.coords})}}]}]})):I.createElement(no,{data:Bn,frames:Ut,config:Kn,timeZone:ae,replaceVariables:_e,defaultItems:[]}),w.annotations&&I.createElement(bc,{visibleSeries:Um(Kn,Ut),config:Kn,exemplars:w.annotations,timeZone:ae,getFieldLinks:qt}),(St&&Ft||Xt)&&I.createElement(Sl,{config:Kn,fieldConfig:we,onThresholdsChange:St?Ft:void 0}),I.createElement(co,{config:Kn,onChangeTimeRange:je}))))};var yt=e(56808),Vt=e(52566);const Zt=({value:w,onChange:J})=>{const ae=(0,ue.wW)(an);(!w||w.length<1)&&(w=[""]);const he=()=>{J([...w,yt.RQ.default])},Pe=we=>{const je=w.slice();je.splice(we,1),J(je)},xe=(we,je)=>{const _e=w.slice();_e[we]=je??yt.RQ.default,_e.length===0||_e.length===1&&_e[0]===""?J(void 0):J(_e)};return I.createElement("div",null,w.map((we,je)=>I.createElement("div",{className:ae.wrapper,key:`${je}.${we}`},I.createElement("span",{className:ae.first},I.createElement(Vt.O,{onChange:_e=>xe(je,_e),includeInternal:!0,value:we??yt.RQ.default})),je===w.length-1?I.createElement(bo.h,{ariaLabel:"Add timezone",name:"plus",onClick:he}):I.createElement(bo.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Pe(je)}))))},an=w=>({wrapper:T.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:T.css`
    margin-right: 8px;
    flex-grow: 2;
  `});var En=e(7832);let wn=null;const Xn=(w,J,ae,he)=>{if(J==="graph"&&ae.angular){const{fieldConfig:Pe,options:xe,annotations:we}=Ca({...ae.angular,fieldConfig:he,panel:w}),je=(0,Mn.h4)().getCurrent();return je&&we?.length>0&&(je.annotations.list=[...je.annotations.list,...we],wn==null&&(wn=setTimeout(()=>{wn=null,(0,Nc.$t)().refreshTimeModel()}))),w.fieldConfig=Pe,w.alert=ae.angular.alert,xe}return Yr(w),{}};function Ca(w){let J=[];const ae=w.fieldConfig?.overrides??[],he=w.yaxes??[];let Pe=gs(he[0]);w.fieldConfig?.defaults&&(Pe={...w.fieldConfig?.defaults,...Pe});const xe={fill:w.dashes?"dash":"solid",dash:[w.dashLength??10,w.spaceLength??10]};if(w.aliasColors)for(const It of Object.keys(w.aliasColors)){const Ft=w.aliasColors[It];Ft&&ae.push({matcher:{id:ho.mi.byName,options:It},properties:[{id:Ae.qb.Color,value:{mode:nt.S.Fixed,fixedColor:Ft}}]})}let we=!1;if(w.seriesOverrides?.length)for(const It of w.seriesOverrides){if(!It.alias)continue;const St={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(It.alias)?ho.mi.byRegexp:ho.mi.byName,options:It.alias},properties:[]};let Xt;for(const cn of Object.keys(It)){const qt=It[cn];switch(cn){case"alias":case"$$hashKey":break;case"yaxis":if(qt===2){const Ut=gs(he[1]);Br(Pe,Ut,St.properties)}break;case"fill":St.properties.push({id:"custom.fillOpacity",value:qt*10});break;case"fillBelowTo":we=!0,St.properties.push({id:"custom.fillBelowTo",value:qt});break;case"fillGradient":qt&&(St.properties.push({id:"custom.fillGradient",value:"opacity"}),St.properties.push({id:"custom.fillOpacity",value:qt*10}));break;case"points":St.properties.push({id:"custom.showPoints",value:qt?at.Jp.Always:at.Jp.Never});break;case"bars":qt?(St.properties.push({id:"custom.drawStyle",value:at.l8.Bars}),St.properties.push({id:"custom.fillOpacity",value:100})):St.properties.push({id:"custom.drawStyle",value:at.l8.Line});break;case"lines":St.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":St.properties.push({id:"custom.lineWidth",value:qt});break;case"pointradius":St.properties.push({id:"custom.pointSize",value:2+qt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Xt||(Xt={fill:xe.fill,dash:[...xe.dash]}),cn){case"dashLength":Xt.dash[0]=qt;break;case"spaceLength":Xt.dash[1]=qt;break;case"dashes":Xt.fill=qt?"dash":"solid";break}break;case"stack":St.properties.push({id:"custom.stacking",value:Gd(qt)});break;case"color":St.properties.push({id:"color",value:{fixedColor:qt,mode:nt.S.Fixed}});break;case"transform":St.properties.push({id:"custom.transform",value:qt==="negative-Y"?at.pR.NegativeY:at.pR.Constant});break;default:console.log("Ignore override migration:",It.alias,cn,qt)}}Xt&&St.properties.push({id:"custom.lineStyle",value:Xt}),St.properties.length&&ae.push(St)}const je=Pe.custom??{};je.drawStyle=w.bars?at.l8.Bars:w.lines?at.l8.Line:at.l8.Points,w.points?(je.showPoints=at.Jp.Always,(0,B.isNumber)(w.pointradius)&&(je.pointSize=2+w.pointradius*2)):je.drawStyle!==at.l8.Points&&(je.showPoints=at.Jp.Never),je.lineWidth=w.linewidth,xe.fill!=="solid"&&(je.lineStyle=xe),we?je.fillOpacity=35:(0,B.isNumber)(w.fill)&&(je.fillOpacity=w.fill*10),(0,B.isNumber)(w.fillGradient)&&w.fillGradient>0&&(je.gradientMode=at.FI.Opacity,je.fillOpacity=w.fillGradient*10),je.spanNulls=w.nullPointMode===js.Gl.Ignore,w.steppedLine&&(je.lineInterpolation=at.KC.StepAfter),je.drawStyle===at.l8.Bars&&(je.fillOpacity=100),w.stack&&(je.stacking={mode:at.o0.Normal,group:to.r.stacking.group}),Pe.custom=(0,B.omitBy)(je,B.isNil),Pe.nullValueMode=w.nullPointMode;const _e={legend:{displayMode:at.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:at.f3.Single,sort:at.As.None}},pt=w.legend;if(pt){if(pt.show?_e.legend.displayMode=pt.alignAsTable?at.jK.Table:at.jK.List:_e.legend.showLegend=!1,pt.rightSide&&(_e.legend.placement="right"),w.legend.values){const It=(0,B.pickBy)(w.legend);_e.legend.calcs=ar(It)}w.legend.sideWidth&&(_e.legend.width=w.legend.sideWidth),pt.hideZero&&ae.push(wo(Aa.gz.allIsZero)),pt.hideEmpty&&ae.push(wo(Aa.gz.allIsNull))}w.timeRegions?.length&&w.timeRegions.map((Ft,St)=>({name:`T${St+1}`,color:Ft.colorMode!=="custom"?Ft.colorMode:Ft.fillColor,line:Ft.line,fill:Ft.fill,fromDayOfWeek:Ft.fromDayOfWeek,toDayOfWeek:Ft.toDayOfWeek,from:Ft.from,to:Ft.to})).forEach((Ft,St)=>{const Xt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[w.panel.id]},iconColor:Ft.fillColor??Ft.color,name:`T${St+1}`,target:{queryType:En.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Ft.fromDayOfWeek,toDayOfWeek:Ft.toDayOfWeek,from:Ft.from,to:Ft.to,timezone:"utc"}}};Ft.fill?J.push(Xt):Ft.line&&(Xt.iconColor=Ft.lineColor??"white",J.push(Xt))});const dt=w.tooltip;if(dt&&(dt.shared!==void 0&&(_e.tooltip.mode=dt.shared?at.f3.Multi:at.f3.Single),dt.sort!==void 0&&dt.shared))switch(dt.sort){case 1:_e.tooltip.sort=at.As.Ascending;break;case 2:_e.tooltip.sort=at.As.Descending;break;default:_e.tooltip.sort=at.As.None}if(w.thresholds&&w.thresholds.length>0){let It=[],Ft=!1,St=!1;const Xt=w.thresholds.sort((qt,Ut)=>qt.value>Ut.value?1:-1);for(let qt=0;qt<Xt.length;qt++){const Ut=Xt[qt],gn=Xt.length>qt+1?Xt[qt+1]:null;Ut.fill&&(Ft=!0),Ut.line&&(St=!0),Ut.op==="gt"&&It.push({value:Ut.value,color:za(Ut)}),Ut.op==="lt"&&(It.length===0&&It.push({value:-1/0,color:za(Ut)}),gn&&gn.op==="gt"&&gn.value>Ut.value?It.push({value:Ut.value,color:"transparent"}):gn&&gn.op==="lt"?It.push({value:Ut.value,color:za(gn)}):It.push({value:Ut.value,color:"transparent"}))}It.length>0&&It[0].value!==-1/0&&It.unshift({color:"transparent",value:-1/0});let cn=Ft?at.i3.Area:at.i3.Line;St&&Ft&&(cn=at.i3.LineAndArea),Pe.custom.thresholdsStyle={mode:cn},Pe.thresholds={mode:Ad.H.Absolute,steps:It}}return w.xaxis&&w.xaxis.show===!1&&w.xaxis.mode==="time"&&ae.push({matcher:{id:ho.mi.byType,options:Nt.fS.time},properties:[{id:"custom.axisPlacement",value:at.LB.Hidden}]}),{fieldConfig:{defaults:(0,B.omitBy)(Pe,B.isNil),overrides:ae},options:_e,annotations:J}}function za(w){return w.colorMode==="critical"?"red":w.colorMode==="warning"?"orange":w.colorMode==="custom"?w.fillColor||w.lineColor:"red"}function gs(w){if(!w)return{};const J={axisPlacement:w.show?at.LB.Auto:at.LB.Hidden};if(w.label&&(J.axisLabel=w.label),w.logBase){const ae=w.logBase;(ae===2||ae===10)&&(J.scaleDistribution={type:at.wf.Log,log:ae})}return(0,B.omitBy)({unit:w.format,decimals:nr(w.decimals),min:nr(w.min),max:nr(w.max),custom:J},B.isNil)}function Br(w,J,ae){for(const xe of Object.keys(J)){const we=J[xe];xe!=="custom"&&we!==w[xe]&&ae.push({id:xe,value:we})}const he=w.custom??{},Pe=J.custom??{};for(const xe of Object.keys(Pe)){const we=Pe[xe];we!==he[xe]&&ae.push({id:`custom.${xe}`,value:we})}}function nr(w){if((0,B.isNumber)(w))return w;if((0,B.isString)(w)){const J=Number(w);if(!isNaN(J))return J}}function ar(w){const J=[];for(const ae of Object.keys(w)){const he=Aa.TB.getIfExists(ae);he&&J.push(he.id)}return J}function Yr(w){w.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(w.fieldConfig.defaults.custom.hideFrom.viz=w.fieldConfig.defaults.custom.hideFrom.graph,delete w.fieldConfig.defaults.custom.hideFrom.graph),w.fieldConfig?.overrides&&(w.fieldConfig.overrides=w.fieldConfig.overrides.map(J=>(J.properties=J.properties.map(ae=>(ae.id==="custom.hideFrom"&&ae.value.graph&&(ae.value.viz=ae.value.graph,delete ae.value.graph),ae)),J)))}function wo(w){return{matcher:{id:ho.mi.byValue,options:{reducer:w,op:at.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function Gd(w){const J=to.r.stacking?.group;return{mode:w?at.o0.Normal:at.o0.None,group:(0,B.isString)(w)?w:J}}const tf=new le.c(ke).setPanelChangeHandler(Xn).useFieldConfig((0,to.F)(to.r)).setPanelOptions(w=>{$n.L(w),Ra.J(w),w.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Zt,defaultValue:void 0})}).setSuggestionsSupplier(new Se).setDataSupport({annotations:!0,alertStates:!0});var Sf=e(86647),nf=e(94619),Mf=e(72861),Tf=e(93183),Of=e(75151),If=e(335);const af={wrapper:T.css`
    height: 100%;
    overflow: scroll;
  `},Rf=({data:w})=>{const J=(0,I.createRef)(),ae=(0,I.useMemo)(()=>(0,If.N)(w.series[0]),[w.series]),{search:he,setSearch:Pe,spanFindMatches:xe}=(0,Of.Rx)(ae?.spans),[we,je]=(0,I.useState)(""),[_e,pt]=(0,I.useState)(""),dt=(0,$t.Z)(async()=>await(0,Sf.F)().get(w.request?.targets[0].datasource?.uid)),It=dt&&dt.value?dt.value.type:"unknown";return!w||!w.series.length||!ae?I.createElement("div",{className:"panel-empty"},I.createElement("p",null,"No data found in response")):I.createElement("div",{className:af.wrapper},I.createElement("div",{ref:J}),be.v.featureToggles.newTraceViewHeader?null:I.createElement(Mf.Z,{navigable:!0,searchValue:he,setSearch:Pe,spanFindMatches:xe,searchBarSuffix:_e,setSearchBarSuffix:pt,focusedSpanIdForSearch:we,setFocusedSpanIdForSearch:je,datasourceType:It}),I.createElement(nf.m,{dataFrames:w.series,scrollElementClass:af.wrapper,traceProp:ae,spanFindMatches:xe,search:he,focusedSpanIdForSearch:we,queryResponse:w,datasource:dt.value,topOfViewRef:J,topOfViewRefType:Tf.l4.Panel}))},sf=new le.c(Rf),Af=({data:w,timeRange:J,timeZone:ae,width:he,height:Pe,options:xe,fieldConfig:we,replaceVariables:je,id:_e})=>{const{sync:pt}=(0,ma.R9)(),dt=(0,I.useMemo)(()=>{if(w.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:w.series};let It=w.series,Ft;if(xe.xField){if(Ft=(0,Va.findFieldIndex)(It[0],xe.xField),Ft==null)return{warning:"Unable to find field: "+xe.xField,frames:w.series}}else if(Ft=It[0].fields.findIndex(St=>St.type===Nt.fS.number),Ft===-1)return{warning:"No numeric fields found for X axis",frames:It};if(Ft!=null){const St=It[0].fields[Ft];if(St.type===Nt.fS.number&&!(0,sa.lP)(St.values))return{warning:"Values must be in ascending order",frames:It}}return{frames:zi(It,be.v.theme2,void 0,Ft)}},[w.series,xe.xField]);return dt.warning||!dt.frames?I.createElement(Es.Z,{panelId:_e,fieldConfig:we,data:w,message:dt.warning,needsNumberField:!0}):I.createElement(di.p,{frames:dt.frames,structureRev:w.structureRev,timeRange:J,timeZone:ae,width:he,height:Pe,legend:xe.legend,options:xe},(It,Ft)=>(Ft.fields.some(St=>Boolean(St.config.links?.length))&&(Ft=Rc(Ft,dt.frames,je,ae)),I.createElement(I.Fragment,null,I.createElement(X.C,{config:It}),xe.tooltip.mode===at.f3.None||I.createElement($e.i,{frames:dt.frames,data:Ft,config:It,mode:xe.tooltip.mode,sortOrder:xe.tooltip.sort,sync:pt,timeZone:ae}),I.createElement(no,{data:Ft,frames:dt.frames,config:It,timeZone:ae,replaceVariables:je,defaultItems:[]}))))};class Lf{getSuggestionsForData(J){const{dataSummary:ae}=J;return ae.numberFieldCount<2||ae.rowCountTotal<2||ae.rowCountTotal<2?void 0:J.getListAppender({name:xs.y.LineChart,pluginId:"trend",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Pe=>{Pe.options.legend.showLegend=!1,Pe.fieldConfig?.defaults.custom?.drawStyle!==at.l8.Bars&&(Pe.fieldConfig.defaults.custom.lineWidth=Math.max(Pe.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const Bf=new le.c(Af).useFieldConfig((0,to.F)(to.r)).setPanelOptions(w=>{const J=["X Axis"];w.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:J,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:ae=>ae.type===Nt.fS.number}}),$n.L(w),Ra.J(w)}).setSuggestionsSupplier(new Lf),Nf=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],Uf=()=>{const w=(0,ue.wW)(wf);return I.createElement("div",{className:w.container},I.createElement("h1",{className:w.title},"Welcome to Grafana"),I.createElement("div",{className:w.help},I.createElement("h3",{className:w.helpText},"Need help?"),I.createElement("div",{className:w.helpLinks},Nf.map((J,ae)=>I.createElement("a",{key:`${J.label}-${ae}`,className:w.helpLink,href:`${J.href}?utm_source=grafana_gettingstarted`},J.label)))))},wf=w=>({container:T.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${w.spacing(3)};

      ${w.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${w.breakpoints.down("sm")} {
        padding: 0 ${w.spacing(1)};
      }
    `,title:T.css`
      margin-bottom: 0;

      ${w.breakpoints.down("lg")} {
        margin-bottom: ${w.spacing(1)};
      }

      ${w.breakpoints.down("md")} {
        font-size: ${w.typography.h2.fontSize};
      }
      ${w.breakpoints.down("sm")} {
        font-size: ${w.typography.h3.fontSize};
      }
    `,help:T.css`
      display: flex;
      align-items: baseline;
    `,helpText:T.css`
      margin-right: ${w.spacing(2)};
      margin-bottom: 0;

      ${w.breakpoints.down("md")} {
        font-size: ${w.typography.h4.fontSize};
      }

      ${w.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:T.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:T.css`
      margin-right: ${w.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${w.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),ac=new le.c(Uf).setNoPadding();var Wf=(w=>(w[w.NoData=0]="NoData",w[w.BadFrameSelection=1]="BadFrameSelection",w[w.XNotFound=2]="XNotFound",w))(Wf||{});function jd(w){return w.type===Nt.fS.number}function lg(w,J){if(!J||!J.length)return{error:0};w||(w={frame:0});let ae=J[w.frame??0];if(!ae)return{error:1};let he=-1;for(let je=0;je<ae.fields.length;je++){const _e=ae.fields[je];if(w.x&&w.x===(0,wt.CZ)(_e,ae,J)){he=je;break}if(jd(_e)&&!w.x){he=je;break}}let Pe=!1;const xe=ae.fields[he],we=[xe];for(const je of ae.fields)if(je.type===Nt.fS.time&&(Pe=!0),!(je===xe||!jd(je))){if(w.exclude){const _e=(0,wt.CZ)(je,ae,J);if(w.exclude.includes(_e))continue}we.push(je)}return{x:xe,fields:{x:Ff(xe),y:$f(xe)},frame:{...ae,fields:we},hasData:ae.fields.length>0,hasTime:Pe}}function Ff(w){return w?J=>w===J||!!(w.state&&w.state===J.state):()=>!1}function $f(w){if(!w)return()=>!1;const J=Ff(w);return ae=>!J(ae,void 0,void 0)}const rf=({value:w,onChange:J,context:ae})=>{const he=(0,I.useMemo)(()=>ae?.data?.length?ae.data.map((je,_e)=>({value:_e,label:(0,wt.nf)(je,_e)})):[{value:0,label:"First result"}],[ae.data]),Pe=(0,I.useMemo)(()=>lg(w,ae.data),[ae.data,w]),xe=(0,I.useMemo)(()=>{const je={label:"?",value:void 0},_e={numberFields:[je],yFields:[],xAxis:w?.x?{label:`${w.x} (Not found)`,value:w.x}:je},pt=ae.data?ae.data[w?.frame??0]:void 0;if(pt){const dt=Pe.x?(0,wt.CZ)(Pe.x,Pe.frame,ae.data):void 0;for(let It of pt.fields)if(jd(It)){const Ft=(0,wt.CZ)(It,pt,ae.data),St={label:Ft,value:Ft};_e.numberFields.push(St),je.label==="?"&&(je.label=`${Ft} (First)`),w?.x&&Ft===w.x&&(_e.xAxis=St),dt!==Ft&&_e.yFields.push({label:Ft,value:w?.exclude?.includes(Ft)})}}return _e},[Pe,ae.data,w]),we=(0,ue.wW)(Kf);return ae.data?I.createElement("div",null,I.createElement(Hs.g,{label:"Data"},I.createElement(ut.Ph,{options:he,value:he.find(je=>je.value===w?.frame)??he[0],onChange:je=>{J({...w,frame:je.value})}})),I.createElement(Hs.g,{label:"X Field"},I.createElement(ut.Ph,{options:xe.numberFields,value:xe.xAxis,onChange:je=>{J({...w,x:je.value})}})),I.createElement(Hs.g,{label:"Y Fields"},I.createElement("div",null,xe.yFields.map(je=>I.createElement("div",{key:je.label,className:we.row},I.createElement(bo.h,{name:je.value?"eye-slash":"eye",onClick:()=>{const _e=w?.exclude?[...w.exclude]:[];let pt=_e.indexOf(je.label);pt<0?_e.push(je.label):_e.splice(pt,1),J({...w,exclude:_e})}}),je.label))))):I.createElement("div",null,"No data...")},Kf=w=>({sorter:T.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:T.css`
    padding: ${w.spacing(.5,1)};
    border-radius: ${w.shape.borderRadius(1)};
    background: ${w.colors.background.secondary};
    min-height: ${w.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${w.components.input.borderColor};
  `});var of=e(93022),Om=e(54643);const Vf=Object.freeze([0,0]);var zf=(w=>(w.Auto="auto",w.Manual="manual",w))(zf||{}),yo=(w=>(w.Lines="lines",w.Points="points",w.PointsAndLines="points+lines",w))(yo||{});const Hf={exclude:[]},Im={label:at.Jp.Auto,show:"points"},Wo={series:[]},Yd={...Im},kf=({value:w,onChange:J,context:ae})=>{const[he,Pe]=(0,I.useState)(0),xe=(0,ue.wW)(Gf),we=(dt,It,Ft)=>{J(w.map((St,Xt)=>Xt===It?{...St,[Ft]:dt}:St))},je=()=>{J([...w,{pointColor:{},pointSize:Yd.pointSize}]),Pe(w.length)};(0,I.useEffect)(()=>{w?.length||je()},[]);const _e=dt=>{J(w.filter((It,Ft)=>Ft!==dt))},pt=dt=>dt===he?`${xe.row} ${xe.sel}`:xe.row;return I.createElement(I.Fragment,null,I.createElement(De.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:je,className:xe.marginBot},"Add series"),I.createElement("div",{className:xe.marginBot},w.map((dt,It)=>I.createElement("div",{key:`series/${It}`,className:pt(It),onMouseDown:()=>Pe(It)},I.createElement(of.X,{name:dt.name??`Series ${It+1}`,onChange:Ft=>we(Ft,It,"name")}),I.createElement(bo.h,{name:"trash-alt",title:"remove",className:(0,T.cx)(xe.actionIcon),onClick:()=>_e(It)})))),he>=0&&w[he]&&I.createElement(I.Fragment,null,I.createElement("div",{key:`series/${he}`},I.createElement(Hs.g,{label:"X Field"},I.createElement(ni.b,{value:w[he].x??"",context:ae,onChange:dt=>we(dt,he,"x"),item:{}})),I.createElement(Hs.g,{label:"Y Field"},I.createElement(ni.b,{value:w[he].y??"",context:ae,onChange:dt=>we(dt,he,"y"),item:{}})),I.createElement(Hs.g,{label:"Point color"},I.createElement(Om.Lm,{value:w[he].pointColor,context:ae,onChange:dt=>we(dt,he,"pointColor"),item:{}})),I.createElement(Hs.g,{label:"Point size"},I.createElement(Om.cL,{value:w[he].pointSize,context:ae,onChange:dt=>we(dt,he,"pointSize"),item:{settings:{min:1,max:100}}})))))},Gf=w=>({marginBot:T.css`
    margin-bottom: 20px;
  `,row:T.css`
    padding: ${w.spacing(.5,1)};
    border-radius: ${w.shape.borderRadius(1)};
    background: ${w.colors.background.secondary};
    min-height: ${w.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${w.components.input.borderColor};
    &:hover {
      border: 1px solid ${w.components.input.borderHover};
    }
  `,sel:T.css`
    border: 1px solid ${w.colors.primary.border};
    &:hover {
      border: 1px solid ${w.colors.primary.border};
    }
  `,actionIcon:T.css`
    color: ${w.colors.text.secondary};
    &:hover {
      color: ${w.colors.text};
    }
  `});var lf=e(82965),jf=(w=>(w.Points="points",w.Lines="lines",w.PointsAndLines="points+lines",w))(jf||{}),Rm=(w=>(w.Auto="auto",w.Manual="manual",w))(Rm||{});const cg={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:at.LB.Auto},Yf=({allSeries:w,data:J,manualSeriesConfigs:ae,seriesMapping:he,rowIndex:Pe,hoveredPointIndex:xe,options:we,range:je})=>{const _e=(0,ue.wW)(cf);if(!w||Pe==null)return null;const pt=w[xe],dt=pt.frame(J),It=pt.x(dt),Ft=pt.y(dt);let St;if(Ft.getLinks){const Ut=Ft.values[Pe],gn=Ft.display?Ft.display(Ut):{text:`${Ut}`,numeric:+Ut};St=Ft.getLinks({calculatedValue:gn,valueRowIndex:Pe}).map(nn=>(nn.title||(nn.title=(0,ui.Rb)(nn.href)),nn))}let Xt=dt.fields.filter(Ut=>Ut!==It&&Ut!==Ft),cn=null,qt=null;if(he===Rm.Manual&&ae){const Ut=ae[xe].pointColor?.field??"",gn=ae[xe].pointSize?.field??"",nn=Ut?(0,Va.findField)(dt,Ut):void 0,Sn=gn?(0,Va.findField)(dt,gn):void 0;qt={colorFacetFieldName:Ut,sizeFacetFieldName:gn,colorFacetValue:nn?.values[Pe],sizeFacetValue:Sn?.values[Pe]},Xt=Xt.filter(Kn=>Kn!==nn&&Kn!==Sn)}return cn={name:(0,wt.CZ)(Ft,dt),val:Ft.values[Pe],field:Ft,color:pt.pointColor(dt)},I.createElement(I.Fragment,null,I.createElement("table",{className:_e.infoWrap},I.createElement("tr",null,I.createElement("th",{colSpan:2,style:{backgroundColor:cn.color}})),I.createElement("tbody",null,I.createElement("tr",null,I.createElement("th",null,(0,wt.CZ)(It,dt)),I.createElement("td",null,Am(It,It.values[Pe]))),I.createElement("tr",null,I.createElement("th",null,cn.name,":"),I.createElement("td",null,Am(cn.field,cn.val))),qt!==null&&qt.colorFacetFieldName&&I.createElement("tr",null,I.createElement("th",null,qt.colorFacetFieldName,":"),I.createElement("td",null,qt.colorFacetValue)),qt!==null&&qt.sizeFacetFieldName&&I.createElement("tr",null,I.createElement("th",null,qt.sizeFacetFieldName,":"),I.createElement("td",null,qt.sizeFacetValue)),Xt.map((Ut,gn)=>I.createElement("tr",{key:gn},I.createElement("th",null,(0,wt.CZ)(Ut,dt),":"),I.createElement("td",null,Am(Ut,Ut.values[Pe])))),St&&St.length>0&&I.createElement("tr",null,I.createElement("td",{colSpan:2},I.createElement(rr.wc,null,St.map((Ut,gn)=>I.createElement(De.Qj,{key:gn,icon:"external-link-alt",target:Ut.target,href:Ut.href,onClick:Ut.onClick,fill:"text",style:{width:"100%"}},Ut.title))))))))};function Am(w,J){return w.display?(0,Wn.zc)(w.display(J)):`${J}`}const cf=w=>({infoWrap:T.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${w.typography.fontWeightMedium};
      padding: ${w.spacing(.25,2)};
    }
  `,highlight:T.css`
    background: ${w.colors.action.hover};
  `,xVal:T.css`
    font-weight: ${w.typography.fontWeightBold};
  `,icon:T.css`
    margin-right: ${w.spacing(1)};
    vertical-align: middle;
  `});function df(w,J,ae,he,Pe,xe){let we,je;try{we=Qf(w,J()),je=_f(J,we,ae,he,Pe,xe)}catch(_e){let pt="Unknown error in prepScatter";return typeof _e=="string"?pt=_e:_e instanceof Error&&(pt=_e.message),{error:pt,series:[]}}return{series:we,builder:je}}function uf(w,J,ae,he,Pe,xe){const we=J[ae],je=we.fields[Pe];let _e=je.state??{};_e.seriesIndex=w,je.state=_e;let pt=xe.pointColorFixed?be.v.theme2.visualization.getColorByName(xe.pointColorFixed):(0,fa.YO)(je,be.v.theme2).color,dt=()=>pt;const It={...Yd,...je.config.custom};let Ft=fa.WO.get(nt.S.PaletteClassic);if(xe.pointColorIndex){const Ut=J[ae].fields[xe.pointColorIndex];if(Ut){const gn=Ut.display??(0,ra.U_)({field:Ut,theme:be.v.theme2});if(Ft=(0,fa.fD)(je),Ft.isByValue){const nn=xe.pointColorIndex;dt=Sn=>Sn.fields[nn].values.map(Kn=>gn(Kn).color)}else pt=Ft.getCalculator(Ut,be.v.theme2)(Ut.values[0],1),dt=()=>pt}}let St=xe.pointSizeConfig,Xt=xe.pointSizeConfig?.fixed??je.config.custom?.pointSize?.fixed??5,cn=()=>Xt;xe.pointSizeIndex?cn=Ut=>{const gn=(0,Va.getScaledDimensionForField)(Ut.fields[xe.pointSizeIndex],xe.pointSizeConfig,at.B5.Quad),nn=Array(Ut.length);for(let Sn=0;Sn<Ut.length;Sn++)nn[Sn]=gn.get(Sn);return nn}:St={fixed:Xt,min:Xt,max:Xt};const qt=(0,wt.CZ)(je,we,J);return{name:qt,frame:Ut=>Ut[ae],x:Ut=>Ut.fields[he],y:Ut=>Ut.fields[Pe],legend:()=>[{label:qt,color:pt,getItemKey:()=>qt,yAxis:Pe}],showLine:It.show!==yo.Points,lineWidth:It.lineWidth??2,lineStyle:It.lineStyle,lineColor:()=>pt,showPoints:It.show!==yo.Lines?at.Jp.Always:at.Jp.Never,pointSize:cn,pointColor:dt,pointSymbol:(Ut,gn)=>"circle",label:at.Jp.Never,labelValue:()=>"",show:!we.fields[Pe].config.custom.hideFrom?.viz,hints:{pointSize:St,pointColor:{mode:Ft}}}}function Qf(w,J){let ae=0;if(!J.length)throw"Missing data";if(w.seriesMapping==="manual"){if(!w.series?.length)throw"Missing series config";const _e=[];for(const pt of w.series){if(!pt?.x)throw"Select X dimension";if(!pt?.y)throw"Select Y dimension";for(let dt=0;dt<J.length;dt++){const It=J[dt],Ft=(0,Va.findFieldIndex)(It,pt.x);if(Ft!=null){const St=(0,Va.findFieldIndex)(It,pt.y);if(St==null)throw"Y must be in the same frame as X";const Xt={pointColorFixed:pt.pointColor?.fixed,pointColorIndex:(0,Va.findFieldIndex)(It,pt.pointColor?.field),pointSizeConfig:pt.pointSize,pointSizeIndex:(0,Va.findFieldIndex)(It,pt.pointSize?.field)};_e.push(uf(ae++,J,dt,Ft,St,Xt))}}}return _e}const he=w.dims??{},Pe=he.frame??0,xe=J[Pe],we=[];let je=(0,Va.findFieldIndex)(xe,he.x);for(let _e=0;_e<xe.fields.length;_e++)if(jd(xe.fields[_e])){if(je==null||_e===je){je=_e;continue}if(he.exclude&&he.exclude.includes((0,wt.CZ)(xe.fields[_e],xe,J)))continue;we.push(_e)}if(je==null)throw"Missing X dimension";if(!we.length)throw"No Y values";return we.map(_e=>uf(ae++,J,Pe,je,_e,{}))}const _f=(w,J,ae,he,Pe,xe)=>{let we,je;function _e(Ut){return(nn,Sn,Kn,Bn)=>(hn.Z.orient(nn,Sn,(Yn,ca,na,Da,Pa,xa,Ss,Qa,Ea,Ja,os,Ys,Ms,Qs,_s)=>{const Na=hn.Z.pxRatio,ua=J[Sn-1];let Ua=nn.data[Sn],Xa=ua.showLine,Bs=ua.showPoints===at.Jp.Always;!Bs&&ua.showPoints===at.Jp.Auto&&(Bs=Ua[0].length<1e3),!Bs&&!Xa&&(Xa=!0);let ps=1;nn.ctx.save(),nn.ctx.rect(nn.bbox.left,nn.bbox.top,nn.bbox.width,nn.bbox.height),nn.ctx.clip(),nn.ctx.fillStyle=Yn.fill(),nn.ctx.strokeStyle=Yn.stroke(),nn.ctx.lineWidth=ps;let W=2*Math.PI,te=Da.key,ge=Pa.key,Oe=ua.hints.pointSize;const Ke=ua.hints.pointColor.mode.isByValue;let ot=(Oe.max??Oe.fixed)*Na,Rt=nn.posToVal(-ot/2,te),en=nn.posToVal(nn.bbox.width/Na+ot/2,te),Qt=nn.posToVal(nn.bbox.height/Na+ot/2,ge),vn=nn.posToVal(-ot/2,ge),bn=Ut.disp.size.values(nn,Sn),mn=Ut.disp.color.values(nn,Sn),xn=Ut.disp.color.alpha,Jn=Xa?new Path2D:null,Zn=null;for(let Vn=0;Vn<Ua[0].length;Vn++){let ea=Ua[0][Vn],ta=Ua[1][Vn],pa=bn[Vn]*Na;if(ea>=Rt&&ea<=en&&ta>=Qt&&ta<=vn){let Sa=xa(ea,Da,Ja,Qa),wa=Ss(ta,Pa,os,Ea);Xa&&Jn.lineTo(Sa,wa),Bs&&(nn.ctx.moveTo(Sa+pa/2,wa),nn.ctx.beginPath(),nn.ctx.arc(Sa,wa,pa/2,0,W),Ke&&mn[Vn]!==Zn&&(Zn=mn[Vn],nn.ctx.fillStyle=(0,La.alpha)(Zn,xn),nn.ctx.strokeStyle=Zn),nn.ctx.fill(),nn.ctx.stroke(),Ut.each(nn,Sn,Vn,Sa-pa/2-ps/2,wa-pa/2-ps/2,pa+ps,pa+ps))}}if(Xa){let Vn=ua.frame(w());nn.ctx.strokeStyle=ua.lineColor(Vn),nn.ctx.lineWidth=ua.lineWidth*Na;const{lineStyle:ea}=ua;ea&&ea.fill!=="solid"&&(ea.fill==="dot"&&(nn.ctx.lineCap="round"),nn.ctx.setLineDash(ea.dash??[10,10])),nn.ctx.stroke(Jn)}nn.ctx.restore()}),null)}let pt=_e({disp:{size:{values:(Ut,gn)=>Ut.data[gn][2]},color:{values:(Ut,gn)=>Ut.data[gn][3],alpha:.5}},each:(Ut,gn,nn,Sn,Kn,Bn,Yn)=>{Sn-=Ut.bbox.left,Kn-=Ut.bbox.top,we.add({x:Sn,y:Kn,w:Bn,h:Yn,sidx:gn,didx:nn})}});const dt=new zs.U;dt.setCursor({drag:{setScale:!0},dataIdx:(Ut,gn)=>{if(gn===1){const nn=hn.Z.pxRatio;je=null;let Sn=1/0,Kn=Ut.cursor.left*nn,Bn=Ut.cursor.top*nn;we.get(Kn,Bn,1,1,Yn=>{if((0,fs.Pn)(Kn,Bn,Yn.x,Yn.y,Yn.x+Yn.w,Yn.y+Yn.h)){let ca=Yn.x+Yn.w/2,na=Yn.y+Yn.h/2,Da=ca-Kn,Pa=na-Bn,xa=Math.sqrt(Da**2+Pa**2);xa<=Yn.w/2&&xa<=Sn&&(Sn=xa,je=Yn)}})}return je&&gn===je.sidx?je.didx:null},points:{size:(Ut,gn)=>je&&gn===je.sidx?je.w/hn.Z.pxRatio:0,fill:(Ut,gn)=>"rgba(255,255,255,0.4)"}});const It=()=>{xe.current&&(he(void 0),Pe&&Pe())};let Ft=null;dt.addHook("init",(Ut,gn)=>{Ut.over.style.overflow="hidden",Ft=Ut.root.parentElement,Pe&&Ft?.addEventListener("click",Pe)}),dt.addHook("destroy",Ut=>{Pe&&(Ft?.removeEventListener("click",Pe),It())});let St;dt.addHook("syncRect",(Ut,gn)=>{St=gn}),dt.addHook("setLegend",Ut=>{if(Ut.cursor.idxs!=null)for(let gn=0;gn<Ut.cursor.idxs.length;gn++){const nn=Ut.cursor.idxs[gn];if(nn!=null&&!xe.current){he({scatterIndex:gn-1,xIndex:nn,pageX:St.left+Ut.cursor.left,pageY:St.top+Ut.cursor.top});return}}xe.current||he(void 0)}),dt.addHook("drawClear",Ut=>{It(),we=we||new fs.lW(0,0,Ut.bbox.width,Ut.bbox.height),we.clear(),Ut.series.forEach((gn,nn)=>{nn>0&&(gn._paths=null)})}),dt.setMode(2);const Xt=w();let cn=J[0].x(J[0].frame(Xt));dt.addScale({scaleKey:"x",isTime:!1,orientation:at.wN.Horizontal,direction:at.bQ.Right,range:(Ut,gn,nn)=>[cn.config.min??gn,cn.config.max??nn]});let qt=cn.config.custom.axisLabel;return dt.addAxis({scaleKey:"x",placement:cn.config.custom?.axisPlacement!==at.LB.Hidden?at.LB.Bottom:at.LB.Hidden,show:cn.config.custom?.axisPlacement!==at.LB.Hidden,theme:ae,label:qt==null||qt===""?(0,wt.CZ)(cn,J[0].frame(Xt),Xt):qt,formatValue:(Ut,gn)=>(0,Wn.zc)(cn.display(Ut,gn))}),J.forEach((Ut,gn)=>{let nn=Ut.frame(Xt),Sn=Ut.y(nn);const Kn=Ut.lineColor(nn),Bn=ff(nn,Ut.pointColor);let Yn=Sn.config.unit??"y";if(dt.addScale({scaleKey:Yn,orientation:at.wN.Vertical,direction:at.bQ.Up,max:Sn.config.max,min:Sn.config.min}),Sn.config.custom?.axisPlacement!==at.LB.Hidden){let ca=Sn.config.custom?.axisLabel;dt.addAxis({scaleKey:Yn,theme:ae,placement:Sn.config.custom?.axisPlacement,label:ca==null||ca===""?(0,wt.CZ)(Sn,J[gn].frame(Xt),Xt):ca,formatValue:(na,Da)=>(0,Wn.zc)(Sn.display(na,Da))})}dt.addSeries({facets:[{scale:"x",auto:!0},{scale:Yn,auto:!0}],pathBuilder:pt,theme:ae,scaleKey:"",lineColor:Kn,fillColor:(0,La.alpha)(Bn,.5),show:!Sn.config.custom.hideFrom?.viz})}),dt};function mf(w,J,ae){return w.error||!J.length?[null]:[null,...w.series.map((he,Pe)=>{const xe=he.frame(J);let we;const je=he.pointColor(xe);return Array.isArray(je)?we=je:we=Array(xe.length).fill(je),[he.x(xe).values,he.y(xe).values,Zf(xe,he.pointSize),we]})]}function Zf(w,J){const ae=J(w);return Array.isArray(ae)?ae:Array(w.length).fill(ae)}function ff(w,J){const ae=J(w);return Array.isArray(ae)?ae[0]:ae}const Qd=10,dg=w=>{const[J,ae]=(0,I.useState)(),[he,Pe]=(0,I.useState)([]),[xe,we]=(0,I.useState)(),[je,_e]=(0,I.useState)(),[pt,dt]=(0,I.useState)(),[It,Ft]=(0,I.useState)(!1),St=(0,I.useRef)(!1),Xt=(0,lf.Z)(w.options),cn=(0,lf.Z)(w.data),qt=()=>{St.current=!1,Ft(!1),gn(void 0)},Ut=()=>{St.current=!St.current,Ft(St.current)},gn=Bn=>{dt(Bn)},nn=(0,I.useCallback)(()=>{const Bn=()=>w.data.series,Yn=df(w.options,Bn,be.v.theme2,gn,Ut,St);Yn.error?ae(Yn.error):Yn.series.length&&w.data.series&&(we(Yn.builder),Pe(Yn.series),_e(()=>mf(Yn,w.data.series)),ae(void 0))},[w.data.series,w.options]),Sn=(0,I.useCallback)(()=>{_e(()=>mf({error:J,series:he},w.data.series))},[w.data.series,J,he]);(0,I.useEffect)(()=>{Xt!==w.options||cn?.structureRev!==w.data.structureRev?nn():cn?.series!==w.data.series&&Sn()},[w]);const Kn=()=>{const Bn=[],Yn=Da=>Da==null?"-":Da.toFixed(1),ca=be.v.theme2;for(let Da=0;Da<he.length;Da++){const Pa=he[Da],xa=Pa.frame(w.data.series);if(xa)for(const Ss of Pa.legend())Ss.getDisplayValues=()=>{const Qa=w.options.legend.calcs;if(!Qa?.length)return[];const Ea=Pa.y(xa),Ja=Ea.display??Yn;let os=null;const Ys=(0,Aa.Kx)({field:Ea,reducers:Qa});return Qa.map(Ms=>{const Qs=Aa.TB.get(Ms);let _s=Ja;return Qs.id===Aa.gz.diffperc&&(_s=(0,ra.U_)({field:{...Ea,config:{...Ea.config,unit:"percent"}},theme:ca})),(Qs.id===Aa.gz.count||Qs.id===Aa.gz.changeCount||Qs.id===Aa.gz.distinctCount)&&(os||(os=(0,ra.U_)({field:{...Ea,config:{...Ea.config,unit:"none"}},theme:ca})),_s=os),{..._s(Ys[Ms]),title:Qs.name,description:Qs.description}})},Ss.disabled=!(Pa.show??!0),w.options.seriesMapping===Rm.Manual&&(Ss.label=w.options.series?.[Da]?.name??`Series ${Da+1}`),Bn.push(Ss)}if(!w.options.legend.showLegend)return null;const na={flexStart:T.css`
        div {
          justify-content: flex-start !important;
        }
      `};return I.createElement(ms.AY.Legend,{placement:w.options.legend.placement,width:w.options.legend.width},I.createElement(Ya.l,{className:na.flexStart,placement:w.options.legend.placement,items:Bn,displayMode:w.options.legend.displayMode}))};return J||!xe||!je?I.createElement("div",{className:"panel-empty"},I.createElement("p",null,J)):I.createElement(I.Fragment,null,I.createElement(ms.AY,{width:w.width,height:w.height,legend:Kn()},(Bn,Yn)=>I.createElement(ed.N,{config:xe,data:je,width:Bn,height:Yn,timeRange:w.timeRange})),I.createElement(Gs.h_,null,pt&&w.options.tooltip.mode!==at.f3.None&&I.createElement(Ir.S,{position:{x:pt.pageX,y:pt.pageY},offset:{x:Qd,y:Qd},allowPointerEvents:St.current},It&&I.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},I.createElement(Yt.P,{onClick:qt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),I.createElement(Yf,{options:w.options.tooltip,allSeries:he,manualSeriesConfigs:w.options.series,seriesMapping:w.options.seriesMapping,rowIndex:pt.xIndex,hoveredPointIndex:pt.scatterIndex,data:w.data.series,range:w.timeRange}))))};var gf=e(66683);function Jf(w){return{standardOptions:{[Ae.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:nt.S.PaletteClassic}}},useCustomConfig:J=>{J.addRadio({path:"show",name:"Show",defaultValue:w.show,settings:{options:[{label:"Points",value:yo.Points},{label:"Lines",value:yo.Lines},{label:"Both",value:yo.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:w.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:ae=>ae.show!==yo.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:ae=>ae.show!==yo.Points,editor:gf.j,override:gf.j,process:ct.kG,shouldApply:ae=>ae.type===Nt.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:w.lineWidth,settings:{min:0,max:10,step:1},showIf:ae=>ae.show!==yo.Points}),Fn.r(J,w),Gn.B(J)}}}const Xf=new le.c(dg).useFieldConfig(Jf(Yd)).setPanelOptions(w=>{w.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:rf,showIf:J=>J.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:kf,showIf:J=>J.seriesMapping==="manual"}),$n.L(w),Ra.J(w)}),eg={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(4761),e.e(678),e.e(8831)]).then(e.bind(e,20678)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,32557)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(4761),e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(3755),e.e(7537)]).then(e.bind(e,265)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,9722)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(4254),e.e(4666),e.e(6196),e.e(4712),e.e(1598)]).then(e.bind(e,34712)),"app/plugins/datasource/jaeger/module":async()=>await e.e(890).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(9243),e.e(4251)]).then(e.bind(e,93157)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(9243),e.e(534)]).then(e.bind(e,18821)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(9243),e.e(5032)]).then(e.bind(e,21264)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(4254),e.e(4761),e.e(5048),e.e(8366),e.e(6196),e.e(7004)]).then(e.bind(e,71682)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/azuremonitor/module":async()=>await Promise.all([e.e(9046),e.e(2364)]).then(e.bind(e,20172)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(5644),e.e(295)]).then(e.bind(e,25644)),"app/plugins/datasource/alertmanager/module":async()=>await Promise.all([e.e(4761),e.e(6795)]).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(4254),e.e(9704)]).then(e.bind(e,61674)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,74775)),"app/plugins/panel/text/module":D,"app/plugins/panel/timeseries/module":P,"app/plugins/panel/trend/module":M,"app/plugins/panel/state-timeline/module":v,"app/plugins/panel/status-history/module":C,"app/plugins/panel/candlestick/module":f,"app/plugins/panel/graph/module":async()=>await Promise.all([e.e(6093),e.e(1260)]).then(e.bind(e,4048)),"app/plugins/panel/xychart/module":A,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(8537),e.e(8096)]).then(e.bind(e,88763)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,2321)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":d,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":o,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,77899)),"app/plugins/panel/table/module":m,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":y,"app/plugins/panel/live/module":p,"app/plugins/panel/stat/module":vd,"app/plugins/panel/datagrid/module":r,"app/plugins/panel/debug/module":c,"app/plugins/panel/flamegraph/module":a,"app/plugins/panel/gettingstarted/module":u,"app/plugins/panel/gauge/module":Xi,"app/plugins/panel/piechart/module":h,"app/plugins/panel/bargauge/module":l,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":b,"app/plugins/panel/welcome/module":x,"app/plugins/panel/nodeGraph/module":E,"app/plugins/panel/histogram/module":i,"app/plugins/panel/alertGroups/module":t};function _d(w){const ae=new URL(w).pathname.split("/");return{id:ae[3],version:ae[4]}}function tg(w){const{address:J}=w,ae=J.split("/public/plugin-cdn/");return`${be.v.pluginsCDNBaseURL}/${ae[1]}`}function ng(w){const{id:J,version:ae}=_d(w.name),he=`${be.v.pluginsCDNBaseURL}/${J}/${ae}`;return w.source=w.source.replace(/(\/?)(public\/plugins)/g,`${he}/$2`),w.source=w.source.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${he}/public/$2$3`),w.source=w.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${he}/public/plugins/${J}/$2.map`),w.source}function yf(w){return w.metadata.loader==="cdn-loader"&&w.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(w.address=w.address.replace(`${location.origin}/public/plugin-cdn`,be.v.pluginsCDNBaseURL)),w.address}function ag(w){const J=document.getElementsByTagName("link");return Array.from(J).map(he=>he.href).includes(w.address)?"":Cf(w.address)}const Pf="?_cache="+Date.now(),sg=100;function Cf(w){return new Promise(function(J,ae){const he=setTimeout(function(){ae("Unable to load CSS")},sg*1e3),Pe=function(we){clearTimeout(he),xe.onload=xe.onerror=B.noop,setTimeout(function(){we?ae(we):J("")},7)},xe=document.createElement("link");xe.type="text/css",xe.rel="stylesheet",xe.href=w,xe.href.startsWith(be.v.pluginsCDNBaseURL)||(xe.href=xe.href+Pf),xe.onload=function(){Pe()},xe.onerror=function(we){Pe(we instanceof ErrorEvent?we.message:new Error("Error loading CSS file."))},document.head.appendChild(xe)})}var Df=e(82907),Kr=e(89377),Ug=e(4027),wg=e(59554),Wg=e(65103),Fg=e(85095),$g=e(28844),Kg=e(26189),Vg=e(47825),rg=e(7540);const sc=me;sc.PanelPlugin=le.c,sc.DataSourcePlugin=q.hf,sc.AppPlugin=fe.k8,sc.DataSourceApi=q.MF,re.i3.registry.set("css",re.i3.newModule({locate:yf,fetch:ag})),re.i3.registry.set("plugin-loader",re.i3.newModule({locate:Df.hf})),re.i3.registry.set("cdn-loader",re.i3.newModule({locate:tg,translate:ng})),re.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function Ls(w,J){re.i3.registerDynamic(w,[],!0,(ae,he,Pe)=>{Pe.exports=J})}Ls("@grafana/data",Z),Ls("@grafana/ui",sc),Ls("@grafana/runtime",ve),Ls("lodash",K()),Ls("moment",N()),Ls("jquery",F()),Ls("d3",U),Ls("rxjs",ie),Ls("rxjs/operators",j),Ls("react-router",oe),Ls("react-router-dom",Q),Ls("prismjs",G()),Ls("slate",de.ZP),Ls("slate-react",ee.ZP),Ls("@grafana/slate-react",ee.ZP),Ls("slate-plain-serializer",ce.Z),Ls("react",I),Ls("react-dom",V),Ls("react-redux",H),Ls("redux",se),Ls("emotion",T),Ls("@emotion/css",T),Ls("@emotion/react",S),Ls("app/features/dashboard/impression_store",{impressions:Le.Z,__esModule:!0}),Ls("app/core/services/backend_srv",{BackendSrv:Te.y$,getBackendSrv:Te.i}),Ls("app/core/utils/datemath",ne),Ls("app/core/utils/flatten",it),Ls("app/core/utils/kbn",ht.Z),Ls("app/core/utils/ticks",Re),Ls("app/core/config",Ge.ZP),Ls("app/core/time_series",Ye.Z),Ls("app/core/time_series2",Ye.Z),Ls("app/core/table_model",Ie.Z),Ls("app/core/app_events",gt.h$),Ls("app/core/core",{appEvents:gt.h$,contextSrv:gt.Vt,__esModule:!0});const og=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const w of og)Ls(w,{fakeDep:1});async function Lm(w,J){J&&(0,Df.Vf)({path:w,version:J});const ae=eg[w];return ae?typeof ae=="function"?await ae():ae:re.i3.import(w)}function ig(w){return Lm(w.module,w.info?.version).then(J=>{if(J.plugin){const ae=J.plugin;return ae.meta=w,ae}if(J.Datasource){const ae=new q.hf(J.Datasource);return ae.setComponentsFromLegacyExports(J),ae.meta=w,ae}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function zg(w){return Lm(w.module,w.info?.version).then(J=>{const ae=J.plugin?J.plugin:new fe.k8;return ae.init(w),ae.meta=w,ae.setComponentsFromLegacyExports(J),ae})}},82907:(Y,O,e)=>{"use strict";e.d(O,{Hl:()=>l,Vf:()=>s,hf:()=>f});var t=e(13011);const n={},o=Date.now();function s({path:r,version:c}){n[r]||(n[r]=encodeURI(c))}function l(r){const c=`plugins/${r}/module`;n[c]&&delete n[c],(0,t.Z)(r)}function f(r,c=o){const{address:a}=r,u=d(a);if(!u)return`${a}?_cache=${c}`;const p=n[u]||c;return`${a}?_cache=${p}`}function d(r){const c=/\/public\/(plugins\/.+\/module)\.js/i.exec(r);if(!c)return;const[a,u]=c;if(u)return u}},55111:(Y,O,e)=>{"use strict";e.d(O,{O:()=>l,d:()=>f});var t=e(59250),n=e(38490),o=e(13011),s=e(22215);async function l(d){const r=await(0,o.a)(d);let c;if(r.type===t.zV.app&&(c=await(0,s.Av)(r)),r.type===t.zV.datasource&&(c=await(0,s.nL)(r)),r.type===t.zV.panel&&(c=await(0,n._2)(r)),r.type===t.zV.renderer&&(c={meta:r}),!c)throw new Error("Unknown Plugin type: "+r.type);return c}function f(d,r,c){let a={...d},u;function i(p,g){return!g.startsWith(p.url??"")||u&&(u.url?.length??0)>(p.url?.length??0)?p:(u&&(u.active=!1),u={...p,active:!0},u)}return a.children=(a?.children??[]).map(p=>{if(p.children){const g=p.children.map(y=>i(y,c));return{...i(p,c),children:g}}return i(p,c)}),{main:a,node:u??a}}},54294:(Y,O,e)=>{"use strict";e.d(O,{$S:()=>g,Ns:()=>y,PL:()=>h,Uk:()=>m,YT:()=>u,ZP:()=>A,aw:()=>v,p$:()=>C,qD:()=>E,rf:()=>a,z0:()=>D,zW:()=>i,zc:()=>p});var t=e(62992),n=e(82897),o=e.n(n),s=e(77258),l=e(67483),f=e(47694),d=e(77582);const r={orgId:f.ZP.bootData.user.orgId,timeZone:f.ZP.bootData.user.timezone,weekStart:f.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},c=(0,t.oM)({name:"user/profile",initialState:r,reducers:{updateTimeZone:(T,S)=>{T.timeZone=S.payload.timeZone},updateWeekStart:(T,S)=>{T.weekStart=S.payload.weekStart},updateFiscalYearStartMonth:(T,S)=>{T.fiscalYearStartMonth=S.payload.fiscalYearStartMonth},setUpdating:(T,S)=>{T.isUpdating=S.payload.updating},userLoaded:(T,S)=>{T.user=S.payload.user},initLoadTeams:(T,S)=>{T.teamsAreLoading=!0},teamsLoaded:(T,S)=>{T.teams=S.payload.teams,T.teamsAreLoading=!1},initLoadOrgs:(T,S)=>{T.orgsAreLoading=!0},orgsLoaded:(T,S)=>{T.orgs=S.payload.orgs,T.orgsAreLoading=!1},initLoadSessions:(T,S)=>{T.sessionsAreLoading=!0},sessionsLoaded:(T,S)=>{const U=S.payload.sessions.sort((R,F)=>Number(F.isActive)-Number(R.isActive));T.sessions=U.map(R=>({id:R.id,isActive:R.isActive,seenAt:(0,s.E8)(R.seenAt),createdAt:R.createdAt,clientIp:R.clientIp,browser:R.browser,browserVersion:R.browserVersion,os:R.os,osVersion:R.osVersion,device:R.device})),T.sessionsAreLoading=!1},userSessionRevoked:(T,S)=>{T.sessions=T.sessions.filter(U=>U.id!==S.payload.tokenId),T.isUpdating=!1}}}),a=T=>async S=>{(0,n.set)(d.Vt,"user.fiscalYearStartMonth",T),S(M({fiscalYearStartMonth:T}))},u=T=>async S=>{(!(0,n.isString)(T)||(0,n.isEmpty)(T))&&(T=f.ZP?.bootData?.user?.timezone),(0,n.set)(d.Vt,"user.timezone",T),S(P({timeZone:T}))},i=T=>async S=>{(!(0,n.isString)(T)||(0,n.isEmpty)(T))&&(T=f.ZP?.bootData?.user?.weekStart),(0,n.set)(d.Vt,"user.weekStart",T),S(b({weekStart:T})),(0,l.Ls)(T)},{setUpdating:p,initLoadOrgs:g,orgsLoaded:y,initLoadTeams:E,teamsLoaded:h,userLoaded:v,userSessionRevoked:C,initLoadSessions:m,sessionsLoaded:D,updateTimeZone:P,updateWeekStart:b,updateFiscalYearStartMonth:M}=c.actions,x=c.reducer,A={user:c.reducer}},25405:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>t,i:()=>n});const t=o=>o.timeZone,n=o=>o.fiscalYearStartMonth},9386:(Y,O,e)=>{"use strict";e.d(O,{S:()=>n,f:()=>o});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(l){this.extraRenderActions=this.extraRenderActions.concat(l)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,o=new t},36584:(Y,O,e)=>{"use strict";e.d(O,{x:()=>G,t:()=>V});var t=e(9085),n=e.n(t),o=e(82897),s=e(64681),l=e.n(s),f=e(66111),d=e(206),r=e(47956),c=e(50444),a=e(52666),u=e(83881),i=e(4063),p=e(68183),g=e(86647),y=e(11484),E=e(19985),h=e(52081),v=e(53546),C=e(19117),m=e(1029),D=e(67254),P=e(19349),b=e(96161),M=e(9386),x=e(9892),A=e(53117),T=e(72648),S=e(39904),U=e(46967),R=e(57227);const F=H=>{const{query:Q,queries:oe,onChange:se,collapsedText:ie,renderExtras:j,disabled:de}=H,ce=(0,T.wW)(K),[ee,le]=(0,f.useState)(!1),[q,fe]=(0,f.useState)(null),Z=Ge=>{le(!0)},ne=Ge=>{if(le(!1),q){fe(null);return}Q.refId!==Ge&&se({...Q,refId:Ge})},re=Ge=>{const gt=Ge.currentTarget.value.trim();if(gt.length===0){fe("An empty query name is not allowed");return}for(const Te of oe)if(Te!==Q&&gt===Te.refId){fe("Query name already exists");return}q&&fe(null)},ve=Ge=>{ne(Ge.currentTarget.value.trim())},me=Ge=>{Ge.key==="Enter"&&ne(Ge.target.value)},Ie=Ge=>{Ge.target.select()};return f.createElement(f.Fragment,null,f.createElement("div",{className:ce.wrapper},!ee&&f.createElement("button",{className:ce.queryNameWrapper,"aria-label":p.wl.components.QueryEditorRow.title(Q.refId),title:"Edit query name",onClick:Z,"data-testid":"query-name-div",type:"button"},f.createElement("span",{className:ce.queryName},Q.refId),f.createElement(S.J,{name:"pen",className:ce.queryEditIcon,size:"sm"})),ee&&f.createElement(f.Fragment,null,f.createElement(U.I,{type:"text",defaultValue:Q.refId,onBlur:ve,autoFocus:!0,onKeyDown:me,onFocus:Ie,invalid:q!==null,onChange:re,className:ce.queryNameInput,"data-testid":"query-name-input"}),q&&f.createElement(R.S,{horizontal:!0},q)),B(H,ce),j&&f.createElement("div",{className:ce.itemWrapper},j()),de&&f.createElement("em",{className:ce.contextInfo},"Disabled")),ie&&f.createElement("div",{className:ce.collapsedText},ie))},B=(H,Q)=>{const{alerting:oe,dataSource:se,onChangeDataSource:ie}=H;return ie?f.createElement("div",{className:Q.itemWrapper},f.createElement(A.q,{variables:!0,alerting:oe,current:se.name,onChange:ie})):f.createElement("em",{className:Q.contextInfo},"(",se.name,")")},K=H=>({wrapper:x.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${H.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:x.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${H.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${H.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${H.colors.action.hover};
        border: 1px dashed ${H.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${H.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:x.css`
      font-weight: ${H.typography.fontWeightMedium};
      color: ${H.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${H.spacing(.5)};
    `,queryEditIcon:(0,x.cx)(x.css`
        margin-left: ${H.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:x.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:x.css`
      font-weight: ${H.typography.fontWeightRegular};
      font-size: ${H.typography.bodySmall.fontSize};
      color: ${H.colors.text.secondary};
      padding-left: ${H.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:x.css`
      font-size: ${H.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${H.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:x.css`
      display: flex;
      margin-left: 4px;
    `});var L=e(35645);function N({error:H}){const Q=(0,T.wW)(z),oe=H?.message??H?.data?.message??"Query error";return f.createElement("div",{className:Q.wrapper},f.createElement("div",{className:Q.icon},f.createElement(S.J,{name:"exclamation-triangle"})),f.createElement("div",{className:Q.message},oe,L.v.featureToggles.showTraceId&&H.traceId!=null&&f.createElement(f.Fragment,null,f.createElement("br",null)," ",f.createElement("span",null,"(Trace ID: ",H.traceId,")"))))}const z=H=>({wrapper:(0,x.css)({marginTop:H.spacing(.5),background:H.colors.background.secondary,display:"flex"}),icon:(0,x.css)({background:H.colors.error.main,color:H.colors.error.contrastText,padding:H.spacing(1)}),message:(0,x.css)({fontSize:H.typography.bodySmall.fontSize,fontFamily:H.typography.fontFamilyMonospace,padding:H.spacing(1)})});class G extends f.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,g.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Q=(0,y.w)(),oe='<plugin-component type="query-ctrl" />',se={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Q.load(this.element,se,oe),this.angularScope=se.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Q,onChange:oe,queries:se,onRunQuery:ie,onAddQuery:j,app:de=d.zj.PanelEditor,history:ce}=this.props,{datasource:ee,data:le}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ee?.components?.QueryCtrl)return f.createElement("div",{ref:q=>this.element=q});if(ee){let q=this.getReactQueryEditor(ee);if(q)return f.createElement(r.n,{instanceSettings:this.props.dataSource},f.createElement(q,{key:ee?.name,query:Q,datasource:ee,onChange:oe,onRunQuery:ie,onAddQuery:j,data:le,range:(0,P.$t)().timeRange(),queries:se,app:de,history:ce}))}return f.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(Q,oe)=>{Q.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),oe.isOpen||oe.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Q,query:oe,onQueryRemoved:se}=this.props;Q(oe),se&&se()},this.onCopyQuery=()=>{const{query:Q,onAddQuery:oe,onQueryCopied:se}=this.props,ie=(0,o.cloneDeep)(Q);oe(ie),se&&se()},this.onDisableQuery=()=>{const{query:Q,onChange:oe,onRunQuery:se,onQueryToggled:ie}=this.props;oe({...Q,hide:!Q.hide}),se(),ie&&ie(Q.hide)},this.onToggleHelp=()=>{this.setState(Q=>({showingHelp:!Q.showingHelp}))},this.onClickExample=Q=>{Q.datasource===void 0&&(Q.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Q,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Q,query:oe}=this.props,ie=(V(Q,oe.refId)?.series??[]).reduce((ee,le)=>{if(!le.meta?.notices)return ee;const q=(0,o.filter)(le.meta.notices,{severity:"warning"})??[];return ee.concat(q)},[]),j=(0,o.uniqBy)(ie,"text");if(!(j.length>0))return null;const ce=j.map(ee=>ee.text).join(`
`);return f.createElement(E.C,{color:"orange",icon:"exclamation-triangle",text:f.createElement(f.Fragment,null,j.length," ",l()("warning",j.length)),tooltip:ce})},this.renderExtraActions=()=>{const{query:Q,queries:oe,data:se,onAddQuery:ie,dataSource:j}=this.props,de=M.f.getAllExtraRenderAction().map((ce,ee)=>ce({query:Q,queries:oe,timeRange:se.timeRange,onAddQuery:ie,dataSource:j,key:ee})).filter(Boolean);return de.push(this.renderWarnings()),de},this.renderActions=Q=>{const{query:oe,hideDisableQuery:se=!1}=this.props,{hasTextEditMode:ie,datasource:j,showingHelp:de}=this.state,ce=!!oe.hide,ee=j?.components?.QueryEditorHelp;return f.createElement(h.Lh,{width:"auto"},ee&&f.createElement(m.V,{title:"Show data source help",icon:"question-circle",onClick:this.onToggleHelp,active:de}),ie&&f.createElement(m.y,{title:"Toggle text edit mode",icon:"pen",onClick:le=>{this.onToggleEditMode(le,Q)}}),this.renderExtraActions(),f.createElement(m.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),se?null:f.createElement(m.V,{title:"Disable query",icon:ce?"eye-slash":"eye",active:ce,onClick:this.onDisableQuery}),f.createElement(m.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Q=>{const{alerting:oe,query:se,dataSource:ie,onChangeDataSource:j,onChange:de,queries:ce,renderHeaderExtras:ee}=this.props;return f.createElement(F,{query:se,queries:ce,onChangeDataSource:j,dataSource:ie,disabled:se.hide,onClick:le=>this.onToggleEditMode(le,Q),onChange:de,collapsedText:Q.isOpen?null:this.renderCollapsedText(),renderExtras:ee,alerting:oe})}}componentDidMount(){const{data:Q,query:oe,id:se}=this.props,ie=V(Q,oe.refId);this.id=(0,o.uniqueId)(se+"_"),this.setState({data:ie}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Q,queries:oe}=this.props,{datasource:se}=this.state,ie=new b.rY({targets:oe}),j={},de=this;return{datasource:se,target:Q,panel:ie,dashboard:j,refresh:()=>{Q.hide!==de.props.query.hide&&(Q.hide=de.props.query.hide),this.props.onChange(Q),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new c.F,range:(0,P.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Q=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Q?.rawRef?.uid??Q?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Q;const oe=this.getInterpolatedDataSourceUID();try{Q=await this.dataSourceSrv.get(oe)}catch{Q=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Q),this.setState({datasource:Q,queriedDataSourceIdentifier:oe,hasTextEditMode:(0,o.has)(Q,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Q){const{datasource:oe,queriedDataSourceIdentifier:se}=this.state,{data:ie,query:j}=this.props;if(Q.id!==this.props.id&&(this.id=(0,o.uniqueId)(this.props.id+"_")),ie!==Q.data){const de=V(ie,j.refId);this.setState({data:de}),this.angularScope&&(this.angularScope.range=(0,P.$t)().timeRange()),this.angularQueryEditor&&de&&I(this.angularScope,de,this.angularQueryEditor)}if(oe&&se!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Q){if(Q)switch(this.props.app){case d.zj.Explore:return Q.components?.ExploreMetricsQueryField||Q.components?.ExploreLogsQueryField||Q.components?.ExploreQueryField||Q.components?.QueryEditor;case d.zj.PanelEditor:case d.zj.Dashboard:default:return Q.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Q}=this.state;return Q?.getQueryDisplayText?Q.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Q,index:oe,visualization:se}=this.props,{datasource:ie,showingHelp:j,data:de}=this.state,ce=Q.hide,ee=n()("query-editor-row",{"query-editor-row--disabled":ce,"gf-form-disabled":ce});if(!ie)return null;const le=this.renderPluginEditor(),q=ie.components?.QueryEditorHelp;return f.createElement("div",{"data-testid":"query-editor-row","aria-label":p.wl.components.QueryEditorRows.rows},f.createElement(D.t,{id:this.id,draggable:!0,index:oe,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},f.createElement("div",{className:ee,id:this.id},f.createElement(v.z4,null,j&&q&&f.createElement(C.h,null,f.createElement(q,{onClickExample:fe=>this.onClickExample(fe),query:this.props.query,datasource:ie})),le),de?.error&&de.error.refId===Q.refId&&f.createElement(N,{error:de.error}),se)))}}function I(H,Q,oe){if(Q.state===a.Gu.Done){const se=Q.series.map(ie=>(0,u.Zr)(ie));H.events.emit(i.Kh.dataReceived,se)}else Q.state===a.Gu.Error&&H.events.emit(i.Kh.dataError,Q.error);setTimeout(oe.digest)}function V(H,Q){const oe=H.series.filter(de=>de.refId===Q);if(H.state!==a.Gu.Loading&&(H.error||H.errors?.length)&&!H.series.length)return{...H,state:a.Gu.Error};let se=H.state,ie=H.errors?.find(de=>de.refId===Q);!ie&&H.error&&(ie=H.error.refId===Q?H.error:void 0),se!==a.Gu.Loading&&(ie?se=a.Gu.Error:H.state===a.Gu.Error&&(se=a.Gu.Done));const j=H.timeRange;return{...H,state:se,series:oe,error:ie,errors:ie?[ie]:void 0,timeRange:j}}},87865:(Y,O,e)=>{"use strict";e.d(O,{Tl:()=>q,kt:()=>ce});var t=e(46528),n=e(91017),o=e(53376),s=e(12877),l=e(25740),f=e(9471),d=e(82615),r=e(7880),c=e(61474),a=e(86318),u=e(57027),i=e(46978),p=e(82378),g=e(47694),y=e(82897);function E(fe){let Z=[];const ne=(0,y.partition)(fe,"id"),re=(0,y.groupBy)(ne[0],"id");return Z=(0,y.map)(re,ve=>ve.length>1&&!(0,y.every)(ve,h)?(0,y.find)(ve,me=>me.eventType!=="panel-alert"):(0,y.head)(ve)),Z=(0,y.concat)(Z,ne[1]),Z}function h(fe){return fe.eventType==="panel-alert"}var v=e(19349),C=e(49372),m=e(59724),D=e(54899),P=e(55197);class b{canWork({dashboard:Z,range:ne}){return!(!Z.id||ne.raw.to!=="now"||!Z.panels.find(re=>!!re.alert))}work(Z){if(!this.canWork(Z))return(0,P.H_)();const{dashboard:ne}=Z;return(0,C.D)((0,D.i)().get("/api/alerts/states-for-dashboard",{dashboardId:ne.id},`dashboard-query-runner-alert-states-${ne.id}`)).pipe((0,f.U)(re=>({alertStates:re,annotations:[]})),(0,m.K)(P.Rc))}}var M=e(59980),x=e(39859),A=e(90801),T=e(86647),S=e(45984),U=e(17424),R=e(86953);class F{canRun(Z){return Z?Boolean(!Z.annotationQuery||Z.annotations):!1}run({annotation:Z,datasource:ne,dashboard:re,range:ve}){if(!this.canRun(ne))return(0,M.of)([]);const me={};return(0,R.r)({dashboard:re,range:ve,panel:me},ne,Z).pipe((0,f.U)(Ie=>Ie.events??[]),(0,m.K)(P.h1))}}var B=e(573);class K{canRun(Z){return Z?(0,B.yr)(Z)?!0:Boolean(Z.annotationQuery&&!Z.annotations):!1}run({annotation:Z,datasource:ne,dashboard:re,range:ve}){return this.canRun(ne)?(0,C.D)(ne.annotationQuery({range:ve,rangeRaw:ve.raw,annotation:Z,dashboard:re})).pipe((0,m.K)(P.h1)):(0,M.of)([])}}class L{constructor(Z=[new K,new F]){this.runners=Z}canWork({dashboard:Z}){const ne=Z.annotations.list.find(L.getAnnotationsToProcessFilter);return Boolean(ne)}work(Z){if(!this.canWork(Z))return(0,P.H_)();const{dashboard:ne,range:re}=Z;let ve=ne.annotations.list.filter(L.getAnnotationsToProcessFilter);ne.meta.publicDashboardAccessToken&&ve.length>0&&(ve=[ve[0]]);const me=ve.map(Ie=>{let Ge;if((0,g.iE)().isPublicDashboardView){const gt=new U.lh(U.Qi);Ge=(0,M.of)(gt).pipe((0,m.K)(P.hs))}else Ge=(0,C.D)((0,T.F)().get(Ie.datasource)).pipe((0,m.K)(P.hs));return Ge.pipe((0,x.z)(gt=>{const Te=this.runners.find(Le=>Le.canRun(gt));return Te?(ne.events.publish(new S.z(Ie)),Te.run({annotation:Ie,datasource:gt,dashboard:ne,range:re}).pipe((0,d.R)(ce().cancellations().pipe((0,A.h)(Le=>Le===Ie))),(0,f.U)(Le=>(ne.snapshot&&(Ie.snapshotData=(0,y.cloneDeep)(Le)),ne.meta.publicDashboardAccessToken?Le:(0,P.pG)(Ie,Le))),(0,a.x)(()=>{ne.events.publish(new S.RB(Ie))}))):(0,M.of)([])}))});return(0,s.T)(me).pipe((0,r.J)(),(0,c.u)((Ie,Ge)=>Ie.concat(Ge)),(0,f.U)(Ie=>({annotations:Ie,alertStates:[]})))}static getAnnotationsToProcessFilter(Z){return Z.enable&&!Boolean(Z.snapshotData)}}var N=e(56422),z=e(97865),G=e(82002),I=e(37190),V=e(79662),H=e(27876),Q=e(46063);class oe{constructor(){this.hasAlertRules={}}canWork({dashboard:Z,range:ne}){return!(!Z.uid||Z.meta.publicDashboardAccessToken||ne.raw.to!=="now"||this.hasAlertRules[Z.uid]===!1||!(G.Vt.hasPermission(H.AccessControlAction.AlertingRuleRead)&&G.Vt.hasPermission(H.AccessControlAction.AlertingRuleExternalRead)))}work(Z){if(!this.canWork(Z))return(0,P.H_)();const{dashboard:ne}=Z;return(0,C.D)((0,D.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:ne.uid},`dashboard-query-runner-unified-alert-states-${ne.id}`)).pipe((0,f.U)(re=>{if(re.status==="success"){this.hasAlertRules[ne.uid]=!1;const ve={};return re.data.groups.forEach(me=>me.rules.forEach(Ie=>{if((0,V.x_)(Ie)&&Ie.annotations&&Ie.annotations[I.q6.panelID]){this.hasAlertRules[ne.uid]=!0;const Ge=Number(Ie.annotations[I.q6.panelID]),gt=se(Ie.state);ve[Ge]?gt===z.Z.Alerting&&ve[Ge].state!==z.Z.Alerting?ve[Ge].state=z.Z.Alerting:gt===z.Z.Pending&&ve[Ge].state!==z.Z.Alerting&&ve[Ge].state!==z.Z.Pending&&(ve[Ge].state=z.Z.Pending):ve[Ge]={state:gt,id:Object.keys(ve).length,panelId:Ge,dashboardId:ne.id}}})),{alertStates:Object.values(ve),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,m.K)(P.Rc))}}function se(fe){return fe===Q.x_.Firing?z.Z.Alerting:fe===Q.x_.Pending?z.Z.Pending:z.Z.OK}class ie{constructor(Z,ne=(0,v.$t)(),re=[g.vc.unifiedAlertingEnabled?new oe:new b,new N.g,new L]){this.dashboard=Z,this.timeSrv=ne,this.workers=re,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(ve=>this.executeRun(ve)),this.eventsSubscription=Z.events.subscribe(p.U5,ve=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(Z){this.runs.next(Z)}getResult(Z){return this.results.asObservable().pipe((0,f.U)(ne=>{const re=(0,P.tD)(ne.annotations,Z),ve=ne.alertStates.find(me=>Boolean(Z)&&me.panelId===Z);return{annotations:E(re),alertState:ve}}))}executeRun(Z){const re=this.workers.filter(gt=>gt.canWork(Z)).map(gt=>gt.work(Z)),ve=new o.w0,me=(0,s.T)(re).pipe((0,d.R)(this.runs.asObservable()),(0,r.J)(),(0,c.u)((gt,Te)=>(gt.annotations=gt.annotations.concat(Te.annotations),gt.alertStates=gt.alertStates.concat(Te.alertStates),gt)),(0,a.x)(()=>{ve.unsubscribe()}),(0,u.B)()),Ie=new o.w0,Ge=(0,l.H)(200).pipe((0,i.h)({annotations:[],alertStates:[]}),(0,d.R)(me),(0,a.x)(()=>{Ie.unsubscribe()}));Ie.add(Ge.subscribe(gt=>{this.results.next(gt)})),ve.add(me.subscribe(gt=>{this.results.next(gt)}))}cancel(Z){this.cancellationStream.next(Z)}cancellations(){return this.cancellationStream.asObservable().pipe((0,u.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let j;function de(fe){j&&j.destroy(),j=fe}function ce(){if(!j)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return j}let ee;function le(fe){ee=fe}function q(fe){ee||(ee=({dashboard:ne,timeSrv:re,workers:ve})=>new ie(ne,re,ve));const Z=ee(fe);return de(Z),Z}},56422:(Y,O,e)=>{"use strict";e.d(O,{g:()=>o});var t=e(59980),n=e(55197);class o{canWork({dashboard:l}){return l?.annotations?.list?.some(f=>f.enable&&Boolean(f.snapshotData))}work(l){if(!this.canWork(l))return(0,n.H_)();const f=this.getAnnotationsFromSnapshot(l.dashboard);return(0,t.of)({annotations:f,alertStates:[]})}getAnnotationsFromSnapshot(l){return(l?.annotations?.list?.filter(c=>c.enable)).filter(c=>Boolean(c.snapshotData)).reduce((c,a)=>c.concat((0,n.pG)(a,a.snapshotData)),[])}getAnnotationsInSnapshot(l,f){const d=this.getAnnotationsFromSnapshot(l);return(0,n.tD)(d,f)}}},55197:(Y,O,e)=>{"use strict";e.d(O,{H_:()=>i,Rc:()=>p,em:()=>h,h1:()=>a,hs:()=>u,pG:()=>E,tD:()=>y});var t=e(82897),n=e.n(t),o=e(59980),s=e(12115),l=e(77599),f=e(35645),d=e(3153),r=e(60499),c=e(98864);function a(v){return v.cancelled?(0,o.of)([]):(g("AnnotationQueryRunner failed",v),(0,o.of)([]))}function u(v){return g("Failed to retrieve datasource",v),(0,o.of)(void 0)}const i=()=>(0,o.of)({annotations:[],alertStates:[]});function p(v){return v.cancelled||g("DashboardQueryRunner failed",v),i()}function g(v,C){const m=(0,l.P)(C);console.error("handleAnnotationQueryRunnerError",m);const D=(0,r.t_)(v,m.message);(0,d.WI)((0,c.$l)(D))}function y(v,C){return C==null?v:v.filter(m=>{let D;if(D=m.source,!D)return!0;if(D.filter){const P=(D.filter.ids??[]).includes(C);if(D.filter.exclude){if(P)return!1}else if(!P)return!1}return m.panelId&&m.source.type==="dashboard"?m.panelId===C:!0})}function E(v,C){v.snapshotData&&(v=(0,t.cloneDeep)(v),delete v.snapshotData);for(const m of C)switch(m.source=v,m.color=f.v.theme2.visualization.getColorByName(v.iconColor),m.type=v.name,m.isRegion=Boolean(m.timeEnd&&m.time!==m.timeEnd),m.newState?.toLowerCase()){case"pending":m.color="yellow";break;case"alerting":m.color="red";break;case"ok":m.color="green";break;case"normal":m.color="green";break;case"no_data":m.color="gray";break;case"nodata":m.color="gray";break}return C}function h(v){if(!v||!v.length)return[];const C=[];for(const m of v){const D=new s.U(m);for(let P=0;P<m.length;P++){const b=(0,t.cloneDeep)(D.get(P));C.push(b)}}return C}},49003:(Y,O,e)=>{"use strict";e.d(O,{o:()=>S,t:()=>T});var t=e(82897),n=e(46528),o=e(59980),s=e(39859),l=e(9471),f=e(52666),d=e(83881),r=e(75849),c=e(76095),a=e(96905),u=e(13946),i=e(206),p=e(47891),g=e(20308),y=e(77599),E=e(22069),h=e(14035),v=e(91162),C=e(79543),m=e(17424),D=e(87865),P=e(23351),b=e(86029);function M(R,F){return(0,P.a)([R,F]).pipe((0,s.z)(B=>{const[K,L]=B;if(Boolean(L.annotations?.length)||Boolean(L.alertState)){K.annotations||(K.annotations=[]);const N=K.annotations.concat(new b.i(L.annotations)),z=L.alertState;return(0,o.of)({...K,annotations:N,alertState:z})}return(0,o.of)(K)}))}var x=e(75434);let A=100;function T(){return"Q"+A++}class S{constructor(F){this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.t(1),this.dataConfigSource=F}getData(F){const{withFieldConfig:B,withTransforms:K}=F;let L=1,N,z=[],G=[],I,V=!0,H=-1;if(this.dataConfigSource.snapshotData){const Q={state:f.Gu.Done,series:this.dataConfigSource.snapshotData.map(oe=>(0,d.g0)(oe)),timeRange:(0,r.JK)()};return(0,o.of)(Q)}return this.subject.pipe((0,s.z)(Q=>{let oe=this.dataConfigSource.getFieldOverrideOptions(),se=this.dataConfigSource.getTransformations();if(Q.series===G&&N?.fieldConfig===oe?.fieldConfig&&I===se)return(0,o.of)({...Q,structureRev:L,series:z});N=oe,I=se,G=Q.series;let ie=(0,o.of)(Q);return K&&(ie=this.applyTransformations(Q)),ie.pipe((0,l.U)(j=>{let de=j,ce=!1;if(B&&j.series?.length){if(H===this.dataConfigSource.configRev){const ee=j.series.find(le=>(0,h.iL)(le));ee&&!ee.packetInfo.schemaChanged&&z[0].fields.length===ee.fields.length&&(de={...de,series:z.map((le,q)=>({...le,length:j.series[q].length,fields:le.fields.map((fe,Z)=>({...fe,values:j.series[q].fields[Z].values,state:{...fe.state,calcs:void 0,range:void 0}}))}))},ce=!0)}oe!=null&&(V||!ce)&&(H=this.dataConfigSource.configRev,de={...de,series:(0,c.SM)({timeZone:j.request?.timezone??"browser",data:de.series,...oe})},V=!1)}return!ce&&!(0,a.nl)(z,de.series,a.Ch)&&L++,z=de.series,{...de,structureRev:L}}))}))}applyTransformations(F){const B=this.dataConfigSource.getTransformations();if(!B||B.length===0)return(0,o.of)(F);const K={interpolate:L=>(0,g.J)().replace(L,F?.request?.scopedVars)};return(0,u.H)(B,F.series,K).pipe((0,l.U)(L=>({...F,series:L})))}async run(F){const{queries:B,timezone:K,datasource:L,panelId:N,dashboardUID:z,publicDashboardAccessToken:G,timeRange:I,timeInfo:V,cacheTimeout:H,queryCachingTTL:Q,maxDataPoints:oe,scopedVars:se,minInterval:ie,app:j}=F;if((0,C.yl)(L)){this.pipeToSubject((0,C.AK)(F,B[0]),N,!0);return}const de={app:j??i.zj.Dashboard,requestId:T(),timezone:K,panelId:N,dashboardUID:z,publicDashboardAccessToken:G,range:I,timeInfo:V,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(B),maxDataPoints:oe,scopedVars:se||{},cacheTimeout:H,queryCachingTTL:Q,startTime:Date.now(),rangeRaw:I.raw};try{const ce=await U(L,de.scopedVars,G),ee=ce.meta?.mixed;de.targets=de.targets.map(fe=>{const Z=fe.datasource?.type===E.hr.type;return(!fe.datasource||fe.datasource.uid!==ce.uid&&!ee&&!Z)&&(fe.datasource=ce.getRef()),fe});const le=ie?(0,g.J)().replace(ie,de.scopedVars):ce.interval,q=p.calculateInterval(I,oe,le);de.scopedVars=Object.assign({},de.scopedVars,{__interval:{text:q.interval,value:q.interval},__interval_ms:{text:q.intervalMs.toString(),value:q.intervalMs}}),de.interval=q.interval,de.intervalMs=q.intervalMs,this.lastRequest=de,this.pipeToSubject((0,x.v7)(ce,de),N)}catch(ce){this.pipeToSubject((0,o.of)({state:f.Gu.Error,error:(0,y.P)(ce),series:[],timeRange:de.range}),N)}}pipeToSubject(F,B,K=!1){this.subscription&&this.subscription.unsubscribe();let L=F;const N=this.dataConfigSource.getDataSupport();if(N.alertStates||N.annotations){const z=this.dataConfigSource;L=M(F,(0,D.kt)().getResult(z.id))}this.subscription=L.subscribe({next:z=>{this.lastResult=K?z:(0,d.zR)(z,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===f.Gu.Loading||this.lastResult.state===f.Gu.Streaming)&&this.subject.next({...this.lastResult,state:f.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(F){this.lastResult=F.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(F){this.lastResult=F}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function U(R,F,B){if(!B&&R&&typeof R=="object"&&"query"in R)return R;const K=await(0,v.ak)().get(R,F);return B?new m.lh(K):K}},88039:(Y,O,e)=>{"use strict";e.d(O,{V:()=>n});var t=e(86318);function n(o,s){return(0,t.x)(()=>{s&&o.resolveCancelerIfExists(s)})}},59584:(Y,O,e)=>{"use strict";e.d(O,{C:()=>n});var t=e(96905);const n=(o,s)=>{let l=1;return s?.structureRev&&s.series&&(l=s.structureRev,(0,t.nl)(o.series,s.series,t.Ch)||l++),o.structureRev=l,o}},75434:(Y,O,e)=>{"use strict";e.d(O,{v7:()=>U});var t=e(82897),n=e(59980),o=e(12877),s=e(25740),l=e(49372),f=e(9471),d=e(59724),r=e(71735),c=e(57027),a=e(46978),u=e(82615),i=e(52666),p=e(89749),g=e(47406),y=e(206),E=e(77599),h=e(22069),v=e(29930),C=e(99822),m=e(47471),D=e(88039),P=e(49187),b=e(75552),M=e(41818),x=e(9398);function A(F){let B=!1;return N=>{if(!N.request||B||P.Cj.getUrlSearchParams().editPanel!=null||N.state!==i.Gu.Done&&N.state!==i.Gu.Error)return;const G={eventName:b.ct.DataRequest,source:N.request.app,datasourceName:F.name,datasourceId:F.id,datasourceUid:F.uid,datasourceType:F.type,dataSize:0,duration:N.request.endTime-N.request.startTime};N.request.app===y.zj.Explore||N.request.app===y.zj.Correlations?K(G,N):L(G,N),N.series&&N.series.length>0&&(G.dataSize=N.series.length),(0,M.r_)(G),B=!0};function K(N,z){const G=Object.keys(z.series).length;N.totalQueries=G}function L(N,z){const G={};for(let Q=0;Q<z.series.length;Q++){const oe=z.series[Q].refId;oe&&!G[oe]&&(G[oe]=z.series[Q].meta?.isCachedResponse??!1)}const I=Object.keys(G).length,V=Object.values(G).filter(Q=>Q===!0).length;N.panelId=z.request.panelId,N.totalQueries=I,N.cachedQueries=V;const H=(0,x.h4)().getCurrent();H&&(N.dashboardId=H.id,N.dashboardName=H.title,N.dashboardUid=H.uid,N.folderName=H.meta.folderTitle),z.error&&(N.error=z.error.message)}}function T(F,B){const K=B.panelData.request,L={...B.packets},N=F.key??F.data?.[0]?.refId??"A";L[N]=F;let z=F.state||i.Gu.Done,G,I;const V=[],H=[];for(const ie in L){const j=L[ie];if((j.error||j.errors?.length)&&(z=i.Gu.Error,G=j.error,I=j.errors),j.data&&j.data.length)for(const de of j.data){if(de.meta?.dataTopic===p.w5.Annotations){H.push(de);continue}V.push(de)}}const Q=S(K,z),oe={state:z,series:V,annotations:H,error:G,errors:I,request:K,timeRange:Q},se=new Set([...B.panelData.traceIds??[],...F.traceIds??[]]);return se.size>0&&(oe.traceIds=Array.from(se)),{packets:L,panelData:oe}}function S(F,B){const K=F.range;return!(0,t.isString)(K.raw.from)||B!==i.Gu.Streaming?K:{...K,from:g.parse(K.raw.from,!1),to:g.parse(K.raw.to,!0)}}function U(F,B,K){let L={panelData:{state:i.Gu.Loading,series:[],request:B,timeRange:B.range},packets:{}};if(!B.targets.length)return B.endTime=Date.now(),L.panelData.state=i.Gu.Done,(0,n.of)(L.panelData);const N=R(F,B,K).pipe((0,f.U)(z=>{if(!(0,t.map)(z.data))throw new Error(`Expected response data to be array, got ${typeof z.data}.`);return B.endTime=Date.now(),L=T(z,L),L.panelData}),(0,d.K)(z=>{const G=typeof z=="string"?z:JSON.stringify(z);return console.error("runRequest.catchError",G),(0,n.of)({...L.panelData,state:i.Gu.Error,error:(0,E.P)(z)})}),(0,r.b)(A(F)),(0,D.V)(v.ae,B.requestId),(0,c.B)());return(0,o.T)((0,s.H)(200).pipe((0,a.h)(L.panelData),(0,u.R)(N)),N)}function R(F,B,K){if(B.targets=B.targets.map(N=>(0,C.vH)(N)?{...F?.getDefaultQuery?.(y.zj.PanelEditor),...N}:N),F.type==="public-ds")return(0,l.D)(F.query(B));for(const N of B.targets)if((0,h.Pr)(N.datasource))return m.mV.query(B);const L=K?K(B):F.query(B);return(0,l.D)(L)}},10216:(Y,O,e)=>{"use strict";e.d(O,{CN:()=>o,E_:()=>g,YQ:()=>r,fy:()=>c,pW:()=>d,qb:()=>i,qi:()=>f,rh:()=>u,to:()=>a,xb:()=>p,yw:()=>l});var t=e(1037);const n=null,o=58,s=8,l={label:"A\u2013Z",value:"alpha-asc"},f="search.sections",d=0,r="general",c="General",a="grafana.search.include.panels",u="grafana.search.layout",i="grafana.search.sort",p={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},g=1e3},55185:(Y,O,e)=>{"use strict";e.d(O,{o:()=>l});var t=e(54899),n=e(47694),o=e(58355),s=e(28066);async function l(d,r,c=!1){if(!n.ZP.featureToggles.nestedFolders)return console.error("getFolderChildren requires nestedFolders feature toggle"),[];if(!c&&!d)return await f();const u=await(0,o.O)().search({kind:["dashboard"],query:"*",location:d||"general",limit:1e3}),i=u.view.map(g=>(0,s.f9)(g,u.view));return[...await f(d,r),...i]}async function f(d,r){return(await(0,t.i)().get("/api/folders",{parentUid:d})).map(u=>({kind:"folder",uid:u.uid,title:u.title,parentTitle:r,parentUID:d,url:`/dashboards/f/${u.uid}/`}))}},82e3:(Y,O,e)=>{"use strict";e.d(O,{getGrafanaSearcher:()=>t.O});var t=e(58355)},58355:(Y,O,e)=>{"use strict";e.d(O,{O:()=>A});var t=e(35645),n=e(12115),o=e(83881),s=e(6194),l=e(54899),f=e(28066);const d="Loading",r="api/search-v2",c="name_sort";class a{constructor(S){this.fallbackSearcher=S}async search(S){if(S.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(S)}async starred(S){if(S.facet?.length)throw new Error("facets not supported!");const U=await(0,l.i)().get("api/user/stars");return U?.length?this.doSearchQuery({uid:U,query:S.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(R,F)=>{},isItemLoaded:R=>!0}}async tags(S){const U={...S,query:S.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},F=(await(0,l.i)().post(r,U)).frames.map(B=>(0,o.g0)(B));if(F[0]?.name===d)return this.fallbackSearcher.tags(S);for(const B of F)if(B.fields[0].name==="tag")return p(B);return[]}getSortOptions(){const S=[{value:c,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const U of g)S.push({value:`-${U.name}`,label:`${U.display} (most)`}),S.push({value:`${U.name}`,label:`${U.display} (least)`});for(const U of y)S.push({value:`-${U.name}`,label:`${U.display} (recent)`}),S.push({value:`${U.name}`,label:`${U.display} (oldest)`})}return Promise.resolve(S)}async doSearchQuery(S){S=await(0,f.Sd)(S);const U={...S,query:S.query??"*",limit:S.limit??u},F=(await(0,l.i)().post(r,U)).frames.map(I=>(0,o.g0)(I)),B=F.length?(0,o.g0)(F[0]):{fields:[],length:0};if(B.name===d)return this.fallbackSearcher.search(S);for(const I of B.fields)I.display=(0,s.U_)({field:I,theme:t.v.theme2});B.meta?.custom||(B.meta={...B.meta,custom:{count:B.length,max_score:1}});const K=B.meta.custom;if(K.locationInfo||(K.locationInfo={}),K.sortBy?.length){const I=B.fields.find(V=>V.name===K.sortBy);if(I){const V=E(I.name);K.sortBy=V,I.name=V}}let L=0,N;const z=async()=>{for(;L>G.dataFrame.length;){const I=G.dataFrame.length;if(I>=K.count)return;const V=await(0,l.i)().post(r,{...U??{},from:I,limit:i}),H=(0,o.g0)(V.frames[0]);if(!H){console.log("no results",H);return}if(H.fields.length!==G.dataFrame.fields.length){console.log("invalid shape",H,G.dataFrame);return}const Q=H.length+G.dataFrame.length;for(let se=0;se<H.fields.length;se++)G.dataFrame.fields[se].values.push(...H.fields[se].values);G.dataFrame.length=Q;const oe=H.meta?.custom;if(oe?.locationInfo&&K)for(const[se,ie]of Object.entries(oe.locationInfo))K.locationInfo[se]=ie}N=void 0},G=new n.U(B);return{totalRows:K.count??B.length,view:G,loadMoreItems:async(I,V)=>(L=Math.max(L,V),N||(N=z()),N),isItemLoaded:I=>I<G.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const u=50,i=100;function p(T){const S=T.fields[0].values,U=T.fields[1].values,R=[];for(let F=0;F<T.length;F++)R.push({term:S[F],count:U[F]});return R}const g=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],y=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function E(T){for(const S of g)if(S.name===T)return S.display;for(const S of y)if(S.name===T)return S.display;return T}var h=e(22759);class v{constructor(S){this.parent=S,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(S){if(S.facet?.length)throw new Error("facets not supported!");if(S.sort!=null)throw new Error("custom sorting is not supported yet");if(S.tags?.length||S.ds_uid?.length)return this.parent.search(S);const R=(await this.getCache(S.kind)).search(S.query);return{isItemLoaded:()=>!0,loadMoreItems:async(F,B)=>{},totalRows:R.length,view:R}}async getCache(S){const U=S?S.sort().join(","):"*",R=this.cache.get(U);if(R)try{return await R}catch{return this.cache.delete(U),new C(new n.U({name:"error",fields:[],length:0}))}const F=this.parent.search({kind:S,limit:5e3}).then(B=>new C(B.view));return this.cache.set(U,F),F}async starred(S){return this.parent.starred(S)}async getSortOptions(){return this.parent.getSortOptions()}async tags(S){return this.parent.tags(S)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class C{constructor(S){this.full=S,this.ufuzzy=new h.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(U=>({...U,values:[]})),length:0})}search(S){if(!S?.length||S==="*")return this.full;const U=this.full.dataFrame.fields,R=this.names,F=U.map(N=>[]);let[B,K,L]=this.ufuzzy.search(R,S,!0);for(let N=0;N<U.length;N++){let z=U[N].values,G=F[N];if(K&&L)for(let I=0;I<L.length;I++){let V=K.idx[L[I]];G.push(z[V])}else if(B)for(let I=0;I<B.length;I++){let V=B[I];G.push(z[V])}}return this.empty.dataFrame.fields.forEach((N,z)=>{N.values=F[z]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var m=e(99098),D=e(29930),P=e(10216),b=e(1037);class M{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(S,U){const R=await(0,f.Sd)(U);if(R.query==="*"?R.kind?.length===1&&P.xb[R.kind[0]]&&(S.type=P.xb[R.kind[0]]):R.query?.length&&(S.query=R.query),R.uid)S.dashboardUID=R.uid;else if(R.location?.length){let F=this.locationInfo[R.location];F||(await this.doAPIQuery({type:b.o.DashFolder,limit:999}),F=this.locationInfo[R.location]),S.folderIds=[F?.folderId??0]}return S}async search(S){if(S.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:S.limit??P.E_,tag:S.tags,sort:S.sort},S);return this.doAPIQuery(U)}async starred(S){if(S.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:S.limit??P.E_,tag:S.tags,sort:S.sort,starred:S.starred},S);return this.doAPIQuery(U)}async getSortOptions(){return(await D.ae.get("/api/search/sorting")).sortOptions.map(U=>({value:U.name,label:U.displayName}))}async tags(S){return(await D.ae.get("/api/dashboards/tags")).sort((R,F)=>F.count-R.count)}async doAPIQuery(S){const U=await D.ae.get("/api/search",S),R=[],F=[],B=[],K=[],L=[],N=[],z=[];let G;for(let H of U){const Q=H.type==="dash-folder"?"folder":"dashboard";R.push(Q),F.push(H.title),B.push(H.uid),K.push(H.url),L.push(H.tags),z.push(H.sortMeta);let oe=H.folderUid;!oe&&Q==="dashboard"&&(oe="general"),N.push(oe),H.sortMetaName?.length&&(G=H.sortMetaName),H.folderUid&&H.folderTitle?this.locationInfo[H.folderUid]={kind:"folder",name:H.folderTitle,url:H.folderUrl,folderId:H.folderId}:Q==="folder"&&(this.locationInfo[H.uid]={kind:Q,name:H.title,url:H.url,folderId:H.id})}const I={fields:[{name:"kind",type:m.fS.string,config:{},values:R},{name:"name",type:m.fS.string,config:{},values:F},{name:"uid",type:m.fS.string,config:{},values:B},{name:"url",type:m.fS.string,config:{},values:K},{name:"tags",type:m.fS.other,config:{},values:L},{name:"location",type:m.fS.string,config:{},values:N}],length:F.length,meta:{custom:{count:F.length,max_score:1,locationInfo:this.locationInfo}}};G?.length&&z.length&&(I.meta.custom.sortBy=G,I.fields.push({name:G,type:m.fS.number,config:{},values:z}));for(const H of I.fields)H.display=(0,s.U_)({field:H,theme:t.v.theme2});const V=new n.U(I);return{totalRows:I.length,view:V,loadMoreItems:async(H,Q)=>{},isItemLoaded:H=>!0}}}let x;function A(){if(!x){const T=new M,S=t.v.featureToggles.panelTitleSearch;x=S?new a(T):T,S&&location.search.includes("do-frontend-query")&&(x=new v(x))}return x}},28066:(Y,O,e)=>{"use strict";e.d(O,{J6:()=>l,Sd:()=>n,f9:()=>f});var t=e(9398);async function n(d){return d.query&&d.query.indexOf("folder:current")>=0&&(d={...d,location:await o(),query:d.query.replace("folder:current","").trim()},d.query?.length||(d.query="*")),Promise.resolve(d)}async function o(){try{let d=(0,t.h4)().getCurrent();return d||(await s(500),d=(0,t.h4)().getCurrent()),Promise.resolve(d?.meta?.folderUid)}catch(d){console.error(d)}}function s(d){return new Promise(r=>setTimeout(r,d))}function l(d){return d==="dashboard"?"apps":d==="folder"?"folder":"question-circle"}function f(d,r){const c=r?.dataFrame.meta?.custom,a={kind:"dashboard",uid:d.uid,title:d.name,url:d.url,tags:d.tags??[]},u=c?.sortBy;if(u){const i=d[u];(typeof i=="string"||typeof i=="number")&&(a.sortMetaName=u,a.sortMeta=i)}if(d.location){const i=d.location.split("/"),p=i[i.length-1],g=c?.locationInfo[p];g&&(a.parentTitle=g.name,a.parentKind=g.kind,a.parentUID=p)}return a}},1037:(Y,O,e)=>{"use strict";e.d(O,{A:()=>n,o:()=>t});var t=(o=>(o.DashDB="dash-db",o.DashHome="dash-home",o.DashFolder="dash-folder",o))(t||{}),n=(o=>(o.List="list",o.Folders="folders",o))(n||{})},45003:(Y,O,e)=>{"use strict";e.d(O,{Dn:()=>E,LA:()=>c,M4:()=>v,P4:()=>f,Ub:()=>y,ZP:()=>m,aj:()=>C,dt:()=>g,e7:()=>d,pN:()=>p,s3:()=>r});var t=e(62992),n=e(27876);const o={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:o,reducers:{serviceAccountFetchBegin:D=>({...D,isLoading:!0}),serviceAccountFetchEnd:D=>({...D,isLoading:!1}),serviceAccountLoaded:(D,P)=>({...D,serviceAccount:P.payload,isLoading:!1}),serviceAccountTokensLoaded:(D,P)=>({...D,tokens:P.payload,isLoading:!1})}}),l=s.reducer,{serviceAccountLoaded:f,serviceAccountTokensLoaded:d,serviceAccountFetchBegin:r,serviceAccountFetchEnd:c}=s.actions,a={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},u=(0,t.oM)({name:"serviceaccounts",initialState:a,reducers:{serviceAccountsFetched:(D,P)=>{const{totalCount:b,perPage:M,...x}=P.payload,A=Math.ceil(b/M);return{...D,...x,totalPages:A,perPage:M,showPaging:A>1,isLoading:!1}},serviceAccountsFetchBegin:D=>({...D,isLoading:!0}),serviceAccountsFetchEnd:D=>({...D,isLoading:!1}),acOptionsLoaded:(D,P)=>({...D,roleOptions:P.payload}),queryChanged:(D,P)=>({...D,query:P.payload,page:0}),pageChanged:(D,P)=>({...D,page:P.payload}),stateFilterChanged:(D,P)=>({...D,serviceAccountStateFilter:P.payload})}}),i=u.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:g,serviceAccountsFetched:y,acOptionsLoaded:E,pageChanged:h,stateFilterChanged:v,queryChanged:C}=u.actions,m={serviceAccountProfile:l,serviceAccounts:i}},62295:(Y,O,e)=>{"use strict";e.d(O,{Ii:()=>l,UW:()=>c,ZP:()=>p,cD:()=>d,fT:()=>u,ik:()=>r,ki:()=>f,rI:()=>a,rW:()=>s});var t=e(62992);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},o=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(g,y)=>({...g,supportBundles:y.payload,isLoading:!1}),fetchBegin:g=>({...g,isLoading:!0}),fetchEnd:g=>({...g,isLoading:!1}),collectorsFetchBegin:g=>({...g,createBundlePageLoading:!0}),collectorsFetchEnd:g=>({...g,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(g,y)=>({...g,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(g,y)=>({...g,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(g,y)=>({...g,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:l,fetchEnd:f,supportBundleCollectorsLoaded:d,collectorsFetchBegin:r,collectorsFetchEnd:c,setLoadBundleError:a,setCreateBundleError:u}=o.actions,p={supportBundles:o.reducer}},97189:(Y,O,e)=>{"use strict";e.d(O,{PJ:()=>f,PL:()=>s,UD:()=>p,ZP:()=>y,aj:()=>l,iI:()=>u,n2:()=>i,p3:()=>n,y$:()=>a});var t=e(62992);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},o=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(E,h)=>{const{totalCount:v,perPage:C,...m}=h.payload,D=Math.ceil(v/C);return{...E,...m,totalPages:D,perPage:C,hasFetched:!0}},queryChanged:(E,h)=>({...E,page:1,query:h.payload}),pageChanged:(E,h)=>({...E,page:h.payload})}}),{teamsLoaded:s,queryChanged:l,pageChanged:f}=o.actions,d=o.reducer,r={team:{},members:[],groups:[],searchMemberQuery:""},c=(0,t.oM)({name:"team",initialState:r,reducers:{teamLoaded:(E,h)=>({...E,team:h.payload}),teamMembersLoaded:(E,h)=>({...E,members:h.payload}),setSearchMemberQuery:(E,h)=>({...E,searchMemberQuery:h.payload}),teamGroupsLoaded:(E,h)=>({...E,groups:h.payload})}}),{teamLoaded:a,teamGroupsLoaded:u,teamMembersLoaded:i,setSearchMemberQuery:p}=c.actions,g=c.reducer,y={teams:d,team:g}},28674:(Y,O,e)=>{"use strict";e.d(O,{J:()=>oe});var t=e(82897),n=e(55024),o=e(86647),s=e(20308),l=e(57369),f=e(40538),d=e(22323),r=e(82253),c=e(15546),a=e(87095),u=e(92624);let i={};function p(se){const ie=i[se];return ie||(i[se]=(0,t.property)(se))}class g{constructor(ie,j,de){this.state={name:ie.name,value:j,text:de,type:ie.type}}getValue(ie){let{value:j}=this.state;return j==="string"||j==="number"||j==="boolean"?j:String(j)}getValueText(){const{value:ie,text:j}=this.state;return typeof j=="string"?ie===r.r2?r.xk:j:Array.isArray(j)?j.join(" + "):(console.log("value",j),String(j))}}let y;function E(se,ie,j){return y?(y.state.name=se.name,y.state.type=se.type,y.state.value=ie,y.state.text=j):y=new g(se,ie,j),y}function h(se,ie,j,de){if(j=j||{},se==null||(0,c.Kn)(j)&&ie!==f.b8.QueryParam)return"";if(!Array.isArray(se)&&typeof se=="object"&&(se=`${se}`),typeof ie=="function")return ie(se,j,h);ie||(ie=f.b8.Glob);let ce=ie.split(":");ce.length>1?(ie=ce[0],ce=ce.slice(1)):ce=[];let ee=l.Vl.getIfExists(ie);ee||(console.error(`Variable format ${ie} not found. Using glob format as fallback.`),ee=l.Vl.get(f.b8.Glob));const le=E(j,se,de??se);return ee.formatter(se,ce,le)}var v=e(94976),C=e(49187),m=e(19349),D=e(69155),P=e(2703),b=e(99098),M=e(72769),x=e(6194),A=e(30471),T=e(7569);function S(se,ie,j){return new Proxy({},{get:(de,ce)=>{if(ce==="name")return se.name;if(ce==="displayName")return(0,A.CZ)(se,ie,j);if(ce==="labels"||ce==="formattedLabels")return se.labels?{...se.labels,__values:Object.values(se.labels).sort().join(", "),toString:()=>(0,T.aA)(se.labels,"",!0)}:""}})}function U(se,ie,j,de){const ce=R(se,ie,j);return h(ce,de)}function R(se,ie,j){const de=j?.__dataContext;if(!de)return se;const{frame:ce,rowIndex:ee,field:le,calculatedValue:q}=de.value;if(q)switch(ie){case"numeric":return q.numeric.toString();case"raw":return q.numeric;case"time":return"";case"text":default:return(0,P.zc)(q)}if(ee===void 0)return se;if(ie==="time"){const re=ce.fields.find(ve=>ve.type===b.fS.time);return re?re.values[ee]:void 0}const fe=le.values[ee];if(ie==="raw")return fe;const ne=(le.display??K())(fe);switch(ie){case"numeric":return ne.numeric;case"text":return ne.text;default:return(0,P.zc)(ne)}}function F(se,ie,j,de){const ce=j?.__dataContext;if(!ce||!ie)return se;const{frame:ee,rowIndex:le}=ce.value;if(le===void 0||ie===void 0)return se;const q={name:ee.name,refId:ee.refId,fields:(0,M.z)({frame:ee,rowIndex:le})},fe=p(ie)(q)??"";return h(fe,de)}let B;function K(){return B||(B=(0,x.U_)()),B}function L(se,ie,j,de){const ce=j?.__dataContext;if(!ce||ie!=="name")return se;const{frame:ee,frameIndex:le}=ce.value,q=(0,A.nf)(ee,le);return h(q,de)}function N(se,ie,j,de){const ce=j?.__dataContext;if(!ce||ie===void 0||ie==="")return se;const{frame:ee,field:le,data:q}=ce.value,fe=S(le,ee,q),Z=p(ie)(fe)??"";return h(Z,de)}const z={__value:U,__data:F,__series:L,__field:N,[v.W.includeVars]:G,[v.W.keepTime]:I};function G(se,ie,j){const de=(0,D.c)(j);return C.Cj.toUrlParams(de)}function I(){return C.Cj.toUrlParams((0,m.$t)().timeRangeForUrl())}const V={getFilteredVariables:a.Q4,getVariables:a.ng,getVariableWithName:a._K};class H{constructor(ie=V){this.dependencies=ie,this.regex=u.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._variables=[]}init(ie,j){this._variables=ie,this.timeRange=j,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const ie=j=>j||j==="";if(this.index=this._variables.reduce((j,de)=>(de.current&&(de.current.isNone||ie(de.current.value))&&(j[de.name]=de),j),{}),this.timeRange){const j=this.timeRange.from.valueOf().toString(),de=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:j,text:j}},__to:{current:{value:de,text:de}}}}}updateTimeRange(ie){this.timeRange=ie,this.updateIndex()}variableInitialized(ie){this.index[ie.name]=ie}getAdhocFilters(ie){let j=[],de=(0,o.F)().getInstanceSettings(ie);if(!de)return[];for(const ce of this.getAdHocVariables()){const ee=ce.datasource?.uid;(ee===de.uid||ee?.indexOf("$")===0&&this.replace(ee)===ie)&&(j=j.concat(ce.filters))}return j}setGrafanaVariable(ie,j){this.grafanaVariables.set(ie,j)}setGlobalVariable(ie,j){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[ie]:{current:j}}}getVariableName(ie){this.regex.lastIndex=0;const j=this.regex.exec(ie);return j?j.slice(1).find(ce=>ce!==void 0):null}containsTemplate(ie){if(!ie)return!1;const j=this.getVariableName(ie),de=j&&this.getVariableAtIndex(j);return de!=null}variableExists(ie){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(ie)}highlightVariablesAsHtml(ie){return!ie||!(0,t.isString)(ie)?ie:(ie=(0,t.escape)(ie),this._replaceWithVariableRegex(ie,void 0,(j,de)=>this.getVariableAtIndex(de)?'<span class="template-variable">'+j+"</span>":j))}getAllValue(ie){if(ie.allValue)return ie.allValue;const j=[];for(let de=1;de<ie.options.length;de++)j.push(ie.options[de].value);return j}getVariableValue(ie,j){return j?p(j)(ie.value):ie.value}getVariableText(ie,j){return ie.value===j||typeof j!="string"?ie.text:j}replace(ie,j,de,ce){return j&&j.__sceneObject?l.ep.interpolate(j.__sceneObject.value,ie,j,de):ie?(this.regex.lastIndex=0,this._replaceWithVariableRegex(ie,de,(ee,le,q,fe)=>{const Z=this._evaluateVariableExpression(ee,le,q,fe,j);return ce&&ce.push({match:ee,variableName:le,fieldPath:q,format:fe,value:Z,found:Z!==ee}),Z})):ie??""}_evaluateVariableExpression(ie,j,de,ce,ee){const le=this.getVariableAtIndex(j),q=ee?.[j];if(q){const re=this.getVariableValue(q,de),ve=this.getVariableText(q,re);if(re!=null)return h(re,ce,le,ve)}if(!le){const re=z[j];return re?re(ie,de,ee,ce):ie}if(ce===f.b8.QueryParam||(0,c.Kn)(le)){const re=d.z.get(le.type).getValueForUrl(le),ve=(0,c.Kn)(le)?le.id:le.current.text;return h(re,ce,le,ve)}const fe=this.grafanaVariables.get(le.current.value);if(fe)return h(fe,ce,le);let Z=le.current.value,ne=le.current.text;if(this.isAllValue(Z)&&(Z=this.getAllValue(le),ne=r.xk,le.allValue&&ce!==f.b8.Text&&ce!==f.b8.PercentEncode))return this.replace(Z);if(de){const re=this.getVariableValue({value:Z,text:ne},de);if(re!=null)return h(re,ce,le,ne)}return h(Z,ce,le,ne)}_replaceWithVariableRegex(ie,j,de){return this.regex.lastIndex=0,ie.replace(this.regex,(ce,ee,le,q,fe,Z,ne)=>de(ce,ee||le||fe,Z,q||ne||j))}isAllValue(ie){return ie===r.r2||Array.isArray(ie)&&ie[0]===r.r2}replaceWithText(ie,j){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(ie,j,"text")}getVariableAtIndex(ie){if(ie)return this.index[ie]?this.index[ie]:this.dependencies.getVariableWithName(ie)}getAdHocVariables(){return this.dependencies.getFilteredVariables(c.Kn)}}const Q=new H;(0,s.l)(Q);const oe=()=>Q},90024:(Y,O,e)=>{"use strict";e.d(O,{J:()=>a});var t=e(40538),n=e(34315),o=e(66111),s=e(52081),l=e(2594),f=e(46967);const d=[{label:"Size",value:t.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:t.kW.Count,description:"Split the buckets based on count"}],r=[{label:"Split",value:t.kW.Size,description:"Split the buckets based on size"}],c=({value:u,onChange:i,item:p})=>o.createElement(s.Lh,null,o.createElement(l.S,{value:u?.mode||t.kW.Size,options:u?.scale?.type===t.wf.Log?r:d,onChange:g=>{i({...u,mode:g})}}),o.createElement(f.I,{value:u?.value??"",placeholder:"Auto",onChange:g=>{i({...u,value:g.currentTarget.value})}}));function a(u,i,p,g){i.addCustomEditor({id:"xBuckets",path:`${u}xBuckets`,name:"X Bucket",editor:c,category:g,defaultValue:{mode:t.kW.Size}}),i.addCustomEditor({id:"yBuckets",path:`${u}yBuckets`,name:"Y Bucket",editor:c,category:g,defaultValue:{mode:t.kW.Size}}),i.addCustomEditor({id:"yBuckets-scale",path:`${u}yBuckets.scale`,name:"Y Bucket scale",category:g,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(Y,O,e)=>{"use strict";e.d(O,{xf:()=>z,Oy:()=>U,qJ:()=>K,d8:()=>B,Cj:()=>L});var t=e(9471),n=e(13512),o=e(99098),s=e(30471),l=e(2703),f=e(39393),d=e(76282),r=e(75133),c=e(17587),a=e(40538),u=e(56190);const{abs:i,pow:p}=Math,g=new Map;function y(V,H,Q,oe){let se=[],ie=oe.map(u.d);for(let j=H;j<Q;j++){let de=i(j),ce=(0,u.O)(p(V,j),de);for(let ee=0;ee<oe.length;ee++){let le=oe[ee]*ce,q=(le>=0&&j>=0?0:de)+(j>=ie[ee]?0:ie[ee]),fe=(0,u.O)(le,q);se.push(fe),g.set(fe,q)}}return se}const E=V=>V%1===0,h=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],v=y(10,-16,0,h),C=y(10,0,16,h),m=C.filter(E),D=v.concat(C),P=v.concat(m),b=1*1e3,M=60*b,x=60*M,A=24*x,T=365*A,S=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,b,2*b,4*b,5*b,10*b,15*b,20*b,30*b,M,2*M,4*M,5*M,10*M,15*M,20*M,30*M,x,2*x,4*x,6*x,8*x,12*x,18*x,A,2*A,3*A,4*A,5*A,6*A,7*A,10*A,15*A,30*A,45*A,60*A,90*A,180*A,T,2*T,3*T,4*T,5*T,6*T,7*T,8*T,9*T,10*T],U={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(V,H)=>Q=>Q.pipe((0,t.U)(oe=>U.transformer(V,H)(oe))),transformer:V=>H=>{const Q=z(H,V);return V.keepOriginalData?[Q,...H]:[Q]}};function R(V){return V==="+Inf"?1/0:V==="-Inf"?-1/0:+(V??0)}function F(V,H){return R(V)-R(H)}function B(V){return V?.meta?.custom??{}}function K(V){let H=!1;for(let Q of V.fields)switch(Q.name){case"y":case"yMin":case"yMax":if(H)return!1;H=!0}return H}function L(V){const H=V.frame.fields[0],Q=H.values,oe=V.frame.fields.filter((Z,ne)=>Z.type===o.fS.number&&ne>0),se=Q.length*oe.length,ie=new Array(se),j=new Array(se),de=new Array(se),ce=oe.map(Z=>Z.values.slice());ce.forEach((Z,ne)=>{for(let re=0;re<Z.length;re++)de[ce.length*re+ne]=Z[re]});const ee=Array.from({length:oe.length},(Z,ne)=>ne);for(let Z=0,ne=0,re=0;Z<se;ne=++Z%ee.length)j[Z]=ee[ne],ne===0&&Z>=ee.length&&re++,ie[Z]=Q[re];let le=oe[0].labels?.le!=null?"yMax":"y";switch(V.layout){case a.kv.le:le="yMax";break;case a.kv.ge:le="yMin";break;case a.kv.unknown:le="y";break}const q={yOrdinalDisplay:oe.map(Z=>(0,s.CZ)(Z,V.frame)),yMatchWithLabel:Object.keys(oe[0].labels??{})[0]};if(q.yMatchWithLabel&&(q.yOrdinalLabel=oe.map(Z=>Z.labels?.[q.yMatchWithLabel]??""),q.yMatchWithLabel==="le"&&(q.yMinDisplay="0.0")),V.unit?.length||V.decimals!=null){const Z=(0,l.Cf)(V.unit??"short");q.yMinDisplay&&(q.yMinDisplay=(0,l.zc)(Z(0,V.decimals))),q.yOrdinalDisplay=q.yOrdinalDisplay.map(ne=>{let re=+ne;return Number.isNaN(re)?ne:(0,l.zc)(Z(re,V.decimals))})}const fe={...oe[0].config};return fe.displayNameFromDS&&delete fe.displayNameFromDS,{length:ie.length,refId:V.frame.refId,meta:{type:f.P.HeatmapCells,custom:q},fields:[{name:H.type===o.fS.time?"xMax":"x",type:H.type,values:ie,config:H.config},{name:le,type:o.fS.number,values:j,config:{unit:"short"}},{name:V.value?.length?V.value:"Value",type:o.fS.number,values:de,config:fe,display:oe[0].display}]}}function N(V){V=V.slice(),V.sort((Q,oe)=>F(Q.name,oe.name));const H=V.map(Q=>Q.fields[1].values.slice());return H.reverse(),H.forEach((Q,oe)=>{if(oe<H.length-1)for(let se=0;se<Q.length;se++)Q[se]-=H[oe+1][se]}),H.reverse(),V.map((Q,oe)=>({...Q,fields:[Q.fields[0],{...Q.fields[1],values:H[oe]}]}))}function z(V,H){let Q,oe,se=0;for(let Z of V)Z.fields.find(re=>re.type===o.fS.time)&&(se+=Z.length);let ie=Array(se),j=Array(se),de=0;for(let Z of V){const ne=Z.fields.find(ve=>ve.type===o.fS.time);if(!ne)continue;Q||(Q=ne);const re=ne.values;for(let ve of Z.fields)if(ve!==ne&&ve.type===o.fS.number){const me=ve.values;for(let Ie=0;Ie<re.length;Ie++,de++)ie[de]=re[Ie],j[de]=me[Ie];oe||(oe=ve)}}if(!Q||!oe)throw"no heatmap fields found";if(!ie.length||!j.length)throw"no values found";const ce=H.xBuckets??{},ee=H.yBuckets??{};if(ce.scale?.type===a.wf.Log)throw"X axis only supports linear buckets";const le=H.yBuckets?.scale??{type:a.wf.Linear},q=G(ie,j,{xSorted:(0,c.lP)(ie),xTime:Q.type===o.fS.time,xMode:ce.mode,xSize:ce.mode===a.kW.Size?(0,d.iX)((0,d.RA)(ce.value??"")):ce.value?+ce.value:void 0,yMode:ee.mode,ySize:ee.value?+ee.value:void 0,yLog:le?.type===a.wf.Log?le?.log:void 0});return{length:q.x.length,name:(0,s.CZ)(oe),meta:{type:f.P.HeatmapCells},fields:[{name:"xMin",type:Q.type,values:q.x,config:Q.config},{name:"yMin",type:o.fS.number,values:q.y,config:{...oe.config,custom:{scaleDistribution:le}}},{name:"Count",type:o.fS.number,values:q.count,config:{unit:"short"}}]}}function G(V,H,Q){let oe=V.length,se=Q?.xSorted??!1,ie=Q?.ySorted??!1,j=se?V[0]:1/0,de=ie?H[0]:1/0,ce=se?V[oe-1]:-1/0,ee=ie?H[oe-1]:-1/0,le=Q?.yLog;for(let Re=0;Re<oe;Re++)se||(j=Math.min(j,V[Re]),ce=Math.max(ce,V[Re])),ie||(!le||H[Re]>0)&&(de=Math.min(de,H[Re]),ee=Math.max(ee,H[Re]));let q=Q?.xSize??0,fe=Q?.ySize??0,Z=Q?.xMode,ne=Q?.yMode;if((!Number.isFinite(q)||q<=0)&&(Z=a.kW.Count,q=20),(!Number.isFinite(fe)||fe<=0)&&(ne=a.kW.Count,fe=10),Z===a.kW.Count){let Re=(ce-j)/Math.max(q-1,1),ye=Q?.xTime?S:P,Ce=ye.findIndex(be=>be>Re)-1;q=ye[Math.max(Ce,0)]}if(ne===a.kW.Count){let Re=(ee-de)/Math.max(fe-1,1),ye=Q?.yTime?S:P,Ce=ye.findIndex(be=>be>Re)-1;fe=ye[Math.max(Ce,0)]}let re=Q?.xCeil?Re=>(0,r.UO)(Re,q):Re=>(0,r.mB)(Re,q),ve=Q?.yCeil?Re=>(0,r.UO)(Re,fe):Re=>(0,r.mB)(Re,fe);if(le){fe=1/(Q?.ySize??1);let Re=le===2?Math.log2:Math.log10;ve=Q?.yCeil?ye=>(0,r.UO)(Re(ye),fe):ye=>(0,r.mB)(Re(ye),fe)}let me=re(j),Ie=re(ce),Ge=ve(de),gt=ve(ee),Te=Math.round((Ie-me)/q)+1,Le=Math.round((gt-Ge)/fe)+1,[Ye,it,ht]=I(Te,Le,me,q,Ge,fe,le);for(let Re=0;Re<oe;Re++){if(le&&H[Re]<=0)continue;const ye=(re(V[Re])-me)/q,Ce=(ve(H[Re])-Ge)/fe,be=ye*Le+Ce;ht[be]++}return{x:Ye,y:it,count:ht}}function I(V,H,Q,oe,se,ie,j){const de=V*H,ce=new Array(de),ee=new Array(de),le=new Array(de);for(let q=0,fe=0,Z=Q;q<de;fe=++q%H)le[q]=0,j?ee[q]=j**(se+fe*ie):ee[q]=se+fe*ie,fe===0&&q>=H&&(Z+=oe),ce[q]=Z;return[ce,ee,le]}},96366:(Y,O,e)=>{"use strict";e.d(O,{Ii:()=>o,JJ:()=>n,ac:()=>s});var t=e(40538),n=(f=>(f.Prepare="prepare",f.Calculate="calculate",f.Modify="modify",f))(n||{}),o=(f=>(f.Heading="heading",f.Distance="distance",f.Area="area",f))(o||{}),s=(f=>(f.AsLine="asLine",f.LineBuilder="lineBuilder",f))(s||{});const l={action:"prepare",source:{mode:t.q1.Auto}}},14573:(Y,O,e)=>{"use strict";e.d(O,{Lb:()=>a,Lp:()=>r,N7:()=>i});var t=e(55839),n=e(17792),o=e(63897),s=e(29501),l=e(76254),f=e(99098),d=e(96366);function r(p){const g=[];for(const y of p.values)y&&g.push(a(y));return new n.Z(g)}function c(p){const g=new Array(p.length);if(p.length>1){let y=u(p[0]);for(let E=1;E<p.length;E++){let h=u(p[E]);if(y&&h){let v=Math.atan2(h[0]-y[0],h[1]-y[1])*180/Math.PI;v<0&&(v+=360),g[E-1]=g[E]=v}}}else g.fill(0);return g}function a(p){return p instanceof o.Z?p.getCoordinates():(0,t.qg)(p.getExtent())}function u(p){if(p)return(0,s.bU)(a(p))}function i(p,g){const y=p.values,E=new Array(p.values.length),h=g.calc??d.Ii.Heading,v=g.field??h;switch(h){case d.Ii.Area:{for(let C=0;C<y.length;C++){const m=y[C];m&&(E[C]=(0,l.bg)(m))}return{name:v,type:f.fS.number,config:{unit:"areaM2"},values:E}}case d.Ii.Distance:{for(let C=0;C<y.length;C++){const m=y[C];m&&(E[C]=(0,l.xA)(m))}return{name:v,type:f.fS.number,config:{unit:"lengthm"},values:E}}case d.Ii.Heading:default:return{name:v,type:f.fS.number,config:{unit:"degree"},values:c(y)}}}},12142:(Y,O,e)=>{"use strict";e.d(O,{PJ:()=>a,ZP:()=>i,eT:()=>d,k7:()=>c,tZ:()=>r,w4:()=>l});var t=e(62992),n=e(47694);const o={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:o,reducers:{usersLoaded:(p,g)=>{const{totalCount:y,perPage:E,page:h,orgUsers:v}=g.payload,C=Math.ceil(y/E);return{...p,isLoading:!0,users:v,perPage:E,page:h,totalPages:C}},searchQueryChanged:(p,g)=>({...p,searchQuery:g.payload,page:o.page}),setUsersSearchPage:(p,g)=>({...p,page:g.payload}),pageChanged:(p,g)=>({...p,page:g.payload}),usersFetchBegin:p=>({...p,isLoading:!0}),usersFetchEnd:p=>({...p,isLoading:!1})}}),{searchQueryChanged:l,setUsersSearchPage:f,usersLoaded:d,usersFetchBegin:r,usersFetchEnd:c,pageChanged:a}=s.actions,i={users:s.reducer}},22323:(Y,O,e)=>{"use strict";e.d(O,{z:()=>n});var t=e(53908);const n=new t.B},30002:(Y,O,e)=>{"use strict";e.d(O,{KJ:()=>E,M6:()=>g,Ue:()=>h,Z$:()=>v,ku:()=>y,m2:()=>p});var t=e(82897),n=e.n(t),o=e(91162),s=e(50678),l=e(15546),f=e(85803),d=e(7240),r=e(87095),c=e(92990),a=e(92624),u=e(79134);const i="Filters",p=D=>async(P,b)=>{let M=m(D,b());if(!M&&(P(C(D)),M=m(D,b()),!M))return;const x=M.filters.findIndex(T=>T.key===D.key&&T.value===D.value);if(x===-1){const{value:T,key:S,operator:U}=D,R={value:T,key:S,operator:U,condition:""};return await P(E((0,a.yQ)(M),R))}const A={...M.filters[x],operator:D.operator};return await P(g((0,a.yQ)(M),{index:x,filter:A}))},g=(D,P)=>async(b,M)=>{const x=(0,r.E0)(D,M());b((0,d.mb)(D.rootStateKey,(0,u.e_)((0,a.Y6)(x,P)))),await b((0,f.MB)((0,a.yQ)(x),!0))},y=(D,P)=>async(b,M)=>{const x=(0,r.E0)(D,M());b((0,d.mb)(D.rootStateKey,(0,u.DO)((0,a.Y6)(x,P)))),await b((0,f.MB)((0,a.yQ)(x),!0))},E=(D,P)=>async(b,M)=>{const x=(0,r.E0)(D,M());b((0,d.mb)(D.rootStateKey,(0,u.QL)((0,a.Y6)(x,P)))),await b((0,f.MB)((0,a.yQ)(x),!0))},h=(D,P)=>async(b,M)=>{const x=(0,r.E0)(D,M());b((0,d.mb)(D.rootStateKey,(0,u.aM)((0,a.Y6)(x,P)))),await b((0,f.MB)((0,a.yQ)(x),!0))},v=(D,P)=>async(b,M)=>{const x=(0,r.E0)(D,M());b((0,d.mb)(D.rootStateKey,(0,c.Pl)((0,a.Y6)(x,{propName:"datasource",propValue:P}))));const T=(await(0,o.ak)().get(P))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";b((0,d.mb)(D.rootStateKey,(0,s.z7)({infoText:T})))},C=D=>(P,b)=>{const M=(0,r.S_)(b()),x={...(0,t.cloneDeep)(u.Js),datasource:D.datasource,name:i,id:i,rootStateKey:M},A=!1,T=(0,r.Eo)(M,b()),S={type:"adhoc",id:x.id,rootStateKey:M};P((0,d.mb)(M,(0,c.VN)((0,a.Y6)(S,{global:A,model:x,index:T}))))},m=(D,P)=>{const b=(0,r.S_)(P),M=(0,r.AE)(b,P);return Object.values(M.variables).find(x=>(0,l.Kn)(x)&&x.datasource?.uid===D.datasource.uid)}},44847:(Y,O,e)=>{"use strict";e.d(O,{F:()=>D});var t=e(66111),n=e(70044),o=e(35287),s=e(68118),l=e(39904),f=e(91162);const d=90,r=({datasource:P,onChange:b,disabled:M,filterKey:x,getTagKeysOptions:A})=>{const T=()=>i(P,A),S=()=>p(P,A);return x===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",Component:u,value:x,onChange:b,loadOptions:T,inputMinWidth:d})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",value:x,onChange:b,loadOptions:S,inputMinWidth:d}))},c="-- remove filter --",a={label:c,value:c},u=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(l.J,{name:"plus"})),i=async(P,b)=>{const M=await(0,f.ak)().get(P);return!M||!M.getTagKeys?[]:(await M.getTagKeys(b)).map(A=>({label:A.text,value:A.text}))},p=async(P,b)=>{const M=await i(P,b);return[a,...M]},g=({datasource:P,disabled:b,onChange:M,filterKey:x,filterValue:A,placeHolder:T})=>{const S=()=>y(P,x);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(s.V,{className:"query-segment-value",disabled:b,placeholder:T,value:A,onChange:M,loadOptions:S}))},y=async(P,b)=>{const M=await(0,f.ak)().get(P);return!M||!M.getTagValues?[]:(await M.getTagValues({key:b})).map(A=>({label:A.text,value:A.text}))},E=["=","!=","<",">","=~","!~"].map(P=>({label:P,value:P})),h=({value:P,disabled:b,onChange:M})=>t.createElement(n.X,{className:"query-segment-operator",value:P,disabled:b,options:E,onChange:M}),v=({datasource:P,filter:{key:b,operator:M,value:x},onKeyChange:A,onOperatorChange:T,onValueChange:S,placeHolder:U,getTagKeysOptions:R,disabled:F})=>t.createElement(t.Fragment,null,t.createElement(r,{disabled:F,datasource:P,filterKey:b,onChange:A,getTagKeysOptions:R}),t.createElement("div",{className:"gf-form"},t.createElement(h,{disabled:F,value:M,onChange:T})),t.createElement(g,{disabled:F,datasource:P,filterKey:b,filterValue:x,onChange:S,placeHolder:U})),C=({datasource:P,appendBefore:b,onCompleted:M,getTagKeysOptions:x})=>{const[A,T]=(0,t.useState)(null),[S,U]=(0,t.useState)("="),R=(0,t.useCallback)(K=>{if(K.value!==c){T(K.value??"");return}T(null)},[T]),F=(0,t.useCallback)(K=>U(K.value??""),[U]),B=(0,t.useCallback)(K=>{M({value:K.value??"",operator:S,condition:"",key:A}),T(null),U("=")},[M,S,A]);return A===null?t.createElement(r,{datasource:P,filterKey:A,onChange:R,getTagKeysOptions:x}):t.createElement(t.Fragment,{key:"filter-builder"},b,t.createElement(v,{datasource:P,filter:{key:A,value:"",operator:S,condition:""},placeHolder:(0,o.t)("variable.adhoc.placeholder","Select value"),onKeyChange:R,onOperatorChange:F,onValueChange:B,getTagKeysOptions:x}))},m=({label:P})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},P));class D extends t.PureComponent{constructor(){super(...arguments),this.onChange=(b,M)=>x=>{const{filters:A}=this.props,{value:T}=x;return x.value===c?this.props.removeFilter(b):this.props.changeFilter(b,{...A[b],[M]:T})},this.appendFilterToVariable=b=>{this.props.addFilter(b)}}render(){const{filters:b,disabled:M}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(b,M),!M&&t.createElement(C,{datasource:this.props.datasource,appendBefore:b.length>0?t.createElement(m,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(b,M){return b.length===0&&M?t.createElement(n.X,{disabled:M,value:"No filters",options:[],onChange:()=>{}}):b.reduce((x,A,T)=>(x.length>0&&x.push(t.createElement(m,{label:"AND",key:`condition-${T}`})),x.push(this.renderFilterSegments(A,T,M)),x),[])}renderFilterSegments(b,M,x){return t.createElement(t.Fragment,{key:`filter-${M}`},t.createElement(v,{disabled:x,datasource:this.props.datasource,filter:b,onKeyChange:this.onChange(M,"key"),onOperatorChange:this.onChange(M,"operator"),onValueChange:this.onChange(M,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(Y,O,e)=>{"use strict";e.d(O,{DO:()=>r,Js:()=>l,QL:()=>d,aM:()=>a,e_:()=>c,jo:()=>u});var t=e(62992),n=e(10672),o=e(87095),s=e(63510);const l={...n.Eg,type:"adhoc",datasource:null,filters:[]},f=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(i,p)=>{const g=(0,o.ir)(i,p.payload.id);g.type==="adhoc"&&g.filters.push(p.payload.data)},filterRemoved:(i,p)=>{const g=(0,o.ir)(i,p.payload.id);if(g.type!=="adhoc")return;const y=p.payload.data;g.filters.splice(y,1)},filterUpdated:(i,p)=>{const g=(0,o.ir)(i,p.payload.id);if(g.type!=="adhoc")return;const{filter:y,index:E}=p.payload.data;g.filters[E]=y},filtersRestored:(i,p)=>{const g=(0,o.ir)(i,p.payload.id);g.type==="adhoc"&&(g.filters=p.payload.data)}}}),{filterAdded:d,filterRemoved:r,filterUpdated:c,filtersRestored:a}=f.actions,u=f.reducer},82253:(Y,O,e)=>{"use strict";e.d(O,{BH:()=>s,IG:()=>f,QX:()=>l,UY:()=>t,r2:()=>o,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",o="$__all",s="None",l="",f="var-"},95125:(Y,O,e)=>{"use strict";e.d(O,{R:()=>r,z:()=>d});var t=e(588),n=e(66111),o=e(68183),s=e(72648),l=e(97379),f=e(49993);const d="Grafana-LegacyVariableQueryEditor",r=({onChange:c,query:a})=>{const u=(0,s.wW)(f.w),[i,p]=(0,n.useState)(a),g=h=>{p(h.currentTarget.value)},y=(0,n.useCallback)(h=>{c(h.currentTarget.value,h.currentTarget.value)},[c]),E=(0,t.Me)();return n.createElement(l.K,{id:E,rows:2,value:i,onChange:g,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":o.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:u.textarea})};r.displayName=d},41624:(Y,O,e)=>{"use strict";e.d(O,{e:()=>l});var t=e(9892),n=e(66111),o=e(72648),s=e(19825);function l({className:d,...r}){const c=(0,o.wW)(f);return n.createElement(s.D,{...r,className:(0,t.cx)(c.legend,d)})}function f(d){return{legend:(0,t.css)({marginTop:d.spacing(3),marginBottom:d.spacing(1)})}}},83704:(Y,O,e)=>{"use strict";e.d(O,{u:()=>d});var t=e(9892),n=e(66111),o=e(72648),s=e(24799),l=e(8581),f=e(56991);function d({name:c,description:a,value:u,options:i,onChange:p,testId:g,width:y}){const E=(0,o.wW)(r),h=(0,f.L)(),v=`variable-select-input-${c}-${h}`;return n.createElement(s.g,{label:c,description:a,htmlFor:v},n.createElement("div",{"data-testid":g},n.createElement(l.Ph,{inputId:v,onChange:p,value:u,width:y??30,options:i,className:E.selectContainer})))}function r(c){return{selectContainer:t.css`
      margin-right: ${c.spacing(.5)};
    `}}},49993:(Y,O,e)=>{"use strict";e.d(O,{W:()=>d,w:()=>r});var t=e(9892),n=e(588),o=e(66111),s=e(72648),l=e(24799),f=e(97379);function d({value:c,name:a,description:u,placeholder:i,onChange:p,onBlur:g,ariaLabel:y,required:E,width:h,testId:v}){const C=(0,s.wW)(r),m=(0,n.Me)();return o.createElement(l.g,{label:a,description:u,htmlFor:m},o.createElement(f.K,{id:m,rows:2,value:c,onChange:p,onBlur:g,placeholder:i,required:E,"aria-label":y,cols:h,className:C.textarea,"data-testid":v}))}function r(c){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${c.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${c.spacing(.75,1)};
      width: inherit;
    `}}},57052:(Y,O,e)=>{"use strict";e.d(O,{V:()=>l});var t=e(588),n=e(66111),o=e(24799),s=e(46967);function l({value:f,name:d,placeholder:r="",onChange:c,testId:a,width:u,required:i,onBlur:p,grow:g,description:y,invalid:E,error:h,maxLength:v}){const C=(0,t.Me)(d);return n.createElement(o.g,{label:d,description:y,invalid:E,error:h,htmlFor:C},n.createElement(s.I,{type:"text",id:C,placeholder:r,value:f,onChange:c,onBlur:p,width:g?void 0:u??30,"data-testid":a,maxLength:v,required:i}))}},50678:(Y,O,e)=>{"use strict";e.d(O,{PF:()=>n,PV:()=>u,QR:()=>i,Sg:()=>a,Yo:()=>l,gl:()=>s,qe:()=>r,wJ:()=>d,y8:()=>f,z7:()=>c});var t=e(62992);const n={id:"",isValid:!0,errors:{},name:"",extended:null},o=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(p,g)=>{p.name=g.payload.name,p.id=g.payload.id},variableEditorUnMounted:(p,g)=>n,changeVariableNameSucceeded:(p,g)=>{p.name=g.payload.data.newName,delete p.errors.name,p.isValid=Object.keys(p.errors).length===0},changeVariableNameFailed:(p,g)=>{p.name=g.payload.newName,p.errors.name=g.payload.errorText,p.isValid=Object.keys(p.errors).length===0},addVariableEditorError:(p,g)=>{p.errors[g.payload.errorProp]=g.payload.errorText,p.isValid=Object.keys(p.errors).length===0},removeVariableEditorError:(p,g)=>{delete p.errors[g.payload.errorProp],p.isValid=Object.keys(p.errors).length===0},changeVariableEditorExtended:(p,g)=>{p.extended={...p.extended,...g.payload}},cleanEditorState:()=>n}}),s=o.reducer,{changeVariableNameSucceeded:l,changeVariableNameFailed:f,variableEditorMounted:d,variableEditorUnMounted:r,changeVariableEditorExtended:c,addVariableEditorError:a,removeVariableEditorError:u,cleanEditorState:i}=o.actions},69155:(Y,O,e)=>{"use strict";e.d(O,{c:()=>s});var t=e(20308),n=e(22323),o=e(82253);function s(l){const f={},d=(0,t.J)().getVariables();for(let r=0;r<d.length;r++){const c=d[r],a=l&&l[c.name];c.skipUrlSync||(a?f[o.IG+c.name]=a.value:f[o.IG+c.name]=n.z.get(c.type).getValueForUrl(c))}return f}},15546:(Y,O,e)=>{"use strict";e.d(O,{$7:()=>y,Ju:()=>u,Kn:()=>s,Kr:()=>r,NX:()=>g,R:()=>a,U4:()=>f,VC:()=>l,X7:()=>p,Xh:()=>o,d7:()=>i,eL:()=>d});var t=e(48976),n=e(95125);const o=E=>E.type==="query",s=E=>E.type==="adhoc",l=E=>E.type==="constant",f=E=>"multi"in E,d=E=>"options"in E,r=E=>"current"in E;function c(E){return E===null?!1:typeof E=="string"}const a=E=>Boolean(E.metricFindQuery)&&!Boolean(E.variables),u=E=>{if(!E.variables||E.variables.getType()!==t.j2.Standard)return!1;const h=E.variables;return"toDataQuery"in h&&Boolean(h.toDataQuery)},i=E=>{if(!E.variables||E.variables.getType()!==t.j2.Custom)return!1;const h=E.variables;return"query"in h&&"editor"in h&&Boolean(h.query)&&Boolean(h.editor)},p=E=>E.variables?E.variables.getType()===t.j2.Datasource:!1;function g(E,h){return E?E.displayName===n.z||a(h):!1}function y(E,h){return E?E.displayName!==n.z&&(p(h)||u(h)||i(h)):!1}},37737:(Y,O,e)=>{"use strict";e.d(O,{Kf:()=>n,iV:()=>s,j4:()=>l});var t=e(62992);const n={usages:[],usagesNetwork:[]},o=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(f,d)=>{const{usages:r,usagesNetwork:c}=d.payload;f.usages=r,f.usagesNetwork=c}}}),s=o.reducer,{initInspect:l}=o.actions},19248:(Y,O,e)=>{"use strict";e.d(O,{MJ:()=>u,GQ:()=>c,V:()=>E,Of:()=>a,PQ:()=>C,dH:()=>A,Yg:()=>h,Rv:()=>M,vI:()=>P});var t=e(94976);function n(T,S){const U=new Set;for(const R of T)U.add(S(R));return U}var o=e(96161),s=e(55935),l=e(86899),f=e(22323),d=e(15546),r=e(92624);const c=T=>{const S=[];for(const U of T)S.push({id:U.id,label:`${U.id}`});return S},a=(T,S)=>T.filter(U=>S.some(R=>R.from===U.id||R.to===U.id)),u=T=>{const S=[];for(const U of T)for(const R of T){if(U===R)continue;f.z.get(U.type).dependsOn(U,R)&&S.push({from:U.id,to:R.id})}return S};function i(T){const S=(0,r.a9)(T);return S?S.slice(1).find(R=>R!==void 0):void 0}const p=(T,S)=>{r.J7.lastIndex=0;const U=[],F=(0,s.Xh)(S,2).match(r.J7);if(!F)return U;for(const B of F){if(!B||B.indexOf("$__")!==-1||B.indexOf("${__")!==-1||B.indexOf("$hashKey")!==-1)continue;const K=i(B);T.some(L=>L.id===K)||U.find(L=>L===K)||K&&U.push(K)}return U},g={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(T,S,U)=>{const R=Object.keys(S.value).reduce((B,K)=>{const L=S.value[K];if(!L||typeof L!="string")return B;const N=g[K]?g[K].find(G=>G.test(T)):void 0;let z=(0,r.QI)(L,T);return K==="repeat"&&L===T&&(z=!0),!N&&z&&(B={...B,[K]:L}),B},{}),F=Object.keys(S.value).reduce((B,K)=>{const L=S.value[K];if(L&&typeof L=="object"&&Object.keys(L).length){let N=L.title||L.name||L.id||K;Array.isArray(S.value)&&S.key==="panels"&&(N=`${N}[${L.id}]`);const z=y(T,{key:K,value:L},{});Object.keys(z).length&&(B={...B,[N]:z})}return B},{});return(Object.keys(R).length||Object.keys(F).length)&&(U={...U,...R,...F}),U},E=(T,S)=>{if(!S)return{unUsed:[],usages:[]};const U=[];let R=[];const F=S.getSaveModelClone();for(const B of T){const K=B.id,L=y(K,{key:"model",value:F},{});!Object.keys(L).length&&!(0,d.Kn)(B)&&U.push(B),Object.keys(L).length&&R.push({variable:B,tree:L})}return{unUsed:U,usages:R}};async function h(T,S){return new Promise((U,R)=>{setTimeout(()=>{try{const F=v(T,S);U(P(F))}catch(F){R(F)}},200)})}function v(T,S){if(!S)return[];let U=[];const R=S.getSaveModelClone(),F=p(T,R);for(const B of F){const K=y(B,{key:"model",value:R},{});if(Object.keys(K).length){const L={id:B,name:B};U.push({variable:L,tree:K})}}return U}function C(T,S,U){const R=n(S.descendants(T),B=>B.name);R.add(t.W.includeVars);for(const B of T)R.add(B);return m([...R],U)}function m(T,S){const U=[];for(const R of T)S[R]&&U.push(...S[R]);return new Set(U)}const D=(T,S)=>{const{id:U,value:R}=S,{nodes:F,edges:B}=T;if(R&&typeof R=="string"){const K=`${S.id}-${R}`;return F.push({id:K,label:R}),B.push({from:K,to:U}),T}if(R&&typeof R=="object"){const K=Object.keys(R);for(const L of K){const N=`${S.id}-${L}`;F.push({id:N,label:L}),B.push({from:N,to:U}),T=D(T,{id:N,value:R[L]})}return T}return T},P=T=>{const S=[];for(const U of T){const{variable:R,tree:F}=U,B={variable:R,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};S.push(D(B,{id:"dashboard",value:F}))}return S},b=T=>Object.values(T).reduce((U,R)=>typeof R=="object"?U+b(R):U+1,0),M=(T,S)=>{const U=S.find(R=>R.variable.id===T);return U?b(U.tree):0};function x(T){const S=[];for(const U of T)S.push(U),U.panels?.length&&S.push(...x(U.panels.map(R=>new PanelModel(R))));return S}function A(T){const S={};for(const U of T){const R=(0,o.Jg)(U),F=[...R.matchAll(/"repeat":"([^"]+)"/g)].map(L=>L[1]),B=R.match(r.J7)?.map(L=>i(L))??[],K=[...F,...B];for(const L of K)L in S?S[L].add(U.id):S[L]=new Set([U.id])}return S}},85972:(Y,O,e)=>{"use strict";e.d(O,{XJ:()=>b,nn:()=>h,yy:()=>d,Ew:()=>v,cv:()=>M,aN:()=>E,iQ:()=>C,_M:()=>y,ss:()=>D,wF:()=>P,Ug:()=>m});var t=e(62992),n=e(82897);const o=(x,...A)=>A.reduce((T,S)=>S(T),x);var s=e(82253),l=e(15546),f=e(92624);const d={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},r=1e3,c=x=>Array.isArray(x)?x.reduce((A,T)=>((0,n.isString)(T.value)&&(A[T.value]=T),A),{}):{},a=x=>{if(!Array.isArray(x.options))return x.options=[],x;const A=c(x.selectedValues);return x.selectedValues=Object.values(A),x.options=x.options.map(T=>{if(!(0,n.isString)(T.value))return T;const S=!!A[T.value];return T.selected===S?T:{...T,selected:S}}),x.options=u(x.options),x},u=x=>Array.isArray(x)?x.length<=r?x:x.slice(0,r):[],i=x=>{const{options:A,selectedValues:T}=x;return A.length===0||T.length>0||!A[0]||A[0].value!==s.r2||(x.selectedValues=[{...A[0],selected:!0}]),x},p=x=>{const{selectedValues:A}=x;return A.length>1&&(x.selectedValues=A.filter(T=>T.value!==s.r2)),x},g=(0,t.oM)({name:"templating/optionsPicker",initialState:d,reducers:{showOptions:(x,A)=>{const{query:T,options:S}=A.payload;if(x.highlightIndex=-1,x.options=(0,n.cloneDeep)(S),x.id=A.payload.id,x.queryValue="",x.multi=!1,(0,l.U4)(A.payload)&&(x.multi=A.payload.multi??!1),(0,l.Xh)(A.payload)){const{queryValue:U}=A.payload,R=(0,f.bf)(T);x.queryValue=R&&U?U:""}return x.selectedValues=x.options.filter(U=>U.selected),o(x,i,a)},hideOptions:(x,A)=>({...d}),toggleOption:(x,A)=>{const{option:T,clearOthers:S,forceSelect:U}=A.payload,{multi:R,selectedValues:F}=x;if(T){const B=!F.find(K=>K.value===T.value&&K.text===T.text);if(T.value===s.r2||!R||S)return B||U?x.selectedValues=[{...T,selected:!0}]:x.selectedValues=[],o(x,i,p,a);if(U||B)return x.selectedValues.push({...T,selected:!0}),o(x,i,p,a);x.selectedValues=F.filter(K=>K.value!==T.value&&K.text!==T.text)}else x.selectedValues=[];return o(x,i,p,a)},moveOptionsHighlight:(x,A)=>{let T=x.highlightIndex+A.payload;return T<0?T=-1:T>=x.options.length&&(T=x.options.length-1),{...x,highlightIndex:T}},toggleAllOptions:(x,A)=>x.selectedValues.length>0?(x.selectedValues=[],o(x,a)):(x.selectedValues=x.options.filter(T=>T.value!==s.r2).map(T=>({...T,selected:!0})),o(x,a)),updateSearchQuery:(x,A)=>(x.queryValue=A.payload,x),updateOptionsAndFilter:(x,A)=>{const T=(0,n.trimStart)((x.queryValue??"").toLowerCase());return x.options=A.payload.filter(S=>{const U=S.text??"";return(Array.isArray(U)?U.toString():U).toLowerCase().indexOf(T)!==-1}),x.highlightIndex=0,o(x,i,a)},updateOptionsFromSearch:(x,A)=>(x.options=A.payload,x.highlightIndex=0,o(x,i,a)),cleanPickerState:()=>d}}),{toggleOption:y,showOptions:E,hideOptions:h,moveOptionsHighlight:v,toggleAllOptions:C,updateSearchQuery:m,updateOptionsAndFilter:D,updateOptionsFromSearch:P,cleanPickerState:b}=g.actions,M=g.reducer},96188:(Y,O,e)=>{"use strict";e.d(O,{x:()=>t});const t=(s,l)=>s&&(l&&!Array.isArray(s.value)?{...s,value:o(s.value),text:o(s.text)}:!l&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,o=s=>Array.isArray(s)?s:[s]},85803:(Y,O,e)=>{"use strict";e.d(O,{Ci:()=>oe,DU:()=>fe,Fz:()=>j,LX:()=>me,MB:()=>ce,Rk:()=>Te,Z7:()=>N,kG:()=>Ge,wX:()=>gt,xQ:()=>ie,xs:()=>ne});var t=e(82897),n=e.n(t),o=e(61618),s=e(52666),l=e(73446),f=e(37932),d=e(35645),r=e(659),c=e(82002),a=e(19349),u=e(3153),i=e(60499),p=e(77582),g=e(29930),y=e(28630),E=e(91162),h=e(28674),v=e(22323),C=e(82253),m=e(50678),D=e(15546),P=e(19248),b=e(85972),M=e(96188),x=e(10672),A=e(92624),T=e(7240),S=e(87095),U=e(92990),R=e(30286),F=e(6942);const B=(Re,ye)=>(Ce,be)=>{let We=0;const Qe=ye.templating.list;for(let vt=0;vt<Qe.length;vt++){const rt=K(Qe[vt]);rt.rootStateKey=Re,v.z.getIfExists(rt.type)&&Ce((0,T.mb)(Re,(0,U.VN)((0,A.Y6)(rt,{global:!1,index:We++,model:rt}))))}(0,h.J)().updateTimeRange((0,a.$t)().timeRange());const mt=(0,S.gt)(Re,be());for(const vt of mt)Ce((0,T.mb)(Re,(0,U.Mn)((0,A.Y6)(vt))))};function K(Re){if(!(0,D.eL)(Re))return Re;let ye=!1;for(const Ce of Re.options)if(Ce.selected=!1,Array.isArray(Re.current.value))for(const be of Re.current.value)Ce.value===be&&(Ce.selected=ye=!0);else Ce.value===Re.current.value&&(Ce.selected=ye=!0);return!ye&&Re.options.length&&(Re.options[0].selected=!0),Re}const L=(Re,ye)=>Ce=>{const be={...x.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:x.bU.hideVariable,current:{value:{name:ye.title,uid:ye.uid,toString:()=>ye.title}}};Ce((0,T.mb)(Re,(0,U.VN)((0,A.Y6)(be,{global:be.global,index:be.index,model:be}))));const We={...x.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:x.bU.hideVariable,current:{value:{name:c.Vt.user.orgName,id:c.Vt.user.orgId,toString:()=>c.Vt.user.orgId.toString()}}};Ce((0,T.mb)(Re,(0,U.VN)((0,A.Y6)(We,{global:We.global,index:We.index,model:We}))));const Qe={...x.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:x.bU.hideVariable,current:{value:{login:c.Vt.user.login,id:c.Vt.user.id,email:c.Vt.user.email,toString:()=>c.Vt.user.id.toString()}}};Ce((0,T.mb)(Re,(0,U.VN)((0,A.Y6)(Qe,{global:Qe.global,index:Qe.index,model:Qe}))))},N=(Re,ye)=>(Ce,be)=>{const{rootStateKey:We}=Re,Qe=(0,S.E0)(Re,be());if(!(0,D.U4)(Qe)||(0,o.Q)(Qe.current))return;const mt=(0,M.x)(Qe.current,ye);Ce((0,T.mb)(We,(0,U.Pl)((0,A.Y6)(Re,{propName:"multi",propValue:ye})))),Ce((0,T.mb)(We,(0,U.Pl)((0,A.Y6)(Re,{propName:"current",propValue:mt}))))},z=async(Re,ye)=>{if(!Re.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Re.id}`);if(G(Re,ye))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Ce=I(Re,ye);V(Re.rootStateKey,Ce,ye)&&await new Promise(be=>{const We=u.h.subscribe(()=>{if(!Re.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Re.id}`);V(Re.rootStateKey,Ce,u.h.getState())||(We(),be())})})},G=(Re,ye,Ce=new Set)=>Ce.has(Re.id)?!0:(Ce=new Set([...Ce,Re.id]),I(Re,ye).some(be=>G(be,ye,Ce))),I=(Re,ye)=>{if(!Re.rootStateKey)return[];const Ce=[];for(const be of(0,S.gt)(Re.rootStateKey,ye))Re!==be&&v.z.getIfExists(Re.type)&&v.z.get(Re.type).dependsOn(Re,be)&&Ce.push(be);return Ce},V=(Re,ye,Ce)=>{if(ye.length===0)return!1;const be=(0,S.gt)(Re,Ce);return ye.filter(Qe=>be.some(mt=>mt.id===Qe.id&&(mt.state===s.Gu.NotStarted||mt.state===s.Gu.Loading))).length>0},H=(Re,ye)=>async(Ce,be)=>{const We=(0,S.E0)(Re,be());await z(We,be());const Qe=ye[C.IG+We.name];if(Qe!==void 0){const mt=(0,A.Hi)(Qe);await v.z.get(We.type).setValueFromUrl(We,mt);return}if(We.hasOwnProperty("refresh")){const mt=We;if(mt.refresh===x.Bd.onDashboardLoad||mt.refresh===x.Bd.onTimeRangeChanged){await Ce(Te((0,A.yQ)(mt)));return}}Ce(Ye(Re))},Q=Re=>async(ye,Ce)=>{const be=f.E1.getSearchObject(),We=(0,S.gt)(Re,Ce()).map(async Qe=>await ye(H((0,A.yQ)(Qe),be)));await Promise.all(We)},oe=(Re,ye)=>async(Ce,be)=>{const We=(0,A.Hi)(ye),Qe=(0,S.E0)(Re,be());(0,A.iD)(Qe)!==x.Bd.never&&await Ce(Te((0,A.yQ)(Qe)));const mt=(0,S.E0)((0,A.yQ)(Qe),be());if(!(0,D.eL)(mt))return;if(!mt)throw new Error(`Couldn't find variable with name: ${Qe.name}`);let vt=mt.options.find(rt=>rt.text===We||rt.value===We);if(!vt&&(0,D.U4)(mt)&&mt.allValue&&We===mt.allValue&&(vt={text:C.xk,value:C.r2,selected:!1}),!vt){let rt=We;const Ot=We;Array.isArray(We)&&(rt=We.reduce((Et,Mt)=>{const ue=mt.options.find(De=>De.value===Mt);return ue?[].concat(Et,[ue.text]):[].concat(Et,[Mt])},[])),vt={text:rt,value:Ot,selected:!1}}(0,D.U4)(mt)&&(vt=(0,M.x)({text:(0,t.castArray)(vt.text),value:(0,t.castArray)(vt.value),selected:!1},mt.multi)),await v.z.get(Qe.type).setValue(mt,vt)},se=Re=>{let ye,Ce,be,We;const Qe=[];for(ye=0;ye<Re.options.length;ye++)if(We={...Re.options[ye]},We.selected=!1,Array.isArray(Re.current.value))for(Ce=0;Ce<Re.current.value.length;Ce++)be=Re.current.value[Ce],We.value===be&&(We.selected=!0,Qe.push(We));else We.value===Re.current.value&&(We.selected=!0,Qe.push(We));return Qe},ie=(Re,ye)=>(Ce,be)=>{const We=(0,S.E0)(Re,be());if(!(0,D.eL)(We))return Promise.resolve();const Qe=We.current||{},mt=v.z.get(We.type).setValue;if(Array.isArray(Qe.value)){const Ot=se(We);if(Ot.length===0){const Mt=We.options[0];return mt(We,Mt)}const Et={value:Ot.map(Mt=>Mt.value),text:Ot.map(Mt=>Mt.text),selected:!0};return mt(We,Et)}let vt=null;const rt=(0,A.Tt)(We);if(vt=We.options?.find(Ot=>Ot.text===rt),vt||ye&&(vt=We.options?.find(Ot=>Ot.text===ye),vt))return mt(We,vt);if(We.options){const Ot=We.options[0];if(Ot)return mt(We,Ot)}return Promise.resolve()},j=(Re,ye,Ce)=>async be=>{const{rootStateKey:We}=Re;return be((0,T.mb)(We,(0,U.Q8)((0,A.Y6)(Re,{option:ye})))),await be(ce(Re,Ce))},de=Re=>{const ye=new y.kJ;return Re.forEach(Ce=>{ye.createNode(Ce.name)}),Re.forEach(Ce=>{Re.forEach(be=>{Ce!==be&&v.z.get(Ce.type).dependsOn(Ce,be)&&ye.link(Ce.name,be.name)})}),ye},ce=(Re,ye,Ce=p.h$)=>async(be,We)=>{const Qe=We(),{rootStateKey:mt}=Re,vt=(0,S.E0)(Re,Qe);if((0,S.AE)(mt,Qe).transaction.status===x.LN.Fetching)return(0,A.iD)(vt)===x.Bd.never&&(await be(it((0,A.yQ)(vt))),be(Ye(Re))),Promise.resolve();const rt=(0,S.gt)(mt,Qe),Ot=de(rt),Et=Qe.dashboard?.getModel()?.panels??[],Mt=(0,P.dH)(Et),ue=(0,D.Kn)(vt)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,P.PQ)([vt.id],Ot,Mt))},De=Ot.getNode(vt.name);let Ne=[];return De&&(Ne=De.getOptimizedInputEdges().map(tt=>{const et=rt.find(Ue=>Ue.name===tt.inputNode?.name);return et?be(Te((0,A.yQ)(et))):Promise.resolve()})),Promise.all(Ne).then(()=>{ye&&(Ce.publish(new x.x9(ue)),f.E1.partial(ve(mt,We)))})},ee=(Re,ye,Ce,be)=>(ye.includes(Re.name)||ye.push(Re.name),Re.outputEdges.forEach(We=>{const Qe=We.outputNode;if(Qe&&!ye.includes(Qe.name)){const mt=Ce.find(vt=>vt.name===Qe.name);mt&&mt.refresh===x.Bd.onTimeRangeChanged&&be.indexOf(mt)===-1?(be.push(mt),ye.push(Qe.name)):ee(Qe,ye,Ce,be)}}),be),le=(Re,ye)=>{const Ce=(0,S.gt)(Re,ye),be=de(Ce),We=[],Qe=[];return Ce.forEach(mt=>{const vt=be.getNode(mt.name);if(!We.includes(mt.name)&&vt){const rt=Ce.find(Et=>Et.name===vt.name),Ot=rt&&rt.refresh===x.Bd.onTimeRangeChanged;Ot&&vt.outputEdges.length===0&&Qe.push(rt),Ot&&Qe.includes(rt)&&vt.outputEdges.length>0&&(Qe.push(rt),ee(vt,We,Ce,Qe)),rt&&rt.refresh&&rt.refresh!==x.Bd.onTimeRangeChanged&&ee(vt,We,Ce,Qe)}}),Qe},q=(Re,ye)=>(0,S.gt)(Re,ye).filter(We=>We.hasOwnProperty("refresh")&&We.hasOwnProperty("options")?We.refresh===x.Bd.onTimeRangeChanged:!1),fe=(Re,ye,Ce={templateSrv:(0,h.J)(),events:p.h$})=>async(be,We)=>{Ce.templateSrv.updateTimeRange(ye);let Qe=[];d.v.featureToggles.refactorVariablesTimeRange?Qe=le(Re,We()):Qe=q(Re,We());const mt=Qe.map(rt=>rt.id),vt=Qe.map(rt=>be(Z((0,A.yQ)(rt))));try{await Promise.all(vt),Ce.events.publish(new x.eq({variableIds:mt}))}catch(rt){console.error(rt),be((0,r.$l)(Le("Template variable service failed",rt)))}},Z=Re=>async(ye,Ce)=>{const be=(0,S.E0)(Re,Ce());if(!(0,D.eL)(be))return;const We=be.options.slice();await ye(Te((0,A.yQ)(be),!0));const Qe=(0,S.E0)(Re,Ce());if(!(0,D.eL)(Qe))return;const mt=Qe.options;JSON.stringify(We)!==JSON.stringify(mt)&&Ce().dashboard.getModel()?.templateVariableValueUpdated()},ne=(Re,ye,Ce=p.h$)=>async(be,We)=>{const Qe=[],mt=We().dashboard.getModel(),vt=(0,S.gt)(Re,We());for(const ue of vt){const De=C.IG+ue.name;if(!ye.hasOwnProperty(De)||!re(ue,ye[De].value))continue;let Ne=ye[De].value;if(ye[De].removed){const et=mt?.templating.list.find(Ue=>Ue.name===ue.name);et&&(0,D.Kr)(et)&&(Ne=et.current.value),et&&(0,D.VC)(et)&&(Ne=et.query)}const tt=v.z.get(ue.type).setValueFromUrl(ue,Ne);Qe.push(tt)}const rt=vt.filter(ue=>{const De=C.IG+ue.name;return ye.hasOwnProperty(De)&&re(ue,ye[De].value)&&!(0,D.Kn)(ue)}),Ot=de(vt),Et=(0,P.dH)(mt?.panels??[]),Mt=(0,P.PQ)(rt.map(ue=>ue.id),Ot,Et);Qe.length&&(await Promise.all(Qe),Ce.publish(new x.Wy({refreshAll:Mt.size===0,panelIds:Array.from(Mt)})))};function re(Re,ye){const Ce=v.z.get(Re.type).getValueForUrl(Re);let be=(0,A.Hi)(ye);return Array.isArray(Ce)&&!Array.isArray(be)&&(be=[be]),!(0,t.isEqual)(Ce,be)}const ve=(Re,ye)=>{const Ce=f.E1.getSearchObject(),be=Object.keys(Ce).filter(We=>We.indexOf(C.IG)===-1).reduce((We,Qe)=>(We[Qe]=Ce[Qe],We),{});for(const We of(0,S.gt)(Re,ye())){if(We.skipUrlSync)continue;const Qe=v.z.get(We.type);be[C.IG+We.name]=Qe.getValueForUrl(We)}return be},me=(Re,ye)=>async(Ce,be)=>{try{const We=(0,A.mn)(Re),Qe=be(),mt=(0,S.cp)(Qe);mt&&(0,S.AE)(mt,Qe).transaction.status===x.LN.Fetching&&Ce(gt(mt)),Ce((0,T.mb)(We,(0,R.Z9)({uid:We}))),Ce(L(We,ye)),Ce(B(We,ye)),Ce(Ie(We)),await Ce(Q(We)),Ce((0,T.mb)(We,(0,R.iv)({uid:We})))}catch(We){Ce((0,r.$l)(Le("Templating init failed",We))),console.error(We)}};function Ie(Re,ye=E.ak){return(Ce,be)=>{const We=(0,S.gt)(Re,be());for(const Qe of We){if(!(0,D.Kn)(Qe)&&!(0,D.Xh)(Qe))continue;const{datasource:mt}=Qe;if((0,l.cv)(mt))continue;const vt=ye().getInstanceSettings(mt),rt=vt?(0,l.iU)(vt):{uid:mt};Ce((0,T.mb)(Re,(0,U.Pl)((0,A.Y6)(Qe,{propName:"datasource",propValue:rt}))))}}}const Ge=Re=>ye=>{ye((0,T.mb)(Re,(0,F.S)())),ye((0,T.mb)(Re,(0,m.QR)())),ye((0,T.mb)(Re,(0,b.XJ)())),ye((0,T.mb)(Re,(0,R.p3)()))},gt=(Re,ye={getBackendSrv:g.i})=>Ce=>{ye.getBackendSrv().cancelAllInFlightRequests(),Ce(Ge(Re))},Te=(Re,ye=!1)=>async(Ce,be)=>{const{rootStateKey:We}=Re;try{if(!(0,A.A3)(We,be()))return;const Qe=(0,S.E0)(Re,be());Ce((0,T.mb)(We,(0,U.$M)((0,A.Y6)(Qe)))),await Ce(it((0,A.yQ)(Qe))),await v.z.get(Qe.type).updateOptions(Qe),Ce(Ye(Re))}catch(Qe){if(Ce((0,T.mb)(We,(0,U.Le)((0,A.Y6)(Re,{error:Qe})))),ye||(console.error(Qe),Ce((0,r.$l)(Le("Error updating options:",Qe,Re)))),ye)throw Qe}},Le=(Re,ye,Ce)=>(0,i.t_)(`${Ce?`Templating [${Ce.id}]`:"Templating"}`,`${Re} ${ye.message}`),Ye=Re=>(ye,Ce)=>{const{rootStateKey:be}=Re;if(!(0,A.A3)(be,Ce()))return;const We=(0,S.E0)(Re,Ce());We.state!==s.Gu.Done&&ye((0,T.mb)(Re.rootStateKey,(0,U.qQ)((0,A.Y6)(We))))};function it(Re,ye=E.ak){return async function(Ce,be){const{id:We,rootStateKey:Qe}=Re;if(!(0,A.A3)(Qe,be()))return;const mt=(0,S.E0)(Re,be());if(mt.type==="query")try{const vt=await ye().get(mt.datasource??"");if((0,D.R)(vt)||!(0,D.Ju)(vt)||ht(mt.query))return;const rt={refId:`${vt.name}-${We}-Variable-Query`,query:mt.query};Ce((0,T.mb)(Qe,(0,U.Pl)((0,A.Y6)(Re,{propName:"query",propValue:rt}))))}catch(vt){Ce((0,r.$l)(Le("Failed to upgrade legacy queries",vt))),console.error(vt)}}}function ht(Re){return Re?Re.hasOwnProperty("refId")&&typeof Re.refId=="string":!1}},7240:(Y,O,e)=>{"use strict";e.d(O,{ZP:()=>c,mb:()=>f,qM:()=>s});var t=e(92624),n=e(51511),o=e(30286);const s={keys:{}},l=a=>({type:`templating/keyed/${a.action.type.replace(/^templating\//,"")}`,payload:a});function f(a,u){const i=(0,t.mn)(a);return l({key:i,action:u})}const d=a=>typeof a.type=="string"&&a.type.startsWith("templating/keyed")&&"payload"in a&&typeof a.payload.key=="string";function r(a=s,u){if(d(u)){const{key:i,action:p}=u.payload,g=(0,t.mn)(i),y=o.Z9.match(p)?g:a.lastKey,E=(0,n.Q)(),h=a.keys[g],v=E(h,p);return{...a,lastKey:y,keys:{...a.keys,[g]:v}}}return a}const c={templating:r}},51511:(Y,O,e)=>{"use strict";e.d(O,{L:()=>a,Q:()=>c});var t=e(83829),n=e(50678),o=e(37737),s=e(85972),l=e(30286),f=e(63510),d=e(6942);let r;function c(){return r||(r=(0,t.combineReducers)({editor:n.gl,variables:d.L,optionsPicker:s.cv,transaction:l.vw,inspect:o.iV})),r}function a(){return{editor:n.PF,variables:f.s,optionsPicker:s.yy,transaction:l.xO,inspect:o.Kf}}},87095:(Y,O,e)=>{"use strict";e.d(O,{AE:()=>d,E0:()=>l,Eo:()=>i,IV:()=>a,Q4:()=>h,QT:()=>p,S_:()=>E,_K:()=>C,cp:()=>y,gt:()=>r,ir:()=>m,ng:()=>v,xD:()=>u});var t=e(58635),n=e(3153),o=e(92624),s=e(51511);function l(D,P=(0,n.y0)(),b=!0){const{id:M,rootStateKey:x}=D,T=d(x,P).variables[M];if(!T){if(b)throw new Error(`Couldn't find variable with id:${M}`);return}return T}function f(D,P,b=(0,n.y0)()){return Object.values(d(P,b).variables).filter(D).sort((M,x)=>M.index-x.index)}function d(D,P=(0,n.y0)()){return P.templating.keys[(0,o.mn)(D)]??(0,s.L)()}function r(D,P=(0,n.y0)()){return f(c,D,P)}function c(D){return D.type!=="system"}const a=(0,t.Z)((D,P)=>r(D,(0,n.y0)())),u=(D,P)=>r(D,P);function i(D,P=(0,n.y0)()){return p(Object.values(d(D,P).variables))}function p(D){const P=D.filter(c).sort((b,M)=>b.index-M.index);return P.length>0?P[P.length-1].index+1:0}function g(D,P=getState()){return d(D,P).transaction.isDirty}function y(D=(0,n.y0)()){return D.templating?.lastKey}function E(D=(0,n.y0)()){if(!D.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return D.templating.lastKey}function h(D,P=(0,n.y0)()){const b=y(P);return b?f(D,b,P):[]}function v(D=(0,n.y0)()){const P=y(D);return P?r(P,D):[]}function C(D,P=(0,n.y0)()){const b=y(P);if(b)return l({id:D,rootStateKey:b,type:"query"},P,!1)}function m(D,P){return D[P]}},92990:(Y,O,e)=>{"use strict";e.d(O,{$M:()=>D,Be:()=>C,Le:()=>b,Mn:()=>m,Pl:()=>y,Q8:()=>v,VN:()=>g,Y9:()=>h,b5:()=>i,gE:()=>E,mZ:()=>p,qQ:()=>P});var t=e(62992),n=e(82897),o=e.n(n),s=e(52666),l=e(22323),f=e(50678),d=e(15546),r=e(92624),c=e(87095),a=e(63510);const u=(0,t.oM)({name:"templating/shared",initialState:a.s,reducers:{addVariable:(M,x)=>{const A=x.payload.id??x.payload.data.model.name,T=l.z.get(x.payload.type),S=(0,n.cloneDeep)(T.initialState),U=T.beforeAdding?T.beforeAdding(x.payload.data.model):(0,n.cloneDeep)(x.payload.data.model),R={...(0,n.defaults)({},U,S),id:A,index:x.payload.data.index,global:x.payload.data.global};M[A]=R},variableStateNotStarted:(M,x)=>{const A=(0,c.ir)(M,x.payload.id);A.state=s.Gu.NotStarted,A.error=null},variableStateFetching:(M,x)=>{const A=(0,c.ir)(M,x.payload.id);A.state=s.Gu.Loading,A.error=null},variableStateCompleted:(M,x)=>{const A=(0,c.ir)(M,x.payload.id);A&&(A.state=s.Gu.Done,A.error=null)},variableStateFailed:(M,x)=>{const A=(0,c.ir)(M,x.payload.id);A&&(A.state=s.Gu.Error,A.error=x.payload.data.error)},removeVariable:(M,x)=>{if(delete M[x.payload.id],!x.payload.data.reIndex)return;const A=Object.values(M).sort((T,S)=>T.index-S.index);for(let T=0;T<A.length;T++)A[T].index=T},duplicateVariable:(M,x)=>{const A=(0,n.cloneDeep)(M[x.payload.id]),T=`copy_of_${A.name}`,S=x.payload.data?.newId??T,U=(0,c.QT)(Object.values(M));M[S]={...(0,n.cloneDeep)(l.z.get(x.payload.type).initialState),...A,id:S,name:T,index:U}},changeVariableOrder:(M,x)=>{const{toIndex:A,fromIndex:T}=x.payload.data,S=Object.values(M);for(let U=0;U<S.length;U++){const R=S[U];R.index===T?R.index=A:R.index>T&&R.index<=A?R.index--:R.index<T&&R.index>=A&&R.index++}},changeVariableType:(M,x)=>{const{id:A}=x.payload,{label:T,name:S,index:U,description:R,rootStateKey:F}=M[A];M[A]={...(0,n.cloneDeep)(l.z.get(x.payload.data.newType).initialState),id:A,rootStateKey:F,label:T,name:S,index:U,description:R}},setCurrentVariableValue:(M,x)=>{if(!x.payload.data.option)return;const A=(0,c.ir)(M,x.payload.id);if(!(0,d.eL)(A))return;const{option:T}=x.payload.data,S={...T,text:(0,r.Hi)(T?.text),value:(0,r.Hi)(T?.value)};A.current=S,A.options=A.options.map(U=>{U.value=(0,r.Hi)(U.value),U.text=(0,r.Hi)(U.text);let R=!1;if(Array.isArray(S.value))for(let F=0;F<S.value.length;F++){const B=S.value[F];if(U.value===B){R=!0;break}}else U.value===S.value&&(R=!0);return U.selected=R,U})},changeVariableProp:(M,x)=>{const A=(0,c.ir)(M,x.payload.id);A[x.payload.data.propName]=x.payload.data.propValue}},extraReducers:M=>M.addCase(f.Yo,(x,A)=>{const T=(0,c.ir)(x,A.payload.id);T.name=A.payload.data.newName})}),i=u.reducer,{removeVariable:p,addVariable:g,changeVariableProp:y,changeVariableOrder:E,duplicateVariable:h,setCurrentVariableValue:v,changeVariableType:C,variableStateNotStarted:m,variableStateFetching:D,variableStateCompleted:P,variableStateFailed:b}=u.actions},30286:(Y,O,e)=>{"use strict";e.d(O,{Z9:()=>d,iv:()=>c,p3:()=>r,vw:()=>a,xO:()=>s});var t=e(62992),n=e(10672),o=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},l=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(u,i)=>{u.uid=i.payload.uid,u.status=n.LN.Fetching},variablesCompleteTransaction:(u,i)=>{u.uid===i.payload.uid&&(u.status=n.LN.Completed)},variablesClearTransaction:(u,i)=>{u.uid=null,u.status=n.LN.NotStarted,u.isDirty=!1}},extraReducers:u=>u.addMatcher(f,(i,p)=>{i.status===n.LN.Completed&&(i.isDirty=!0)})});function f(u){return o.mZ.match(u)||o.VN.match(u)||o.Pl.match(u)||o.gE.match(u)||o.Y9.match(u)||o.Be.match(u)}const{variablesInitTransaction:d,variablesClearTransaction:r,variablesCompleteTransaction:c}=l.actions,a=l.reducer},63510:(Y,O,e)=>{"use strict";e.d(O,{s:()=>t});const t={}},6942:(Y,O,e)=>{"use strict";e.d(O,{L:()=>f,S:()=>l});var t=e(62992),n=e(22323),o=e(92990),s=e(63510);const l=(0,t.PH)("templating/cleanVariables"),f=(d=s.s,r)=>{if(l.match(r)){const c=Object.values(d).filter(u=>u.global);return c?c.reduce((u,i)=>(u[i.id]=i,u),{}):s.s}return r?.payload?.type&&n.z.getIfExists(r?.payload?.type)?n.z.get(r.payload.type).reducer((0,o.b5)(d,r),r):d}},10672:(Y,O,e)=>{"use strict";e.d(O,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>f,LN:()=>l,Wy:()=>c,bU:()=>t.bU,eq:()=>r,x9:()=>d});var t=e(69273),n=e(52666),o=e(55391),s=e(82253),l=(a=>(a.NotStarted="Not started",a.Fetching="Fetching",a.Completed="Completed",a))(l||{});const f={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class d extends o.R{}d.type="variables-changed";class r extends o.R{}r.type="variables-time-range-process-done";class c extends o.R{}c.type="variables-changed-in-url"},92624:(Y,O,e)=>{"use strict";e.d(O,{A3:()=>T,AQ:()=>D,HY:()=>h,Hi:()=>A,J7:()=>u,N9:()=>C,QI:()=>E,Tt:()=>v,Y6:()=>R,_6:()=>y,a9:()=>i,bf:()=>g,bi:()=>b,gR:()=>m,iD:()=>P,mn:()=>S,xT:()=>x,yQ:()=>U});var t=e(82897),n=e.n(t),o=e(20308),s=e(55935),l=e(3153),f=e(19349),d=e(22323),r=e(82253),c=e(87095),a=e(10672);const u=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,i=F=>(u.lastIndex=0,u.exec(F)),p="__searchFilter",g=F=>F&&typeof F=="string"?F.indexOf(p)!==-1:!1,y=F=>{const{query:B,wildcardChar:K}=F;if(!g(B))return{};let{options:L}=F;return L=L||{searchFilter:""},{__searchFilter:{value:L.searchFilter?`${L.searchFilter}${K}`:`${K}`,text:""}}};function E(...F){const B=F[F.length-1];F[0]=typeof F[0]=="string"?F[0]:(0,s.Xh)(F[0]);const L=F.slice(0,-1).join(" ").match(u);return!!(L!==null?L.find(z=>{const G=i(z);return G!==null&&G.indexOf(B)>-1}):!1)}const h=F=>{if(!F||!F.current)return!1;if(F.current.value){const B=Array.isArray(F.current.value);if(B&&F.current.value.length&&F.current.value[0]===r.r2||!B&&F.current.value===r.r2)return!0}if(F.current.text){const B=Array.isArray(F.current.text);if(B&&F.current.text.length&&F.current.text[0]===r.xk||!B&&F.current.text===r.xk)return!0}return!1},v=F=>!F||!F.current||!F.current.text?"":Array.isArray(F.current.text)?F.current.text.toString():typeof F.current.text!="string"?"":F.current.text,C=F=>!F||!F.current||F.current.value===void 0||F.current.value===null?null:Array.isArray(F.current.value)?F.current.value.toString():typeof F.current.value!="string"?null:F.current.value;function m(F,B=(0,o.J)()){return!F||!F.regex?"":B.replace(F.regex,{},"regex")}function D(F,B,K=(0,f.$t)()){const L={range:void 0,variable:F,searchFilter:B};return(F.refresh===a.Bd.onTimeRangeChanged||F.refresh===a.Bd.onDashboardLoad)&&(L.range=K.timeRange()),L}function P(F){if(!F||!F.hasOwnProperty("refresh"))return a.Bd.never;const B=F;return B.refresh!==a.Bd.onTimeRangeChanged&&B.refresh!==a.Bd.onDashboardLoad&&B.refresh!==a.Bd.never?a.Bd.never:B.refresh}function b(){return d.z.list().filter(F=>F.id!=="system").map(({id:F,name:B,description:K})=>({label:B,value:F,description:K}))}function M(F){return(0,t.isArray)(F)&&(F.length===0?F=void 0:F.length===1&&(F=F[0])),F}function x(F,B){let K=0;const L={};for(const N in F){if(!N.startsWith(r.IG))continue;let z=M(B[N]),G=M(F[N]);(0,t.isEqual)(G,z)||(L[N]={value:F[N]},K++)}for(const N in B){if(!N.startsWith(r.IG))continue;const z=B[N];(0,t.isArray)(z)&&z.length===0||F.hasOwnProperty(N)||(L[N]={value:"",removed:!0},K++)}return K?L:void 0}function A(F){return Array.isArray(F)?F.map(String):F==null?"":typeof F=="number"?F.toString(10):typeof F=="string"?F:typeof F=="boolean"?F.toString():""}function T(F,B=(0,l.y0)()){return(0,c.AE)(F,B).transaction.status!==a.LN.NotStarted}function S(F){return String(F)}const U=F=>{if(!F.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${F.id}`);return{type:F.type,id:F.id,rootStateKey:F.rootStateKey}};function R(F,B){return{type:F.type,id:F.id,data:B}}},65039:(Y,O,e)=>{"use strict";var t=e(63418),n=e(35645);const o=n.v.bootData.settings.cspReportOnlyEnabled;n.v.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:(_,k,X)=>o?(console.error("[HTML not sanitized with Trusted Types]",_,k,X),_):_.replace(/<script/gi,"&lt;script"),createScript:_=>_,createScriptURL:(_,k,X)=>o?(console.error("[ScriptURL not sanitized with Trusted Types]",_,k,X),_):t.QX.sanitizeUrl(_)});var s=e(32478),l=e(88656),f=e(4547),d=e(44032),r=e(63073),c=e(3574),a=e(24259),u=e(91162),i=e(87449),p=e(9398),g=e(134),y=e(39514),E=e(99714),h=e(82557),v=e(82897),C=e.n(v),m=e(66111),D=e(91676),P=e(67483),b=e(10753),M=e(30779),x=e(2653),A=e(8488),T=e(72196),S=e(54899),U=e(47458),R=e(37932),F=e(82378),B=e(36535),K=e(19920),L=e(86647),N=e(54665),z=e(5494),G=e(87670),I=e(98825),V=e(87221),H=e(90771),Q=e(47694),oe=e(79378),se=e(9892),ie=e(99098),j=e(50035),de=e(90748),ce=e(30471),ee=e(13512),le=e(50928),q=e(91603),fe=e(2594),Z=e(31403),ne=e(7804),re=e(8581),ve=e(53908),me=e(46967);function Ie(_,k){switch(k.type){case ie.fS.boolean:return(0,v.isUndefined)(_)?!1:Ge(_);case ie.fS.number:return isNaN(_)?0:parseFloat(_);case ie.fS.string:return _?String(_):"";default:return _}}const Ge=_=>(0,v.isString)(_)?!(_[0]==="F"||_[0]==="f"||_[0]==="0"):!!_;function gt(_){return function({options:X,onChange:pe,field:Se}){const{validator:ze,converter:ke=Ie}=_,{value:yt}=X,[Vt,Zt]=(0,m.useState)(!ze(yt)),an=(0,m.useCallback)(wn=>{Zt(!ze(wn.currentTarget.value))},[Zt,ze]),En=(0,m.useCallback)(wn=>{if(Vt)return;const{value:Xn}=wn.currentTarget;pe({...X,value:ke(Xn,Se)})},[X,pe,Vt,Se,ke]);return m.createElement(me.I,{className:"flex-grow-1",invalid:Vt,defaultValue:String(X.value),placeholder:"Value",onChange:an,onBlur:En})}}const Te=()=>[{name:"Is greater",id:de.mE.greater,component:gt({validator:_=>!isNaN(_)})},{name:"Is greater or equal",id:de.mE.greaterOrEqual,component:gt({validator:_=>!isNaN(_)})},{name:"Is lower",id:de.mE.lower,component:gt({validator:_=>!isNaN(_)})},{name:"Is lower or equal",id:de.mE.lowerOrEqual,component:gt({validator:_=>!isNaN(_)})},{name:"Is equal",id:de.mE.equal,component:gt({validator:()=>!0})},{name:"Is not equal",id:de.mE.notEqual,component:gt({validator:()=>!0})},{name:"Regex",id:de.mE.regex,component:gt({validator:()=>!0,converter:_=>String(_)})}],Le=()=>null,Ye=()=>[{name:"Is null",id:de.mE.isNull,component:Le},{name:"Is not null",id:de.mE.isNotNull,component:Le}];function it(_){return function({options:X,onChange:pe,field:Se}){const{validator:ze}=_,[ke,yt]=(0,m.useState)({from:!ze(X.from),to:!ze(X.to)}),Vt=(0,m.useCallback)((an,En)=>{yt({...ke,[En]:!ze(an.currentTarget.value)})},[yt,ze,ke]),Zt=(0,m.useCallback)((an,En)=>{if(ke[En])return;const{value:wn}=an.currentTarget;pe({...X,[En]:Ie(wn,Se)})},[X,pe,ke,Se]);return m.createElement(m.Fragment,null,m.createElement(me.I,{className:"flex-grow-1 gf-form-spacing",invalid:ke.from,defaultValue:String(X.from),placeholder:"From",onChange:an=>Vt(an,"from"),onBlur:an=>Zt(an,"from")}),m.createElement("div",{className:"gf-form-label"},"and"),m.createElement(me.I,{className:"flex-grow-1",invalid:ke.to,defaultValue:String(X.to),placeholder:"To",onChange:an=>Vt(an,"to"),onBlur:an=>Zt(an,"to")}))}}const ht=()=>[{name:"Is between",id:de.mE.between,component:it({validator:_=>!isNaN(_)})}],Re=new ve.B(()=>[...Te(),...Ye(),...ht()]),ye=_=>{const{onDelete:k,onChange:X,filter:pe,fieldsInfo:Se}=_,{fieldsAsOptions:ze,fieldByDisplayName:ke}=Se,yt=We(pe,ze)??"",Vt=ke[yt],Zt=Vt?Ce(Vt):[],an=be(pe,Zt),En=Re.getIfExists(an),wn=(0,m.useCallback)(za=>{za?.value&&X({...pe,fieldName:za.value})},[X,pe]),Xn=(0,m.useCallback)(za=>{if(!za?.value)return;const gs=za.value,Br=j.U8.get(gs).getDefaultOptions(Vt);X({...pe,config:{id:gs,options:Br}})},[X,pe,Vt]),Ca=(0,m.useCallback)(za=>{X({...pe,config:{...pe.config,options:za}})},[X,pe]);return!Vt||!En||!En.component?null:m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form-spacing"},m.createElement("div",{className:"gf-form-label width-7"},"Field"),m.createElement(re.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:ze,value:pe.fieldName,onChange:wn})),m.createElement("div",{className:"gf-form gf-form-spacing"},m.createElement("div",{className:"gf-form-label"},"Match"),m.createElement(re.Ph,{className:"width-12",placeholder:"Select test",options:Zt,value:an,onChange:Xn})),m.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},m.createElement("div",{className:"gf-form-label"},"Value"),m.createElement(En.component,{field:Vt,options:pe.config.options??{},onChange:Ca})),m.createElement("div",{className:"gf-form"},m.createElement(Z.zx,{icon:"times",onClick:k,variant:"secondary"})))},Ce=_=>{const k=[];for(const X of j.U8.list())!X.isApplicable(_)||!Re.getIfExists(X.id)||k.push({value:X.id,label:X.name,description:X.description});return k},be=(_,k)=>{const X=k.find(pe=>pe.value===_.config.id);if(X&&X.value)return X.value;if(k[0]?.value)return k[0]?.value},We=(_,k)=>{const X=k.find(pe=>pe.value===_.fieldName);if(X&&X.value)return X.value;if(k[0]?.value)return k[0]?.value},Qe=[{label:"Include",value:q.PQ.include},{label:"Exclude",value:q.PQ.exclude}],mt=[{label:"Match all",value:q.ER.all},{label:"Match any",value:q.ER.any}],vt=_=>{const{input:k,options:X,onChange:pe}=_,Se=Ot(),ze=Et(k),ke=(0,m.useCallback)(()=>{const En=k[0],wn=En.fields.find(za=>za.type!==ie.fS.time);if(!wn)return;const Xn=(0,v.cloneDeep)(X.filters),Ca=j.U8.get(de.mE.greater);Xn.push({fieldName:(0,ce.CZ)(wn,En,k),config:{id:Ca.id,options:Ca.getDefaultOptions(wn)}}),pe({...X,filters:Xn})},[pe,X,k]),yt=(0,m.useCallback)(En=>{let wn=(0,v.cloneDeep)(X.filters);wn.splice(En,1),pe({...X,filters:wn})},[X,pe]),Vt=(0,m.useCallback)((En,wn)=>{let Xn=(0,v.cloneDeep)(X.filters);Xn[wn]=En,pe({...X,filters:Xn})},[X,pe]),Zt=(0,m.useCallback)(En=>{pe({...X,type:En??q.PQ.include})},[X,pe]),an=(0,m.useCallback)(En=>{pe({...X,match:En??q.ER.all})},[X,pe]);return m.createElement("div",null,m.createElement("div",{className:"gf-form gf-form-inline"},m.createElement("div",{className:"gf-form-label width-8"},"Filter type"),m.createElement("div",{className:"width-15"},m.createElement(fe.S,{options:Qe,value:X.type,onChange:Zt,fullWidth:!0}))),m.createElement("div",{className:"gf-form gf-form-inline"},m.createElement("div",{className:"gf-form-label width-8"},"Conditions"),m.createElement("div",{className:"width-15"},m.createElement(fe.S,{options:mt,value:X.match,onChange:an,fullWidth:!0}))),m.createElement("div",{className:Se.conditions},X.filters.map((En,wn)=>m.createElement(ye,{key:wn,filter:En,fieldsInfo:ze,onChange:Xn=>Vt(Xn,wn),onDelete:()=>yt(wn)})),m.createElement("div",{className:"gf-form"},m.createElement(Z.zx,{icon:"plus",size:"sm",onClick:ke,variant:"secondary"},"Add condition"))))},rt={id:ee.W.filterByValue,editor:vt,transformation:le.Y.filterByValueTransformer,name:le.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},Ot=(0,ne.B)(()=>({conditions:se.css`
    padding-left: 16px;
  `})),Et=_=>(0,m.useMemo)(()=>{const k={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(_)?_.reduce((X,pe)=>pe.fields.reduce((Se,ze)=>{const ke=(0,ce.CZ)(ze,pe,_);return Se.fieldByDisplayName[ke]||(Se.fieldsAsOptions.push({label:ke,value:ke,type:ze.type}),Se.fieldByDisplayName[ke]=ze),Se},X),k):k},[_]);var Mt=e(59250),ue=e(91353),De=e(91752),Ne=e(57054),tt=e(13505);function et(_,k){const X={data:_.input,options:_.options},pe=new De.j({id:"root",title:"root"}),Se=ke=>{if(ke?.length){const yt=ke[0];let Vt=pe.categories.find(Zt=>Zt.props.id===yt);return Vt||(Vt=new De.j({id:yt,title:yt}),pe.categories.push(Vt)),Vt}return pe},ze={getValue:ke=>(0,v.get)(_.options,ke),onChange:(ke,yt)=>{_.onChange((0,tt.hs)(_.options,ke,yt))}};return(0,Ne.HZ)(k,ze,Se,X),pe}function Ue(_){const k={data:[],options:{}},X={},pe=new ue.rt;_(pe,k);for(const Se of pe.getItems())Se.defaultValue!=null&&(0,v.set)(X,Se.path,Se.defaultValue);return X}var Fe=e(90024),Ee=e(77564);const Me=(_,k)=>{const X=k.options??{};(0,Fe.J)("",_,X)},He=_=>{(0,m.useEffect)(()=>{if(!_.options.xBuckets?.mode){const X=Ue(Me);_.onChange({...X,..._.options}),console.log("geometry useEffect",X)}});const k=et(_,Me);return m.createElement("div",null,m.createElement("div",null,k.items.map(X=>X.render())))},Ze={id:Ee.Oy.id,editor:He,transformation:Ee.Oy,name:Ee.Oy.name,description:Ee.Oy.description,state:Mt.BV.alpha};var lt=e(72648),bt=e(6058),Pt=e(11543),Je=e(81764),Dt=e(33750),Ve=e(71294),Xe=e(53768),st=e(31290),ut=e(69098),xt=e(32195);function Kt(_,k,X){const pe={},Se={};for(const ze of _.fields){const ke=(0,ce.CZ)(ze,_),Vt=X.index[ke].handler;if(!Vt)continue;const Zt=ze.values[k];if(Zt==null)continue;const an=Vt.processor(Zt,pe,Se);an!=null&&(pe[Vt.targetProperty??Vt.key]=an)}return Se.mappingValues&&(pe.mappings=Nn(Se)),pe}var Jt=(_=>(_.Name="field.name",_.Value="field.value",_.Label="field.label",_.Ignore="__ignore",_))(Jt||{});const On=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Lt},{key:"min",processor:Lt},{key:"unit",processor:_=>_.toString()},{key:"decimals",processor:Lt},{key:"displayName",name:"Display name",processor:_=>_.toString()},{key:"color",processor:_=>({fixedColor:_,mode:Xe.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(_,k)=>{const X=(0,st.I)(_);if(!isNaN(X))return k.thresholds||(k.thresholds={mode:ut.H.Absolute,steps:[{value:-1/0,color:"green"}]}),k.thresholds.steps.push({value:X,color:"red"}),k.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Dt.gz.allValues,processor:(_,k,X)=>{if((0,v.isArray)(_))return X.mappingValues=_,k.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Dt.gz.allValues,processor:(_,k,X)=>{if((0,v.isArray)(_))return X.mappingColors=_,k.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Dt.gz.allValues,processor:(_,k,X)=>{if((0,v.isArray)(_))return X.mappingTexts=_,k.mappings}}];function Nn(_){const k={type:xt.H.ValueToText,options:{}};if(!_.mappingValues)return[];for(let X=0;X<_.mappingValues.length;X++){const pe=_.mappingValues[X];pe!=null&&(k.options[pe.toString()]={color:_.mappingColors&&_.mappingColors[X],text:_.mappingTexts&&_.mappingTexts[X],index:X})}return[k]}let jn=null;function ya(){if(jn===null){jn={};for(const _ of On)jn[_.key]=_}return jn}function Lt(_){const k=(0,st.I)(_);if(!isNaN(k))return k}function ft(_,k){for(const X of k)if(_===X.fieldName)return X.handlerKey;return _.toLowerCase()}function Ht(_){return _?ya()[_]:null}function $t(_,k,X){const pe={index:{}};let Se=k.find(ke=>ke.handlerKey==="field.name"),ze=k.find(ke=>ke.handlerKey==="field.value");for(const ke of _.fields){const yt=(0,ce.CZ)(ke,_),Vt=k.find(En=>En.fieldName===yt),Zt=Vt?Vt.handlerKey:yt.toLowerCase();let an=Ht(Zt);X&&(an?(an.key==="field.name"&&(pe.nameField=ke),an.key==="field.value"&&(pe.valueField=ke)):Vt||(!pe.nameField&&!Se&&ke.type===ie.fS.string&&(pe.nameField=ke,an=Ht("field.name")),!pe.valueField&&!ze&&ke.type===ie.fS.number&&(pe.valueField=ke,an=Ht("field.value")))),!an&&X&&(an=Ht("field.label")),pe.index[yt]={automatic:!Vt,handler:an,reducerId:Vt?.reducerId??an?.defaultReducer??Dt.gz.lastNotNull}}return pe}function zt({frame:_,mappings:k,onChange:X,withReducers:pe,withNameAndValue:Se}){const ze=(0,lt.wW)(sn),ke=Wt(_,k,Se),yt=On.map(an=>jt(an,!1)),Vt=(an,En)=>{const wn=k.findIndex(Xn=>Xn.fieldName===an.fieldName);if(En)if(wn!==-1){const Xn=[...k];Xn.splice(wn,1,{...k[wn],handlerKey:En.value}),X(Xn)}else X([...k,{fieldName:an.fieldName,handlerKey:En.value}]);else X(wn!==-1?k.filter((Xn,Ca)=>Ca!==wn):[...k,{fieldName:an.fieldName,handlerKey:"__ignore"}])},Zt=(an,En)=>{const wn=k.findIndex(Xn=>Xn.fieldName===an.fieldName);if(wn!==-1){const Xn=[...k];Xn.splice(wn,1,{...k[wn],reducerId:En}),X(Xn)}else X([...k,{fieldName:an.fieldName,handlerKey:an.handlerKey,reducerId:En}])};return m.createElement("table",{className:ze.table},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,"Field"),m.createElement("th",null,"Use as"),pe&&m.createElement("th",null,"Select"))),m.createElement("tbody",null,ke.map(an=>m.createElement("tr",{key:an.fieldName},m.createElement("td",{className:ze.labelCell},an.fieldName),m.createElement("td",{className:ze.selectCell,"data-testid":`${an.fieldName}-config-key`},m.createElement(re.Ph,{options:yt,value:an.configOption,placeholder:an.placeholder,isClearable:!0,onChange:En=>Vt(an,En)})),pe&&m.createElement("td",{"data-testid":`${an.fieldName}-reducer`,className:ze.selectCell},m.createElement(Ve.m,{stats:[an.reducerId],defaultStat:an.reducerId,onChange:En=>Zt(an,En[0])}))))))}function Wt(_,k,X){const pe=[],Se=$t(_,k??[],X);for(const ze of _.fields){const ke=(0,ce.CZ)(ze,_),yt=Se.index[ke],Vt=jt(yt.handler,yt.automatic);pe.push({fieldName:ke,configOption:yt.automatic?null:Vt,placeholder:yt.automatic?Vt?.label:"Choose",handlerKey:yt.handler?.key??null,reducerId:yt.reducerId})}for(const ze of k)if(!pe.find(ke=>ke.fieldName===ze.fieldName)){const ke=Ht(ze.handlerKey);pe.push({fieldName:ze.fieldName,handlerKey:ze.handlerKey,configOption:jt(ke,!1),missingInFrame:!0,reducerId:ze.reducerId??Dt.gz.lastNotNull})}return Object.values(pe)}function jt(_,k){if(!_)return null;let X=_.name??(0,v.capitalize)(_.key);return k&&(X=`${X} (auto)`),{label:X,value:_.key}}const sn=_=>({table:se.css`
    margin-top: ${_.spacing(1)};

    td,
    th {
      border-right: 4px solid ${_.colors.background.primary};
      border-bottom: 4px solid ${_.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${_.typography.bodySmall.fontSize};
      line-height: ${_.spacing(4)};
      padding: ${_.spacing(0,1)};
    }
  `,labelCell:se.css`
    font-size: ${_.typography.bodySmall.fontSize};
    background: ${_.colors.background.secondary};
    padding: ${_.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:se.css`
    padding: 0;
    min-width: 161px;
  `});var pn=e(9471);function Pn(_,k){let X=null;for(const yt of k)if(yt.refId===_.configRefId){X=yt;break}if(!X)return k;const pe={fields:[],length:1},Se=$t(X,_.mappings??[],!1);for(const yt of X.fields){const Vt={...yt},Zt=(0,ce.CZ)(yt,X),an=Se.index[Zt],En=(0,Dt.Kx)({field:yt,reducers:[an.reducerId]});Vt.values=[En[an.reducerId]],pe.fields.push(Vt)}const ze=[],ke=(0,j.sq)(_.applyTo||{id:de.mi.numeric});for(const yt of k){if(yt===X&&k.length>1)continue;const Vt={fields:[],length:yt.length};for(const Zt of yt.fields)if(ke(Zt,yt,k)){const an=Kt(pe,0,Se);Vt.fields.push({...Zt,config:{...Zt.config,...an}})}else Vt.fields.push(Zt);ze.push(Vt)}return ze}const Mn={id:ee.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:_=>k=>k.pipe((0,pn.U)(X=>Pn(_,X)))};function Cn({input:_,onChange:k,options:X}){const pe=(0,lt.wW)(_n),Se=_.map(Xn=>Xn.refId).filter(Xn=>Xn!=null).map(Xn=>({label:Xn,value:Xn})),ze=X.configRefId||"config",ke=X.applyTo??{id:de.mi.byType,options:"number"},yt=bt.i.get(ke.id),Vt=_.find(Xn=>Xn.refId===ze),Zt=Xn=>{k({...X,configRefId:Xn.value||"config"})},an=Xn=>{k({...X,applyTo:{id:Xn.value}})},En=Xn=>{k({...X,applyTo:{id:ke.id,options:Xn}})},wn=bt.i.list().filter(Xn=>!Xn.excludeFromPicker).map(Xn=>({label:Xn.name,value:Xn.id,description:Xn.description}));return m.createElement(m.Fragment,null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Config query",labelWidth:20},m.createElement(re.Ph,{onChange:Zt,options:Se,value:ze,width:30}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Apply to",labelWidth:20},m.createElement(re.Ph,{onChange:an,options:wn,value:ke.id,width:30}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Apply to options",labelWidth:20,className:pe.matcherOptions},m.createElement(yt.component,{matcher:yt.matcher,data:_,options:ke.options,onChange:En}))),m.createElement(Pt.Z,null,Vt&&m.createElement(zt,{frame:Vt,mappings:X.mappings,onChange:Xn=>k({...X,mappings:Xn}),withReducers:!0})))}const Hn={id:Mn.id,editor:Cn,transformation:Mn,name:Mn.name,description:Mn.description,state:Mt.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},_n=_=>({matcherOptions:se.css`
    min-width: 404px;
  `});var oa=e(59980),Gt=e(66392),Bt=e(62294),on=e(52081),rn=e(41165),In=e(14835);const Ln=[{value:Bt.ie.BinaryOperation,label:"Binary operation"},{value:Bt.ie.ReduceRow,label:"Reduce row"},{value:Bt.ie.Index,label:"Row index"}],Un=new Set([ie.fS.time,ie.fS.number,ie.fS.string]);class qn extends m.PureComponent{constructor(k){super(k),this.onToggleReplaceFields=()=>{const{options:X}=this.props;this.props.onChange({...X,replaceFields:!X.replaceFields})},this.onModeChanged=X=>{const{options:pe,onChange:Se}=this.props,ze=X.value??Bt.ie.BinaryOperation;Se({...pe,mode:ze})},this.onAliasChanged=X=>{const{options:pe}=this.props;this.props.onChange({...pe,alias:X.target.value})},this.updateReduceOptions=X=>{const{options:pe,onChange:Se}=this.props;Se({...pe,mode:Bt.ie.ReduceRow,reduce:X})},this.onFieldToggle=X=>{const{selected:pe}=this.state;pe.indexOf(X)>-1?this.onChange(pe.filter(Se=>Se!==X)):this.onChange([...pe,X])},this.onChange=X=>{this.setState({selected:X});const{reduce:pe}=this.props.options;this.updateReduceOptions({...pe,include:X})},this.onStatsChange=X=>{const pe=X.length?X[0]:Dt.gz.sum,{reduce:Se}=this.props.options;this.updateReduceOptions({...Se,reducer:pe})},this.updateBinaryOptions=X=>{const{options:pe,onChange:Se}=this.props;Se({...pe,mode:Bt.ie.BinaryOperation,binary:X})},this.onBinaryLeftChanged=X=>{const{binary:pe}=this.props.options;this.updateBinaryOptions({...pe,left:X.value})},this.onBinaryRightChanged=X=>{const{binary:pe}=this.props.options;this.updateBinaryOptions({...pe,right:X.value})},this.onBinaryOperationChanged=X=>{const{binary:pe}=this.props.options;this.updateBinaryOptions({...pe,operator:X.value})},this.state={include:k.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{options:k}=this.props,X=k?.reduce?.include||[],pe={interpolate:ze=>ze},Se=(0,oa.of)(this.props.input).pipe(le.Y.ensureColumnsTransformer.operator(null,pe),this.extractAllNames(),this.extractNamesAndSelected(X)).subscribe(({selected:ze,names:ke})=>{this.setState({names:ke,selected:ze},()=>Se.unsubscribe())})}extractAllNames(){return k=>k.pipe((0,pn.U)(X=>{const pe=[],Se={};for(const ze of X)for(const ke of ze.fields){if(!Un.has(ke.type))continue;const yt=(0,ce.CZ)(ke,ze,X);Se[yt]||(Se[yt]=!0,pe.push(yt))}return pe}))}extractNamesAndSelected(k){return X=>X.pipe((0,pn.U)(pe=>{if(!k.length)return{names:pe,selected:[]};const Se=[],ze=[];for(const ke of pe)k.includes(ke)&&ze.push(ke),Se.push(ke);return{names:Se,selected:ze}}))}renderReduceRow(k){const{names:X,selected:pe}=this.state;return k=(0,v.defaults)(k,{reducer:Dt.gz.sum}),m.createElement(m.Fragment,null,m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8"},"Field name"),m.createElement(on.Lh,{spacing:"xs",align:"flex-start",wrap:!0},X.map((Se,ze)=>m.createElement(rn.B,{key:`${Se}/${ze}`,onClick:()=>{this.onFieldToggle(Se)},label:Se,selected:pe.indexOf(Se)>-1}))))),m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement("div",{className:"gf-form-label width-8"},"Calculation"),m.createElement(Ve.m,{allowMultiple:!1,className:"width-18",stats:[k.reducer],onChange:this.onStatsChange,defaultStat:Dt.gz.sum}))))}renderBinaryOperation(k){k=(0,v.defaults)(k,{reducer:Dt.gz.sum});let X=!k?.left,pe=!k?.right;const Se=this.state.names.map(Vt=>(Vt===k?.left&&(X=!0),Vt===k?.right&&(pe=!0),{label:Vt,value:Vt})),ze=X?Se:[...Se,{label:k?.left,value:k?.left}],ke=pe?Se:[...Se,{label:k?.right,value:k?.right}],yt=Gt.n.list().map(Vt=>({label:Vt.id,value:Vt.id}));return m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement("div",{className:"gf-form-label width-8"},"Operation")),m.createElement("div",{className:"gf-form"},m.createElement(re.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:ze,className:"min-width-18 gf-form-spacing",value:k?.left,onChange:this.onBinaryLeftChanged}),m.createElement(re.Ph,{className:"width-8 gf-form-spacing",options:yt,value:k.operator??yt[0].value,onChange:this.onBinaryOperationChanged}),m.createElement(re.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:ke,value:k?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:k}=this.props,X=k.mode??Bt.ie.BinaryOperation;return m.createElement("div",null,m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement("div",{className:"gf-form-label width-8"},"Mode"),m.createElement(re.Ph,{className:"width-18",options:Ln,value:Ln.find(pe=>pe.value===X),onChange:this.onModeChanged}))),X===Bt.ie.BinaryOperation&&this.renderBinaryOperation(k.binary),X===Bt.ie.ReduceRow&&this.renderReduceRow(k.reduce),m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement("div",{className:"gf-form-label width-8"},"Alias"),m.createElement(me.I,{className:"width-18",value:k.alias??"",placeholder:(0,Bt.h)(k),onChange:this.onAliasChanged}))),m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement(In.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!k.replaceFields,onChange:this.onToggleReplaceFields}))))}}const da={id:ee.W.calculateField,editor:qn,transformation:le.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ha=e(32302);const Ta=[{value:ha.HO.FieldName,label:"Copy frame name to field name"},{value:ha.HO.Label,label:"Add a label with the frame name"},{value:ha.HO.Drop,label:"Ignore the frame name"}];class Wa extends m.PureComponent{constructor(k){super(k),this.onModeChanged=X=>{const{options:pe,onChange:Se}=this.props,ze=X.value??ha.HO.FieldName;Se({...pe,frameNameMode:ze})},this.onLabelChanged=X=>{const{options:pe}=this.props;this.props.onChange({...pe,frameNameLabel:X.target.value})}}render(){const{options:k}=this.props,X=k.frameNameMode??ha.HO.FieldName;return m.createElement("div",null,m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement("div",{className:"gf-form-label width-8"},"Name"),m.createElement(re.Ph,{className:"width-18",options:Ta,value:Ta.find(pe=>pe.value===X),onChange:this.onModeChanged}))),X===ha.HO.Label&&m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement("div",{className:"gf-form-label width-8"},"Label"),m.createElement(me.I,{className:"width-18",value:k.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const cs={id:ee.W.concatenate,editor:Wa,transformation:le.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var is=e(15448),Ha=e(16453),$a=e(25532);const ss={settings:{width:24,isClearable:!1}},Oa=({input:_,options:k,onChange:X})=>{const pe=Ha.OL.filter(Zt=>Zt.value!==ie.fS.trace),Se=(0,m.useCallback)(Zt=>an=>{const En=k.conversions;En[Zt]={...En[Zt],targetField:an??"",dateFormat:void 0},X({...k,conversions:En})},[X,k]),ze=(0,m.useCallback)(Zt=>an=>{const En=k.conversions;En[Zt]={...En[Zt],destinationType:an.value},X({...k,conversions:En})},[X,k]),ke=(0,m.useCallback)(Zt=>an=>{const En=k.conversions;En[Zt]={...En[Zt],dateFormat:an.currentTarget.value},X({...k,conversions:En})},[X,k]),yt=(0,m.useCallback)(()=>{X({...k,conversions:[...k.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[X,k]),Vt=(0,m.useCallback)(Zt=>{const an=k.conversions;an.splice(Zt,1),X({...k,conversions:an})},[X,k]);return m.createElement(m.Fragment,null,k.conversions.map((Zt,an)=>m.createElement("div",{key:`${Zt.targetField}-${an}`},m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Field"},m.createElement(is.b,{context:{data:_},value:Zt.targetField??"",onChange:Se(an),item:ss})),m.createElement(Je._,{label:"as"},m.createElement(re.Ph,{options:pe,value:Zt.destinationType,placeholder:"Type",onChange:ze(an),width:18})),Zt.destinationType===ie.fS.time&&m.createElement(Je._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},m.createElement(me.I,{value:Zt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:ke(an),width:24})),Zt.destinationType===ie.fS.string&&(Zt.dateFormat||(0,$a.findField)(_?.[0],Zt.targetField)?.type===ie.fS.time)&&m.createElement(Je._,{label:"Date format",tooltip:"Specify the output format."},m.createElement(me.I,{value:Zt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:ke(an),width:24})),m.createElement(Z.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Vt(an),"aria-label":"Remove convert field type transformer"})),Zt.destinationType===ie.fS.enum&&Q.Oh&&m.createElement(Pt.Z,null,m.createElement(Je._,{label:"",labelWidth:6},m.createElement("div",null,"TODO... show options here (alpha panels enabled)"))))),m.createElement(Z.zx,{size:"sm",icon:"plus",onClick:yt,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Ia={id:ee.W.convertFieldType,editor:Oa,transformation:le.Y.convertFieldTypeTransformer,name:le.Y.convertFieldTypeTransformer.name,description:le.Y.convertFieldTypeTransformer.description};var ys=e(79086),la=e(24799);class Ts extends m.PureComponent{constructor(k){super(k),this.onFieldToggle=X=>{const{selected:pe}=this.state;pe.indexOf(X)>-1?this.onChange(pe.filter(Se=>Se!==X)):this.onChange([...pe,X])},this.onChange=X=>{const{regex:pe,isRegexValid:Se}=this.state,ze={...this.props.options,include:{names:X}};pe&&Se&&(ze.include=ze.include??{},ze.include.pattern=pe),this.setState({selected:X},()=>{this.props.onChange(ze)})},this.onInputBlur=X=>{const{selected:pe,regex:Se}=this.state;let ze=!0;try{Se&&(0,ys.jO)(Se)}catch{ze=!1}ze?this.props.onChange({...this.props.options,include:{pattern:Se}}):this.props.onChange({...this.props.options,include:{names:pe}}),this.setState({isRegexValid:ze})},this.state={include:k.options.include?.names||[],regex:k.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{input:k,options:X}=this.props,pe=Array.from(X.include?.names??[]),Se=[],ze={};for(const ke of k)for(const yt of ke.fields){const Vt=(0,ce.CZ)(yt,ke,k);let Zt=ze[Vt];Zt||(Zt=ze[Vt]={name:Vt,count:0},Se.push(Zt)),Zt.count++}if(X.include?.pattern)try{const ke=(0,ys.jO)(X.include.pattern);for(const yt of Se)ke.test(yt.name)&&pe.push(yt.name)}catch(ke){console.error(ke)}if(pe.length){const ke=Se.filter(yt=>pe.includes(yt.name));this.setState({options:Se,selected:ke.map(yt=>yt.name),regex:X.include?.pattern})}else this.setState({options:Se,selected:Se.map(ke=>ke.name),regex:X.include?.pattern})}render(){const{options:k,selected:X,isRegexValid:pe}=this.state;return m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8"},"Identifier"),m.createElement(on.Lh,{spacing:"xs",align:"flex-start",wrap:!0},m.createElement(la.g,{invalid:!pe,error:pe?void 0:"Invalid pattern",className:se.css`
                margin-bottom: 0;
              `},m.createElement(me.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:Se=>this.setState({regex:Se.currentTarget.value}),onBlur:this.onInputBlur,width:25})),k.map((Se,ze)=>{const ke=`${Se.name}${Se.count>1?" ("+Se.count+")":""}`,yt=X.indexOf(Se.name)>-1;return m.createElement(rn.B,{key:`${Se.name}/${ze}`,onClick:()=>{this.onFieldToggle(Se.name)},label:ke,selected:yt})}))))}}const bs={id:ee.W.filterFieldsByName,editor:Ts,transformation:le.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var ds=e(57227);class Us extends m.PureComponent{constructor(k){super(k),this.onFieldToggle=X=>{const{selected:pe}=this.state;pe.indexOf(X)>-1?this.onChange(pe.filter(Se=>Se!==X)):this.onChange([...pe,X])},this.onChange=X=>{this.setState({selected:X}),this.props.onChange({...this.props.options,include:X.join("|")})},this.state={include:k.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{input:k,options:X}=this.props,pe=X.include?X.include.split("|"):[],Se=[],ze={};for(const ke of k)if(ke.refId){let yt=ze[ke.refId];yt||(yt=ze[ke.refId]={refId:ke.refId,count:0},Se.push(yt)),yt.count++}if(pe.length){const ke=[],yt=[];for(const Vt of Se)pe.includes(Vt.refId)&&yt.push(Vt),ke.push(Vt);this.setState({options:ke,selected:yt.map(Vt=>Vt.refId)})}else this.setState({options:Se,selected:[]})}render(){const{options:k,selected:X}=this.state,{input:pe}=this.props;return m.createElement(m.Fragment,null,pe.length<=1&&m.createElement("div",null,m.createElement(ds.S,null,"Filter data by query expects multiple queries in the input.")),m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8"},"Series refId"),m.createElement(on.Lh,{spacing:"xs",align:"flex-start",wrap:!0},k.map((Se,ze)=>{const ke=`${Se.refId}${Se.count>1?" ("+Se.count+")":""}`,yt=X.indexOf(Se.refId)>-1;return m.createElement(rn.B,{key:`${Se.refId}/${ze}`,onClick:()=>{this.onFieldToggle(Se.refId)},label:ke,selected:yt})})))))}}const Za={id:ee.W.filterByRefId,editor:Us,transformation:le.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var Ks=e(61171);function dn(_){return(0,m.useMemo)(()=>Array.isArray(_)?Object.keys(_.reduce((k,X)=>!X||!Array.isArray(X.fields)?k:X.fields.reduce((pe,Se)=>{const ze=(0,ce.CZ)(Se,X,_);return pe[ze]=!0,pe},k),{})):[],[_])}function ln(_){const k=new Set;for(const X of _)for(const pe of X.fields)if(pe.labels)for(const Se of Object.keys(pe.labels))k.add(Se);return k}const Tn=({input:_,options:k,onChange:X})=>{const pe=dn(_),Se=(0,m.useCallback)(ze=>ke=>{X({...k,fields:{...k.fields,[ze]:ke}})},[X]);return m.createElement("div",null,pe.map(ze=>m.createElement(ga,{onConfigChange:Se(ze),fieldName:ze,config:k.fields[ze],key:ze})))},zn=[{label:"Group by",value:Ks.x.groupBy},{label:"Calculate",value:Ks.x.aggregate}],ga=({fieldName:_,config:k,onConfigChange:X})=>{const pe=va(),Se=(0,m.useCallback)(ze=>{X({aggregations:k?.aggregations??[],operation:ze?.value??null})},[k,X]);return m.createElement("div",{className:(0,se.cx)("gf-form-inline",pe.row)},m.createElement("div",{className:(0,se.cx)("gf-form",pe.fieldName)},m.createElement("div",{className:(0,se.cx)("gf-form-label",pe.rowSpacing)},_)),m.createElement("div",{className:(0,se.cx)("gf-form",pe.cell)},m.createElement("div",{className:(0,se.cx)("gf-form-spacing",pe.rowSpacing)},m.createElement(re.Ph,{className:"width-12",options:zn,value:k?.operation,placeholder:"Ignored",onChange:Se,isClearable:!0}))),k?.operation===Ks.x.aggregate&&m.createElement("div",{className:(0,se.cx)("gf-form","gf-form--grow",pe.calculations)},m.createElement(Ve.m,{className:(0,se.cx)("flex-grow-1",pe.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:k.aggregations,onChange:ze=>{X({...k,aggregations:ze})}})))},va=(0,ne.B)(()=>{const _=se.css`
    display: table-cell;
  `;return{row:se.css`
      display: table-row;
    `,cell:_,rowSpacing:se.css`
      margin-bottom: 4px;
    `,fieldName:se.css`
      ${_}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:se.css`
      ${_}
      width: 99%;
    `}}),Ga={id:ee.W.groupBy,editor:Tn,transformation:le.Y.groupByTransformer,name:le.Y.groupByTransformer.name,description:le.Y.groupByTransformer.description};var qa=e(90834);const es=({input:_,options:k,onChange:X})=>{const pe=dn(_).map(Zt=>({label:Zt,value:Zt})),Se=(0,m.useCallback)(Zt=>{X({...k,columnField:Zt?.value})},[X,k]),ze=(0,m.useCallback)(Zt=>{X({...k,rowField:Zt?.value})},[X,k]),ke=(0,m.useCallback)(Zt=>{X({...k,valueField:Zt?.value})},[X,k]),yt=[{label:"Null",value:qa.U.Null,description:"Null value"},{label:"True",value:qa.U.True,description:"Boolean true value"},{label:"False",value:qa.U.False,description:"Boolean false value"},{label:"Empty",value:qa.U.Empty,description:"Empty string"}],Vt=(0,m.useCallback)(Zt=>{X({...k,emptyValue:Zt?.value})},[X,k]);return m.createElement(m.Fragment,null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Column",labelWidth:8},m.createElement(re.Ph,{options:pe,value:k.columnField,onChange:Se,isClearable:!0})),m.createElement(Je._,{label:"Row",labelWidth:8},m.createElement(re.Ph,{options:pe,value:k.rowField,onChange:ze,isClearable:!0})),m.createElement(Je._,{label:"Cell Value",labelWidth:10},m.createElement(re.Ph,{options:pe,value:k.valueField,onChange:ke,isClearable:!0})),m.createElement(Je._,{label:"Empty Value"},m.createElement(re.Ph,{options:yt,value:k.emptyValue,onChange:Vt,isClearable:!0}))))},us={id:ee.W.groupingToMatrix,editor:es,transformation:le.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var hs=e(75133),$s=e(8944),tr=e(45458);const mr=({input:_,options:k,onChange:X})=>{const Se=(0,m.useCallback)(yt=>{X({...k,bucketSize:yt})},[X,k]),ze=(0,m.useCallback)(yt=>{X({...k,bucketOffset:yt})},[X,k]),ke=(0,m.useCallback)(()=>{X({...k,combine:!k.combine})},[X,k]);return m.createElement("div",null,m.createElement(Pt.Z,null,m.createElement(Je._,{labelWidth:18,label:hs.py.bucketSize.name,tooltip:hs.py.bucketSize.description},m.createElement(tr.Y,{value:k.bucketSize,placeholder:"auto",onChange:Se,min:0}))),m.createElement(Pt.Z,null,m.createElement(Je._,{labelWidth:18,label:hs.py.bucketOffset.name,tooltip:hs.py.bucketOffset.description},m.createElement(tr.Y,{value:k.bucketOffset,placeholder:"none",onChange:ze,min:0}))),m.createElement(Pt.Z,null,m.createElement(Je._,{labelWidth:18,label:hs.py.combine.name,tooltip:hs.py.combine.description},m.createElement($s.x,{value:k.combine??!1,onChange:ke}))))},ur={id:ee.W.histogram,editor:mr,transformation:le.Y.histogramTransformer,name:le.Y.histogramTransformer.name,description:le.Y.histogramTransformer.description};var sr=e(13221);const er=[{value:sr.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:sr.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function ks({input:_,options:k,onChange:X}){const pe=dn(_).map(ke=>({label:ke,value:ke})),Se=(0,m.useCallback)(ke=>{X({...k,byField:ke?.value})},[X,k]),ze=(0,m.useCallback)(ke=>{X({...k,mode:ke?.value})},[X,k]);return m.createElement(m.Fragment,null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Mode",labelWidth:8,grow:!0},m.createElement(re.Ph,{options:er,value:k.mode??sr.c.outer,onChange:ze}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Field",labelWidth:8,grow:!0},m.createElement(re.Ph,{options:pe,value:k.byField,onChange:Se,placeholder:"time",isClearable:!0}))))}const Er={id:ee.W.joinByField,aliasIds:[ee.W.seriesToColumns],editor:ks,transformation:le.Y.joinByFieldTransformer,name:le.Y.joinByFieldTransformer.name,description:le.Y.joinByFieldTransformer.description};var Vs=e(31568),Tr=e(26418);const pr=[{value:Vs.k.Columns,label:"Columns"},{value:Vs.k.Rows,label:"Rows"}],yr=({input:_,options:k,onChange:X})=>{const{labelNames:Se,selected:ze}=(0,m.useMemo)(()=>{let Vt=[],Zt={};for(const En of _)for(const wn of En.fields)if(wn.labels)for(const Xn of Object.keys(wn.labels))Zt[Xn]||(Vt.push({value:Xn,label:Xn}),Zt[Xn]=!0);const an=new Set(k.keepLabels?.length?k.keepLabels:Object.keys(Zt));return{labelNames:Vt,selected:an}},[k.keepLabels,_]),ke=Vt=>{X({...k,valueLabel:Vt?.value})},yt=Vt=>{if(ze.has(Vt)?ze.delete(Vt):ze.add(Vt),ze.size===Se.length||!ze.size){const{keepLabels:Zt,...an}=k;X(an)}else X({...k,keepLabels:[...ze]})};return m.createElement("div",null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Mode",labelWidth:20},m.createElement(fe.S,{options:pr,value:k.mode??Vs.k.Columns,onChange:Vt=>X({...k,mode:Vt})}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Labels",labelWidth:20},m.createElement(Tr.Stack,{gap:1,wrap:!0},Se.map((Vt,Zt)=>{const an=Vt.label;return m.createElement(rn.B,{key:`${an}/${Zt}`,onClick:()=>yt(an),label:an,selected:ze.has(an)})})))),k.mode!==Vs.k.Rows&&m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},m.createElement(re.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:Se,value:k?.valueLabel,onChange:ke,className:"min-width-16"}))))},Cr={id:ee.W.labelsToFields,editor:yr,transformation:le.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},Or=({options:_,onChange:k})=>{const X=(0,m.useCallback)(pe=>{k({..._,limitField:Number(pe.currentTarget.value)})},[k,_]);return m.createElement(m.Fragment,null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Limit",labelWidth:8},m.createElement(me.I,{placeholder:"Limit count",pattern:"[0-9]*",value:_.limitField,onChange:X,width:25}))))},fr={id:ee.W.limit,editor:Or,transformation:le.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},Js=({input:_,options:k,onChange:X})=>_.length<=1?m.createElement(ds.S,null,"Merge has no effect when applied on a single frame."):null,Os={id:ee.W.merge,editor:Js,transformation:le.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var lr=e(36826),fn=e(74700),qe=e(39904),Ct=e(8180);const At=({options:_,input:k,onChange:X})=>{const{indexByName:pe,excludeByName:Se,renameByName:ze}=_,ke=dn(k),yt=(0,m.useMemo)(()=>kn(ke,pe),[ke,pe]),Vt=(0,m.useCallback)((En,wn)=>{X({..._,excludeByName:{...Se,[En]:wn}})},[X,_,Se]),Zt=(0,m.useCallback)(En=>{if(!En||!En.destination)return;const wn=En.source.index,Xn=En.destination.index;wn!==Xn&&X({..._,indexByName:Dn(ke,wn,Xn)})},[X,_,ke]),an=(0,m.useCallback)((En,wn)=>{X({..._,renameByName:{..._.renameByName,[En]:wn}})},[X,_]);return k.length>1?m.createElement(ds.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):m.createElement(lr.Z5,{onDragEnd:Zt},m.createElement(lr.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},En=>m.createElement("div",{ref:En.innerRef,...En.droppableProps},yt.map((wn,Xn)=>m.createElement(tn,{fieldName:wn,renamedFieldName:ze[wn],index:Xn,onToggleVisibility:Vt,onRenameField:an,visible:!Se[wn],key:wn})),En.placeholder)))};At.displayName="OrganizeFieldsTransformerEditor";const tn=({fieldName:_,renamedFieldName:k,index:X,visible:pe,onToggleVisibility:Se,onRenameField:ze})=>{const ke=(0,lt.wW)(Rn);return m.createElement(lr._l,{draggableId:_,index:X},yt=>m.createElement("div",{className:"gf-form-inline",ref:yt.innerRef,...yt.draggableProps},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},m.createElement(qe.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:ke.draggable,...yt.dragHandleProps}),m.createElement(Ct.h,{className:ke.toggle,size:"md",name:pe?"eye":"eye-slash",onClick:()=>Se(_,pe)}),m.createElement("span",{className:ke.name,title:_},_)),m.createElement(me.I,{className:"flex-grow-1",defaultValue:k||"",placeholder:`Rename ${_}`,onBlur:Vt=>ze(_,Vt.currentTarget.value)}))))};tn.displayName="DraggableFieldName";const Rn=_=>({toggle:se.css`
    margin: 0 8px;
    color: ${_.colors.text.secondary};
  `,draggable:se.css`
    opacity: 0.4;
    &:hover {
      color: ${_.colors.text.maxContrast};
    }
  `,name:se.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${_.typography.bodySmall.fontSize};
    font-weight: ${_.typography.fontWeightMedium};
  `}),Dn=(_,k,X)=>{const pe=Array.from(_),[Se]=pe.splice(k,1);return pe.splice(X,0,Se),pe.reduce((ze,ke,yt)=>(ze[ke]=yt,ze),{})},kn=(_,k={})=>{if(!k||Object.keys(k).length===0)return _;const X=(0,fn.$)(k);return _.sort(X)},aa={id:ee.W.organize,editor:At,transformation:le.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var Qn=e(27742),ia=e(68183);const ja=({options:_,onChange:k})=>{const X=[{label:"Series to rows",value:Qn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:Qn.AL.ReduceFields,description:"Collapse each field into a single value"}],pe=(0,m.useCallback)(ke=>{const yt=ke.value;k({..._,mode:yt,includeTimeField:yt===Qn.AL.ReduceFields?!!_.includeTimeField:!1})},[k,_]),Se=(0,m.useCallback)(()=>{k({..._,includeTimeField:!_.includeTimeField})},[k,_]),ze=(0,m.useCallback)(()=>{k({..._,labelsToFields:!_.labelsToFields})},[k,_]);return m.createElement(m.Fragment,null,m.createElement("div",null,m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8","aria-label":ia.wl.components.Transforms.Reduce.modeLabel},"Mode"),m.createElement(re.Ph,{options:X,value:X.find(ke=>ke.value===_.mode)||X[0],onChange:pe,className:"flex-grow-1"}))),m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8","aria-label":ia.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),m.createElement(Ve.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:_.reducers||[],onChange:ke=>{k({..._,reducers:ke})}}))),_.mode===Qn.AL.ReduceFields&&m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement(In.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!_.includeTimeField,onChange:Se}))),_.mode!==Qn.AL.ReduceFields&&m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form"},m.createElement(In.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!_.labelsToFields,onChange:ze}))))},Tt={id:ee.W.reduce,editor:ja,transformation:le.Y.reduceTransformer,name:le.Y.reduceTransformer.name,description:le.Y.reduceTransformer.description};class Be extends m.PureComponent{constructor(k){super(k),this.handleRegexChange=X=>{const pe=X.currentTarget.value;let Se=!0;if(pe)try{pe&&(0,ys.jO)(pe)}catch{Se=!1}this.setState(ze=>({...ze,regex:pe,isRegexValid:Se}))},this.handleRenameChange=X=>{const pe=X.currentTarget.value;this.setState(Se=>({...Se,renamePattern:pe}))},this.handleRegexBlur=X=>{const pe=X.currentTarget.value;let Se=!0;try{pe&&(0,ys.jO)(pe)}catch{Se=!1}this.setState({isRegexValid:Se},()=>{Se&&this.props.onChange({...this.props.options,regex:pe})})},this.handleRenameBlur=X=>{const pe=X.currentTarget.value;this.setState({renamePattern:pe},()=>this.props.onChange({...this.props.options,renamePattern:pe}))},this.state={regex:k.options.regex,renamePattern:k.options.renamePattern,isRegexValid:!0}}render(){const{regex:k,renamePattern:X,isRegexValid:pe}=this.state;return m.createElement(m.Fragment,null,m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8"},"Match"),m.createElement(la.g,{invalid:!pe,error:pe?void 0:"Invalid pattern",className:se.css`
                margin-bottom: 0;
              `},m.createElement(me.I,{placeholder:"Regular expression pattern",value:k||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),m.createElement("div",{className:"gf-form-inline"},m.createElement("div",{className:"gf-form gf-form--grow"},m.createElement("div",{className:"gf-form-label width-8"},"Replace"),m.createElement(la.g,{className:se.css`
                margin-bottom: 0;
              `},m.createElement(me.I,{placeholder:"Replacement pattern",value:X||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const Ae={id:ee.W.renameByRegex,editor:Be,transformation:le.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},nt=({input:_,options:k,onChange:X})=>null,ct={id:ee.W.seriesToRows,editor:nt,transformation:le.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},wt=({input:_,options:k,onChange:X})=>{const pe=dn(_).map(ke=>({label:ke,value:ke})),Se=(0,m.useCallback)((ke,yt)=>{X({...k,sort:[yt]})},[X,k]),ze=k.sort?.length?k.sort:[{}];return m.createElement("div",null,ze.map((ke,yt)=>m.createElement(Pt.Z,{key:`${ke.field}/${yt}`},m.createElement(Je._,{label:"Field",labelWidth:10,grow:!0},m.createElement(re.Ph,{options:pe,value:ke.field,placeholder:"Select field",onChange:Vt=>{Se(yt,{...ke,field:Vt.value})}})),m.createElement(Je._,{label:"Reverse"},m.createElement($s.x,{value:!!ke.desc,onChange:()=>{Se(yt,{...ke,desc:!ke.desc})}})))))},_t={id:ee.W.sortBy,editor:wt,transformation:le.Y.sortByTransformer,name:le.Y.sortByTransformer.name,description:le.Y.sortByTransformer.description};function Nt({options:_,onChange:k}){const[X,pe]=(0,m.useState)(_),Se=at(),ze=An(),ke=()=>{X.push({path:""}),pe([...X]),Zt()},yt=an=>{X&&(X.splice(an,1),pe([...X]),Zt())},Vt=(an,En,wn)=>{X&&(wn==="alias"?X[En].alias=an.currentTarget.value??"":X[En].path=an.currentTarget.value??"",pe([...X]))},Zt=()=>{k(X)};return m.createElement("ol",{className:(0,se.cx)(ze.list)},X&&X.map((an,En)=>m.createElement("li",{key:En},m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Field",tooltip:Se.field,grow:!0},m.createElement(me.I,{onBlur:Zt,onChange:wn=>Vt(wn,En,"path"),value:an.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),m.createElement(Je._,{label:"Alias",tooltip:Se.alias},m.createElement(me.I,{width:12,value:an.alias,onBlur:Zt,onChange:wn=>Vt(wn,En,"alias")})),m.createElement(Je._,{className:(0,se.cx)(ze.removeIcon)},m.createElement(Ct.h,{onClick:()=>yt(En),name:"trash-alt"}))))),m.createElement(Je._,null,m.createElement(Z.zx,{icon:"plus",onClick:()=>ke(),variant:"secondary"},"Add path")))}const at=()=>{const _=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:m.createElement("div",null,"A valid path of an json object.",m.createElement("div",null,m.createElement("strong",null,"JSON Value:")),m.createElement("pre",null,m.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),m.createElement("strong",null,"Valid Paths:"),_.map((k,X)=>m.createElement("p",{key:X},m.createElement("code",null,k.path),m.createElement("i",null,k.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function An(){return{list:se.css`
      margin-left: 20px;
    `,removeIcon:se.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Fn=e(83881),Gn=(_=>(_.JSON="json",_.KeyValues="kvp",_.Auto="auto",_))(Gn||{});const $n={id:Gn.JSON,name:"JSON",description:"Parse JSON string",parse:_=>JSON.parse(_)};function Ra(_){const k=[];let X="",pe="";const Se={};for(let ze=0;ze<_.length;ze++){let ke=_[ze];ke===X&&(X="",ke=_[++ze]);const yt=ke==="\\";if(yt&&(ke=_[++ze]),yt||X.length){k.push(ke);continue}switch((ke==='"'||ke==="'")&&(X=ke),ke){case":":case"=":k.length&&(pe&&(Se[pe]=""),pe=k.join(""),k.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:k.length&&pe===""&&(Se[k.join("")]="",k.length=0);case",":case";":case"&":case"{":case"}":if(k.length){const Vt=k.join("");pe.length?(Se[pe]=Vt,pe=""):pe=Vt,k.length=0}break;default:k.push(ke),ze===_.length-1&&pe===""&&k.length&&(Se[k.join("")]="",k.length=0)}}return pe.length&&(Se[pe]=k.join("")),Se}const ts={id:Gn.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Ra},Ps=[$n,ts],vs={id:Gn.Auto,name:"Auto",description:"parse new fields automatically",parse:_=>{for(const k of Ps)try{const X=k.parse(_);if(X!=null)return X}catch{}}},Es=new ve.B(()=>[...Ps,vs]),ma={id:ee.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(_,k)=>X=>X.pipe((0,pn.U)(pe=>ma.transformer(_,k)(pe))),transformer:_=>k=>k.map(X=>ba(X,_))};function ba(_,k){if(!k.source)return _;const X=(0,$a.findField)(_,k.source);if(!X)return _;const pe=Es.getIfExists(k.format??Gn.Auto);if(!pe)throw new Error("unkonwn extractor");const Se=_.length,ze=[],ke=new Map;for(let Vt=0;Vt<Se;Vt++){let Zt=X.values[Vt];if((0,v.isString)(Zt))try{Zt=pe.parse(Zt)}catch{Zt={}}if(k.format===Gn.JSON&&k.jsonPaths&&k.jsonPaths?.length>0){const an={},En=k.jsonPaths.filter(wn=>wn.path);En.length>0&&(En.forEach(wn=>{const Xn=wn.alias&&wn.alias.length>0?wn.alias:wn.path;an[Xn]=(0,v.get)(Zt,wn.path)??"Not Found"}),Zt=an)}for(const[an,En]of Object.entries(Zt)){let wn=ke.get(an);wn==null&&(wn=new Array(Se),ke.set(an,wn),ze.push(an)),wn[Vt]=En}}const yt=ze.map(Vt=>{const Zt=ke.get(Vt);return{name:Vt,values:Zt,type:Zt?(0,Fn.DP)(Zt.find(an=>an!=null)):ie.fS.other,config:{}}});if(k.keepTime){const Vt=(0,$a.findField)(_,"Time")||(0,$a.findField)(_,"time");Vt&&yt.unshift(Vt)}return k.replace||yt.unshift(..._.fields),{..._,fields:yt}}const as={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},ms=({input:_,options:k,onChange:X})=>{const pe=Zt=>{X({...k,source:Zt})},Se=Zt=>{X({...k,format:Zt?.value})},ze=Zt=>{X({...k,jsonPaths:Zt})},ke=()=>{k.replace&&(k.keepTime=!1),X({...k,replace:!k.replace})},yt=()=>{X({...k,keepTime:!k.keepTime})},Vt=Es.selectOptions(k.format?[k.format]:void 0);return m.createElement("div",null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Source",labelWidth:16},m.createElement(is.b,{context:{data:_},value:k.source??"",onChange:pe,item:as}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Format",labelWidth:16},m.createElement(re.Ph,{value:Vt.current[0],options:Vt.options,onChange:Se,width:24,placeholder:"Auto"}))),k.format==="json"&&m.createElement(Nt,{options:k.jsonPaths??[],onChange:ze}),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Replace all fields",labelWidth:16},m.createElement($s.x,{value:k.replace??!1,onChange:ke}))),k.replace&&m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Keep time",labelWidth:16},m.createElement($s.x,{value:k.keepTime??!1,onChange:yt}))))},Ya={id:ee.W.extractFields,editor:ms,transformation:ma,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var Is=e(45253),ws=e(15670);const Gs={id:ee.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(_,k)=>X=>X.pipe((0,pn.U)(pe=>Gs.transformer(_,k)(pe))),transformer:_=>k=>!k||!k.length?k:[Ir(_,k)]};function Ir(_,k){if(!_.value?.length)return Dr("No value labele configured");const X=ln(k);if(X.size<1)return Dr("No labels in result");if(!X.has(_.value))return Dr("Value label not found");let pe=_.join?.length?_.join:Array.from(X);pe=pe.filter(En=>En!==_.value);const Se=new Set,ze=new Map,ke={};for(const En of k)for(const wn of En.fields)if(wn.labels&&wn.type!==ie.fS.time){const Xn=pe.map(ar=>wn.labels[ar]),Ca=Xn.join(",");let za=ze.get(Ca);za||(za={keys:Xn,values:{}},ze.set(Ca,za));const gs=wn.labels[_.value],Br=wn.values,nr=za.values[gs];nr?za.values[gs]=nr.concat(Br):za.values[gs]=Br,ke[gs]||(ke[gs]=wn),Se.add(gs)}const yt=Array.from(Se),Vt=pe.map(()=>[]),Zt=yt.map(()=>[]);for(const En of ze.values()){let wn=-1,Xn=!1;for(;!Xn;){wn++,Xn=!0;for(let Ca=0;Ca<pe.length;Ca++)Vt[Ca].push(En.keys[Ca]);for(let Ca=0;Ca<yt.length;Ca++){const za=yt[Ca],gs=En.values[za]??[];Zt[Ca].push(gs[wn]),gs.length>wn+1&&(Xn=!1)}}}const an={fields:[],length:Zt[0].length};for(let En=0;En<pe.length;En++)an.fields.push({name:pe[En],config:{},type:ie.fS.string,values:Vt[En]});for(let En=0;En<yt.length;En++){const wn=ke[yt[En]];an.fields.push({name:yt[En],config:{},type:wn.type??ie.fS.number,values:Zt[En]})}return an}function Dr(_){return{meta:{notices:[{severity:"error",text:_}]},fields:[{name:"Error",type:ie.fS.string,config:{},values:[_]}],length:0}}function $e({input:_,options:k,onChange:X}){const pe=(0,m.useMemo)(()=>{let Vt;const Zt=ln(_),an=Array.from(Zt).map(gs=>({label:gs,value:gs}));let En=an.find(gs=>gs.value===k.value);!En&&k.value&&(En={label:`${k.value} (not found)`,value:k.value},an.push(En)),_.length?Zt.size===0&&(Vt=m.createElement(Is.b,{title:"No labels found"},"The input does not contain any labels")):Vt=m.createElement(Is.b,{title:"No input found"},"No input (or labels) found"),Zt.delete(k.value);const wn=Array.from(Zt).map(gs=>({label:gs,value:gs}));let Xn=wn;const Ca=Boolean(k.join?.length);let za="Join";return Ca?Xn=wn.filter(gs=>!k.join.includes(gs.value)):za=wn.map(gs=>gs.value).join(", "),{warn:Vt,valueOptions:an,valueOption:En,joinOptions:wn,addOptions:Xn,addText:za,hasJoin:Ca,key:Date.now()}},[k,_]),Se=(Vt,Zt)=>{if(!k.join)return;const an=k.join.slice();if(Zt)an[Vt]=Zt;else if(an.splice(Vt,1),!an.length){X({...k,join:void 0});return}const En=new Set(an);k.value&&En.delete(k.value),X({...k,join:Array.from(En)})},ze=Vt=>{const Zt=Vt?.value;if(!Zt)return;const an=k.join?k.join.slice():[];an.push(Zt),X({...k,join:an})},ke=10,yt="No labels found";return m.createElement("div",null,pe.warn,m.createElement(Pt.Z,null,m.createElement(Je._,{error:"required",invalid:!Boolean(k.value?.length),label:"Value",labelWidth:ke,tooltip:"Select the label indicating the values name"},m.createElement(re.Ph,{options:pe.valueOptions,value:pe.valueOption,onChange:Vt=>X({...k,value:Vt.value}),noOptionsMessage:yt}))),pe.hasJoin?k.join.map((Vt,Zt)=>m.createElement(Pt.Z,{key:Vt+Zt},m.createElement(Je._,{label:"Join",labelWidth:ke,error:"Unable to join by the value label",invalid:Vt===k.value},m.createElement(on.Lh,null,m.createElement(re.Ph,{options:pe.joinOptions,value:pe.joinOptions.find(an=>an.value===Vt),isClearable:!0,onChange:an=>Se(Zt,an?.value),noOptionsMessage:yt}),Boolean(pe.addOptions.length&&Zt===k.join.length-1)&&m.createElement(ws.b,{icon:"plus",label:"",options:pe.addOptions,onChange:ze,variant:"secondary"}))))):m.createElement(m.Fragment,null,Boolean(pe.addOptions.length)&&m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Join",labelWidth:ke},m.createElement(re.Ph,{options:pe.addOptions,placeholder:pe.addText,onChange:ze,noOptionsMessage:yt})))))}const kt={id:Gs.id,editor:$e,transformation:Gs,name:Gs.name,description:Gs.description,state:Mt.BV.beta};var Yt=e(74311),un=e(39859),yn=e(49372),hn=e(73063);const Wn={id:ee.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:_=>k=>k.pipe((0,un.z)(X=>(0,yn.D)(fa(X,_))))};async function fa(_,k){const X=j.Ls.get(de.mi.byName).get(k?.lookupField),pe=await(0,hn.so)(k?.gazetteer??hn.LI);return pe.frame?sa(_,pe,X):Promise.reject("missing frame in gazetteer")}function sa(_,k,X){const pe=k.frame()?.fields;return pe?_.map(Se=>{const ze=Se.length,ke=[];for(const yt of Se.fields)if(ke.push(yt),X(yt,Se,_)){const Vt=yt.values,Zt=[];for(const an of pe){const En=new Array(ze);Zt.push(En),ke.push({...an,values:En})}for(let an=0;an<Zt.length;an++){const En=k.find(Vt[an]);if(En?.index!=null)for(let wn=0;wn<pe.length;wn++)Zt[wn][an]=pe[wn].values[En.index]}}return{...Se,fields:ke}}):_}const ra={settings:{width:30,filter:_=>_.type===ie.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Aa={settings:{}},zs=({input:_,options:k,onChange:X})=>{const pe=(0,m.useCallback)(ze=>{X({...k,lookupField:ze})},[X,k]),Se=(0,m.useCallback)(ze=>{X({...k,gazetteer:ze})},[X,k]);return m.createElement("div",null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Field",labelWidth:12},m.createElement(is.b,{context:{data:_},value:k?.lookupField??"",onChange:pe,item:ra}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Lookup",labelWidth:12},m.createElement(Yt.Q,{value:k?.gazetteer??"",context:{data:_},item:Aa,onChange:Se}))))},Rs={id:ee.W.fieldLookup,editor:zs,transformation:Wn,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:Mt.BV.alpha};var Va=e(80760),La=e(98294),rs=e(43137);const fs=(_,k,X=[])=>(k===0?X.push(_):_.forEach(pe=>{fs(pe,k-1,X)}),X);function Ur(_){const k=_[0].length,X=_.length,pe=new Map;for(let Se=0;Se<k;Se++){let ze=pe;for(let ke=0;ke<X;ke++){let yt=_[ke][Se],Vt=ze.get(yt);Vt==null&&(Vt=ke===X-1?[]:new Map,ze.set(yt,Vt)),ze=Vt}ze.push(Se)}return fs(pe,X)}const wr={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function Bi(_,k,X){return k.map((pe,Se)=>_.withNames?`${pe}${_.separator1}${X[Se]}`:X[Se]).join(_.separator2)}function Fo(_,k){const X={};return _.forEach((pe,Se)=>{X[pe]=String(k[Se])}),X}const Po={id:ee.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(_,k)=>X=>X.pipe((0,pn.U)(pe=>Po.transformer(_,k)(pe))),transformer:(_,k)=>{const X=(0,La.f)({names:_.fields});if(!X)return rs.d.transformer({},k);const pe=(0,j.sq)(X);return Se=>Se.length?rc(Se[0],pe,_):Se}};function rc(_,k,X){const pe=_.fields.filter(yt=>k(yt,_,[_])),Se=pe.map(yt=>yt.values),ze=pe.map(yt=>yt.name),ke={...wr,...X?.naming};return Ur(Se).map(yt=>{let Vt=_.name,Zt={};if(ke.asLabels)Zt=Fo(ze,pe.map((En,wn)=>Se[wn][yt[0]]));else{let En=Bi(ke,ze,pe.map((wn,Xn)=>Se[Xn][yt[0]]));ke?.append&&_.name&&(En=`${_.name} ${En}`),Vt=En}let an=_.fields;if(!X?.keepFields){const En=new Set(ze);an=_.fields.filter(wn=>!En.has(wn.name))}return{name:Vt,meta:_.meta,length:yt.length,fields:an.map(En=>{const wn=En.values,Xn=Array(yt.length);for(let Ca=0;Ca<yt.length;Ca++)Xn[Ca]=wn[yt[Ca]];return{name:En.name,type:En.type,config:En.config,labels:{...En.labels,...Zt},values:Xn}})}})}function Zd({input:_,options:k,onChange:X}){const pe=(0,Va.IX)(_),Se=(0,Va.nw)(pe),ze=(0,m.useMemo)(()=>{const Zt=new Set(k.fields);return Zt.size<1?Se:Se.filter(an=>!Zt.has(an.value))},[Se,k]),ke=(0,m.useCallback)(Zt=>{if(!Zt.value)return;const an=new Set(k.fields);an.add(Zt.value),X({...k,fields:[...an]})},[X,k]),yt=(0,m.useCallback)(Zt=>{if(!Zt)return;const an=new Set(k.fields);an.delete(Zt),X({...k,fields:[...an]})},[X,k]);if(_.length>1)return m.createElement(ds.S,null,"Partition by values only works with a single frame.");const Vt=[...new Set(k.fields)];return m.createElement("div",null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Field",labelWidth:10,grow:!0},m.createElement(on.Lh,null,Vt.map(Zt=>m.createElement(Z.zx,{key:Zt,icon:"times",variant:"secondary",size:"md",onClick:()=>yt(Zt)},Zt)),ze.length&&m.createElement(ws.b,{variant:"secondary",size:"md",options:ze,onChange:ke,label:"Select field",icon:"plus"})))))}const Jd={id:ee.W.partitionByValues,editor:Zd,transformation:Po,name:Po.name,description:Po.description,state:Mt.BV.alpha};var $o=e(39393),fl=e(53678),oc=e(17587),Ko=(_=>(_.TimeSeriesWide="wide",_.TimeSeriesLong="long",_.TimeSeriesMulti="multi",_.TimeSeriesMany="many",_))(Ko||{});function li(_){if(!Array.isArray(_)||_.length===0)return _;const k=[];for(const X of Qr(_)){const pe=X.fields[0];if(!pe||pe.type!==ie.fS.time)continue;const Se=[],ze=[];for(const ke of X.fields)switch(ke.type){case ie.fS.number:case ie.fS.boolean:Se.push(ke);break;case ie.fS.string:ze.push(ke);break}for(const ke of Se)if(ze.length){const yt=new Map;for(let Vt=0;Vt<X.length;Vt++){const Zt=pe.values[Vt],an=ke.values[Vt];if(an===void 0||Zt==null)continue;const En=ze.map(Xn=>Xn.values[Vt]).join("/");let wn=yt.get(En);if(!wn){wn={key:En,time:[],value:[],labels:{}};for(const Xn of ze)wn.labels[Xn.name]=Xn.values[Vt];yt.set(En,wn)}wn.time.push(Zt),wn.value.push(an)}for(const Vt of yt.values())k.push({name:X.name,refId:X.refId,meta:{...X.meta,type:$o.P.TimeSeriesMulti},fields:[{...pe,values:Vt.time},{...ke,values:Vt.value,labels:Vt.labels}],length:Vt.time.length})}else k.push({name:X.name,refId:X.refId,meta:{...X.meta,type:$o.P.TimeSeriesMulti},fields:[pe,ke],length:X.length})}return k}function Qr(_){if(!Array.isArray(_)||_.length===0)return _;const k=[];for(const X of _){let pe;const Se=[],ze={},ke={},yt={},Vt={};for(let Ca=0;Ca<X.fields.length;Ca++){const za=X.fields[Ca];switch(za.type){case ie.fS.string:case ie.fS.boolean:za.name in Vt||(Vt[za.name]=Ca,ke[za.name]=!0);break;case ie.fS.time:if(!pe){pe=za;break}default:if(za.name in ze){const nr=ze[za.name];if(za.type!==nr)continue}else ze[za.name]=za.type,Se.push(za.name);const gs=JSON.stringify(za.labels),Br=yt[gs];if(Br!==void 0?Br.push(Ca):yt[gs]=[Ca],za.labels!=null)for(const nr in za.labels)ke[nr]=!0}}if(!pe)continue;const Zt=[],an=[],En=[],wn=[];for(let Ca=0;Ca<X.length;Ca++)Zt.push({time:pe.values[Ca],wideRowIndex:Ca});for(const Ca in yt)an.push(Ca);for(const Ca in ke)En.push(Ca);for(const Ca in Vt)wn.push(Ca);Zt.sort((Ca,za)=>Ca.time-za.time),an.sort(),En.sort(),Se.sort();const Xn=new fl.v({...X,meta:{...X.meta,type:$o.P.TimeSeriesLong},fields:[{name:pe.name,type:pe.type}]});for(const Ca of Se)Xn.addField({name:Ca,type:ze[Ca]});for(const Ca of En)Xn.addField({name:Ca,type:ie.fS.string});for(const Ca of Zt){const{time:za,wideRowIndex:gs}=Ca;for(const Br of an){const nr={};for(const Yr of wn)nr[Yr]=X.fields[Vt[Yr]].values[gs];let ar=0;for(const Yr of yt[Br]){const wo=X.fields[Yr];if(ar++===0&&wo.labels!=null)for(const Gd in wo.labels)nr[Gd]=wo.labels[Gd];nr[wo.name]=wo.values[gs]}nr[pe.name]=za,Xn.add(nr)}}k.push(Xn)}return k}function ic(_){return rc(_,X=>X.type===ie.fS.string).map(X=>(X.meta||(X.meta={}),X.meta.type=$o.P.TimeSeriesMulti,X))}const ci={id:ee.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(_,k)=>X=>X.pipe((0,pn.U)(pe=>ci.transformer(_,k)(pe))),transformer:_=>{const k=_?.format??"wide";if(k==="many"||k==="multi")return li;if(k==="long")return Qr;const X=j.Ls.get(de.mi.firstTimeField).get({});return pe=>{if(!pe.length)return[];const Se=[];for(const ke of pe)ke.meta?.type===$o.P.TimeSeriesLong?ic(ke).forEach(yt=>Se.push(yt)):Se.push(ke);const ze=(0,oc._9)({frames:Se,joinBy:X,keepOriginIndices:!0});return ze?(ze.meta||(ze.meta={}),ze.meta.type=$o.P.TimeSeriesWide,[ze]):[]}}},Nm={label:"Wide time series",value:Ko.TimeSeriesWide,description:"Creates a single frame joined by time",info:m.createElement("ul",null,m.createElement("li",null,"Single frame"),m.createElement("li",null,"1st field is shared time field"),m.createElement("li",null,"Time in ascending order"),m.createElement("li",null,"Multiple value fields of any type"))},Ni={label:"Multi-frame time series",value:Ko.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:m.createElement("ul",null,m.createElement("li",null,"Multiple frames"),m.createElement("li",null,"Each frame has two fields: time, value"),m.createElement("li",null,"Time in ascending order"),m.createElement("li",null,"String values are represented as labels"),m.createElement("li",null,"All values are numeric"))},Co={label:"Long time series",value:Ko.TimeSeriesLong,description:"Convert each frame to long format",info:m.createElement("ul",null,m.createElement("li",null,"Single frame"),m.createElement("li",null,"1st field is time field"),m.createElement("li",null,"Time in ascending order, but may have duplictes"),m.createElement("li",null,"String values are represented as separate fields rather than as labels"),m.createElement("li",null,"Multiple value fields may exist"))},Vo=[Nm,Ni,Co];function lc(_){const{options:k,onChange:X}=_,pe=(0,lt.wW)(zo),Se=(0,m.useCallback)(ze=>{X({...k,format:ze.value})},[X,k]);return m.createElement(m.Fragment,null,m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Format",labelWidth:12},m.createElement(re.Ph,{width:35,options:Vo,value:Vo.find(ze=>ze.value===Ko.TimeSeriesMulti&&k.format===Ko.TimeSeriesMany?!0:ze.value===k.format)||Vo[0],onChange:Se,className:"flex-grow-1"}))),m.createElement(Pt.Z,null,m.createElement(Je._,{label:"Info",labelWidth:12},m.createElement("div",{className:pe.info},(Vo.find(ze=>ze.value===k.format)||Vo[0]).info))))}const zo=_=>({info:se.css`
    margin-left: 20px;
  `}),_a={id:ci.id,editor:lc,transformation:ci,name:ci.name,description:ci.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},eo={id:ee.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:_=>k=>k.pipe((0,pn.U)(X=>X.map(pe=>rr(_,pe))))};function rr(_,k){const X=$t(k,_.mappings??[],!0),{nameField:pe,valueField:Se}=X;if(!pe||!Se)return k;const ze=[];for(let ke=0;ke<pe.values.length;ke++){const yt=pe.values[ke],Vt=Se.values[ke],Zt=Kt(k,ke,X),an=lo(k,ke,X),En={name:`${yt}`,type:Se.type,values:[Vt],config:Zt,labels:an};ze.push(En)}return{fields:ze,length:1}}function lo(_,k,X){const pe={...X.nameField.labels};for(let Se=0;Se<_.fields.length;Se++){const ze=_.fields[Se],ke=(0,ce.CZ)(ze,_),yt=X.index[ke];if(yt.handler&&yt.handler.key!==Jt.Label)continue;const Vt=ze.values[k];Vt!=null&&(pe[ke]=Vt)}return pe}function Xd({input:_,options:k,onChange:X}){return _.length===0?null:m.createElement("div",null,m.createElement(zt,{frame:_[0],mappings:k.mappings??[],onChange:pe=>X({...k,mappings:pe}),withNameAndValue:!0}))}const Ui={id:eo.id,editor:Xd,transformation:eo,name:eo.name,description:eo.description,state:Mt.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var gl=e(40538),xs=e(71575),Pr=e(96366),cc=e(50466),Ho=e(43524),pl=e(14573);const ko={id:ee.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:_=>k=>k.pipe((0,un.z)(X=>(0,yn.D)(qd(X,_))))};function hl(_){return _.action===Pr.JJ.Modify&&_.modify?.op===Pr.ac.LineBuilder}async function qd(_,k){const X=await(0,Ho.cJ)(k.source);if(hl(k)){const pe=await(0,Ho.cJ)(k.modify?.target);return _.map(Se=>{const ze=(0,Ho.g6)(Se,X),ke=(0,Ho.g6)(Se,pe);if(ze.field&&ke.field){const yt=[...Se.fields],Vt=(0,cc.Fh)(ze.field,ke.field),Zt=yt[0];return Zt.type===ie.fS.geo&&Zt!==ze.field&&Zt!==ke.field?yt[0]=(0,cc.EK)(Zt,Vt):yt.unshift(Vt),{...Se,fields:yt}}return Se})}return _.map(pe=>{let Se=(0,Ho.g6)(pe,X);if(Se.field){if(k.action===Pr.JJ.Modify){switch(k.modify?.op){case Pr.ac.AsLine:let ke=Se.field.name;return(!ke||ke==="Point")&&(ke="Line"),{...pe,length:1,fields:[{...Se.field,name:ke,type:ie.fS.geo,values:[(0,pl.Lp)(Se.field)]}]}}return pe}const ze=Se.derived?[Se.field,...pe.fields]:pe.fields.slice(0);if(k.action===Pr.JJ.Calculate&&(ze.push((0,pl.N7)(Se.field,k.calculate??{})),Se.derived=!0),Se.derived)return{...pe,fields:ze}}return pe})}const eu=(_,k)=>{const X=k.options??{};_.addSelect({path:"action",name:"Action",description:"",defaultValue:Pr.JJ.Prepare,settings:{options:[{value:Pr.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:Pr.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:Pr.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),X.action===Pr.JJ.Calculate?_.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:Pr.Ii.Heading,settings:{options:[{value:Pr.Ii.Heading,label:"Heading"},{value:Pr.Ii.Area,label:"Area"},{value:Pr.Ii.Distance,label:"Distance"}]}}):X.action===Pr.JJ.Modify&&_.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:Pr.ac.AsLine,settings:{options:[{value:Pr.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:Pr.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),hl(X)?(_.addNestedOptions({category:["Source"],path:"source",build:(pe,Se)=>{const ze=X.source??{};ze.mode||(ze.mode=gl.q1.Auto),(0,xs.C)("Point","",pe,ze)}}),_.addNestedOptions({category:["Target"],path:"modify",build:(pe,Se)=>{const ze=X.modify?.target??{};ze.mode||(ze.mode=gl.q1.Auto),(0,xs.C)("Point","target.",pe,ze)}})):(0,xs.C)("Location","source.",_,X.source)},Go=_=>{(0,m.useEffect)(()=>{if(!_.options.source?.mode){const pe=Ue(eu);_.onChange({...pe,..._.options}),console.log("geometry useEffect",pe)}},[]);const k=dc((0,lt.l4)()),X=et(_,eu);return m.createElement("div",null,m.createElement("div",null,X.items.map(pe=>pe.render())),m.createElement("div",null,X.categories.map(pe=>m.createElement("div",{key:pe.props.id,className:k.wrap},m.createElement("h5",null,pe.props.title),m.createElement("div",{className:k.item},pe.items.map(Se=>Se.render()))))))},dc=_=>({wrap:se.css`
      margin-bottom: 20px;
    `,item:se.css`
      border-left: 4px solid ${_.colors.border.strong};
      padding-left: 10px;
    `}),Do={id:ee.W.spatial,editor:Go,transformation:ko,name:ko.name,description:ko.description,state:Mt.BV.alpha};var to=e(19447);const jo={id:ee.W.timeSeriesTable,name:"Time series to table transform",description:"Time series to table rows",defaultOptions:{},operator:_=>k=>k.pipe((0,pn.U)(X=>di(_,X)))};function di(_,k){const X=wi(k),pe={},Se=[];for(const ze of k){if(!(0,to.pP)(ze)){Se.push(ze);continue}const ke=ze.refId??"",yt=X[ke]??{};let Vt=pe[ke];if(!Vt){Vt={name:"Trend"+(ke&&Object.keys(X).length>1?` #${ke}`:""),type:ie.fS.frame,config:{},values:[]},pe[ke]=Vt;const an=new fl.v;for(const En of Object.values(yt))an.addField(En);an.addField(Vt),an.refId=ke,Se.push(an)}const Zt=ze.fields[1].labels;for(const an of Object.keys(yt)){const En=Zt?.[an]??null;yt[an].values.push(En)}Vt.values.push(ze)}return Se}function wi(_){const k={};for(const X of _){if(!(0,to.pP)(X))continue;const pe=X.refId??"";k[pe]||(k[pe]={});for(const Se of X.fields)if(Se.labels)for(const ze of Object.keys(Se.labels))k[pe][ze]||(k[pe][ze]={name:ze,type:ie.fS.string,config:{},values:[]})}return k}function ui({input:_,options:k,onChange:X}){return _.length===0?null:m.createElement("div",null)}const tu={id:jo.id,editor:ui,transformation:jo,name:jo.name,description:jo.description,state:Mt.BV.beta,help:""},Wi=()=>[Tt,bs,Ae,Za,rt,aa,Er,ct,cs,da,Cr,Ga,_t,Os,ur,Ui,Hn,_a,Ia,Do,Rs,Ya,Ze,us,fr,kt,Jd,...n.v.featureToggles.timeSeriesTable?[tu]:[]];function mo(_){return new Promise((k,X)=>{let pe;typeof _=="string"?(pe=document.createElement("script"),pe.src=_):pe=_,pe.onload=()=>k(),pe.onerror=Se=>X(Se),document.body.appendChild(pe)})}const mi=()=>new Promise(_=>{window.__monacoKustoResolvePromise=_;const k=document.createElement("script");return k.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(k)});async function uc(){const _=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",k=[[`${_}/language/kusto/bridge.min.js`],[`${_}/language/kusto/kusto.javascript.client.min.js`,`${_}/language/kusto/newtonsoft.json.min.js`,`${_}/language/kusto/Kusto.Language.Bridge.min.js`]];let X=Promise.resolve();for(const pe of k){await X;const Se=pe.filter(ze=>!document.querySelector(`script[src="${ze}"]`)).map(ze=>mo(ze));await Promise.all(Se)}await mi()}function nu(){return[{id:"kusto",name:"kusto",init:uc}]}var au=e(37573),Hs=e(18271),mc=e(81653),su=e(924),vl=e(77346),fc=e(4063),El=e(41818),Hr=e(35287),gc=e(58379);function ru(_,k){if(_===k)return!0;if(!(_ instanceof Object)||!(k instanceof Object))return!1;const X=Object.keys(_),pe=X.length;for(let Se=0;Se<pe;Se++)if(!(X[Se]in k))return!1;for(let Se=0;Se<pe;Se++)if(_[X[Se]]!==k[X[Se]])return!1;return pe===Object.keys(k).length}var _r=e(27876);class yl{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new su.X({chromeless:!0,sectionNav:{node:{text:(0,Hr.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:gc.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null,layout:vl.Q.Canvas}),this.onToggleMegaMenu=()=>{const k=!this.state.getValue().megaMenuOpen;(0,El.ff)("grafana_toggle_menu_clicked",{action:k?"open":"close"}),this.update({megaMenuOpen:k})},this.setMegaMenu=k=>{this.update({megaMenuOpen:k})},this.onToggleSearchBar=()=>{const k=!this.state.getValue().searchBarHidden;gc.Z.set(this.searchBarStorageKey,k),this.update({searchBarHidden:k})},this.onToggleKioskMode=()=>{const k=this.getNextKioskMode();this.update({kioskMode:k}),R.E1.partial({kiosk:this.getKioskUrlValue(k)})}}setMatchedRoute(k){this.currentRoute!==k&&(this.currentRoute=k,this.routeChangeHandled=!1)}update(k){const X=this.state.getValue(),pe={...X};this.routeChangeHandled||(pe.actions=void 0,pe.pageNav=void 0,pe.sectionNav={node:{text:(0,Hr.t)("nav.home.title","Home")},main:{text:""}},pe.chromeless=this.currentRoute?.chromeless,pe.layout=vl.Q.Standard,this.routeChangeHandled=!0),Object.assign(pe,k),pe.chromeless=pe.kioskMode===_r.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(pe,X)||this.state.next(pe)}ignoreStateUpdate(k,X){return!!(ru(k,X)||(k.sectionNav!==X.sectionNav||k.pageNav!==X.pageNav)&&k.actions===X.actions&&k.layout===X.layout&&Pl(k.sectionNav.node,X.sectionNav.node)&&Pl(k.pageNav,X.pageNav))}useState(){return(0,mc.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),R.E1.partial({kiosk:null})}setKioskModeFromUrl(k){switch(k){case"tv":this.update({kioskMode:_r.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:_r.KioskMode.Full})}}getKioskUrlValue(k){switch(k){case _r.KioskMode.TV:return"tv";case _r.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:k,searchBarHidden:X}=this.state.getValue();return X||k===_r.KioskMode.TV?(Hs.Z.emit(fc.SI.alertSuccess,[(0,Hr.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),_r.KioskMode.Full):k?null:_r.KioskMode.TV}}function Pl(_,k){if(_===k)return!0;const X=_?.children?.find(Se=>Se.active),pe=k?.children?.find(Se=>Se.active);return _?.text===k?.text&&_?.url===k?.url&&X?.url===pe?.url}var fi=e(52974),pc=e(52889),Fi=e(8412);function Cl({actions:_,children:k,info:X,pageNav:pe,layout:Se,renderTitle:ze,subTitle:ke}){const yt=(0,m.useContext)(pc.v);return m.createElement(Fi.T,{navModel:yt.sectionNav,pageNav:pe,layout:Se,actions:_,renderTitle:ze,info:X,subTitle:ke},m.createElement(Fi.T.Contents,null,k))}var bo=e(49187);function Dl(_){const k=_.target instanceof Element&&hc(_.target);if(!(_.ctrlKey||_.metaKey||_.defaultPrevented)&&k){let X=k.getAttribute("href");const pe=k.getAttribute("target");if(X&&!pe){const Se=bo.Cj.parseKeyValue(X.split("?")[1]),ze=Se.orgId&&Number(Se.orgId)!==Q.vc.bootData.user.orgId;if((0,R.GQ)("utils",!1,"intercepting link click",_),_.preventDefault(),X=T.u.stripBaseFromUrl(X),X[0]!=="/"||ze)if(X.indexOf("://")>0||X.indexOf("mailto:")===0||ze){window.location.href=X;return}else if(X.indexOf("#")===0){window.location.hash=X;return}else X=`/${X}`;R.E1.push(X)}}}function hc(_){for(;_!==null&&_.tagName;){if(_.tagName.toUpperCase()==="A")return _;_=_.parentElement}return null}var ou=e(98102),vc=e(2476),Rr=e(45984),bl=e(5191),fo=e(67948),Ws=e(3153);function Ec(_,...k){const X=(0,fo.connect)(...k)(_);return pe=>m.createElement(X,{...pe,store:Ws.h})}function iu(_,...k){const X=(0,fo.connect)(...k)(_);return pe=>m.createElement(fo.Provider,{store:Ws.h},m.createElement(X,{...pe,store:Ws.h}))}const yc=iu(_=>m.createElement(m.Fragment,null,m.createElement(bl.$i,{..._},m.createElement(bl.Y0,null))));var xl=e(92973);class Wr{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,D.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){Hs.Z.subscribe(Rr.VJ,k=>this.showConfirmModal(k.payload)),Hs.Z.subscribe(Rr.Dn,k=>this.showModalReact(k.payload)),Hs.Z.subscribe(F.EK,k=>(0,vc.bY)(k.payload))}showModalReact(k){const{component:X,props:pe}=k,Se={component:X,props:{...pe,isOpen:!0,onDismiss:this.onReactModalDismiss}},ze=m.createElement((0,xl.E)(yc,n.v.theme2),Se);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(ze)}showConfirmModal(k){const{confirmText:X,onConfirm:pe=()=>{},onDismiss:Se,text2:ze,altActionText:ke,onAltAction:yt,noText:Vt,text:Zt,text2htmlBind:an,yesText:En="Yes",icon:wn,title:Xn="Confirm",yesButtonVariant:Ca}=k,za={confirmText:En,confirmButtonVariant:Ca,confirmationText:X,icon:wn,title:Xn,body:Zt,description:ze&&an?t.QX.sanitize(ze):ze,isOpen:!0,dismissText:Vt,onConfirm:()=>{pe(),this.onReactModalDismiss()},onDismiss:()=>{Se?.(),this.onReactModalDismiss()},onAlternative:yt?()=>{yt(),this.onReactModalDismiss()}:void 0,alternativeText:ke},gs={component:ou.s,props:za},Br=m.createElement((0,xl.E)(yc,n.v.theme2),gs);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Br)}}var $i=e(29930),no=e(82002),lu=e(88383),Pc=e(73289);function Ki(_,k=!1){return new Promise(X=>{const pe=document.createElement("script");pe.onload=X,pe.src=_,pe.async=k,document.head.appendChild(pe)})}const Cc=(0,lu.h)("EchoSrv"),Dc=Cc.logger;(0,Pc.x)("echo",void 0,Cc);class bc{constructor(k){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const X of this.backends)X.flush()},this.addBackend=X=>{Dc("Adding backend",!1,X),this.backends.push(X)},this.addEvent=(X,pe)=>{const Se=this.getMeta(),ze={...X,meta:{...Se,...pe}};for(const ke of this.backends)(ke.supportedEvents.length===0||ke.supportedEvents.indexOf(ze.type)>-1)&&ke.addEvent(ze);Dc("Reporting event",!1,ze)},this.getMeta=()=>({sessionId:"",userId:no.Vt.user.id,userLogin:no.Vt.user.login,userSignedIn:no.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...k},setInterval(this.flush,this.config.flushInterval)}}const Um=(_,k)=>{(0,z.RP)().addEvent({type:z.ee.Performance,payload:{name:_,value:k}})},xf=_=>captureException(_);class xc{constructor(k){this.options=k,this.buffer=[],this.supportedEvents=[z.ee.Performance],this.addEvent=X=>{this.buffer.push(X.payload)},this.flush=()=>{this.buffer.length!==0&&($i.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var co=e(75552);class cu{constructor(k){this.options=k,this.supportedEvents=[z.ee.Pageview,z.ee.Interaction],this.addEvent=Se=>{window.applicationInsights&&((0,co.Si)(Se)&&window.applicationInsights.trackPageView?.(),(0,co.fV)(Se)&&window.applicationInsights.trackEvent?.({name:Se.payload.interactionName,properties:Se.payload.properties}))},this.flush=()=>{};const X={config:{connectionString:k.connectionString,endpointUrl:k.endpointUrl}};Ki("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const Se=new window.Microsoft.ApplicationInsights.ApplicationInsights(X);window.applicationInsights=Se.loadAppInsights()})}}class br{constructor(k){this.options=k,this.supportedEvents=[z.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=Se=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:Se.payload.page})},this.flush=()=>{};const X=`https://www.googletagmanager.com/gtag/js?id=${k.googleAnalyticsId}`;Ki(X,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const pe={page_path:window.location.pathname};k.user&&(pe.user_id=k.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=k.googleAnalytics4SendManualPageViews,window.gtag("config",k.googleAnalyticsId,pe)}}class Sc{constructor(k){this.options=k,this.supportedEvents=[z.ee.Pageview],this.trackedUserId=null,this.addEvent=Se=>{if(!window.ga)return;window.ga("set",{page:Se.payload.page}),window.ga("send","pageview");const{userSignedIn:ze,userId:ke}=Se.meta;ze&&ke!==this.trackedUserId&&(this.trackedUserId=ke,window.ga("set","userId",ke))},this.flush=()=>{};const X=`https://www.google-analytics.com/analytics${k.debug?"_debug":""}.js`;Ki(X);const pe=window.ga=window.ga||function(){(pe.q=pe.q||[]).push(arguments)};pe.l=+new Date,pe("create",k.googleAnalyticsId,"auto"),pe("set","anonymizeIp",!0)}}class Yo{constructor(k){this.options=k,this.supportedEvents=[z.ee.Pageview,z.ee.Interaction,z.ee.ExperimentView],this.addEvent=ze=>{window.rudderanalytics&&((0,co.Si)(ze)&&window.rudderanalytics.page?.(),(0,co.fV)(ze)&&window.rudderanalytics.track?.(ze.payload.interactionName,ze.payload.properties),(0,co.mR)(ze)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:ze.payload.experimentId,experiment_group:ze.payload.experimentGroup,experiment_variant:ze.payload.experimentVariant}))},this.flush=()=>{};const X=k.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";Ki(X);const pe=window.rudderanalytics=[],Se=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let ze=0;ze<Se.length;ze++){const ke=Se[ze];pe[ke]=function(yt){return function(){pe.push([yt].concat(Array.prototype.slice.call(arguments)))}}(ke)}if(window.rudderanalytics?.load?.(k.writeKey,k.dataPlaneUrl,{configUrl:k.configUrl}),k.user){const{identifier:ze,intercomIdentifier:ke}=k.user.analytics,yt={};ke&&(yt.Intercom={user_hash:ke}),window.rudderanalytics?.identify?.(ze,{email:k.user.email,orgId:k.user.orgId,language:k.user.language},yt)}}}var Vi=e(13891),du=e(68372),Mc=e(1335),Sl=e(71568),Tc=e(2194),Oc=e(75078),uu=e(74128);class Ic extends uu.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=n.v.buildInfo.version}send(k){(0,z.RP)().addEvent({type:z.ee.GrafanaJavascriptAgent,payload:k})}getIgnoreUrls(){return[]}}class zi{constructor(k){this.options=k,this.supportedEvents=[z.ee.GrafanaJavascriptAgent],this.addEvent=Se=>{this.transports.forEach(ze=>ze.send(Se.payload))},this.flush=()=>{};const X=[];this.transports=[],k.customEndpoint&&this.transports.push(new Vi.V({url:k.customEndpoint,apiKey:k.apiKey})),k.errorInstrumentalizationEnabled&&X.push(new du.w),k.consoleInstrumentalizationEnabled&&X.push(new Mc.J),k.webVitalsInstrumentalizationEnabled&&X.push(new Sl.P);const pe={globalObjectKey:k.globalObjectKey||"faro",preventGlobalExposure:k.preventGlobalExposure||!1,app:{version:k.buildInfo.version,environment:k.buildInfo.env},instrumentations:X,transports:[new Ic],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Tc.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,Oc.p)(pe),k.user&&this.faroInstance.api.setUser({id:k.user.id,attributes:{orgId:String(k.user.orgId)||""}})}}var wm=e(37916),Hi=e(81534),Rc=e(34785),Wm=e(48606),Vr=e(51401),gi=e(51499),xo=e(76501),ki=e(28466),go=e(3469);const po=3,Ml=5e3;class So{constructor(k){this.options=k,this._disabledUntil=new Date(Date.now()),this._buffer=(0,Vr.x)(k.maxConcurrentRequests??po)}sendEvent(k){if(new Date(Date.now())<this._disabledUntil){const Se="Dropping frontend event due to too many requests.";return console.warn(Se),Promise.resolve({event:k,reason:Se,status:"skipped"})}const X={body:JSON.stringify({...k,level:k.level??(k.exception?Wm.z.Error:Wm.z.Info),exception:k.exception?{values:k.exception.values?.map(Se=>({...Se,value:mu(Se.value)}))}:k.exception,breadcrumbs:k.breadcrumbs?.map(Se=>({...Se,timestamp:pi(Se.timestamp)})),timestamp:pi(k.timestamp)}),url:this.options.endpoint},pe={body:X.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,gi.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(pe,this.options.fetchParameters),this._buffer.add(()=>new xo.cW((Se,ze)=>{window.fetch(X.url,pe).then(ke=>{if(ke.status===200){Se({status:"success"});return}if(ke.status===429){const yt=Date.now(),Vt=ke.headers.get("Retry-After");Vt?this._disabledUntil=new Date(yt+(0,ki.JY)(Vt,yt)):this._disabledUntil=new Date(yt+Ml),go.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}ze(ke)}).catch(ze)})).then(void 0,Se=>{if(Se.message==="Not adding Promise due to buffer limit reached."){const ze="Dropping frontend log event due to too many requests in flight.";return console.warn(ze),{event:k,reason:ze,status:"skipped"}}throw Se})}}function pi(_){return _?new Date(_*1e3).toISOString():new Date().toISOString()}function mu(_){return typeof _=="string"||_===void 0?_:_&&typeof _=="object"&&Object.keys(_).length===0?"":String(_)}class fu extends Rc.d8{sendEvent(k){return(0,z.RP)().addEvent({type:z.ee.Sentry,payload:k}),Promise.resolve({status:"success",event:k})}sendSession(k){return Promise.resolve({status:"skipped"})}_sendRequest(k,X){throw new Error("should not happen")}}class Ac{constructor(k){this.options=k,this.supportedEvents=[z.ee.Sentry],this.addEvent=pe=>{this.transports.forEach(Se=>Se.sendEvent(pe.payload))},this.flush=()=>{},this.transports=[],k.dsn&&this.transports.push(new Rc.Vh({dsn:k.dsn},fetch)),k.customEndpoint&&this.transports.push(new So({endpoint:k.customEndpoint}));const X={release:k.buildInfo.version,environment:k.buildInfo.env,dsn:k.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:k.sampleRate,transport:fu,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};k.user&&(0,wm.av)({email:k.user.email,id:String(k.user.id)}),(0,Hi.S1)(X)}}var Lc=e(35582),Gi=e.n(Lc),Fm=e(76767),$m=e(93013),hi=e(55935),gu=e(63205),Bc=e(53818),Qo=e(19349),Nc=e(41197),pu=e(77582),Uc=e(5534);function hu(_){return()=>{const k=document.querySelectorAll(":hover");for(let X=k.length-1;X>0;X--){const pe=k[X];pe instanceof HTMLElement&&pe.dataset?.panelid&&_(parseInt(pe.dataset?.panelid,10))}}}class vu{constructor(k,X){this.locationService=k,this.chromeService=X}clearAndInitGlobalBindings(k){Gi().reset(),k.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Uc.X)(!1)),this.bind("c r",()=>(0,Uc.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const X=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(X&&X instanceof HTMLElement&&(X.nodeName==="INPUT"||X.nodeName==="TEXTAREA"||X.hasAttribute("data-slate-editor"))){X.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){Hs.Z.publish(new Rr.QI)}showHelpModal(){Hs.Z.publish(new Rr.Dn({component:Nc.B}))}exit(){const k=this.locationService.getSearchObject();if(k.editview){this.locationService.partial({editview:null,editIndex:null});return}if(k.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(k.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(k.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:X}=this.chromeService.state.getValue();X&&this.chromeService.exitKioskMode(),k.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(k,X){Gi().bind(k,pe=>{pe.preventDefault(),pe.stopPropagation(),pe.returnValue=!1,X.call(this)},"keydown")}bindGlobal(k,X){Gi().bindGlobal(k,pe=>{pe.preventDefault(),pe.stopPropagation(),pe.returnValue=!1,X.call(this)},"keydown")}unbind(k,X){Gi().unbind(k,X)}bindWithPanelId(k,X){this.bind(k,hu(X))}setupTimeRangeBindings(k=!0){this.bind("t z",()=>{Hs.Z.publish(new Rr.p8({scale:2,updateUrl:k}))}),this.bind("ctrl+z",()=>{Hs.Z.publish(new Rr.p8({scale:2,updateUrl:k}))}),this.bind("t left",()=>{Hs.Z.publish(new Rr.Qt({direction:Rr.Im.Left,updateUrl:k}))}),this.bind("t right",()=>{Hs.Z.publish(new Rr.Qt({direction:Rr.Im.Right,updateUrl:k}))})}setupDashboardBindings(k){this.bind("mod+o",()=>{k.graphTooltip=(k.graphTooltip+1)%3,k.events.publish(new fc.oi),k.startRefresh()}),this.bind("mod+s",()=>{k.meta.canSave&&Hs.Z.publish(new Rr.Dn({component:gu.d,props:{dashboard:k}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",X=>{if(k.canEditPanelById(X)){const pe=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:pe?null:X})}}),this.bindWithPanelId("v",X=>{const pe=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:pe?null:X})}),this.bindWithPanelId("p l",X=>{const pe=k.getPanelById(X),Se={...pe.options};Se.legend.showLegend?Se.legend.showLegend=!1:Se.legend.showLegend=!0,pe.updateOptions(Se)}),this.bindWithPanelId("i",X=>{this.locationService.partial({inspect:X})}),pu.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async X=>{const pe=k.getPanelById(X),Se=await(0,hi.H6)({panel:pe,datasourceSrv:(0,u.ak)(),timeSrv:(0,Qo.$t)()});if(Se){const ze=T.u.stripBaseFromUrl(Se);ze&&this.locationService.push(ze)}}),this.bindWithPanelId("p r",X=>{k.canEditPanelById(X)&&!(k.panelInView||k.panelInEdit)&&Hs.Z.publish(new Rr.Eb(X))}),this.bindWithPanelId("p d",X=>{if(k.canEditPanelById(X)){const pe=k.getPanelInfoById(X).index;k.duplicatePanel(k.panels[pe])}}),this.bindWithPanelId("p s",X=>{const pe=k.getPanelInfoById(X);Hs.Z.publish(new Rr.Dn({component:Bc.ShareModal,props:{dashboard:k,panel:pe?.panel}}))}),this.bind("d l",()=>{k.toggleLegendsForAll()}),this.bind("d shift+c",()=>{k.collapseRows()}),this.bind("d shift+e",()=>{k.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{k.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const pe=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+pe})}}async function Km(){if(window.location.search.indexOf("why-render")!==-1){const{default:_}=await e.e(2182).then(e.t.bind(e,62182,23));_(React,{trackAllPureComponents:!0})}}var Mo=e(75118),Vm=e(6911),ao=e(53747),wc=e(21056),$r=e(88214),ji=e(40333),Eu=e(21237),yu=e(89730),Yi=e(77410);const hr=()=>new Yi.q(new URL(e.p+e.u(8186),e.b));var Tl=e(84946),Wc=e(53704);const Fc=_=>new Tl.y(k=>{const X=_.subscribe(ji.sj(pe=>{k.next(pe)}),ji.sj(pe=>{k.error(pe)}),ji.sj(()=>{k.complete()}));return{unsubscribe:()=>{X.then(pe=>pe.unsubscribe())}}}),Ol=_=>(0,yn.D)(_).pipe((0,Wc.w)(k=>Fc(k)));class Pu{constructor(k){this.getConnectionState=()=>Ol(this.centrifugeWorker.getConnectionState()),this.getDataStream=X=>Ol(this.centrifugeWorker.getDataStream(X)).pipe((0,Eu.Q)(yu.z)),this.getQueryData=async X=>{const pe=JSON.parse(JSON.stringify(X));return this.centrifugeWorker.getQueryData(pe)},this.getPresence=X=>this.centrifugeWorker.getPresence(X),this.getStream=X=>Ol(this.centrifugeWorker.getStream(X)),this.centrifugeWorker=ji.Ud(hr()),this.centrifugeWorker.initialize(k,ji.sj(k.dataStreamSubscriberReadiness))}}var Cu=e(8891),Du=e(32689),Il=e(22069),_o=e(28625),Qi=e(14035);class $c{constructor(k){this.deps=k,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=X=>{let pe;const Se=ze=>{const ke=ze.data[0];if(!pe&&!(0,Qi.A1)(ke,Qi.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${ke?.type}`);return}switch(ke.type){case Qi.g0.FullFrame:{pe=_o.Av.deserialize(ke.frame);return}case Qi.g0.NewValuesSameSchema:{pe.pushNewValues(ke.values);return}}};return this.deps.centrifugeSrv.getDataStream(X).pipe((0,pn.U)(ze=>(Se(ze),{...ze,data:[pe??_o.Av.empty()]})))},this.getStream=X=>this.deps.centrifugeSrv.getStream(X),this.getQueryData=X=>(0,yn.D)(this.deps.centrifugeSrv.getQueryData(X)).pipe((0,Wc.w)(pe=>{const Se=(0,Du.z1)(pe,X.request.targets);return Se.data?.length&&Se.data.find(ke=>ke.meta?.channel)?(0,Il.B9)(Se,X.request,Il.PI):(0,oa.of)(Se)})),this.publish=async(X,pe)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Cu.Aj)(X),data:pe}),this.getPresence=X=>this.deps.centrifugeSrv.getPresence(X)}}function bu(){const _={appUrl:`${window.location.origin}${n.v.appSubUrl}`,orgId:no.Vt.user.orgId,orgRole:no.Vt.user.orgRole,liveEnabled:n.v.liveEnabled,dataStreamSubscriberReadiness:Vm.A.ok.asObservable(),grafanaAuthToken:(0,ao.v)()},k=n.v.featureToggles["live-service-web-worker"]?new Pu(_):new wc.R(_);(0,Mo.cA)(new $c({centrifugeSrv:k,backendSrv:(0,S.i)()}))}function Kc(){return getGrafanaLiveSrv()}var Rl=e(51927),xu=e(98141);const Zr=2;class _i{constructor(){this.extensionsByExtensionPoint={}}allowedToAdd({extensionPointId:k,title:X}){return this.countByExtensionPoint(k)>=Zr?!1:(this.addExtensionToExtensionPoint(k,X),!0)}addExtensionToExtensionPoint(k,X){this.extensionsByExtensionPoint[k]||(this.extensionsByExtensionPoint[k]=[]),this.extensionsByExtensionPoint[k].push(X)}countByExtensionPoint(k){return this.extensionsByExtensionPoint[k]?.length??0}getExtensionTitlesByExtensionPoint(k){return this.extensionsByExtensionPoint[k]}}var Vc=e(22623),Zi=e(35029);function To(_){console.warn(`[Plugin Extensions] ${_}`)}function Su(_){return typeof _=="object"&&"type"in _&&_.type===Vc.D.link}function zm(_,k=""){return(...X)=>{try{return _(...X)}catch(pe){pe instanceof Error&&console.warn(`${k}${pe.message}`)}}}function zc(_){return{openModal:({title:X,body:pe})=>{Hs.Z.publish(new Rr.Dn({component:Oo({title:X,body:pe})}))},context:_}}const Oo=({title:_,body:k})=>({onDismiss:pe})=>m.createElement(Zi.u,{title:_,isOpen:!0,onDismiss:pe,onClickBackdrop:pe},m.createElement(k,{onDismiss:pe}));function vi(_,k=new Map){if(!_||typeof _!="object"||Object.isFrozen(_))return _;const X=Array.isArray(_)?[..._]:{..._};if(k.has(_))return k.get(_);k.set(_,X);const pe=Reflect.ownKeys(X);for(const Se of pe){const ze=Array.isArray(X)?X[Number(Se)]:X[Se];ze&&(typeof ze=="object"||typeof ze=="function")&&(Array.isArray(X)?X[Number(Se)]=vi(ze,k):X[Se]=vi(ze,k))}return Object.freeze(X)}function gr(_,k){const X=`${_}${k.extensionPointId}${k.title}`;return Array.from(X).reduce((pe,Se)=>Math.imul(31,pe)+Se.charCodeAt(0)|0,0).toString()}function Hc(_,k="extension is not a link extension"){if(!isPluginExtensionLink(_))throw new Error(k)}function Ji(_,k="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(_))throw new Error(k)}function Ei(_,k){if(!Ou(_,k))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${_}/" (currently: "${k}"). Skipping the extension.`)}function Mu(_){if(!Iu(_))throw new Error(`Invalid extension "${_.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${_.extensionPointId}"). Skipping the extension.`)}function kc(_){if(!Ru(_))throw new Error(`Invalid extension "${_.title}". The "configure" property must be a function. Skipping the extension.`)}function Zo(_,k){for(const X of k)if(!Au(_[X]))throw new Error(`Invalid extension "${_.title}". Property "${X}" must be a string and cannot be empty. Skipping the extension.`)}function Tu(_,k="The provided value is a Promise."){if(Gc(_))throw new Error(k)}function Ou(_,k){return Boolean(typeof k=="string"&&k.length>0&&k.startsWith(`/a/${_}/`))}function Iu(_){return Boolean(_.extensionPointId?.startsWith("grafana/")||_.extensionPointId?.startsWith("plugins/"))}function Ru(_){return _.configure?typeof _.configure=="function":!0}function Au(_){return typeof _=="string"&&_.length>0}function Al(_,k){try{if(Zo(k,["title","description","extensionPointId"]),Mu(k),kc(k),Su(k)){if(!k.path&&!k.onClick)return To(`Invalid extension "${k.title}". Either "path" or "onClick" is required.`),!1;k.path&&Ei(_,k.path)}return!0}catch(X){return X instanceof Error&&To(X.message),!1}}function Gc(_){return _ instanceof Promise||typeof _=="object"&&_!==null&&"then"in _&&"catch"in _}function Ll(_){const k={},X=new _i;for(const{pluginId:pe,extensionConfigs:Se,error:ze}of _){if(ze){To(`"${pe}" plugin failed to load, skip registering its extensions.`);continue}for(const ke of Se){const{extensionPointId:yt}=ke;if(!X.allowedToAdd(ke)){To(`"${pe}" plugin has reached the limit of ${Zr} for "${yt}", skip registering extension "${ke.title}".`);continue}if(!ke||!Al(pe,ke))continue;let Vt={config:ke,pluginId:pe};Array.isArray(k[yt])?k[yt].push(Vt):k[yt]=[Vt]}}return vi(k)}const Lu=({context:_,extensionPointId:k,registry:X})=>{const pe=_?vi(_):{},Se=X[k]??[],ze=[];for(const ke of Se)try{const yt=ke.config;if(Su(yt)){const Vt=Bu(ke.pluginId,yt,pe);if(yt.configure&&Vt===void 0)continue;const Zt={id:gr(ke.pluginId,yt),type:Vc.D.link,pluginId:ke.pluginId,onClick:Nu(yt,pe),title:Vt?.title||yt.title,description:Vt?.description||yt.description,path:Vt?.path||yt.path};ze.push(Zt)}}catch(yt){yt instanceof Error&&To(yt.message)}return{extensions:ze}};function Bu(_,k,X){try{const pe=k.configure?.(X);if(pe===void 0)return;let{title:Se=k.title,description:ze=k.description,path:ke=k.path,...yt}=pe;if(Tu(pe,`The configure() function for "${k.title}" returned a promise, skipping updates.`),ke&&Ei(_,ke),Zo({title:Se,description:ze},["title","description"]),Object.keys(yt).length>0)throw new Error(`Invalid extension "${k.title}". Trying to override not-allowed properties: ${Object.keys(yt).join(", ")}`);return{title:Se,description:ze,path:ke}}catch(pe){pe instanceof Error&&To(pe.message);return}}function Nu(_,k){const{onClick:X}=_;if(X)return function(Se){try{const ze=X(Se,zc(k));Gc(ze)&&ze.catch(ke=>{ke instanceof Error&&To(ke.message)})}catch(ze){ze instanceof Error&&To(ze.message)}}}var Uu=e(38490),xr=e(22215);async function jc(_={}){const k=Object.values(_).filter(X=>X.preload);return Promise.all(k.map(wu))}async function wu(_){const{path:k,version:X,id:pe}=_;try{const{plugin:Se}=await xr.N$(k,X),{extensionConfigs:ze=[]}=Se;return{pluginId:pe,extensionConfigs:ze}}catch(Se){return console.error(`[Plugins] Failed to preload plugin: ${k} (version: ${X})`,Se),{pluginId:pe,extensionConfigs:[],error:Se}}}var Bl=e(46528),Yc=e(31129),Qc=e(206),Xi=e(47891),Sr=e(52666),yi=e(20308),_c=e(49003),Zc=e(59584),Nl=e(75434);class Wu{constructor(){this.subject=new Bl.t(1)}get(){return this.subject.asObservable()}run(k){const{queries:X,timezone:pe,datasource:Se,panelId:ze,app:ke,dashboardUID:yt,timeRange:Vt,timeInfo:Zt,cacheTimeout:an,queryCachingTTL:En,maxDataPoints:wn,scopedVars:Xn,minInterval:Ca}=k;this.subscription&&this.subscription.unsubscribe();const za={app:ke??Qc.zj.Unknown,requestId:(0,_c.t)(),timezone:pe,panelId:ze,dashboardUID:yt,range:Vt,timeInfo:Zt,interval:"",intervalMs:0,targets:(0,v.cloneDeep)(X),maxDataPoints:wn,scopedVars:Xn||{},cacheTimeout:an,queryCachingTTL:En,startTime:Date.now()};za.rangeRaw=Vt.raw,(0,yn.D)(qi(Se,za.scopedVars)).pipe((0,Yc.P)()).subscribe({next:gs=>{za.targets=za.targets.map(ar=>(ar.datasource||(ar.datasource=gs.getRef()),ar));const Br=Ca?(0,yi.J)().replace(Ca,za.scopedVars):gs.interval,nr=Xi.calculateInterval(Vt,wn,Br);za.scopedVars=Object.assign({},za.scopedVars,{__interval:{text:nr.interval,value:nr.interval},__interval_ms:{text:nr.intervalMs.toString(),value:nr.intervalMs}}),za.interval=nr.interval,za.intervalMs=nr.intervalMs,this.subscription=(0,Nl.v7)(gs,za).subscribe({next:ar=>{const Yr=(0,Fn.zR)(ar,this.lastResult);this.lastResult=(0,Zc.C)(Yr,this.lastResult),this.subject.next(this.lastResult)}})},error:gs=>console.error("PanelQueryRunner Error",gs)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Sr.Gu.Loading&&this.subject.next({...this.lastResult,state:Sr.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function qi(_,k){return _&&"query"in _?_:(0,u.ak)().get(_,k)}function Fu(){window.grafanaRuntime={getDashboardSaveModel:()=>{const _=(0,p.h4)().getCurrent();if(_)return _.getSaveModelClone()},getDashboardTimeRange:()=>{const _=(0,Qo.$t)().timeRange();return{from:_.from.valueOf(),to:_.to.valueOf(),raw:_.raw}},getPanelData:()=>{const _=(0,p.h4)().getCurrent();if(_)return _.panels.reduce((k,X)=>(k[X.id]=X.getQueryRunner().getLastResult(),k),{})}}}var Jo=e(22323),Ba=e(92624),Jc=e(73446),Xc=e(53117),so=e(41624),Jr=e(50678);function qc(_){return _.extended&&"infoText"in _.extended?_.extended:null}function Ul(_){return _.extended&&"dataSourceTypes"in _.extended?_.extended:null}function el(_){return _.extended&&"dataSource"in _.extended?_.extended:null}var As=e(87095),Pi=e(30002);const $u=(_,k)=>{const{rootStateKey:X}=k.variable;if(!X)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:qc(Jr.PF)};const{editor:pe}=(0,As.AE)(X,_);return{extended:qc(pe)}},Ci={changeVariableDatasource:Pi.Z$},Ku=(0,fo.connect)($u,Ci);class Fr extends m.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=k=>{this.props.changeVariableDatasource((0,Ba.yQ)(this.props.variable),(0,Jc.iU)(k))}}componentDidMount(){const{rootStateKey:k}=this.props.variable;if(!k){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:k,extended:X}=this.props,pe=X?.infoText??null;return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Ad-hoc options"),m.createElement(la.g,{label:"Data source",htmlFor:"data-source-picker"},m.createElement(Xc.q,{current:k.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),pe?m.createElement(Is.b,{title:pe,severity:"info"}):null)}}const ed=Ku(Fr);var Hm=e(44847);const wl={addFilter:Pi.KJ,removeFilter:Pi.ku,changeFilter:Pi.M6},td=(0,fo.connect)(null,wl);class nd extends m.PureComponent{constructor(){super(...arguments),this.addFilter=k=>{this.props.addFilter((0,Ba.yQ)(this.props.variable),k)},this.removeFilter=k=>{this.props.removeFilter((0,Ba.yQ)(this.props.variable),k)},this.changeFilter=(k,X)=>{this.props.changeFilter((0,Ba.yQ)(this.props.variable),{index:k,filter:X})}}render(){const{filters:k,datasource:X}=this.props.variable;return m.createElement(Hm.F,{datasource:X,filters:k,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Wl=td(nd);Wl.displayName="AdHocPicker";var Fl=e(79134);const ad=_=>_.map(k=>tl(k).map(km).join("|")),Vu=_=>{if((0,v.isArray)(_))return _.map(Hu).filter(zr);const k=Hu(_);return k===null?[]:[k]};function km(_){return _==null?"":/\|/g[Symbol.replace](_,"__gfp__")}function zu(_){return _==null?"":/__gfp__/g[Symbol.replace](_,"|")}function tl(_){return[_.key,_.operator,_.value]}function Hu(_){if(!(0,v.isString)(_)||_.length===0)return null;const k=_.split("|").map(zu);return{key:k[0],operator:k[1],value:k[2],condition:""}}function zr(_){return _!==null&&(0,v.isString)(_.value)}const nl=async()=>{},sd=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Fl.Js,reducer:Fl.jo,picker:Wl,editor:ed,dependsOn:()=>!1,setValue:nl,setValueFromUrl:async(_,k)=>{const X=Vu(k);await(0,Ws.WI)((0,Pi.Ue)((0,Ba.yQ)(_),X))},updateOptions:nl,getSaveModel:_=>{const{index:k,id:X,state:pe,global:Se,rootStateKey:ze,...ke}=(0,v.cloneDeep)(_);return ke},getValueForUrl:_=>{const k=_?.filters??[];return ad(k)}});var rd=e(83829),ku=e(94437),Ar=e(82253),js=e(15546),Io=e(91017),od=e(85850),$l=e(12877),Di=e(90801),ho=e(68140),Gm=e(82615),Gu=e(59724),ju=e(86318),Yu=e(44288),Kl=e(75849),or=e(10672),cr=e(85803),Cs=e(7240),Ro=e(62992),Ao=e(63510);const Qu={...or.Eg,type:"query",datasource:null,query:"",regex:"",sort:or.$U.disabled,refresh:or.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},al=(_,k)=>{if(k===or.$U.disabled)return _;const X=Math.ceil(k/2),pe=k%2===0;return X===1?_=(0,v.sortBy)(_,"text"):X===2?_=(0,v.sortBy)(_,Se=>{if(!Se.text)return-1;const ze=Se.text.match(/.*?(\d+).*/);return!ze||ze.length<2?-1:parseInt(ze[1],10)}):X===3&&(_=(0,v.sortBy)(_,Se=>(0,v.toLower)(Se.text))),pe&&(_=_.reverse()),_},Vl=(_,k)=>{const X=[];let pe=null;k.lastIndex=0;do pe=k.exec(_),pe&&X.push(pe);while(k.global&&pe&&pe[0]!==""&&pe[0]!==void 0);return X},_u=(_,k,X)=>{let pe,Se=[];_&&(pe=(0,ys.jO)(_));for(let ze=0;ze<X.length;ze++){const ke=X[ze];let yt=ke.text===void 0||ke.text===null?ke.value:ke.text,Vt=ke.value===void 0||ke.value===null?ke.text:ke.value;if((0,v.isNumber)(Vt)&&(Vt=Vt.toString()),(0,v.isNumber)(yt)&&(yt=yt.toString()),pe){const Zt=Vl(Vt,pe);if(!Zt.length)continue;const an=Zt.find(Ca=>Ca.groups&&Ca.groups.value),En=Zt.find(Ca=>Ca.groups&&Ca.groups.text),wn=Zt.find(Ca=>Ca.length>1),Xn=Zt.length>1&&wn;if(an||En)Vt=an?.groups?.value??En?.groups?.text,yt=En?.groups?.text??an?.groups?.value;else if(Xn){for(let Ca=0;Ca<Zt.length;Ca++){const za=Zt[Ca];Se.push({text:za[1],value:za[1],selected:!1})}continue}else wn&&(yt=wn[1],Vt=wn[1])}Se.push({text:yt,value:Vt,selected:!1})}return Se=(0,v.uniqBy)(Se,"value"),al(Se,k)},zl=(0,Ro.oM)({name:"templating/query",initialState:Ao.s,reducers:{updateVariableOptions:(_,k)=>{const{results:X,templatedRegex:pe}=k.payload.data,Se=(0,As.ir)(_,k.payload.id);if(Se.type!=="query")return;const{includeAll:ze,sort:ke}=Se,yt=_u(pe,ke,X);ze&&yt.unshift({text:Ar.xk,value:Ar.r2,selected:!1}),yt.length||yt.push({text:Ar.BH,value:Ar.QX,isNone:!0,selected:!1}),Se.options=yt}}}),id=zl.reducer,{updateVariableOptions:Xo}=zl.actions;function qo(){return _=>_.pipe((0,pn.U)(k=>{const X=k.series;if(!X||!X.length)return[];if(Zu(X))return X;const pe=(0,Fn.F9)(X),Se=[];let ze=-1,ke=-1,yt=-1,Vt=-1;for(const Zt of pe)for(let an=0;an<Zt.fields.length;an++){const En=Zt.fields[an],wn=(0,ce.CZ)(En,Zt,X).toLowerCase();En.type===ie.fS.string&&yt===-1&&(yt=an),wn==="text"&&En.type===ie.fS.string&&ke===-1&&(ke=an),wn==="value"&&En.type===ie.fS.string&&ze===-1&&(ze=an),wn==="expandable"&&(En.type===ie.fS.boolean||En.type===ie.fS.number)&&Vt===-1&&(Vt=an)}if(yt===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Zt of X)for(let an=0;an<Zt.length;an++){const En=Vt!==-1?Zt.fields[Vt].values[an]:void 0,wn=Zt.fields[yt].values[an],Xn=ke!==-1?Zt.fields[ke].values[an]:null,Ca=ze!==-1?Zt.fields[ze].values[an]:null;if(ze===-1&&ke===-1){Se.push({text:wn,value:wn,expandable:En});continue}if(ze===-1&&ke!==-1){Se.push({text:Xn,value:Xn,expandable:En});continue}if(ze!==-1&&ke===-1){Se.push({text:Ca,value:Ca,expandable:En});continue}Se.push({text:Xn,value:Ca,expandable:En})}return Se}))}function ei(_){return k=>k.pipe((0,pn.U)(X=>{const{variable:pe,dispatch:Se,getTemplatedRegexFunc:ze}=_;if(!pe.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const ke=ze(pe),yt=(0,Ba.Y6)(pe,{results:X,templatedRegex:ke});Se((0,Cs.mb)(pe.rootStateKey,Xo(yt)))}))}function Hl(_){return k=>k.pipe((0,un.z)(()=>{const{dispatch:X,variable:pe,searchFilter:Se}=_;return Se?(0,oa.of)():(0,yn.D)(X((0,cr.xQ)((0,Ba.yQ)(pe))))}))}function Zu(_){if(!_)return!1;if(!_.length)return!0;const k=_[0];if((0,Fn.aY)(k))return!1;for(const X in k){if(!k.hasOwnProperty(X)||k[X]!==null&&typeof k[X]!="string"&&typeof k[X]!="number")continue;const pe=X.toLowerCase();if(pe==="text"||pe==="value")return!0}return!1}var ti=e(48976);class Ju{constructor(){this.runners=[new Xu,new jm,new ld,new cd]}getRunnerForDatasource(k){const X=this.runners.find(pe=>pe.canRun(k));if(X)return X;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class Xu{constructor(){this.type=ti.j2.Legacy}canRun(k){return(0,js.R)(k)}getTarget({datasource:k,variable:X}){if((0,js.R)(k))return X.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,variable:X,searchFilter:pe,timeSrv:Se},ze){if(!(0,js.R)(k))return bi();const ke=(0,Ba.AQ)(X,pe,Se);return(0,yn.D)(k.metricFindQuery(X.query,ke)).pipe((0,un.z)(yt=>{if(!yt||!yt.length)return bi();const Vt=yt;return(0,oa.of)({series:Vt,state:Sr.Gu.Done,timeRange:ke.range})}))}}class jm{constructor(){this.type=ti.j2.Standard}canRun(k){return(0,js.Ju)(k)}getTarget({datasource:k,variable:X}){if((0,js.Ju)(k))return k.variables.toDataQuery(X.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:X},pe){return(0,js.Ju)(k)?k.variables.query?X(k,pe,k.variables.query):X(k,pe):bi()}}class ld{constructor(){this.type=ti.j2.Custom}canRun(k){return(0,js.d7)(k)}getTarget({datasource:k,variable:X}){if((0,js.d7)(k))return X.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:X},pe){return(0,js.d7)(k)?X(k,pe,k.variables.query):bi()}}const sl="variable-query";class cd{constructor(){this.type=ti.j2.Datasource}canRun(k){return(0,js.X7)(k)}getTarget({datasource:k,variable:X}){if((0,js.X7)(k))return{...X.query,refId:X.query.refId??sl};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:X},pe){return(0,js.X7)(k)?X(k,pe):bi()}}function bi(){return(0,oa.of)({state:Sr.Gu.Done,series:[],timeRange:(0,Kl.JK)()})}class qu{constructor(k={dispatch:Ws.WI,getState:Ws.y0,getVariable:As.E0,getTemplatedRegex:Ba.gR,getTimeSrv:Qo.$t,queryRunners:new Ju,runRequest:Nl.v7}){this.dependencies=k,this.updateOptionsRequests=new Io.x,this.updateOptionsResults=new Io.x,this.cancelRequests=new Io.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(k){this.updateOptionsRequests.next(k)}getResponse(k){return this.updateOptionsResults.asObservable().pipe((0,Di.h)(X=>X.identifier===k))}cancelRequest(k){this.cancelRequests.next({identifier:k})}destroy(){this.subscription.unsubscribe()}onNewRequest(k){const{datasource:X,identifier:pe,searchFilter:Se}=k;try{const{dispatch:ze,runRequest:ke,getTemplatedRegex:yt,getVariable:Vt,queryRunners:Zt,getTimeSrv:an,getState:En}=this.dependencies,wn=(0,As.S_)(En());this.updateOptionsResults.next({identifier:pe,state:Sr.Gu.Loading});const Xn=Vt(pe,En());if(Xn.type!=="query")return;const Ca=an(),za={variable:Xn,datasource:X,searchFilter:Se,timeSrv:Ca,runRequest:ke},gs=Zt.getRunnerForDatasource(X),Br=gs.getTarget({datasource:X,variable:Xn}),nr=this.getRequest(Xn,k,Br);gs.runRequest(za,nr).pipe((0,Di.h)(()=>{const ar=(0,As.S_)(En());return wn===ar}),(0,Di.h)(ar=>ar.state===Sr.Gu.Done||ar.state===Sr.Gu.Error),(0,ho.q)(1),(0,un.z)(ar=>ar.state===Sr.Gu.Error?(0,od._)(()=>ar.error):(0,oa.of)(ar)),qo(),ei({variable:Xn,dispatch:ze,getTemplatedRegexFunc:yt}),Hl({variable:Xn,dispatch:ze,searchFilter:Se}),(0,Gm.R)((0,$l.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Di.h)(ar=>{let Yr=!1;return ar.identifier.id===pe.id&&(Yr=!0,this.updateOptionsResults.next({identifier:pe,state:Sr.Gu.Loading,cancelled:Yr})),Yr}))),(0,Gu.K)(ar=>ar.cancelled?(0,oa.of)({}):(this.updateOptionsResults.next({identifier:pe,state:Sr.Gu.Error,error:ar}),(0,od._)(()=>ar))),(0,ju.x)(()=>{this.updateOptionsResults.next({identifier:pe,state:Sr.Gu.Done})})).subscribe()}catch(ze){this.updateOptionsResults.next({identifier:pe,state:Sr.Gu.Error,error:ze})}}getRequest(k,X,pe){const{searchFilter:Se}=X,ze={variable:{text:k.current.text,value:k.current.value}},Vt={...Se?{searchFilter:{text:Se,value:Se}}:{},...ze},Zt=k.refresh===or.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,Kl.JK)();return{app:Qc.zj.Dashboard,requestId:(0,Yu.Z)(),timezone:"",range:Zt,interval:"",intervalMs:0,targets:[pe],scopedVars:Vt,startTime:Date.now()}}}let xi;function em(_){xi=_}function ni(){return xi}const tm=_=>{if(!nm(_))return _.name;const{current:k}=_;return Array.isArray(k.text)?k.text.join(" + "):k.text},nm=_=>Array.isArray(_?.options)||typeof _?.current=="object";var vo=(_=>(_[_.moveUp=38]="moveUp",_[_.moveDown=40]="moveDown",_[_.select=32]="select",_[_.cancel=27]="cancel",_[_.selectAndClose=13]="selectAndClose",_))(vo||{});class am extends m.PureComponent{constructor(){super(...arguments),this.onKeyDown=k=>{if(vo[k.keyCode]&&k.keyCode!==vo.select){const X=k.ctrlKey||k.metaKey||k.shiftKey;this.props.onNavigate(k.keyCode,X),k.preventDefault()}},this.onChange=k=>{this.props.onChange(k.target.value)}}render(){const{value:k,id:X,onNavigate:pe,...Se}=this.props;return m.createElement("input",{...Se,ref:ze=>{ze&&(ze.focus(),ze.setAttribute("style",`width:${Math.max(ze.width,150)}px`))},type:"text",className:"gf-form-input",value:k??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Hr.t)("variable.dropdown.placeholder","Enter variable value")})}}var dd=e(61860);const sm=({loading:_,disabled:k,onClick:X,text:pe,onCancel:Se,id:ze})=>{const ke=(0,lt.wW)(Eo),yt=(0,m.useCallback)(Vt=>{Vt.stopPropagation(),Vt.preventDefault(),X()},[X]);return _?m.createElement("div",{className:ke.container,"data-testid":ia.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${pe}`),title:pe,id:ze},m.createElement(rm,{text:pe}),m.createElement(om,{onCancel:Se})):m.createElement("button",{onClick:yt,className:ke.container,"data-testid":ia.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${pe}`),"aria-expanded":!1,"aria-controls":`options-${ze}`,id:ze,title:pe,disabled:k},m.createElement(rm,{text:pe}),m.createElement(qe.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},rm=({text:_})=>{const k=(0,lt.wW)(Eo);return m.createElement("span",{className:k.textAndTags},_===Ar.xk?(0,Hr.t)("variable.picker.link-all","All"):_)},om=({onCancel:_})=>{const k=(0,m.useCallback)(X=>{X.preventDefault(),_()},[_]);return m.createElement(dd.u,{content:"Cancel query"},m.createElement(qe.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:k,"aria-label":ia.wl.components.LoadingIndicator.icon}))},Eo=_=>({container:se.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${_.spacing(1)};
    background-color: ${_.components.input.background};
    border: 1px solid ${_.components.input.borderColor};
    border-radius: ${_.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${_.colors.text};
    height: ${_.spacing(_.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${_.colors.action.disabledBackground};
      color: ${_.colors.action.disabledText};
      border: 1px solid ${_.colors.action.disabledBackground};
    }
  `,textAndTags:se.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${_.spacing(.25)};
    user-select: none;
  `});class ud extends m.PureComponent{constructor(){super(...arguments),this.onToggle=k=>X=>{const pe=X.shiftKey||X.ctrlKey||X.metaKey;this.handleEvent(X),this.props.onToggle(k,pe)},this.onToggleAll=k=>{this.handleEvent(k),this.props.onToggleAll()}}handleEvent(k){k.preventDefault(),k.stopPropagation()}render(){const{multi:k,values:X,highlightIndex:pe,selectedValues:Se,onToggle:ze,onToggleAll:ke,theme:yt,...Vt}=this.props,Zt=kl(yt);return m.createElement("div",{className:Zt.variableValueDropdown},m.createElement("div",{className:Zt.variableOptionsWrapper},m.createElement("ul",{className:Zt.variableOptionsColumn,"aria-label":ia.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Vt},this.renderMultiToggle(),X.map((an,En)=>this.renderOption(an,En)))))}renderOption(k,X){const{highlightIndex:pe,multi:Se,theme:ze}=this.props,ke=kl(ze),yt=k.value===Ar.r2;return m.createElement("li",{key:`${k.value}`},m.createElement("button",{"data-testid":ia.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":k.selected,className:(0,se.cx)((0,Z.gN)(ze),ke.variableOption,{[ke.highlighted]:X===pe},ke.noStyledButton),onClick:this.onToggle(k)},m.createElement("span",{className:(0,se.cx)(ke.variableOptionIcon,{[ke.variableOptionIconSelected]:k.selected,[ke.hideVariableOptionIcon]:!Se})}),m.createElement("span",{"data-testid":ia.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${k.text}`)},yt?(0,Hr.t)("variable.picker.option-all","All"):k.text)))}renderMultiToggle(){const{multi:k,selectedValues:X,theme:pe}=this.props,Se=kl(pe);if(!k)return null;const ze=()=>m.createElement(Hr.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return m.createElement(dd.u,{content:ze,placement:"top"},m.createElement("button",{className:(0,se.cx)((0,Z.gN)(pe),Se.variableOption,Se.variableOptionColumnHeader,Se.noStyledButton),role:"checkbox","aria-checked":X.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},m.createElement("span",{className:(0,se.cx)(Se.variableOptionIcon,{[Se.variableOptionIconManySelected]:X.length>1})}),m.createElement(Hr.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",X.length,")"))}}const kl=(0,ne.B)(_=>{const k=_.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,se.css)({display:"none"}),highlighted:(0,se.css)({backgroundColor:_.colors.action.hover}),noStyledButton:(0,se.css)({width:"100%",textAlign:"left"}),variableOption:(0,se.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:_.colors.action.hover}}),variableOptionColumnHeader:(0,se.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,se.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${k}) left top no-repeat`}),variableOptionIconManySelected:(0,se.css)({background:`url(${k}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,se.css)({background:`url(${k}) 0px -18px no-repeat`}),variableValueDropdown:(0,se.css)({backgroundColor:_.colors.background.primary,border:`1px solid ${_.colors.border.weak}`,borderRadius:_.shape.borderRadius(2),boxShadow:_.shadows.z2,position:"absolute",top:_.spacing(_.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:_.zIndex.typeahead}),variableOptionsColumn:(0,se.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,se.css)({display:"table",width:"100%"})}}),Gl=(0,lt.HE)(ud);var md=e(61618),ro=e(92990),kr=e(85972);const im=(_,k,X)=>async(pe,Se)=>{if(k===vo.cancel)return await pe(Gr(_));if(k===vo.select)return pe(oo(_,X));if(k===vo.selectAndClose)return(0,As.AE)(_,Se()).optionsPicker.multi?pe(oo(_,X)):(pe(oo(_,X,!0)),pe(Gr(_)));if(k===vo.moveDown)return pe((0,Cs.mb)(_,(0,kr.Ew)(1)));if(k===vo.moveUp)return pe((0,Cs.mb)(_,(0,kr.Ew)(-1)))},fd=(_,k="")=>async(X,pe)=>{const{rootStateKey:Se}=_,{id:ze,queryValue:ke}=(0,As.AE)(Se,pe()).optionsPicker,yt={id:ze,rootStateKey:Se,type:"query"},Vt=(0,As.E0)(yt,pe());if(!(0,js.eL)(Vt))return;const{query:Zt,options:an}=Vt;if(X((0,Cs.mb)(Se,(0,kr.Ug)(k))),(0,v.trim)(ke)!==(0,v.trim)(k))return(0,Ba.bf)(Zt)?_m(X,pe,k,Se):X((0,Cs.mb)(Se,(0,kr.ss)(an)))},Ym=async _=>{if((0,md.Q)(_.current))return;await Jo.z.get(_.type).setValue(_,_.current,!0)},Gr=(_,k)=>async(X,pe)=>{const Se=(0,As.AE)(_,pe()).optionsPicker,ze={id:Se.id,rootStateKey:_,type:"query"},ke=(0,As.E0)(ze,pe());if(!(0,js.eL)(ke))return;const yt={option:gd(Se)},Vt={propName:"queryValue",propValue:Se.queryValue};X((0,Cs.mb)(_,(0,ro.Q8)((0,Ba.Y6)(ke,yt)))),X((0,Cs.mb)(_,(0,ro.Pl)((0,Ba.Y6)(ke,Vt))));const Zt=(0,As.E0)(ze,pe());if((0,js.eL)(Zt)&&(X((0,Cs.mb)(_,(0,kr.nn)())),(0,Ba.N9)(ke)!==(0,Ba.N9)(Zt)))return k?k(Zt):await Ym(Zt)},jr=(_,k)=>async(X,pe)=>{const{id:Se,rootStateKey:ze}=_,ke=(0,As.AE)(ze,pe()).optionsPicker;ke.id&&ke.id!==Se&&await X(Gr(ze,k));const yt=(0,As.E0)(_,pe());(0,js.eL)(yt)&&X((0,Cs.mb)(ze,(0,kr.aN)(yt)))},oo=(_,k,X=!1)=>(pe,Se)=>{const{highlightIndex:ze,options:ke}=(0,As.AE)(_,Se()).optionsPicker,yt=ke[ze];pe((0,Cs.mb)(_,(0,kr._M)({option:yt,forceSelect:X,clearOthers:k})))},Qm=async(_,k,X,pe)=>{try{const{id:Se}=(0,As.AE)(pe,k()).optionsPicker,ze={id:Se,rootStateKey:pe,type:"query"},ke=(0,As.E0)(ze,k());if(!(0,js.eL)(ke))return;await Jo.z.get(ke.type).updateOptions(ke,X);const Vt=(0,As.E0)(ze,k());if(!(0,js.eL)(Vt))return;_((0,Cs.mb)(pe,(0,kr.wF)(Vt.options)))}catch(Se){console.error(Se)}},_m=(0,v.debounce)(Qm,500);function gd(_){const{options:k,selectedValues:X,queryValue:pe,multi:Se}=_;if(k.length===0&&pe&&pe.length>0)return{text:pe,value:pe,selected:!1};if(!Se)return X.find(yt=>yt.selected);const ze=[],ke=[];for(const yt of X)yt.selected&&(ze.push(yt.text.toString()),ke.push(yt.value.toString()));return{value:ke,text:ze,selected:!0}}const ai=()=>{const _=ze=>({...(0,rd.bindActionCreators)({openOptions:jr,commitChangesToVariable:Gr,navigateOptions:im},ze),filterOrSearchOptions:(ke,yt="")=>{ze(fd(ke,yt))},toggleAllOptions:ke=>ze((0,Cs.mb)(ke.rootStateKey,(0,kr.iQ)())),toggleOption:(ke,yt,Vt,Zt)=>ze((0,Cs.mb)(ke.rootStateKey,(0,kr._M)({option:yt,clearOthers:Vt,forceSelect:Zt})))}),k=(ze,ke)=>{const{rootStateKey:yt}=ke.variable;return yt?{picker:(0,As.AE)(yt,ze).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:kr.yy})},X=(0,fo.connect)(k,_);class pe extends m.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Ba.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(ke,yt)=>{((0,js.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(ke,yt)},this.onToggleSingleValueVariable=(ke,yt)=>{this.props.toggleOption((0,Ba.yQ)(this.props.variable),ke,yt,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(ke,yt)=>{this.props.toggleOption((0,Ba.yQ)(this.props.variable),ke,yt,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Ba.yQ)(this.props.variable))},this.onFilterOrSearchOptions=ke=>{this.props.filterOrSearchOptions((0,Ba.yQ)(this.props.variable),ke)},this.onNavigate=(ke,yt)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,ke,yt)},this.onCancel=()=>{ni().cancelRequest((0,Ba.yQ)(this.props.variable))}}render(){const{variable:ke,picker:yt}=this.props,Vt=yt.id===ke.id;return m.createElement("div",{className:"variable-link-wrapper"},Vt?this.renderOptions(yt):this.renderLink(ke))}renderLink(ke){const yt=tm(ke),Vt=ke.state===Sr.Gu.Loading;return m.createElement(sm,{id:Ar.IG+ke.id,text:yt,onClick:this.onShowOptions,loading:Vt,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(ke){const{id:yt}=this.props.variable;return m.createElement(ku.L,{onClick:this.onHideOptions},m.createElement(am,{id:Ar.IG+yt,value:ke.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${yt}`}),m.createElement(Gl,{values:ke.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:ke.highlightIndex,multi:ke.multi,selectedValues:ke.selectedValues,id:`options-${yt}`}))}}const Se=X(pe);return Se.displayName="OptionsPicker",Se};var si=e(57052);class pd extends m.PureComponent{constructor(){super(...arguments),this.onChange=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value})},this.onBlur=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value,updateOptions:!0})}}render(){return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Constant options"),m.createElement(si.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const lm={...or.Eg,type:"constant",hide:or.bU.hideVariable,query:"",current:{},options:[]},jl=(0,Ro.oM)({name:"templating/constant",initialState:Ao.s,reducers:{createConstantOptionsFromQuery:(_,k)=>{const X=(0,As.ir)(_,k.payload.id);X.type==="constant"&&(X.options=[{text:X.query.trim(),value:X.query.trim(),selected:!1}])}}}),cm=jl.reducer,{createConstantOptionsFromQuery:dm}=jl.actions,um=_=>async k=>{const{rootStateKey:X}=_;await k((0,Cs.mb)(X,dm((0,Ba.Y6)(_)))),await k((0,cr.xQ)(_))},Yl=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:lm,reducer:cm,picker:ai(),editor:pd,dependsOn:()=>!1,setValue:async(_,k,X=!1)=>{await(0,Ws.WI)((0,cr.Fz)((0,Ba.yQ)(_),k,X))},setValueFromUrl:async(_,k)=>{await(0,Ws.WI)((0,cr.Ci)((0,Ba.yQ)(_),k))},updateOptions:async _=>{await(0,Ws.WI)(um((0,Ba.yQ)(_)))},getSaveModel:_=>{const{index:k,id:X,state:pe,global:Se,current:ze,options:ke,rootStateKey:yt,...Vt}=(0,v.cloneDeep)(_);return Vt},getValueForUrl:_=>_.current.value,beforeAdding:_=>{const{current:k,options:X,query:pe,...Se}=(0,v.cloneDeep)(_),ze={selected:!0,text:pe,value:pe};return{...Se,current:ze,options:[ze],query:pe}}});var rl=e(588),Si=e(58255);function Lo({value:_,name:k,description:X,onChange:pe,ariaLabel:Se}){const ze=(0,rl.Me)();return m.createElement(Si.X,{id:ze,label:k,description:X,value:_,onChange:pe,"aria-label":Se})}const Bo=({onMultiChanged:_,onPropChange:k,variable:X})=>{const pe=(0,m.useCallback)(ke=>{_((0,Ba.yQ)(X),ke.target.checked)},[_,X]),Se=(0,m.useCallback)(ke=>{k({propName:"includeAll",propValue:ke.target.checked})},[k]),ze=(0,m.useCallback)(ke=>{k({propName:"allValue",propValue:ke.currentTarget.value})},[k]);return m.createElement(on.wc,{spacing:"md",height:"inherit"},m.createElement(Lo,{value:X.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:pe}),m.createElement(Lo,{value:X.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:Se}),X.includeAll&&m.createElement(si.V,{value:X.allValue??"",onChange:ze,name:"Custom all value",placeholder:"blank = auto",testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};Bo.displayName="SelectionOptionsEditor";var hd=e(49993);class mm extends m.PureComponent{constructor(){super(...arguments),this.onChange=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value})},this.onSelectionOptionsChange=async({propName:k,propValue:X})=>{this.props.onPropChange({propName:k,propValue:X,updateOptions:!0})},this.onBlur=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value,updateOptions:!0})}}render(){return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Custom options"),m.createElement(hd.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),m.createElement(so.e,null,"Selection options"),m.createElement(Bo,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const fm=(_,k)=>({}),Ql={changeVariableMultiValue:cr.Z7},gm=Ec(mm,fm,Ql),pm={...or.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},_l=(0,Ro.oM)({name:"templating/custom",initialState:Ao.s,reducers:{createCustomOptionsFromQuery:(_,k)=>{const X=(0,As.ir)(_,k.payload.id);if(X.type!=="custom")return;const{includeAll:pe,query:Se}=X,ke=(Se.match(/(?:\\,|[^,])+/g)??[]).map(yt=>{yt=yt.replace(/\\,/g,",");const Vt=/^(.+)\s:\s(.+)$/g.exec(yt)??[];if(Vt.length===3){const[,Zt,an]=Vt;return{text:Zt.trim(),value:an.trim(),selected:!1}}else return{text:yt.trim(),value:yt.trim(),selected:!1}});pe&&ke.unshift({text:Ar.xk,value:Ar.r2,selected:!1}),X.options=ke}}}),hm=_l.reducer,{createCustomOptionsFromQuery:vd}=_l.actions,Ed=_=>async k=>{const{rootStateKey:X}=_;await k((0,Cs.mb)(X,vd((0,Ba.Y6)(_)))),await k((0,cr.xQ)(_))},Zl=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:pm,reducer:hm,picker:ai(),editor:gm,dependsOn:()=>!1,setValue:async(_,k,X=!1)=>{await(0,Ws.WI)((0,cr.Fz)((0,Ba.yQ)(_),k,X))},setValueFromUrl:async(_,k)=>{await(0,Ws.WI)((0,cr.Ci)((0,Ba.yQ)(_),k))},updateOptions:async _=>{await(0,Ws.WI)(Ed((0,Ba.yQ)(_)))},getSaveModel:_=>{const{index:k,id:X,state:pe,global:Se,rootStateKey:ze,...ke}=(0,v.cloneDeep)(_);return ke},getValueForUrl:_=>(0,Ba.HY)(_)?Ar.xk:_.current.value});var ol=e(83704);const il={...or.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:or.Bd.onDashboardLoad},yd=(0,Ro.oM)({name:"templating/datasource",initialState:Ao.s,reducers:{createDataSourceOptions:(_,k)=>{const{sources:X,regex:pe}=k.payload.data,Se=[],ze=(0,As.ir)(_,k.payload.id);if(ze.type==="datasource"){for(let ke=0;ke<X.length;ke++){const yt=X[ke];yt.meta.id===ze.query&&(Pd(yt,pe)&&Se.push({text:yt.name,value:yt.name,selected:!1}),vm(yt,pe)&&Se.push({text:"default",value:"default",selected:!1}))}Se.length===0&&Se.push({text:"No data sources found",value:"",selected:!1}),ze.includeAll&&Se.unshift({text:Ar.xk,value:Ar.r2,selected:!1}),ze.options=Se}}}});function Pd(_,k){return k?k.exec(_.name):!0}function vm(_,k){return _.isDefault?k?k.exec("default"):!0:!1}const Zm=yd.reducer,{createDataSourceOptions:ll}=yd.actions,Cd=(_,k={getDatasourceSrv:u.ak})=>async(X,pe)=>{const{rootStateKey:Se}=_,ze=k.getDatasourceSrv().getList({metrics:!0,variables:!1}),ke=(0,As.E0)(_,pe());if(ke.type!=="datasource")return;let yt;ke.regex&&(yt=(0,yi.J)().replace(ke.regex,void 0,"regex"),yt=(0,ys.jO)(yt)),X((0,Cs.mb)(Se,ll((0,Ba.Y6)(_,{sources:ze,regex:yt})))),await X((0,cr.xQ)(_))},Em=(_,k={getDatasourceSrv:u.ak})=>X=>{const pe=k.getDatasourceSrv().getList({metrics:!0,variables:!0}),Se=(0,v.chain)(pe).uniqBy("meta.id").map(ze=>({text:ze.meta.name,value:ze.meta.id})).value();Se.unshift({text:"",value:""}),X((0,Cs.mb)(_,(0,Jr.z7)({dataSourceTypes:Se})))},ym=(_,k)=>{const{variable:{rootStateKey:X}}=k;if(!X)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Ul(Jr.PF)};const{editor:pe}=(0,As.AE)(X,_);return{extended:Ul(pe)}},Dd={initDataSourceVariableEditor:Em,changeVariableMultiValue:cr.Z7},bd=(0,fo.connect)(ym,Dd);class Pm extends m.PureComponent{constructor(){super(...arguments),this.onRegExChange=k=>{this.props.onPropChange({propName:"regex",propValue:k.currentTarget.value})},this.onRegExBlur=k=>{this.props.onPropChange({propName:"regex",propValue:k.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:k,propName:X})=>{this.props.onPropChange({propName:X,propValue:k,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:k}=this.props;if(!k?.dataSourceTypes.length)return"";const X=k.dataSourceTypes.find(Se=>Se.value===this.props.variable.query);return(X?X.value:k.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=k=>{this.props.onPropChange({propName:"query",propValue:k.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:k}=this.props.variable;if(!k){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(k)}render(){const{variable:k,extended:X,changeVariableMultiValue:pe}=this.props,Se=X?.dataSourceTypes?.length?X.dataSourceTypes?.map(ke=>({value:ke.value??"",label:ke.text})):[],ze=Se.find(ke=>ke.value===k.query)??Se[0];return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Data source options"),m.createElement(ol.u,{name:"Type",value:ze,options:Se,onChange:this.onDataSourceTypeChanged,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),m.createElement(si.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:m.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",m.createElement("br",null),m.createElement("br",null),"Example: ",m.createElement("code",null,"/^prod/"))}),m.createElement(so.e,null,"Selection options"),m.createElement(Bo,{variable:k,onPropChange:this.onSelectionOptionsChange,onMultiChanged:pe}))}}const Jm=bd(Pm),Xm=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:il,reducer:Zm,picker:ai(),editor:Jm,dependsOn:(_,k)=>_.regex?(0,Ba.QI)(_.regex,k.name):!1,setValue:async(_,k,X=!1)=>{await(0,Ws.WI)((0,cr.Fz)((0,Ba.yQ)(_),k,X))},setValueFromUrl:async(_,k)=>{await(0,Ws.WI)((0,cr.Ci)((0,Ba.yQ)(_),k))},updateOptions:async _=>{await(0,Ws.WI)(Cd((0,Ba.yQ)(_)))},getSaveModel:_=>{const{index:k,id:X,state:pe,global:Se,rootStateKey:ze,...ke}=(0,v.cloneDeep)(_);return{...ke,options:[]}},getValueForUrl:_=>(0,Ba.HY)(_)?Ar.xk:_.current.value});var xd=e(69155);const Jl=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(_=>({label:`${_}`,value:_})),cl=m.memo(({onPropChange:_,variable:k})=>{const X=Zt=>{_({propName:"auto",propValue:Zt.target.checked,updateOptions:!0})},pe=Zt=>{_({propName:"query",propValue:Zt.currentTarget.value})},Se=Zt=>{_({propName:"query",propValue:Zt.currentTarget.value,updateOptions:!0})},ze=Zt=>{_({propName:"auto_count",propValue:Zt.value,updateOptions:!0})},ke=Zt=>{_({propName:"auto_min",propValue:Zt.currentTarget.value,updateOptions:!0})},yt=Jl.find(Zt=>Zt.value===k.auto_count)??Jl[0],Vt=(0,lt.wW)(ri);return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Interval options"),m.createElement(si.V,{value:k.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:pe,onBlur:Se,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),m.createElement(Lo,{value:k.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:X}),k.auto&&m.createElement("div",{className:Vt.autoFields},m.createElement(ol.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:yt,options:Jl,onChange:ze,width:9}),m.createElement(si.V,{value:k.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:ke,width:11})))});cl.displayName="IntervalVariableEditor";function ri(_){return{autoFields:(0,se.css)({marginTop:_.spacing(2),display:"flex",flexDirection:"column"})}}var oi=e(28674);const Cm={...or.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:or.Bd.onTimeRangeChanged,current:{}},Sd=(0,Ro.oM)({name:"templating/interval",initialState:Ao.s,reducers:{createIntervalOptions:(_,k)=>{const X=(0,As.ir)(_,k.payload.id);if(X.type!=="interval")return;const pe=(0,v.map)(X.query.match(/(["'])(.*?)\1|\w+/g),Se=>(Se=Se.replace(/["']+/g,""),{text:Se.trim(),value:Se.trim(),selected:!1}));X.auto&&pe.length&&pe[0].text!=="auto"&&pe.unshift({text:"auto",value:"$__auto_interval_"+X.name,selected:!1}),X.options=pe}}}),Dm=Sd.reducer,{createIntervalOptions:Md}=Sd.actions,Xl=_=>async k=>{const{rootStateKey:X}=_;await k((0,Cs.mb)(X,Md((0,Ba.Y6)(_)))),await k(Mi(_)),await k((0,cr.xQ)(_))},Mi=(_,k={calculateInterval:Xi.calculateInterval,getTimeSrv:Qo.$t,templateSrv:(0,oi.J)()})=>(X,pe)=>{const Se=(0,As.E0)(_,pe());if(Se.type==="interval"&&Se.auto){const ze=k.calculateInterval(k.getTimeSrv().timeRange(),Se.auto_count,Se.auto_min);k.templateSrv.setGrafanaVariable("$__auto_interval_"+Se.name,ze.interval),k.templateSrv.setGrafanaVariable("$__auto_interval",ze.interval)}},Xr=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Cm,reducer:Dm,picker:ai(),editor:cl,dependsOn:()=>!1,setValue:async(_,k,X=!1)=>{await(0,Ws.WI)(Mi((0,Ba.yQ)(_))),await(0,Ws.WI)((0,cr.Fz)((0,Ba.yQ)(_),k,X))},setValueFromUrl:async(_,k)=>{await(0,Ws.WI)(Mi((0,Ba.yQ)(_))),await(0,Ws.WI)((0,cr.Ci)((0,Ba.yQ)(_),k))},updateOptions:async _=>{await(0,Ws.WI)(Xl((0,Ba.yQ)(_)))},getSaveModel:_=>{const{index:k,id:X,state:pe,global:Se,rootStateKey:ze,...ke}=(0,v.cloneDeep)(_);return ke},getValueForUrl:_=>_.current.value});var Td=e(69273);const No=[{label:"On dashboard load",value:Td.Bd.onDashboardLoad},{label:"On time range change",value:Td.Bd.onTimeRangeChanged}];function ql({onChange:_,refresh:k}){const X=(0,m.useMemo)(()=>No.find(pe=>pe.value===k)?.value??No[0].value,[k]);return m.createElement(la.g,{label:"Refresh",description:"When to update the values of this variable"},m.createElement(fe.S,{options:No,onChange:_,value:X}))}const ec=[{label:"Disabled",value:or.$U.disabled},{label:"Alphabetical (asc)",value:or.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:or.$U.alphabeticalDesc},{label:"Numerical (asc)",value:or.$U.numericalAsc},{label:"Numerical (desc)",value:or.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:or.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:or.$U.alphabeticalCaseInsensitiveDesc}];function Od({onChange:_,sort:k}){const X=(0,m.useMemo)(()=>ec.find(pe=>pe.value===k)??ec[0],[k]);return m.createElement(ol.u,{name:"Sort",description:"How to sort the values of this variable",value:X,options:ec,onChange:_,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Id=e(53376),Rd=e(77599),io=e(95125);async function Ti(_,k=xr.nL){if((0,js.d7)(_))return _.variables.editor;if((0,js.X7)(_)){const X=await k(_.meta);if(!X.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return X.components.QueryEditor??null}return(0,js.Ju)(_)?Oi:(0,js.R)(_)?(await k(_.meta)).components.VariableQueryEditor??io.R:null}function Oi({datasource:_,query:k,onChange:X}){const pe=(0,m.useCallback)(Se=>{X({refId:"StandardVariableQuery",query:Se})},[X]);return m.createElement(io.R,{query:k.query,onChange:pe,datasource:_,templateSrv:(0,yi.J)()})}function Ad(_,k,X){return{next:Se=>{if(Se.state===Sr.Gu.Error){X.unsubscribe(),k(Se.error);return}if(Se.state===Sr.Gu.Done){X.unsubscribe(),_();return}},error:Se=>{X.unsubscribe(),k(Se)},complete:()=>{X.unsubscribe(),_()}}}const Ld=(_,k)=>async(X,pe)=>{try{const{rootStateKey:Se}=_;if(!(0,Ba.A3)(Se,pe()))return;const ze=(0,As.E0)(_,pe());if(ze.type!=="query")return;(0,As.AE)(Se,pe()).editor.id===ze.id&&X((0,Cs.mb)(Se,(0,Jr.PV)({errorProp:"update"})));const ke=await(0,L.F)().get(ze.datasource??"");await new Promise((yt,Vt)=>{const Zt=new Id.w0,an=Ad(yt,Vt,Zt),En=ni().getResponse(_).subscribe(an);Zt.add(En),ni().queueRequest({identifier:_,datasource:ke,searchFilter:k})})}catch(Se){if(Se instanceof Error){const ze=(0,Rd.P)(Se),{rootStateKey:ke}=_;throw(0,As.AE)(ke,pe()).editor.id===_.id&&X((0,Cs.mb)(ke,(0,Jr.Sg)({errorProp:"update",errorText:ze.message}))),ze}}},Bd=_=>async(k,X)=>{const pe=(0,As.E0)(_,X());pe.type==="query"&&await k(Nd((0,Ba.yQ)(pe),pe.datasource))},Nd=(_,k)=>async(X,pe)=>{try{const{rootStateKey:Se}=_,{editor:ze}=(0,As.AE)(Se,pe()),yt=el(ze)?.dataSource,Vt=await(0,L.F)().get(k??"");yt&&yt.type!==Vt?.type&&X((0,Cs.mb)(Se,(0,ro.Pl)((0,Ba.Y6)(_,{propName:"query",propValue:""}))));const Zt=await Ti(Vt);X((0,Cs.mb)(Se,(0,Jr.z7)({dataSource:Vt,VariableQueryEditor:Zt})))}catch(Se){console.error(Se)}},dl=(_,k,X)=>async(pe,Se)=>{const{rootStateKey:ze}=_,ke=(0,As.E0)(_,Se());if(ke.type==="query"){if(Ud(ke.name,k)){const yt="Query cannot contain a reference to itself. Variable: $"+ke.name;pe((0,Cs.mb)(ze,(0,Jr.Sg)({errorProp:"query",errorText:yt})));return}pe((0,Cs.mb)(ze,(0,Jr.PV)({errorProp:"query"}))),pe((0,Cs.mb)(ze,(0,ro.Pl)((0,Ba.Y6)(_,{propName:"query",propValue:k})))),X!==void 0?pe((0,Cs.mb)(ze,(0,ro.Pl)((0,Ba.Y6)(_,{propName:"definition",propValue:X})))):typeof k=="string"&&pe((0,Cs.mb)(ze,(0,ro.Pl)((0,Ba.Y6)(_,{propName:"definition",propValue:k})))),await pe((0,cr.Rk)(_))}};function Ud(_,k){if(typeof k=="string"&&k.match(new RegExp("\\$"+_+"(/| |$)")))return!0;const X=wd(k);for(let pe in X)if(X.hasOwnProperty(pe)){const Se=X[pe];if(typeof Se=="string"&&Se.match(new RegExp("\\$"+_+"(/| |$)")))return!0}return!1}function wd(_){return typeof _!="object"||_===null?{query:_}:Object.keys(_).reduce((pe,Se)=>{const ze=_[Se];if(typeof ze!="object"||ze===null)return pe[Se]=ze,pe;const ke=wd(ze);for(let yt in ke)ke.hasOwnProperty(yt)&&(pe[`${Se}_${yt}`]=ke[yt]);return pe},{})}const Wd=(_,k)=>{const{rootStateKey:X}=k.variable;if(!X)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:el(Jr.PF)};const{editor:pe}=(0,As.AE)(X,_);return{extended:el(pe)}},bm={initQueryVariableEditor:Bd,changeQueryVariableDataSource:Nd,changeQueryVariableQuery:dl,changeVariableMultiValue:cr.Z7},Fd=(0,fo.connect)(Wd,bm);class $d extends m.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=k=>{this.props.onPropChange({propName:"datasource",propValue:k.isDefault?null:(0,Jc.iU)(k)})},this.onLegacyQueryChange=async(k,X)=>{this.props.variable.query!==k&&this.props.changeQueryVariableQuery((0,Ba.yQ)(this.props.variable),k,X)},this.onQueryChange=async k=>{if(this.props.variable.query!==k){let X="";k&&k.hasOwnProperty("query")&&typeof k.query=="string"&&(X=k.query),this.props.changeQueryVariableQuery((0,Ba.yQ)(this.props.variable),k,X)}},this.onRegExChange=k=>{this.setState({regex:k.currentTarget.value})},this.onRegExBlur=async k=>{const X=k.currentTarget.value;this.props.variable.regex!==X&&this.props.onPropChange({propName:"regex",propValue:X,updateOptions:!0})},this.onRefreshChange=k=>{this.props.onPropChange({propName:"refresh",propValue:k})},this.onSortChange=async k=>{this.props.onPropChange({propName:"sort",propValue:k.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:k,propName:X})=>{this.props.onPropChange({propName:X,propValue:k,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:k,variable:X}=this.props;if(!k||!k.dataSource||!k.VariableQueryEditor)return null;const pe=k.dataSource,Se=k.VariableQueryEditor;let ze=X.query;if(typeof ze=="string"?ze=ze||(pe.variables?.getDefaultQuery?.()??""):ze={...pe.variables?.getDefaultQuery?.(),...X.query},(0,js.NX)(Se,pe))return m.createElement(la.g,{label:"Query"},m.createElement(Se,{datasource:pe,query:ze,templateSrv:(0,yi.J)(),onChange:this.onLegacyQueryChange}));const ke=(0,Qo.$t)().timeRange();return(0,js.$7)(Se,pe)?m.createElement(la.g,{label:"Query"},m.createElement(Se,{datasource:pe,query:ze,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Sr.Gu.Done,timeRange:ke},range:ke,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Ba.yQ)(this.props.variable))}componentDidUpdate(k){k.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Ba.yQ)(this.props.variable),this.props.variable.datasource)}render(){return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Query options"),m.createElement(la.g,{label:"Data source",htmlFor:"data-source-picker"},m.createElement(Xc.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),m.createElement(hd.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:m.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",m.createElement("br",null),"Named capture groups can be used to separate the display text and value (",m.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),m.createElement(Od,{onChange:this.onSortChange,sort:this.props.variable.sort}),m.createElement(ql,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),m.createElement(so.e,null,"Selection options"),m.createElement(Bo,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Ii=Fd($d),ul=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Qu,reducer:id,picker:ai(),editor:Ii,dependsOn:(_,k)=>(0,Ba.QI)(_.query,_.datasource?.uid,_.regex,k.name),setValue:async(_,k,X=!1)=>{await(0,Ws.WI)((0,cr.Fz)((0,Ba.yQ)(_),k,X))},setValueFromUrl:async(_,k)=>{await(0,Ws.WI)((0,cr.Ci)((0,Ba.yQ)(_),k))},updateOptions:async(_,k)=>{await(0,Ws.WI)(Ld((0,Ba.yQ)(_),k))},getSaveModel:_=>{const{index:k,id:X,state:pe,global:Se,queryValue:ze,rootStateKey:ke,...yt}=(0,v.cloneDeep)(_);return _.refresh!==or.Bd.never?{...yt,options:[]}:yt},getValueForUrl:_=>(0,Ba.HY)(_)?Ar.xk:_.current.value}),Ri=()=>({id:"system",description:"",name:"system",initialState:{...or.Eg,type:"system",hide:or.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Sr.Gu.Done},reducer:(_,k)=>_,picker:null,editor:null,dependsOn:()=>!1,setValue:async(_,k,X=!1)=>{},setValueFromUrl:async(_,k)=>{},updateOptions:async _=>{},getSaveModel:_=>({}),getValueForUrl:_=>""});function tc({onPropChange:_,variable:{query:k}}){const X=(0,m.useCallback)((ze,ke)=>{ze.preventDefault(),_({propName:"originalQuery",propValue:ze.currentTarget.value,updateOptions:!1}),_({propName:"query",propValue:ze.currentTarget.value,updateOptions:ke})},[_]),pe=(0,m.useCallback)(ze=>X(ze,!1),[X]),Se=(0,m.useCallback)(ze=>X(ze,!0),[X]);return m.createElement(m.Fragment,null,m.createElement(so.e,null,"Text options"),m.createElement(si.V,{value:k,name:"Default value",placeholder:"default value, if any",onChange:pe,onBlur:Se,width:30,testId:ia.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function xm({variable:_,onVariableChange:k,readOnly:X}){const pe=(0,_r.useDispatch)(),[Se,ze]=(0,m.useState)(_.current.value);(0,m.useEffect)(()=>{ze(_.current.value)},[_]);const ke=(0,m.useCallback)(()=>{if(!_.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(_.current.value!==Se){if(pe((0,Cs.mb)(_.rootStateKey,(0,ro.Pl)((0,Ba.Y6)({id:_.id,type:_.type},{propName:"query",propValue:Se})))),k){k({..._,current:(0,md.Q)(_.current)?{}:{..._.current,value:Se}});return}Jo.z.get(_.type).updateOptions(_)}},[_,Se,pe,k]),yt=(0,m.useCallback)(an=>ze(an.target.value),[ze]),Vt=an=>ke(),Zt=an=>{an.keyCode===13&&(an.preventDefault(),ke())};return m.createElement(me.I,{type:"text",value:Se,onChange:yt,onBlur:Vt,disabled:X,onKeyDown:Zt,placeholder:(0,Hr.t)("variable.textbox.placeholder","Enter variable value"),id:Ar.IG+_.id})}const Sm={...or.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},Ai=(0,Ro.oM)({name:"templating/textbox",initialState:Ao.s,reducers:{createTextBoxOptions:(_,k)=>{const X=(0,As.ir)(_,k.payload.id);if(X.type!=="textbox")return;const pe={text:X.query.trim(),value:X.query.trim(),selected:!1};X.options=[pe],X.current=pe}}}),Mm=Ai.reducer,{createTextBoxOptions:qm}=Ai.actions,Lr=_=>async(k,X)=>{const{rootStateKey:pe,type:Se}=_;k((0,Cs.mb)(pe,qm((0,Ba.Y6)(_))));const ze=(0,As.E0)(_,X());ze.type==="textbox"&&await Jo.z.get(Se).setValue(ze,ze.options[0],!0)},Kd=(_,k)=>async(X,pe)=>{const{rootStateKey:Se}=_,ze=(0,As.E0)(_,pe());if(ze.type!=="textbox")return;const ke=(0,Ba.Hi)(k);X((0,Cs.mb)(Se,(0,ro.Pl)((0,Ba.Y6)(ze,{propName:"query",propValue:ke})))),await X((0,cr.Ci)((0,Ba.yQ)(ze),ke))},ef=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Sm,reducer:Mm,picker:xm,editor:tc,dependsOn:(_,k)=>!1,setValue:async(_,k,X=!1)=>{await(0,Ws.WI)((0,cr.Fz)((0,Ba.yQ)(_),k,X))},setValueFromUrl:async(_,k)=>{await(0,Ws.WI)(Kd((0,Ba.yQ)(_),k))},updateOptions:async _=>{await(0,Ws.WI)(Lr((0,Ba.yQ)(_)))},getSaveModel:(_,k)=>{const{index:X,id:pe,state:Se,global:ze,originalQuery:ke,rootStateKey:yt,...Vt}=(0,v.cloneDeep)(_);if(_.query!==ke&&!k){const Zt=ke??"",an={selected:!1,text:Zt,value:Zt};return{...Vt,query:Zt,current:an,options:[an]}}return Vt},getValueForUrl:_=>_.current.value,beforeAdding:_=>({...(0,v.cloneDeep)(_),originalQuery:_.query})});var Li=e(22357);C().move=oe.R;const Vd=e(72866),ml=Vd.keys().map(_=>Vd(_));class Uo{async init(){try{parent.postMessage("GrafanaAppInit","*");const k=(0,Hr.uC)(Q.ZP.bootData.user.language);(0,S.jW)($i.ae),Hd(),Tm(),(0,P.i_)(Q.ZP.bootData.user.locale),(0,P.Ls)(Q.ZP.bootData.user.weekStart),(0,I.L)(xu.$),(0,V.t)(Cl),(0,G.$)(Rl.Z),(0,U.x)(R.E1),(0,b.K)(()=>Q.ZP.bootData.user.timezone),bu(),(0,F.Xw)(Hs.Z),await k,nc(),(0,Li.x)(),zd(),M.S.setInit(fi.u),M.N.setInit(fi.l),x.Z.setInit(Wi),Jo.z.setInit(()=>[ul(),Zl(),ef(),Yl(),Xm(),Xr(),sd(),Ri()]),A.F.setInit(nu),(0,B.pD)(()=>new Wu),em(new qu),(0,B.Iw)(Nl.v7),(0,K.Qf)({importPanelPlugin:Uu.Ub,getPanelPluginFromCache:Uu.q1}),T.u.initialize({config:Q.ZP,getTimeRangeForUrl:(0,Qo.$t)().timeRangeForUrl,getVariablesUrlParams:xd.c}),document.addEventListener("click",Dl);const X=new u.ND;X.init(Q.ZP.datasources,Q.ZP.defaultDatasource),(0,L.w)(X),Fu(),new Wr().init();const Se=await jc(Q.ZP.apps),ze=an=>Lu({...an,registry:Ll(Se)});(0,N.o)(ze);const ke=R.E1.getSearchObject(),yt=new yl,Vt=new vu(R.E1,yt);yt.setKioskModeFromUrl(ke.kiosk),this.context={backend:$i.ae,location:R.E1,chrome:yt,keybindings:Vt,config:Q.ZP},(0,D.s)(document.getElementById("reactRoot")).render(m.createElement(au.Or,{app:this}))}catch(k){console.error("Failed to start Grafana",k),window.__grafana_load_failed()}}}function nc(){ml.length>0&&ml[0].addExtensionReducers()}function zd(){ml.length>0&&ml[0].init()}function Hd(){(0,z.tz)(new bc({debug:!1})),window.addEventListener("load",_=>{const k="frontend_boot_load_time_seconds",X="frontend_boot_js_done_time_seconds",pe="frontend_boot_css_time_seconds";performance&&(performance.mark(k),ii("first-paint","frontend_boot_","_time_seconds"),ii("first-contentful-paint","frontend_boot_","_time_seconds"),ii(k),ii(X),ii(pe))}),no.Vt.user.orgRole!==""&&(0,z.e6)(new xc({})),Q.ZP.sentry.enabled&&(0,z.e6)(new Ac({...Q.ZP.sentry,user:Q.ZP.bootData.user,buildInfo:Q.ZP.buildInfo})),Q.ZP.grafanaJavascriptAgent.enabled&&(0,z.e6)(new zi({...Q.ZP.grafanaJavascriptAgent,app:{version:Q.ZP.buildInfo.version,environment:Q.ZP.buildInfo.env},buildInfo:Q.ZP.buildInfo,user:{id:String(Q.ZP.bootData.user?.id),email:Q.ZP.bootData.user?.email}})),Q.ZP.googleAnalyticsId&&(0,z.e6)(new Sc({googleAnalyticsId:Q.ZP.googleAnalyticsId})),Q.ZP.googleAnalytics4Id&&(0,z.e6)(new br({googleAnalyticsId:Q.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:Q.ZP.googleAnalytics4SendManualPageViews})),Q.ZP.rudderstackWriteKey&&Q.ZP.rudderstackDataPlaneUrl&&(0,z.e6)(new Yo({writeKey:Q.ZP.rudderstackWriteKey,dataPlaneUrl:Q.ZP.rudderstackDataPlaneUrl,user:Q.ZP.bootData.user,sdkUrl:Q.ZP.rudderstackSdkUrl,configUrl:Q.ZP.rudderstackConfigUrl})),Q.ZP.applicationInsightsConnectionString&&(0,z.e6)(new cu({connectionString:Q.ZP.applicationInsightsConnectionString,endpointUrl:Q.ZP.applicationInsightsEndpointUrl}))}function Tm(){(0,H.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function ii(_,k="",X=""){const pe=C().first(performance.getEntriesByName(_));if(pe){const Se=pe.name.replace(/-/g,"_");Um(`${k}${Se}${X}`,Math.round(pe.startTime)/1e3)}}const kd=new Uo;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,kd.init()},39031:(Y,O,e)=>{"use strict";e.d(O,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>o,sK:()=>l});var t=(f=>(f.Active="active",f.Expired="expired",f.Pending="pending",f))(t||{}),n=(f=>(f.Unprocessed="unprocessed",f.Active="active",f.Suppressed="suppressed",f))(n||{}),o=(f=>(f.equal="=",f.notEqual="!=",f.regex="=~",f.notRegex="!~",f))(o||{}),s=(f=>(f.Internal="internal",f.External="external",f.All="all",f))(s||{}),l=(f=>(f.cortex="cortex",f.mimir="mimir",f.prometheus="prometheus",f))(l||{})},53552:(Y,O,e)=>{"use strict";e.d(O,{$5:()=>o,MQ:()=>s,Rv:()=>d,az:()=>f});const t=Object.freeze([0,0]),n={statistics:[]};var o=(c=>(c[c.Query=1]="Query",c[c.Search=0]="Search",c))(o||{}),s=(c=>(c[c.Builder=0]="Builder",c[c.Code=1]="Code",c))(s||{});const l={parameters:[]};var f=(c=>(c.And="and",c.Function="function",c.FunctionParameter="functionParameter",c.GroupBy="groupBy",c.Operator="operator",c.Or="or",c.Property="property",c))(f||{}),d=(c=>(c.String="string",c))(d||{});const r={logGroupNames:[],logGroups:[],statsGroups:[]}},2868:(Y,O,e)=>{"use strict";e.d(O,{$5:()=>t.$5,KB:()=>n,MQ:()=>t.MQ,wf:()=>o});var t=e(53552),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),o=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(o||{})},79543:(Y,O,e)=>{"use strict";e.d(O,{hD:()=>R,oe:()=>f.o,yl:()=>d,AK:()=>r});var t=e(84946),n=e(89749),o=e(52666),s=e(75849),l=e(9398),f=e(21471);function d(B){return B?typeof B=="string"?B===f.o:"meta"in B&&B.meta.name===f.o||B.uid===f.o:!1}function r(B,K){return new t.y(L=>{const N=(0,l.h4)().getCurrent(),z=c(B.queries);if(!z){L.next(a("Missing panel reference ID"));return}const G=N?.getPanelById(z);if(!G){L.next(a("Unknown Panel: "+z));return}const I=G.getQueryRunner(),V=I.getData({withTransforms:Boolean(K?.withTransforms),withFieldConfig:!1}).subscribe({next:H=>{K?.topic===n.w5.Annotations&&(H={...H,series:H.annotations??[],annotations:void 0}),L.next(H)}});if(!G.isInView){const{datasource:H,targets:Q}=G,oe={...B,datasource:H,panelId:z,queries:Q};I.run(oe)}return()=>{V.unsubscribe()}})}function c(B){if(!(!B||!B.length))return B[0].panelId}function a(B){return{state:o.Gu.Error,series:[],request:{},error:{message:B},timeRange:(0,s.JK)()}}var u=e(9892),i=e(588),p=e(64681),g=e.n(p),y=e(66111),E=e(59679),h=e(72648),v=e(24799),C=e(8581),m=e(52081),D=e(2594),P=e(8944),b=e(67487),M=e(72948),x=e(47694),A=e(91162),T=e(36584);function S(B){return JSON.stringify(B)}const U=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function R({panelData:B,queries:K,onChange:L,onRunQueries:N}){const{value:z}=(0,E.Z)(()=>(0,A.ak)().get()),G=K[0],I=(0,y.useMemo)(()=>(0,l.h4)().getCurrent()?.getPanelById(G.panelId??-124134),[G.panelId]),{value:V,loading:H}=(0,E.Z)(async()=>{if(!I)return[];const Z=await(0,A.ak)().get(I.datasource);return Promise.all(I.targets.map(async ne=>{const re=ne.datasource?await(0,A.ak)().get(ne.datasource):Z,ve=re.getQueryDisplayText||S,me=(0,T.t)(B,ne.refId)??B;return{refId:ne.refId,query:ve(ne),name:re.name,img:re.meta.info.logos.small,data:me.series,error:me.error}}))},[B,I]),Q=(0,y.useCallback)(Z=>{L([Z]),N()},[L,N]),oe=(0,y.useCallback)(Z=>{Q({...G,panelId:Z})},[G,Q]),se=(0,y.useCallback)(()=>{Q({...G,withTransforms:!G.withTransforms})},[G,Q]),ie=(0,y.useCallback)(Z=>{Q({...G,topic:Z?n.w5.Annotations:void 0})},[G,Q]),j=(0,y.useCallback)(Z=>{const ne=Z.datasource??z,re=(0,A.ak)().getInstanceSettings(ne)?.name,ve=Z.targets.length;return`${ve} ${g()("query",ve)} to ${re}`},[z]),de=(0,l.h4)().getCurrent(),ce=Boolean(G.withTransforms||I?.transformations?.length),ee=(0,y.useMemo)(()=>de?.panels.filter(Z=>x.ZP.panels[Z.type]&&Z.targets&&Z.id!==de.panelInEdit?.id&&Z.datasource?.uid!==f.o).map(Z=>({value:Z.id,label:Z.title??"Panel "+Z.id,description:j(Z),imgUrl:x.ZP.panels[Z.type].info.logos.small}))??[],[de,j]),le=(0,h.wW)(F),q=(0,i.Me)();if(!de)return null;if(ee.length<1)return y.createElement("p",{className:le.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const fe=ee.find(Z=>Z.value===G.panelId);return y.createElement(y.Fragment,null,y.createElement(v.g,{label:"Source",description:"Use the same results as panel"},y.createElement(C.Ph,{inputId:q,placeholder:"Choose panel",isSearchable:!0,options:ee,value:fe,onChange:Z=>oe(Z.value)})),y.createElement(m.Lh,{height:"auto",wrap:!0,align:"flex-start"},y.createElement(v.g,{label:"Data Source",description:"Use data or annotations from the panel",className:le.horizontalField},y.createElement(D.S,{options:U,value:G.topic===n.w5.Annotations,onChange:ie})),ce&&y.createElement(v.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(P.r,{value:Boolean(G.withTransforms),onChange:se}))),H?y.createElement(b.$,null):y.createElement(y.Fragment,null,V&&Boolean(V.length)&&y.createElement(v.g,{label:"Queries from panel"},y.createElement(m.wc,{spacing:"sm"},V.map((Z,ne)=>y.createElement(M.Z,{key:`DashboardQueryRow-${ne}`},y.createElement(M.Z.Heading,null,Z.refId),y.createElement(M.Z.Figure,null,y.createElement("img",{src:Z.img,alt:Z.name,title:Z.name,width:40})),y.createElement(M.Z.Meta,null,Z.query)))))))}function F(B){return{horizontalField:(0,u.css)({marginRight:B.spacing(2)}),noQueriesText:(0,u.css)({padding:B.spacing(1.25)})}}},21471:(Y,O,e)=>{"use strict";e.d(O,{o:()=>t});const t="-- Dashboard --",n="dashboard"},35821:(Y,O,e)=>{"use strict";e.d(O,{k:()=>gt,e:()=>Te});var t=e(82897),n=e(49372),o=e(59980),s=e(12877),l=e(9471),f=e(59957),d=e(52666),r=e(8891),c=e(53678),a=e(12115),u=e(83881),i=e(22069),p=e(20308),g=e(75118),y=e(54899),E=e(86647),h=e(7592),v=e(9398),C=e(9892),m=e(66111),D=e(72648),P=e(13393),b=e(24799),M=e(8581),x=e(8944),A=e(24357),T=e(70659),S=e(7832),U=e(36365),R=e.n(U),F=e(56808),B=e(52566),K=e(31403),L=e(52081),N=e(4883),z=e(10516),G=e(72505),I=e(39904),V=e(73267),H=e(85419);const Q="time-of-day-picker-panel",oe=({minuteStep:Le=1,showHour:Ye=!0,showSeconds:it=!1,onChange:ht,value:Re,size:ye="auto",disabled:Ce,disabledHours:be,disabledMinutes:We,disabledSeconds:Qe,placeholder:mt,format:vt="HH:mm",defaultValue:rt=void 0,allowEmpty:Ot=!1,width:Et})=>{const Mt=(0,D.wW)(ie),ue=()=>Et?C.css`
        width: ${Et}px;
      `:(0,V.ht)()[ye];return m.createElement(G.Z,{value:Re,defaultValue:rt,onChange:De=>ht(De),showHour:Ye,showSecond:it,format:vt,allowEmpty:Ot,className:(0,C.cx)(ue(),Mt.input),popupClassName:(0,C.cx)(Mt.picker,Q),minuteStep:Le,inputIcon:m.createElement(se,{wrapperStyle:Mt.caretWrapper}),disabled:Ce,disabledHours:be,disabledMinutes:We,disabledSeconds:Qe,placeholder:mt})},se=({wrapperStyle:Le=""})=>m.createElement("div",{className:Le},m.createElement(I.J,{name:"angle-down"})),ie=Le=>{const Ye=Le.components.input.background,it=Le.v1.palette.black,ht=Le.colors.background.secondary,Re=Le.shape.borderRadius(1),ye=Le.components.input.borderColor;return{caretWrapper:C.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${Le.colors.text.secondary};
    `,picker:C.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${Ye};
        border-color: ${ye};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${Le.v1.palette.orange};
            border-radius: ${Re};
          }

          &:hover {
            background: ${ht};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${Le.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${it};
        background-color: ${Ye};
        border-color: ${ye};
        border-radius: ${Re};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${Ye};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:C.css`
      .rc-time-picker-input {
        background-color: ${Ye};
        border-radius: ${Re};
        border-color: ${ye};
        height: ${Le.spacing(4)};

        &:focus {
          ${(0,H.focusCss)(Le)}
        }

        &:disabled {
          background-color: ${Le.colors.action.disabledBackground};
          color: ${Le.colors.action.disabledText};
          border: 1px solid ${Le.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${Le.colors.text.secondary};
      }
    `}},j=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Le,Ye)=>({label:Le,value:Ye+1})),de=({value:Le,onChange:Ye})=>{const it=(0,D.wW)(ce),ht=Date.now(),Re=(0,F.Pr)(Le.timezone??"utc",ht),ye=(0,v.h4)().getCurrent()?.getTimezone()===Le.timezone,[Ce,be]=(0,m.useState)(!1),We=()=>{be(!Ce)},Qe=De=>{if(!De)return;const Ne=R()();if(De){const tt=De.split(":");Ne.set("hour",parseInt(tt[0],10)),Ne.set("minute",parseInt(tt[1],10))}return Ne},mt=()=>{let De="Everyday";return Le.fromDayOfWeek&&!Le.toDayOfWeek&&(De=j[Le.fromDayOfWeek-1].label),De},vt=()=>{const De=m.createElement(m.Fragment,null,m.createElement(z.d,{title:Re?.name}),m.createElement(N.v,{timeZone:Le.timezone,timestamp:ht}));return ye?m.createElement(m.Fragment,null,"Dashboard timezone (",De,")"):De},rt=(De,Ne)=>{const tt=De?De.format("HH:mm"):void 0;Ye(Ne==="from"?{...Le,from:tt}:{...Le,to:tt})},Ot=De=>{Ye({...Le,timezone:De})},Et=De=>{const Ne=De?De.value:void 0,tt=De?Le.toDayOfWeek:void 0;Ye({...Le,fromDayOfWeek:Ne,toDayOfWeek:tt})},Mt=De=>{Ye({...Le,toDayOfWeek:De?De.value:void 0})},ue=()=>Ce?m.createElement(B.O,{value:Le.timezone,includeInternal:!0,onChange:De=>Ot(De),onBlur:()=>be(!1),menuShouldPortal:!0,openMenuOnFocus:!1,width:100,autoFocus:!0}):m.createElement("div",{className:it.timezoneContainer},m.createElement("div",{className:it.timezone},vt()),m.createElement(K.zx,{variant:"secondary",onClick:We,size:"sm"},"Change timezone"));return m.createElement(P.C,{className:it.wrapper},m.createElement(b.g,{label:"From"},m.createElement(L.Lh,{spacing:"xs"},m.createElement(M.Ph,{options:j,isClearable:!0,placeholder:"Everyday",value:Le.fromDayOfWeek??null,onChange:De=>Et(De),width:20}),m.createElement(oe,{value:Qe(Le.from),onChange:De=>rt(De,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),m.createElement(b.g,{label:"To"},m.createElement(L.Lh,{spacing:"xs"},(Le.fromDayOfWeek||Le.toDayOfWeek)&&m.createElement(M.Ph,{options:j,isClearable:!0,placeholder:mt(),value:Le.toDayOfWeek??null,onChange:De=>Mt(De),width:20}),m.createElement(oe,{value:Qe(Le.to),onChange:De=>rt(De,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),m.createElement(b.g,{label:"Timezone"},ue()))},ce=Le=>({wrapper:(0,C.css)({maxWidth:Le.spacing(60),marginBottom:Le.spacing(2)}),timezoneContainer:C.css`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:C.css`
      margin-right: 5px;
    `}),ee="Enabling this returns annotations that match any of the tags specified below",le=m.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),q=[{label:"Dashboard",value:S._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:S._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],fe=[{label:"Annotations & Alerts",value:S.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:S.hR.TimeRegions,description:"Configure a repeating time region"}],Z=[10,50,100,200,300,500,1e3,2e3].map(Le=>({label:String(Le),value:Le}));function ne({query:Le,onChange:Ye}){const it=Le,{limit:ht,matchAny:Re,tags:ye,type:Ce,queryType:be}=it;let We=be??S.hR.Annotations;const Qe=(0,m.useMemo)(()=>(0,v.h4)().dashboard?.getTimezone(),[]),mt=(0,D.wW)(re),vt=De=>Ye({...it,type:De.value}),rt=De=>Ye({...it,limit:De.value}),Ot=De=>Ye({...it,matchAny:De.target.checked}),Et=De=>Ye({...it,tags:De}),Mt=De=>{const Ne={...it,queryType:De.value};Ne.queryType===S.hR.TimeRegions?Ne.timeRegion||(Ne.timeRegion={timezone:Qe}):delete Ne.timeRegion,Ye(Ne)},ue=De=>{Ye({...it,timeRegion:De})};return m.createElement(P.C,{className:mt.container},m.createElement(b.g,{label:"Query type"},m.createElement(M.Ph,{inputId:"grafana-annotations__query-type",options:fe,value:We,onChange:Mt})),We===S.hR.Annotations&&m.createElement(m.Fragment,null,m.createElement(b.g,{label:"Filter by"},m.createElement(M.Ph,{inputId:"grafana-annotations__filter-by",options:q,value:Ce,onChange:vt})),m.createElement(b.g,{label:"Max limit"},m.createElement(M.Ph,{inputId:"grafana-annotations__limit",width:16,options:Z,value:ht,onChange:rt})),Ce===S._$.Tags&&m.createElement(m.Fragment,null,m.createElement(b.g,{label:"Match any",description:ee},m.createElement(x.r,{id:"grafana-annotations__match-any",value:Re,onChange:Ot})),m.createElement(b.g,{label:"Tags",description:le},m.createElement(A.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:Et,tagOptions:T.lK,tags:ye??[]})))),We===S.hR.TimeRegions&&it.timeRegion&&m.createElement(de,{value:it.timeRegion,onChange:ue}))}const re=Le=>({container:(0,C.css)({maxWidth:Le.spacing(60),marginBottom:Le.spacing(2)})});var ve=e(99098),me=e(17804);function Ie(Le,Ye,it,ht){if(!Ye)return;const Re=(0,me.q7)(Ye,it);if(!Re.length)return;const ye=[],Ce=[],be=[],We=Ye.timezone??ht;for(const Qe of Re){let mt=Qe.from,vt=Qe.to;const rt=(0,F.Pr)(We,mt);if(rt){const Ot=rt.offsetInMins*60*1e3;mt+=Ot,vt+=Ot}ye.push(mt),Ce.push(vt),be.push(Le)}return{fields:[{name:"time",type:ve.fS.time,values:ye,config:{}},{name:"timeEnd",type:ve.fS.time,values:Ce,config:{}},{name:"text",type:ve.fS.string,values:be,config:{}}],length:ye.length}}let Ge=100;class gt extends i.CK{constructor(Ye){super(Ye),this.annotations={QueryEditor:ne,prepareAnnotation(it){return it.target=it.target??{type:it.type??S._$.Dashboard,limit:it.limit??100,tags:it.tags??[],matchAny:it.matchAny??!1},it},prepareQuery(it){let ht;if((0,t.isString)(it.datasource)){const Ce=(0,h.p)(it.datasource,{returnDefaultAsNull:!1});Ce&&(ht=Ce)}else ht=it.datasource;const{filter:Re,...ye}=it;return{...ye,refId:it.name,queryType:S.hR.Annotations,datasource:ht}}}}getDefaultQuery(){return{queryType:S.hR.RandomWalk}}query(Ye){const it=[],ht=[],Re=(0,p.J)();for(const ye of Ye.targets){if(ye.queryType===S.hR.Annotations)return(0,n.D)(this.getAnnotations({range:Ye.range,rangeRaw:Ye.range.raw,annotation:ye,dashboard:(0,v.h4)().getCurrent()}));if(!ye.hide){if(ye.queryType===S.hR.Snapshot){it.push((0,o.of)({data:(ye.snapshot??[]).map(Ce=>(0,f.vP)(Ce)),state:d.Gu.Done}));continue}if(ye.queryType===S.hR.TimeRegions){const Ce=Ie("",ye.timeRegion,Ye.range,Ye.timezone);it.push((0,o.of)({data:Ce?[Ce]:[],state:d.Gu.Done}));continue}if(ye.queryType===S.hR.LiveMeasurements){let Ce=Re.replace(ye.channel,Ye.scopedVars);const{filter:be}=ye,We=(0,r.H7)(Ce);if(!(0,r.nU)(We))continue;const Qe={maxLength:Ye.maxDataPoints??500};ye.buffer?(Qe.maxDelta=ye.buffer,Qe.maxLength=Qe.maxLength*2):Ye.rangeRaw?.to==="now"&&(Qe.maxDelta=Ye.range.to.valueOf()-Ye.range.from.valueOf()),it.push((0,g.gj)().getDataStream({key:`${Ye.requestId}.${Ge++}`,addr:We,filter:be,buffer:Qe}))}else ye.queryType||(ye.queryType=S.hR.RandomWalk),ht.push(ye)}}return ht.length&&it.push(super.query({...Ye,targets:ht})),it.length?it.length===1?it[0]:(0,s.T)(...it):(0,o.of)()}listFiles(Ye){return this.query({targets:[{refId:"A",queryType:S.hR.List,path:Ye}]}).pipe((0,l.U)(it=>{const ht=it.data[0]??new c.v;return new a.U(ht)}))}metricFindQuery(Ye){return Promise.resolve([])}async getAnnotations(Ye){const it=Ye.annotation.target;if(it?.queryType===S.hR.TimeRegions){const be=Ie(Ye.annotation.name,it.timeRegion,Ye.range,(0,v.h4)().getCurrent()?.timezone);return Promise.resolve({data:be?[be]:[]})}const ht=Ye.annotation,Re=ht.target,ye={from:Ye.range.from.valueOf(),to:Ye.range.to.valueOf(),limit:Re.limit,tags:Re.tags,matchAny:Re.matchAny};if(Re.type===S._$.Dashboard){if(!Ye.dashboard.uid)return Promise.resolve({data:[]});ye.dashboardUID=Ye.dashboard.uid,delete ye.tags}else{if(!Array.isArray(Re.tags)||Re.tags.length===0)return Promise.resolve({data:[]});const be=(0,p.J)(),We="__delimiter__",Qe=[];for(const mt of ye.tags){const vt=be.replace(mt,{},rt=>typeof rt=="string"?rt:rt.join(We));for(const rt of vt.split(We))Qe.push(rt)}ye.tags=Qe}const Ce=await(0,y.i)().get("/api/annotations",ye,`grafana-data-source-annotations-${ht.name}-${Ye.dashboard?.uid}`);return{data:[(0,u.g0)(Ce)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Te(){return await(0,E.F)().get("-- Grafana --")}},7832:(Y,O,e)=>{"use strict";e.d(O,{_$:()=>o,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.TimeRegions="timeRegions",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var o=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(o||{})},56991:(Y,O,e)=>{"use strict";e.d(O,{L:()=>s});var t=e(82897),n=e.n(t),o=e(66111);function s(){const l=(0,o.useRef)(null);return l.current==null&&(l.current=(0,t.uniqueId)()),l.current}},96606:(Y,O,e)=>{"use strict";e.d(O,{Wp:()=>f,c6:()=>r,xM:()=>s});var t=e(53678),n=e(99098),o=e(95638);function s(c){const a=c.spans.map(i=>l(i,c.processes)),u=new t.v({fields:[{name:"traceID",type:n.fS.string},{name:"spanID",type:n.fS.string},{name:"parentSpanID",type:n.fS.string},{name:"operationName",type:n.fS.string},{name:"serviceName",type:n.fS.string},{name:"serviceTags",type:n.fS.other},{name:"startTime",type:n.fS.number},{name:"duration",type:n.fS.number},{name:"logs",type:n.fS.other},{name:"tags",type:n.fS.other},{name:"warnings",type:n.fS.other},{name:"stackTraces",type:n.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const i of a)u.add(i);return u}function l(c,a){return{spanID:c.spanID,traceID:c.traceID,parentSpanID:c.references?.find(u=>u.refType==="CHILD_OF")?.spanID,operationName:c.operationName,startTime:c.startTime/1e3,duration:c.duration/1e3,logs:c.logs.map(u=>({...u,timestamp:u.timestamp/1e3})),tags:c.tags,warnings:c.warnings??void 0,stackTraces:c.stackTraces,serviceName:a[c.processID].serviceName,serviceTags:a[c.processID].tags}}function f(c,a){const u=new t.v({fields:[{name:"traceID",type:n.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:a.uid,datasourceName:a.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:n.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:n.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:n.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),i=c.map(d).sort((p,g)=>g?.startTime-p?.startTime);for(const p of i)u.add(p);return u}function d(c){const a=(0,o.transformTraceData)(c);if(a)return{traceID:a.traceID,startTime:a.startTime/1e3,duration:a.duration,traceName:a.traceName}}function r(c){let a={traceID:"",spans:[],processes:{},warnings:null},u=[];for(let i=0;i<c.length;i++){const p=c.get(i);a.traceID||(a.traceID=p.traceID),u.find(g=>g===p.serviceName)||(u.push(p.serviceName),a.processes[`p${u.length}`]={serviceName:p.serviceName,tags:p.serviceTags}),a.spans.push({traceID:p.traceID,spanID:p.spanID,duration:p.duration*1e3,references:p.parentSpanID?[{refType:"CHILD_OF",spanID:p.parentSpanID,traceID:p.traceID}]:[],flags:0,logs:p.logs.map(g=>({...g,timestamp:g.timestamp*1e3})),operationName:p.operationName,processID:Object.keys(a.processes).find(g=>a.processes[g].serviceName===p.serviceName)||"",startTime:p.startTime*1e3,tags:p.tags,warnings:p.warnings?p.warnings:null})}return{data:[a],total:0,limit:0,offset:0,errors:null}}},19370:(Y,O,e)=>{"use strict";e.d(O,{$5:()=>t,EH:()=>s,Rd:()=>o,ZP:()=>c,md:()=>l,r8:()=>f,uR:()=>n,xY:()=>r});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],o=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],l=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],f=[...t,...s,...l],d=[...f,...o,...n].map(a=>a.label),r={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...o].map(a=>a.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${f.map(a=>a.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},c=r},63496:(Y,O,e)=>{"use strict";e.d(O,{D:()=>E,w:()=>h});var t=e(82897),n=e.n(t),o=e(59980),s=e(49372),l=e(53208),f=e(39859),d=e(9471),r=e(76997),c=e(59724),a=e(7880),u=e(61474),i=e(89424),p=e(52666),g=e(86647),y=e(77599);const E="-- Mixed --";class h extends i.MF{constructor(m){super(m)}query(m){const D=m.targets.filter(M=>M.datasource?.uid!==E);if(!D.length)return(0,o.of)({data:[]});const P=(0,t.groupBy)(D,"datasource.uid"),b=[];for(const M in P){const x=P[M];b.push({datasource:(0,g.F)().get(x[0].datasource,m.scopedVars),targets:x})}return b.length?this.batchQueries(b,m):(0,o.of)({data:[]})}batchQueries(m,D){const P=m.filter(this.isQueryable).map((b,M)=>(0,s.D)(b.datasource).pipe((0,f.z)(x=>{const A=(0,t.cloneDeep)(D);return A.requestId=`mixed-${M}-${A.requestId||""}`,A.targets=b.targets,(0,s.D)(x.query(A)).pipe((0,d.U)(T=>({...T,data:T.data||[],state:p.Gu.Loading,key:`mixed-${M}-${T.key||""}`})),(0,r.q)(),(0,c.K)(T=>(T=(0,y.P)(T),T.message=`${x.name}: ${T.message}`,(0,o.of)([{data:[],state:p.Gu.Error,error:T,key:`mixed-${M}-${A.requestId||""}`}]))))})));return(0,l.D)(P).pipe(v(),(0,d.U)(this.finalizeResponses),(0,a.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(m){return m&&Array.isArray(m.targets)&&m.targets.length>0}finalizeResponses(m){const{length:D}=m;if(D===0)return m;const P=m.find(b=>b.state===p.Gu.Error);return P?m.push(P):m[D-1].state=p.Gu.Done,m}}function v(){return(0,u.u)((C,m)=>m.reduce((D,P)=>(D.push.apply(D,P),D),C),[])}},21899:(Y,O,e)=>{"use strict";e.d(O,{Ty:()=>t,ZP:()=>c,r8:()=>f});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],o=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],f=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."}],d=f.map(a=>a.label),c={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${f.map(a=>a.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},69407:(Y,O,e)=>{"use strict";e.d(O,{$C:()=>y,BC:()=>C,M7:()=>d,NZ:()=>p,T1:()=>h,Yt:()=>u,rB:()=>g,t3:()=>v,vO:()=>E,yf:()=>i});var t=e(12115),n=e(92468),o=e(53678),s=e(99098),l=e(53768),f=e(49427);function d(M){const{nodes:x,edges:A}=r(M),[T,S]=(0,f.np)();for(const U of x)T.add(U);for(const U of A)S.add(U);return[T,S]}function r(M){const x=[],A=[],T=new t.U(M),S=c(T),U=(0,f.nO)(R=>{if(R>=M.length)return;const F=T.get(R);return{span:{...F},id:F.spanID,parentIds:F.parentSpanID?[F.parentSpanID]:[]}});for(let R=0;R<T.length;R++){const F=T.get(R),B=U[F.spanID].children.map(z=>{const G=U[z].span;return[G.startTime,G.startTime+G.duration]}),K=(0,f.et)(B),L=F.duration-K,N=(0,f.fy)(F.duration,S,L);x.push({[n.z.id]:F.spanID,[n.z.title]:F.serviceName??"",[n.z.subTitle]:F.operationName,[n.z.mainStat]:N.main,[n.z.secondaryStat]:N.secondary,[n.z.color]:L/S}),F.parentSpanID&&U[F.parentSpanID].span&&A.push({[n.z.id]:F.parentSpanID+"--"+F.spanID,[n.z.target]:F.spanID,[n.z.source]:F.parentSpanID})}return{nodes:x,edges:A}}function c(M){let x=0,A=1/0;for(let T=0;T<M.length;T++){const S=M.get(T);S.startTime<A&&(A=S.startTime),S.startTime+S.duration>x&&(x=S.startTime+S.duration)}return x-A}const a="traces_service_graph_request_server_seconds_sum",u="traces_service_graph_request_total",i="traces_service_graph_request_failed_total",p="traces_service_graph_request_server_seconds_bucket",g={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},y={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},E={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},h='span_kind="SPAN_KIND_SERVER"',v=[a,u,i,p];function C(M,x){const A=D(M),T={},S={};return P(A[u],"total",u,T,S),P(A[a],"seconds",a,T,S),P(A[i],"failed",i,T,S),b(T,S,x)}function m(){function M(T,S){return new o.v({name:T,fields:S,meta:{preferredVisualisationType:"nodeGraph"}})}const x=M("Nodes",[{name:n.z.id,type:s.fS.string},{name:n.z.title,type:s.fS.string,config:{displayName:"Service name"}},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}},{name:n.z.arc+"success",type:s.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:l.S.Fixed}}},{name:n.z.arc+"failed",type:s.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:l.S.Fixed}}}]),A=M("Edges",[{name:n.z.id,type:s.fS.string},{name:n.z.source,type:s.fS.string},{name:n.z.target,type:s.fS.string},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}}]);return[x,A]}function D(M){return M[0].data.reduce((x,A)=>(x[A.refId]=new t.U(A),x),{})}function P(M,x,A,T,S){if(!M)return;const U=`Value #${A}`;for(let R=0;R<M.length;R++){const F=M.get(R),B=`${F.client}_${F.server}`;S[B]?S[B][x]=(S[B][x]||0)+F[U]:S[B]={target:F.server,source:F.client,[x]:F[U]},T[F.server]?T[F.server][x]=(T[F.server][x]||0)+F[U]:T[F.server]={[x]:F[U]},T[F.client]||(T[F.client]={[x]:0})}}function b(M,x,A){const[T,S]=m();for(const U of Object.keys(M)){const R=M[U];T.add({[n.z.id]:U,[n.z.title]:U,[n.z.mainStat]:R.total?R.seconds/R.total*1e3:Number.NaN,[n.z.secondaryStat]:R.total?Math.round(R.total*100)/100:Number.NaN,[n.z.arc+"success"]:R.total?(R.total-Math.min(R.failed||0,R.total))/R.total:1,[n.z.arc+"failed"]:R.total?Math.min(R.failed||0,R.total)/R.total:0})}for(const U of Object.keys(x)){const R=x[U];S.add({[n.z.id]:U,[n.z.source]:R.source,[n.z.target]:R.target,[n.z.mainStat]:R.total?R.seconds/R.total*1e3:Number.NaN,[n.z.secondaryStat]:R.total?Math.round(R.total*100)/100:Number.NaN})}return{nodes:T,edges:S}}},86146:(Y,O,e)=>{"use strict";e.d(O,{IM:()=>g,Jk:()=>P,RY:()=>r,g9:()=>y,n4:()=>b,xA:()=>x});var t=e(77156),n=e(64018),o=e(53678),s=e(99098),l=e(77258),f=e(69407);function d(U,R,F,B){const K=new o.v({fields:[{name:"Time",type:s.fS.time,config:{custom:{width:200}}},{name:"traceID",type:s.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:R,datasourceName:F,query:{query:"${__value.raw}"}}}]}},{name:"Message",type:s.fS.string}],meta:{preferredVisualisationType:"table"}});if(!U||B.length===0)return K;const L=U.fields.find(N=>N.type===s.fS.time);for(let N of U.fields){let z=!1;if(N.type===s.fS.string){const G=N.values;for(let I=0;I<G.length;I++){const V=G[I];if(V)for(let H of B){const Q=V.match(H);if(Q){const oe=Q[1],se=L?L.values[I]:null;K.fields[0].values.push(se),K.fields[1].values.push(oe),K.fields[2].values.push(V),z=!0}}}}if(z)break}return K}function r(U,R,F,B){return U.data.forEach((K,L)=>{const N=d(K,R,F,B);U.data[L]=N}),U}function c(U){if(U.stringValue)return U.stringValue;if(U.boolValue!==void 0)return Boolean(U.boolValue);if(U.intValue!==void 0)return Number.parseInt(U.intValue,10);if(U.doubleValue)return Number.parseFloat(U.doubleValue);if(U.arrayValue){const R=[];for(const F of U.arrayValue.values)R.push(c(F));return R}return""}function a(U){const R=[];let F="OTLPResourceNoServiceName";if(!U)return{serviceName:F,serviceTags:R};for(const B of U.attributes)B.key===n.R9.SERVICE_NAME&&(F=B.value.stringValue||F),R.push({key:B.key,value:c(B.value)});return{serviceName:F,serviceTags:R}}function u(U,R){const F=[];if(R&&(R.name&&F.push({key:"otel.library.name",value:R.name}),R.version&&F.push({key:"otel.library.version",value:R.version})),U.attributes)for(const B of U.attributes)F.push({key:B.key,value:c(B.value)});if(U.status&&(U.status.code&&U.status.code!==t.Q.UNSET&&(F.push({key:"otel.status_code",value:t.Q[U.status.code]}),U.status.message&&F.push({key:"otel.status_description",value:U.status.message})),U.status.code===t.Q.ERROR&&F.push({key:"error",value:!0})),U.kind!==void 0){const B=U.kind.toString().toLowerCase().split("_");F.push({key:"span.kind",value:B.length?B[B.length-1]:U.kind.toString()})}return F}function i(U){const R=[];if(U.links)for(const F of U.links){const{traceId:B,spanId:K}=F,L=[];if(F.attributes)for(const N of F.attributes)L.push({key:N.key,value:c(N.value)});R.push({traceID:B,spanID:K,tags:L})}return R}function p(U){const R=[];if(U.events)for(const F of U.events){const B=[];if(F.attributes)for(const K of F.attributes)B.push({key:K.key,value:c(K.value)});R.push({fields:B,timestamp:F.timeUnixNano/1e6})}return R}function g(U,R=!1){const F=new o.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"references",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const K of U){const{serviceName:L,serviceTags:N}=a(K.resource);for(const z of K.instrumentationLibrarySpans)for(const G of z.spans)F.add({traceID:G.traceId.length>16?G.traceId.slice(16):G.traceId,spanID:G.spanId,parentSpanID:G.parentSpanId||"",operationName:G.name||"",serviceName:L,serviceTags:N,startTime:G.startTimeUnixNano/1e6,duration:(G.endTimeUnixNano-G.startTimeUnixNano)/1e6,tags:u(G,z.instrumentationLibrary),logs:p(G),references:i(G)})}}catch(K){return console.error(K),{error:{message:"JSON is not valid OpenTelemetry format: "+K},data:[]}}let B=[F];return R&&B.push(...(0,f.M7)(F)),{data:B}}function y(U){let R={batches:[]},F={};for(let B=0;B<U.length;B++){const K=U.get(B);F[K.serviceName]||(F[K.serviceName]=R.batches.length,R.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let L=F[K.serviceName];if(R.batches[L].resource.attributes.length===0&&(R.batches[L].resource.attributes=h(K.serviceTags)),!R.batches[L].instrumentationLibrarySpans[0].instrumentationLibrary){let N=K.tags.find(z=>z.key==="otel.library.name")?.value;N&&(R.batches[L].instrumentationLibrarySpans[0].instrumentationLibrary={name:N,version:K.tags.find(z=>z.key==="otel.library.version")?.value})}R.batches[L].instrumentationLibrarySpans[0].spans.push({traceId:K.traceID.padStart(32,"0"),spanId:K.spanID,parentSpanId:K.parentSpanID||"",traceState:"",name:K.operationName,kind:E(K.tags),startTimeUnixNano:K.startTime*1e6,endTimeUnixNano:(K.startTime+K.duration)*1e6,attributes:h(K.tags),droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:C(K.tags),events:m(K.logs),links:D(K.references)})}return R}function E(U){let R;switch(U.find(B=>B.key==="span.kind")?.value){case"server":R="SPAN_KIND_SERVER";break;case"client":R="SPAN_KIND_CLIENT";break;case"producer":R="SPAN_KIND_PRODUCER";break;case"consumer":R="SPAN_KIND_CONSUMER";break}return R}function h(U){return U.filter(R=>!["span.kind","otel.library.name","otel.libary.version","otel.status_description","otel.status_code"].includes(R.key)).reduce((R,F)=>[...R,{key:F.key,value:v(F)}],[])}function v(U){if(typeof U.value=="string")return{stringValue:U.value};if(typeof U.value=="boolean")return{boolValue:U.value};if(typeof U.value=="number")return U.value%1===0?{intValue:U.value}:{doubleValue:U.value};if(typeof U.value=="object"&&Array.isArray(U.value)){const R=[];for(const F of U.value)R.push(v(F));return{arrayValue:{values:R}}}return{stringValue:U.value}}function C(U){let R;const F=U.find(B=>B.key==="otel.status_code");return F&&(R={code:F.value,message:U.find(B=>B.key==="otel_status_description")?.value}),R}function m(U){if(!U||!U.length)return;let R=[];for(const F of U){let B={timeUnixNano:F.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const K of F.fields)B.attributes.push({key:K.key,value:v(K)});R.push(B)}return R}function D(U){if(!U||!U.length)return;let R=[];for(const F of U){let B={traceId:F.traceID,spanId:F.spanID,attributes:[],droppedAttributesCount:0};if(F.tags?.length)for(const K of F.tags)B.attributes?.push({key:K.key,value:v(K)});R.push(B)}return R}function P(U,R=!1){const F=U.data[0];if(!F)return S;let B=[...U.data];return R&&B.push(...(0,f.M7)(F)),{...U,data:B}}function b(U,R){const F=new o.v({fields:[{name:"traceID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:R.uid,datasourceName:R.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceName",type:s.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:s.fS.string,config:{displayNameFromDS:"Start time"}},{name:"traceDuration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return F;const B=U.sort((K,L)=>parseInt(L?.startTimeUnixNano,10)/1e6-parseInt(K?.startTimeUnixNano,10)/1e6).map(M);for(const K of B)F.add(K);return F}function M(U){let R="";U.rootServiceName&&(R+=U.rootServiceName+" "),U.rootTraceName&&(R+=U.rootTraceName);const F=parseInt(U.startTimeUnixNano,10)/1e6;let B=isNaN(F)?"":(0,l.dq)(F);return{traceID:U.traceID,startTime:B,traceDuration:U.durationMs?.toString(),traceName:R}}function x(U,R){const F=new o.v({fields:[{name:"traceID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:R.uid,datasourceName:R.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:s.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceName",type:s.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return[F];const B=[],K=U.sort((L,N)=>parseInt(N?.startTimeUnixNano,10)/1e6-parseInt(L?.startTimeUnixNano,10)/1e6).reduce((L,N,z)=>{const G=M(N);return L.push(G),B.push(A(N,R,z)),L},[]);for(const L of K)F.add(L);return[F,...B]}const A=(U,R,F)=>{const B={};let K=!1;U.spanSet?.spans.forEach(N=>{N.name&&(K=!0),N.attributes?.forEach(z=>{B[z.key]={name:z.key,type:s.fS.string,config:{displayNameFromDS:z.key}}})});const L=new o.v({fields:[{name:"traceIdHidden",config:{custom:{hidden:!0}}},{name:"spanID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:R.uid,datasourceName:R.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"spanStartTime",type:s.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:s.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!K}}},...Object.values(B),{name:"duration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table",custom:{parentRowIndex:F}}});return U.spanSet?.spans.forEach(N=>{L.add(T(N,U.traceID))}),L};function T(U,R){const F=parseInt(U.startTimeUnixNano,10)/1e6;let B=(0,l.dq)(F);const K={traceIdHidden:R,spanID:U.spanID,spanStartTime:B,duration:parseInt(U.durationNanos,10),name:U.name};return U.attributes?.forEach(L=>{L.value.boolValue&&(K[L.key]=L.value.boolValue),L.value.doubleValue&&(K[L.key]=L.value.doubleValue),L.value.intValue&&(K[L.key]=L.value.intValue),L.value.stringValue&&(K[L.key]=L.value.stringValue)}),K}const S={data:[new o.v({fields:[{name:"trace",type:s.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},26991:(Y,O,e)=>{"use strict";e.d(O,{H:()=>a,m:()=>l});var t=e(82897),n=e.n(t),o=e(53678),s=e(99098);function l(i){const p=i.map(f),g=new o.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const y of p)g.add(y);return g}function f(i){const p={traceID:i.traceId,spanID:i.id,parentSpanID:i.parentId,operationName:i.name,serviceName:i.localEndpoint?.serviceName||i.remoteEndpoint?.serviceName||"unknown",serviceTags:r(i),startTime:i.timestamp/1e3,duration:i.duration/1e3,logs:i.annotations?.map(d)??[],tags:Object.keys(i.tags||{}).reduce((g,y)=>y==="error"?(g.push({key:"error",value:!0}),g.push({key:"errorValue",value:i.tags.error}),g):(g.push({key:y,value:i.tags[y]}),g),[])};return i.kind&&(p.tags=[{key:"kind",value:i.kind},...p.tags??[]]),i.shared&&(p.tags=[{key:"shared",value:i.shared},...p.tags??[]]),p}function d(i){return{timestamp:i.timestamp,fields:[{key:"annotation",value:i.value}]}}function r(i){const p=i.localEndpoint||i.remoteEndpoint;return p?[c("ipv4",p.ipv4),c("ipv6",p.ipv6),c("port",p.port),c("endpointType",i.localEndpoint?"local":"remote")].filter(t.identity):[]}function c(i,p){if(p)return{key:i,value:p}}const a=i=>{let p=[];for(let g=0;g<i.length;g++){const y=i.get(g);p.push({traceId:y.traceID,parentId:y.parentSpanID,name:y.operationName,id:y.spanID,timestamp:y.startTime*1e3,duration:y.duration*1e3,...u(y),annotations:y.logs.length?y.logs.map(E=>({timestamp:E.timestamp,value:E.fields[0].value})):void 0,tags:y.tags.length?y.tags.filter(E=>E.key!=="kind"&&E.key!=="endpointType"&&E.key!=="shared").reduce((E,h)=>h.key==="error"?{...E,[h.key]:y.tags.find(v=>v.key==="errorValue").value||""}:{...E,[h.key]:h.value},{}):void 0,kind:y.tags.find(E=>E.key==="kind")?.value,shared:y.tags.find(E=>E.key==="shared")?.value})}return p},u=i=>{const p=i.serviceTags.find(g=>g.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return i.serviceName!=="unknown"?{[p]:{serviceName:i.serviceName,ipv4:i.serviceTags.find(g=>g.key==="ipv4")?.value,ipv6:i.serviceTags.find(g=>g.key==="ipv6")?.value,port:i.serviceTags.find(g=>g.key==="port")?.value}}:void 0}},40286:(Y,O,e)=>{"use strict";e.d(O,{As:()=>t,LM:()=>o,kx:()=>n,wO:()=>s});var t=(l=>(l[l.AlphaAsc=1]="AlphaAsc",l[l.AlphaDesc=2]="AlphaDesc",l[l.Importance=3]="Importance",l[l.TimeAsc=4]="TimeAsc",l[l.TimeDesc=5]="TimeDesc",l))(t||{}),n=(l=>(l.Current="current",l.RecentChanges="changes",l))(n||{}),o=(l=>(l.Default="default",l.Custom="custom",l))(o||{}),s=(l=>(l.List="list",l.Stat="stat",l))(s||{})},28586:(Y,O,e)=>{"use strict";e.d(O,{Gj:()=>n,Qm:()=>f});var t=e(56190);const n=1,o=2,s=3,l=(d,r,c,a)=>(0,t.O)(r+d*(c+a),6);function f(d,r,c,a,u){let i=1-r,p=c===n?i/(d-1):c===o?i/d:c===s?i/(d+1):0;(isNaN(p)||p===1/0)&&(p=0);let g=c===n?0:c===o?p/2:c===s?p:0,y=r/d,E=(0,t.O)(y,6);if(a==null)for(let h=0;h<d;h++)u(h,l(h,g,y,p),E);else u(a,l(a,g,y,p),E)}},60892:(Y,O,e)=>{"use strict";e.d(O,{Pn:()=>o,kK:()=>l,lW:()=>f,zZ:()=>s});const t=10,n=4;function o(d,r,c,a,u,i){return d>=c&&d<=u&&r>=a&&r<=i}function s(d,r,c){let a;if(d.o.length&&(a=d.o.find(u=>u.sidx===r&&u.didx===c)),a==null&&d.q)for(let u=0;u<d.q.length&&(a=s(d.q[u],r,c),!a);u++);return a}function l(d,r){return d.x<=r.x+r.w&&d.x+d.w>=r.x&&d.y+d.h>=r.y&&d.y<=r.y+r.h}class f{constructor(r,c,a,u,i=0){this.x=r,this.y=c,this.w=a,this.h=u,this.l=i,this.o=[],this.q=null}split(){let r=this,c=r.x,a=r.y,u=r.w/2,i=r.h/2,p=r.l+1;r.q=[new f(c+u,a,u,i,p),new f(c,a,u,i,p),new f(c,a+i,u,i,p),new f(c+u,a+i,u,i,p)]}quads(r,c,a,u,i){let p=this,g=p.q,y=p.x+p.w/2,E=p.y+p.h/2,h=c<E,v=r<y,C=r+a>y,m=c+u>E;h&&C&&i(g[0]),v&&h&&i(g[1]),v&&m&&i(g[2]),C&&m&&i(g[3])}add(r){let c=this;if(c.q!=null)c.quads(r.x,r.y,r.w,r.h,a=>{a.add(r)});else{let a=c.o;if(a.push(r),a.length>t&&c.l<n){c.split();for(let u=0;u<a.length;u++){let i=a[u];c.quads(i.x,i.y,i.w,i.h,p=>{p.add(i)})}c.o.length=0}}}get(r,c,a,u,i){let p=this,g=p.o;for(let y=0;y<g.length;y++)i(g[y]);p.q!=null&&p.quads(r,c,a,u,y=>{y.get(r,c,a,u,i)})}clear(){this.o.length=0,this.q=null}}},63992:(Y,O,e)=>{"use strict";e.d(O,{M:()=>a,l:()=>u});var t=e(82897),n=e.n(t),o=e(66111),s=e(82229),l=e(92156),f=e(19670),d=e(18543),r=e(4387),c=e(47694);class a extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(p,g)=>{const{options:y,fieldConfig:E}=this.props,{value:h,alignmentFactors:v,orientation:C,width:m,height:D,count:P}=p,{field:b,display:M,view:x,colIndex:A}=h,{openMenu:T,targetClassName:S}=g;let U;return x&&(0,t.isNumber)(A)&&(U=x.getFieldDisplayProcessor(A)),o.createElement(f.xf,{value:u(P,E.defaults,M),width:m,height:D,orientation:C,field:b,text:y.text,display:U,theme:c.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:T,className:S,alignmentFactors:P>1?v:void 0,showUnfilled:y.showUnfilled,valueDisplayMode:y.valueMode})},this.renderValue=p=>{const{value:g,orientation:y}=p,{hasLinks:E,getLinks:h}=g;return E&&h?o.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},o.createElement(d.V,{links:h},v=>this.renderComponent(p,v))):this.renderComponent(p,{})},this.getValues=()=>{const{data:p,options:g,replaceVariables:y,fieldConfig:E,timeZone:h}=this.props;return(0,l.nG)({fieldConfig:E,reduceOptions:g.reduceOptions,replaceVariables:y,theme:c.vc.theme2,data:p.series,timeZone:h})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:p,width:g,options:y,data:E,renderCounter:h}=this.props;return o.createElement(r.Q,{source:E,getAlignmentFactors:l.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:h,width:g,height:p,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function u(i,p,g){return i===1&&!p.displayName?{...g,title:void 0}:g}},19919:(Y,O,e)=>{"use strict";e.d(O,{Z:()=>ye});var t=e(9892),n=e(66111),o=e(27443),s=e(72648);const l=22*window.devicePixelRatio,f=10*window.devicePixelRatio,d=.5*window.devicePixelRatio,r=20*window.devicePixelRatio,c=.5*window.devicePixelRatio,a=4*window.devicePixelRatio,u=800,i=120;var p=e(22759),g=e(42044),y=e(30909);const h=({contextMenuData:Ce,graphRef:be,totalTicks:We,levels:Qe,setContextMenuData:mt,setTopLevelIndex:vt,setSelectedBarIndex:rt,setRangeMin:Ot,setRangeMax:Et,data:Mt})=>{const ue=Qe[Ce.levelIndex][Ce.barIndex],De=()=>n.createElement(n.Fragment,null,n.createElement(g.s,{label:"Focus block",icon:"eye",onClick:()=>{be.current&&Ce&&(vt(Ce.levelIndex),rt(Ce.barIndex),Ot(ue.start/We),Et((ue.start+Mt.getValue(ue.itemIndex))/We),mt(void 0))}}),n.createElement(g.s,{label:"Copy function name",icon:"copy",onClick:()=>{be.current&&Ce&&navigator.clipboard.writeText(Mt.getLabel(ue.itemIndex)).then(()=>{mt(void 0)})}}));return n.createElement("div",{"data-testid":"contextMenu"},Ce.e.clientX&&Ce.e.clientY&&n.createElement(y.x,{renderMenuItems:()=>De(),x:Ce.e.clientX+10,y:Ce.e.clientY,focusOnOpen:!1}))},v=n.memo(({data:Ce,levels:be,topLevelIndex:We,selectedBarIndex:Qe,totalTicks:mt})=>{const vt=(0,s.wW)(m);if(be[We]&&be[We][Qe]){const rt=be[We][Qe],Ot=C(Ce,rt,mt),Et=`${Ot?.unitValue} (${Ot?.percentValue}%) of ${Ot?.samples} total samples (${Ot?.unitTitle})`;return n.createElement(n.Fragment,null,n.createElement("div",{className:vt.metadata},Et))}return n.createElement(n.Fragment,null)}),C=(Ce,be,We)=>{const Qe=Ce.getValueDisplay(be.itemIndex),mt=Math.round(1e4*(Qe.numeric/We))/100;let vt=Qe.text+Qe.suffix;const rt=Ce.getUnitTitle();return rt==="Count"&&(Qe.suffix||(vt=Qe.text)),{percentValue:mt,unitTitle:rt,unitValue:vt,samples:We.toLocaleString()}};v.displayName="FlameGraphMetadata";const m=()=>({metadata:t.css`
    margin: 8px 0;
    text-align: center;
  `}),D=v,P=({data:Ce,tooltipRef:be,item:We,totalTicks:Qe})=>{const mt=(0,s.wW)(M);let vt=null;if(We){const rt=b(Ce,We,Qe);vt=n.createElement("div",{className:mt.tooltipContent},n.createElement("p",null,Ce.getLabel(We.itemIndex)),n.createElement("p",{className:mt.lastParagraph},rt.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,rt.unitValue)," (",rt.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,rt.unitSelf)," (",rt.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,rt.samples)))}return n.createElement("div",{ref:be,className:mt.tooltip},vt)},b=(Ce,be,We)=>{const Qe=Ce.getValueDisplay(be.itemIndex),mt=Ce.getSelfDisplay(be.itemIndex),vt=Math.round(1e4*(Qe.numeric/We))/100,rt=Math.round(1e4*(mt.numeric/We))/100;let Ot=Qe.text+Qe.suffix,Et=mt.text+mt.suffix;const Mt=Ce.getUnitTitle();return Mt==="Count"&&(Qe.suffix||(Ot=Qe.text),mt.suffix||(Et=mt.text)),{name:Ce.getLabel(be.itemIndex),percentValue:vt,percentSelf:rt,unitTitle:Mt,unitValue:Ot,unitSelf:Et,samples:Qe.numeric.toLocaleString()}},M=Ce=>({tooltip:t.css`
    title: tooltip;
    position: fixed;
  `,tooltipContent:t.css`
    title: tooltipContent;
    background-color: ${Ce.components.tooltip.background};
    border-radius: ${Ce.shape.radius.default};
    border: 1px solid ${Ce.components.tooltip.background};
    box-shadow: ${Ce.shadows.z2};
    color: ${Ce.components.tooltip.text};
    font-size: ${Ce.typography.bodySmall.fontSize};
    padding: ${Ce.spacing(.5,1)};
    transition: opacity 0.3s;
    z-index: ${Ce.zIndex.tooltip};
    max-width: 400px;
    overflow-wrap: break-word;
  `,lastParagraph:t.css`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:t.css`
    title: name;
    margin-bottom: 10px;
  `}),x=P;var A=e(16514);function T(Ce,be,We,Qe,mt,vt){const rt=[];for(let Ot=0;Ot<be.length;Ot+=1){const Et=be[Ot],Mt=U(Et.start,Qe,mt,vt);let ue=Ce.getValue(Et.itemIndex);const De=ue*vt<=f;if(De)for(;Ot<be.length-1&&Et.start+ue===be[Ot+1].start&&Ce.getValue(be[Ot+1].itemIndex)*vt<=f;)Ot+=1,ue+=Ce.getValue(be[Ot].itemIndex);const Ne=Ce.getValueDisplay(Et.itemIndex);let tt=Ne.suffix?Ne.text+Ne.suffix:Ne.text;const et=ue*vt-(De?0:c*2);rt.push({width:et,height:l,x:Mt,y:We*l,collapsed:De,ticks:ue,label:Ce.getLabel(Et.itemIndex),unitLabel:tt})}return rt}function S(Ce,be,We,Qe,mt,vt,rt,Ot,Et){if(be.width<d)return;Ce.beginPath(),Ce.rect(be.x+(be.collapsed?0:c),be.y,be.width,be.height);const Mt=Math.min(1,be.ticks/We/(mt-Qe)),ue=50-50*Mt,De=65+7*Mt,Ne=be.label;be.collapsed?Ce.fillStyle=Et.has(Ne)?R(ue,De):A.O9[55]:(Ce.stroke(),vt?Ce.fillStyle=Et.has(Ne)?R(ue,De):A.O9[55]:Ce.fillStyle=rt>Ot-1?R(ue,De):R(ue,De+15)),Ce.fill(),!be.collapsed&&be.width>=r&&(Ce.save(),Ce.clip(),Ce.fillStyle="#222",Ce.fillText(`${Ne} (${be.unitLabel})`,Math.max(be.x,0)+a,be.y+l/2),Ce.restore())}function U(Ce,be,We,Qe){return(Ce-be*We)*Qe}function R(Ce,be){return`hsl(${Ce}, 100%, ${be}%)`}const F=({data:Ce,app:be,levels:We,topLevelIndex:Qe,selectedBarIndex:mt,rangeMin:vt,rangeMax:rt,search:Ot,setTopLevelIndex:Et,setSelectedBarIndex:Mt,setRangeMin:ue,setRangeMax:De,selectedView:Ne})=>{const tt=(0,s.wW)(B),et=Ce.getValue(0),[Ue,{width:Fe}]=(0,o.Z)(),Ee=(0,n.useRef)(null),Me=(0,n.useRef)(null),[He,Ze]=(0,n.useState)(),[lt,bt]=(0,n.useState)(),[Pt]=(0,n.useState)(()=>new p.Z),Je=(0,n.useMemo)(()=>{const Dt=new Set;if(Ot){let Ve=Pt.filter(Ce.getUniqueLabels(),Ot);if(Ve)for(let Xe of Ve)Dt.add(Ce.getUniqueLabels()[Xe])}return Dt},[Pt,Ot,Ce]);return(0,n.useEffect)(()=>{if(!We.length)return;const Dt=Fe*window.devicePixelRatio/et/(rt-vt),Ve=Ee.current?.getContext("2d"),Xe=Ee.current,st=l*We.length;Xe.width=Math.round(Fe*window.devicePixelRatio),Xe.height=Math.round(st*window.devicePixelRatio),Xe.style.width=`${Fe}px`,Xe.style.height=`${st}px`,Ve.textBaseline="middle",Ve.font=12*window.devicePixelRatio+"px monospace",Ve.strokeStyle="white";for(let ut=0;ut<We.length;ut++){const xt=We[ut],Kt=T(Ce,xt,ut,et,vt,Dt);for(const Jt of Kt)S(Ve,Jt,et,vt,rt,Ot,ut,Qe,Je)}},[Ce,We,Fe,et,vt,rt,Ot,Qe,Je]),(0,n.useEffect)(()=>{Ee.current&&(Ee.current.onclick=Dt=>{Ze(void 0);const Ve=Ee.current.clientWidth/et/(rt-vt),{levelIndex:Xe,barIndex:st}=K(Ce,Dt,Ve,We,et,vt);st!==-1&&!isNaN(Xe)&&!isNaN(st)?bt({e:Dt,levelIndex:Xe,barIndex:st}):bt(void 0)},Ee.current.onmousemove=Dt=>{if(Me.current&&lt===void 0){Ze(void 0);const Ve=Ee.current.clientWidth/et/(rt-vt),{levelIndex:Xe,barIndex:st}=K(Ce,Dt,Ve,We,et,vt);st!==-1&&!isNaN(Xe)&&!isNaN(st)&&(Me.current.style.top=Dt.clientY+"px",document.documentElement.clientWidth-Dt.clientX<400?(Me.current.style.right=document.documentElement.clientWidth-Dt.clientX+15+"px",Me.current.style.left="auto"):(Me.current.style.left=Dt.clientX+15+"px",Me.current.style.right="auto"),Ze(We[Xe][st]))}},Ee.current.onmouseleave=()=>{Ze(void 0)})},[Ce,We,vt,rt,Qe,et,Fe,Et,ue,De,Ne,Mt,bt,lt]),(0,n.useEffect)(()=>{const Dt=Ve=>{Ve.target.parentElement?.id!=="flameGraphCanvasContainer"&&bt(void 0)};return window.addEventListener("click",Dt),()=>window.removeEventListener("click",Dt)},[bt]),n.createElement("div",{className:tt.graph,ref:Ue},n.createElement(D,{data:Ce,levels:We,topLevelIndex:Qe,selectedBarIndex:mt,totalTicks:et}),n.createElement("div",{className:tt.canvasContainer,id:"flameGraphCanvasContainer"},n.createElement("canvas",{ref:Ee,"data-testid":"flameGraph"})),n.createElement(x,{tooltipRef:Me,item:He,data:Ce,totalTicks:et}),lt&&n.createElement(h,{data:Ce,contextMenuData:lt,levels:We,totalTicks:et,graphRef:Ee,setContextMenuData:bt,setTopLevelIndex:Et,setSelectedBarIndex:Mt,setRangeMin:ue,setRangeMax:De}))},B=()=>({graph:t.css`
    overflow: scroll;
    height: 100%;
    flex-grow: 1;
    flex-basis: 50%;
  `,canvasContainer:t.css`
    cursor: pointer;
  `}),K=(Ce,be,We,Qe,mt,vt)=>{const rt=Math.floor(be.offsetY/(l/window.devicePixelRatio)),Ot=L(be.offsetX,Ce,Qe[rt],We,mt,vt);return{levelIndex:rt,barIndex:Ot}},L=(Ce,be,We,Qe,mt,vt)=>{if(We){let rt=0,Ot=We.length-1;for(;rt<=Ot;){const Et=rt+Ot>>1,Mt=U(We[Et].start,mt,vt,Qe),ue=U(We[Et].start+be.getValue(We[Et].itemIndex),mt,vt,Qe);if(Mt<=Ce&&ue>=Ce)return Et;Mt>Ce?Ot=Et-1:rt=Et+1}}return-1},N=F;var z=e(21544),G=e(6194),I=(Ce=>(Ce.Bytes="bytes",Ce.Short="short",Ce.Nanoseconds="ns",Ce))(I||{}),V=(Ce=>(Ce.Symbol="Symbol",Ce.Self="Self",Ce.Total="Total",Ce))(V||{}),H=(Ce=>(Ce.TopTable="topTable",Ce.FlameGraph="flameGraph",Ce.Both="both",Ce))(H||{});function Q(Ce){const be=[];let We=0;for(let Qe=0;Qe<Ce.data.length;Qe++){const mt=Ce.getLevel(Qe),vt=Qe>0?Ce.getLevel(Qe-1):void 0;if(be[mt]=be[mt]||[],vt&&vt>=mt){const Ot=be[mt][be[mt].length-1];We=Ot.start+Ce.getValue(Ot.itemIndex)}const rt={itemIndex:Qe,start:We};be[mt].push(rt)}return be}class oe{constructor(be,We=(0,z.j)()){if(this.data=be,this.labelField=be.fields.find(mt=>mt.name==="label"),this.levelField=be.fields.find(mt=>mt.name==="level"),this.valueField=be.fields.find(mt=>mt.name==="value"),this.selfField=be.fields.find(mt=>mt.name==="self"),!(this.labelField&&this.levelField&&this.valueField&&this.selfField))throw new Error("Malformed dataFrame: value, level and label and self fields are required.");const Qe=this.labelField?.config?.type?.enum;Qe?(this.labelDisplayProcessor=(0,G.je)(We,Qe),this.uniqueLabels=Qe.text||[]):(this.labelDisplayProcessor=mt=>({text:mt+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,G.U_)({field:this.valueField,theme:We})}getLabel(be){return this.labelDisplayProcessor(this.labelField.values[be]).text}getLevel(be){return this.levelField.values[be]}getValue(be){return this.valueField.values[be]}getValueDisplay(be){return this.valueDisplayProcessor(this.valueField.values[be])}getSelf(be){return this.selfField.values[be]}getSelfDisplay(be){return this.valueDisplayProcessor(this.selfField.values[be])}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case I.Bytes:return"RAM";case I.Nanoseconds:return"Time"}return"Count"}}var se=e(83231),ie=e(83272),j=e(206),de=e(41818),ce=e(46967),ee=e(31403),le=e(2594),q=e(47694);const fe=({app:Ce,search:be,setTopLevelIndex:We,setSelectedBarIndex:Qe,setRangeMin:mt,setRangeMax:vt,setSearch:rt,selectedView:Ot,setSelectedView:Et,containerWidth:Mt})=>{const ue=(0,s.wW)(Ue=>ne(Ue,Ce));let De=[{value:H.TopTable,label:"Top Table",description:"Only show top table"},{value:H.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];Mt>=u&&De.push({value:H.Both,label:"Both",description:"Show both the top table and flame graph"});const Ne=()=>{We(0),Qe(0),mt(0),vt(1),rt(""),et("")},[tt,et]=Z(be,rt);return n.createElement("div",{className:ue.header},n.createElement("div",{className:ue.leftContainer},n.createElement("div",{className:ue.inputContainer},n.createElement(ce.I,{value:tt||"",onChange:Ue=>{et(Ue.currentTarget.value)},placeholder:"Search..",width:44})),n.createElement(ee.zx,{type:"button",variant:"secondary",onClick:Ne},"Reset view")),n.createElement("div",{className:ue.rightContainer},n.createElement(le.S,{options:De,value:Ot,onChange:Ue=>{(0,de.ff)("grafana_flamegraph_view_selected",{app:Ce,grafana_version:q.vc.buildInfo.version,view:Ue}),Et(Ue)}})))};function Z(Ce,be){const[We,Qe]=(0,n.useState)(Ce),mt=(0,ie.Z)(Ce);return(0,se.Z)(()=>{be(We)},250,[We]),(0,n.useEffect)(()=>{mt!==Ce&&Ce!==We&&Qe(Ce)},[Ce,mt,We]),[We,Qe]}const ne=(Ce,be)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Ce.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Ce.zIndex.navbarFixed};
    ${be===j.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),re=fe;var ve=e(89050),me=e(99098),Ie=e(76095),Ge=e(35645),gt=e(88144);const Te=({data:Ce,app:be,totalLevels:We,selectedView:Qe,search:mt,setSearch:vt,setTopLevelIndex:rt,setSelectedBarIndex:Ot,setRangeMin:Et,setRangeMax:Mt})=>{const ue=(0,s.wW)(Ye),De=et=>{mt===et?vt(""):((0,de.ff)("grafana_flamegraph_table_item_selected",{app:be,grafana_version:Ge.v.buildInfo.version}),vt(et),rt(0),Ot(0),Et(0),Mt(1))},[Ne,tt]=(0,n.useState)([{displayName:"Self",desc:!0}]);return n.createElement("div",{className:ue.topTableContainer,"data-testid":"topTable"},n.createElement(ve.Z,{style:{width:"100%",height:l*We+"px"}},({width:et,height:Ue})=>{if(et<3||Ue<3)return null;const Fe=Le(Ce,et,De);return n.createElement(gt.i,{initialSortBy:Ne,onSortByChange:Ee=>{Ee&&Ee.length&&(0,de.ff)("grafana_flamegraph_table_sort_selected",{app:be,grafana_version:Ge.v.buildInfo.version,sort:Ee[0].displayName+"_"+(Ee[0].desc?"desc":"asc")}),tt(Ee)},data:Fe,width:et,height:Ue})}))};function Le(Ce,be,We){let Qe={};for(let Mt=0;Mt<Ce.data.length;Mt++){const ue=Ce.getValue(Mt),De=Ce.getSelf(Mt),Ne=Ce.getLabel(Mt);Qe[Ne]=Qe[Ne]||{},Qe[Ne].self=Qe[Ne].self?Qe[Ne].self+De:De,Qe[Ne].total=Qe[Ne].total?Qe[Ne].total+ue:ue}const mt={type:me.fS.string,name:"Symbol",values:[],config:{custom:{width:be-i*2},links:[{title:"Highlight symbol",url:"",onClick:Mt=>{const De=Mt.origin.field.values[Mt.origin.rowIndex];We(De)}}]}},vt={type:me.fS.number,name:"Self",values:[],config:{unit:Ce.selfField.config.unit,custom:{width:i}}},rt={type:me.fS.number,name:"Total",values:[],config:{unit:Ce.valueField.config.unit,custom:{width:i}}};for(let Mt in Qe)mt.values.push(Mt),vt.values.push(Qe[Mt].self),rt.values.push(Qe[Mt].total);const Ot={fields:[mt,vt,rt],length:mt.values.length};return(0,Ie.SM)({data:[Ot],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Mt=>Mt,theme:Ge.v.theme2})[0]}const Ye=()=>({topTableContainer:t.css`
      flex-grow: 1;
      flex-basis: 50%;
      overflow: hidden;
    `}),it=Te,ht=Ce=>{const[be,We]=(0,n.useState)(0),[Qe,mt]=(0,n.useState)(0),[vt,rt]=(0,n.useState)(0),[Ot,Et]=(0,n.useState)(1),[Mt,ue]=(0,n.useState)(""),[De,Ne]=(0,n.useState)(H.Both),[tt,{width:et}]=(0,o.Z)(),Ue=(0,s.l4)(),[Fe,Ee]=(0,n.useMemo)(()=>{if(!Ce.data)return[void 0,void 0];const He=new oe(Ce.data,Ue);return[He,Q(He)]},[Ce.data,Ue]),Me=(0,s.wW)(Re);return(0,n.useEffect)(()=>{et>0&&et<u&&De===H.Both&&Ne(H.FlameGraph)},[De,Ne,et]),(0,n.useEffect)(()=>{We(0),mt(0),rt(0),Et(1)},[Ce.data]),n.createElement(n.Fragment,null,Fe&&n.createElement("div",{ref:tt,className:Me.container},n.createElement(re,{app:Ce.app,setTopLevelIndex:We,setSelectedBarIndex:mt,setRangeMin:rt,setRangeMax:Et,search:Mt,setSearch:ue,selectedView:De,setSelectedView:Ne,containerWidth:et}),n.createElement("div",{className:Me.body},De!==H.FlameGraph&&n.createElement(it,{data:Fe,app:Ce.app,totalLevels:Ee.length,selectedView:De,search:Mt,setSearch:ue,setTopLevelIndex:We,setSelectedBarIndex:mt,setRangeMin:rt,setRangeMax:Et}),De!==H.TopTable&&n.createElement(N,{data:Fe,app:Ce.app,levels:Ee,topLevelIndex:be,selectedBarIndex:Qe,rangeMin:vt,rangeMax:Ot,search:Mt,setTopLevelIndex:We,setSelectedBarIndex:mt,setRangeMin:rt,setRangeMax:Et,selectedView:De}))))};function Re(Ce){return{container:(0,t.css)({height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Ce.spacing(2)}),body:(0,t.css)({display:"flex",flexGrow:1,minHeight:0})}}const ye=ht},7149:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>D});var t=e(36873),n=e(25272),o=e(30383),s=e(50954);const l=P=>(0,s.rD)(P),f=(P,b,M)=>{const x=(0,s.ZH)(P,b,M);if(b==="singlestat"&&M.angular){const A=M.angular.gauge;A&&(x.showThresholdMarkers=A.thresholdMarkers,x.showThresholdLabels=A.thresholdLabels)}return x};var d=e(66111),r=e(6194),c=e(92156),a=e(69823),u=e(18543),i=e(4387),p=e(47694),g=e(63992);class y extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(b,M)=>{const{options:x,fieldConfig:A}=this.props,{width:T,height:S,count:U,value:R}=b,{field:F,display:B}=R,{openMenu:K,targetClassName:L}=M;return d.createElement(a.a,{value:(0,g.l)(U,A.defaults,B),width:T,height:S,field:F,text:x.text,showThresholdLabels:x.showThresholdLabels,showThresholdMarkers:x.showThresholdMarkers,theme:p.vc.theme2,onClick:K,className:L})},this.renderValue=b=>{const{value:M}=b,{getLinks:x,hasLinks:A}=M;return A&&x?d.createElement(u.V,{links:x,style:{flexGrow:1}},T=>this.renderComponent(b,T)):this.renderComponent(b,{})},this.getValues=()=>{const{data:b,options:M,replaceVariables:x,fieldConfig:A,timeZone:T}=this.props;for(let S of b.series)for(let U of S.fields)if(U.config.unit==="percent"||U.config.unit==="percentunit"){const R=U.config.min??0,F=U.config.max??(U.config.unit==="percent"?100:1);U.state=U.state??{},U.state.range={min:R,max:F,delta:F-R},U.display=(0,r.U_)({field:U,theme:p.vc.theme2})}return(0,c.nG)({fieldConfig:A,reduceOptions:M.reduceOptions,replaceVariables:x,theme:p.vc.theme2,data:b.series,timeZone:T})}}render(){const{height:b,width:M,data:x,renderCounter:A,options:T}=this.props;return d.createElement(i.Q,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:b,source:x,autoGrid:!0,renderCounter:A,orientation:T.orientation})}}const E=Object.freeze([0,0]),h={showThresholdLabels:!1,showThresholdMarkers:!0};var v=e(69098),C=e(26410);class m{getSuggestionsForData(b){const{dataSummary:M}=b;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const x=b.getListAppender({name:C.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:v.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:A=>{A.options.reduceOptions.values&&(A.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(x.append({name:C.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),x.append({name:C.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(x.append({name:C.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),x.append({name:C.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const D=new t.c(y).useFieldConfig({useCustomConfig:P=>{P.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(P=>{(0,o.j)(P),(0,o.h)(P),P.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:h.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:h.showThresholdMarkers}),n.Z(P)}).setPanelChangeHandler(f).setSuggestionsSupplier(new m).setMigrationHandler(l)},16225:(Y,O,e)=>{"use strict";e.d(O,{H:()=>u});var t=e(9892),n=e(66111),o=e(30471),s=e(2703),l=e(574),f=e(40538),d=e(72648),r=e(52081),c=e(31403),a=e(56206);const u=({data:p,rowIndex:g,columnIndex:y,sortOrder:E,mode:h,header:v=void 0})=>{const C=(0,d.wW)(i);if(!p||g==null)return null;const m=p.fields.map((S,U)=>({...S,hovered:U===y})),D=m.filter(S=>!Boolean(S.config.custom?.hideFrom?.tooltip)),P=D.find(S=>S.name==="traceID")||m[0],b=[];if(D.filter(S=>P===S).length>0&&b.push(P),b.push(...D.filter(S=>P!==S)),b.length===0)return null;const M=[],x=[],A=new Set;for(const S of b){if(h===f.f3.Single&&y!=null&&!S.hovered)continue;const U=S.values[g],R=S.display?S.display(U):{text:`${U}`,numeric:+U};S.getLinks&&S.getLinks({calculatedValue:R,valueRowIndex:g}).forEach(F=>{const B=`${F.title}/${F.href}`;A.has(B)||(x.push(F),A.add(B))}),M.push({name:(0,o.CZ)(S,p),value:U,valueString:(0,s.zc)(R),highlight:S.hovered})}E&&E!==f.As.None&&M.sort((S,U)=>l.sortValues(E)(S.value,U.value));const T=()=>x.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(r.wc,null,x.map((S,U)=>n.createElement(c.Qj,{key:U,icon:"external-link-alt",target:S.target,href:S.href,onClick:S.onClick,fill:"text",style:{width:"100%"}},S.title)))));return n.createElement("div",{className:C.wrapper},v&&n.createElement("div",{className:C.header},n.createElement("span",{className:C.title},v)),n.createElement("table",{className:C.infoWrap},n.createElement("tbody",null,M.map((S,U)=>n.createElement("tr",{key:`${U}/${g}`,className:S.highlight?C.highlight:""},n.createElement("th",null,S.name,":"),n.createElement("td",null,(0,a.Q)(S.valueString)))),T())))},i=p=>{const g=p.isDark?p.v1.palette.dark2:p.v1.palette.white,y=p.isDark?p.v1.palette.dark9:p.v1.palette.gray5,E=p.isDark?p.v1.palette.dark3:p.v1.palette.gray6;return{wrapper:t.css`
      background: ${g};
      border: 1px solid ${y};
      border-radius: ${p.shape.borderRadius(2)};
    `,header:t.css`
      background: ${y};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${p.typography.fontWeightMedium};
      padding-right: ${p.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${p.typography.fontWeightMedium};
        padding: ${p.spacing(.25,2)};
      }
      tr {
        background-color: ${p.colors.background.primary};
        &:nth-child(even) {
          background-color: ${E};
        }
      }
    `,highlight:t.css`
      /* !important is required to overwrite default table styles */
      background: ${p.colors.action.hover} !important;
    `,link:t.css`
      color: #6e9fff;
    `}}},38286:(Y,O,e)=>{"use strict";e.d(O,{Cg:()=>o,EQ:()=>l,Er:()=>f,H:()=>s,bD:()=>n});var t=e(40538),n=(d=>(d.Point="point",d.Line="line",d.Polygon="polygon",d.Any="*any*",d))(n||{});const o=5;var s=(d=>(d.Left="left",d.Center="center",d.Right="right",d))(s||{}),l=(d=>(d.Top="top",d.Middle="middle",d.Bottom="bottom",d))(l||{});const f=Object.freeze({size:{fixed:o,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.eK.Mod,min:-360,max:360}})},56206:(Y,O,e)=>{"use strict";e.d(O,{Q:()=>s});var t=e(9892),n=e(66111),o=e(44768);const s=l=>(0,o.CB)(l)?n.createElement("a",{href:l,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},l):l},44768:(Y,O,e)=>{"use strict";e.d(O,{B1:()=>r,CB:()=>y,FB:()=>p,gE:()=>i,n_:()=>a,sA:()=>u,uH:()=>g,vV:()=>f});var t=e(92053),n=e(79582),o=e(25532),s=e(35821),l=e(38286);function f(E,h,v,C){const m={};return C&&Object.keys(C).length?(m.color=(0,o.getColorDimension)(E,C.color??l.Er.color,v),m.size=(0,o.getScaledDimension)(E,C.size??l.Er.size),m.rotation=(0,o.getScalarDimension)(E,C.rotation??l.Er.rotation),C.text&&(C.text.field||C.text.fixed)&&(m.text=(0,o.getTextDimension)(E,C.text))):h.fields&&(h.fields.color&&(m.color=(0,o.getColorDimension)(E,h.config.color??l.Er.color,v)),h.fields.size&&(m.size=(0,o.getScaledDimension)(E,h.config.size??l.Er.size)),h.fields.text&&(m.text=(0,o.getTextDimension)(E,h.config.text)),h.fields.rotation&&(m.rotation=(0,o.getScalarDimension)(E,h.config.rotation??l.Er.rotation))),m}let d;function r(){return d||(d=[],c()),d}async function c(){const E=await(0,s.e)();for(let h of["maps","gazetteer"])E.listFiles(h).subscribe({next:v=>{v.forEach(C=>{if(C.name.endsWith(".geojson")){const m=`public/${h}/${C.name}`;d.push({value:m,label:m})}})}})}const a=(E,h,v)=>{const[C]=E.initMapView(h.view,void 0);return E.map=new t.Z({view:C,pixelRatio:1,layers:[],controls:[],target:v,interactions:(0,n.c)({mouseWheelZoom:!1})})},u=(E,h)=>{E.initControls(h.controls),E.forceUpdate()},i=(E,h,v)=>{E.panelContext&&E.panelContext.onInstanceStateChange&&E.panelContext.onInstanceStateChange({map:E.map,layers:h,selected:v,actions:E.actions})},p=E=>{let h=E.layers.length;for(;h<100;){const v=`Layer ${h++}`;if(!E.byName.has(v))return v}return`Layer ${Date.now()}`};function g(E,h,v,C){const m=E.getPixelFromCoordinate(v),D=E.getPixelFromCoordinate(C),P=Math.abs(m[0]-D[0]),b=Math.abs(m[1]-D[1]);return P>h||b>h}const y=E=>{try{return new URL(E).protocol.includes("http")}catch{return!1}}},7211:(Y,O,e)=>{"use strict";e.d(O,{o:()=>o});var t=e(66111),n=e(50796);function o(s){return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.P,{onClick:s.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},53764:(Y,O,e)=>{"use strict";e.d(O,{S:()=>f});var t=e(9892),n=e(66111),o=e(63418),s=e(77258),l=e(72648);function f({width:r,showImage:c,data:a,index:u}){const i=(0,l.wW)(d),p=r>600,g=a.get(u);return n.createElement("article",{className:(0,t.cx)(i.item,p&&i.itemWide)},c&&g.ogImage&&n.createElement("a",{tabIndex:-1,href:o.QX.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(i.socialImage,p&&i.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:g.ogImage,alt:g.title})),n.createElement("div",{className:i.body},n.createElement("time",{className:i.date,dateTime:(0,s.dq)(g.date,{format:"MMM DD"})},(0,s.dq)(g.date,{format:"MMM DD"})," "),n.createElement("a",{className:i.link,href:o.QX.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:i.title},g.title)),n.createElement("div",{className:i.content,dangerouslySetInnerHTML:{__html:o.QX.sanitize(g.content)}})))}const d=r=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${r.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${r.spacing(1)};
    border-bottom: 2px solid ${r.colors.border.weak};
    background: ${r.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${r.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${r.shape.radius.default} ${r.shape.radius.default} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${r.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${r.shape.radius.default};
    }
  `,link:t.css`
    color: ${r.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${r.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${r.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${r.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${r.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${r.shape.radius.default};
    color: ${r.colors.text.secondary};
  `})},6981:(Y,O,e)=>{"use strict";e.d(O,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(Y,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(13821),n=e(12115);function o(p){const y=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(y.querySelectorAll("entry")).map(h=>({title:d(h,"title"),link:h.querySelector("link")?.getAttribute("href")??"",content:d(h,"content"),pubDate:d(h,"published"),ogImage:h.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(p){const y=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(y.querySelectorAll("item")).map(h=>({title:d(h,"title"),link:d(h,"link"),content:d(h,"description"),pubDate:d(h,"pubDate"),ogImage:h.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function l(p){return await(await fetch(p)).text()}function f(p){return new DOMParser().parseFromString(p,"text/xml").querySelector("feed")!==null}function d(p,g){return p.querySelector(g)?.textContent??""}async function r(p){const g=await l(p);return f(g)?o(g):s(g)}var c=e(67483),a=e(99098);function u(p){const g=[],y=[],E=[],h=[],v=[];for(const C of p.items){const m=(0,c.CQ)(C.pubDate);try{if(g.push(m.valueOf()),y.push(C.title),E.push(C.link),v.push(C.ogImage),C.content){const D=C.content.replace(/<\/?[^>]+(>|$)/g,"");h.push(D)}}catch(D){console.warn("Error reading news item:",D,C)}}return{fields:[{name:"date",type:a.fS.time,config:{displayName:"Date"},values:g},{name:"title",type:a.fS.string,config:{},values:y},{name:"link",type:a.fS.string,config:{},values:E},{name:"content",type:a.fS.string,config:{},values:h},{name:"ogImage",type:a.fS.string,config:{},values:v}],length:g.length}}function i(p){const[g,y]=(0,t.Z)(async()=>{const E=await r(p),h=u(E);return new n.U(h)},[p],{loading:!0});return{state:g,getNews:y}}},74538:(Y,O,e)=>{"use strict";e.d(O,{E:()=>Et});var t=e(9892),n=e(9085),o=e.n(n),s=e(66111),l=e(62326),f=e(72648),d=e(67487),r=e(39904),c=e(68545);const a=(0,s.memo)(function(Fe){const{edge:Ee,onClick:Me,onMouseEnter:He,onMouseLeave:Ze,hovering:lt}=Fe,{source:bt,target:Pt}=Ee,Je=(0,c.dM)({x1:bt.x,y1:bt.y,x2:Pt.x,y2:Pt.y},90);return s.createElement("g",{onClick:Dt=>Me(Dt,Ee),style:{cursor:"pointer"},"aria-label":`Edge from: ${bt.id} to: ${Pt.id}`},s.createElement("line",{strokeWidth:lt?2:1,stroke:"#999",x1:Je.x1,y1:Je.y1,x2:Je.x2,y2:Je.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:Je.x1,y1:Je.y1,x2:Je.x2,y2:Je.y2,strokeWidth:20,onMouseEnter:()=>{He(Ee.id)},onMouseLeave:()=>{Ze(Ee.id)}}))});function u(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const i=Ue=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${Ue.components.tooltip.background};
    `,text:t.css`
      fill: ${Ue.components.tooltip.text};
    `}),p=(0,s.memo)(function(Fe){const{edge:Ee}=Fe,{source:Me,target:He}=Ee,Ze=(0,c.dM)({x1:Me.x,y1:Me.y,x2:He.x,y2:He.y},90),lt={x:Ze.x1+(Ze.x2-Ze.x1)/2,y:Ze.y1+(Ze.y2-Ze.y1)/2},bt=(0,f.wW)(i),Pt=[Ee.mainStat,Ee.secondaryStat].filter(st=>st),Je=Pt.length>1?"30":"15",Dt=Pt.length>1?15:7.5;let Ve=Pt.length>1?-5:2.5;const Xe=[];return Pt.forEach((st,ut)=>{Xe.push(s.createElement("text",{key:ut,className:bt.text,x:lt.x,y:lt.y+Ve,textAnchor:"middle"},st)),Ve+=15}),s.createElement("g",{className:bt.mainGroup},s.createElement("rect",{className:bt.background,x:lt.x-40,y:lt.y-Dt,width:"80",height:Je,rx:"5"}),Xe)});var g=e(82897),y=e(53768),E=e(40538),h=e(78056),v=e(46920);function C(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const m=function(Fe){const{nodes:Ee,onSort:Me,sort:He,sortable:Ze}=Fe,lt=(0,f.l4)(),bt=(0,f.wW)(C),Pt=D(Ee,lt),Je=(0,s.useCallback)(Dt=>{Me({field:Dt.data.field,ascending:Dt.data.field===He?.field?!He?.ascending:!1})},[He,Me]);return s.createElement(h.l,{className:bt.legend,displayMode:E.jK.List,placement:"bottom",items:Pt,itemRenderer:Dt=>s.createElement(s.Fragment,null,s.createElement(v.e,{item:Dt,className:bt.item,onLabelClick:Ze?Je:void 0}),Ze&&(He?.field===Dt.data.field?s.createElement(r.J,{name:He.ascending?"arrow-up":"arrow-down"}):""))})};function D(Ue,Fe){if(!Ue.length)return[];const Ee=[Ue[0].mainStat,Ue[0].secondaryStat].filter(g.identity),Me=Ue.find(He=>He.arcSections.length>0);return Me&&Me.arcSections[0].config?.color?.mode===y.S.Fixed&&Ee.push(...new Set(Ue.map(He=>He.arcSections).flat())),Ue[0].color&&Ee.push(Ue[0].color),Ee.map(He=>{const Ze={label:He.config.displayName||He.name,yAxis:0,data:{field:He}};return He.config.color?.mode===y.S.Fixed&&He.config.color?.fixedColor?Ze.color=Fe.visualization.getColorByName(He.config.color?.fixedColor||""):He.config.color?.mode&&(Ze.gradient=He.config.color?.mode),Ze.color||Ze.gradient||(Ze.color=Fe.visualization.getColorByName("")),Ze})}const P=40,b=Ue=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${Ue.components.panel.background};
    stroke: ${Ue.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),M=(0,s.memo)(function(Fe){const{marker:Ee,onClick:Me}=Fe,{node:He}=Ee,Ze=(0,f.wW)(b);return He.x!==void 0&&He.y!==void 0?s.createElement("g",{"data-node-id":He.id,className:Ze.mainGroup,onClick:lt=>{Me?.(lt,Ee)},"aria-label":`Hidden nodes marker: ${He.id}`},s.createElement("circle",{className:Ze.mainCircle,r:P,cx:He.x,cy:He.y}),s.createElement("g",null,s.createElement("foreignObject",{x:He.x-25,y:He.y-25,width:"50",height:"50"},s.createElement("div",{className:Ze.text},s.createElement("span",null,Ee.count>100?">100":Ee.count," nodes"))))):null});var x=e(28550),A=e(72990);const T=40,S=(Ue,Fe)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Fe==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${Ue.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${Ue.colors.primary.text};
  `,text:t.css`
    fill: ${Ue.colors.text.primary};
    pointer-events: none;
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,x.Z)(Ue.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${(0,x.Z)(Ue.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:t.css`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),U=(0,s.memo)(function(Fe){const{node:Ee,onMouseEnter:Me,onMouseLeave:He,onClick:Ze,hovering:lt}=Fe,bt=(0,f.l4)(),Pt=S(bt,lt),Je=lt==="active";return Ee.x!==void 0&&Ee.y!==void 0?s.createElement("g",{"data-node-id":Ee.id,className:Pt.mainGroup,"aria-label":`Node: ${Ee.title}`},s.createElement("circle",{className:Pt.mainCircle,r:T,cx:Ee.x,cy:Ee.y}),Je&&s.createElement("circle",{className:Pt.hoverCircle,r:T-3,cx:Ee.x,cy:Ee.y,strokeWidth:2}),s.createElement(F,{node:Ee}),s.createElement("g",{className:Pt.text,style:{pointerEvents:"none"}},s.createElement(R,{node:Ee,hovering:lt}),s.createElement("foreignObject",{x:Ee.x-(Je?100:50),y:Ee.y+T+5,width:Je?"200":"100",height:"40"},s.createElement("div",{className:o()(Pt.titleText,Je&&Pt.textHovering)},s.createElement("span",null,Ee.title),s.createElement("br",null),s.createElement("span",null,Ee.subTitle)))),s.createElement("rect",{"data-testid":`node-click-rect-${Ee.id}`,onMouseEnter:()=>{Me(Ee.id)},onMouseLeave:()=>{He(Ee.id)},onClick:Dt=>{Ze(Dt,Ee)},className:Pt.clickTarget,x:Ee.x-T-5,y:Ee.y-T-5,width:T*2+10,height:T*2+50})):null});function R({node:Ue,hovering:Fe}){const Ee=(0,f.l4)(),Me=S(Ee,Fe),He=Fe==="active";return Ue.x!==void 0&&Ue.y!==void 0?Ue.icon?s.createElement("foreignObject",{x:Ue.x-35,y:Ue.y-20,width:"70",height:"40"},s.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},s.createElement(r.J,{"data-testid":`node-icon-${Ue.icon}`,name:Ue.icon,size:"xxxl"}))):s.createElement("foreignObject",{x:Ue.x-(He?100:35),y:Ue.y-15,width:He?"200":"70",height:"40"},s.createElement("div",{className:o()(Me.statsText,He&&Me.textHovering)},s.createElement("span",null,Ue.mainStat&&(0,c.Ew)(Ue.mainStat.config,Ue.mainStat.values[Ue.dataFrameRowIndex])),s.createElement("br",null),s.createElement("span",null,Ue.secondaryStat&&(0,c.Ew)(Ue.secondaryStat.config,Ue.secondaryStat.values[Ue.dataFrameRowIndex])))):null}function F(Ue){const{node:Fe}=Ue,Ee=Fe.arcSections.find(lt=>lt.values[Fe.dataFrameRowIndex]>=1),Me=(0,f.l4)();if(Ee)return s.createElement("circle",{fill:"none",stroke:Me.visualization.getColorByName(Ee.config.color?.fixedColor||""),strokeWidth:2,r:T,cx:Fe.x,cy:Fe.y});const He=Fe.arcSections.filter(lt=>lt.values[Fe.dataFrameRowIndex]!==0);if(He.length===0)return s.createElement("circle",{fill:"none",stroke:Fe.color?K(Fe.color,Fe.dataFrameRowIndex,Me):"gray",strokeWidth:2,r:T,cx:Fe.x,cy:Fe.y});const{elements:Ze}=He.reduce((lt,bt,Pt)=>{const Je=bt.config.color?.fixedColor||"",Dt=bt.values[Fe.dataFrameRowIndex],Ve=s.createElement(B,{key:Pt,r:T,x:Fe.x,y:Fe.y,startPercent:lt.percent,percent:Dt+lt.percent>1?1-lt.percent:Dt,color:Me.visualization.getColorByName(Je),strokeWidth:2});return lt.elements.push(Ve),lt.percent=lt.percent+Dt,lt},{elements:[],percent:0});return s.createElement(s.Fragment,null,Ze)}function B({r:Ue,x:Fe,y:Ee,startPercent:Me,percent:He,color:Ze,strokeWidth:lt=2}){const bt=Me+He,Pt=Fe+Math.sin(2*Math.PI*Me)*Ue,Je=Ee-Math.cos(2*Math.PI*Me)*Ue,Dt=Fe+Math.sin(2*Math.PI*bt)*Ue,Ve=Ee-Math.cos(2*Math.PI*bt)*Ue,Xe=He>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${Pt} ${Je} A ${Ue} ${Ue} 0 ${Xe} 1 ${Dt} ${Ve}`,stroke:Ze,strokeWidth:lt})}function K(Ue,Fe,Ee){return Ue.config.color?(0,A.fD)(Ue).getCalculator(Ue,Ee)(0,Ue.values[Fe]):Ue.values[Fe]}var L=e(52081),N=e(31403);function z(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function G(Ue){const{config:Fe,onConfigChange:Ee,onPlus:Me,onMinus:He,disableZoomOut:Ze,disableZoomIn:lt}=Ue,[bt,Pt]=(0,s.useState)(!1),Je=!1,Dt=(0,f.wW)(z);return s.createElement("div",{className:Dt.wrapper},s.createElement(L.wc,{spacing:"sm"},s.createElement(L.Lh,{spacing:"xs"},s.createElement(N.zx,{icon:"plus-circle",onClick:Me,size:"md",title:"Zoom in",variant:"secondary",disabled:lt}),s.createElement(N.zx,{icon:"minus-circle",onClick:He,size:"md",title:"Zoom out",variant:"secondary",disabled:Ze})),s.createElement(L.Lh,{spacing:"xs"},s.createElement(N.zx,{icon:"code-branch",onClick:()=>Ee({...Fe,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Fe.gridLayout}),s.createElement(N.zx,{icon:"apps",onClick:()=>Ee({...Fe,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Fe.gridLayout}))),Je&&s.createElement(N.zx,{size:"xs",fill:"text",onClick:()=>Pt(Ve=>!Ve)},bt?"Hide config":"Show config"),Je&&bt&&Object.keys(Fe).filter(Ve=>Ve!=="show").map(Ve=>s.createElement("div",{key:Ve},Ve,s.createElement("input",{style:{width:50},type:"number",value:Fe[Ve],onChange:Xe=>{Ee({...Fe,[Ve]:parseFloat(Xe.target.value)})}}))))}var I=e(88687),V=e(92653),H=e(77410);const Q=()=>new H.q(new URL(e.p+e.u(1256),e.b));function oe(Ue,Fe,Ee,Me,He){const[Ze,lt]=(0,s.useMemo)(()=>{if(!(Ue.length&&Fe.length))return[{},{}];const bt=Fe.reduce((Je,Dt)=>(Je[Dt.source.id]=[...Je[Dt.source.id]??[],Dt],Je[Dt.target.id]=[...Je[Dt.target.id]??[],Dt],Je),{}),Pt=Ue.reduce((Je,Dt)=>(Je[Dt.id]=Dt,Je),{});return[bt,Pt]},[Fe,Ue]);return(0,s.useMemo)(()=>Ue.length<=Ee?{nodes:Ue,edges:Fe}:Me.gridLayout?ie(Ue,Ee,He):se(Ue,Fe,lt,Ze,Ee,He),[Fe,Ze,Ee,Ue,lt,He,Me.gridLayout])}function se(Ue,Fe,Ee,Me,He,Ze){let lt;Ze?lt=[Ee[Ze]]:(lt=Ue.filter(Xe=>Xe.incoming===0),lt.length||(lt=[Ue[0]]));const{visibleNodes:bt,markers:Pt}=j(He,lt,Ee,Me),Je=de(Pt,bt,Ee,Me),Dt=(0,g.fromPairs)(Je.map(Xe=>[Xe.node.id,Xe]));for(const Xe of Je)Xe.count===1&&(delete Dt[Xe.node.id],bt[Xe.node.id]=Xe.node);const Ve=Fe.filter(Xe=>(bt[Xe.source.id]||Dt[Xe.source.id])&&(bt[Xe.target.id]||Dt[Xe.target.id]));return{nodes:Object.values(bt),edges:Ve,markers:Object.values(Dt)}}function ie(Ue,Fe,Ee){let Me=0,He=Fe,Ze=[];if(Ee){const lt=Ue.findIndex(Je=>Je.id===Ee),bt=Math.floor(Fe/2);let Pt=bt;Me=lt-bt,Me<0&&(Pt+=Math.abs(Me),Me=0),He=lt+Pt+1,He>Ue.length&&(Me>0&&(Me=Math.max(0,Me-(He-Ue.length))),He=Ue.length),Me>1&&Ze.push({node:Ue[Me-1],count:Me}),Ue.length-He>1&&Ze.push({node:Ue[He],count:Ue.length-He})}else Ue.length-Fe>1&&(Ze=[{node:Ue[Fe],count:Ue.length-Fe}]);return{nodes:Ue.slice(Me,He),edges:[],markers:Ze}}function j(Ue,Fe,Ee,Me){const He={};let Ze=[...Fe];for(;Object.keys(He).length<Ue&&Ze.length>0;){let bt=Ze.shift();if(He[bt.id])continue;He[bt.id]=bt;const Je=(Me[bt.id]||[]).map(Dt=>{const Ve=Dt.source.id===bt.id?Dt.target.id:Dt.source.id;return Ee[Ve]});Ze=Ze.concat(Je)}const lt=(0,g.uniq)(Ze.filter(bt=>!He[bt.id]));return{visibleNodes:He,markers:lt}}function de(Ue,Fe,Ee,Me){return Ue.map(He=>{const Ze={};let lt=0,bt=[He];for(;bt.length>0&&lt<=101;){let Pt=bt.shift();if(Fe[Pt.id]||Ze[Pt.id])continue;Ze[Pt.id]||lt++,Ze[Pt.id]=Pt;const Dt=(Me[Pt.id]||[]).map(Ve=>{const Xe=Ve.source.id===Pt.id?Ve.target.id:Ve.source.id;return Ee[Xe]});bt=bt.concat(Dt)}return{node:He,count:lt}})}const ce={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function ee(Ue,Fe,Ee=ce,Me,He,Ze){const[lt,bt]=(0,s.useState)([]),[Pt,Je]=(0,s.useState)([]),[Dt,Ve]=(0,s.useState)(!1),Xe=(0,V.default)(),st=(0,s.useRef)();(0,I.Z)(()=>{st.current&&st.current()}),(0,s.useEffect)(()=>{if(Ue.length===0){bt([]),Je([]),Ve(!1);return}Ve(!0);const jn=le(Ue,Fe,({nodes:ya,edges:Lt})=>{Xe()&&(bt(ya),Je(Lt),Ve(!1))});return st.current=jn,jn},[Ue,Fe,Xe]);const[ut,xt]=(0,s.useMemo)(()=>{if(Ue.length===0)return[[],[]];const jn=Ue.map(Lt=>({...Lt})),ya=Fe.map(Lt=>({...Lt}));return q(jn,He,Ee.sort),[jn,ya]},[Ee.sort,Ue,Fe,He]),{nodes:Kt,edges:Jt,markers:On}=oe(Ee.gridLayout?ut:lt,Ee.gridLayout?xt:Pt,Me,Ee,Ze),Nn=(0,s.useMemo)(()=>(0,c.Tz)([...Kt,...(On||[]).map(jn=>jn.node)]),[Kt,On]);return{nodes:Kt,edges:Jt,markers:On,bounds:Nn,hiddenNodesCount:Ue.length-Kt.length,loading:Dt}}function le(Ue,Fe,Ee){const Me=Q();return Me.onmessage=He=>{for(let Ze=0;Ze<Ue.length;Ze++)He.data.nodes[Ze]={...Ue[Ze],...He.data.nodes[Ze]};Ee(He.data)},Me.postMessage({nodes:Ue.map(He=>({id:He.id,incoming:He.incoming})),edges:Fe,config:ce}),()=>{Me.terminate()}}function q(Ue,Fe,Ee){const lt=Math.min(Math.floor((Fe-120)/140),Ue.length),bt=Math.floor((lt-1)*120/2);Ee&&Ue.sort((Pt,Je)=>{const Dt=Ee.field.values[Pt.dataFrameRowIndex],Ve=Ee.field.values[Je.dataFrameRowIndex];return Ee.ascending?Dt-Ve:Ve-Dt});for(const[Pt,Je]of Ue.entries()){const Dt=Math.floor(Pt/lt),Ve=Pt%lt;Je.x=Ve*120-bt,Je.y=-60+Dt*140}}var fe=e(85506),Z=e(30909),ne=e(14391),re=e(42044);function ve(Ue,Fe,Ee,Me,He,Ze){const[lt,bt]=(0,s.useState)(void 0),Pt=(0,s.useCallback)((Dt,Ve)=>{const[Xe,st]=Me.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],ut=[{label:Xe,onClick:Jt=>{Ze(Jt.id),He({...Me,gridLayout:st}),bt(void 0)}}],xt=Fe?Ue(Fe,Ve.dataFrameRowIndex):[],Kt=Ie(xt,Ve,ut);bt(me(s.createElement(Ye,{node:Ve,nodes:Fe}),Dt,bt,Kt))},[Me,Fe,Ue,bt,He,Ze]);return{onEdgeOpen:(0,s.useCallback)((Dt,Ve)=>{if(!Ee)return;const Xe=Ue(Ee,Ve.dataFrameRowIndex),st=Ie(Xe,Ve);bt(me(s.createElement(it,{edge:Ve,edges:Ee}),Dt,bt,st))},[Ee,Ue,bt]),onNodeOpen:Pt,MenuComponent:lt}}function me(Ue,Fe,Ee,Me){return s.createElement(Z.x,{renderHeader:()=>Ue,renderMenuItems:Me,onClose:()=>Ee(void 0),x:Fe.pageX,y:Fe.pageY})}function Ie(Ue,Fe,Ee){if(!(Ue.length||Ee?.length))return;const Me=gt(Ue);return()=>{let He=Me?.map((Ze,lt)=>s.createElement(ne.k,{key:`${Ze.label}${lt}`,label:Ze.label},(Ze.items||[]).map(Ge(Fe))));return Ee&&(He=[...Ee.map(Ge(Fe)),...He]),He}}function Ge(Ue){return function(Ee){return s.createElement(re.s,{key:Ee.label,url:Ee.url,label:Ee.label,ariaLabel:Ee.ariaLabel,onClick:Ee.onClick?Me=>{Me?.ctrlKey||Me?.metaKey||Me?.shiftKey||(Me?.preventDefault(),Me?.stopPropagation(),Ee.onClick?.(Ue))}:void 0,target:"_self"})}}function gt(Ue){const Fe="Open in Explore",Ee=Ue.reduce((Me,He)=>{let Ze,lt;return He.title.indexOf("/")!==-1?(Ze=He.title.split("/")[0],lt=He.title.split("/")[1],Me[Ze]=Me[Ze]||[],Me[Ze].push({l:He,newTitle:lt})):(Me[Fe]=Me[Fe]||[],Me[Fe].push({l:He})),Me},{});return Object.keys(Ee).map(Me=>({label:Me,ariaLabel:Me,items:Ee[Me].map(He=>({label:He.newTitle||He.l.title,ariaLabel:He.newTitle||He.l.title,url:He.l.href,onClick:He.l.onClick}))}))}function Te({field:Ue,index:Fe}){return s.createElement(Le,{label:Ue.config?.displayName||Ue.name,value:(0,c.Ew)(Ue.config,Ue.values[Fe]||"")})}function Le({label:Ue,value:Fe}){const Ee=(0,f.wW)(ht);return s.createElement("tr",null,s.createElement("td",{className:Ee.label},Ue,": "),s.createElement("td",{className:Ee.value},Fe))}function Ye({node:Ue,nodes:Fe}){const Ee=[];if(Fe){const Me=(0,c.F)(Fe);for(const He of[Me.title,Me.subTitle,Me.mainStat,Me.secondaryStat,...Me.details])He&&He.values[Ue.dataFrameRowIndex]&&Ee.push(s.createElement(Te,{field:He,index:Ue.dataFrameRowIndex}))}else Ue.title&&Ee.push(s.createElement(Le,{label:"Title",value:Ue.title})),Ue.subTitle&&Ee.push(s.createElement(Le,{label:"Subtitle",value:Ue.subTitle}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,Ee))}function it(Ue){const Fe=Ue.edge.dataFrameRowIndex,Ee=(0,c.lr)(Ue.edges),Me=Ee.source?.values[Fe]||"",He=Ee.target?.values[Fe]||"",Ze=[];Me&&He&&Ze.push(s.createElement(Le,{key:"header-row",label:"Source \u2192 Target",value:`${Me} \u2192 ${He}`}));for(const lt of[Ee.mainStat,Ee.secondaryStat,...Ee.details])lt&&lt.values[Fe]&&Ze.push(s.createElement(Te,{key:`field-row-${Fe}`,field:lt,index:Fe}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,Ze))}const ht=Ue=>({label:t.css`
      label: Label;
      line-height: 1.25;
      color: ${Ue.colors.text.disabled};
      font-size: ${Ue.typography.size.sm};
      font-weight: ${Ue.typography.fontWeightMedium};
      padding-right: ${Ue.spacing(1)};
    `,value:t.css`
      label: Value;
      font-size: ${Ue.typography.size.sm};
      font-weight: ${Ue.typography.fontWeightMedium};
      color: ${Ue.colors.text.primary};
    `});var Re=e(83272);function ye(Ue,Fe,Ee){const Me=(0,Re.Z)(Ue.gridLayout);let He;if(Me===!0&&!Ue.gridLayout&&Ee){const Ze=Fe.find(lt=>lt.id===Ee);Ze&&(He={x:-Ze.x,y:-Ze.y})}return He}function Ce(Ue){const[Fe,Ee]=(0,s.useState)(),Me=(0,V.default)();return(0,s.useEffect)(()=>{Ue&&(Ee(Ue),setTimeout(()=>{Me()&&Ee(void 0)},500))},[Ue,Me]),Fe}function be({scale:Ue=1,bounds:Fe,focus:Ee}={}){const Me=(0,V.default)(),He=(0,s.useRef)(!1),Ze=(0,s.useRef)(0),lt=(0,s.useRef)(null),bt={x:0,y:0},Pt=(0,s.useMemo)(()=>({right:Fe?-Fe.left:1/0,left:Fe?-Fe.right:-1/0,bottom:Fe?-Fe.top:-1/0,top:Fe?-Fe.bottom:1/0}),[Fe]),Je=(0,s.useRef)(bt),Dt=(0,s.useRef)(bt),Ve=(0,s.useRef)(bt),[Xe,st]=(0,s.useState)({isPanning:!1,position:bt});(0,s.useEffect)(()=>{const Kt=ft=>{!He.current&&Me()&&(He.current=!0,Je.current=Qe(ft),Dt.current={...Ve.current},st(Ht=>({...Ht,isPanning:!0})),Nn())},Jt=()=>{He.current&&Me()&&(He.current=!1,st(ft=>({...ft,isPanning:!1})),jn())},On=ft=>{Kt(ft),ya(ft)},Nn=()=>{document.addEventListener("mousemove",ya),document.addEventListener("mouseup",Jt),document.addEventListener("touchmove",ya),document.addEventListener("touchend",Jt)},jn=()=>{document.removeEventListener("mousemove",ya),document.removeEventListener("mouseup",Jt),document.removeEventListener("touchmove",ya),document.removeEventListener("touchend",Jt)},ya=ft=>{cancelAnimationFrame(Ze.current);const Ht=Qe(ft);Ze.current=requestAnimationFrame(()=>{if(Me()&&lt.current){let $t=Ht.x-Je.current.x,zt=Ht.y-Je.current.y;Ve.current={x:We(Dt.current.x+$t/Ue,Pt.left,Pt.right),y:We(Dt.current.y+zt/Ue,Pt.top,Pt.bottom)},st(Wt=>({...Wt,position:{...Ve.current}}))}})},Lt=lt.current;return Lt&&(Lt.addEventListener("mousedown",On),Lt.addEventListener("touchstart",On)),()=>{Lt&&(Lt.removeEventListener("mousedown",On),Lt.removeEventListener("touchstart",On))}},[Ue,Pt,Me]);const ut=(0,Re.Z)(Ee);(0,s.useEffect)(()=>{if(Ee&&ut?.x!==Ee.x&&ut?.y!==Ee.y){const Kt={x:We(Ee.x,Pt.left,Pt.right),y:We(Ee.y,Pt.top,Pt.bottom)};st({position:Kt,isPanning:!1}),Ve.current=Kt,Dt.current=Kt}},[Ee,ut,Pt,Ve,Dt]);let xt=Xe.position;return Ee&&ut?.x!==Ee.x&&ut?.y!==Ee.y&&(xt=Ee),{state:{...Xe,position:{x:We(xt.x,Pt.left,Pt.right),y:We(xt.y,Pt.top,Pt.bottom)}},ref:lt}}function We(Ue,Fe,Ee){return Math.min(Math.max(Ue,Fe??-1/0),Ee??1/0)}function Qe(Ue){if(Ue.changedTouches){const Fe=Ue;return{x:Fe.changedTouches[0].clientX,y:Fe.changedTouches[0].clientY}}else{const Fe=Ue;return{x:Fe.clientX,y:Fe.clientY}}}const mt={stepDown:Ue=>Ue/1.5,stepUp:Ue=>Ue*1.5,min:.13,max:2.25};function vt({stepUp:Ue,stepDown:Fe,min:Ee,max:Me}=mt){const He=(0,s.useRef)(null),[Ze,lt]=(0,s.useState)(1),bt=(0,s.useCallback)(()=>{Ze<(Me??1/0)&&lt(Ue(Ze))},[Ze,Ue,Me]),Pt=(0,s.useCallback)(()=>{Ze>(Ee??-1/0)&&lt(Fe(Ze))},[Ze,Fe,Ee]),Je=(0,s.useCallback)(function(Dt){if(Dt.ctrlKey||Dt.metaKey){if(Dt.preventDefault(),lt(Math.min(Math.max(Ee??-1/0,Ze+Math.min(Dt.deltaY,2)*-.01),Me??1/0)),Dt.deltaY<0){const Ve=Ze+Math.max(Dt.deltaY,-4)*-.015;lt(Math.max(Ee??-1/0,Ve))}else if(Dt.deltaY>0){const Ve=Ze+Math.min(Dt.deltaY,4)*-.015;lt(Math.min(Me??1/0,Ve))}}},[Ee,Me,Ze]);return(0,s.useEffect)(()=>{if(!He.current)return;const Dt=He.current;return Dt.addEventListener("wheel",Je,{passive:!1}),()=>{Dt&&Dt.removeEventListener("wheel",Je)}},[Je]),{onStepUp:bt,onStepDown:Pt,scale:Math.max(Math.min(Ze,Me??1/0),Ee??-1/0),isMax:Ze>=(Me??1/0),isMin:Ze<=(Ee??-1/0),ref:He}}const rt=Ue=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Ue.typography.h4.fontSize};
    color: ${Ue.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${Ue.colors.background.secondary};
    box-shadow: ${Ue.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${Ue.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${Ue.colors.warning.main};
    color: ${Ue.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),Ot=200;function Et({getLinks:Ue,dataFrames:Fe,nodeLimit:Ee}){const Me=Ee||Ot,{edges:He,nodes:Ze}=(0,fe.Y)(Fe),[lt,{width:bt,height:Pt}]=(0,l.Z)(),[Je,Dt]=(0,s.useState)(ce),Ve=Ze[0],Xe=He[0],st=(0,s.useMemo)(()=>(0,c.HB)(Ve,Xe),[Xe,Ve]),{nodeHover:ut,setNodeHover:xt,clearNodeHover:Kt,edgeHover:Jt,setEdgeHover:On,clearEdgeHover:Nn}=et(),[jn,ya]=(0,s.useState)([]);(0,s.useEffect)(()=>{let Ta=[];ut?Ta=(0,c.uX)(st.nodes,st.edges,ut):Jt&&(Ta=(0,c.MP)(st.nodes,st.edges,Jt)),ya(Ta)},[ut,Jt,st]);const[Lt,ft]=(0,s.useState)(),Ht=(0,s.useCallback)((Ta,Wa)=>ft(Wa.node.id),[ft]),{nodes:$t,edges:zt,markers:Wt,bounds:jt,hiddenNodesCount:sn,loading:pn}=ee(st.nodes,st.edges,Je,Me,bt,Lt),Pn=ye(Je,$t,Lt),{panRef:Mn,zoomRef:Cn,onStepUp:Hn,onStepDown:_n,isPanning:oa,position:Gt,scale:Bt,isMaxZoom:on,isMinZoom:rn}=tt(jt,Pn),{onEdgeOpen:In,onNodeOpen:Ln,MenuComponent:Un}=ve(Ue,Ve,Xe,Je,Dt,ft),qn=(0,f.wW)(rt),da=(0,s.useCallback)(Ta=>{lt(Ta),Cn.current=Ta},[lt,Cn]),ha=Ce(Lt);return s.createElement("div",{ref:da,className:qn.wrapper},pn?s.createElement("div",{className:qn.loadingWrapper},"Computing layout\xA0",s.createElement(d.$,null)):null,Fe.length&&st.nodes.length?s.createElement("svg",{ref:Mn,viewBox:`${-(bt/2)} ${-(Pt/2)} ${bt} ${Pt}`,className:o()(qn.svg,oa&&qn.svgPanning)},s.createElement("g",{className:qn.mainGroup,style:{transform:`scale(${Bt}) translate(${Math.floor(Gt.x)}px, ${Math.floor(Gt.y)}px)`}},s.createElement(u,null),!Je.gridLayout&&s.createElement(De,{edges:zt,nodeHoveringId:ut,edgeHoveringId:Jt,onClick:In,onMouseEnter:On,onMouseLeave:Nn}),s.createElement(Mt,{nodes:$t,onMouseEnter:xt,onMouseLeave:Kt,onClick:Ln,hoveringIds:jn||[ha]}),s.createElement(ue,{markers:Wt||[],onClick:Ht}),!Je.gridLayout&&s.createElement(Ne,{edges:zt,nodeHoveringId:ut,edgeHoveringId:Jt}))):s.createElement("div",{className:qn.noDataMsg},"No data"),s.createElement("div",{className:qn.viewControls},$t.length?s.createElement("div",{className:qn.legend},s.createElement(m,{sortable:Je.gridLayout,nodes:$t,sort:Je.sort,onSort:Ta=>{Dt({...Je,sort:Ta})}})):null,s.createElement("div",{className:qn.viewControlsWrapper},s.createElement(G,{config:Je,onConfigChange:Ta=>{Ta.gridLayout!==Je.gridLayout&&ft(void 0),Dt(Ta)},onMinus:_n,onPlus:Hn,scale:Bt,disableZoomIn:on,disableZoomOut:rn}))),sn>0&&s.createElement("div",{className:qn.alert,"aria-label":"Nodes hidden warning"},s.createElement(r.J,{size:"sm",name:"info-circle"})," ",sn," nodes are hidden for performance reasons."),Un)}const Mt=(0,s.memo)(function(Fe){return s.createElement(s.Fragment,null,Fe.nodes.map(Ee=>s.createElement(U,{key:Ee.id,node:Ee,onMouseEnter:Fe.onMouseEnter,onMouseLeave:Fe.onMouseLeave,onClick:Fe.onClick,hovering:!Fe.hoveringIds||Fe.hoveringIds.length===0?"default":Fe.hoveringIds?.includes(Ee.id)?"active":"inactive"})))}),ue=(0,s.memo)(function(Fe){return s.createElement(s.Fragment,null,Fe.markers.map(Ee=>s.createElement(M,{key:"marker-"+Ee.node.id,marker:Ee,onClick:Fe.onClick})))}),De=(0,s.memo)(function(Fe){return s.createElement(s.Fragment,null,Fe.edges.map(Ee=>s.createElement(a,{key:Ee.id,edge:Ee,hovering:Ee.source.id===Fe.nodeHoveringId||Ee.target.id===Fe.nodeHoveringId||Fe.edgeHoveringId===Ee.id,onClick:Fe.onClick,onMouseEnter:Fe.onMouseEnter,onMouseLeave:Fe.onMouseLeave})))}),Ne=(0,s.memo)(function(Fe){return s.createElement(s.Fragment,null,Fe.edges.map((Ee,Me)=>{const He=Ee.source.id===Fe.nodeHoveringId||Ee.target.id===Fe.nodeHoveringId||Fe.edgeHoveringId===Ee.id,Ze=Ee.mainStat||Ee.secondaryStat;return He&&Ze&&s.createElement(p,{key:Ee.id,edge:Ee})}))});function tt(Ue,Fe){const{scale:Ee,onStepDown:Me,onStepUp:He,ref:Ze,isMax:lt,isMin:bt}=vt(),{state:Pt,ref:Je}=be({scale:Ee,bounds:Ue,focus:Fe}),{position:Dt,isPanning:Ve}=Pt;return{zoomRef:Ze,panRef:Je,position:Dt,isPanning:Ve,scale:Ee,onStepDown:Me,onStepUp:He,isMaxZoom:lt,isMinZoom:bt}}function et(){const[Ue,Fe]=(0,s.useState)(void 0),Ee=(0,s.useCallback)(()=>Fe(void 0),[Fe]),[Me,He]=(0,s.useState)(void 0),Ze=(0,s.useCallback)(()=>He(void 0),[He]);return{nodeHover:Ue,setNodeHover:Fe,clearNodeHover:Ee,edgeHover:Me,setEdgeHover:He,clearEdgeHover:Ze}}},85506:(Y,O,e)=>{"use strict";e.d(O,{Y:()=>n});var t=e(66111);function n(o){return(0,t.useMemo)(()=>o.reduce((s,l)=>(l.fields.filter(d=>d.name==="source").length?s.edges.push(l):s.nodes.push(l),s),{edges:[],nodes:[]}),[o])}},68545:(Y,O,e)=>{"use strict";e.d(O,{Ee:()=>b,Ew:()=>E,F:()=>f,HB:()=>c,MP:()=>x,Tz:()=>P,dM:()=>l,lr:()=>d,uX:()=>A});var t=e(5109),n=e(92468),o=e(99098),s=e(53768);function l(T,S){const U=T.x2-T.x1,R=T.y2-T.y1,F=Math.sqrt(U*U+R*R),B=Math.max((F-S)/F,0),K=U*B,L=R*B,N=U-K,z=R-L,G=T.x1+N/2,I=T.y1+z/2;return{x1:G,y1:I,x2:G+K,y2:I+L}}function f(T){const S={...T,fields:T.fields.map(R=>({...R,name:R.name.toLowerCase()}))},U=new t.N(S);return{id:U.getFieldByName(n.z.id.toLowerCase()),title:U.getFieldByName(n.z.title.toLowerCase()),subTitle:U.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:U.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:r(T,n.z.arc),details:r(T,n.z.detail),color:U.getFieldByName(n.z.color),icon:U.getFieldByName(n.z.icon)}}function d(T){const S={...T,fields:T.fields.map(R=>({...R,name:R.name.toLowerCase()}))},U=new t.N(S);return{id:U.getFieldByName(n.z.id.toLowerCase()),source:U.getFieldByName(n.z.source.toLowerCase()),target:U.getFieldByName(n.z.target.toLowerCase()),mainStat:U.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(n.z.secondaryStat.toLowerCase()),details:r(T,n.z.detail.toLowerCase())}}function r(T,S){return T.fields.filter(U=>U.name.match(new RegExp("^"+S)))}function c(T,S){if(!(S||T))return{nodes:[],edges:[]};if(T){const U=f(T);if(!U.id)throw new Error("id field is required for nodes data frame.");const R={};for(let B=0;B<U.id.values.length;B++){const K=U.id.values[B];R[K]=y(K,U,B)}let F=S?a(S,d(S)):[];for(const B of F)R[B.target].incoming++;return{nodes:Object.values(R),edges:F,legend:U.arc.map(B=>({color:B.config.color?.fixedColor??"",name:B.config.displayName||B.name}))}}else{S=S;const U={},R=d(S);let F=a(S,R);for(let K=0;K<F.length;K++){const L=F[K],{source:N,target:z}=p(R,K);U[z.id]=U[z.id]||z,U[N.id]=U[N.id]||N,u(R.mainStat)&&(U[z.id].mainStatNumeric=(U[z.id].mainStatNumeric??0)+R.mainStat.values[K]),u(R.secondaryStat)&&(U[z.id].secondaryStatNumeric=(U[z.id].secondaryStatNumeric??0)+R.secondaryStat.values[K]),U[L.target].incoming++}return{nodes:i(U,R),edges:F}}}function a(T,S){if(!S.id)throw new Error("id field is required for edges data frame.");return S.id.values.map((U,R)=>{const F=S.target?.values[R],B=S.source?.values[R];return{id:U,dataFrameRowIndex:R,source:B,target:F,mainStat:S.mainStat?E(S.mainStat.config,S.mainStat.values[R]):"",secondaryStat:S.secondaryStat?E(S.secondaryStat.config,S.secondaryStat.values[R]):""}})}function u(T){return T&&T.type===o.fS.number}function i(T,S){const U=[],R=[],F=u(S.secondaryStat)?{...S.secondaryStat,values:U}:void 0,B=u(S.mainStat)?{...S.mainStat,values:R}:void 0;return Object.values(T).map((K,L)=>{if(B||F){const N={...K};return B&&(N.mainStat=B,R.push(K.mainStatNumeric),N.dataFrameRowIndex=L),F&&(N.secondaryStat=F,U.push(K.secondaryStatNumeric),N.dataFrameRowIndex=L),N}return K})}function p(T,S){const U=T.target?.values[S],R=T.source?.values[S];return{target:g(U,S),source:g(R,S)}}function g(T,S){return{id:T,title:T,subTitle:"",dataFrameRowIndex:S,incoming:0,arcSections:[]}}function y(T,S,U){return{id:T,title:S.title?.values[U]||"",subTitle:S.subTitle?.values[U]||"",dataFrameRowIndex:U,incoming:0,mainStat:S.mainStat,secondaryStat:S.secondaryStat,arcSections:S.arc,color:S.color,icon:S.icon?.values[U]||""}}function E(T,S){if(typeof S=="string")return S;{const U=T.decimals||2;return Number.isFinite(S)?S.toFixed(U)+(T.unit?" "+T.unit:""):""}}function h(T){const S=C();for(let U=0;U<T;U++)S.add(v(U));return S}function v(T){return{id:T.toString(),title:`service:${T}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database"}}function C(){const T={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string}};return new MutableDataFrame({name:"nodes",fields:Object.keys(T).map(S=>({...T[S],name:S}))})}function m(T){const S=D();for(const U of T)S.add({id:U.source+"--"+U.target,...U});return S}function D(){const T={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(T).map(S=>({...T[S],name:S}))})}function P(T){if(T.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const S=T.reduce((F,B)=>(B.x>F.right&&(F.right=B.x),B.x<F.left&&(F.left=B.x),B.y>F.bottom&&(F.bottom=B.y),B.y<F.top&&(F.top=B.y),F),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),U=S.top+(S.bottom-S.top)/2,R=S.left+(S.right-S.left)/2;return{...S,center:{x:R,y:U}}}function b(T,S){let U=T.filter(R=>!!(R.meta?.preferredVisualisationType==="nodeGraph"||R.name==="nodes"||R.name==="edges"||R.refId==="nodes"||R.refId==="edges"||new t.N(R).getFieldByName(n.z.id)));return S&&(U=M(U,S)),U}const M=(T,S)=>T.map(U=>{if(new t.N(U).getFieldByName(n.z.source.toLowerCase())){if(S?.edges?.mainStatUnit){const F=U.fields.find(B=>B.name.toLowerCase()===n.z.mainStat);F&&(F.config={...F.config,unit:S.edges.mainStatUnit})}if(S?.edges?.secondaryStatUnit){const F=U.fields.find(B=>B.name.toLowerCase()===n.z.secondaryStat);F&&(F.config={...F.config,unit:S.edges.secondaryStatUnit})}}else{if(S?.nodes?.mainStatUnit){const F=U.fields.find(B=>B.name.toLowerCase()===n.z.mainStat);F&&(F.config={...F.config,unit:S.nodes.mainStatUnit})}if(S?.nodes?.secondaryStatUnit){const F=U.fields.find(B=>B.name.toLowerCase()===n.z.secondaryStat);F&&(F.config={...F.config,unit:S.nodes.secondaryStatUnit})}if(S?.nodes?.arcs?.length)for(const F of S.nodes.arcs){const B=U.fields.find(K=>K.name.toLowerCase()===F.field);B&&F.color&&(B.config={...B.config,color:{fixedColor:F.color,mode:s.S.Fixed}})}}return U}),x=(T,S,U)=>{const R=S.find(F=>F.id===U);return R?[...new Set(T.filter(F=>R.source===F.id||R.target===F.id).map(F=>F.id))]:[]},A=(T,S,U)=>{const R=T.find(F=>F.id===U);if(R){const F=S.filter(B=>B.source===R.id||B.target===R.id);return[...new Set(F.flatMap(B=>T.filter(K=>B.source===K.id||B.target===K.id).map(K=>K.id)))]}return[]}},30383:(Y,O,e)=>{"use strict";e.d(O,{h:()=>d,j:()=>f});var t=e(30779),n=e(33750),o=e(30471),s=e(79086),l=e(40538);function f(r,c=!0){const a=["Value options"];r.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:a,defaultValue:!1}),r.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:a,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:u=>u.reduceOptions.values===!0}),r.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:a,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:u=>u.reduceOptions.values===!1}),c&&r.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:a,settings:{allowCustomValue:!0,options:[],getOptions:async u=>{const i=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(u&&u.data)for(const p of u.data)for(const g of p.fields){const y=(0,o.CZ)(g,p,u.data),E=`/^${(0,s.GE)(y)}$/`;i.push({value:E,label:y})}return Promise.resolve(i)}},defaultValue:""})}function d(r,c){r.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:c,settings:{options:[{value:l.wm.Auto,label:"Auto"},{value:l.wm.Horizontal,label:"Horizontal"},{value:l.wm.Vertical,label:"Vertical"}]},defaultValue:l.wm.Auto})}},98967:(Y,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>P});var t=e(36873),n=e(40538),o=e(25272),s=e(50954),l=e(53768);const f=(b,M,x)=>{const A=(0,s.ZH)(b,M,x);if(x.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const T=x.angular;if(A.graphMode=n.IG.None,T.sparkline&&T.sparkline.show&&(A.graphMode=n.IG.Area),T.colorBackground)A.colorMode=n.pc.Background;else if(T.colorValue)A.colorMode=n.pc.Value;else if(A.colorMode=n.pc.None,T.sparkline?.lineColor&&A.graphMode===n.IG.Area){const S=b.fieldConfig??{};S.defaults.color={mode:l.S.Fixed,fixedColor:T.sparkline.lineColor},b.fieldConfig=S}T.valueName==="name"&&(A.textMode=n.jG.Name)}return A};var d=e(82897),r=e(66111),c=e(99098),a=e(92156),u=e(76095),i=e(57426),p=e(18543),g=e(4387),y=e(47694);class E extends r.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,x)=>{const{timeRange:A,options:T}=this.props,{value:S,alignmentFactors:U,width:R,height:F,count:B,orientation:K}=M,{openMenu:L,targetClassName:N}=x;let z=S.sparkline;return z&&(z.timeRange=A),r.createElement(i.w6,{value:S.display,count:B,sparkline:z,colorMode:T.colorMode,graphMode:T.graphMode,justifyMode:T.justifyMode,textMode:this.getTextMode(),alignmentFactors:U,parentOrientation:K,text:T.text,width:R,height:F,theme:y.vc.theme2,onClick:L,className:N})},this.renderValue=M=>{const{value:x}=M,{getLinks:A,hasLinks:T}=x;return T&&A?r.createElement(p.V,{links:A},S=>this.renderComponent(M,S)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:x,replaceVariables:A,fieldConfig:T,timeZone:S}=this.props;let U;for(let R of M.series)for(let F of R.fields){let{config:B}=F;if(F.type===c.fS.number){if(F.state?.range)continue;!U&&(!(0,d.isNumber)(B.min)||!(0,d.isNumber)(B.max))&&(U=(0,u.Xu)(M.series));const K=B.min??U.min,L=B.max??U.max;F.state=F.state??{},F.state.range={min:K,max:L,delta:L-K}}}return(0,a.nG)({fieldConfig:T,reduceOptions:x.reduceOptions,replaceVariables:A,theme:y.vc.theme2,data:M.series,sparkline:x.graphMode!==n.IG.None,timeZone:S})}}getTextMode(){const{options:M,fieldConfig:x,title:A}=this.props;return M.textMode===n.jG.Auto&&(x.defaults.displayName||!A)?n.jG.ValueAndName:M.textMode}render(){const{height:M,options:x,width:A,data:T,renderCounter:S}=this.props;return r.createElement(g.Q,{getValues:this.getValues,getAlignmentFactors:a.sg,renderValue:this.renderValue,width:A,height:M,source:T,itemSpacing:3,renderCounter:S,autoGrid:!0,orientation:x.orientation})}}var h=e(30383);const v=Object.freeze([0,0]),C={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var m=e(26410);class D{getSuggestionsForData(M){const{dataSummary:x}=M;if(!x.hasData)return;const A=M.getListAppender({name:m.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:T=>{T.options.reduceOptions.values&&(T.options.reduceOptions.limit=1)}}});x.hasStringField&&x.hasNumberField&&x.frameCount===1&&x.rowCountTotal<10&&(A.append({name:m.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),A.append({name:m.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),x.stringFieldCount===1&&x.frameCount===1&&x.rowCountTotal<10&&x.fieldCount===1&&A.append({name:m.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),x.hasNumberField&&x.hasTimeField&&(A.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),A.append({name:m.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const P=new t.c(E).useFieldConfig().setPanelOptions(b=>{const M=["Stat styles"];(0,h.j)(b),(0,h.h)(b,M),o.Z(b),b.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:C.textMode}),b.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:M,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background Gradient"},{value:n.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:C.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:C.justifyMode,category:M,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(f).setSuggestionsSupplier(new D).setMigrationHandler(s.rD)},66683:(Y,O,e)=>{"use strict";e.d(O,{j:()=>c});var t=e(66111),n=e(52081),o=e(2594),s=e(8581),l=e(8180);const f=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],d=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(u=>({label:u,value:u})),r=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(u=>({label:u,value:u})),c=({value:u,onChange:i})=>{const p=(0,t.useMemo)(()=>u?.fill==="dash"?d:r,[u]),g=(0,t.useMemo)(()=>{if(!u?.dash?.length)return p[0];const y=u.dash?.join(", "),E=p.find(h=>h.value===y);return E||{label:y,value:y}},[u,p]);return t.createElement(n.Lh,null,t.createElement(o.S,{value:u?.fill||"solid",options:f,onChange:y=>{let E;y==="dot"?E=a(r[0].value):y==="dash"&&(E=a(d[0].value)),i({...u,fill:y,dash:E})}}),u?.fill&&u?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:p,value:g,width:20,onChange:y=>{i({...u,dash:a(y.value??"")})},formatCreateLabel:y=>`Segments: ${a(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(l.h,{name:"question-circle"})))))};function a(u){const i=[];for(const p of u.split(/(?:,| )+/)){const g=Number.parseInt(p,10);isNaN(g)||i.push(g)}return i}},49616:(Y,O,e)=>{"use strict";e.d(O,{c:()=>d});var t=e(66111),n=e(47891),o=e(52081),s=e(2594),l=e(46967);const f=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],d=({value:r,onChange:c})=>{const a=typeof r=="number",u=a?n.secondsToHms(r/1e3):void 0;f[2].value=a?r:36e5;const i=y=>{let E=!1;if(y)try{E=n.intervalToSeconds(y)*1e3}catch(h){console.warn("ERROR",h)}c(E)},p=y=>{y.key==="Enter"&&i(y.target.value)},g=y=>{i(y.target.value)};return t.createElement(o.Lh,null,t.createElement(s.S,{value:r,options:f,onChange:c}),a&&t.createElement(l.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:u,onKeyDown:p,onBlur:g,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(Y,O,e)=>{"use strict";e.d(O,{F:()=>o});var t=e(66111),n=e(8581);const o=({item:s,value:l,onChange:f,id:d})=>{const r=(0,t.useCallback)(c=>{f({mode:c.value})},[f]);return t.createElement(n.Ph,{inputId:d,value:l.mode,options:s.settings.options,onChange:r})}},56703:(Y,O,e)=>{"use strict";e.d(O,{F:()=>y,r:()=>p});var t=e(3947),n=e(53768),o=e(99098),s=e(72293),l=e(40538),f=e(26372),d=e(22110),r=e(34315),c=e(91511),a=e(66683),u=e(49616),i=e(74855);const p={drawStyle:l.l8.Line,lineInterpolation:l.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:l.FI.None,barAlignment:l.pu.Center,stacking:{mode:l.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},g=["Graph styles"];function y(E){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:h=>{h.addRadio({path:"drawStyle",name:"Style",category:g,defaultValue:E.drawStyle,settings:{options:f.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:g,defaultValue:E.lineInterpolation,settings:{options:f.q.lineInterpolation},showIf:v=>v.drawStyle===l.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:g,defaultValue:E.barAlignment,settings:{options:f.q.barAlignment},showIf:v=>v.drawStyle===l.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:g,defaultValue:E.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:v=>v.drawStyle!==l.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:g,defaultValue:E.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:v=>v.drawStyle!==l.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:g,defaultValue:f.q.fillGradient[0].value,settings:{options:f.q.fillGradient},showIf:v=>v.drawStyle!==l.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:g,hideFromDefaults:!0,settings:{filter:v=>v.type===o.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:g,showIf:v=>v.drawStyle===l.l8.Line,editor:a.j,override:a.j,process:s.kG,shouldApply:v=>v.type===o.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:g,defaultValue:!1,editor:u.c,override:u.c,showIf:v=>v.drawStyle===l.l8.Line,shouldApply:v=>v.type!==o.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:g,defaultValue:f.q.showPoints[0].value,settings:{options:f.q.showPoints},showIf:v=>v.drawStyle!==l.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:g,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:v=>v.showPoints!==l.Jp.Never||v.drawStyle===l.l8.Points}),d.V(h,E.stacking,g),h.addSelect({category:g,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:l.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:l.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),r.r(h,E),c.B(h),h.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:l.i3.Off},settings:{options:f.q.thresholdsDisplayModes},editor:i.F,override:i.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let Y=window.matchMedia;window.matchMedia=O=>{let e=Y(O);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},77501:(Y,O,e)=>{"use strict";e.d(O,{gV:()=>ds,eU:()=>Us});var t=e(66111),n=e(56895),o=e(52666),s=e(9892),l=e(52081),f=e(31403),d=e(36578),r=e(47694),c=e(16534),a=e(86824),u=e(5080),i=e(80472),p=e(82897),g=e(18111),y=e(72648),E=e(39904);const h=()=>{const dn=!!r.ZP.oauth;return{saml:{bgColor:"#464646",enabled:r.ZP.samlEnabled,name:r.ZP.samlName||g.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:dn&&Boolean(r.ZP.oauth.google),name:r.ZP.oauth?.google?.name||"Google",icon:r.ZP.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:dn&&Boolean(r.ZP.oauth.azuread),name:r.ZP.oauth?.azuread?.name||"Microsoft",icon:r.ZP.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:dn&&Boolean(r.ZP.oauth.github),name:r.ZP.oauth?.github?.name||"GitHub",icon:r.ZP.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:dn&&Boolean(r.ZP.oauth.gitlab),name:r.ZP.oauth?.gitlab?.name||"GitLab",icon:r.ZP.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:dn&&Boolean(r.ZP.oauth.grafana_com),name:r.ZP.oauth?.grafana_com?.name||"Grafana.com",icon:r.ZP.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:dn&&Boolean(r.ZP.oauth.okta),name:r.ZP.oauth?.okta?.name||"Okta",icon:r.ZP.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:dn&&Boolean(r.ZP.oauth.generic_oauth),name:r.ZP.oauth?.generic_oauth?.name||"OAuth",icon:r.ZP.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},v=dn=>({button:s.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:s.css`
      position: absolute;
      left: ${dn.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:s.css`
        color: ${dn.colors.text};
        display: flex;
        margin-bottom: ${dn.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:s.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${dn.colors.text};
      `}}),C=()=>{const dn=(0,y.wW)(v);return t.createElement(t.Fragment,null,t.createElement("div",{className:dn.divider.base},t.createElement("div",null,t.createElement("div",{className:dn.divider.line})),t.createElement("div",null,t.createElement("span",null,!r.ZP.disableLoginForm&&t.createElement("span",null,"or"))),t.createElement("div",null,t.createElement("div",{className:dn.divider.line}))),t.createElement("div",{className:"clearfix"}))};function m(dn,ln,Tn){return(0,s.cx)(ln.button,s.css`
      background-color: ${dn.bgColor};
      color: ${Tn.colors.getContrastText(dn.bgColor)};

      &:hover {
        background-color: ${Tn.colors.emphasize(dn.bgColor,.15)};
        box-shadow: ${Tn.shadows.z1};
      }
    `)}const D=()=>{const dn=(0,p.pickBy)(h(),ga=>ga.enabled),ln=Object.keys(dn).length>0,Tn=(0,y.l4)(),zn=(0,y.wW)(v);return ln?t.createElement(l.wc,null,t.createElement(C,null),Object.entries(dn).map(([ga,va])=>t.createElement(f.Qj,{key:ga,className:m(va,zn,Tn),href:`login/${va.hrefName?va.hrefName:ga}`,target:"_self",fullWidth:!0},t.createElement(E.J,{className:zn.buttonIcon,name:va.icon}),"Sign in with ",va.name))):null},P=()=>{const dn=(0,r.iE)().verifyEmailEnabled?`${(0,r.iE)().appSubUrl}/verify`:`${(0,r.iE)().appSubUrl}/signup`,ln=(0,s.css)({paddingTop:"16px"});return t.createElement(l.wc,null,t.createElement("div",{className:ln},"New to Grafana?"),t.createElement(f.Qj,{className:s.css`
          width: 100%;
          justify-content: center;
        `,href:dn,variant:"secondary",fill:"outline"},"Sign up"))},b=s.css`
  padding: 0;
  margin-top: 4px;
`,M=()=>(document.title=d.c.AppTitle,t.createElement(i.dd,null,t.createElement(a.Z,null,({loginHint:dn,passwordHint:ln,disableLoginForm:Tn,disableUserSignUp:zn,login:ga,isLoggingIn:va,changePassword:Ga,skipPasswordChange:qa,isChangingPassword:es})=>t.createElement(t.Fragment,null,!es&&t.createElement(i.$s,null,!Tn&&t.createElement(u.U,{onSubmit:ga,loginHint:dn,passwordHint:ln,isLoggingIn:va},t.createElement(l.Lh,{justify:"flex-end"},t.createElement(f.Qj,{className:b,fill:"text",href:`${r.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),t.createElement(D,null),!zn&&t.createElement(P,null)),es&&t.createElement(i.$s,null,t.createElement(c.G,{onSubmit:Ga,onSkip:()=>qa()}))))));var x=e(8412),A=e(76770),T=e(72948);function S({description:dn,text:ln,url:Tn}){const zn=(0,y.wW)(U);return t.createElement(T.Z,{className:zn.card,href:Tn},t.createElement(T.Z.Heading,null,ln),t.createElement(T.Z.Description,{className:zn.description},dn))}const U=dn=>({card:(0,s.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,s.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function R({navId:dn}){const{node:ln}=(0,A.q)(dn),Tn=(0,y.wW)(F),zn=ln.children?.filter(ga=>!ga.hideFromTabs);return t.createElement(x.T,{navId:ln.id},t.createElement(x.T.Contents,null,t.createElement("div",{className:Tn.content},zn&&zn.length>0&&t.createElement("section",{className:Tn.grid},zn?.map(ga=>t.createElement(S,{key:ga.id,description:ga.subTitle,text:ga.text,url:ga.url??""}))))))}const F=dn=>({content:(0,s.css)({display:"flex",flexDirection:"column",gap:dn.spacing(2)}),grid:(0,s.css)({display:"grid",gap:dn.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:dn.spacing(2,0)})});var B=e(77346),K=e(98148);function L(){return t.createElement(x.T,{navId:"home",layout:B.Q.Canvas,pageNav:{text:"Page not found"}},t.createElement(K.j,{entity:"Page"}))}var N=e(82002),z=e(67948),G=e(66121),I=e(77582),V=e(27876),H=e(77258);const Q="dddd YYYY-MM-DD HH:mm zz",oe="/admin/ldap";class se extends t.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:ln,user:Tn}=this.props,ga=ln&&ln.nextSync?(0,H.dq)(ln.nextSync,{format:Q}):"",va=`${oe}?user=${Tn&&Tn.login}`,Ga=I.Vt.hasPermission(V.AccessControlAction.LDAPUsersRead),qa=I.Vt.hasPermission(V.AccessControlAction.LDAPUsersSync);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"External sync"),t.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),t.createElement("td",null,t.createElement("span",{className:"label label-tag"},"LDAP"))),t.createElement("tr",null,ln.enabled?t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},ga)):t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},"Not enabled")))))),t.createElement("div",{className:"gf-form-button-row"},qa&&t.createElement(f.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Ga&&t.createElement(f.Qj,{variant:"secondary",href:va},"Debug LDAP Mapping"))))}}var ie=e(7804),j=e(71657),de=e(35029),ce=e(24799),ee=e(61860),le=e(66226),q=e(11630),fe=e(13821),Z=e(8581),ne=e(29930);function re({onSelected:dn,className:ln,inputId:Tn,autoFocus:zn,excludeOrgs:ga}){(0,t.useEffect)(()=>{zn&&Tn&&document.getElementById(Tn)?.focus()},[zn,Tn]);const[va,Ga]=(0,fe.Z)(async()=>{const es=(await(0,ne.i)().get("/api/orgs")).map(us=>({value:{id:us.id,name:us.name},label:us.name}));if(ga){let us=ga.map($s=>$s.orgId);return es.filter($s=>!us.includes($s.value.id))}else return es});return t.createElement(Z.qb,{inputId:Tn,className:ln,isLoading:va.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Ga,onChange:dn,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var ve=e(65135);class me extends t.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=t.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:ln,orgs:Tn,isExternalUser:zn,onOrgRoleChange:ga,onOrgRemove:va,onOrgAdd:Ga}=this.props,{showAddOrgModal:qa}=this.state,es=s.css`
      margin-top: 0.8rem;
    `,us=I.Vt.hasPermission(V.AccessControlAction.OrgUsersAdd)&&!zn;return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Organizations"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,Tn.map((hs,$s)=>t.createElement(gt,{key:`${hs.orgId}-${$s}`,isExternalUser:zn,user:ln,org:hs,onOrgRoleChange:ga,onOrgRemove:va}))))),t.createElement("div",{className:es},us&&t.createElement(f.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),t.createElement(Le,{user:ln,userOrgs:Tn,isOpen:qa,onOrgAdd:Ga,onDismiss:this.dismissOrgAddModal})))}}const Ie=(0,ie.B)(dn=>({removeButton:s.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${dn.v1.palette.blue95};
    `,label:s.css`
      font-weight: 500;
    `,disabledTooltip:s.css`
      display: flex;
    `,tooltipItem:s.css`
      margin-left: 5px;
    `,tooltipItemLink:s.css`
      color: ${dn.v1.palette.blue95};
    `,rolePickerWrapper:s.css`
      display: flex;
    `,rolePicker:s.css`
      flex: auto;
      margin-right: ${dn.spacing(1)};
    `}));class Ge extends t.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:ln}=this.props;this.props.onOrgRemove(ln.orgId)},this.onChangeRoleClick=()=>{const{org:ln}=this.props;this.setState({isChangingRole:!0,currentRole:ln.role})},this.onOrgRoleChange=ln=>{this.setState({currentRole:ln})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=ln=>{this.props.onOrgRoleChange(this.props.org.orgId,ln)}}componentDidMount(){I.Vt.licensedAccessControlEnabled()&&I.Vt.hasPermission(V.AccessControlAction.ActionRolesList)&&(0,q.ul)(this.props.org.orgId).then(ln=>this.setState({roleOptions:ln})).catch(ln=>console.error(ln))}render(){const{user:ln,org:Tn,isExternalUser:zn,theme:ga}=this.props,va=ln?.authLabels?.length&&ln?.authLabels[0],Ga=va?`Synced via ${va}`:"",{currentRole:qa,isChangingRole:es}=this.state,us=Ie(ga),hs=(0,s.cx)("width-16",us.label),$s=I.Vt.hasPermission(V.AccessControlAction.OrgUsersWrite),tr=I.Vt.hasPermission(V.AccessControlAction.OrgUsersRemove)&&!zn,mr=zn||!$s,ur=`${Tn.name}-input`;return t.createElement("tr",null,t.createElement("td",{className:hs},t.createElement("label",{htmlFor:ur},Tn.name)),I.Vt.licensedAccessControlEnabled()?t.createElement("td",null,t.createElement("div",{className:us.rolePickerWrapper},t.createElement("div",{className:us.rolePicker},t.createElement(le.R,{userId:ln?.id||0,orgId:Tn.orgId,basicRole:Tn.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:mr})),zn&&t.createElement(ht,{lockMessage:Ga}))):t.createElement(t.Fragment,null,es?t.createElement("td",null,t.createElement(ve.A,{inputId:ur,value:qa,onChange:this.onOrgRoleChange,autoFocus:!0})):t.createElement("td",{className:"width-25"},Tn.role),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},$s&&t.createElement(it,{lockMessage:Ga,isExternalUser:zn,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},tr&&t.createElement(j.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const gt=(0,y.HE)(Ge),Te=(0,ie.B)(()=>({modal:s.css`
    width: 500px;
  `,buttonRow:s.css`
    text-align: center;
  `,modalContent:s.css`
    overflow: visible;
  `}));class Le extends t.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:V.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=ln=>{const Tn=this.props.userOrgs.find(zn=>zn.orgId===ln.value?.id);this.setState({selectedOrg:ln.value,role:Tn?.role||V.OrgRole.Viewer}),I.Vt.licensedAccessControlEnabled()&&I.Vt.hasPermission(V.AccessControlAction.ActionRolesList)&&(0,q.ul)(ln.value?.id).then(zn=>this.setState({roleOptions:zn})).catch(zn=>console.error(zn))},this.onOrgRoleChange=ln=>{this.setState({role:ln})},this.onAddUserToOrg=async()=>{const{selectedOrg:ln,role:Tn}=this.state;this.props.onOrgAdd(ln.id,Tn),I.Vt.licensedAccessControlEnabled()&&I.Vt.hasPermission(V.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,q.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(ln,Tn,zn)=>{this.setState({pendingRoles:ln,pendingOrgId:zn,pendingUserId:Tn})}}render(){const{isOpen:ln,user:Tn,userOrgs:zn}=this.props,{role:ga,roleOptions:va,selectedOrg:Ga}=this.state,qa=Te();return t.createElement(de.u,{className:qa.modal,contentClassName:qa.modalContent,title:"Add to an organization",isOpen:ln,onDismiss:this.onCancel},t.createElement(ce.g,{label:"Organization"},t.createElement(re,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:zn,autoFocus:!0})),t.createElement(ce.g,{label:"Role",disabled:Ga===null},I.Vt.accessControlEnabled()?t.createElement(le.R,{userId:Tn?.id||0,orgId:Ga?.id,basicRole:ga,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:va,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):t.createElement(ve.A,{inputId:"new-org-role-input",value:ga,onChange:this.onOrgRoleChange})),t.createElement(de.u.ButtonRow,null,t.createElement(l.Lh,{spacing:"md",justify:"center"},t.createElement(f.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),t.createElement(f.zx,{variant:"primary",disabled:Ga===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Ye=dn=>({disabledTooltip:s.css`
    display: flex;
  `,tooltipItemLink:s.css`
    color: ${dn.v1.palette.blue95};
  `,lockMessageClass:s.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:s.css`
    line-height: 2;
  `});function it({lockMessage:dn,onChangeRoleClick:ln,isExternalUser:Tn,onOrgRoleSave:zn,onCancelClick:ga}){const va=(0,y.wW)(Ye);return t.createElement("div",{className:va.disabledTooltip},Tn?t.createElement(t.Fragment,null,t.createElement("span",{className:va.lockMessageClass},dn),t.createElement(ee.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:va.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement("div",{className:va.icon},t.createElement(E.J,{name:"question-circle"})))):t.createElement(j.p,{confirmText:"Save",onClick:ln,onCancel:ga,onConfirm:zn,disabled:Tn},"Change role"))}const ht=({lockMessage:dn})=>{const ln=(0,y.wW)(Re);return t.createElement("div",{className:ln.disabledTooltip},t.createElement("span",{className:ln.lockMessageClass},dn),t.createElement(ee.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:ln.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement(E.J,{name:"question-circle"})))},Re=dn=>({disabledTooltip:s.css`
    display: flex;
  `,tooltipItemLink:s.css`
    color: ${dn.v1.palette.blue95};
  `,lockMessageClass:s.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `});var ye=e(2594);const Ce=[{label:"Yes",value:!0},{label:"No",value:!1}];function be({isGrafanaAdmin:dn,onGrafanaAdminChange:ln}){const[Tn,zn]=(0,t.useState)(!1),[ga,va]=(0,t.useState)(dn),Ga=()=>zn(!0),qa=()=>{zn(!1),va(dn)},es=()=>ln(ga),us=I.Vt.hasPermission(V.AccessControlAction.UsersPermissionsUpdate);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Permissions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Grafana Admin"),Tn?t.createElement("td",{colSpan:2},t.createElement(ye.S,{options:Ce,value:ga,onChange:va,autoFocus:!0})):t.createElement("td",{colSpan:2},dn?t.createElement(t.Fragment,null,t.createElement(E.J,{name:"shield"})," Yes"):t.createElement(t.Fragment,null,"No")),t.createElement("td",null,us&&t.createElement(j.p,{onClick:Ga,onConfirm:es,onCancel:qa,confirmText:"Change"},"Change"))))))))}var We=e(98102),Qe=e(50869),mt=e(46967);function vt({user:dn,onUserUpdate:ln,onUserDelete:Tn,onUserDisable:zn,onUserEnable:ga,onPasswordChange:va}){const[Ga,qa]=(0,t.useState)(!1),[es,us]=(0,t.useState)(!1),hs=(0,t.useRef)(null),$s=Os=>()=>{qa(Os),!Os&&hs.current&&hs.current.focus()},tr=(0,t.useRef)(null),mr=Os=>()=>{us(Os),!Os&&tr.current&&tr.current.focus()},ur=()=>Tn(dn.id),sr=()=>zn(dn.id),er=()=>ga(dn.id),ks=Os=>{ln({...dn,name:Os})},Er=Os=>{ln({...dn,email:Os})},Vs=Os=>{ln({...dn,login:Os})},Tr=dn.authLabels?.length&&dn.authLabels[0],pr=Tr?`Synced via ${Tr}`:"",yr=dn.isExternal||!I.Vt.hasPermissionInMetadata(V.AccessControlAction.UsersWrite,dn),Cr=dn.isExternal||!I.Vt.hasPermissionInMetadata(V.AccessControlAction.UsersPasswordUpdate,dn),Or=I.Vt.hasPermissionInMetadata(V.AccessControlAction.UsersDelete,dn),fr=I.Vt.hasPermissionInMetadata(V.AccessControlAction.UsersDisable,dn),Js=I.Vt.hasPermissionInMetadata(V.AccessControlAction.UsersEnable,dn);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"User information"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement(Ot,{label:"Name",value:dn.name,locked:yr,lockMessage:pr,onChange:ks}),t.createElement(Ot,{label:"Email",value:dn.email,locked:yr,lockMessage:pr,onChange:Er}),t.createElement(Ot,{label:"Username",value:dn.login,locked:yr,lockMessage:pr,onChange:Vs}),t.createElement(Ot,{label:"Password",value:"********",inputType:"password",locked:Cr,lockMessage:pr,onChange:va})))),t.createElement("div",{className:rt.buttonRow},Or&&t.createElement(t.Fragment,null,t.createElement(f.zx,{variant:"destructive",onClick:$s(!0),ref:hs},"Delete user"),t.createElement(We.s,{isOpen:Ga,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:ur,onDismiss:$s(!1)})),dn.isDisabled&&Js&&t.createElement(f.zx,{variant:"secondary",onClick:er},"Enable user"),!dn.isDisabled&&fr&&t.createElement(t.Fragment,null,t.createElement(f.zx,{variant:"secondary",onClick:mr(!0),ref:tr},"Disable user"),t.createElement(We.s,{isOpen:es,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:sr,onDismiss:mr(!1)})))))}const rt={buttonRow:s.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Ot extends t.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=ln=>{this.inputElem=ln},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(ln,Tn)=>{Tn!==Qe.G.Invalid&&this.setState({value:ln.target.value})},this.onInputBlur=(ln,Tn)=>{Tn!==Qe.G.Invalid&&this.setState({value:ln.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:ln,locked:Tn,lockMessage:zn,inputType:ga}=this.props,{value:va}=this.state,Ga=(0,s.cx)("width-16",s.css`
        font-weight: 500;
      `);if(Tn)return t.createElement(Et,{label:ln,value:va,lockMessage:zn});const qa=`${ln}-input`;return t.createElement("tr",null,t.createElement("td",{className:Ga},t.createElement("label",{htmlFor:qa},ln)),t.createElement("td",{className:"width-25",colSpan:2},this.state.editing?t.createElement(mt.I,{id:qa,type:ga,defaultValue:va,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):t.createElement("span",null,this.props.value)),t.createElement("td",null,t.createElement(j.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Ot.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Et=({label:dn,value:ln,lockMessage:Tn})=>{const zn=s.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,ga=(0,s.cx)("width-16",s.css`
      font-weight: 500;
    `);return t.createElement("tr",null,t.createElement("td",{className:ga},dn),t.createElement("td",{className:"width-25",colSpan:2},ln),t.createElement("td",null,t.createElement("span",{className:zn},Tn)))};var Mt=e(35287);class ue extends t.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=t.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=ln=>()=>{this.props.onSessionRevoke(ln)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:ln}=this.props,{showLogoutModal:Tn}=this.state,zn=s.css`
      margin-top: 0.8rem;
    `,ga=I.Vt.hasPermission(V.AccessControlAction.UsersLogout);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Sessions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Last seen"),t.createElement("th",null,"Logged on"),t.createElement("th",null,"IP address"),t.createElement("th",{colSpan:2},"Browser and OS"))),t.createElement("tbody",null,ln&&ln.map((va,Ga)=>t.createElement("tr",{key:`${va.id}-${Ga}`},t.createElement("td",null,va.isActive?"Now":va.seenAt),t.createElement("td",null,(0,Mt.$q)(va.createdAt,{dateStyle:"long"})),t.createElement("td",null,va.clientIp),t.createElement("td",null,`${va.browser} on ${va.os} ${va.osVersion}`),t.createElement("td",null,t.createElement("div",{className:"pull-right"},ga&&t.createElement(j.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(va.id),autoFocus:!0},"Force logout")))))))),t.createElement("div",{className:zn},ga&&ln.length>0&&t.createElement(f.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),t.createElement(We.s,{isOpen:Tn,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const De=ue;var Ne=e(37592);class tt extends t.PureComponent{constructor(){super(...arguments),this.onUserUpdate=ln=>{this.props.updateUser(ln)},this.onPasswordChange=ln=>{const{user:Tn,setUserPassword:zn}=this.props;Tn&&zn(Tn.id,ln)},this.onUserDelete=ln=>{this.props.deleteUser(ln)},this.onUserDisable=ln=>{this.props.disableUser(ln)},this.onUserEnable=ln=>{this.props.enableUser(ln)},this.onGrafanaAdminChange=ln=>{const{user:Tn,updateUserPermissions:zn}=this.props;Tn&&zn(Tn.id,ln)},this.onOrgRemove=ln=>{const{user:Tn,deleteOrgUser:zn}=this.props;Tn&&zn(Tn.id,ln)},this.onOrgRoleChange=(ln,Tn)=>{const{user:zn,updateOrgUserRole:ga}=this.props;zn&&ga(zn.id,ln,Tn)},this.onOrgAdd=(ln,Tn)=>{const{user:zn,addOrgUser:ga}=this.props;zn&&ga(zn,ln,Tn)},this.onSessionRevoke=ln=>{const{user:Tn,revokeSession:zn}=this.props;Tn&&zn(ln,Tn.id)},this.onAllSessionsRevoke=()=>{const{user:ln,revokeAllSessions:Tn}=this.props;ln&&Tn(ln.id)},this.onUserSync=()=>{const{user:ln,syncLdapUser:Tn}=this.props;ln&&Tn(ln.id)}}async componentDidMount(){const{match:ln,loadAdminUserPage:Tn}=this.props;Tn(parseInt(ln.params.id,10))}render(){const{user:ln,orgs:Tn,sessions:zn,ldapSyncInfo:ga,isLoading:va}=this.props,Ga=ln?.isExternal&&ln?.authLabels?.includes("LDAP"),qa=I.Vt.hasPermission(V.AccessControlAction.UsersAuthTokenList),es=I.Vt.hasPermission(V.AccessControlAction.LDAPStatusRead),us=!r.ZP.auth.DisableSyncLock&&ln?.isExternallySynced,hs={text:ln?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return t.createElement(x.T,{navId:"global-users",pageNav:hs},t.createElement(x.T.Contents,{isLoading:va},ln&&t.createElement(t.Fragment,null,t.createElement(vt,{user:ln,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),Ga&&us&&(0,G.v)("ldapsync")&&ga&&es&&t.createElement(se,{ldapSyncInfo:ga,user:ln,onUserSync:this.onUserSync}),t.createElement(be,{isGrafanaAdmin:ln.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),Tn&&t.createElement(me,{user:ln,orgs:Tn,isExternalUser:us,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),zn&&qa&&t.createElement(De,{sessions:zn,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const et=dn=>({user:dn.userAdmin.user,sessions:dn.userAdmin.sessions,orgs:dn.userAdmin.orgs,ldapSyncInfo:dn.ldap.syncInfo,isLoading:dn.userAdmin.isLoading,error:dn.userAdmin.error}),Ue={loadAdminUserPage:Ne.PK,updateUser:Ne.Nq,setUserPassword:Ne.tQ,disableUser:Ne.B9,enableUser:Ne.Dx,deleteUser:Ne.h8,updateUserPermissions:Ne.Xx,addOrgUser:Ne.bN,updateOrgUserRole:Ne.Jk,deleteOrgUser:Ne.uV,revokeSession:Ne._1,revokeAllSessions:Ne.Fm,syncLdapUser:Ne.CP},Ee=(0,z.connect)(et,Ue)(tt);var Me=e(14835),He=e(45253),Ze=e(86245);const lt=({ldapConnectionInfo:dn})=>t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Connection"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Host"),t.createElement("th",{colSpan:2},"Port"))),t.createElement("tbody",null,dn&&dn.map((ln,Tn)=>t.createElement("tr",{key:Tn},t.createElement("td",null,ln.host),t.createElement("td",null,ln.port),t.createElement("td",null,ln.available?t.createElement(E.J,{name:"check",className:"pull-right"}):t.createElement(E.J,{name:"exclamation-triangle",className:"pull-right"}))))))),t.createElement("div",{className:"gf-form-group"},t.createElement(bt,{ldapConnectionInfo:dn})))),bt=({ldapConnectionInfo:dn})=>{if(!dn.some(ga=>ga.error))return null;const Tn=[];dn.forEach(ga=>{ga.error&&Tn.push(ga)});const zn=Tn.map((ga,va)=>t.createElement("div",{key:va},t.createElement("span",{style:{fontWeight:500}},ga.host,":",ga.port,t.createElement("br",null)),t.createElement("span",null,ga.error),va!==Tn.length-1&&t.createElement(t.Fragment,null,t.createElement("br",null),t.createElement("br",null))));return t.createElement(He.b,{title:"Connection error",severity:V.AppNotificationSeverity.Error},zn)};var Pt=e(67487);const Je="dddd YYYY-MM-DD HH:mm zz";class Dt extends t.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:ln}=this.props,{isSyncing:Tn}=this.state,zn=(0,H.dq)(ln.nextSync,{format:Je});return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",t.createElement(f.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},t.createElement("span",{className:"btn-title"},"Bulk-sync now"),Tn&&t.createElement(Pt.$,{inline:!0}))),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"Active synchronisation"),t.createElement("td",{colSpan:2},ln.enabled?"Enabled":"Disabled")),t.createElement("tr",null,t.createElement("td",null,"Scheduled"),t.createElement("td",null,ln.schedule)),t.createElement("tr",null,t.createElement("td",null,"Next scheduled synchronisation"),t.createElement("td",null,zn)))))))}}const Ve=({groups:dn,showAttributeMapping:ln})=>{const Tn=ln?dn:dn.filter(zn=>zn.orgRole);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,ln&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organization",t.createElement(ee.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(E.J,{name:"info-circle"})))),t.createElement("th",null,"Role"))),t.createElement("tbody",null,Tn.map((zn,ga)=>t.createElement("tr",{key:`${zn.orgId}-${ga}`},ln&&t.createElement("td",null,zn.groupDN),zn.orgName&&zn.orgRole?t.createElement("td",null,zn.orgName):t.createElement("td",null),zn.orgRole?t.createElement("td",null,zn.orgRole):t.createElement("td",null,t.createElement("span",{className:"text-warning"},"No match",t.createElement(ee.u,{placement:"top",content:"No matching groups found",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(E.J,{name:"info-circle"})))))))))))},Xe=({info:dn,showAttributeMapping:ln})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:2},"User information"),ln&&t.createElement("th",null,"LDAP attribute"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"First name"),t.createElement("td",null,dn.name.ldapValue),ln&&t.createElement("td",null,dn.name.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Surname"),t.createElement("td",null,dn.surname.ldapValue),ln&&t.createElement("td",null,dn.surname.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Username"),t.createElement("td",null,dn.login.ldapValue),ln&&t.createElement("td",null,dn.login.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Email"),t.createElement("td",null,dn.email.ldapValue),ln&&t.createElement("td",null,dn.email.cfgAttrValue)))))),st=({permissions:dn})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:1},"Permissions"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"}," Grafana admin"),t.createElement("td",null,dn.isGrafanaAdmin?t.createElement(t.Fragment,null,t.createElement(E.J,{name:"shield"})," Yes"):"No")),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Status"),t.createElement("td",null,dn.isDisabled?t.createElement(t.Fragment,null,t.createElement(E.J,{name:"times"})," Inactive"):t.createElement(t.Fragment,null,t.createElement(E.J,{name:"check"})," Active"))))))),ut=({teams:dn,showAttributeMapping:ln})=>{const Tn=ln?dn:dn.filter(zn=>zn.teamName);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,ln&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organisation"),t.createElement("th",null,"Team"))),t.createElement("tbody",null,Tn.map((zn,ga)=>t.createElement("tr",{key:`${zn.teamName}-${ga}`},ln&&t.createElement(t.Fragment,null,t.createElement("td",null,zn.groupDN),!zn.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null),t.createElement("td",null,t.createElement("div",{className:"text-warning"},"No match",t.createElement(ee.u,{placement:"top",content:"No matching teams found",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(E.J,{name:"info-circle"}))))))),zn.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null,zn.orgName),t.createElement("td",null,zn.teamName))))))))},xt=({ldapUser:dn,showAttributeMapping:ln})=>t.createElement(t.Fragment,null,t.createElement(Xe,{info:dn.info,showAttributeMapping:ln}),t.createElement(st,{permissions:dn.permissions}),dn.roles&&dn.roles.length>0&&t.createElement(Ve,{groups:dn.roles,showAttributeMapping:ln}),dn.teams&&dn.teams.length>0?t.createElement(ut,{teams:dn.teams,showAttributeMapping:ln}):t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"No teams found via LDAP"))))))),{FormField:Kt}=Me.LegacyForms;class Jt extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=ln=>{ln.preventDefault();const Tn=ln.target.elements.username.value;Tn&&this.fetchUserMapping(Tn)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:ln,queryParams:Tn}=this.props;await ln(),await this.fetchLDAPStatus(),Tn.username&&await this.fetchUserMapping(Tn.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:ln,loadLdapSyncStatus:Tn}=this.props;return Promise.all([ln(),Tn()])}async fetchUserMapping(ln){const{loadUserMapping:Tn}=this.props;return await Tn(ln)}render(){const{ldapUser:ln,userError:Tn,ldapError:zn,ldapSyncInfo:ga,ldapConnectionInfo:va,navModel:Ga,queryParams:qa}=this.props,{isLoading:es}=this.state,us=I.Vt.hasPermission(V.AccessControlAction.LDAPUsersRead);return t.createElement(x.T,{navModel:Ga},t.createElement(x.T.Contents,{isLoading:es},t.createElement(t.Fragment,null,zn&&zn.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(He.b,{title:zn.title,severity:V.AppNotificationSeverity.Error},zn.body)),t.createElement(lt,{ldapConnectionInfo:va}),(0,G.v)("ldapsync")&&ga&&t.createElement(Dt,{ldapSyncInfo:ga}),us&&t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Test user mapping"),t.createElement("div",{className:"gf-form-group"},t.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},t.createElement(Kt,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:qa.username}),t.createElement(f.zx,{type:"submit"},"Run"))),Tn&&Tn.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(He.b,{title:Tn.title,severity:V.AppNotificationSeverity.Error,onRemove:this.onClearUserError},Tn.body)),ln&&t.createElement(xt,{ldapUser:ln,showAttributeMapping:!0})))))}}const On=dn=>({navModel:(0,Ze.ht)(dn.navIndex,"ldap"),ldapConnectionInfo:dn.ldap.connectionInfo,ldapUser:dn.ldap.user,ldapSyncInfo:dn.ldap.syncInfo,userError:dn.ldap.userError,ldapError:dn.ldap.ldapError}),Nn={loadLdapState:Ne.Y3,loadLdapSyncStatus:Ne.j4,loadUserMapping:Ne.b_,clearUserError:Ne.V0,clearUserMappingInfo:Ne.IS},ya=(0,z.connect)(On,Nn)(Jt);var Lt=e(49969);const ft=dn=>t.lazy(dn);var Ht=e(97953);const $t=[],zt=[...$t,{path:"/alerting",component:()=>t.createElement(R,{navId:"alerting-legacy"})},{path:"/alerting/list",component:ft(()=>Promise.all([e.e(5524),e.e(8347),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:ft(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:r.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:ft(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:ft(()=>e.e(7384).then(e.bind(e,18910)))}],Wt=[...$t,{path:"/alerting",component:ft(()=>Promise.all([e.e(5524),e.e(6034)]).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,Ht.ql)([V.AccessControlAction.AlertingRuleRead,V.AccessControlAction.AlertingRuleExternalRead],[Lt.B.Viewer,Lt.B.Editor,Lt.B.Admin]),component:ft(()=>Promise.all([e.e(5524),e.e(8347),e.e(2461)]).then(e.bind(e,36291)))},{path:"/alerting/routes",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsRead,V.AccessControlAction.AlertingNotificationsExternalRead],[Lt.B.Editor,Lt.B.Admin]),component:ft(()=>Promise.all([e.e(5524),e.e(8648)]).then(e.bind(e,11482)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsWrite,V.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsWrite,V.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/silences",roles:(0,Ht.ql)([V.AccessControlAction.AlertingInstanceRead,V.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/silence/new",roles:(0,Ht.ql)([V.AccessControlAction.AlertingInstanceCreate,V.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/silence/:id/edit",roles:(0,Ht.ql)([V.AccessControlAction.AlertingInstanceUpdate,V.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/notifications",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsRead,V.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/new",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsWrite,V.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsWrite,V.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsWrite,V.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type",roles:(0,Ht.ql)([V.AccessControlAction.AlertingNotificationsWrite,V.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:ft(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/groups/",roles:(0,Ht.ql)([V.AccessControlAction.AlertingInstanceRead,V.AccessControlAction.AlertingInstancesExternalRead],[Lt.B.Viewer,Lt.B.Editor,Lt.B.Admin]),component:ft(()=>Promise.all([e.e(5524),e.e(2415)]).then(e.bind(e,48401)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,Ht.ql)([V.AccessControlAction.AlertingRuleCreate,V.AccessControlAction.AlertingRuleExternalWrite],[Lt.B.Viewer,Lt.B.Editor,Lt.B.Admin]),component:ft(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Ht.ql)([V.AccessControlAction.AlertingRuleUpdate,V.AccessControlAction.AlertingRuleExternalWrite],[Lt.B.Viewer,Lt.B.Editor,Lt.B.Admin]),component:ft(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Ht.ql)([V.AccessControlAction.AlertingRuleRead,V.AccessControlAction.AlertingRuleExternalRead],[Lt.B.Viewer,Lt.B.Editor,Lt.B.Admin]),component:ft(()=>e.e(4679).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Ht.ql)([V.AccessControlAction.AlertingRuleRead,V.AccessControlAction.AlertingRuleExternalRead],[Lt.B.Viewer,Lt.B.Editor,Lt.B.Admin]),component:ft(()=>e.e(7918).then(e.bind(e,29309)))},{path:"/alerting/admin",roles:()=>["Admin"],component:ft(()=>Promise.all([e.e(5524),e.e(7680)]).then(e.bind(e,30315)))}];function jt(dn=r.vc){return dn.unifiedAlertingEnabled?Wt:dn.alertingEnabled?zt:(0,p.uniq)([...zt,...Wt].map(Tn=>Tn.path)).map(Tn=>({path:Tn,component:ft(()=>e.e(1333).then(e.bind(e,39597)))}))}var sn=e(86475);function pn(){return r.vc.featureToggles.dataConnectionsConsole?[{path:`/${sn.D}`,exact:!1,component:ft(()=>Promise.all([e.e(6526),e.e(6747),e.e(9133),e.e(5981)]).then(e.bind(e,56287)))}]:[]}var Pn=e(3597),Mn=e(48996);const Cn=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Mn.cd.Home,component:ft(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Mn.cd.Browse,component:ft(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Mn.cd.Details,component:ft(()=>Promise.all([e.e(6526),e.e(6747),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>t.createElement(n.l_,{to:"/plugins"})}];function Hn(){return Cn}var _n=e(62992),oa=e(4063),Gt=e(59250),Bt=e(35645),on=e(37932),rn=e(2555),In=e(34177);function Ln(dn){return console.error(dn),qn("Exception thrown","See console for details")}function Un(){return qn("Page not found","404 Error")}function qn(dn,ln){const Tn={text:dn,subTitle:ln,icon:"exclamation-triangle"};return{node:Tn,main:Tn}}var da=e(13011),ha=e(22215),Ta=e(55111),Wa=e(52889);const cs={loading:!0,pluginNav:null,plugin:null};function is({pluginId:dn,pluginNavSection:ln}){const Tn=(0,n.$B)(),zn=(0,n.TH)(),[ga,va]=(0,t.useReducer)(Ha.reducer,cs),Ga=Bt.v.appSubUrl+zn.pathname+zn.search,{plugin:qa,loading:es,pluginNav:us}=ga,hs=(0,Ta.d)(ln,us,Ga),$s=(0,t.useMemo)(()=>(0,on.Ox)(zn.search),[zn.search]),tr=(0,t.useMemo)(()=>(0,Wa.a)(hs),[hs]),mr=(0,In.p)();(0,t.useEffect)(()=>{$a(dn,va)},[dn]);const ur=(0,t.useCallback)(er=>va(Ha.actions.changeNav(er)),[]);if(!qa||dn!==qa.meta.id){const er=mr.chrome.state.getValue().layout;return t.createElement(x.T,{navModel:hs,pageNav:{text:""},layout:er},es&&t.createElement(rn.Z,null))}if(!qa.root)return t.createElement(x.T,{navModel:hs??qn("Plugin load error")},t.createElement("div",null,"No root app page component found"));const sr=qa.root&&t.createElement(qa.root,{meta:qa.meta,basename:Tn.url,onNavChanged:ur,query:$s,path:zn.pathname});return us?t.createElement(t.Fragment,null,hs?t.createElement(x.T,{navModel:hs,pageNav:us?.node},t.createElement(x.T.Contents,{isLoading:es},sr)):t.createElement(x.T,null,sr)):t.createElement(Wa.v.Provider,{value:tr},sr)}const Ha=(0,_n.oM)({name:"prom-builder-container",initialState:cs,reducers:{setState:(dn,ln)=>{Object.assign(dn,ln.payload)},changeNav:(dn,ln)=>{let Tn=ln.payload;Tn&&Tn.node.children&&(Tn={...Tn,node:{...Tn.main,hideFromBreadcrumbs:!0}}),dn.pluginNav=Tn}}});async function $a(dn,ln){try{const Tn=await(0,da.a)(dn).then(zn=>{const ga=ss(zn);return ga?(I.h$.emit(oa.SI.alertError,[ga]),ln(Ha.actions.setState({pluginNav:qn(ga)})),null):(0,ha.Av)(zn)});ln(Ha.actions.setState({plugin:Tn,loading:!1,pluginNav:null}))}catch{ln(Ha.actions.setState({plugin:null,loading:!1,pluginNav:Un()}))}}function ss(dn){return dn?dn.type!==Gt.zV.app?"Plugin must be an app":dn.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Oa=is;var Ia=e(3153);function ys(){const dn=(0,Ia.y0)(),{navIndex:ln}=dn,Tn=va=>va.startsWith("standalone-plugin-page-/"),zn=va=>"pluginId"in va&&"id"in va;return[...Object.values(ln).filter(zn).map(va=>{const Ga=(0,Ze.vw)(va),qa=`/a/${va.pluginId}`,es=Tn(va.id)&&va.url||qa,us=Tn(va.id)&&!va.url?.startsWith("/a/");return{path:es,exact:!1,sensitive:us,component:()=>t.createElement(Oa,{pluginId:va.pluginId,pluginNavSection:Ga})}}),{path:"/a/:pluginId",exact:!1,component:({match:va})=>t.createElement(Oa,{pluginId:va.params.pluginId,pluginNavSection:ln.home})}]}const la=[{path:"/profile",component:ft(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:ft(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:ft(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:ft(()=>e.e(743).then(e.bind(e,76137)))}];function Ts(dn=r.vc){return dn.profileEnabled?la:(0,p.uniq)(la.map(Tn=>Tn.path)).map(Tn=>({path:Tn,component:ft(()=>e.e(3395).then(e.bind(e,92080)))}))}const bs=()=>r.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:V.DashboardRoutes.Public,component:ft(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:V.DashboardRoutes.Public,chromeless:!0,component:ft(()=>Promise.all([e.e(3189),e.e(7638),e.e(6647),e.e(2613)]).then(e.bind(e,74492)))}]:[],ds=[];function Us(){return[...ys(),{path:"/",pageClass:"page-dashboard",routeName:V.DashboardRoutes.Home,component:ft(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:V.DashboardRoutes.Normal,component:ft(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/dashboard/new",roles:()=>N.Vt.evaluatePermission(()=>[],[V.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:V.DashboardRoutes.New,component:ft(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>N.Vt.evaluatePermission(()=>["Editor","Admin"],[V.AccessControlAction.DashboardsCreate]),component:ft(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:V.DashboardRoutes.Normal,component:ft(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:V.DashboardRoutes.Normal,chromeless:!0,component:ft(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:V.DashboardRoutes.Normal,chromeless:!0,component:ft(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:V.DashboardRoutes.Normal,chromeless:!0,component:ft(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>N.Vt.evaluatePermission(()=>["Editor","Admin"],[V.AccessControlAction.DashboardsCreate]),component:ft(()=>e.e(8808).then(e.bind(e,26440)))},{path:Pn.n.List,component:ft(()=>e.e(4620).then(e.bind(e,99113)))},{path:Pn.n.Edit,component:ft(()=>Promise.all([e.e(9133),e.e(1477)]).then(e.bind(e,72443)))},{path:Pn.n.Dashboards,component:ft(()=>e.e(2929).then(e.bind(e,46144)))},{path:Pn.n.New,component:ft(()=>e.e(4253).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:ft(()=>r.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,84306)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:ft(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/dashboards/folder/new",roles:()=>N.Vt.evaluatePermission(()=>["Editor","Admin"],[V.AccessControlAction.FoldersCreate]),component:ft(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:r.ZP.rbacEnabled?ft(()=>e.e(8431).then(e.bind(e,42524))):ft(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:ft(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:ft(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/dashboards/f/:uid",component:ft(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/explore",pageClass:"page-explore",roles:()=>N.Vt.evaluatePermission(()=>r.ZP.viewersCanEdit?[]:["Editor","Admin"],[V.AccessControlAction.DataSourcesExplore]),component:ft(()=>r.ZP.exploreEnabled?Promise.all([e.e(4254),e.e(5048),e.e(8366),e.e(2060),e.e(7658),e.e(9782)]).then(e.bind(e,72665)):e.e(172).then(e.bind(e,20750)))},{path:"/apps",component:()=>t.createElement(R,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>t.createElement(R,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>t.createElement(R,{navId:"monitoring"})},{path:"/admin/general",component:()=>t.createElement(R,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>t.createElement(R,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>t.createElement(R,{navId:"admin/access"})},{path:"/org",component:ft(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:ft(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:ft(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:ft(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>N.Vt.evaluatePermission(()=>["Admin"],[V.AccessControlAction.ActionAPIKeysRead]),component:ft(()=>e.e(3082).then(e.bind(e,91948)))},{path:"/org/serviceaccounts",roles:()=>N.Vt.evaluatePermission(()=>["Admin"],[V.AccessControlAction.ServiceAccountsRead,V.AccessControlAction.ServiceAccountsCreate]),component:ft(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:ft(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:ft(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>N.Vt.evaluatePermission(()=>r.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[V.AccessControlAction.ActionTeamsRead,V.AccessControlAction.ActionTeamsCreate]),component:ft(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>N.Vt.evaluatePermission(()=>r.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[V.AccessControlAction.ActionTeamsCreate]),component:ft(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>N.Vt.evaluatePermission(()=>r.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[V.AccessControlAction.ActionTeamsRead,V.AccessControlAction.ActionTeamsCreate]),component:ft(()=>e.e(8612).then(e.bind(e,64975)))},{path:"/admin/authentication",roles:()=>N.Vt.evaluatePermission(()=>["Admin","ServerAdmin"],[V.AccessControlAction.SettingsWrite]),component:r.ZP.featureToggles.authenticationConfigUI&&r.ZP.licenseInfo.enabledFeatures?.saml?ft(()=>e.e(8741).then(e.bind(e,84903))):()=>t.createElement(n.l_,{to:"/admin"})},{path:"/admin",component:()=>t.createElement(R,{navId:"cfg"})},{path:"/admin/access",component:()=>t.createElement(R,{navId:"admin/access"})},{path:"/admin/config",component:()=>t.createElement(R,{navId:"admin/config"})},{path:"/admin/settings",component:ft(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:ft(()=>Promise.resolve().then(e.bind(e,62446)))},{path:"/admin/users",component:ft(()=>e.e(7497).then(e.bind(e,2667)))},{path:"/admin/users/create",component:ft(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:Ee},{path:"/admin/orgs",component:ft(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:ft(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:ft(()=>e.e(7675).then(e.bind(e,14527)))},{path:"/admin/stats",component:ft(()=>Promise.resolve().then(e.bind(e,93976)))},{path:"/admin/ldap",component:ya},{path:"/login",component:M,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:ft(()=>e.e(7429).then(e.bind(e,62887))),chromeless:!0},{path:"/verify",component:r.ZP.verifyEmailEnabled?ft(()=>e.e(7583).then(e.bind(e,27583))):()=>t.createElement(n.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:r.ZP.disableUserSignUp?()=>t.createElement(n.l_,{to:"/login"}):ft(()=>e.e(615).then(e.bind(e,40615))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:ft(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:ft(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:ft(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:ft(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:ft(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:ft(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:ft(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:ft(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:ft(()=>Promise.all([e.e(3755),e.e(1579),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:ft(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>N.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[V.AccessControlAction.AlertingRuleRead]),component:ft(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:ft(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:ft(()=>e.e(743).then(e.bind(e,76137)))},...Ks(),...Hn(),...Za(),...jt(),...Ts(),...ds,...bs(),...pn(),{path:"/*",component:L}].filter(o.fQ)}function Za(dn=r.ZP){return dn.supportBundlesEnabled?[{path:"/support-bundles",component:ft(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:ft(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function Ks(dn=r.ZP){return dn.featureToggles.scenes?[{path:"/scenes",component:ft(()=>e.e(207).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:ft(()=>e.e(207).then(e.bind(e,44336)))},{path:"/scenes/grafana-monitoring",exact:!1,component:ft(()=>e.e(207).then(e.bind(e,38282)))},{path:"/scenes/:name",component:ft(()=>e.e(207).then(e.bind(e,23192)))}]:[]}},22357:(Y,O,e)=>{"use strict";e.d(O,{U:()=>G,x:()=>I});var t=e(62992),n=e(24290),o=e(10655),s=e(14393),l=e(83829),f=e(98864),d=e(61962);const r={navBarTree:d.V4,navIndex:s.G4,appNotifications:f.VW};var c=e(66114),a=e(11626),u=e(56777),i=e(85389),p=e(88612),g=e(36281),y=e(58790),E=e(41632),h=e(48197),v=e(15932),C=e(75804),m=e(24693),D=e(17283),P=e(46732),b=e(66552),M=e(54294),x=e(45003),A=e(62295),T=e(97189),S=e(12142),U=e(7240),R=e(29427),F=e(70431);const B={...r,...a.ZP,...T.ZP,...u.ZP,...v.ZP,...y.ZP,...h.ZP,...E.ZP,...S.ZP,...x.ZP,...M.ZP,...C.ZP,...D.ZP,...p.ZP,...c.ZP,...m.ZP,...g.ZP,...P.ZP,...U.ZP,...A.ZP,...i.ZP,plugins:b.I6,[R.C.reducerPath]:R.C.reducer,[o.Rh.reducerPath]:o.Rh.reducer,[n.Zi.reducerPath]:n.Zi.reducer},K={},L=V=>{Object.assign(K,V)},N=()=>{const V=(0,l.combineReducers)({...B,...K});return(H,Q)=>{if(Q.type!==F.e.type)return V(H,Q);const{cleanupAction:oe}=Q.payload;return oe(H),V(H,Q)}};var z=e(3153);function G(V){L(V)}function I(V){const H=(0,t.xC)({reducer:N(),middleware:Q=>Q({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(R.C.middleware,o.Rh.middleware,n.Zi.middleware),devTools:!1,preloadedState:{navIndex:(0,s.Cu)(),...V}});return(0,z.PQ)(H),H}},3153:(Y,O,e)=>{"use strict";e.d(O,{PQ:()=>o,WI:()=>l,h:()=>n,y0:()=>s});var t=e(7240);let n;function o(f){n=f}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function l(f){if(!(!n||!n.getState))return n.dispatch(f)}},73757:(Y,O,e)=>{"use strict";e.d(O,{pC:()=>d,zV:()=>f,B5:()=>n,V5:()=>o,bf:()=>s,n8:()=>l,hw:()=>t,BL:()=>c,vT:()=>a,nl:()=>r,eL:()=>u});var t=(i=>(i[i.Admin=4]="Admin",i[i.Editor=2]="Editor",i[i.Member=0]="Member",i[i.Viewer=1]="Viewer",i))(t||{}),n=(i=>(i.Viewer="Viewer",i.Editor="Editor",i.Admin="Admin",i))(n||{}),o=(i=>(i[i.View=1]="View",i[i.Edit=2]="Edit",i[i.Admin=4]="Admin",i))(o||{}),s=(i=>(i.View="View",i.Edit="Edit",i.Admin="Admin",i))(s||{}),l=(i=>(i.Folder="dash-folder",i.Dashboard="dash-db",i.AlertFolder="dash-folder-alerting",i))(l||{}),f=(i=>(i[i.Query=1]="Query",i[i.Admin=2]="Admin",i))(f||{}),d=(i=>(i.Team="Team",i.User="User",i.Viewer="Viewer",i.Editor="Editor",i))(d||{});const r=[{value:1,label:"Query",description:"Can query data source."}],c=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],a=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],u=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(Y,O,e)=>{"use strict";e.d(O,{Dn:()=>P,Eb:()=>C,GL:()=>d,GT:()=>p,Im:()=>E,Jd:()=>M,OW:()=>b,QI:()=>v,Qt:()=>h,RB:()=>A,VJ:()=>D,Wj:()=>a,Xw:()=>c,Yr:()=>S,_B:()=>u,_z:()=>g,hS:()=>i,le:()=>m,nq:()=>l,p8:()=>y,pO:()=>r,xF:()=>T,xt:()=>f,z:()=>x});var t=e(84336),n=e(55391);const o=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),l=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),d=(0,t.X)("threshold-changed");class r extends n.m{}r.type="panel-queries-changed";class c extends n.m{}c.type="panel-transformations-changed";class a extends n.m{}a.type="panels-options-changed";class u extends n.m{}u.type="dashboard-panels-changed";class i extends n.m{}i.type="dashboard-meta-changed";class p extends n.m{}p.type="panel-directive-ready";class g extends n.m{}g.type="render";class y extends n.R{}y.type="zoom-out";var E=(U=>(U[U.Left=-1]="Left",U[U.Right=1]="Right",U))(E||{});class h extends n.R{}h.type="shift-time";class v extends n.m{}v.type="absolute-time";class C extends n.R{}C.type="remove-panel";class m extends n.R{}m.type="show-modal";class D extends n.R{}D.type="show-confirm-modal";class P extends n.R{}P.type="show-react-modal";class b extends n.m{}b.type="hide-modal";class M extends n.m{}M.type="dashboard-saved";class x extends n.R{}x.type="annotation-query-started";class A extends n.R{}A.type="annotation-query-finished";class T extends n.R{}T.type="panel-edit-started";class S extends n.R{}S.type="panel-edit-finished"},3032:(Y,O,e)=>{"use strict";e.d(O,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>o});var t=(l=>(l.left="left",l.right="right",l))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var o=(l=>(l.table="table",l.raw="raw",l))(o||{});const s=["table","raw"]},59784:()=>{"use strict"},27876:(Y,O,e)=>{"use strict";e.d(O,{AccessControlAction:()=>b,AclTarget:()=>r.pC,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>E,CoreEvents:()=>M,DashboardInitPhase:()=>f,DashboardRoutes:()=>l,DataSourcePermissionLevel:()=>r.zV,EXPLORE_GRAPH_STYLES:()=>v.f0,ExploreId:()=>v.Kd,KioskMode:()=>d,OrgRole:()=>r.B5,PermissionLevelString:()=>r.bf,SearchQueryType:()=>r.n8,ServiceAccountStateFilter:()=>u,TABLE_RESULTS_STYLE:()=>v.zQ,TeamPermissionLevel:()=>r.hw,createAsyncThunk:()=>C.hg,dataSourceAclLevels:()=>r.nl,teamsPermissionLevels:()=>r.eL,timeoutMap:()=>h,useDispatch:()=>C.I0,useSelector:()=>C.v9});var t=e(28317),n=e(20352),o=e(88391),s=e(59784),l=(x=>(x.Home="home-dashboard",x.New="new-dashboard",x.Normal="normal-dashboard",x.Path="path-dashboard",x.Scripted="scripted-dashboard",x.Public="public-dashboard",x))(l||{}),f=(x=>(x.NotStarted="Not started",x.Fetching="Fetching",x.Services="Services",x.Failed="Failed",x.Completed="Completed",x))(f||{}),d=(x=>(x.TV="tv",x.Full="full",x))(d||{}),r=e(73757),c=e(47622),a=e(26945),u=(x=>(x.All="All",x.WithExpiredTokens="WithExpiredTokens",x.Disabled="Disabled",x))(u||{}),i=e(56968),p=e(89040),g=e(81146),y=(x=>(x.Success="success",x.Warning="warning",x.Error="error",x.Info="info",x))(y||{}),E=(x=>(x[x.Success=3e3]="Success",x[x.Warning=5e3]="Warning",x[x.Error=7e3]="Error",x))(E||{});const h={success:3e3,warning:5e3,error:7e3,info:3e3};var v=e(3032),C=e(29633),m=e(51904),D=e(18285),P=e(49400),b=(x=>(x.UsersRead="users:read",x.UsersWrite="users:write",x.UsersAuthTokenList="users.authtoken:read",x.UsersAuthTokenUpdate="users.authtoken:write",x.UsersPasswordUpdate="users.password:write",x.UsersDelete="users:delete",x.UsersCreate="users:create",x.UsersEnable="users:enable",x.UsersDisable="users:disable",x.UsersPermissionsUpdate="users.permissions:write",x.UsersLogout="users:logout",x.UsersQuotasList="users.quotas:read",x.UsersQuotasUpdate="users.quotas:write",x.ServiceAccountsRead="serviceaccounts:read",x.ServiceAccountsCreate="serviceaccounts:create",x.ServiceAccountsWrite="serviceaccounts:write",x.ServiceAccountsDelete="serviceaccounts:delete",x.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",x.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",x.OrgsRead="orgs:read",x.OrgsPreferencesRead="orgs.preferences:read",x.OrgsWrite="orgs:write",x.OrgsPreferencesWrite="orgs.preferences:write",x.OrgsCreate="orgs:create",x.OrgsDelete="orgs:delete",x.OrgUsersRead="org.users:read",x.OrgUsersAdd="org.users:add",x.OrgUsersRemove="org.users:remove",x.OrgUsersWrite="org.users:write",x.LDAPUsersRead="ldap.user:read",x.LDAPUsersSync="ldap.user:sync",x.LDAPStatusRead="ldap.status:read",x.DataSourcesExplore="datasources:explore",x.DataSourcesRead="datasources:read",x.DataSourcesCreate="datasources:create",x.DataSourcesWrite="datasources:write",x.DataSourcesDelete="datasources:delete",x.DataSourcesPermissionsRead="datasources.permissions:read",x.DataSourcesCachingRead="datasources.caching:read",x.DataSourcesInsightsRead="datasources.insights:read",x.ActionServerStatsRead="server.stats:read",x.ActionTeamsCreate="teams:create",x.ActionTeamsDelete="teams:delete",x.ActionTeamsRead="teams:read",x.ActionTeamsWrite="teams:write",x.ActionTeamsPermissionsRead="teams.permissions:read",x.ActionTeamsPermissionsWrite="teams.permissions:write",x.ActionRolesList="roles:read",x.ActionTeamsRolesList="teams.roles:read",x.ActionTeamsRolesAdd="teams.roles:add",x.ActionTeamsRolesRemove="teams.roles:remove",x.ActionUserRolesList="users.roles:read",x.ActionUserRolesAdd="users.roles:add",x.ActionUserRolesRemove="users.roles:remove",x.DashboardsRead="dashboards:read",x.DashboardsWrite="dashboards:write",x.DashboardsDelete="dashboards:delete",x.DashboardsCreate="dashboards:create",x.DashboardsPermissionsRead="dashboards.permissions:read",x.DashboardsPermissionsWrite="dashboards.permissions:write",x.DashboardsPublicWrite="dashboards.public:write",x.FoldersRead="folders:read",x.FoldersWrite="folders:write",x.FoldersDelete="folders:delete",x.FoldersCreate="folders:create",x.FoldersPermissionsRead="folders.permissions:read",x.FoldersPermissionsWrite="folders.permissions:write",x.ActionSupportBundlesCreate="support.bundles:create",x.ActionSupportBundlesRead="support.bundles:read",x.ActionSupportBundlesDelete="support.bundles:delete",x.AlertingRuleCreate="alert.rules:create",x.AlertingRuleRead="alert.rules:read",x.AlertingRuleUpdate="alert.rules:write",x.AlertingRuleDelete="alert.rules:delete",x.AlertingInstanceCreate="alert.instances:create",x.AlertingInstanceUpdate="alert.instances:write",x.AlertingInstanceRead="alert.instances:read",x.AlertingNotificationsRead="alert.notifications:read",x.AlertingNotificationsWrite="alert.notifications:write",x.AlertingRuleExternalWrite="alert.rules.external:write",x.AlertingRuleExternalRead="alert.rules.external:read",x.AlertingInstancesExternalWrite="alert.instances.external:write",x.AlertingInstancesExternalRead="alert.instances.external:read",x.AlertingNotificationsExternalWrite="alert.notifications.external:write",x.AlertingNotificationsExternalRead="alert.notifications.external:read",x.AlertingProvisioningRead="alert.provisioning:read",x.AlertingProvisioningWrite="alert.provisioning:write",x.ActionAPIKeysRead="apikeys:read",x.ActionAPIKeysCreate="apikeys:create",x.ActionAPIKeysDelete="apikeys:delete",x.PluginsInstall="plugins:install",x.PluginsWrite="plugins:write",x.SettingsRead="settings:read",x.SettingsWrite="settings:write",x))(b||{}),M=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},29633:(Y,O,e)=>{"use strict";e.d(O,{I0:()=>o,hg:()=>l,v9:()=>s});var t=e(62992),n=e(67948);const o=n.useDispatch,s=n.useSelector,l=(f,d,r)=>(0,t.hg)(f,d,r)},26410:(Y,O,e)=>{"use strict";e.d(O,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(Y,O,e)=>{"use strict";e.d(O,{ED:()=>f,I9:()=>o,T8:()=>r,Yb:()=>s,bj:()=>n,g0:()=>c,pz:()=>d,x_:()=>t});var t=(a=>(a.Firing="firing",a.Inactive="inactive",a.Pending="pending",a))(t||{}),n=(a=>(a.Normal="Normal",a.Alerting="Alerting",a.Pending="Pending",a.NoData="NoData",a.Error="Error",a))(n||{});function o(a){return Object.values(t).includes(a)}function s(a){return Object.values(n).some(u=>u===a)}function l(a){return a!==null&&typeof a<"u"&&!Object.values(t).includes(a)}function f(a){return l(a)?a.split(" ")[0]:a}var d=(a=>(a.Alerting="alerting",a.Recording="recording",a))(d||{}),r=(a=>(a.Cortex="Cortex",a.Mimir="Mimir",a.Prometheus="Prometheus",a.Thanos="Thanos",a))(r||{}),c=(a=>(a.Alerting="Alerting",a.NoData="NoData",a.KeepLastState="KeepLastState",a.OK="OK",a.Error="Error",a))(c||{})},43055:(Y,O,e)=>{"use strict";e.d(O,{P:()=>s,j:()=>n});var t=e(46063);function n(l,f){return(0,t.ED)(l.state)===f}var o=(l=>(l.Firing="firing",l))(o||{}),s=(l=>(l.Alerting="alerting",l.Pending="pending",l.Normal="inactive",l.NoData="nodata",l.Error="error",l))(s||{})},26945:()=>{"use strict"},23932:Y=>{const O="    ";function e(s){let l="";return s&&Object.keys(s).forEach(function(f){l+=f+":"+s[f]+";"}),l}function t(s){function l(d){return'class="'+d+'"'}function f(d){return'style="'+e(s["."+d])+'"'}return s?f:l}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function o(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Y.exports=function(s,l){let f="";const d=t(l);let r=function(a,u,i,p){if(!a.length)return u+" "+i;let g=u+`
`;return f+=O,a.forEach(function(y,E){g+=f+p(y)+(E<a.length-1?",":"")+`
`}),f=f.slice(0,-O.length),g+f+i};function c(a){if(a===void 0)return"";switch(n(a)){case"boolean":return"<span "+d("json-markup-bool")+">"+a+"</span>";case"number":return"<span "+d("json-markup-number")+">"+a+"</span>";case"date":return'<span class="json-markup-string">"'+o(a.toISOString())+'"</span>';case"null":return"<span "+d("json-markup-null")+">null</span>";case"string":return"<span "+d("json-markup-string")+'>"'+o(a.replace(/\n/g,`
`+f))+'"</span>';case"link":return"<span "+d("json-markup-string")+'>"<a href="'+encodeURI(a)+'">'+o(a)+'</a>"</span>';case"array":return r(a,"[","]",c);case"object":const u=Object.keys(a).filter(function(i){return a[i]!==void 0});return r(u,"{","}",function(i){return"<span "+d("json-markup-key")+'>"'+o(i)+'":</span> '+c(a[i])})}return""}return"<div "+d("json-markup")+">"+c(s)+"</div>"}},26189:()=>{(function(Y){var O={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(f){if(!f)n.x=-1;else{var d=t.p2c(f);n.x=Math.max(0,Math.min(d.left,t.width())),n.y=Math.max(0,Math.min(d.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(f){f&&t.setCrosshair(f),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function o(l){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(l){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var f=t.offset();n.x=Math.max(0,Math.min(l.pageX-f.left,t.width())),n.y=Math.max(0,Math.min(l.pageY-f.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(l,f){l.getOptions().crosshair.mode&&(f.mouseout(o),f.mousemove(s))}),t.hooks.drawOverlay.push(function(l,f){var d=l.getOptions().crosshair;if(d.mode){var r=l.getPlotOffset();if(f.save(),f.translate(r.left,r.top),n.x!=-1){var c=l.getOptions().crosshair.lineWidth%2?.5:0;if(f.strokeStyle=d.color,f.lineWidth=d.lineWidth,f.lineJoin="round",f.beginPath(),d.mode.indexOf("x")!=-1){var a=Math.floor(n.x)+c;f.moveTo(a,0),f.lineTo(a,l.height())}if(d.mode.indexOf("y")!=-1){var u=Math.floor(n.y)+c;f.moveTo(0,u),f.lineTo(l.width(),u)}f.stroke()}f.restore()}}),t.hooks.shutdown.push(function(l,f){f.unbind("mouseout",o),f.unbind("mousemove",s)})}Y.plot.plugins.push({init:e,options:O,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(Y){function O(e){e.hooks.processDatapoints.push(function(t,n,o){n.dashes.show&&t.hooks.draw.push(function(s,l){var f=s.getPlotOffset(),d=n.xaxis,r=n.yaxis;function c(p,g){var y=o.points,E=o.pointsize,h=null,v=null,C=0,m=!0,D,P;n.dashes.dashLength[0]?(D=n.dashes.dashLength[0],n.dashes.dashLength[1]?P=n.dashes.dashLength[1]:P=D):P=D=n.dashes.dashLength,l.beginPath();for(var b=E;b<y.length;b+=E){let L=function(N){var z=Math.sqrt(Math.pow(R-S,2)+Math.pow(F-U,2));if(z<=N)return{deltaX:R-S,deltaY:F-U,distance:z,remainder:N-z};var G=R>S?1:-1,I=F>U?1:-1;return{deltaX:G*Math.sqrt(Math.pow(N,2)/(1+Math.pow((F-U)/(R-S),2))),deltaY:I*Math.sqrt(Math.pow(N,2)-Math.pow(N,2)/(1+Math.pow((F-U)/(R-S),2))),distance:N,remainder:0}};var K=L,M=y[b-E],x=y[b-E+1],A=y[b],T=y[b+1];if(!(M==null||A==null)){if(x<=T&&x<r.min){if(T<r.min)continue;M=(r.min-x)/(T-x)*(A-M)+M,x=r.min}else if(T<=x&&T<r.min){if(x<r.min)continue;A=(r.min-x)/(T-x)*(A-M)+M,T=r.min}if(x>=T&&x>r.max){if(T>r.max)continue;M=(r.max-x)/(T-x)*(A-M)+M,x=r.max}else if(T>=x&&T>r.max){if(x>r.max)continue;A=(r.max-x)/(T-x)*(A-M)+M,T=r.max}if(M<=A&&M<d.min){if(A<d.min)continue;x=(d.min-M)/(A-M)*(T-x)+x,M=d.min}else if(A<=M&&A<d.min){if(M<d.min)continue;T=(d.min-M)/(A-M)*(T-x)+x,A=d.min}if(M>=A&&M>d.max){if(A>d.max)continue;x=(d.max-M)/(A-M)*(T-x)+x,M=d.max}else if(A>=M&&A>d.max){if(M>d.max)continue;T=(d.max-M)/(A-M)*(T-x)+x,A=d.max}(M!=h||x!=v)&&l.moveTo(d.p2c(M)+p,r.p2c(x)+g);var S=d.p2c(M)+p,U=r.p2c(x)+g,R=d.p2c(A)+p,F=r.p2c(T)+g,B;do B=L(C>0?C:m?D:P),(B.deltaX!=0||B.deltaY!=0)&&(m?l.lineTo(S+B.deltaX,U+B.deltaY):l.moveTo(S+B.deltaX,U+B.deltaY)),m=!m,C=B.remainder,S+=B.deltaX,U+=B.deltaY;while(B.distance>0);h=A,v=T}}l.stroke()}l.save(),l.translate(f.left,f.top),l.lineJoin="round";var a=n.dashes.lineWidth,u=n.shadowSize;if(a>0&&u>0){l.lineWidth=u,l.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;c(Math.sin(i)*(a/2+u/2),Math.cos(i)*(a/2+u/2)),l.lineWidth=u/2,c(Math.sin(i)*(a/2+u/4),Math.cos(i)*(a/2+u/4))}l.lineWidth=a,l.strokeStyle=n.color,a>0&&c(0,0),l.restore()})})}Y.plot.plugins.push({init:O,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(Y){"use strict";var O={series:{fillBelowTo:null}};function e(t){function n(l,f){var d;for(d=0;d<f.length;++d)if(f[d].id===l.fillBelowTo)return f[d];return null}function o(l,f,d,r,c,a,u,i){var p,g,y,E,h,v;return p=d-l,g=r-f,y=u-c,E=i-a,h=(-g*(l-c)+p*(f-a))/(-y*g+p*E),v=(y*(f-a)-E*(l-c))/(-y*g+p*E),h>=0&&h<=1&&v>=0&&v<=1?[l+v*p,f+v*g]:null}function s(l,f,d){if(d.fillBelowTo===null)return;var r,c,a,u,i,p,g;function y(P,b){f.beginPath(),f.moveTo(d.xaxis.p2c(P)+p.left,d.yaxis.p2c(b)+p.top)}function E(){f.closePath(),f.fill()}function h(){if(a.length/c!==i.length/u)return console.error("Refusing to graph inconsistent number of points"),!1;var P;for(P=0;P<a.length/c;P++)if(a[P*c]!==null&&i[P*u]!==null&&a[P*c]!==i[P*u])return console.error("Refusing to graph points without matching value"),!1;return!0}function v(P,b){console.assert(b>P,"expects the end index to be greater than the start index");var M=P===0||a[P-1]===null||i[P-1]===null,x=!1,A,T;for(A=P;A<b;A++)if(a[A*c+1]===null||i[A*c+1]===null)x=!1,M=!0;else if(a[A*c+1]===i[A*u+1])x=!0,M=!1;else if(a[A*c+1]>i[A*u+1]){M?y(a[A*c],a[A*c+1]):x?y(a[(A-1)*c],a[(A-1)*c+1]):(T=C(A),y(T[0],T[1])),D(A,b);return}else M=!1,x=!1}function C(P){console.assert(P>0,"expects the second point in the series line segment");var b,M;for(b=1;b<i.length/u;b++)if(M=o(a[(P-1)*c],a[(P-1)*c+1],a[P*c],a[P*c+1],i[(b-1)*u],i[(b-1)*u+1],i[b*u],i[b*u+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function m(P,b){console.assert(P>=b,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=P;M>=b;M--)f.lineTo(r.xaxis.p2c(i[M*u])+p.left,r.yaxis.p2c(i[M*u+1])+p.top);E()}function D(P,b){console.assert(P<=b,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,x;for(M=P;M<b;M++)if(a[M*c+1]===null&&M>P){m(M-1,P),v(M,b);return}else if(a[M*c+1]===i[M*u+1]){m(M,P),v(M,b);return}else if(a[M*c+1]<i[M*u+1]){x=C(M),f.lineTo(d.xaxis.p2c(x[0])+p.left,d.yaxis.p2c(x[1])+p.top),m(M,P),v(M,b);return}else f.lineTo(d.xaxis.p2c(a[M*c])+p.left,d.yaxis.p2c(a[M*c+1])+p.top);m(b,P)}r=n(d,l.getData()),r&&(c=d.datapoints.pointsize,a=d.datapoints.points,u=r.datapoints.pointsize,i=r.datapoints.points,p=l.getPlotOffset(),h()&&(g=Y.color.parse(d.color),g.a=.4,g.normalize(),f.fillStyle=g.toString(),v(0,a.length/c)))}t.hooks.drawSeries.push(s)}Y.plot.plugins.push({init:e,options:O,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Y){var O=function(){var d,r,c,a,u,i,p=function(P,b){d=b,r=P.getPlaceholder(),c=P.getOptions(),a=c.series.gauges,u=P.getData(),i=e(a.debug)};p.prototype.calculateLayout=function(){var P=r.width(),b=r.height(),M=Math.min(u.length,a.layout.columns),x=Math.ceil(u.length/M),A=a.layout.margin,T=a.layout.hMargin,S=a.layout.vMargin,U=(P-A*2-T*(M-1))/M,R=(b-A*2-S*(x-1))/x;if(a.layout.square){var F=Math.min(U,R);U=F,R=F}g(a,U);var B=a.cell.margin,K=0,L=0;a.label.show&&(K=a.label.margin,L=a.label.font.size);var N=0,z=0;a.value.show&&(N=a.value.margin,z=a.value.font.size);var G=0;a.threshold.show&&(G=a.threshold.width);var I=0,V=0;a.threshold.label.show&&(I=a.threshold.label.margin,V=a.threshold.label.font.size);for(var H=U/2-B-G-I*2-V,Q=a.gauge.startAngle,oe=a.gauge.endAngle,se=(oe-Q)/100,ie=-1,j=Q;j<oe;j+=se)ie=Math.max(ie,Math.sin(o(j)));ie=Math.max(ie,Math.sin(o(oe)));var de=(R-B*2-K*2-L)/(1+ie);de*ie<N+z/2&&(de=R-B*2-K*2-L-N-z/2);var ce=de-I*2-V-G,ee=Math.min(H,ce),le=a.gauge.width;le>=ee&&(le=Math.max(3,ee/3));var q=I*2+V+G+ee,fe=Math.max(q*(1+ie),q+N+z/2);return{canvasWidth:P,canvasHeight:b,margin:A,hMargin:T,vMargin:S,columns:M,rows:x,cellWidth:U,cellHeight:R,cellMargin:B,labelMargin:K,labelFontSize:L,valueMargin:N,valueFontSize:z,width:le,radius:ee,thresholdWidth:G,thresholdLabelMargin:I,thresholdLabelFontSize:V,gaugeOuterHeight:fe}};function g(P,b){P.gauge.width==="auto"&&(P.gauge.width=Math.max(5,b/8)),P.label.margin==="auto"&&(P.label.margin=Math.max(1,b/20)),P.label.font.size==="auto"&&(P.label.font.size=Math.max(5,b/8)),P.value.margin==="auto"&&(P.value.margin=Math.max(1,b/30)),P.value.font.size==="auto"&&(P.value.font.size=Math.max(5,b/9)),P.threshold.width==="auto"&&(P.threshold.width=Math.max(3,b/100)),P.threshold.label.margin==="auto"&&(P.threshold.label.margin=Math.max(3,b/40)),P.threshold.label.font.size==="auto"&&(P.threshold.label.font.size=Math.max(5,b/15))}p.prototype.calculateAutoValues=g,p.prototype.calculateCellLayout=function(P,b,M){var x=t(b.columns,M),A=n(b.columns,M),T=b.margin+(b.cellWidth+b.hMargin)*x,S=b.margin+(b.cellHeight+b.vMargin)*A,U=T+b.cellWidth/2,R=S+b.cellMargin+b.labelMargin*2+b.labelFontSize+b.thresholdWidth+b.thresholdLabelFontSize+b.thresholdLabelMargin*2+b.radius,F=b.cellHeight-b.cellMargin*2-b.labelMargin*2-b.labelFontSize-b.gaugeOuterHeight,B=0;return P.cell.vAlign==="middle"?B=F/2:P.cell.vAlign==="bottom"&&(B=F),R+=B,{col:x,row:A,x:T,y:S,offsetY:B,cellWidth:b.cellWidth,cellHeight:b.cellHeight,cellMargin:b.cellMargin,cx:U,cy:R}},p.prototype.drawBackground=function(P){a.frame.show&&(d.save(),d.strokeStyle=c.grid.borderColor,d.lineWidth=c.grid.borderWidth,d.strokeRect(0,0,P.canvasWidth,P.canvasHeight),c.grid.backgroundColor&&(d.fillStyle=c.grid.backgroundColor,d.fillRect(0,0,P.canvasWidth,P.canvasHeight)),d.restore())},p.prototype.drawCellBackground=function(P,b){d.save(),P.cell.border&&P.cell.border.show&&P.cell.border.color&&P.cell.border.width&&(d.strokeStyle=P.cell.border.color,d.lineWidth=P.cell.border.width,d.strokeRect(b.x,b.y,b.cellWidth,b.cellHeight)),P.cell.background&&P.cell.background.color&&(d.fillStyle=P.cell.background.color,d.fillRect(b.x,b.y,b.cellWidth,b.cellHeight)),d.restore()},p.prototype.drawGauge=function(P,b,M,x,A){var T=P.gauge.shadow.show?P.gauge.shadow.blur:0,S=h(P,A),U=y(P,b,A);C(M.cx,M.cy,b.radius,b.width,o(P.gauge.startAngle),o(P.gauge.endAngle),P.gauge.border.color,P.gauge.border.width,P.gauge.background.color,T),C(M.cx,M.cy,b.radius-1,b.width-2,o(U.a1),o(U.a2),S,1,S,T),P.gauge.neutralValue!=null&&E(P,b,M,S)};function y(P,b,M){let x={};var A=P.gauge.neutralValue;return A!=null?M<A?(x.a1=v(P,b,M),x.a2=v(P,b,A)):(x.a1=v(P,b,A),x.a2=v(P,b,M)):(x.a1=P.gauge.startAngle,x.a2=v(P,b,M)),x}function E(P,b,M,x){var A=(P.gauge.max-P.gauge.min)/600;s(d,M.cx,M.cy,b.radius-2,b.width-4,o(v(P,b,P.gauge.neutralValue-A)),o(v(P,b,P.gauge.neutralValue+A)),x,2,P.gauge.background.color)}function h(P,b){for(var M,x=0;x<P.threshold.values.length;x++){var A=P.threshold.values[x];if(M=A.color,b<A.value)break}return M}function v(P,b,M){var x=P.gauge.startAngle+(P.gauge.endAngle-P.gauge.startAngle)*((M-P.gauge.min)/(P.gauge.max-P.gauge.min));return x<P.gauge.startAngle?x=P.gauge.startAngle:x>P.gauge.endAngle&&(x=P.gauge.endAngle),x}p.prototype.drawThreshold=function(P,b,M){for(var x=P.gauge.startAngle,A=0;A<P.threshold.values.length;A++){var T=P.threshold.values[A];c1=T.color,a2=v(P,b,T.value),s(d,M.cx,M.cy,b.radius+b.thresholdWidth,b.thresholdWidth-2,o(x),o(a2),c1,1,c1),x=a2}};function C(P,b,M,x,A,T,S,U,R,F){A!==T&&(d.save(),s(d,P,b,M,x,A,T,S,U,R),F&&(s(d,P,b,M,x,A,T),d.clip(),d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=10,d.shadowColor="gray",s(d,P,b,M+1,x+2,A,T,S,1)),d.restore())}p.prototype.drawLable=function(P,b,M,x,A){D(M.cx,M.y+M.cellMargin+b.labelMargin+M.offsetY,"flotGaugeLabel"+x,P.label.formatter?P.label.formatter(A.label,A.data[0][1]):text,P.label)},p.prototype.drawValue=function(P,b,M,x,A){D(M.cx,M.cy-P.value.font.size/2,"flotGaugeValue"+x,P.value.formatter?P.value.formatter(A.label,A.data[0][1]):text,P.value)},p.prototype.drawThresholdValues=function(P,b,M,x){m(P,b,M,"Min"+x,P.gauge.min,P.gauge.startAngle),m(P,b,M,"Max"+x,P.gauge.max,P.gauge.endAngle);for(var A=0;A<P.threshold.values.length;A++){var T=P.threshold.values[A];if(T.value>P.gauge.min&&T.value<P.gauge.max){var S=v(P,b,T.value);m(P,b,M,x+"_"+A,T.value,S)}}var U=P.gauge.neutralValue;U!=null&&U>P.gauge.min&&U<P.gauge.max&&m(P,b,M,"Neutral"+x,U,v(P,b,U))};function m(P,b,M,x,A,T){D(M.cx+(b.thresholdLabelMargin+b.thresholdLabelFontSize/2+b.radius)*Math.cos(o(T)),M.cy+(b.thresholdLabelMargin+b.thresholdLabelFontSize/2+b.radius)*Math.sin(o(T)),"flotGaugeThresholdValue"+x,P.threshold.label.formatter?P.threshold.label.formatter(A):A,P.threshold.label,T)}function D(P,b,M,x,A,T){var S=Y(r).find("#"+M),U=S.length;U||(S=Y("<span></span>"),S.attr("id",M),S.attr("class","flot-temp-elem"),r.append(S)),S.css("position","absolute"),S.css("top",b+"px"),S.css("white-space","nowrap"),A.font.size&&S.css("font-size",A.font.size+"px"),A.font.family&&S.css("font-family",A.font.family),A.color&&S.css("color",A.color),A.background.color&&S.css("background-color",A.background.color),A.background.opacity&&S.css("opacity",A.background.opacity),S.text(x),S.css("left",P+"px"),S.css("left",parseInt(S.css("left"))-S.width()/2+"px"),!U&&T&&(S.css("top",parseInt(S.css("top"))-S.height()/2+"px"),S.css("transform","rotate("+(180*T+90)+"deg)"))}return p}();function e(d){return typeof Logger<"u"?new Logger(d):null}function t(d,r){return r%d}function n(d,r){return Math.floor(r/d)}function o(d){return d*Math.PI}function s(d,r,c,a,u,i,p,g,y,E){if(i!==p){var h=!1;d.save(),d.beginPath(),d.arc(r,c,a,i,p,h),d.lineTo(r+(a-u)*Math.cos(p),c+(a-u)*Math.sin(p)),d.arc(r,c,a-u,p,i,!h),d.closePath(),y&&(d.lineWidth=y),g&&(d.strokeStyle=g,d.stroke()),E&&(d.fillStyle=E,d.fill()),d.restore()}}function l(d){d.hooks.processOptions.push(function(r,c){var a=e(c.series.gauges.debug);c.series.gauges.show&&(c.grid.show=!1,c.legend.show=!1);var u=c.series.gauges.threshold.values;u.sort(function(i,p){return i.value<p.value?-1:i.value>p.value?1:0})}),d.hooks.draw.push(function(r,c){var a=r.getOptions(),u=a.series.gauges,i=e(u.debug);if(u.show){var p=r.getData();if(!(!p||!p.length)){var g=new O(r,c),y=g.calculateLayout();u.debug.layout,g.drawBackground(y);for(var E=0;E<p.length;E++){var h=p[E],v=Y.extend({},u,h.gauges);h.gauges&&g.calculateAutoValues(v,y.cellWidth);var C=g.calculateCellLayout(v,y,E);g.drawCellBackground(v,C),v.debug.layout,v.label.show&&g.drawLable(v,y,C,E,h),g.drawGauge(v,y,C,h.label,h.data[0][1]),v.threshold.show&&g.drawThreshold(v,y,C),v.threshold.label.show&&g.drawThresholdValues(v,y,C,E),v.value.show&&g.drawValue(v,y,C,E,h)}}}})}var f={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(d,r){return d}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(d,r){return parseInt(r)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(d){return d}},values:[]}}}};Y.plot.plugins.push({init:l,options:f,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(Y){Y.color={},Y.color.make=function(e,t,n,o){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=o??1,s.add=function(l,f){for(var d=0;d<l.length;++d)s[l.charAt(d)]+=f;return s.normalize()},s.scale=function(l,f){for(var d=0;d<l.length;++d)s[l.charAt(d)]*=f;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function l(f,d,r){return d<f?f:d>r?r:d}return s.r=l(0,parseInt(s.r),255),s.g=l(0,parseInt(s.g),255),s.b=l(0,parseInt(s.b),255),s.a=l(0,s.a,1),s},s.clone=function(){return Y.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Y.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Y.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Y.color.parse(n)},Y.color.parse=function(e){var t,n=Y.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var o=Y.trim(e).toLowerCase();return o=="transparent"?n(255,255,255,0):(t=O[o]||[0,0,0],n(t[0],t[1],t[2]))};var O={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Y){var O=Object.prototype.hasOwnProperty;Y.fn.detach||(Y.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(o,s){var l=s.children("."+o)[0];if(l==null&&(l=document.createElement("canvas"),l.className=o,Y(l).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!l.getContext))if(window.G_vmlCanvasManager)l=window.G_vmlCanvasManager.initElement(l);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=l;var f=this.context=l.getContext("2d"),d=window.devicePixelRatio||1,r=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;this.pixelRatio=d/r,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(o,s){if(o<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+o+", height = "+s);var l=this.element,f=this.context,d=this.pixelRatio;this.width!=o&&(l.width=o*d,l.style.width=o+"px",this.width=o),this.height!=s&&(l.height=s*d,l.style.height=s+"px",this.height=s),f.restore(),f.save(),f.scale(d,d)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var o=this._textCache;for(var s in o)if(O.call(o,s)){var l=this.getTextLayer(s),f=o[s];l.hide();for(var d in f)if(O.call(f,d)){var r=f[d];for(var c in r)if(O.call(r,c)){for(var a=r[c].positions,u=0,i;i=a[u];u++)i.active?i.rendered||(l.append(i.element),i.rendered=!0):(a.splice(u--,1),i.rendered&&i.element.detach());a.length==0&&delete r[c]}}l.show()}},e.prototype.getTextLayer=function(o){var s=this.text[o];return s==null&&(this.textContainer==null&&(this.textContainer=Y("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[o]=Y("<div></div>").addClass(o).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(o,s,l,f,d){var r,c,a,u;if(s=""+s,typeof l=="object"?r=l.style+" "+l.variant+" "+l.weight+" "+l.size+"px/"+l.lineHeight+"px "+l.family:r=l,c=this._textCache[o],c==null&&(c=this._textCache[o]={}),a=c[r],a==null&&(a=c[r]={}),u=a[s],u==null){var i=Y("<div></div>").html(s).css({position:"absolute","max-width":d,top:-9999}).appendTo(this.getTextLayer(o));typeof l=="object"?i.css({font:r,color:l.color}):typeof l=="string"&&i.addClass(l),u=a[s]={element:i,positions:[]};var p=this._textSizeCache[s];p?(u.width=p.width,u.height=p.height):(u.width=i.outerWidth(!0),u.height=i.outerHeight(!0),this._textSizeCache[s]={width:u.width,height:u.height}),i.detach()}return u},e.prototype.addText=function(o,s,l,f,d,r,c,a,u){var i=this.getTextInfo(o,f,d,r,c),p=i.positions;a=="center"?s-=i.width/2:a=="right"&&(s-=i.width),u=="middle"?l-=i.height/2:u=="bottom"&&(l-=i.height);for(var g=0,y;y=p[g];g++)if(y.x==s&&y.y==l){y.active=!0;return}y={active:!0,rendered:!1,element:p.length?i.element.clone():i.element,x:s,y:l},p.push(y),y.element.css({top:Math.round(l),left:Math.round(s),"text-align":a})},e.prototype.removeText=function(o,s,l,f,d,r){if(f==null){var c=this._textCache[o];if(c!=null){for(var a in c)if(O.call(c,a)){var u=c[a];for(var i in u)if(O.call(u,i))for(var p=u[i].positions,g=0,y;y=p[g];g++)y.active=!1}}}else for(var p=this.getTextInfo(o,f,d,r).positions,g=0,y;y=p[g];g++)y.x==s&&y.y==l&&(y.active=!1)};function t(o,s,l,f){var d=[],r={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},c=null,a=null,u=null,i=null,p=null,g=[],y=[],E={left:0,right:0,top:0,bottom:0},h=0,v=0,C={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},m=this;m.setData=M,m.setupGrid=Q,m.draw=ce,m.getPlaceholder=function(){return o},m.getCanvas=function(){return c.element},m.getPlotOffset=function(){return E},m.width=function(){return h},m.height=function(){return v},m.offset=function(){var ue=u.offset();return ue.left+=E.left,ue.top+=E.top,ue},m.getData=function(){return d},m.getAxes=function(){var ue={},De;return Y.each(g.concat(y),function(Ne,tt){tt&&(ue[tt.direction+(tt.n!=1?tt.n:"")+"axis"]=tt)}),ue},m.getXAxes=function(){return g},m.getYAxes=function(){return y},m.c2p=S,m.p2c=U,m.getOptions=function(){return r},m.highlight=mt,m.unhighlight=vt,m.triggerRedrawOverlay=We,m.pointOffset=function(ue){return{left:parseInt(g[A(ue,"x")-1].p2c(+ue.x)+E.left,10),top:parseInt(y[A(ue,"y")-1].p2c(+ue.y)+E.top,10)}},m.shutdown=N,m.destroy=function(){N(),o.removeData("plot").empty(),d=[],r=null,c=null,a=null,u=null,i=null,p=null,g=[],y=[],C=null,Te=[],m=null},m.resize=function(){var ue=o.width(),De=o.height();c.resize(ue,De),a.resize(ue,De)},m.hooks=C,P(m),b(l),K(),M(s),Q(),ce(),L();function D(ue,De){De=[m].concat(De);for(var Ne=0;Ne<ue.length;++Ne)ue[Ne].apply(this,De)}function P(){for(var ue={Canvas:e},De=0;De<f.length;++De){var Ne=f[De];Ne.init(m,ue),Ne.options&&Y.extend(!0,r,Ne.options)}}function b(ue){Y.extend(!0,r,ue),ue&&ue.colors&&(r.colors=ue.colors),r.xaxis.color==null&&(r.xaxis.color=Y.color.parse(r.grid.color).scale("a",.22).toString()),r.yaxis.color==null&&(r.yaxis.color=Y.color.parse(r.grid.color).scale("a",.22).toString()),r.xaxis.tickColor==null&&(r.xaxis.tickColor=r.grid.tickColor||r.xaxis.color),r.yaxis.tickColor==null&&(r.yaxis.tickColor=r.grid.tickColor||r.yaxis.color),r.grid.borderColor==null&&(r.grid.borderColor=r.grid.color),r.grid.tickColor==null&&(r.grid.tickColor=Y.color.parse(r.grid.color).scale("a",.22).toString());var De,Ne,tt,et=o.css("font-size"),Ue=et?+et.replace("px",""):13,Fe={style:o.css("font-style"),size:Math.round(.8*Ue),variant:o.css("font-variant"),weight:o.css("font-weight"),family:o.css("font-family")};for(tt=r.xaxes.length||1,De=0;De<tt;++De)Ne=r.xaxes[De],Ne&&!Ne.tickColor&&(Ne.tickColor=Ne.color),Ne=Y.extend(!0,{},r.xaxis,Ne),r.xaxes[De]=Ne,Ne.font&&(Ne.font=Y.extend({},Fe,Ne.font),Ne.font.color||(Ne.font.color=Ne.color),Ne.font.lineHeight||(Ne.font.lineHeight=Math.round(Ne.font.size*1.15)));for(tt=r.yaxes.length||1,De=0;De<tt;++De)Ne=r.yaxes[De],Ne&&!Ne.tickColor&&(Ne.tickColor=Ne.color),Ne=Y.extend(!0,{},r.yaxis,Ne),r.yaxes[De]=Ne,Ne.font&&(Ne.font=Y.extend({},Fe,Ne.font),Ne.font.color||(Ne.font.color=Ne.color),Ne.font.lineHeight||(Ne.font.lineHeight=Math.round(Ne.font.size*1.15)));for(r.xaxis.noTicks&&r.xaxis.ticks==null&&(r.xaxis.ticks=r.xaxis.noTicks),r.yaxis.noTicks&&r.yaxis.ticks==null&&(r.yaxis.ticks=r.yaxis.noTicks),r.x2axis&&(r.xaxes[1]=Y.extend(!0,{},r.xaxis,r.x2axis),r.xaxes[1].position="top",r.x2axis.min==null&&(r.xaxes[1].min=null),r.x2axis.max==null&&(r.xaxes[1].max=null)),r.y2axis&&(r.yaxes[1]=Y.extend(!0,{},r.yaxis,r.y2axis),r.yaxes[1].position="right",r.y2axis.min==null&&(r.yaxes[1].min=null),r.y2axis.max==null&&(r.yaxes[1].max=null)),r.grid.coloredAreas&&(r.grid.markings=r.grid.coloredAreas),r.grid.coloredAreasColor&&(r.grid.markingsColor=r.grid.coloredAreasColor),r.lines&&Y.extend(!0,r.series.lines,r.lines),r.points&&Y.extend(!0,r.series.points,r.points),r.bars&&Y.extend(!0,r.series.bars,r.bars),r.shadowSize!=null&&(r.series.shadowSize=r.shadowSize),r.highlightColor!=null&&(r.series.highlightColor=r.highlightColor),De=0;De<r.xaxes.length;++De)R(g,De+1).options=r.xaxes[De];for(De=0;De<r.yaxes.length;++De)R(y,De+1).options=r.yaxes[De];for(var Ee in C)r.hooks[Ee]&&r.hooks[Ee].length&&(C[Ee]=C[Ee].concat(r.hooks[Ee]));D(C.processOptions,[r])}function M(ue){d=x(ue),F(),B()}function x(ue){for(var De=[],Ne=0;Ne<ue.length;++Ne){var tt=Y.extend(!0,{},r.series);ue[Ne].data!=null?(tt.data=ue[Ne].data,delete ue[Ne].data,Y.extend(!0,tt,ue[Ne]),ue[Ne].data=tt.data):tt.data=ue[Ne],De.push(tt)}return De}function A(ue,De){var Ne=ue[De+"axis"];return typeof Ne=="object"&&(Ne=Ne.n),typeof Ne!="number"&&(Ne=1),Ne}function T(){return Y.grep(g.concat(y),function(ue){return ue})}function S(ue){var De={},Ne,tt;for(Ne=0;Ne<g.length;++Ne)tt=g[Ne],tt&&(De["x"+tt.n]=tt.c2p(ue.left));for(Ne=0;Ne<y.length;++Ne)tt=y[Ne],tt&&(De["y"+tt.n]=tt.c2p(ue.top));return De.x1!==void 0&&(De.x=De.x1),De.y1!==void 0&&(De.y=De.y1),De}function U(ue){var De={},Ne,tt,et;for(Ne=0;Ne<g.length;++Ne)if(tt=g[Ne],tt&&tt.used&&(et="x"+tt.n,ue[et]==null&&tt.n==1&&(et="x"),ue[et]!=null)){De.left=tt.p2c(ue[et]);break}for(Ne=0;Ne<y.length;++Ne)if(tt=y[Ne],tt&&tt.used&&(et="y"+tt.n,ue[et]==null&&tt.n==1&&(et="y"),ue[et]!=null)){De.top=tt.p2c(ue[et]);break}return De}function R(ue,De){return ue[De-1]||(ue[De-1]={n:De,direction:ue==g?"x":"y",options:Y.extend(!0,{},ue==g?r.xaxis:r.yaxis)}),ue[De-1]}function F(){var ue=d.length,De=-1,Ne;for(Ne=0;Ne<d.length;++Ne){var tt=d[Ne].color;tt!=null&&(ue--,typeof tt=="number"&&tt>De&&(De=tt))}ue<=De&&(ue=De+1);var et,Ue=[],Fe=r.colors,Ee=Fe.length,Me=0;for(Ne=0;Ne<ue;Ne++)et=Y.color.parse(Fe[Ne%Ee]||"#666"),Ne%Ee==0&&Ne&&(Me>=0?Me<.5?Me=-Me-.2:Me=0:Me=-Me),Ue[Ne]=et.scale("rgb",1+Me);var He=0,Ze;for(Ne=0;Ne<d.length;++Ne){if(Ze=d[Ne],Ze.color==null?(Ze.color=Ue[He].toString(),++He):typeof Ze.color=="number"&&(Ze.color=Ue[Ze.color].toString()),Ze.lines.show==null){var lt,bt=!0;for(lt in Ze)if(Ze[lt]&&Ze[lt].show){bt=!1;break}bt&&(Ze.lines.show=!0)}Ze.lines.zero==null&&(Ze.lines.zero=!!Ze.lines.fill),Ze.xaxis=R(g,A(Ze,"x")),Ze.yaxis=R(y,A(Ze,"y"))}}function B(){var ue=Number.POSITIVE_INFINITY,De=Number.NEGATIVE_INFINITY,Ne=Number.MAX_VALUE,tt,et,Ue,Fe,Ee,Me,He,Ze,lt,bt,Pt,Je,Dt,Ve,Xe,st;function ut(ft,Ht,$t){Ht<ft.datamin&&Ht!=-Ne&&(ft.datamin=Ht),$t>ft.datamax&&$t!=Ne&&(ft.datamax=$t)}for(Y.each(T(),function(ft,Ht){Ht.datamin=ue,Ht.datamax=De,Ht.used=!1}),tt=0;tt<d.length;++tt)Me=d[tt],Me.datapoints={points:[]},D(C.processRawData,[Me,Me.data,Me.datapoints]);for(tt=0;tt<d.length;++tt){if(Me=d[tt],Xe=Me.data,st=Me.datapoints.format,!st){if(st=[],st.push({x:!0,number:!0,required:!0}),st.push({y:!0,number:!0,required:!0}),Me.stack||Me.bars.show||Me.lines.show&&Me.lines.fill){var xt=!!(Me.bars.show&&Me.bars.zero||Me.lines.show&&Me.lines.zero);st.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:xt}),Me.bars.horizontal&&(delete st[st.length-1].y,st[st.length-1].x=!0)}Me.datapoints.format=st}if(Me.datapoints.pointsize==null){Me.datapoints.pointsize=st.length,Ze=Me.datapoints.pointsize,He=Me.datapoints.points;var Kt=Me.lines.show&&Me.lines.steps;for(Me.xaxis.used=Me.yaxis.used=!0,et=Ue=0;et<Xe.length;++et,Ue+=Ze){Ve=Xe[et];var Jt=Ve==null;if(!Jt)for(Fe=0;Fe<Ze;++Fe)Je=Ve[Fe],Dt=st[Fe],Dt&&(Dt.number&&Je!=null&&(Je=+Je,isNaN(Je)?Je=null:Je==1/0?Je=Ne:Je==-1/0&&(Je=-Ne)),Je==null&&(Dt.required&&(Jt=!0),Dt.defaultValue!=null&&(Je=Dt.defaultValue))),He[Ue+Fe]=Je;if(Jt)for(Fe=0;Fe<Ze;++Fe)Je=He[Ue+Fe],Je!=null&&(Dt=st[Fe],Dt.autoscale!==!1&&(Dt.x&&ut(Me.xaxis,Je,Je),Dt.y&&ut(Me.yaxis,Je,Je))),He[Ue+Fe]=null;if(Kt&&Ue>0&&(!Jt||He[Ue-Ze]!=null)){for(Fe=0;Fe<Ze;++Fe)He[Ue+Ze+Fe]=He[Ue+Fe];He[Ue+1]=He[Ue-Ze+1]||0,Jt&&(He[Ue]=Ve[0]),Ue+=Ze}}}}for(tt=0;tt<d.length;++tt){if(Me=d[tt],He=Me.datapoints.points,Ze=Me.datapoints.pointsize,Me.transform==="negative-Y")for(et=0;et<He.length;et+=Ze)He[et]!=null&&(Je=He[et+1],He[et+1]=-Je);D(C.processDatapoints,[Me,Me.datapoints])}for(tt=0;tt<d.length;++tt){Me=d[tt],He=Me.datapoints.points,Ze=Me.datapoints.pointsize,st=Me.datapoints.format;var On=ue,Nn=ue,jn=De,ya=De;for(et=0;et<He.length;et+=Ze)if(He[et]!=null)for(Fe=0;Fe<Ze;++Fe)Je=He[et+Fe],Dt=st[Fe],!(!Dt||Dt.autoscale===!1||Je==Ne||Je==-Ne)&&(Dt.x&&(Je<On&&(On=Je),Je>jn&&(jn=Je)),Dt.y&&(Je<Nn&&(Nn=Je),Je>ya&&(ya=Je)));if(Me.bars.show){var Lt;switch(Me.bars.align){case"left":Lt=0;break;case"right":Lt=-Me.bars.barWidth;break;default:Lt=-Me.bars.barWidth/2}Me.bars.horizontal?(Nn+=Lt,ya+=Lt+Me.bars.barWidth):(On+=Lt,jn+=Lt+Me.bars.barWidth)}ut(Me.xaxis,On,jn),ut(Me.yaxis,Nn,ya)}Y.each(T(),function(ft,Ht){Ht.datamin==ue&&(Ht.datamin=null),Ht.datamax==De&&(Ht.datamax=null)})}function K(){o.find(".flot-temp-elem").remove(),o.css("position")=="static"&&o.css("position","relative"),c=new e("flot-base",o),a=new e("flot-overlay",o),i=c.context,p=a.context,u=Y(a.element).unbind();var ue=o.data("plot");ue&&(ue.shutdown(),a.clear()),o.data("plot",m)}function L(){r.grid.hoverable&&(u.mousemove(it),u.bind("mouseleave",ht),Y(document).bind("touchend",ye)),r.grid.clickable&&u.click(Re),D(C.bindEvents,[u])}function N(){Le&&clearTimeout(Le),u.unbind("mousemove",it),u.unbind("mouseleave",ht),u.unbind("click",Re),Y(document).unbind("touchend",ye),D(C.shutdown,[u])}function z(ue){function De(Fe){return Fe}var Ne,tt,et=ue.options.transform||De,Ue=ue.options.inverseTransform;ue.direction=="x"?(Ne=ue.scale=h/Math.abs(et(ue.max)-et(ue.min)),tt=Math.min(et(ue.max),et(ue.min))):(Ne=ue.scale=v/Math.abs(et(ue.max)-et(ue.min)),Ne=-Ne,tt=Math.max(et(ue.max),et(ue.min))),et==De?ue.p2c=function(Fe){return(Fe-tt)*Ne}:ue.p2c=function(Fe){return(et(Fe)-tt)*Ne},Ue?ue.c2p=function(Fe){return Ue(tt+Fe/Ne)}:ue.c2p=function(Fe){return tt+Fe/Ne}}function G(ue){for(var De=ue.options,Ne=ue.ticks||[],tt=De.labelWidth||0,et=De.labelHeight||0,Ue=tt||(ue.direction=="x"?Math.floor(c.width/(Ne.length||1)):null),Fe=ue.direction+"Axis "+ue.direction+ue.n+"Axis",Ee="flot-"+ue.direction+"-axis flot-"+ue.direction+ue.n+"-axis "+Fe,Me=De.font||"flot-tick-label tickLabel",He=0;He<Ne.length;++He){var Ze=Ne[He];if(Ze.label){var lt=c.getTextInfo(Ee,Ze.label,Me,null,Ue);tt=Math.max(tt,lt.width+1),et=Math.max(et,lt.height)}}ue.labelWidth=De.labelWidth||tt,ue.labelHeight=De.labelHeight||et}function I(ue){var De=ue.labelWidth,Ne=ue.labelHeight,tt=ue.options.position,et=ue.direction==="x",Ue=ue.options.tickLength,Fe=r.grid.axisMargin,Ee=r.grid.labelMargin,Me=r.grid.eventSectionHeight,He=!0,Ze=!0,lt=!0,bt=!1;Y.each(et?g:y,function(Pt,Je){Je&&(Je.show||Je.reserveSpace)&&(Je===ue?bt=!0:Je.options.position===tt&&(bt?Ze=!1:He=!1),bt||(lt=!1))}),Ze&&(Fe=0),Ue==null&&(Ue=lt?"full":5),isNaN(+Ue)||(Ee+=+Ue),et?(Ne+=Ee,Ne+=Me,tt=="bottom"?(E.bottom+=Ne+Fe,ue.box={top:c.height-E.bottom,height:Ne}):(ue.box={top:E.top+Fe,height:Ne},E.top+=Ne+Fe)):(De+=Ee,tt=="left"?(ue.box={left:E.left+Fe,width:De},E.left+=De+Fe):(E.right+=De+Fe,ue.box={left:c.width-E.right,width:De})),ue.position=tt,ue.tickLength=Ue,ue.box.padding=Ee,ue.box.eventSectionPadding=Me,ue.innermost=He}function V(ue){ue.direction=="x"?(ue.box.left=E.left-ue.labelWidth/2,ue.box.width=c.width-E.left-E.right+ue.labelWidth):(ue.box.top=E.top-ue.labelHeight/2,ue.box.height=c.height-E.bottom-E.top+ue.labelHeight)}function H(){var ue=r.grid.minBorderMargin,De,Ne;if(ue==null)for(ue=0,Ne=0;Ne<d.length;++Ne)ue=Math.max(ue,2*(d[Ne].points.radius+d[Ne].points.lineWidth/2));var tt={left:ue,right:ue,top:ue,bottom:ue};Y.each(T(),function(et,Ue){Ue.reserveSpace&&Ue.ticks&&Ue.ticks.length&&(Ue.direction==="x"?(tt.left=Math.max(tt.left,Ue.labelWidth/2),tt.right=Math.max(tt.right,Ue.labelWidth/2)):(tt.bottom=Math.max(tt.bottom,Ue.labelHeight/2),tt.top=Math.max(tt.top,Ue.labelHeight/2)))}),E.left=Math.ceil(Math.max(tt.left,E.left)),E.right=Math.ceil(Math.max(tt.right,E.right)),E.top=Math.ceil(Math.max(tt.top,E.top)),E.bottom=Math.ceil(Math.max(tt.bottom,E.bottom))}function Q(){var ue,De=T(),Ne=r.grid.show;for(var tt in E){var et=r.grid.margin||0;E[tt]=typeof et=="number"?et:et[tt]||0}D(C.processOffset,[E]);for(var tt in E)typeof r.grid.borderWidth=="object"?E[tt]+=Ne?r.grid.borderWidth[tt]:0:E[tt]+=Ne?r.grid.borderWidth:0;if(Y.each(De,function(Ee,Me){var He=Me.options;Me.show=He.show==null?Me.used:He.show,Me.reserveSpace=He.reserveSpace==null?Me.show:He.reserveSpace,oe(Me)}),D(C.processRange,[]),Ne){for(var Ue=Y.grep(De,function(Ee){return Ee.show||Ee.reserveSpace}),Fe=!1,ue=0;ue<2&&(Y.each(Ue,function(Me,He){ie(He),j(He),Fe=de(He,He.ticks)||Fe,G(He)}),Fe&&C.processRange.length>0);ue++)D(C.processRange,[]),Fe=!1;for(ue=Ue.length-1;ue>=0;--ue)I(Ue[ue]);H(),Y.each(Ue,function(Ee,Me){V(Me)})}h=c.width-E.left-E.right,v=c.height-E.bottom-E.top,Y.each(De,function(Ee,Me){z(Me)}),Ne&&fe(),gt()}function oe(ue){var De=ue.options,Ne=+(De.min!=null?De.min:ue.datamin),tt=+(De.max!=null?De.max:ue.datamax),et=tt-Ne;if(et==0){var Ue=.25,Fe=Math.abs(tt==0?1:tt*Ue);De.min==null&&(Ne-=Fe),(De.max==null||De.min!=null)&&(tt+=Fe)}else{var Ee=De.autoscaleMargin;Ee!=null&&(De.min==null&&(Ne-=et*Ee,Ne<0&&ue.datamin!=null&&ue.datamin>=0&&(Ne=0)),De.max==null&&(tt+=et*Ee,tt>0&&ue.datamax!=null&&ue.datamax<=0&&(tt=0)))}ue.min=Ne,ue.max=tt}function se(ue){if(ue=Math.abs(String(ue).replace(".","")),ue==0)return 0;for(;ue!=0&&ue%10==0;)ue/=10;return Math.floor(Math.log(ue)/Math.LN10)+1}function ie(ue){var De=ue.options,Ne;typeof De.ticks=="number"&&De.ticks>0?Ne=De.ticks:Ne=.3*Math.sqrt(ue.direction=="x"?c.width:c.height);var tt=(ue.max-ue.min)/Ne,et=-Math.floor(Math.log(tt)/Math.LN10),Ue=De.tickDecimals;Ue!=null&&et>Ue&&(et=Ue);var Fe=Math.pow(10,-et),Ee=tt/Fe,Me;if(Ee<1.5?Me=1:Ee<3?(Me=2,Ee>2.25&&(Ue==null||et+1<=Ue)&&(Me=2.5,++et)):Ee<7.5?Me=5:Me=10,Me*=Fe,De.minTickSize!=null&&Me<De.minTickSize&&(Me=De.minTickSize),ue.delta=tt,ue.tickDecimals=Math.max(0,Ue??et),ue.tickSize=De.tickSize||Me,De.mode=="time"&&!ue.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(ue.tickGenerator||(ue.tickGenerator=function(Pt){var Je=[],Dt=n(Pt.min,Pt.tickSize),Ve=0,Xe=Number.NaN,st;do st=Xe,Xe=Dt+Ve*Pt.tickSize,Je.push(Xe),++Ve;while(Xe<Pt.max&&Xe!=st);return Je},ue.tickFormatter=function(Pt,Je){var Dt=Je.tickDecimals?Math.pow(10,Je.tickDecimals):1,Ve=""+Math.round(Pt*Dt)/Dt;if(Je.tickDecimals!=null){var Xe=Ve.indexOf("."),st=Xe==-1?0:Ve.length-Xe-1;if(st<Je.tickDecimals)return(st?Ve:Ve+".")+(""+Dt).substr(1,Je.tickDecimals-st)}return Ve}),Y.isFunction(De.tickFormatter)&&(ue.tickFormatter=function(Pt,Je){return""+De.tickFormatter(Pt,Je)}),De.alignTicksWithAxis!=null){var He=(ue.direction=="x"?g:y)[De.alignTicksWithAxis-1];if(He&&He.used&&He!=ue){var Ze=ue.tickGenerator(ue);if(Ze.length>0&&(De.min==null&&(ue.min=Math.min(ue.min,Ze[0])),De.max==null&&Ze.length>1&&(ue.max=Math.max(ue.max,Ze[Ze.length-1]))),ue.tickGenerator=function(Pt){var Je=[],Dt,Ve;for(Ve=0;Ve<He.ticks.length;++Ve)Dt=(He.ticks[Ve].v-He.min)/(He.max-He.min),Dt=Pt.min+Dt*(Pt.max-Pt.min),Je.push(Dt);return Je},!ue.mode&&De.tickDecimals==null){var lt=Math.max(0,-Math.floor(Math.log(ue.delta)/Math.LN10)+1),bt=ue.tickGenerator(ue);bt.length>1&&/\..*0$/.test((bt[1]-bt[0]).toFixed(lt))||(ue.tickDecimals=lt)}}}}function j(ue){var De=ue.options.ticks,Ne=[];De==null||typeof De=="number"&&De>0?Ne=ue.tickGenerator(ue):De&&(Y.isFunction(De)?Ne=De(ue):Ne=De);var tt,et;for(ue.ticks=[],tt=0;tt<Ne.length;++tt){var Ue=null,Fe=Ne[tt];typeof Fe=="object"?(et=+Fe[0],Fe.length>1&&(Ue=Fe[1])):et=+Fe,Ue==null&&(Ue=ue.tickFormatter(et,ue)),isNaN(et)||ue.ticks.push({v:et,label:Ue})}}function de(ue,De){var Ne=!1;return ue.options.autoscaleMargin&&De.length>0&&(ue.options.min==null&&(ue.min=Math.min(ue.min,De[0].v),Ne=!0),ue.options.max==null&&De.length>1&&(ue.max=Math.max(ue.max,De[De.length-1].v),Ne=!0)),Ne}function ce(){c.clear(),D(C.drawBackground,[i]);var ue=r.grid;ue.show&&ue.backgroundColor&&le(),ue.show&&!ue.aboveData&&q();for(var De=0;De<d.length;++De)D(C.drawSeries,[i,d[De]]),ne(d[De]);D(C.draw,[i]),ue.show&&ue.aboveData&&q(),c.render(),We()}function ee(ue,De){for(var Ne,tt,et,Ue,Fe=T(),Ee=0;Ee<Fe.length;++Ee)if(Ne=Fe[Ee],Ne.direction==De&&(Ue=De+Ne.n+"axis",!ue[Ue]&&Ne.n==1&&(Ue=De+"axis"),ue[Ue])){tt=ue[Ue].from,et=ue[Ue].to;break}if(ue[Ue]||(Ne=De=="x"?g[0]:y[0],tt=ue[De+"1"],et=ue[De+"2"]),tt!=null&&et!=null&&tt>et){var Me=tt;tt=et,et=Me}return{from:tt,to:et,axis:Ne}}function le(){i.save(),i.translate(E.left,E.top),i.fillStyle=Mt(r.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),i.fillRect(0,0,h,v),i.restore()}function q(){var ue,De,Ne,tt;i.save(),i.translate(E.left,E.top);var et=r.grid.markings;if(et)for(Y.isFunction(et)&&(De=m.getAxes(),De.xmin=De.xaxis.min,De.xmax=De.xaxis.max,De.ymin=De.yaxis.min,De.ymax=De.yaxis.max,et=et(De)),ue=0;ue<et.length;++ue){var Ue=et[ue],Fe=ee(Ue,"x"),Ee=ee(Ue,"y");if(Fe.from==null&&(Fe.from=Fe.axis.min),Fe.to==null&&(Fe.to=Fe.axis.max),Ee.from==null&&(Ee.from=Ee.axis.min),Ee.to==null&&(Ee.to=Ee.axis.max),!(Fe.to<Fe.axis.min||Fe.from>Fe.axis.max||Ee.to<Ee.axis.min||Ee.from>Ee.axis.max)){Fe.from=Math.max(Fe.from,Fe.axis.min),Fe.to=Math.min(Fe.to,Fe.axis.max),Ee.from=Math.max(Ee.from,Ee.axis.min),Ee.to=Math.min(Ee.to,Ee.axis.max);var Me=Fe.from===Fe.to,He=Ee.from===Ee.to;if(!(Me&&He))if(Fe.from=Math.floor(Fe.axis.p2c(Fe.from)),Fe.to=Math.floor(Fe.axis.p2c(Fe.to)),Ee.from=Math.floor(Ee.axis.p2c(Ee.from)),Ee.to=Math.floor(Ee.axis.p2c(Ee.to)),Me||He){var Ze=Ue.lineWidth||r.grid.markingsLineWidth,lt=Ze%2?.5:0;i.beginPath(),i.strokeStyle=Ue.color||r.grid.markingsColor,i.lineWidth=Ze,Me?(i.moveTo(Fe.to+lt,Ee.from),i.lineTo(Fe.to+lt,Ee.to)):(i.moveTo(Fe.from,Ee.to+lt),i.lineTo(Fe.to,Ee.to+lt)),i.stroke()}else i.fillStyle=Ue.color||r.grid.markingsColor,i.fillRect(Fe.from,Ee.to,Fe.to-Fe.from,Ee.from-Ee.to)}}De=T(),Ne=r.grid.borderWidth;for(var bt=0;bt<De.length;++bt){var Pt=De[bt],Je=Pt.box,Dt=Pt.tickLength,Ve,Xe,st,ut;if(!(!Pt.show||Pt.ticks.length==0)){for(i.lineWidth=1,Pt.direction=="x"?(Ve=0,Dt=="full"?Xe=Pt.position=="top"?0:v:Xe=Je.top-E.top+(Pt.position=="top"?Je.height:0)):(Xe=0,Dt=="full"?Ve=Pt.position=="left"?0:h:Ve=Je.left-E.left+(Pt.position=="left"?Je.width:0)),Pt.innermost||(i.strokeStyle=Pt.options.color,i.beginPath(),st=ut=0,Pt.direction=="x"?st=h+1:ut=v+1,i.lineWidth==1&&(Pt.direction=="x"?Xe=Math.floor(Xe)+.5:Ve=Math.floor(Ve)+.5),i.moveTo(Ve,Xe),i.lineTo(Ve+st,Xe+ut),i.stroke()),i.strokeStyle=Pt.options.tickColor,i.beginPath(),ue=0;ue<Pt.ticks.length;++ue){var xt=Pt.ticks[ue].v;st=ut=0,!(isNaN(xt)||xt<Pt.min||xt>Pt.max||Dt=="full"&&(typeof Ne=="object"&&Ne[Pt.position]>0||Ne>0)&&(xt==Pt.min||xt==Pt.max))&&(Pt.direction=="x"?(Ve=Pt.p2c(xt),ut=Dt=="full"?-v:Dt,Pt.position=="top"&&(ut=-ut)):(Xe=Pt.p2c(xt),st=Dt=="full"?-h:Dt,Pt.position=="left"&&(st=-st)),i.lineWidth==1&&(Pt.direction=="x"?Ve=Math.floor(Ve)+.5:Xe=Math.floor(Xe)+.5),i.moveTo(Ve,Xe),i.lineTo(Ve+st,Xe+ut))}i.stroke()}}Ne&&(tt=r.grid.borderColor,typeof Ne=="object"||typeof tt=="object"?(typeof Ne!="object"&&(Ne={top:Ne,right:Ne,bottom:Ne,left:Ne}),typeof tt!="object"&&(tt={top:tt,right:tt,bottom:tt,left:tt}),Ne.top>0&&(i.strokeStyle=tt.top,i.lineWidth=Ne.top,i.beginPath(),i.moveTo(0-Ne.left,0-Ne.top/2),i.lineTo(h,0-Ne.top/2),i.stroke()),Ne.right>0&&(i.strokeStyle=tt.right,i.lineWidth=Ne.right,i.beginPath(),i.moveTo(h+Ne.right/2,0-Ne.top),i.lineTo(h+Ne.right/2,v),i.stroke()),Ne.bottom>0&&(i.strokeStyle=tt.bottom,i.lineWidth=Ne.bottom,i.beginPath(),i.moveTo(h+Ne.right,v+Ne.bottom/2),i.lineTo(0,v+Ne.bottom/2),i.stroke()),Ne.left>0&&(i.strokeStyle=tt.left,i.lineWidth=Ne.left,i.beginPath(),i.moveTo(0-Ne.left/2,v+Ne.bottom),i.lineTo(0-Ne.left/2,0),i.stroke())):(i.lineWidth=Ne,i.strokeStyle=r.grid.borderColor,i.strokeRect(-Ne/2,-Ne/2,h+Ne,v+Ne))),i.restore()}function fe(){Y.each(T(),function(ue,De){var Ne=De.box,tt=De.direction+"Axis "+De.direction+De.n+"Axis",et="flot-"+De.direction+"-axis flot-"+De.direction+De.n+"-axis "+tt,Ue=De.options.font||"flot-tick-label tickLabel",Fe,Ee,Me,He,Ze;if(c.removeText(et),!(!De.show||De.ticks.length==0))for(var lt=0;lt<De.ticks.length;++lt)Fe=De.ticks[lt],!(!Fe.label||Fe.v<De.min||Fe.v>De.max)&&(De.direction=="x"?(He="center",Ee=E.left+De.p2c(Fe.v),De.position=="bottom"?Me=Ne.top+Ne.padding+Ne.eventSectionPadding:(Me=Ne.top+Ne.height-Ne.padding,Ze="bottom")):(Ze="middle",Me=E.top+De.p2c(Fe.v),De.position=="left"?(Ee=Ne.left+Ne.width-Ne.padding,He="right"):Ee=Ne.left+Ne.padding),c.addText(et,Ee,Me,Fe.label,Ue,null,null,He,Ze))})}function Z(ue){for(var De=[],Ne=null,tt=null,et=ue.datapoints,Ue=[],Fe=0;Fe<et.pointsize-2;Fe++)Ue.push(0);for(var Ee=0;Ee<et.points.length;Ee+=et.pointsize){var Me=et.points[Ee],He=et.points[Ee+1];Ee===et.points.length-et.pointsize?tt=null:tt=et.points[Ee+et.pointsize],Me!==null&&He!==null&&Ne===null&&tt===null&&(De.push(Me),De.push(He),De.push.apply(De,Ue)),Ne=Me}var Ze=et.points;et.points=De,ue.points.radius=ue.lines.lineWidth/2,ve(ue),et.points=Ze}function ne(ue){ue.lines.show&&(re(ue),!ue.points.show&&!ue.bars.show&&Z(ue)),ue.bars.show&&Ie(ue),ue.points.show&&ve(ue)}function re(ue){function De(Ee,Me,He,Ze,lt){var bt=Ee.points,Pt=Ee.pointsize,Je=null,Dt=null;i.beginPath();for(var Ve=Pt;Ve<bt.length;Ve+=Pt){var Xe=bt[Ve-Pt],st=bt[Ve-Pt+1],ut=bt[Ve],xt=bt[Ve+1];if(!(Xe==null||ut==null)){if(st<=xt&&st<lt.min){if(xt<lt.min)continue;Xe=(lt.min-st)/(xt-st)*(ut-Xe)+Xe,st=lt.min}else if(xt<=st&&xt<lt.min){if(st<lt.min)continue;ut=(lt.min-st)/(xt-st)*(ut-Xe)+Xe,xt=lt.min}if(st>=xt&&st>lt.max){if(xt>lt.max)continue;Xe=(lt.max-st)/(xt-st)*(ut-Xe)+Xe,st=lt.max}else if(xt>=st&&xt>lt.max){if(st>lt.max)continue;ut=(lt.max-st)/(xt-st)*(ut-Xe)+Xe,xt=lt.max}if(Xe<=ut&&Xe<Ze.min){if(ut<Ze.min)continue;st=(Ze.min-Xe)/(ut-Xe)*(xt-st)+st,Xe=Ze.min}else if(ut<=Xe&&ut<Ze.min){if(Xe<Ze.min)continue;xt=(Ze.min-Xe)/(ut-Xe)*(xt-st)+st,ut=Ze.min}if(Xe>=ut&&Xe>Ze.max){if(ut>Ze.max)continue;st=(Ze.max-Xe)/(ut-Xe)*(xt-st)+st,Xe=Ze.max}else if(ut>=Xe&&ut>Ze.max){if(Xe>Ze.max)continue;xt=(Ze.max-Xe)/(ut-Xe)*(xt-st)+st,ut=Ze.max}(Xe!=Je||st!=Dt)&&i.moveTo(Ze.p2c(Xe)+Me,lt.p2c(st)+He),Je=ut,Dt=xt,i.lineTo(Ze.p2c(ut)+Me,lt.p2c(xt)+He)}}i.stroke()}function Ne(Ee,Me,He){for(var Ze=Ee.points,lt=Ee.pointsize,bt=Math.min(Math.max(0,He.min),He.max),Pt=0,Je,Dt=!1,Ve=1,Xe=0,st=0;!(lt>0&&Pt>Ze.length+lt);){Pt+=lt;var ut=Ze[Pt-lt],xt=Ze[Pt-lt+Ve],Kt=Ze[Pt],Jt=Ze[Pt+Ve];if(Dt){if(lt>0&&ut!=null&&Kt==null){st=Pt,lt=-lt,Ve=2;continue}if(lt<0&&Pt==Xe+lt){i.fill(),Dt=!1,lt=-lt,Ve=1,Pt=Xe=st+lt;continue}}if(!(ut==null||Kt==null)){if(ut<=Kt&&ut<Me.min){if(Kt<Me.min)continue;xt=(Me.min-ut)/(Kt-ut)*(Jt-xt)+xt,ut=Me.min}else if(Kt<=ut&&Kt<Me.min){if(ut<Me.min)continue;Jt=(Me.min-ut)/(Kt-ut)*(Jt-xt)+xt,Kt=Me.min}if(ut>=Kt&&ut>Me.max){if(Kt>Me.max)continue;xt=(Me.max-ut)/(Kt-ut)*(Jt-xt)+xt,ut=Me.max}else if(Kt>=ut&&Kt>Me.max){if(ut>Me.max)continue;Jt=(Me.max-ut)/(Kt-ut)*(Jt-xt)+xt,Kt=Me.max}if(Dt||(i.beginPath(),i.moveTo(Me.p2c(ut),He.p2c(bt)),Dt=!0),xt>=He.max&&Jt>=He.max){i.lineTo(Me.p2c(ut),He.p2c(He.max)),i.lineTo(Me.p2c(Kt),He.p2c(He.max));continue}else if(xt<=He.min&&Jt<=He.min){i.lineTo(Me.p2c(ut),He.p2c(He.min)),i.lineTo(Me.p2c(Kt),He.p2c(He.min));continue}var On=ut,Nn=Kt;xt<=Jt&&xt<He.min&&Jt>=He.min?(ut=(He.min-xt)/(Jt-xt)*(Kt-ut)+ut,xt=He.min):Jt<=xt&&Jt<He.min&&xt>=He.min&&(Kt=(He.min-xt)/(Jt-xt)*(Kt-ut)+ut,Jt=He.min),xt>=Jt&&xt>He.max&&Jt<=He.max?(ut=(He.max-xt)/(Jt-xt)*(Kt-ut)+ut,xt=He.max):Jt>=xt&&Jt>He.max&&xt<=He.max&&(Kt=(He.max-xt)/(Jt-xt)*(Kt-ut)+ut,Jt=He.max),ut!=On&&i.lineTo(Me.p2c(On),He.p2c(xt)),i.lineTo(Me.p2c(ut),He.p2c(xt)),i.lineTo(Me.p2c(Kt),He.p2c(Jt)),Kt!=Nn&&(i.lineTo(Me.p2c(Kt),He.p2c(Jt)),i.lineTo(Me.p2c(Nn),He.p2c(Jt)))}}}i.save(),i.translate(E.left,E.top),i.lineJoin="round";var tt=ue.lines.lineWidth,et=ue.shadowSize;if(tt>0&&et>0){i.lineWidth=et,i.strokeStyle="rgba(0,0,0,0.1)";var Ue=Math.PI/18;De(ue.datapoints,Math.sin(Ue)*(tt/2+et/2),Math.cos(Ue)*(tt/2+et/2),ue.xaxis,ue.yaxis),i.lineWidth=et/2,De(ue.datapoints,Math.sin(Ue)*(tt/2+et/4),Math.cos(Ue)*(tt/2+et/4),ue.xaxis,ue.yaxis)}i.lineWidth=tt,i.strokeStyle=ue.color;var Fe=Ge(ue.lines,ue.color,0,v);Fe&&(i.fillStyle=Fe,Ne(ue.datapoints,ue.xaxis,ue.yaxis)),tt>0&&De(ue.datapoints,0,0,ue.xaxis,ue.yaxis),i.restore()}function ve(ue){function De(Ee,Me,He,Ze,lt,bt,Pt,Je){for(var Dt=Ee.points,Ve=Ee.pointsize,Xe=0;Xe<Dt.length;Xe+=Ve){var st=Dt[Xe],ut=Dt[Xe+1];st==null||st<bt.min||st>bt.max||ut<Pt.min||ut>Pt.max||(i.beginPath(),st=bt.p2c(st),ut=Pt.p2c(ut)+Ze,Je=="circle"?i.arc(st,ut,Me,0,lt?Math.PI:Math.PI*2,!1):Je(i,st,ut,Me,lt),i.closePath(),He&&(i.fillStyle=He,i.fill()),i.stroke())}}i.save(),i.translate(E.left,E.top);var Ne=ue.points.lineWidth,tt=ue.shadowSize,et=ue.points.radius,Ue=ue.points.symbol;if(Ne==0&&(Ne=1e-4),Ne>0&&tt>0){var Fe=tt/2;i.lineWidth=Fe,i.strokeStyle="rgba(0,0,0,0.1)",De(ue.datapoints,et,null,Fe+Fe/2,!0,ue.xaxis,ue.yaxis,Ue),i.strokeStyle="rgba(0,0,0,0.2)",De(ue.datapoints,et,null,Fe/2,!0,ue.xaxis,ue.yaxis,Ue)}i.lineWidth=Ne,i.strokeStyle=ue.color,De(ue.datapoints,et,Ge(ue.points,ue.color),0,!1,ue.xaxis,ue.yaxis,Ue),i.restore()}function me(ue,De,Ne,tt,et,Ue,Fe,Ee,Me,He,Ze){var lt,bt,Pt,Je,Dt,Ve,Xe,st,ut;He?(st=Ve=Xe=!0,Dt=!1,lt=Ne,bt=ue,Je=De+tt,Pt=De+et,bt<lt&&(ut=bt,bt=lt,lt=ut,Dt=!0,Ve=!1)):(Dt=Ve=Xe=!0,st=!1,lt=ue+tt,bt=ue+et,Pt=Ne,Je=De,Je<Pt&&(ut=Je,Je=Pt,Pt=ut,st=!0,Xe=!1)),!(bt<Fe.min||lt>Fe.max||Je<Ee.min||Pt>Ee.max)&&(lt<Fe.min&&(lt=Fe.min,Dt=!1),bt>Fe.max&&(bt=Fe.max,Ve=!1),Pt<Ee.min&&(Pt=Ee.min,st=!1),Je>Ee.max&&(Je=Ee.max,Xe=!1),lt=Fe.p2c(lt),Pt=Ee.p2c(Pt),bt=Fe.p2c(bt),Je=Ee.p2c(Je),Ue&&(Me.fillStyle=Ue(Pt,Je),Me.fillRect(lt,Je,bt-lt,Pt-Je)),Ze>0&&(Dt||Ve||Xe||st)&&(Me.beginPath(),Me.moveTo(lt,Pt),Dt?Me.lineTo(lt,Je):Me.moveTo(lt,Je),Xe?Me.lineTo(bt,Je):Me.moveTo(bt,Je),Ve?Me.lineTo(bt,Pt):Me.moveTo(bt,Pt),st?Me.lineTo(lt,Pt):Me.moveTo(lt,Pt),Me.stroke()))}function Ie(ue){function De(et,Ue,Fe,Ee,Me,He){for(var Ze=et.points,lt=et.pointsize,bt=0;bt<Ze.length;bt+=lt)Ze[bt]!=null&&me(Ze[bt],Ze[bt+1],Ze[bt+2],Ue,Fe,Ee,Me,He,i,ue.bars.horizontal,ue.bars.lineWidth)}i.save(),i.translate(E.left,E.top),i.lineWidth=ue.bars.lineWidth,i.strokeStyle=ue.color;var Ne;switch(ue.bars.align){case"left":Ne=0;break;case"right":Ne=-ue.bars.barWidth;break;default:Ne=-ue.bars.barWidth/2}var tt=ue.bars.fill?function(et,Ue){return Ge(ue.bars,ue.color,et,Ue)}:null;De(ue.datapoints,Ne,Ne+ue.bars.barWidth,tt,ue.xaxis,ue.yaxis),i.restore()}function Ge(ue,De,Ne,tt){var et=ue.fill;if(!et)return null;if(ue.fillColor)return Mt(ue.fillColor,Ne,tt,De);var Ue=Y.color.parse(De);return Ue.a=typeof et=="number"?et:.4,Ue.normalize(),Ue.toString()}function gt(){if(r.legend.container!=null?Y.find(r.legend.container).html(""):o.find(".legend").remove(),!!r.legend.show){for(var ue=[],De=[],Ne=!1,tt=r.legend.labelFormatter,et,Ue,Fe=0;Fe<d.length;++Fe)et=d[Fe],et.label&&(Ue=tt?tt(et.label,et):et.label,Ue&&De.push({label:Ue,color:et.color}));if(r.legend.sorted)if(Y.isFunction(r.legend.sorted))De.sort(r.legend.sorted);else if(r.legend.sorted=="reverse")De.reverse();else{var Ee=r.legend.sorted!="descending";De.sort(function(Ve,Xe){return Ve.label==Xe.label?0:Ve.label<Xe.label!=Ee?1:-1})}for(var Fe=0;Fe<De.length;++Fe){var Me=De[Fe];Fe%r.legend.noColumns==0&&(Ne&&ue.push("</tr>"),ue.push("<tr>"),Ne=!0),ue.push('<td class="legendColorBox"><div style="border:1px solid '+r.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Me.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Me.label+"</td>")}if(Ne&&ue.push("</tr>"),ue.length!=0){var He='<table style="font-size:smaller;color:'+r.grid.color+'">'+ue.join("")+"</table>";if(r.legend.container!=null)Y(r.legend.container).html(He);else{var Ze="",lt=r.legend.position,bt=r.legend.margin;bt[0]==null&&(bt=[bt,bt]),lt.charAt(0)=="n"?Ze+="top:"+(bt[1]+E.top)+"px;":lt.charAt(0)=="s"&&(Ze+="bottom:"+(bt[1]+E.bottom)+"px;"),lt.charAt(1)=="e"?Ze+="right:"+(bt[0]+E.right)+"px;":lt.charAt(1)=="w"&&(Ze+="left:"+(bt[0]+E.left)+"px;");var Pt=Y('<div class="legend">'+He.replace('style="','style="position:absolute;'+Ze+";")+"</div>").appendTo(o);if(r.legend.backgroundOpacity!=0){var Je=r.legend.backgroundColor;Je==null&&(Je=r.grid.backgroundColor,Je&&typeof Je=="string"?Je=Y.color.parse(Je):Je=Y.color.extract(Pt,"background-color"),Je.a=1,Je=Je.toString());var Dt=Pt.children();Y('<div style="position:absolute;width:'+Dt.width()+"px;height:"+Dt.height()+"px;"+Ze+"background-color:"+Je+';"> </div>').prependTo(Pt).css("opacity",r.legend.backgroundOpacity)}}}}}var Te=[],Le=null;function Ye(ue,De,Ne){var tt=r.grid.mouseActiveRadius,et=tt*tt+1,Ue=null,Fe=!1,Ee,Me,He;for(Ee=d.length-1;Ee>=0;--Ee)if(Ne(d[Ee])){var Ze=d[Ee],lt=Ze.xaxis,bt=Ze.yaxis,Pt=Ze.datapoints.points,Je=lt.c2p(ue),Dt=bt.c2p(De),Ve=tt/lt.scale,Xe=tt/bt.scale;if(He=Ze.datapoints.pointsize,lt.options.inverseTransform&&(Ve=Number.MAX_VALUE),bt.options.inverseTransform&&(Xe=Number.MAX_VALUE),Ze.lines.show||Ze.points.show)for(Me=0;Me<Pt.length;Me+=He){var st=Pt[Me],ut=Pt[Me+1];if(st!=null&&!(st-Je>Ve||st-Je<-Ve||ut-Dt>Xe||ut-Dt<-Xe)){var xt=Math.abs(lt.p2c(st)-ue),Kt=Math.abs(bt.p2c(ut)-De),Jt=xt*xt+Kt*Kt;Jt<et&&(et=Jt,Ue=[Ee,Me/He])}}if(Ze.bars.show&&!Ue){var On,Nn;switch(Ze.bars.align){case"left":On=0;break;case"right":On=-Ze.bars.barWidth;break;default:On=-Ze.bars.barWidth/2}for(Nn=On+Ze.bars.barWidth,Me=0;Me<Pt.length;Me+=He){var st=Pt[Me],ut=Pt[Me+1],jn=Pt[Me+2];st!=null&&(d[Ee].bars.horizontal?Je<=Math.max(jn,st)&&Je>=Math.min(jn,st)&&Dt>=ut+On&&Dt<=ut+Nn:Je>=st+On&&Je<=st+Nn&&Dt>=Math.min(jn,ut)&&Dt<=Math.max(jn,ut))&&(Ue=[Ee,Me/He])}}}return Ue?(Ee=Ue[0],Me=Ue[1],He=d[Ee].datapoints.pointsize,{datapoint:d[Ee].datapoints.points.slice(Me*He,(Me+1)*He),dataIndex:Me,series:d[Ee],seriesIndex:Ee}):null}function it(ue){r.grid.hoverable&&be("plothover",ue,function(De){return De.hoverable!=!1})}function ht(ue){r.grid.hoverable&&be("plothover",ue,function(De){return!1})}function Re(ue){m.isSelecting||be("plotclick",ue,function(De){return De.clickable!=!1})}function ye(ue){if(ue.cancelable){if(!u.is(ue.target)&&u.has(ue.target).length===0){be("plotleave",ue,function(De){});return}it(Ce(ue)),ue.preventDefault()}}function Ce(ue){if(!ue||!ue.originalEvent||ue.pageX&&ue.pageY)return ue;var De=ue.originalEvent;if(De.changedTouches.length===0)return ue;var Ne=De.changedTouches[0];return ue.pageX=Ne.pageX,ue.pageY=Ne.pageY,ue}function be(ue,De,Ne){var tt=u.offset(),et=De.pageX-tt.left-E.left,Ue=De.pageY-tt.top-E.top,Fe=S({left:et,top:Ue});Fe.pageX=De.pageX,Fe.pageY=De.pageY,Fe.ctrlKey=De.ctrlKey,Fe.metaKey=De.metaKey;var Ee=Ye(et,Ue,Ne);if(Ee&&(Ee.pageX=parseInt(Ee.series.xaxis.p2c(Ee.datapoint[0])+tt.left+E.left,10),Ee.pageY=parseInt(Ee.series.yaxis.p2c(Ee.datapoint[1])+tt.top+E.top,10)),r.grid.autoHighlight){for(var Me=0;Me<Te.length;++Me){var He=Te[Me];He.auto==ue&&!(Ee&&He.series==Ee.series&&He.point[0]==Ee.datapoint[0]&&He.point[1]==Ee.datapoint[1])&&vt(He.series,He.point)}Ee&&mt(Ee.series,Ee.datapoint,ue)}o.trigger(ue,[Fe,Ee])}function We(){var ue=r.interaction.redrawOverlayInterval;if(ue==-1){Qe();return}Le||(Le=setTimeout(Qe,ue))}function Qe(){Le=null,p.save(),a.clear(),p.translate(E.left,E.top);var ue,De;for(ue=0;ue<Te.length;++ue)De=Te[ue],De.series.bars.show?Et(De.series,De.point):Ot(De.series,De.point);p.restore(),D(C.drawOverlay,[p])}function mt(ue,De,Ne){if(typeof ue=="number"&&(ue=d[ue]),typeof De=="number"){var tt=ue.datapoints.pointsize;De=ue.datapoints.points.slice(tt*De,tt*(De+1))}var et=rt(ue,De);et==-1?(Te.push({series:ue,point:De,auto:Ne}),We()):Ne||(Te[et].auto=!1)}function vt(ue,De){if(ue==null&&De==null){Te=[],We();return}if(typeof ue=="number"&&(ue=d[ue]),typeof De=="number"){var Ne=ue.datapoints.pointsize;De=ue.datapoints.points.slice(Ne*De,Ne*(De+1))}var tt=rt(ue,De);tt!=-1&&(Te.splice(tt,1),We())}function rt(ue,De){for(var Ne=0;Ne<Te.length;++Ne){var tt=Te[Ne];if(tt.series==ue&&tt.point[0]==De[0]&&tt.point[1]==De[1])return Ne}return-1}function Ot(ue,De){var Ne=De[0],tt=De[1],et=ue.xaxis,Ue=ue.yaxis,Fe=typeof ue.highlightColor=="string"?ue.highlightColor:Y.color.parse(ue.color).scale("a",.5).toString();if(!(Ne<et.min||Ne>et.max||tt<Ue.min||tt>Ue.max)){var Ee=ue.points.radius+ue.points.lineWidth/2;p.lineWidth=Ee,p.strokeStyle=Fe;var Me=1.5*Ee;Ne=et.p2c(Ne),tt=Ue.p2c(tt),p.beginPath(),ue.points.symbol=="circle"?p.arc(Ne,tt,Me,0,2*Math.PI,!1):ue.points.symbol(p,Ne,tt,Me,!1),p.closePath(),p.stroke()}}function Et(ue,De){var Ne=typeof ue.highlightColor=="string"?ue.highlightColor:Y.color.parse(ue.color).scale("a",.5).toString(),tt=Ne,et;switch(ue.bars.align){case"left":et=0;break;case"right":et=-ue.bars.barWidth;break;default:et=-ue.bars.barWidth/2}p.lineWidth=ue.bars.lineWidth,p.strokeStyle=Ne,me(De[0],De[1],De[2]||0,et,et+ue.bars.barWidth,function(){return tt},ue.xaxis,ue.yaxis,p,ue.bars.horizontal,ue.bars.lineWidth)}function Mt(ue,De,Ne,tt){if(typeof ue=="string")return ue;for(var et=i.createLinearGradient(0,Ne,0,De),Ue=0,Fe=ue.colors.length;Ue<Fe;++Ue){var Ee=ue.colors[Ue];if(typeof Ee!="string"){var Me=Y.color.parse(tt);Ee.brightness!=null&&(Me=Me.scale("rgb",Ee.brightness)),Ee.opacity!=null&&(Me.a*=Ee.opacity),Ee=Me.toString()}et.addColorStop(Ue/(Fe-1),Ee)}return et}}Y.plot=function(o,s,l){var f=new t(Y(o),s,l,Y.plot.plugins);return f},Y.plot.version="0.8.3",Y.plot.plugins=[],Y.fn.plot=function(o,s){return this.each(function(){Y.plot(this,o,s)})};function n(o,s){return s*Math.floor(o/s)}}(jQuery)},4027:()=>{(function(Y){function O(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},o=null;function s(E){t.active&&(u(E),e.getPlaceholder().trigger("plotselecting",[d()]))}function l(E){E.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),a(t.first,E),t.active=!0,o=function(h){f(h)},Y(document).one("mouseup",o))}function f(E){return o=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,u(E),y()?r(E):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function d(){if(!y()||!t.show)return null;var E={},h=t.first,v=t.second,C=e.getAxes(),m=!0;return Y.each(C,function(D,P){P.used&&(anyUsed=!1)}),Y.each(C,function(D,P){if(P.used||m){var b=P.c2p(h[P.direction]),M=P.c2p(v[P.direction]);E[D]={from:Math.min(b,M),to:Math.max(b,M)}}}),E}function r(E){var h=d();h.ctrlKey=E.ctrlKey,h.metaKey=E.metaKey,e.getPlaceholder().trigger("plotselected",[h]),h.xaxis&&h.yaxis&&e.getPlaceholder().trigger("selected",[{x1:h.xaxis.from,y1:h.yaxis.from,x2:h.xaxis.to,y2:h.yaxis.to}])}function c(E,h,v){return h<E?E:h>v?v:h}function a(E,h){var v=e.getOptions(),C=e.getPlaceholder().offset(),m=e.getPlotOffset();E.x=c(0,h.pageX-C.left-m.left,e.width()),E.y=c(0,h.pageY-C.top-m.top,e.height()),v.selection.mode=="y"&&(E.x=E==t.first?0:e.width()),v.selection.mode=="x"&&(E.y=E==t.first?0:e.height())}function u(E){E.pageX!=null&&(a(t.second,E),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):i(!0))}function i(E){t.show&&(t.show=!1,e.triggerRedrawOverlay(),E||e.getPlaceholder().trigger("plotunselected",[]))}function p(E,h){var v,C,m,D,P=e.getAxes();for(var b in P)if(v=P[b],v.direction==h&&(D=h+v.n+"axis",!E[D]&&v.n==1&&(D=h+"axis"),E[D])){C=E[D].from,m=E[D].to;break}if(E[D]||(v=h=="x"?e.getXAxes()[0]:e.getYAxes()[0],C=E[h+"1"],m=E[h+"2"]),C!=null&&m!=null&&C>m){var M=C;C=m,m=M}return{from:C,to:m,axis:v}}function g(E,h){var v,C,m=e.getOptions();m.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(C=p(E,"x"),t.first.x=C.axis.p2c(C.from),t.second.x=C.axis.p2c(C.to)),m.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(C=p(E,"y"),t.first.y=C.axis.p2c(C.from),t.second.y=C.axis.p2c(C.to)),t.show=!0,e.triggerRedrawOverlay(),!h&&y()&&r()}function y(){var E=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=E&&Math.abs(t.second.y-t.first.y)>=E}e.clearSelection=i,e.setSelection=g,e.getSelection=d,e.hooks.bindEvents.push(function(E,h){var v=E.getOptions();v.selection.mode!=null&&(h.mousemove(s),h.mousedown(l))}),e.hooks.drawOverlay.push(function(E,h){if(t.show&&y()){var v=E.getPlotOffset(),C=E.getOptions();h.save(),h.translate(v.left,v.top);var m=Y.color.parse(C.selection.color);h.strokeStyle=m.scale("a",.8).toString(),h.lineWidth=1,h.lineJoin=C.selection.shape,h.fillStyle=m.scale("a",.4).toString();var D=Math.min(t.first.x,t.second.x)+.5,P=Math.min(t.first.y,t.second.y)+.5,b=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;h.fillRect(D,P,b,M),h.strokeRect(D,P,b,M),h.restore()}}),e.hooks.shutdown.push(function(E,h){h.unbind("mousemove",s),h.unbind("mousedown",l),o&&(Y(document).unbind("mouseup",o),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Y.plot.plugins.push({init:O,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(Y){var O={series:{stack:null}};function e(t){function n(s,l){for(var f=null,d=0;d<l.length&&s!=l[d];++d)l[d].stack==s.stack&&(f=l[d]);return f}function o(s,l,f){if(!(l.stack==null||l.stack===!1)){var d=n(l,s.getData());if(d){for(var r=f.pointsize,c=f.points,a=d.datapoints.pointsize,u=d.datapoints.points,i=[],p,g,y,E,h,v,C=l.lines.show,m=l.bars.horizontal,D=r>2&&(m?f.format[2].x:f.format[2].y),P=C&&l.lines.steps,b=m?1:0,M=m?0:1,x=0,A=0,T,S;!(x>=c.length&&A>=u.length);){if(T=i.length,x<c.length&&c[x]==null){for(S=0;S<r;++S)i.push(c[x+S]);x+=r}else if(x>=c.length){for(S=0;S<r;++S)i.push(u[A+S]);D&&(i[T+2]=u[A+M]),A+=a}else if(A>=u.length){for(S=0;S<r;++S)i.push(c[x+S]);x+=r}else if(A<u.length&&u[A]==null)A+=a;else{if(p=c[x+b],g=c[x+M],E=u[A+b],h=u[A+M],v=0,p==E){for(S=0;S<r;++S)i.push(c[x+S]);i[T+M]+=h,v=h,x+=r,A+=a}else if(p>E){if(x==0){for(S=0;S<r;++S)i.push(u[A+S]);v=h}if(x>0&&c[x-r]!=null){for(y=0,i.push(E),i.push(y+h),S=2;S<r;++S)i.push(c[x+S]);v=h}A+=a}else{for(S=0;S<r;++S)i.push(c[x+S]);A>0&&u[A-a]!=null&&(v=0),i[T+M]+=v,x+=r}fromgap=!1,T!=i.length&&D&&(i[T+2]=v)}if(P&&T!=i.length&&T>0&&i[T]!=null&&i[T]!=i[T-r]&&i[T+1]!=i[T-r+1]){for(S=0;S<r;++S)i[T+r+S]=i[T+S];i[T+1]=i[T-r+1]}}f.points=i}}}t.hooks.processDatapoints.push(o)}Y.plot.plugins.push({init:e,options:O,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(Y){var O={series:{stackpercent:null}};function e(t){var n={},o=!1,s={};function l(r,c,a,u){if(o||(o=!0,s=f(r.getData())),c.stackpercent==!0){var i=a.length;c.percents=[];var p=0,g=1;c.bars&&c.bars.horizontal&&c.bars.horizontal===!0&&(p=1,g=0);for(var y=0;y<i;y++){var E=s[a[y][p]+""];E>0?c.percents.push(a[y][g]*100/E):c.percents.push(0)}}}function f(r){var c=r.length,a={};if(c>0){for(var u=0;u<c;u++)if(r[u].stackpercent){var i=0,p=1;r[u].bars&&r[u].bars.horizontal&&r[u].bars.horizontal===!0&&(i=1,p=0);for(var g=r[u].data.length,y=0;y<g;y++){var E=0;r[u].data[y][1]!=null&&(E=r[u].data[y][p]),a[r[u].data[y][i]+""]?a[r[u].data[y][i]+""]+=E:a[r[u].data[y][i]+""]=E}}}return a}function d(r,c,a){if(c.stackpercent){o||(s=f(r.getData()));var u=[],i=0,p=1;c.bars&&c.bars.horizontal&&c.bars.horizontal===!0&&(i=1,p=0);for(var g=0;g<a.points.length;g+=3)n[a.points[g+i]]||(n[a.points[g+i]]=0),u[g+i]=a.points[g+i],u[g+p]=a.points[g+p]+n[a.points[g+i]],u[g+2]=n[a.points[g+i]],n[a.points[g+i]]+=a.points[g+p],s[u[g+i]+""]>0?(u[g+p]=u[g+p]*100/s[u[g+i]+""],u[g+2]=u[g+2]*100/s[u[g+i]+""]):(u[g+p]=0,u[g+2]=0);a.points=u}}t.hooks.processRawData.push(l),t.hooks.processDatapoints.push(d)}Y.plot.plugins.push({init:e,options:O,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(Y){var O={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(c,a){return a*Math.floor(c/a)}function t(c,a,u,i){if(typeof c.strftime=="function")return c.strftime(a);var p=function(D,P){return D=""+D,P=""+(P??"0"),D.length==1?P+D:D},g=[],y=!1,E=c.getHours(),h=E<12;u==null&&(u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),i==null&&(i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var v;E>12?v=E-12:E==0?v=12:v=E;for(var C=0;C<a.length;++C){var m=a.charAt(C);if(y){switch(m){case"a":m=""+i[c.getDay()];break;case"b":m=""+u[c.getMonth()];break;case"d":m=p(c.getDate(),"");break;case"e":m=p(c.getDate()," ");break;case"h":case"H":m=p(E);break;case"I":m=p(v);break;case"l":m=p(v," ");break;case"m":m=p(c.getMonth()+1,"");break;case"M":m=p(c.getMinutes());break;case"q":m=""+(Math.floor(c.getMonth()/3)+1);break;case"S":m=p(c.getSeconds());break;case"y":m=p(c.getFullYear()%100);break;case"Y":m=""+c.getFullYear();break;case"p":m=h?"am":"pm";break;case"P":m=h?"AM":"PM";break;case"w":m=""+c.getDay();break}g.push(m),y=!1}else m=="%"?y=!0:g.push(m)}return g.join("")}function n(c){function a(g,y,E,h){g[y]=function(){return E[h].apply(E,arguments)}}var u={date:c};c.strftime!=null&&a(u,"strftime",c,"strftime"),a(u,"getTime",c,"getTime"),a(u,"setTime",c,"setTime");for(var i=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<i.length;p++)a(u,"get"+i[p],c,"getUTC"+i[p]),a(u,"set"+i[p],c,"setUTC"+i[p]);return u}function o(c,a){if(a.timezone=="browser")return new Date(c);if(!a.timezone||a.timezone=="utc")return n(new Date(c));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var u=new timezoneJS.Date;return u.setTimezone(a.timezone),u.setTime(c),u}else return n(new Date(c))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],f=l.concat([[3,"month"],[6,"month"],[1,"year"]]),d=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function r(c){c.hooks.processOptions.push(function(a,u){Y.each(a.getAxes(),function(i,p){var g=p.options;g.mode=="time"&&(p.tickGenerator=function(y){var E=[],h=o(y.min,g),v=0,C=g.tickSize&&g.tickSize[1]==="quarter"||g.minTickSize&&g.minTickSize[1]==="quarter"?d:f;g.minTickSize!=null&&(typeof g.tickSize=="number"?v=g.tickSize:v=g.minTickSize[0]*s[g.minTickSize[1]]);for(var m=0;m<C.length-1&&!(y.delta<(C[m][0]*s[C[m][1]]+C[m+1][0]*s[C[m+1][1]])/2&&C[m][0]*s[C[m][1]]>=v);++m);var D=C[m][0],P=C[m][1];if(P=="year"){if(g.minTickSize!=null&&g.minTickSize[1]=="year")D=Math.floor(g.minTickSize[0]);else{var b=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),M=y.delta/s.year/b;M<1.5?D=1:M<3?D=2:M<7.5?D=5:D=10,D*=b}D<1&&(D=1)}y.tickSize=g.tickSize||[D,P];var x=y.tickSize[0];P=y.tickSize[1];var A=x*s[P];P=="second"?h.setSeconds(e(h.getSeconds(),x)):P=="minute"?h.setMinutes(e(h.getMinutes(),x)):P=="hour"?h.setHours(e(h.getHours(),x)):P=="month"?h.setMonth(e(h.getMonth(),x)):P=="quarter"?h.setMonth(3*e(h.getMonth()/3,x)):P=="year"&&h.setFullYear(e(h.getFullYear(),x)),h.setMilliseconds(0),A>=s.minute&&h.setSeconds(0),A>=s.hour&&h.setMinutes(0),A>=s.day&&h.setHours(0),A>=s.day*4&&h.setDate(1),A>=s.month*2&&h.setMonth(e(h.getMonth(),3)),A>=s.quarter*2&&h.setMonth(e(h.getMonth(),6)),A>=s.year&&h.setMonth(0);var T=0,S=Number.NaN,U;do if(U=S,S=h.getTime(),E.push(S),P=="month"||P=="quarter")if(x<1){h.setDate(1);var R=h.getTime();h.setMonth(h.getMonth()+(P=="quarter"?3:1));var F=h.getTime();h.setTime(S+T*s.hour+(F-R)*x),T=h.getHours(),h.setHours(0)}else h.setMonth(h.getMonth()+x*(P=="quarter"?3:1));else P=="year"?h.setFullYear(h.getFullYear()+x):h.setTime(S+A);while(S<y.max&&S!=U);return E},p.tickFormatter=function(y,E){var h=o(y,E.options);if(g.timeformat!=null)return t(h,g.timeformat,g.monthNames,g.dayNames);var v=E.options.tickSize&&E.options.tickSize[1]=="quarter"||E.options.minTickSize&&E.options.minTickSize[1]=="quarter",C=E.tickSize[0]*s[E.tickSize[1]],m=E.max-E.min,D=g.twelveHourClock?" %p":"",P=g.twelveHourClock?"%I":"%H",b;C<s.minute?b=P+":%M:%S"+D:C<s.day?m<2*s.day?b=P+":%M"+D:b="%b %d "+P+":%M"+D:C<s.month?b="%b %d":v&&C<s.quarter||!v&&C<s.year?m<s.year?b="%b":b="%b %Y":v&&C<s.year?m<s.year?b="Q%q":b="Q%q %Y":b="%Y";var M=t(h,b,g.monthNames,g.dayNames);return M})})})}Y.plot.plugins.push({init:r,options:O,name:"time",version:"1.0"}),Y.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=3175.15289841be6ee25a67cf.js.map