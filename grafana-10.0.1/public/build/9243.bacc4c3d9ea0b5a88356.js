(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9243],{44674:(te,i,e)=>{"use strict";e.d(i,{M:()=>Ze});var r=e(66111),E=e(59679),m=e(26418),M=e(67090),I=e(12936),T=e(73143),P=e(8944),S=e(31403),C=e(61860),A=e(2594),O=e(94025),b=e(35029),D=e(39904);function F({isOpen:pe,onCancel:he,onDiscard:Le,onCopy:Pe}){const Ve=(0,r.useRef)(null);return(0,r.useEffect)(()=>{pe&&Ve.current?.focus()},[pe]),r.createElement(b.u,{title:r.createElement("div",{className:"modal-header-title"},r.createElement(D.J,{name:"exclamation-triangle",size:"lg"}),r.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:he,isOpen:pe},r.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),r.createElement("p",null,"Do you want to copy your code to the clipboard?"),r.createElement(b.u.ButtonRow,null,r.createElement(S.zx,{type:"button",variant:"secondary",onClick:he,fill:"outline"},"Cancel"),r.createElement(S.zx,{variant:"destructive",type:"button",onClick:Le,ref:Ve},"Discard code and switch"),r.createElement(S.zx,{variant:"primary",onClick:Pe},"Copy code and switch")))}var U=e(8581);const L=({db:pe,value:he,onChange:Le,disabled:Pe,className:Ve,applyDefault:Ge})=>{const xe=(0,E.Z)(async()=>(await pe.datasets()).map(O.Er),[]);return(0,r.useEffect)(()=>{Ge&&(he?xe.value&&xe.value.find(et=>et.value===he)===void 0&&xe.value.length>0&&Le(xe.value[0]):xe.value&&xe.value[0]&&Le(xe.value[0]))},[xe.value,he,Ge,Le]),r.createElement(U.Ph,{className:Ve,"aria-label":"Dataset selector",value:he,options:xe.value,onChange:Le,disabled:Pe,isLoading:xe.loading,menuShouldPortal:!0})};var $=e(13572);const j=({db:pe,query:he,value:Le,className:Pe,onChange:Ve,forceFetch:Ge})=>{const xe=(0,E.Z)(async()=>!he.dataset&&!Ge?[]:(await pe.tables(he.dataset)).map($.E),[he.dataset]);return r.createElement(U.Ph,{className:Pe,disabled:xe.loading,"aria-label":"Table selector",value:Le,options:xe.value,onChange:Ve,isLoading:xe.loading,menuShouldPortal:!0,placeholder:xe.loading?"Loading tables":"Select table"})},V=[{label:"Builder",value:m.EditorMode.Builder},{label:"Code",value:m.EditorMode.Code}];function w({db:pe,query:he,queryRowFilter:Le,onChange:Pe,onRunQuery:Ve,onQueryRowChange:Ge,isQueryRunnable:xe,isDatasetSelectorHidden:et}){const{editorMode:We}=he,[Be,ft]=(0,T.Z)(),[st,pt]=(0,r.useState)(!1),ut=pe.toRawSql,be=(0,r.useCallback)(_e=>{if(We===m.EditorMode.Code){pt(!0);return}Pe({...he,editorMode:_e})},[We,Pe,he]),Xe=_e=>{const dt={...he,format:_e.value!==void 0?_e.value:O.ws.Table};Pe(dt)},nt=_e=>{if(_e.value===he.dataset)return;const dt={...he,dataset:_e.value,table:void 0,sql:void 0,rawSql:""};Pe(dt)},ze=_e=>{if(_e.value===he.table)return;const dt={...he,table:_e.value,sql:void 0,rawSql:""};Pe(dt)};return r.createElement(r.Fragment,null,r.createElement(m.EditorHeader,null,r.createElement(m.InlineSelect,{label:"Format",value:he.format,placeholder:"Select format",menuShouldPortal:!0,onChange:Xe,options:O.x7}),We===m.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(P.x,{id:"sql-filter",label:"Filter",transparent:!0,showLabel:!0,value:Le.filter,onChange:_e=>_e.target instanceof HTMLInputElement&&Ge({...Le,filter:_e.target.checked})}),r.createElement(P.x,{id:"sql-group",label:"Group",transparent:!0,showLabel:!0,value:Le.group,onChange:_e=>_e.target instanceof HTMLInputElement&&Ge({...Le,group:_e.target.checked})}),r.createElement(P.x,{id:"sql-order",label:"Order",transparent:!0,showLabel:!0,value:Le.order,onChange:_e=>_e.target instanceof HTMLInputElement&&Ge({...Le,order:_e.target.checked})}),r.createElement(P.x,{id:"sql-preview",label:"Preview",transparent:!0,showLabel:!0,value:Le.preview,onChange:_e=>_e.target instanceof HTMLInputElement&&Ge({...Le,preview:_e.target.checked})})),r.createElement(m.FlexItem,{grow:1}),xe?r.createElement(S.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>Ve()},"Run query"):r.createElement(C.u,{theme:"error",content:r.createElement(r.Fragment,null,"Your query is invalid. Check below for details. ",r.createElement("br",null),"However, you can still run this query."),placement:"top"},r.createElement(S.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>Ve()},"Run query")),r.createElement(A.S,{options:V,size:"sm",value:We,onChange:be}),r.createElement(F,{isOpen:st,onCopy:()=>{pt(!1),ft(he.rawSql),Pe({...he,rawSql:ut(he),editorMode:m.EditorMode.Builder})},onDiscard:()=>{pt(!1),Pe({...he,rawSql:ut(he),editorMode:m.EditorMode.Builder})},onCancel:()=>pt(!1)})),We===m.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(m.Space,{v:.5}),r.createElement(m.EditorRow,null,et?null:r.createElement(m.EditorField,{label:"Dataset",width:25},r.createElement(L,{db:pe,value:he.dataset===void 0?null:he.dataset,onChange:nt})),r.createElement(m.EditorField,{label:"Table",width:25},r.createElement(j,{db:pe,query:he,value:he.table===void 0?null:he.table,onChange:ze,forceFetch:et,applyDefault:!0})))))}var x=e(9892),H=e(27443),Z=e(89050),ee=e(72648);function J({children:pe,onChange:he,query:Le,width:Pe,height:Ve,editorLanguageDefinition:Ge}){const xe=(0,r.useRef)(Le);(0,r.useEffect)(()=>{xe.current=Le},[Le]);const et=(0,r.useCallback)((We,Be)=>{const ft={...xe.current,rawQuery:!0,rawSql:We};he(ft,Be)},[he]);return r.createElement(m.SQLEditor,{width:Pe,height:Ve,query:Le.rawSql,onChange:et,language:Ge},pe)}var k=e(52081),R=e(8180),h=e(13821),s=e(83231),c=e(2703),o=e(67487);function u({db:pe,query:he,onValidate:Le,range:Pe}){const[Ve,Ge]=(0,r.useState)(),xe=(0,ee.l4)(),et=(0,r.useMemo)(()=>(0,c.Cf)("bytes"),[]),We=(0,r.useMemo)(()=>({error:x.css`
        color: ${xe.colors.error.text};
        font-size: ${xe.typography.bodySmall.fontSize};
        font-family: ${xe.typography.fontFamilyMonospace};
      `,valid:x.css`
        color: ${xe.colors.success.text};
      `,info:x.css`
        color: ${xe.colors.text.secondary};
      `}),[xe]),[Be,ft]=(0,h.Z)(async pt=>pt.rawSql?.trim()===""?null:await pe.validateQuery(pt,Pe),[pe]),[,]=(0,s.Z)(async()=>{const pt=await ft(he);return pt&&Ge(pt),null},1e3,[he,ft]);if((0,r.useEffect)(()=>{Ve?.isError&&Le(!1),Ve?.isValid&&Le(!0)},[Ve,Le]),!Be.value&&!Be.loading)return null;const st=Be.value?.error?l(Be.value.error):"";return r.createElement(r.Fragment,null,Be.loading&&r.createElement("div",{className:We.info},r.createElement(o.$,{inline:!0,size:12})," Validating query..."),!Be.loading&&Be.value&&r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,Be.value.isValid&&Be.value.statistics&&r.createElement("div",{className:We.valid},r.createElement(D.J,{name:"check"})," This query will process"," ",r.createElement("strong",null,(0,c.zc)(et(Be.value.statistics.TotalBytesProcessed)))," ","when run.")),r.createElement(r.Fragment,null,Be.value.isError&&r.createElement("div",{className:We.error},st))))}function l(pe){const he=pe.split(":");return he.length>2?he.slice(2).join(":"):pe}function f({showTools:pe,onFormatCode:he,onExpand:Le,isExpanded:Pe,...Ve}){const Ge=(0,ee.l4)(),[xe,et]=(0,r.useState)(),We=(0,r.useMemo)(()=>({container:x.css`
        border: 1px solid ${Ge.colors.border.medium};
        border-top: none;
        padding: ${Ge.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${Ge.typography.bodySmall.fontSize};
      `,error:x.css`
        color: ${Ge.colors.error.text};
        font-size: ${Ge.typography.bodySmall.fontSize};
        font-family: ${Ge.typography.fontFamilyMonospace};
      `,valid:x.css`
        color: ${Ge.colors.success.text};
      `,info:x.css`
        color: ${Ge.colors.text.secondary};
      `,hint:x.css`
        color: ${Ge.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[Ge]);let Be={};return!pe&&xe===void 0&&(Be={height:0,padding:0,visibility:"hidden"}),r.createElement("div",{className:We.container,style:Be},r.createElement("div",null,Ve.onValidate&&r.createElement(u,{...Ve,onValidate:ft=>{et(ft),Ve.onValidate(ft)}})),pe&&r.createElement("div",null,r.createElement(k.Lh,{spacing:"sm"},he&&r.createElement(R.h,{onClick:he,name:"brackets-curly",size:"xs",tooltip:"Format query"}),Le&&r.createElement(R.h,{onClick:()=>Le(!Pe),name:Pe?"angle-up":"angle-down",size:"xs",tooltip:Pe?"Collapse editor":"Expand editor"}),r.createElement(C.u,{content:"Hit CTRL/CMD+Return to run query"},r.createElement(D.J,{className:We.hint,name:"keyboard"})))))}function y({db:pe,query:he,onChange:Le,onRunQuery:Pe,onValidate:Ve,queryToValidate:Ge,range:xe}){const et=(0,ee.l4)(),We=(0,ee.wW)(p),[Be,ft]=(0,r.useState)(!1),[st,pt]=(0,H.Z)(),[ut,be]=(0,H.Z)(),Xe=(0,r.useMemo)(()=>pe.getEditorLanguageDefinition(),[pe]),nt=(dt,mt)=>r.createElement(J,{editorLanguageDefinition:Xe,query:he,width:dt,height:mt?mt-pt.height:void 0,onChange:Le},({formatQuery:Nt})=>r.createElement("div",{ref:st},r.createElement(f,{db:pe,query:Ge,onValidate:Ve,onFormatCode:Nt,showTools:!0,range:xe,onExpand:ft,isExpanded:Be}))),ze=(dt=!1)=>dt?r.createElement(Z.Z,null,({width:mt,height:Nt})=>nt(mt,Nt)):r.createElement("div",{ref:ut},nt()),_e=()=>r.createElement("div",{style:{width:be.width,height:be.height,background:et.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return r.createElement(r.Fragment,null,Be?_e():ze(),Be&&r.createElement(b.u,{title:`Query ${he.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:We.modal,contentClassName:We.modalContent,isOpen:Be,onDismiss:()=>{ft(!1)}},ze(!0)))}function p(pe){return{modal:x.css`
      width: 95vw;
      height: 95vh;
    `,modalContent:x.css`
      height: 100%;
      padding-top: 0;
    `}}var a=e(24799),n=e(9405),g=e(13930);function d({rawSql:pe}){const[he,Le]=(0,T.Z)(),Pe=(0,ee.wW)(N),Ve=r.createElement("div",{className:Pe.labelWrapper},r.createElement("span",{className:Pe.label},"Preview"),r.createElement(R.h,{tooltip:"Copy to clipboard",onClick:()=>Le(pe),name:"copy"}));return r.createElement(a.g,{label:Ve,className:Pe.grow},r.createElement(n.p,{language:"sql",height:80,value:(0,g._)(pe),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function N(pe){return{grow:(0,x.css)({flexGrow:1}),label:(0,x.css)({fontSize:12,fontWeight:pe.typography.fontWeightMedium}),labelWrapper:(0,x.css)({display:"flex",justifyContent:"space-between",paddingBottom:pe.spacing(.5)})}}function W({query:pe,onQueryChange:he,db:Le}){return{onSqlChange:(0,r.useCallback)(Ve=>{const Ge=Le.toRawSql,xe=Ge({sql:Ve,dataset:pe.dataset,table:pe.table,refId:pe.refId}),et={...pe,sql:Ve,rawSql:xe};he(et)},[Le,he,pe])}}function _({sql:pe,columns:he,onSqlChange:Le}){const Pe=(0,r.useCallback)(Ve=>{const Ge=Ve.map(et=>(0,I.U2)(et.property?.name)),xe={...pe,groupBy:Ge};Le(xe)},[Le,pe]);return r.createElement(m.EditorList,{items:pe.groupBy,onChange:Pe,renderItem:X({options:he})})}function X({options:pe}){return function(Le,Pe,Ve){return r.createElement(m.InputGroup,null,r.createElement(U.Ph,{value:Le.property?.name?(0,$.E)(Le.property.name):null,"aria-label":"Group by",options:pe,menuShouldPortal:!0,onChange:({value:Ge})=>Ge&&Pe((0,I.U2)(Ge))}),r.createElement(m.AccessoryButton,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:Ve}))}}function G({fields:pe,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=W({query:he,onQueryChange:Le,db:Pe});return r.createElement(_,{columns:pe,sql:he.sql,onSqlChange:Ve})}var z=e(82897),K=e(46967);const Y=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function re({sql:pe,onSqlChange:he,columns:Le,showOffset:Pe}){const Ve=(0,r.useCallback)(We=>{const Be={...pe,orderByDirection:We};he(Be)},[he,pe]),Ge=(0,r.useCallback)(We=>{const Be={...pe,limit:Number.parseInt(We.currentTarget.value,10)};he(Be)},[he,pe]),xe=(0,r.useCallback)(We=>{const Be={...pe,offset:Number.parseInt(We.currentTarget.value,10)};he(Be)},[he,pe]),et=(0,r.useCallback)(We=>{const Be={...pe,orderBy:(0,I.ax)(We?.value)};We===null&&(Be.orderByDirection=void 0),he(Be)},[he,pe]);return r.createElement(r.Fragment,null,r.createElement(m.EditorField,{label:"Order by",width:25},r.createElement(m.InputGroup,null,r.createElement(U.Ph,{"aria-label":"Order by",options:Le,value:pe.orderBy?.property.name?(0,$.E)(pe.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:et}),r.createElement(m.Space,{h:1.5}),r.createElement(A.S,{options:Y,disabled:!pe?.orderBy?.property.name,value:pe.orderByDirection,onChange:Ve}))),r.createElement(m.EditorField,{label:"Limit",optional:!0,width:25},r.createElement(K.I,{type:"number",min:0,id:(0,z.uniqueId)("limit-"),value:pe.limit||"",onChange:Ge})),Pe&&r.createElement(m.EditorField,{label:"Offset",optional:!0,width:25},r.createElement(K.I,{type:"number",id:(0,z.uniqueId)("offset-"),value:pe.offset||"",onChange:xe})))}function ne({fields:pe,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=W({query:he,onQueryChange:Le,db:Pe});let Ge=[];return pe&&(Ge=[{value:"",label:"Selected columns",options:he.sql?.columns?.map((et,We)=>{const Be=et.name?`${et.name}(${et.parameters?.map(ft=>ft.name)})`:et.parameters?.map(ft=>ft.name);return{value:Be,label:`${We+1} - ${Be}`}}),expanded:!0},...pe]),r.createElement(re,{sql:he.sql,onSqlChange:Ve,columns:Ge})}var ue=e(47366),ae=e(80287);const ve={label:"*",value:"*"};function se({sql:pe,format:he,columns:Le,onSqlChange:Pe,functions:Ve}){const Ge=(0,ee.wW)(ge),xe=[ve,...Le||[]],et=[];he===O.ws.Timeseries&&(et.push({label:"time",value:"time"}),et.push({label:"value",value:"value"}));const We=(0,r.useCallback)((ut,be)=>Xe=>{let nt={...ut};ut.parameters?.length?nt.parameters=ut.parameters.map(_e=>_e.type===ae.a.FunctionParameter?{..._e,name:Xe.value}:_e):nt.parameters=[{type:ae.a.FunctionParameter,name:Xe.value}];const ze={...pe,columns:pe.columns?.map((_e,dt)=>dt===be?nt:_e)};Pe(ze)},[Pe,pe]),Be=(0,r.useCallback)((ut,be)=>Xe=>{const nt={...ut,name:Xe?.value},ze={...pe,columns:pe.columns?.map((_e,dt)=>dt===be?nt:_e)};Pe(ze)},[Pe,pe]),ft=(0,r.useCallback)((ut,be)=>Xe=>{let nt={...ut};Xe!==null?nt={...ut,alias:`"${Xe?.value?.trim()}"`}:delete nt.alias;const ze={...pe,columns:pe.columns?.map((_e,dt)=>dt===be?nt:_e)};Pe(ze)},[Pe,pe]),st=(0,r.useCallback)(ut=>()=>{const be=[...pe.columns];be.splice(ut,1);const Xe={...pe,columns:be};Pe(Xe)},[Pe,pe]),pt=(0,r.useCallback)(()=>{const ut={...pe,columns:[...pe.columns,(0,I.Wf)()]};Pe(ut)},[Pe,pe]);return r.createElement(m.Stack,{gap:2,wrap:!0,direction:"column"},pe.columns?.map((ut,be)=>r.createElement("div",{key:be},r.createElement(m.Stack,{gap:2,alignItems:"end"},r.createElement(m.EditorField,{label:"Column",width:25},r.createElement(U.Ph,{value:ye(ut),options:xe,inputId:`select-column-${be}-${(0,z.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:We(ut,be)})),r.createElement(m.EditorField,{label:"Aggregation",optional:!0,width:25},r.createElement(U.Ph,{value:ut.name?(0,$.E)(ut.name):null,inputId:`select-aggregation-${be}-${(0,z.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:Ve,onChange:Be(ut,be)})),r.createElement(m.EditorField,{label:"Alias",optional:!0,width:15},r.createElement(U.Ph,{value:ut.alias?(0,$.E)(ut.alias):null,inputId:`select-alias-${be}-${(0,z.uniqueId)()}`,options:et,onChange:ft(ut,be),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),r.createElement(S.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:st(be)})))),r.createElement(S.zx,{type:"button",onClick:pt,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:Ge.addButton}))}const ge=()=>({addButton:(0,x.css)({alignSelf:"flex-start"})});function ye({parameters:pe}){const he=pe?.find(Le=>Le.type===ae.a.FunctionParameter);return he?.name?(0,$.E)(he.name):null}function Oe({fields:pe,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=W({query:he,onQueryChange:Le,db:Pe}),Ge=[...ue.W,...Pe.functions?.()||[]].map($.E);return r.createElement(se,{columns:pe,sql:he.sql,format:he.format,functions:Ge,onSqlChange:Ve})}var Se=e(42638),ce=e(96650),Ne=e(67483),we=e(35575);const je={add:"Add",remove:"Remove"},Ke={id:ce.cQ.uuid(),type:"group",children1:{[ce.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},Ye={id:ce.cQ.uuid(),type:"group",children1:{[ce.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},ke={...ce.I4.widgets,text:{...ce.I4.widgets.text,factory:function(he){return r.createElement(K.I,{value:he?.value||"",placeholder:he?.placeholder,onChange:Le=>he?.setValue(Le.currentTarget.value)})}},number:{...ce.I4.widgets.number,factory:function(he){return r.createElement(K.I,{value:he?.value,placeholder:he?.placeholder,type:"number",onChange:Le=>he?.setValue(Number.parseInt(Le.currentTarget.value,10))})}},datetime:{...ce.I4.widgets.datetime,factory:function(he){return r.createElement(we.x,{onChange:Le=>{he?.setValue(Le.format(ce.I4.widgets.datetime.valueFormat))},date:(0,Ne.CQ)(he?.value).utc()})}}},at={...ce.I4.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:je.add,deleteLabel:je.remove,renderConjs:function(he){return r.createElement(U.Ph,{id:he?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:he?.conjunctionOptions?Object.keys(he?.conjunctionOptions).map($.E):void 0,value:he?.selectedConjunction,onChange:Le=>he?.setConjunction(Le.value)})},renderField:function(he){const Le=he?.config?.fields||{};return r.createElement(U.Ph,{id:he?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:he?.items.map(Pe=>{const Ve=Le[Pe.key].mainWidgetProps?.customProps?.icon;return{label:Pe.label,value:Pe.key,icon:Ve}}),value:he?.selectedKey,onChange:Pe=>{he?.setField(Pe.label)}})},renderButton:function(he){return r.createElement(S.zx,{type:"button",title:`${he?.label} filter`,onClick:he?.onClick,variant:"secondary",size:"md",icon:he?.label===je.add?"plus":"times"})},renderOperator:function(he){return r.createElement(U.Ph,{options:he?.items.map(Le=>({label:Le.label,value:Le.key})),"aria-label":"Operator",menuShouldPortal:!0,value:he?.selectedKey,onChange:Le=>{he?.setField(Le.value||"")}})}};var He=(pe=>(pe.IN="select_any_in",pe.NOT_IN="select_not_any_in",pe))(He||{});const fe=Ae(ce.I4),Ee=ce.I4.types.text.widgets.text,Ce=[...Ee.operators||[],"select_any_in","select_not_any_in"],Fe={...Ee,operators:Ce},De={...ce.I4.types,text:{...ce.I4.types.text,widgets:{...ce.I4.types.text.widgets,text:Fe}}},Me={...ce.I4,widgets:ke,settings:at,operators:fe,types:De};function Ae(pe){const{...he}=pe.operators,Le=()=>"",Pe=he.select_any_in.sqlFormatOp||Le,Ve=(We,Be,ft,st,pt,ut,be,Xe)=>Pe(We,Be,$e(ft),st,pt,ut,be,Xe),Ge=he.select_not_any_in.sqlFormatOp||Le,xe=(We,Be,ft,st,pt,ut,be,Xe)=>Ge(We,Be,$e(ft),st,pt,ut,be,Xe);return{...he,select_any_in:{...he.select_any_in,sqlFormatOp:Ve},select_not_any_in:{...he.select_not_any_in,sqlFormatOp:xe}}}function $e(pe){return(0,z.isString)(pe)?pe.split(","):pe}function rt({sql:pe,config:he,onSqlChange:Le}){const[Pe,Ve]=(0,r.useState)(),Ge=(0,r.useMemo)(()=>({...Me,...he}),[he]);(0,r.useEffect)(()=>{if(!Pe){const et=ce.cQ.checkTree(ce.cQ.loadTree(pe.whereJsonTree??Ye),Ge);Ve(et)}},[Ge,pe.whereJsonTree,Pe]),(0,r.useEffect)(()=>{pe.whereJsonTree||Ve(ce.cQ.checkTree(ce.cQ.loadTree(Ye),Ge))},[Ge,pe.whereJsonTree]);const xe=(0,r.useCallback)((et,We)=>{Ve(et);const Be={...pe,whereJsonTree:ce.cQ.getTree(et),whereString:ce.cQ.sqlFormat(et,We)};Le(Be)},[Le,pe]);return Pe?r.createElement(ce.AE,{...Ge,value:Pe,onChange:xe,renderBuilder:et=>r.createElement(ce.Ib,{...et})}):null}function it(pe){return`
    display: flex;
    gap: 8px;
    flex-direction: ${pe};`}x.injectGlobal`
  .group--header {
    ${it("row")}
  }

  .group-or-rule {
    ${it("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${it("row")}
  }

  .group--children {
    ${it("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function Qe({query:pe,fields:he,onQueryChange:Le,db:Pe}){const Ve=(0,Se.Z)(async()=>lt(he),[he]),{onSqlChange:Ge}=W({query:pe,onQueryChange:Le,db:Pe});return r.createElement(rt,{key:JSON.stringify(Ve.value),config:{fields:Ve.value||{}},sql:pe.sql,onSqlChange:xe=>{Ge(xe)}})}function lt(pe){const he={};for(const Le of pe)he[Le.value]={type:Le.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:Le.icon}}};return he}const ct=({query:pe,db:he,queryRowFilter:Le,onChange:Pe,onValidate:Ve,range:Ge})=>{const xe=(0,E.Z)(async()=>await he.fields(pe),[he,pe.dataset,pe.table]);return r.createElement(r.Fragment,null,r.createElement(m.EditorRows,null,r.createElement(m.EditorRow,null,r.createElement(Oe,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he})),Le.filter&&r.createElement(m.EditorRow,null,r.createElement(m.EditorField,{label:"Filter by column value",optional:!0},r.createElement(Qe,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he}))),Le.group&&r.createElement(m.EditorRow,null,r.createElement(m.EditorField,{label:"Group by column"},r.createElement(G,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he}))),Le.order&&r.createElement(m.EditorRow,null,r.createElement(ne,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he})),Le.preview&&pe.rawSql&&r.createElement(m.EditorRow,null,r.createElement(d,{rawSql:pe.rawSql}))),r.createElement(f,{db:he,query:pe,onValidate:Ve,range:Ge}))};function Ze({datasource:pe,query:he,onChange:Le,onRunQuery:Pe,range:Ve,queryHeaderProps:Ge}){const[xe,et]=(0,r.useState)(!0),We=pe.getDB(),{loading:Be,error:ft}=(0,E.Z)(async()=>()=>{pe.getDB(pe.id).init!==void 0&&pe.getDB(pe.id).init()},[pe]),st=(0,M.Y)(he),[pt,ut]=(0,r.useState)({filter:!!st.sql?.whereString,group:!!st.sql?.groupBy?.[0]?.property.name,order:!!st.sql?.orderBy?.property.name,preview:!0}),[be,Xe]=(0,r.useState)(st);(0,r.useEffect)(()=>()=>{pe.getDB(pe.id).dispose!==void 0&&pe.getDB(pe.id).dispose()},[pe]);const nt=(0,r.useCallback)(dt=>{gt(dt)&&Pe&&Pe()},[Pe]),ze=(dt,mt=!0)=>{Xe(dt),Le(dt),(0,I.IC)(dt.sql?.columns)&&dt.sql?.columns.some(Nt=>Nt.name)&&!pt.group&&ut({...pt,group:!0}),mt&&nt(dt)},_e=dt=>{Xe(dt),Le(dt)};return Be||ft?null:r.createElement(r.Fragment,null,r.createElement(w,{db:We,onChange:_e,onRunQuery:Pe,onQueryRowChange:ut,queryRowFilter:pt,query:st,isQueryRunnable:xe,...Ge}),r.createElement(m.Space,{v:.5}),st.editorMode!==m.EditorMode.Code&&r.createElement(ct,{db:We,query:st,onChange:dt=>ze(dt,!1),queryRowFilter:pt,onValidate:et,range:Ve}),st.editorMode===m.EditorMode.Code&&r.createElement(y,{db:We,query:st,queryToValidate:be,onChange:ze,onRunQuery:Pe,onValidate:et,range:Ve}))}const gt=pe=>Boolean(pe.rawSql)},16705:(te,i,e)=>{"use strict";e.d(i,{K:()=>S});var r=e(66111),E=e(35645),m=e(13393),M=e(81764),I=e(11543),T=e(8944),P=e(45458);const S=C=>{const{onOptionsChange:A,options:O,labelWidth:b}=C,D=O.jsonData,F=D.maxIdleConnsAuto!==void 0?D.maxIdleConnsAuto:!1,U=V=>{const w={...O,jsonData:{...D,...V}};return A(w)},L=V=>w=>{U({[V]:w})},$=V=>{U(F&&V?{maxOpenConns:V,maxIdleConns:V}:{maxOpenConns:V})},j=()=>{let V,w;F?(w=D.maxOpenConns,V=D.maxIdleConns):D.maxOpenConns!==void 0&&(w=D.maxOpenConns,V=D.maxOpenConns),U({maxIdleConnsAuto:!F,maxIdleConns:V,maxOpenConns:w})};return r.createElement(m.C,{label:"Connection limits"},r.createElement(M._,{tooltip:r.createElement("span",null,"The maximum number of open connections to the database.If ",r.createElement("i",null,"Max idle connections")," is greater than 0 and the ",r.createElement("i",null,"Max open connections")," is less than ",r.createElement("i",null,"Max idle connections"),", then",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, there is no limit on the number of open connections."),labelWidth:b,label:"Max open"},r.createElement(P.Y,{placeholder:"unlimited",value:D.maxOpenConns,onChange:$})),r.createElement(I.Z,null,r.createElement(M._,{tooltip:r.createElement("span",null,"The maximum number of connections in the idle connection pool.If ",r.createElement("i",null,"Max open connections")," is greater than 0 but less than the ",r.createElement("i",null,"Max idle connections"),", then the ",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, no idle connections are retained."),labelWidth:b,label:"Max idle"},r.createElement(P.Y,{placeholder:"2",value:D.maxIdleConns,onChange:L("maxIdleConns"),width:8,fieldDisabled:F})),r.createElement(M._,{label:"Auto",labelWidth:8,tooltip:r.createElement("span",null,"If enabled, automatically set the number of ",r.createElement("i",null,"Maximum idle connections")," to the same value as",r.createElement("i",null," Max open connections"),". If the number of maximum open connections is not set it will be set to the default (",E.v.sqlConnectionLimits.maxIdleConns,").")},r.createElement(T.x,{value:F,onChange:j}))),r.createElement(M._,{tooltip:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.",labelWidth:b,label:"Max lifetime"},r.createElement(P.Y,{placeholder:"14400",value:D.connMaxLifetime,onChange:L("connMaxLifetime")})))}},99234:(te,i,e)=>{"use strict";e.d(i,{D:()=>M});var r=e(66111),E=e(54408),m=e(35645);function M({onOptionsChange:I,options:T}){(0,r.useEffect)(()=>{const P=T.jsonData;let S={...T},C=!1;if(T.database&&((0,E.o7)(`Migrating from options.database with value ${T.database} for ${T.name}`),S.database="",S.jsonData={...P,database:T.database},C=!0),P.maxOpenConns===void 0&&P.maxIdleConns===void 0&&P.maxIdleConnsAuto===void 0){const{maxOpenConns:A,maxIdleConns:O}=m.v.sqlConnectionLimits;(0,E.o7)(`Setting default max open connections to ${A} and setting max idle connection to ${O}`),S.jsonData={...S.jsonData,maxOpenConns:A,maxIdleConns:O,maxIdleConnsAuto:!0},C=!0}if(P.connMaxLifetime===void 0){const{connMaxLifetime:A}=m.v.sqlConnectionLimits;S.jsonData={...S.jsonData,connMaxLifetime:A},C=!0}C&&I(S)},[I,T])}},47366:(te,i,e)=>{"use strict";e.d(i,{W:()=>r,n:()=>E});const r=["AVG","COUNT","MAX","MIN","SUM"],E=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},25748:(te,i,e)=>{"use strict";e.d(i,{D:()=>$});var r=e(65583),E=e(9471),m=e(12115),M=e(22069),I=e(20308),T=e(54899),P=e(32689),S=e(19349),C=e(92624),A=e(82897);class O{transformMetricFindResponse(V){const w=[],x=V.fields.find(Z=>Z.name==="__text"),H=V.fields.find(Z=>Z.name==="__value");if(x&&H)for(let Z=0;Z<x.values.length;Z++)w.push({text:""+x.values[Z],value:""+H.values[Z]});else for(const Z of V.fields)for(const ee of Z.values)w.push({text:ee});return(0,A.uniqBy)(w,"text")}}var b=e(44674),D=e(47366),F=e(94025),U=e(67090);function L(j){const V=typeof j.rawQuery=="string"?j.rawQuery:null;if(!V)return j;const w=(0,U.Y)({refId:"Annotation",...j.target??{},rawSql:V});return{...j,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:w}}class $ extends M.CK{constructor(V,w=(0,I.J)()){super(V),this.templateSrv=w,this.interpolateVariable=(H,Z)=>typeof H=="string"?Z.multi||Z.includeAll?this.getQueryModel().quoteLiteral(H):String(H).replace(/'/g,"''"):typeof H=="number"?H:Array.isArray(H)?H.map(J=>this.getQueryModel().quoteLiteral(J)).join(","):H,this.name=V.name,this.responseParser=new O,this.id=V.id;const x=V.jsonData||{};this.interval=x.timeInterval||"1m",this.db=this.getDB(),this.annotations={prepareAnnotation:L,QueryEditor:b.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(V,w){let x=V;return V&&V.length>0&&(x=V.map(H=>({...H,datasource:this.getRef(),rawSql:this.templateSrv.replace(H.rawSql,w,this.interpolateVariable),rawQuery:!0}))),x}filterQuery(V){return!V.hide}applyTemplateVariables(V,w){return{refId:V.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(V.rawSql,w,this.interpolateVariable),format:V.format}}async metricFindQuery(V,w){let x="tempvar";w&&w.variable&&w.variable.name&&(x=w.variable.name);const H=this.templateSrv.replace(V,(0,C._6)({query:V,wildcardChar:"%",options:w}),this.interpolateVariable),Z={refId:x,datasource:this.getRef(),rawSql:H,format:F.ws.Table},ee=await this.runMetaQuery(Z,w);return this.getResponseParser().transformMetricFindResponse(ee)}async runSql(V,w){const x=await this.runMetaQuery({rawSql:V,format:F.ws.Table,refId:w?.refId},w);return new m.U(x)}runMetaQuery(V,w){const x=(0,S.$t)().timeRange(),H=V.refId||"meta",Z=[{...V,datasource:V.datasource||this.getRef(),refId:H}];return(0,r.n)((0,T.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:w?.range?.from.valueOf().toString()||x.from.valueOf().toString(),to:w?.range?.to.valueOf().toString()||x.to.valueOf().toString(),queries:Z},requestId:H}).pipe((0,E.U)(ee=>(0,P.z1)(ee,Z).data[0]??{fields:[]})))}targetContainsTemplate(V){let w=V.rawSql;return D.n.forEach(x=>{w=w?.replace(x,"")||""}),this.templateSrv.containsTemplate(w)}}},67090:(te,i,e)=>{"use strict";e.d(i,{Y:()=>M});var r=e(26418),E=e(94025),m=e(12936);function M(I){let T=I?.editorMode||r.EditorMode.Builder;return I?.editorMode===void 0&&I?.rawSql!==void 0&&(T=r.EditorMode.Code),{...I,refId:I?.refId||"A",format:I?.format!==void 0?I.format:E.ws.Table,rawSql:I?.rawSql||"",editorMode:T,sql:I?.sql||{columns:[(0,m.Wf)()],groupBy:[(0,m.U2)()],limit:50}}}},80287:(te,i,e)=>{"use strict";e.d(i,{R:()=>r,a:()=>E});var r=(m=>(m.String="string",m))(r||{}),E=(m=>(m.Property="property",m.Operator="operator",m.Or="or",m.And="and",m.GroupBy="groupBy",m.Function="function",m.FunctionParameter="functionParameter",m))(E||{})},94025:(te,i,e)=>{"use strict";e.d(i,{Er:()=>I,ws:()=>E,x7:()=>m});var r=e(13572),E=(T=>(T.Timeseries="time_series",T.Table="table",T))(E||{});const m=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],M=T=>({label:T,value:T}),I=r.E??M},13930:(te,i,e)=>{"use strict";e.d(i,{_:()=>E});var r=e(17249);function E(m){return r.ZP.format(m).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,M=>M.replace(/\s/g,""))}},12936:(te,i,e)=>{"use strict";e.d(i,{IC:()=>m,U2:()=>M,Wf:()=>T,ax:()=>I,zE:()=>E});var r=e(80287);function E(P){return`SELECT ${P.map(C=>{let A="";return C.name&&C.alias?A+=`${C.name}(${C.parameters?.map(O=>`${O.name}`)}) AS ${C.alias}`:C.name?A+=`${C.name}(${C.parameters?.map(O=>`${O.name}`)})`:C.alias?A+=`${C.parameters?.map(O=>`${O.name}`)} AS ${C.alias}`:A+=`${C.parameters?.map(O=>`${O.name}`)}`,A}).join(", ")} `}const m=P=>{if(!P)return!1;const S=P.some(A=>A.parameters?.length||A.parameters?.some(O=>O.name)),C=P.some(A=>A.name);return S||C};function M(P){return{type:r.a.GroupBy,property:{type:r.R.String,name:P}}}function I(P){return{type:r.a.Property,property:{type:r.R.String,name:P}}}function T(P){return{type:r.a.Function,name:P,parameters:[]}}},29340:(te,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setDragStart=i.setDragProgress=i.setDragEnd=void 0;var E=M(e(46724));function m(S){if(typeof WeakMap!="function")return null;var C=new WeakMap,A=new WeakMap;return(m=function(b){return b?A:C})(S)}function M(S,C){if(!C&&S&&S.__esModule)return S;if(S===null||r(S)!=="object"&&typeof S!="function")return{default:S};var A=m(C);if(A&&A.has(S))return A.get(S);var O={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in S)if(D!=="default"&&Object.prototype.hasOwnProperty.call(S,D)){var F=b?Object.getOwnPropertyDescriptor(S,D):null;F&&(F.get||F.set)?Object.defineProperty(O,D,F):O[D]=S[D]}return O.default=S,A&&A.set(S,O),O}var I=function(C,A){return{type:E.SET_DRAG_PROGRESS,mousePos:C,dragging:A}};i.setDragProgress=I;var T=function(C,A,O){return{type:E.SET_DRAG_START,dragStart:C,dragging:A,mousePos:O}};i.setDragStart=T;var P=function(){return{type:E.SET_DRAG_END}};i.setDragEnd=P},47264:(te,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setNot=i.setLock=i.setConjunction=void 0;var E=I(e(46724)),m=e(60399);function M(C){if(typeof WeakMap!="function")return null;var A=new WeakMap,O=new WeakMap;return(M=function(D){return D?O:A})(C)}function I(C,A){if(!A&&C&&C.__esModule)return C;if(C===null||r(C)!=="object"&&typeof C!="function")return{default:C};var O=M(A);if(O&&O.has(C))return O.get(C);var b={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in C)if(F!=="default"&&Object.prototype.hasOwnProperty.call(C,F)){var U=D?Object.getOwnPropertyDescriptor(C,F):null;U&&(U.get||U.set)?Object.defineProperty(b,F,U):b[F]=C[F]}return b.default=C,O&&O.set(C,b),b}var T=function(A,O,b){return{type:E.SET_CONJUNCTION,path:(0,m.toImmutableList)(O),conjunction:b}};i.setConjunction=T;var P=function(A,O,b){return{type:E.SET_NOT,path:(0,m.toImmutableList)(O),not:b}};i.setNot=P;var S=function(A,O,b){return{type:E.SET_LOCK,path:(0,m.toImmutableList)(O),lock:b}};i.setLock=S},73215:(te,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.tree=i.rule=i.group=i.drag=void 0;var E=P(e(82459));i.tree=E;var m=P(e(47264));i.group=m;var M=P(e(21811));i.rule=M;var I=P(e(29340));i.drag=I;function T(S){if(typeof WeakMap!="function")return null;var C=new WeakMap,A=new WeakMap;return(T=function(b){return b?A:C})(S)}function P(S,C){if(!C&&S&&S.__esModule)return S;if(S===null||r(S)!=="object"&&typeof S!="function")return{default:S};var A=T(C);if(A&&A.has(S))return A.get(S);var O={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in S)if(D!=="default"&&Object.prototype.hasOwnProperty.call(S,D)){var F=b?Object.getOwnPropertyDescriptor(S,D):null;F&&(F.get||F.set)?Object.defineProperty(O,D,F):O[D]=S[D]}return O.default=S,A&&A.set(S,O),O}},21811:(te,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setValueSrc=i.setValue=i.setOperatorOption=i.setOperator=i.setField=void 0;var E=I(e(46724)),m=e(60399);function M(O){if(typeof WeakMap!="function")return null;var b=new WeakMap,D=new WeakMap;return(M=function(U){return U?D:b})(O)}function I(O,b){if(!b&&O&&O.__esModule)return O;if(O===null||r(O)!=="object"&&typeof O!="function")return{default:O};var D=M(b);if(D&&D.has(O))return D.get(O);var F={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in O)if(L!=="default"&&Object.prototype.hasOwnProperty.call(O,L)){var $=U?Object.getOwnPropertyDescriptor(O,L):null;$&&($.get||$.set)?Object.defineProperty(F,L,$):F[L]=O[L]}return F.default=O,D&&D.set(O,F),F}var T=function(b,D,F){return{type:E.SET_FIELD,path:(0,m.toImmutableList)(D),field:F,config:b}};i.setField=T;var P=function(b,D,F){return{type:E.SET_OPERATOR,path:(0,m.toImmutableList)(D),operator:F,config:b}};i.setOperator=P;var S=function(b,D,F,U,L,$,j){return{type:E.SET_VALUE,path:(0,m.toImmutableList)(D),delta:F,value:U,valueType:L,asyncListValues:$,config:b,__isInternal:j}};i.setValue=S;var C=function(b,D,F,U){return{type:E.SET_VALUE_SRC,path:(0,m.toImmutableList)(D),delta:F,srcKey:U,config:b}};i.setValueSrc=C;var A=function(b,D,F,U){return{type:E.SET_OPERATOR_OPTION,path:(0,m.toImmutableList)(D),name:F,value:U,config:b}};i.setOperatorOption=A},82459:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setTree=i.removeRule=i.removeGroup=i.moveItem=i.addRule=i.addGroup=i.addDefaultCaseGroup=i.addCaseGroup=void 0;var m=r(e(76833)),M=e(60399),I=e(20495),T=C(e(46724)),P=r(e(40745));function S(j){if(typeof WeakMap!="function")return null;var V=new WeakMap,w=new WeakMap;return(S=function(H){return H?w:V})(j)}function C(j,V){if(!V&&j&&j.__esModule)return j;if(j===null||E(j)!=="object"&&typeof j!="function")return{default:j};var w=S(V);if(w&&w.has(j))return w.get(j);var x={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in j)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(j,Z)){var ee=H?Object.getOwnPropertyDescriptor(j,Z):null;ee&&(ee.get||ee.set)?Object.defineProperty(x,Z,ee):x[Z]=j[Z]}return x.default=j,w&&w.set(j,x),x}var A=function(V,w){return{type:T.SET_TREE,tree:w,config:V}};i.setTree=A;var O=function(V,w,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",Z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return{type:T.ADD_RULE,ruleType:H,children:Z,path:(0,M.toImmutableList)(w),id:(0,m.default)(),properties:(0,I.defaultRuleProperties)(V).merge(x||{}),config:V}};i.addRule=O;var b=function(V,w){return{type:T.REMOVE_RULE,path:(0,M.toImmutableList)(w),config:V}};i.removeRule=b;var D=function(V,w,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:T.ADD_CASE_GROUP,path:(0,M.toImmutableList)(w),children:H,id:(0,m.default)(),properties:(0,I.defaultGroupProperties)(V).merge(x||{}),config:V,meta:{isDefaultCase:!0}}};i.addDefaultCaseGroup=D;var F=function(V,w,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:T.ADD_CASE_GROUP,path:(0,M.toImmutableList)(w),children:H,id:(0,m.default)(),properties:(0,I.defaultGroupProperties)(V).merge(x||{}),config:V}};i.addCaseGroup=F;var U=function(V,w,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:T.ADD_GROUP,path:(0,M.toImmutableList)(w),children:H,id:(0,m.default)(),properties:(0,I.defaultGroupProperties)(V).merge(x||{}),config:V}};i.addGroup=U;var L=function(V,w){return{type:T.REMOVE_GROUP,path:(0,M.toImmutableList)(w),config:V}};i.removeGroup=L;var $=function(V,w,x,H){return{type:T.MOVE_ITEM,fromPath:(0,M.toImmutableList)(w),toPath:(0,M.toImmutableList)(x),placement:H,config:V}};i.moveItem=$},17079:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=V(e(66111)),C=r(e(59160)),A=V(e(40745)),O=e(75002),b=r(e(71620)),D=e(31775),F=r(e(76833)),U=e(9701),L,$;function j(Z){if(typeof WeakMap!="function")return null;var ee=new WeakMap,J=new WeakMap;return(j=function(R){return R?J:ee})(Z)}function V(Z,ee){if(!ee&&Z&&Z.__esModule)return Z;if(Z===null||E(Z)!=="object"&&typeof Z!="function")return{default:Z};var J=j(ee);if(J&&J.has(Z))return J.get(Z);var k={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in Z)if(h!=="default"&&Object.prototype.hasOwnProperty.call(Z,h)){var s=R?Object.getOwnPropertyDescriptor(Z,h):null;s&&(s.get||s.set)?Object.defineProperty(k,h,s):k[h]=Z[h]}return k.default=Z,J&&J.set(Z,k),k}function w(Z){var ee=x();return function(){var k=(0,P.default)(Z),R;if(ee){var h=(0,P.default)(this).constructor;R=Reflect.construct(k,arguments,h)}else R=k.apply(this,arguments);return(0,T.default)(this,R)}}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H=(0,b.default)(L=($=function(Z){(0,I.default)(J,Z);var ee=w(J);function J(k){var R;return(0,m.default)(this,J),R=ee.call(this,k),R._updPath(k),R}return(0,M.default)(J,[{key:"shouldComponentUpdate",value:function(R,h){var s=this.props,c=(0,U.pureShouldComponentUpdate)(this)(R,h);if(c){var o=[];for(var u in R){var l=R[u]!==s[u];l&&u!="__isInternalValueChange"&&o.push(u)}o.length||(c=!1),o.length==1&&o[0]=="tree"&&R.__isInternalValueChange&&(c=!1)}return c}},{key:"_updPath",value:function(R){var h=R.tree.get("id");this.path=A.default.List.of(h)}},{key:"render",value:function(){var R=this.props.tree,h=R.get("type"),s=h=="switch_group",c=s?null:(0,D.getTotalReordableNodesCountInTree)(R),o=s?null:(0,D.getTotalRulesCountInTree)(R),u=R.get("id");return S.default.createElement(O.Item,{key:u,id:u,path:this.path,type:h,properties:R.get("properties")||new A.Map,config:this.props.config,actions:this.props.actions,children1:R.get("children1")||new A.Map,reordableNodesCnt:c,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),J}(S.Component),$.propTypes={tree:C.default.any.isRequired,config:C.default.object.isRequired,actions:C.default.object.isRequired,onDragStart:C.default.func},$))||L;i.default=H},50803:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(92476)),M=r(e(86067)),I=r(e(85091)),T=r(e(80467)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=j(e(66111)),O=e(95512),b=r(e(78669)),D=r(e(59160)),F=j(e(73215)),U=e(60399),L=e(9701);function $(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,h=new WeakMap;return($=function(c){return c?h:R})(k)}function j(k,R){if(!R&&k&&k.__esModule)return k;if(k===null||E(k)!=="object"&&typeof k!="function")return{default:k};var h=$(R);if(h&&h.has(k))return h.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,h&&h.set(k,s),s}function V(k,R){var h=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);R&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),h.push.apply(h,s)}return h}function w(k){for(var R=1;R<arguments.length;R++){var h=arguments[R]!=null?arguments[R]:{};R%2?V(Object(h),!0).forEach(function(s){(0,m.default)(k,s,h[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(h)):V(Object(h)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(h,s))})}return k}function x(k){var R=H();return function(){var s=(0,C.default)(k),c;if(R){var o=(0,C.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,S.default)(this,c)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z=function(k){(0,P.default)(h,k);var R=x(h);function h(s){var c;return(0,M.default)(this,h),c=R.call(this,s),c.shouldComponentUpdate=(0,L.liteShouldComponentUpdate)((0,T.default)(c),{tree:function(u){return!(u===c.oldValidatedTree&&c.oldValidatedTree===c.validatedTree)}}),(0,L.useOnPropsChanged)((0,T.default)(c)),c._updateActions(s),c.validatedTree=s.getMemoizedTree(s.config,s.tree),c.oldValidatedTree=c.validatedTree,c}return(0,I.default)(h,[{key:"_updateActions",value:function(c){var o=c.config,u=c.dispatch;this.actions=(0,L.bindActionCreators)(w(w(w({},F.tree),F.group),F.rule),o,u)}},{key:"onPropsChanged",value:function(c){var o=c.onChange,u=this.props.config,l=c.tree,f=this.props.tree,y=c.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=l,u!==y&&(this._updateActions(c),this.validatedTree=c.getMemoizedTree(y,l,u));var p=!(0,U.immutableEqual)(this.validatedTree,this.oldValidatedTree);p&&o&&o(this.validatedTree,y,c.__lastAction)}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.renderBuilder,l=c.dispatch,f=c.__isInternalValueChange,y={tree:this.validatedTree,actions:this.actions,config:o,dispatch:l,__isInternalValueChange:f};return u(y)}}]),h}(A.Component);Z.propTypes={config:D.default.object.isRequired,onChange:D.default.func,renderBuilder:D.default.func,tree:D.default.any};var ee=(0,O.connect)(function(k){return{tree:k.tree,__isInternalValueChange:k.__isInternalValueChange,__lastAction:k.__lastAction}},null,null,{context:b.default})(Z);ee.displayName="ConnectedQuery";var J=ee;i.default=J},65394:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(80467)),T=r(e(72366)),P=r(e(64920)),S=r(e(39005)),C=Z(e(66111)),A=r(e(59160)),O=r(e(42444)),b=r(e(78669)),D=e(20023),F=e(95512),U=Z(e(73215)),L=e(79746),$=e(60399),j=e(20495),V=e(16226),w=e(9701),x=r(e(50803));function H(R){if(typeof WeakMap!="function")return null;var h=new WeakMap,s=new WeakMap;return(H=function(o){return o?s:h})(R)}function Z(R,h){if(!h&&R&&R.__esModule)return R;if(R===null||E(R)!=="object"&&typeof R!="function")return{default:R};var s=H(h);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function ee(R){var h=J();return function(){var c=(0,S.default)(R),o;if(h){var u=(0,S.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,P.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(R){(0,T.default)(s,R);var h=ee(s);function s(c,o){var u;(0,m.default)(this,s),u=h.call(this,c,o),u.shouldComponentUpdate=(0,w.liteShouldComponentUpdate)((0,I.default)(u),{value:function(g,d,N){return!1}}),(0,w.useOnPropsChanged)((0,I.default)(u)),u.getMemoizedConfig=(0,L.createConfigMemo)(),u.getMemoizedTree=(0,V.createValidationMemo)();var l=u.getMemoizedConfig(c),f=c.value,y=u.getMemoizedTree(l,f),p=(0,O.default)(l,y,u.getMemoizedTree),a=(0,D.createStore)(p);return u.state={store:a,config:l},u}return(0,M.default)(s,[{key:"onPropsChanged",value:function(o){var u=this,l=this.state.config,f=this.getMemoizedConfig(o),y=l!==f,p=this.state.store.getState().tree,a=!(0,$.immutableEqual)(o.value,this.props.value)&&!(0,$.immutableEqual)(o.value,p),n=a?o.value||(0,j.defaultRoot)(o):p;if(y&&this.setState({config:f}),a||y){var g=this.getMemoizedTree(f,n,l);return Promise.resolve().then(function(){u.state.store.dispatch(U.tree.setTree(f,g))})}}},{key:"render",value:function(){var o=this.props,u=o.renderBuilder,l=o.get_children,f=o.onChange,y=o.settings,p=this.state,a=p.config,n=p.store,g=y.renderProvider;return C.default.createElement(g,{config:a},C.default.createElement(F.Provider,{store:n,context:b.default},C.default.createElement(x.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:f,renderBuilder:u||l})))}}]),s}(C.Component);i.default=k,k.propTypes={conjunctions:A.default.object.isRequired,fields:A.default.object.isRequired,types:A.default.object.isRequired,operators:A.default.object.isRequired,widgets:A.default.object.isRequired,settings:A.default.object.isRequired,onChange:A.default.func,renderBuilder:A.default.func,value:A.default.any}},15920:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(68307)),M=r(e(19934)),I=r(e(86067)),T=r(e(85091)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=U(e(66111)),O=r(e(59160)),b=e(71620),D=["isDraggingTempo","isDraggingMe","dragging"];function F(w){if(typeof WeakMap!="function")return null;var x=new WeakMap,H=new WeakMap;return(F=function(ee){return ee?H:x})(w)}function U(w,x){if(!x&&w&&w.__esModule)return w;if(w===null||E(w)!=="object"&&typeof w!="function")return{default:w};var H=F(x);if(H&&H.has(w))return H.get(w);var Z={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in w)if(J!=="default"&&Object.prototype.hasOwnProperty.call(w,J)){var k=ee?Object.getOwnPropertyDescriptor(w,J):null;k&&(k.get||k.set)?Object.defineProperty(Z,J,k):Z[J]=w[J]}return Z.default=w,H&&H.set(w,Z),Z}function L(w){var x=$();return function(){var Z=(0,C.default)(w),ee;if(x){var J=(0,C.default)(this).constructor;ee=Reflect.construct(Z,arguments,J)}else ee=Z.apply(this,arguments);return(0,S.default)(this,ee)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=e(23019),V=function(x){return function(H){var Z;return Z=function(ee){(0,P.default)(k,ee);var J=L(k);function k(R){var h;return(0,I.default)(this,k),h=J.call(this,R),h.handleDraggerMouseDown=function(s){var c=h.props.id,o=h.wrapper.current;h.props.onDragStart&&h.props.onDragStart(c,o,s)},h.wrapper=A.default.createRef(),h}return(0,T.default)(k,[{key:"render",value:function(){var h=this.props,s=h.isDraggingTempo,c=h.isDraggingMe,o=h.dragging,u=(0,M.default)(h,D),l=u.isTrueLocked,f={};c&&s&&(b._isReorderingTree||(f={top:o.y,left:o.x,width:o.w}));var y=j(x,"group-or-rule",c&&s?"qb-draggable":null,c&&!s?"qb-placeholder":null,l?"locked":null);return A.default.createElement("div",{className:y,style:f,ref:this.wrapper,"data-id":this.props.id},A.default.createElement(H,(0,m.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:c,isDraggingTempo:s},u)))}}]),k}(A.PureComponent),Z.propTypes={isDraggingTempo:O.default.bool,isDraggingMe:O.default.bool,onDragStart:O.default.func,dragging:O.default.object,isLocked:O.default.bool,isTrueLocked:O.default.bool},Z}};i.default=V},80742:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(80467)),T=r(e(72366)),P=r(e(64920)),S=r(e(39005)),C=$(e(66111)),A=r(e(59160)),O=r(e(74937)),b=r(e(78669)),D=e(9701),F=e(95512),U=e(20495);function L(H){if(typeof WeakMap!="function")return null;var Z=new WeakMap,ee=new WeakMap;return(L=function(k){return k?ee:Z})(H)}function $(H,Z){if(!Z&&H&&H.__esModule)return H;if(H===null||E(H)!=="object"&&typeof H!="function")return{default:H};var ee=L(Z);if(ee&&ee.has(H))return ee.get(H);var J={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in H)if(R!=="default"&&Object.prototype.hasOwnProperty.call(H,R)){var h=k?Object.getOwnPropertyDescriptor(H,R):null;h&&(h.get||h.set)?Object.defineProperty(J,R,h):J[R]=H[R]}return J.default=H,ee&&ee.set(H,J),J}function j(H){var Z=V();return function(){var J=(0,S.default)(H),k;if(Z){var R=(0,S.default)(this).constructor;k=Reflect.construct(J,arguments,R)}else k=J.apply(this,arguments);return(0,P.default)(this,k)}}function V(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(Z){var ee;return ee=function(J){(0,T.default)(R,J);var k=j(R);function R(h){var s;return(0,m.default)(this,R),s=k.call(this,h),s._selectedConjunction=function(c){return c=c||s.props,c.conjunction||(0,U.defaultGroupConjunction)(c.config,c.field)},s.setConjunction=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setConjunction(s.props.path,c)},s.setNot=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setNot(s.props.path,c)},s.setLock=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setLock(s.props.path,c)},s.dummyFn=function(){},s.removeSelf=function(){s.props.actions.removeGroup(s.props.path)},s.addGroup=function(){s.props.actions.addGroup(s.props.path)},s.addCaseGroup=function(){s.props.actions.addCaseGroup(s.props.path)},s.addDefaultCaseGroup=function(){s.props.actions.addDefaultCaseGroup(s.props.path)},s.addRule=function(){s.props.actions.addRule(s.props.path)},s.setField=function(c){s.props.actions.setField(s.props.path,c)},s.setOperator=function(c){s.props.actions.setOperator(s.props.path,c)},s.setValue=function(c,o,u){s.props.actions.setValue(s.props.path,c,o,u)},(0,D.useOnPropsChanged)((0,I.default)(s)),s.selectedConjunction=s._selectedConjunction(h),s.conjunctionOptions=s._getConjunctionOptions(h),s.dummyFn.isDummyFn=!0,s}return(0,M.default)(R,[{key:"shouldComponentUpdate",value:function(s,c){var o=this.props,u=this.state,l=(0,D.pureShouldComponentUpdate)(this)(s,c);if(l&&u==c&&o!=s){var f=s.dragging.id||o.dragging.id,y=f==s.id,p=[];for(var a in s){var n=s[a]!=o[a];a=="dragging"&&!y&&(n=!1),n&&p.push(a)}p.length||(l=!1)}return l}},{key:"onPropsChanged",value:function(s){var c=s.config,o=s.id,u=s.conjunction,l=this.props.config,f=this.props.conjunction;(l!=c||f!=u)&&(this.selectedConjunction=this._selectedConjunction(s),this.conjunctionOptions=this._getConjunctionOptions(s))}},{key:"_getConjunctionOptions",value:function(s){var c=this;return(0,O.default)(s.config.conjunctions,function(o,u){return{id:"conjunction-".concat(s.id,"-").concat(u),name:"conjunction[".concat(s.id,"]"),key:u,label:o.label,checked:u===c._selectedConjunction(s)}})}},{key:"render",value:function(){var s=this.props.dragging.id==this.props.id,c=this.props.path.size,o=this.props.config.settings.maxNesting,u=!s&&this.props.isDraggingTempo,l=typeof o>"u"||c<o,f=c==1;return C.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[s?C.default.createElement(Z,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,C.default.createElement(Z,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:s,isDraggingTempo:u,onDragStart:this.props.onDragStart,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:u?this.dummyFn:this.setConjunction,setNot:u?this.dummyFn:this.setNot,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,addGroup:u?this.dummyFn:this.addGroup,addCaseGroup:u?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:u?this.dummyFn:this.addDefaultCaseGroup,addRule:u?this.dummyFn:this.addRule,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setValue:u?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),R}(C.Component),ee.propTypes={config:A.default.object.isRequired,actions:A.default.object.isRequired,path:A.default.any.isRequired,id:A.default.string.isRequired,groupId:A.default.string,not:A.default.bool,conjunction:A.default.string,children1:A.default.any,onDragStart:A.default.func,reordableNodesCnt:A.default.number,field:A.default.string,parentField:A.default.string,isLocked:A.default.bool,isTrueLocked:A.default.bool,dragging:A.default.object,isDraggingTempo:A.default.bool},ee},x=function(Z){var ee=(0,F.connect)(function(J){return{dragging:J.dragging}},null,null,{context:b.default})(w(Z));return ee.displayName="ConnectedGroupContainer",ee};i.default=x},6677:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=U(e(66111)),C=r(e(59160)),A=r(e(78669)),O=e(79746),b=e(9701),D=e(95512);function F(x){if(typeof WeakMap!="function")return null;var H=new WeakMap,Z=new WeakMap;return(F=function(J){return J?Z:H})(x)}function U(x,H){if(!H&&x&&x.__esModule)return x;if(x===null||E(x)!=="object"&&typeof x!="function")return{default:x};var Z=F(H);if(Z&&Z.has(x))return Z.get(x);var ee={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in x)if(k!=="default"&&Object.prototype.hasOwnProperty.call(x,k)){var R=J?Object.getOwnPropertyDescriptor(x,k):null;R&&(R.get||R.set)?Object.defineProperty(ee,k,R):ee[k]=x[k]}return ee.default=x,Z&&Z.set(x,ee),ee}function L(x){var H=$();return function(){var ee=(0,P.default)(x),J;if(H){var k=(0,P.default)(this).constructor;J=Reflect.construct(ee,arguments,k)}else J=ee.apply(this,arguments);return(0,T.default)(this,J)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=e(23019),V=function(H){var Z;return Z=function(ee){(0,I.default)(k,ee);var J=L(k);function k(R){var h;return(0,m.default)(this,k),h=J.call(this,R),h.dummyFn=function(){},h.removeSelf=function(){h.props.actions.removeRule(h.props.path)},h.setLock=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;h.props.actions.setLock(h.props.path,s)},h.setField=function(s){h.props.actions.setField(h.props.path,s)},h.setOperator=function(s){h.props.actions.setOperator(h.props.path,s)},h.setOperatorOption=function(s,c){h.props.actions.setOperatorOption(h.props.path,s,c)},h.setValue=function(s,c,o,u,l){h.props.actions.setValue(h.props.path,s,c,o,u,l)},h.setValueSrc=function(s,c){h.props.actions.setValueSrc(h.props.path,s,c)},h.dummyFn.isDummyFn=!0,h}return(0,M.default)(k,[{key:"shouldComponentUpdate",value:function(h,s){var c=this.props,o=this.state,u=(0,b.pureShouldComponentUpdate)(this)(h,s);if(u&&o==s&&c!=h){var l=h.dragging.id||c.dragging.id,f=l==h.id,y=[];for(var p in h){var a=h[p]!=c[p];p=="dragging"&&!f&&(a=!1),a&&y.push(p)}y.length||(u=!1)}return u}},{key:"render",value:function(){var h=this.props.dragging.id==this.props.id,s=(0,O.getFieldConfig)(this.props.config,this.props.field),c=this.props.config.settings.showErrorMessage,o=s&&s.type=="!struct",u=!h&&this.props.isDraggingTempo,l=this.props.valueError,f=l&&l.toArray().filter(function(p){return!!p}).shift()||null,y=f!=null&&c;return S.default.createElement("div",{className:j("group-or-rule-container","rule-container",y?"rule-with-error":null),"data-id":this.props.id},[h?S.default.createElement(H,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,S.default.createElement(H,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:h,isDraggingTempo:u,onDragStart:this.props.onDragStart,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setOperatorOption:u?this.dummyFn:this.setOperatorOption,setValue:u?this.dummyFn:this.setValue,setValueSrc:u?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),k}(S.Component),Z.propTypes={id:C.default.string.isRequired,groupId:C.default.string,config:C.default.object.isRequired,path:C.default.any.isRequired,operator:C.default.string,field:C.default.string,actions:C.default.object.isRequired,onDragStart:C.default.func,value:C.default.any,valueSrc:C.default.any,asyncListValues:C.default.array,valueError:C.default.any,operatorOptions:C.default.object,reordableNodesCnt:C.default.number,parentField:C.default.string,isLocked:C.default.bool,isTrueLocked:C.default.bool,dragging:C.default.object,isDraggingTempo:C.default.bool},Z},w=function(H){var Z=(0,D.connect)(function(ee){return{dragging:ee.dragging}},null,null,{context:A.default})(V(H));return Z.displayName="ConnectedRuleContainer",Z};i.default=w},71620:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i._isReorderingTree=void 0;var m=r(e(68307)),M=r(e(90890)),I=r(e(86067)),T=r(e(85091)),P=r(e(80467)),S=r(e(72366)),C=r(e(64920)),A=r(e(39005)),O=H(e(66111)),b=e(95512),D=e(31775),F=e(60399),U=r(e(78669)),L=H(e(46724)),$=r(e(29521)),j=r(e(59160)),V=H(e(73215)),w=e(9701);function x(h){if(typeof WeakMap!="function")return null;var s=new WeakMap,c=new WeakMap;return(x=function(u){return u?c:s})(h)}function H(h,s){if(!s&&h&&h.__esModule)return h;if(h===null||E(h)!=="object"&&typeof h!="function")return{default:h};var c=x(s);if(c&&c.has(h))return c.get(h);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in h)if(l!=="default"&&Object.prototype.hasOwnProperty.call(h,l)){var f=u?Object.getOwnPropertyDescriptor(h,l):null;f&&(f.get||f.set)?Object.defineProperty(o,l,f):o[l]=h[l]}return o.default=h,c&&c.set(h,o),o}function Z(h){var s=ee();return function(){var o=(0,A.default)(h),u;if(s){var l=(0,A.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,C.default)(this,u)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=!1;i._isReorderingTree=J;var k=function(s){var c,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return c=function(u){(0,S.default)(f,u);var l=Z(f);function f(y){var p;return(0,I.default)(this,f),p=l.call(this,y),p._getEventTarget=function(a,n){return a&&a.__mocked_window||document.body||window},p.onDragStart=function(a,n,g){var d=n.closest(".query-builder");p._isUsingLegacyReactDomRender===void 0&&(p._isUsingLegacyReactDomRender=(0,w.isUsingLegacyReactDomRender)(d)),document.body.classList.add("qb-dragging"),d.classList.add("qb-dragging");var N=d.closest(".query-builder-container")||d;N=p._getScrollParent(N)||document.body;var W=N.scrollTop,_=p._getDraggableNodeEl(d),X=p._getPlaceholderNodeEl(d),G=d.querySelectorAll(".group--children"),z=G.length?G[0]:null,K;z&&(K=window.getComputedStyle(z,null).getPropertyValue("padding-left"),K=parseInt(K));var Y={id:a,x:n.offsetLeft,y:n.offsetTop,w:n.offsetWidth,h:n.offsetHeight,itemInfo:p.tree.items[a],paddingLeft:K},re={id:a,x:n.offsetLeft,y:n.offsetTop,scrollTop:W,clientX:g.clientX,clientY:g.clientY,itemInfo:(0,$.default)(p.tree.items[a]),treeEl:d,treeElContainer:N},ne={clientX:g.clientX,clientY:g.clientY},ue=p._getEventTarget(g,re);p.eventTarget=ue,ue.addEventListener("mousemove",p.onDrag),ue.addEventListener("mouseup",p.onDragEnd),p.props.setDragStart(re,Y,ne)},p.onDrag=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,g=Object.assign({},p.props.dragging),d=p.props.dragStart,N=g.paddingLeft,W=d.treeElContainer,_=W.scrollTop;if(g.itemInfo=p.tree.items[g.id],!!g.itemInfo){var X={clientX:a.clientX,clientY:a.clientY},G={clientX:d.clientX,clientY:d.clientY};if(a.__mock_dom){var z=d.treeEl,K=p._getDraggableNodeEl(z),Y=p._getPlaceholderNodeEl(z);a.__mock_dom({treeEl:z,dragEl:K,plhEl:Y})}if(!d.plX){var re=d.treeEl,ne=p._getPlaceholderNodeEl(re);ne&&(d.plX=ne.getBoundingClientRect().left+window.scrollX,d.plY=ne.getBoundingClientRect().top+window.scrollY)}var ue=d.x,ae=d.y,ve=d.clientX,se=d.clientY,ge=d.scrollTop,ye={x:ue+(a.clientX-ve),y:ae+(a.clientY-se)+(_-ge)};g.x=ye.x,g.y=ye.y,g.paddingLeft=N,g.mousePos=X,g.startMousePos=G,p.props.setDragProgress(X,g);var Oe=n?p.handleDrag(g,a,o):!1;Oe||a.preventDefault&&a.preventDefault()}},p.onDragEnd=function(){var a=p.props.dragStart.treeEl;p.props.setDragEnd(),a.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),p._cacheEls={};var n=p.eventTarget||p._getEventTarget();n.removeEventListener("mousemove",p.onDrag),n.removeEventListener("mouseup",p.onDragEnd)},(0,w.useOnPropsChanged)((0,P.default)(p)),p.onPropsChanged(y),p}return(0,T.default)(f,[{key:"onPropsChanged",value:function(p){this.tree=(0,D.getFlatTree)(p.tree)}},{key:"shouldComponentUpdate",value:function(p,a){var n=this.props,g=this.state,d=(0,w.pureShouldComponentUpdate)(this)(p,a);if(d&&g==a&&n!=p){var N=[];for(var W in p){var _=p[W]!=n[W];_&&W!="dragging"&&W!="mousePos"&&N.push(W)}N.length||(d=!1)}return d}},{key:"componentDidUpdate",value:function(p,a){var n=this.props.dragging,g=this.props.dragStart;if(i._isReorderingTree=J=!1,g&&g.id&&(n.itemInfo=this.tree.items[n.id],n.itemInfo&&(n.itemInfo.index!=g.itemInfo.index||n.itemInfo.parent!=g.itemInfo.parent))){var d=g.treeEl,N=g.treeElContainer,W=this._getPlaceholderNodeEl(d,!0);if(W){var _=W.getBoundingClientRect().left+window.scrollX,X=W.getBoundingClientRect().top+window.scrollY,G=g.plX,z=g.plY,K=N.scrollTop;g.plX=_,g.plY=X,g.itemInfo=(0,$.default)(n.itemInfo),g.y=W.offsetTop,g.x=W.offsetLeft,g.clientY+=X-z,g.clientX+=_-G,N!=document.body&&(g.scrollTop=K),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a==null)return null;this._cacheEls||(this._cacheEls={});var g=this._cacheEls[a];return g&&document.contains(g)&&!n||(g=p.querySelector('.group-or-rule-container[data-id="'+a+'"]'),this._cacheEls[a]=g),g}},{key:"_getDraggableNodeEl",value:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var n=this._cacheEls.draggable;if(n&&document.contains(n)&&!a)return n;var g=p.getElementsByClassName("qb-draggable");return n=g.length?g[0]:null,this._cacheEls.draggable=n,n}},{key:"_getPlaceholderNodeEl",value:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var n=this._cacheEls.placeholder;if(n&&document.contains(n)&&!a)return n;var g=p.getElementsByClassName("qb-placeholder");return n=g.length?g[0]:null,this._cacheEls.placeholder=n,n}},{key:"_isScrollable",value:function(p){var a=window.getComputedStyle(p)["overflow-y"];return(a==="scroll"||a==="auto")&&p.scrollHeight>p.offsetHeight}},{key:"_getScrollParent",value:function(p){return p==null?null:p===document.body||this._isScrollable(p)?p:this._getScrollParent(p.parentNode)}},{key:"handleDrag",value:function(p,a,n){var g=this,d=!0,N=p.itemInfo,W=p.paddingLeft,_=null,X=this.props.dragStart.treeEl,G=p.id,z=this._getDraggableNodeEl(X),K=this._getPlaceholderNodeEl(X),Y,re,ne,ue;if(z&&K){if(Y=z.getBoundingClientRect(),re=K.getBoundingClientRect(),!re.width)return;var ae={hrz:0,vrt:0};Y.top<re.top?ae.vrt=-1:Y.bottom>re.bottom&&(ae.vrt=1),Y.left>re.left?ae.hrz=1:Y.left<re.left&&(ae.hrz=-1),ue=X.getBoundingClientRect();var ve={x:ue.left+(ue.right-ue.left)/2,y:ae.vrt>=0?Y.bottom:Y.top},se;if(a.__mocked_hov_container)se=a.__mocked_hov_container;else{var ge=document.elementFromPoint(ve.x,ve.y-1);if(se=ge?ge.closest(".group-or-rule-container"):null,!se&&ge&&ge.classList.contains("query-builder-container")){var ye,Oe=ge==null||(ye=ge.firstChild)===null||ye===void 0?void 0:ye.firstChild;Oe&&Oe.classList.contains("group-or-rule-container")&&(se=Oe)}}if(!se)F.logger.log("out of tree bounds!");else{var Se=se.classList.contains("group-container"),ce=se.getAttribute("data-id"),Ne=se,we=!1,je=!1;if(Ne){ne=Ne.getBoundingClientRect();var Ke=ne.bottom-ne.top,Ye=this.tree.items[ce],ke=null,at=null,He=null,fe=null;if(ae.vrt==0)He=N,at=K,at&&(ke=at.getBoundingClientRect());else if(Se){if(ae.vrt>0){var Ee=se.getElementsByClassName("group--header"),Ce=Ee.length?Ee[0]:null;if(Ce){var Fe=Ce.getBoundingClientRect(),De=Fe.bottom-Fe.top,Me=Y.bottom-Fe.top>De*3/4;Me&&Ye.top>p.itemInfo.top&&(He=Ye,ke=Fe,at=Ce,je=!0)}}else if(ae.vrt<0&&Ye.lev>=N.lev){var Ae=ne.bottom-Y.top>=2;Ae&&Ye.top<p.itemInfo.top&&(He=Ye,ke=ne,at=Ne,we=!0)}if(!je&&!we||d){var $e=ae.vrt<0?ne.bottom-Y.top>Ke-5:Y.bottom-ne.top>Ke-5;$e&&(!je&&!we&&(He=Ye,ke=ne,at=Ne),d&&(fe=Ye))}}else{var rt=ae.vrt<0?ne.bottom-Y.top>Ke/2:Y.bottom-ne.top>Ke/2;rt&&(He=Ye,ke=ne,at=Ne)}var it=He&&He.id==G;if(ke){var Qe=Y.left-ue.left,lt=ke.left-ue.left,ct=lt/W,Ze=Math.max(0,Math.round(Qe/W)),gt=[],pe=[];if(!it){if(Se&&(we?gt.push([L.PLACEMENT_APPEND,He,He.lev+1]):je&&gt.push([L.PLACEMENT_PREPEND,He,He.lev+1]),d&&fe)){var he=fe.lev==0,Le=fe.type=="case_group"&&N.type!="case_group",Pe=fe.prev&&this.tree.items[fe.prev].caseId,Ve=fe.next&&this.tree.items[fe.next].caseId;N.caseId==Pe&&(Pe=null),N.caseId==Ve&&(Ve=null);var Ge=Pe&&this.tree.items[Pe],xe=Ve&&this.tree.items[Ve];ae.vrt>0?he?pe.push([L.PLACEMENT_APPEND,fe,fe.lev+1]):Le&&xe?pe.push([L.PLACEMENT_PREPEND,xe,xe.lev+1]):pe.push([L.PLACEMENT_AFTER,fe,fe.lev]):ae.vrt<0&&(he?pe.push([L.PLACEMENT_PREPEND,fe,fe.lev+1]):Le&&Ge?pe.push([L.PLACEMENT_APPEND,Ge,Ge.lev+1]):pe.push([L.PLACEMENT_BEFORE,fe,fe.lev]))}!we&&!je&&(ae.vrt<0?gt.push([L.PLACEMENT_BEFORE,He,He.lev]):ae.vrt>0&&gt.push([L.PLACEMENT_AFTER,He,He.lev]))}var et=function(Xe){var nt=Xe[1],ze=N.caseId?g.tree.items[N.caseId]:null,_e=nt.caseId?g.tree.items[nt.caseId]:null;return[].concat((0,M.default)(Xe),[ze,_e])};gt=gt.map(et),pe=pe.map(et),gt=gt.filter(function(be){var Xe=be[0],nt=be[1];if((Xe==L.PLACEMENT_BEFORE||Xe==L.PLACEMENT_AFTER)&&nt.parent==null||nt.collapsed&&(Xe==L.PLACEMENT_APPEND||Xe==L.PLACEMENT_PREPEND))return!1;var ze=nt.id==N.id;if(!ze){for(var _e=nt;_e.parent;)if(_e=g.tree.items[_e.parent],_e.id==N.id){ze=!0;break}}return!ze}).map(function(be){var Xe=be[0],nt=be[1],ze=be[2],_e=be[3],dt=be[4],mt=null;return Xe==L.PLACEMENT_APPEND||Xe==L.PLACEMENT_PREPEND?mt=nt:mt=g.tree.items[nt.parent],mt&&mt.parent==null&&(mt=null),be[5]=mt,be});var We=null,Be=gt.filter(function(be){return g.canMove(N,be[1],be[0],be[3],be[4],be[5],n)});d&&Be.length==0&&pe.length>0&&(Be=pe.filter(function(be){return g.canMove(N,be[1],be[0],be[3],be[4],be[5],n)}));var ft=Be.map(function(be){return be[2]}),st=N.lev,pt=ft.concat(st),ut=null;pt.indexOf(Ze)!=-1?ut=Ze:Ze>Math.max.apply(Math,(0,M.default)(pt))?ut=Math.max.apply(Math,(0,M.default)(pt)):Ze<Math.min.apply(Math,(0,M.default)(pt))&&(ut=Math.min.apply(Math,(0,M.default)(pt))),We=Be.find(function(be){return be[2]==ut}),!it&&!We&&Be.length&&(We=Be[0]),_=We}}}}return _?(this.move(N,_[1],_[0],_[3]),!0):!1}},{key:"canMove",value:function(p,a,n,g,d,N,W){if(!p||!a||p.id===a.id)return!1;var _=this.props.config.settings,X=_.canRegroup,G=_.canRegroupCases,z=_.maxNesting,K=_.maxNumberOfRules,Y=_.canLeaveEmptyCase,re=N?N.lev+1:a.lev,ne=n==L.PLACEMENT_BEFORE||n==L.PLACEMENT_AFTER,ue=n==L.PLACEMENT_PREPEND||n==L.PLACEMENT_APPEND,ae=ne&&a.lev==1||ue&&a.lev==0,ve=p.parent!=a.parent,se=ue||ve,ge=p.type=="case_group"&&!ae||p.parentType=="rule_group"||a.type=="rule_group"||a.parentType=="rule_group"||p.type!="case_group"&&a.type=="case_group"&&ne||p.type!="case_group"&&a.type=="switch_group"||!G&&p.caseId!=a.caseId,ye=a.isLocked||p.isLocked||N&&N.isLocked;if(z&&re>z||se&&(!X||ge||ye))return!1;if(p.type!="case_group"&&p.caseId!=a.caseId){var Oe=g?g._height==2:!1,Se=d?d.leafsCount+1:0;if(K&&Se>K||Oe&&!Y)return!1}if(p.type=="case_group"&&(p.isDefaultCase||a.isDefaultCase||a.type=="switch_group"&&n==L.PLACEMENT_APPEND))return!1;var ce=!0;return W&&(ce=W(p.node.toJS(),a.node.toJS(),n,N?N.node.toJS():null)),ce}},{key:"move",value:function(p,a,n,g){this._isUsingLegacyReactDomRender||(i._isReorderingTree=J=!0),this.props.actions.moveItem(p.path,a.path,n)}},{key:"render",value:function(){return O.default.createElement(s,(0,m.default)({},this.props,{onDragStart:this.onDragStart}))}}]),f}(O.Component),c.propTypes={tree:j.default.any.isRequired,actions:j.default.object.isRequired},c},R=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=(0,b.connect)(function(u){return{dragging:u.dragging,dragStart:u.dragStart,mousePos:u.mousePos}},{setDragStart:V.drag.setDragStart,setDragProgress:V.drag.setDragProgress,setDragEnd:V.drag.setDragEnd},null,{context:U.default})(k(s,c));return o.displayName="ConnectedSortableContainer",o};i.default=R},99224:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(92476)),m=r(e(86067)),M=r(e(85091)),I=r(e(80467)),T=r(e(36610)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=r(e(66111)),O=r(e(59160)),b=r(e(80742)),D=r(e(15920)),F=e(65801),U=e(57184),L=e(9701),$=e(48281),j=r(e(33753)),V,w,x;function H(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function Z(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?H(Object(o),!0).forEach(function(u){(0,E.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function ee(s){var c=J();return function(){var u=(0,C.default)(s),l;if(c){var f=(0,C.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,S.default)(this,l)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=e(23019),R=(V=(0,D.default)("group case_group"),(0,b.default)(w=V(w=(0,$.ConfirmFn)(w=(x=function(s){(0,P.default)(o,s);var c=ee(o);function o(u){var l;return(0,m.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return"case_group--children"},l.renderFooterWrapper=function(){return null},(0,L.useOnPropsChanged)((0,I.default)(l)),l.onPropsChanged(u),l}return(0,M.default)(o,[{key:"onPropsChanged",value:function(l){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:(0,T.default)((0,C.default)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return A.default.createElement("div",{key:"group-header",className:k("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:A.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var l=this.props.config.settings.defaultCaseLabel;return l||""}return A.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,T.default)((0,C.default)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:(0,T.default)((0,C.default)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:(0,T.default)((0,C.default)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var l=this.props,f=l.config,y=l.isLocked,p=l.value,a=l.setValue,n=l.id,g=f.settings.immutableValuesMode,d=A.default.createElement(j.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:p,valueSrc:"value",valueError:null,config:f,setValue:g?$.dummyFn:a,setValueSrc:$.dummyFn,readonly:g||y,id:n,groupId:null});return A.default.createElement($.Col,{className:"case_group--value"},d)}},{key:"renderActions",value:function(){var l=this.props,f=l.config,y=l.addGroup,p=l.addRule,a=l.isLocked,n=l.isTrueLocked,g=l.id;return A.default.createElement(U.GroupActions,{config:f,addGroup:y,addRule:p,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:g})}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.value,f=l&&l.size?l.get(0):null,y=f!=null&&(Array.isArray(f)?f.length>0:!0);return(0,T.default)((0,C.default)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!y}}]),o}(F.BasicGroup),x.propTypes=Z(Z({},F.BasicGroup.propTypes),{},{parentReordableNodesCnt:O.default.number,value:O.default.any,setValue:O.default.func}),x))||w)||w)||w),h=R;i.default=h},65801:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BasicGroup=void 0;var m=r(e(68307)),M=r(e(92476)),I=r(e(86067)),T=r(e(85091)),P=r(e(80467)),S=r(e(72366)),C=r(e(64920)),A=r(e(39005)),O=w(e(66111)),b=r(e(59160)),D=r(e(94738)),F=r(e(80742)),U=r(e(15920)),L=e(75002),$=e(57184),j=e(48281);function V(s){if(typeof WeakMap!="function")return null;var c=new WeakMap,o=new WeakMap;return(V=function(l){return l?o:c})(s)}function w(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||E(s)!=="object"&&typeof s!="function")return{default:s};var o=V(c);if(o&&o.has(s))return o.get(s);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var y=l?Object.getOwnPropertyDescriptor(s,f):null;y&&(y.get||y.set)?Object.defineProperty(u,f,y):u[f]=s[f]}return u.default=s,o&&o.set(s,u),u}function x(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function H(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?x(Object(o),!0).forEach(function(u){(0,M.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function Z(s){var c=ee();return function(){var u=(0,A.default)(s),l;if(c){var f=(0,A.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,C.default)(this,l)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k="topRight",R=function(s){(0,S.default)(o,s);var c=Z(o);function o(u){var l;return(0,I.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return""},l.renderBeforeActions=function(){var f=l.props.config.settings.renderBeforeActions;return f==null?null:typeof f=="function"?O.default.createElement(f,l.props):f},l.renderAfterActions=function(){var f=l.props.config.settings.renderAfterActions;return f==null?null:typeof f=="function"?O.default.createElement(f,l.props):f},l.removeSelf=l.removeSelf.bind((0,P.default)(l)),l.setLock=l.setLock.bind((0,P.default)(l)),l.renderItem=l.renderItem.bind((0,P.default)(l)),l}return(0,T.default)(o,[{key:"isGroupTopPosition",value:function(){return(0,D.default)(this.props.config.settings.groupActionsPosition||k,"top")}},{key:"setLock",value:function(l){this.props.setLock(l)}},{key:"removeSelf",value:function(){var l=this,f=this.props.confirmFn,y=this.props.config.settings,p=y.renderConfirm,a=y.removeGroupConfirmOptions,n=function(){l.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?p(H(H({},a),{},{onOk:n,onCancel:null,confirmFn:f})):n()}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.children1;return!l||l.size==0||l.size==1&&this.isEmpty(l.first())}},{key:"isEmpty",value:function(l){var f=l.get("type")=="group"||l.get("type")=="rule_group";return f?this.isEmptyGroup(l):this.isEmptyRule(l)}},{key:"isEmptyGroup",value:function(l){var f=l.get("children1");return!f||f.size==0||f.size==1&&this.isEmpty(f.first())}},{key:"isEmptyRule",value:function(l){var f=l.get("properties");return!(f.get("field")!==null&&f.get("operator")!==null&&f.get("value").filter(function(y){return y!==void 0}).size>0)}},{key:"render",value:function(){return O.default.createElement(O.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var l=this.props.config;return l.settings.showNot}},{key:"showConjs",value:function(){var l=this.props,f=l.conjunctionOptions,y=l.children1,p=l.config,a=Object.keys(f).length;return a>1||this.showNot()}},{key:"isOneChild",value:function(){var l=this.props.children1;return l?l.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var l=this.props.children1;return l&&O.default.createElement("div",{key:"group-children",className:J("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var l=this.isGroupTopPosition();return O.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),l&&this.renderBeforeActions(),l&&this.renderActions(),l&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var l=this.isGroupTopPosition();return!l&&O.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var l=this.props,f=l.config,y=l.addRule,p=l.addGroup,a=l.isLocked,n=l.isTrueLocked,g=l.id;return O.default.createElement($.GroupActions,{config:f,addRule:y,addGroup:p,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:g})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var l=this.props.config.settings.maxNumberOfRules,f=this.props.totalRulesCnt;return l?f<l:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var l=this.props.children1;return l?l.map(this.renderItem).toList():null}},{key:"renderItem",value:function(l){var f=this.props,y=f.config,p=f.actions,a=f.onDragStart,n=f.isLocked,g=l.get("type")=="group"&&l.getIn(["properties","field"])!=null,d=g?"rule_group":l.get("type");return O.default.createElement(L.Item,(0,m.default)({},this.extraPropsForItem(l),{key:l.get("id"),id:l.get("id"),groupId:f.id,path:l.get("path"),type:d,properties:l.get("properties"),config:y,actions:p,children1:l.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(l),totalRulesCnt:this.totalRulesCntForItem(l),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:a,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:n}))}},{key:"extraPropsForItem",value:function(l){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var l=this.props,f=l.config,y=l.isRoot,p=l.isLocked,a=this.reordableNodesCnt();return f.settings.canReorder&&!y&&a>1&&!p}},{key:"renderDrag",value:function(){var l=this.props.handleDraggerMouseDown,f=this.showDragIcon()&&O.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:l},O.default.createElement(j.DragIcon,null)," ");return f}},{key:"conjunctionOptions",value:function(){var l=this.props.conjunctionOptions;return l}},{key:"renderConjs",value:function(){var l=this.props,f=l.config,y=l.children1,p=l.id,a=l.selectedConjunction,n=l.setConjunction,g=l.not,d=l.setNot,N=l.isLocked,W=f.settings,_=W.immutableGroupsMode,X=W.renderConjs,G=W.showNot,z=W.notLabel,K=this.conjunctionOptions();if(!this.showConjs()||!y||!y.size)return null;var Y={disabled:this.isOneChild(),readonly:_||N,selectedConjunction:a,setConjunction:_?j.dummyFn:n,conjunctionOptions:K,config:f,not:g||!1,id:p,setNot:_?j.dummyFn:d,notLabel:z,showNot:this.showNot(),isLocked:N};return O.default.createElement(X,Y)}},{key:"renderHeader",value:function(){return O.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(O.PureComponent);i.BasicGroup=R,R.propTypes={reordableNodesCnt:b.default.number,conjunctionOptions:b.default.object.isRequired,allowFurtherNesting:b.default.bool.isRequired,isRoot:b.default.bool.isRequired,not:b.default.bool,selectedConjunction:b.default.string,config:b.default.object.isRequired,id:b.default.string.isRequired,groupId:b.default.string,path:b.default.any,children1:b.default.any,isDraggingMe:b.default.bool,isDraggingTempo:b.default.bool,isLocked:b.default.bool,isTrueLocked:b.default.bool,handleDraggerMouseDown:b.default.func,onDragStart:b.default.func,addRule:b.default.func.isRequired,addGroup:b.default.func.isRequired,removeSelf:b.default.func.isRequired,setConjunction:b.default.func.isRequired,setNot:b.default.func.isRequired,setLock:b.default.func.isRequired,actions:b.default.object.isRequired};var h=(0,F.default)((0,U.default)("group")((0,j.ConfirmFn)(R)));i.default=h},57184:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.GroupActions=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=A(e(66111));function C(L){if(typeof WeakMap!="function")return null;var $=new WeakMap,j=new WeakMap;return(C=function(w){return w?j:$})(L)}function A(L,$){if(!$&&L&&L.__esModule)return L;if(L===null||E(L)!=="object"&&typeof L!="function")return{default:L};var j=C($);if(j&&j.has(L))return j.get(L);var V={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in L)if(x!=="default"&&Object.prototype.hasOwnProperty.call(L,x)){var H=w?Object.getOwnPropertyDescriptor(L,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=L[x]}return V.default=L,j&&j.set(L,V),V}function O(L){var $=b();return function(){var V=(0,P.default)(L),w;if($){var x=(0,P.default)(this).constructor;w=Reflect.construct(V,arguments,x)}else w=V.apply(this,arguments);return(0,T.default)(this,w)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},F="topRight",U=function(L){(0,I.default)(j,L);var $=O(j);function j(){return(0,m.default)(this,j),$.apply(this,arguments)}return(0,M.default)(j,[{key:"render",value:function(){var w=this.props,x=w.config,H=w.addRule,Z=w.addGroup,ee=w.removeSelf,J=w.setLock,k=w.isLocked,R=w.isTrueLocked,h=w.id,s=w.canAddGroup,c=w.canAddRule,o=w.canDeleteGroup,u=x.settings,l=u.immutableGroupsMode,f=u.addRuleLabel,y=u.addGroupLabel,p=u.delGroupLabel,a=u.groupActionsPosition,n=u.renderButton,g=u.renderSwitch,d=u.renderButtonGroup,N=u.lockLabel,W=u.lockedLabel,_=u.showLock,X=u.canDeleteLocked,G=D[a||F],z=_&&!(k&&!R)&&S.default.createElement(g,{type:"lock",id:h,value:k,setValue:J,label:N,checkedLabel:W,config:x}),K=!l&&c&&!k&&S.default.createElement(n,{type:"addRule",onClick:H,label:f,readonly:k,config:x}),Y=!l&&s&&!k&&S.default.createElement(n,{type:"addGroup",onClick:Z,label:y,readonly:k,config:x}),re=!l&&o&&(!k||k&&X)&&S.default.createElement(n,{type:"delGroup",onClick:ee,label:p,config:x});return S.default.createElement("div",{className:"group--actions ".concat(G)},S.default.createElement(d,{config:x},z,K,Y,re))}}]),j}(S.PureComponent);i.GroupActions=U},75002:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.Item=void 0;var m=r(e(19934)),M=r(e(86067)),I=r(e(85091)),T=r(e(72366)),P=r(e(64920)),S=r(e(39005)),C=r(e(68307)),A=r(e(92476)),O=x(e(66111)),b=r(e(59160)),D=r(e(34773)),F=r(e(65801)),U=r(e(98011)),L=r(e(43219)),$=r(e(74481)),j=r(e(99224)),V=["type"];function w(c){if(typeof WeakMap!="function")return null;var o=new WeakMap,u=new WeakMap;return(w=function(f){return f?u:o})(c)}function x(c,o){if(!o&&c&&c.__esModule)return c;if(c===null||E(c)!=="object"&&typeof c!="function")return{default:c};var u=w(o);if(u&&u.has(c))return u.get(c);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in c)if(y!=="default"&&Object.prototype.hasOwnProperty.call(c,y)){var p=f?Object.getOwnPropertyDescriptor(c,y):null;p&&(p.get||p.set)?Object.defineProperty(l,y,p):l[y]=c[y]}return l.default=c,u&&u.set(c,l),l}function H(c){var o=Z();return function(){var l=(0,S.default)(c),f;if(o){var y=(0,S.default)(this).constructor;f=Reflect.construct(l,arguments,y)}else f=l.apply(this,arguments);return(0,P.default)(this,f)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ee(c,o){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(c);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),u.push.apply(u,l)}return u}function J(c){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?ee(Object(u),!0).forEach(function(l){(0,A.default)(c,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):ee(Object(u)).forEach(function(l){Object.defineProperty(c,l,Object.getOwnPropertyDescriptor(u,l))})}return c}var k=["rule","group","rule_group","switch_group","case_group"],R=function(o){var u=o.properties.toObject(),l=J({},u);return o.isParentLocked&&(l.isLocked=!0),u.isLocked&&(l.isTrueLocked=!0),l},h={rule:function(o){return O.default.createElement(D.default,(0,C.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,config:o.config,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},group:function(o){return O.default.createElement(F.default,(0,C.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group:function(o){return O.default.createElement(U.default,(0,C.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group_ext:function(o){return O.default.createElement(L.default,(0,C.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},switch_group:function(o){return O.default.createElement($.default,(0,C.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},case_group:function(o){return O.default.createElement(j.default,(0,C.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))}},s=function(c){(0,T.default)(u,c);var o=H(u);function u(){return(0,M.default)(this,u),o.apply(this,arguments)}return(0,I.default)(u,[{key:"render",value:function(){var f=this.props,y=f.type,p=(0,m.default)(f,V),a=p.properties.get("mode"),n=a=="array"?"_ext":"",g=p.config.settings.renderItem,d=h[y+n];return g?g(J(J({},p),{},{type:y,itemComponent:d})):d?d(p):null}}]),u}(O.PureComponent);i.Item=s,s.propTypes={config:b.default.object.isRequired,id:b.default.string.isRequired,groupId:b.default.string,type:b.default.oneOf(k).isRequired,path:b.default.any.isRequired,properties:b.default.any.isRequired,children1:b.default.any,actions:b.default.object.isRequired,reordableNodesCnt:b.default.number,onDragStart:b.default.func,parentField:b.default.string,isDraggingTempo:b.default.bool,isParentLocked:b.default.bool}},34773:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(92476)),M=r(e(86067)),I=r(e(85091)),T=r(e(80467)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=k(e(66111)),O=r(e(59160)),b=r(e(6677)),D=r(e(15920)),F=r(e(64078)),U=r(e(35205)),L=r(e(33753)),$=r(e(65971)),j=e(79746),V=e(62413),w=e(9701),x=e(48281),H,Z,ee;function J(f){if(typeof WeakMap!="function")return null;var y=new WeakMap,p=new WeakMap;return(J=function(n){return n?p:y})(f)}function k(f,y){if(!y&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var p=J(y);if(p&&p.has(f))return p.get(f);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in f)if(g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)){var d=n?Object.getOwnPropertyDescriptor(f,g):null;d&&(d.get||d.set)?Object.defineProperty(a,g,d):a[g]=f[g]}return a.default=f,p&&p.set(f,a),a}function R(f,y){var p=Object.keys(f);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(f);y&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(f,n).enumerable})),p.push.apply(p,a)}return p}function h(f){for(var y=1;y<arguments.length;y++){var p=arguments[y]!=null?arguments[y]:{};y%2?R(Object(p),!0).forEach(function(a){(0,m.default)(f,a,p[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):R(Object(p)).forEach(function(a){Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(p,a))})}return f}function s(f){var y=c();return function(){var a=(0,C.default)(f),n;if(y){var g=(0,C.default)(this).constructor;n=Reflect.construct(a,arguments,g)}else n=a.apply(this,arguments);return(0,S.default)(this,n)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var o=e(23019),u=(H=(0,D.default)("rule"),(0,b.default)(Z=H(Z=(0,x.ConfirmFn)(Z=(ee=function(f){(0,P.default)(p,f);var y=s(p);function p(a){var n;return(0,M.default)(this,p),n=y.call(this,a),(0,w.useOnPropsChanged)((0,T.default)(n)),n.removeSelf=n.removeSelf.bind((0,T.default)(n)),n.setLock=n.setLock.bind((0,T.default)(n)),n.onPropsChanged(a),n}return(0,I.default)(p,[{key:"onPropsChanged",value:function(n){var g=this.props,d=["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"],N=!this.meta||d.map(function(W){return n[W]!==g[W]}).filter(function(W){return W}).length>0;N&&(this.meta=this.getMeta(n))}},{key:"getMeta",value:function(n){var g=n.selectedField,d=n.selectedOperator,N=n.config,W=n.reordableNodesCnt,_=n.isLocked,X=(0,V.getFieldPathLabels)(g,N),G=(0,j.getFieldConfig)(N,g),z=G&&G.type=="!struct",K=g&&d&&!z,Y=(0,j.getOperatorConfig)(N,d,g),re=Y&&Y.options!=null,ne=(0,j.getFieldWidgetConfig)(N,g,d)||{},ue=ne.hideOperator,ae=N.settings.canReorder&&W>1&&!_,ve=g&&!ue,se=g&&ue&&ne.operatorInlineLabel,ge=K,ye=K&&re;return{selectedFieldPartsLabels:X,selectedFieldWidgetConfig:ne,showDragIcon:ae,showOperator:ve,showOperatorLabel:se,showWidget:ge,showOperatorOptions:ye}}},{key:"setLock",value:function(n){this.props.setLock(n)}},{key:"removeSelf",value:function(){var n=this,g=this.props.confirmFn,d=this.props.config.settings,N=d.renderConfirm,W=d.removeRuleConfirmOptions,_=function(){n.props.removeSelf()};W&&!this.isEmptyCurrentRule()?N(h(h({},W),{},{onOk:_,onCancel:null,confirmFn:g})):_()}},{key:"isEmptyCurrentRule",value:function(){return!(this.props.selectedField!==null&&this.props.selectedOperator!==null&&this.props.value.filter(function(n){return n!==void 0}).size>0)}},{key:"renderField",value:function(){var n=this.props,g=n.config,d=n.isLocked,N=g.settings.immutableFieldsMode;return A.default.createElement(U.default,{key:"field",classname:"rule--field",config:g,selectedField:this.props.selectedField,setField:N?x.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:N||d,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var n=this.props,g=n.config,d=n.isLocked,N=this.meta,W=N.selectedFieldPartsLabels,_=N.selectedFieldWidgetConfig,X=N.showOperator,G=N.showOperatorLabel,z=g.settings.immutableOpsMode;return A.default.createElement(F.default,{key:"operator",config:g,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:z?x.dummyFn:this.props.setOperator,selectedFieldPartsLabels:W,showOperator:X,showOperatorLabel:G,selectedFieldWidgetConfig:_,readonly:z||d,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var n=this.props,g=n.config,d=n.valueError,N=n.isLocked,W=this.meta.showWidget,_=g.settings.immutableValuesMode;if(!W)return null;var X=A.default.createElement(L.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:d,config:g,setValue:_?x.dummyFn:this.props.setValue,setValueSrc:_?x.dummyFn:this.props.setValueSrc,readonly:_||N,id:this.props.id,groupId:this.props.groupId});return A.default.createElement(x.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},X)}},{key:"renderOperatorOptions",value:function(){var n=this.props.config,g=this.meta.showOperatorOptions,d=n.settings,N=d.immutableOpsMode,W=d.immutableValuesMode;if(!g)return null;var _=A.default.createElement($.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:N?x.dummyFn:this.props.setOperatorOption,config:n,readonly:W});return A.default.createElement(x.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},_)}},{key:"renderBeforeWidget",value:function(){var n=this.props.config,g=n.settings.renderBeforeWidget;return g&&A.default.createElement(x.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof g=="function"?g(this.props):g)}},{key:"renderAfterWidget",value:function(){var n=this.props.config,g=n.settings.renderAfterWidget;return g&&A.default.createElement(x.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof g=="function"?g(this.props):g)}},{key:"renderError",value:function(){var n=this.props,g=n.config,d=n.valueError,N=g.settings,W=N.renderRuleError,_=N.showErrorMessage,X=d&&d.toArray().filter(function(G){return!!G}).shift()||null;return _&&X&&A.default.createElement("div",{className:"rule--error"},W?W({error:X}):X)}},{key:"renderDrag",value:function(){var n=this.meta.showDragIcon;return n&&A.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},A.default.createElement(x.DragIcon,null)," ")}},{key:"renderDel",value:function(){var n=this.props,g=n.config,d=n.isLocked,N=g.settings,W=N.deleteLabel,_=N.immutableGroupsMode,X=N.renderButton,G=N.canDeleteLocked;return!_&&(!d||d&&G)&&A.default.createElement(X,{type:"delRule",onClick:this.removeSelf,label:W,config:g})}},{key:"renderLock",value:function(){var n=this.props,g=n.config,d=n.isLocked,N=n.isTrueLocked,W=n.id,_=g.settings,X=_.lockLabel,G=_.lockedLabel,z=_.showLock,K=_.renderSwitch;return z&&!(d&&!N)&&A.default.createElement(K,{type:"lock",id:W,value:d,setValue:this.setLock,label:X,checkedLabel:G,hideLabel:!0,config:g})}},{key:"render",value:function(){var n=this.meta,g=n.showOperatorOptions,d=n.selectedFieldWidgetConfig,N=this.props,W=N.valueSrc,_=N.value,X=N.config,G=W.first()=="value"&&!g&&_.size==1&&d.fullWidth,z=X.settings.renderButtonGroup,K=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],Y=A.default.createElement("div",{key:"rule-body",className:o("rule--body",G&&"can--shrink--value")},K),re=this.renderError(),ne=this.renderDrag(),ue=this.renderLock(),ae=this.renderDel();return A.default.createElement(A.default.Fragment,null,ne,A.default.createElement("div",{className:"rule--body--wrapper"},Y,re),A.default.createElement("div",{className:"rule--header"},A.default.createElement(z,{config:X},ue,ae)))}}]),p}(A.PureComponent),ee.propTypes={id:O.default.string.isRequired,groupId:O.default.string,selectedField:O.default.string,selectedOperator:O.default.string,operatorOptions:O.default.object,config:O.default.object.isRequired,value:O.default.any,valueSrc:O.default.any,asyncListValues:O.default.array,isDraggingMe:O.default.bool,isDraggingTempo:O.default.bool,parentField:O.default.string,valueError:O.default.any,isLocked:O.default.bool,isTrueLocked:O.default.bool,handleDraggerMouseDown:O.default.func,setField:O.default.func,setOperator:O.default.func,setOperatorOption:O.default.func,setLock:O.default.func,removeSelf:O.default.func,setValue:O.default.func,setValueSrc:O.default.func,reordableNodesCnt:O.default.number},ee))||Z)||Z)||Z),l=u;i.default=l},98011:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(92476)),m=r(e(86067)),M=r(e(85091)),I=r(e(80467)),T=r(e(36610)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=r(e(66111)),O=r(e(59160)),b=r(e(80742)),D=r(e(15920)),F=e(65801),U=e(92161),L=r(e(35205)),$=e(9701),j=e(48281),V,w,x;function H(h,s){var c=Object.keys(h);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(h);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),c.push.apply(c,o)}return c}function Z(h){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?H(Object(c),!0).forEach(function(o){(0,E.default)(h,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(c)):H(Object(c)).forEach(function(o){Object.defineProperty(h,o,Object.getOwnPropertyDescriptor(c,o))})}return h}function ee(h){var s=J();return function(){var o=(0,C.default)(h),u;if(s){var l=(0,C.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,S.default)(this,u)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=(V=(0,D.default)("group rule_group"),(0,b.default)(w=V(w=(0,j.ConfirmFn)(w=(x=function(h){(0,P.default)(c,h);var s=ee(c);function c(o){var u;return(0,m.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"rule_group--children"},u.renderHeaderWrapper=function(){return null},u.renderFooterWrapper=function(){return null},u.renderConjs=function(){return null},u.canAddGroup=function(){return!1},u.canAddRule=function(){return!0},u.canDeleteGroup=function(){return!1},(0,$.useOnPropsChanged)((0,I.default)(u)),u.onPropsChanged(o),u}return(0,M.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.children1;return l.size}},{key:"renderChildrenWrapper",value:function(){return A.default.createElement(A.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,T.default)((0,C.default)(c.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var u=this.props,l=u.config,f=u.selectedField,y=u.setField,p=u.parentField,a=u.id,n=u.groupId,g=u.isLocked,d=l.settings.immutableFieldsMode;return A.default.createElement(L.default,{key:"field",classname:"group--field",config:l,selectedField:f,setField:y,parentField:p,readonly:d||g,id:a,groupId:n})}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addRule,y=u.isLocked,p=u.isTrueLocked,a=u.id;return A.default.createElement(U.RuleGroupActions,{config:l,addRule:f,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:y,isTrueLocked:p,id:a})}},{key:"extraPropsForItem",value:function(u){return{parentField:this.props.selectedField}}}]),c}(F.BasicGroup),x.propTypes=Z(Z({},F.BasicGroup.propTypes),{},{selectedField:O.default.string,parentField:O.default.string,setField:O.default.func}),x))||w)||w)||w),R=k;i.default=R},92161:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupActions=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=A(e(66111));function C(F){if(typeof WeakMap!="function")return null;var U=new WeakMap,L=new WeakMap;return(C=function(j){return j?L:U})(F)}function A(F,U){if(!U&&F&&F.__esModule)return F;if(F===null||E(F)!=="object"&&typeof F!="function")return{default:F};var L=C(U);if(L&&L.has(F))return L.get(F);var $={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in F)if(V!=="default"&&Object.prototype.hasOwnProperty.call(F,V)){var w=j?Object.getOwnPropertyDescriptor(F,V):null;w&&(w.get||w.set)?Object.defineProperty($,V,w):$[V]=F[V]}return $.default=F,L&&L.set(F,$),$}function O(F){var U=b();return function(){var $=(0,P.default)(F),j;if(U){var V=(0,P.default)(this).constructor;j=Reflect.construct($,arguments,V)}else j=$.apply(this,arguments);return(0,T.default)(this,j)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D=function(F){(0,I.default)(L,F);var U=O(L);function L(){return(0,m.default)(this,L),U.apply(this,arguments)}return(0,M.default)(L,[{key:"render",value:function(){var j=this.props,V=j.config,w=j.addRule,x=j.canAddRule,H=j.canDeleteGroup,Z=j.removeSelf,ee=j.setLock,J=j.isLocked,k=j.isTrueLocked,R=j.id,h=V.settings,s=h.immutableGroupsMode,c=h.addRuleLabel,o=h.delGroupLabel,u=h.renderButton,l=h.renderSwitch,f=h.renderButtonGroup,y=h.lockLabel,p=h.lockedLabel,a=h.showLock,n=h.canDeleteLocked,g=a&&!(J&&!k)&&S.default.createElement(l,{type:"lock",id:R,value:J,setValue:ee,label:y,checkedLabel:p,hideLabel:!0,config:V}),d=!s&&x&&!J&&S.default.createElement(u,{type:"addRuleGroup",onClick:w,label:c,readonly:J,config:V}),N=!s&&H&&(!J||J&&n)&&S.default.createElement(u,{type:"delRuleGroup",onClick:Z,label:o,config:V});return S.default.createElement("div",{className:"group--actions"},S.default.createElement(f,{config:V},g,d,N))}}]),L}(S.PureComponent);i.RuleGroupActions=D},43219:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(92476)),m=r(e(86067)),M=r(e(85091)),I=r(e(80467)),T=r(e(36610)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=r(e(66111)),O=r(e(59160)),b=r(e(80742)),D=r(e(15920)),F=e(65801),U=e(38563),L=r(e(35205)),$=r(e(64078)),j=e(9701),V=e(48281),w=e(79746),x=r(e(33753)),H,Z,ee;function J(y,p){var a=Object.keys(y);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(y);p&&(n=n.filter(function(g){return Object.getOwnPropertyDescriptor(y,g).enumerable})),a.push.apply(a,n)}return a}function k(y){for(var p=1;p<arguments.length;p++){var a=arguments[p]!=null?arguments[p]:{};p%2?J(Object(a),!0).forEach(function(n){(0,E.default)(y,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach(function(n){Object.defineProperty(y,n,Object.getOwnPropertyDescriptor(a,n))})}return y}function R(y,p){var a=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!a){if(Array.isArray(y)||(a=h(y))||p&&y&&typeof y.length=="number"){a&&(y=a);var n=0,g=function(){};return{s:g,n:function(){return n>=y.length?{done:!0}:{done:!1,value:y[n++]}},e:function(X){throw X},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,N=!1,W;return{s:function(){a=a.call(y)},n:function(){var X=a.next();return d=X.done,X},e:function(X){N=!0,W=X},f:function(){try{!d&&a.return!=null&&a.return()}finally{if(N)throw W}}}}function h(y,p){if(y){if(typeof y=="string")return s(y,p);var a=Object.prototype.toString.call(y).slice(8,-1);if(a==="Object"&&y.constructor&&(a=y.constructor.name),a==="Map"||a==="Set")return Array.from(y);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(y,p)}}function s(y,p){(p==null||p>y.length)&&(p=y.length);for(var a=0,n=new Array(p);a<p;a++)n[a]=y[a];return n}function c(y){var p=o();return function(){var n=(0,C.default)(y),g;if(p){var d=(0,C.default)(this).constructor;g=Reflect.construct(n,arguments,d)}else g=n.apply(this,arguments);return(0,S.default)(this,g)}}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u=e(23019),l=(H=(0,D.default)("group rule_group_ext"),(0,b.default)(Z=H(Z=(0,V.ConfirmFn)(Z=(ee=function(y){(0,P.default)(a,y);var p=c(a);function a(n){var g;return(0,m.default)(this,a),g=p.call(this,n),g.childrenClassName=function(){return"rule_group_ext--children"},g.renderFooterWrapper=function(){return null},g.canAddGroup=function(){return!1},g.canAddRule=function(){return!0},g.canDeleteGroup=function(){return!0},(0,j.useOnPropsChanged)((0,I.default)(g)),g.onPropsChanged(n),g}return(0,M.default)(a,[{key:"onPropsChanged",value:function(g){}},{key:"renderHeaderWrapper",value:function(){return A.default.createElement("div",{key:"group-header",className:u("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return A.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return A.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var g=this.props,d=g.config,N=g.selectedField,W=g.selectedOperator,_=(0,w.getFieldConfig)(d,N)||{};return _.showNot!=null?_.showNot:d.settings.showNot}},{key:"conjunctionOptions",value:function(){var g=this.props,d=g.config,N=g.selectedField,W=g.selectedOperator,_=(0,w.getFieldConfig)(d,N)||{},X=(0,T.default)((0,C.default)(a.prototype),"conjunctionOptions",this).call(this);if(_.conjunctions){var G={},z=R(_.conjunctions),K;try{for(z.s();!(K=z.n()).done;){var Y=K.value;G[Y]=X[Y]}}catch(re){z.e(re)}finally{z.f()}X=G}return X}},{key:"renderField",value:function(){var g=this.props,d=g.config,N=g.selectedField,W=g.setField,_=g.parentField,X=g.id,G=g.groupId,z=g.isLocked,K=d.settings.immutableFieldsMode;return A.default.createElement(L.default,{key:"field",classname:"rule--field",config:d,selectedField:N,setField:W,parentField:_,readonly:K||z,id:X,groupId:G})}},{key:"renderOperator",value:function(){var g=this.props,d=g.config,N=g.selectedField,W=g.selectedOperator,_=g.setField,X=g.setOperator,G=g.isLocked,z=d.settings.immutableFieldsMode,K=(0,w.getFieldWidgetConfig)(d,N,W)||{},Y=K.hideOperator,re=N&&Y&&K.operatorInlineLabel,ne=N&&!Y;return A.default.createElement($.default,{key:"operator",classname:"group--operator",config:d,selectedField:N,selectedOperator:W,setField:_,setOperator:X,selectedFieldPartsLabels:["group"],showOperator:ne,showOperatorLabel:re,selectedFieldWidgetConfig:K,readonly:z||G,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var g=this.props,d=g.config,N=g.selectedField,W=g.selectedOperator,_=g.isLocked,X=d.settings.immutableValuesMode,G=N&&W,z=G;if(!z)return null;var K=A.default.createElement(x.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:d,setValue:X?V.dummyFn:this.props.setValue,setValueSrc:V.dummyFn,readonly:X||_,id:this.props.id,groupId:this.props.groupId});return A.default.createElement(V.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},K)}},{key:"renderActions",value:function(){var g=this.props,d=g.config,N=g.addRule,W=g.isLocked,_=g.isTrueLocked,X=g.id;return A.default.createElement(U.RuleGroupExtActions,{config:d,addRule:N,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:W,isTrueLocked:_,id:X})}},{key:"reordableNodesCntForItem",value:function(g){if(this.props.isLocked)return 0;var d=this.props.children1;return d.size}},{key:"extraPropsForItem",value:function(g){return{parentField:this.props.selectedField}}}]),a}(F.BasicGroup),ee.propTypes=k(k({},F.BasicGroup.propTypes),{},{selectedField:O.default.string,selectedOperator:O.default.string,value:O.default.any,parentField:O.default.string,setField:O.default.func,setOperator:O.default.func,setValue:O.default.func}),ee))||Z)||Z)||Z),f=l;i.default=f},38563:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupExtActions=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=A(e(66111));function C(F){if(typeof WeakMap!="function")return null;var U=new WeakMap,L=new WeakMap;return(C=function(j){return j?L:U})(F)}function A(F,U){if(!U&&F&&F.__esModule)return F;if(F===null||E(F)!=="object"&&typeof F!="function")return{default:F};var L=C(U);if(L&&L.has(F))return L.get(F);var $={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in F)if(V!=="default"&&Object.prototype.hasOwnProperty.call(F,V)){var w=j?Object.getOwnPropertyDescriptor(F,V):null;w&&(w.get||w.set)?Object.defineProperty($,V,w):$[V]=F[V]}return $.default=F,L&&L.set(F,$),$}function O(F){var U=b();return function(){var $=(0,P.default)(F),j;if(U){var V=(0,P.default)(this).constructor;j=Reflect.construct($,arguments,V)}else j=$.apply(this,arguments);return(0,T.default)(this,j)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D=function(F){(0,I.default)(L,F);var U=O(L);function L(){return(0,m.default)(this,L),U.apply(this,arguments)}return(0,M.default)(L,[{key:"render",value:function(){var j=this.props,V=j.config,w=j.addRule,x=j.canAddRule,H=j.canDeleteGroup,Z=j.removeSelf,ee=j.setLock,J=j.isLocked,k=j.isTrueLocked,R=j.id,h=V.settings,s=h.immutableGroupsMode,c=h.addSubRuleLabel,o=h.delGroupLabel,u=h.renderButton,l=h.renderSwitch,f=h.renderButtonGroup,y=h.lockLabel,p=h.lockedLabel,a=h.showLock,n=h.canDeleteLocked,g=a&&!(J&&!k)&&S.default.createElement(l,{type:"lock",id:R,value:J,setValue:ee,label:y,checkedLabel:p,config:V}),d=!s&&x&&!J&&S.default.createElement(u,{type:"addRuleGroupExt",onClick:w,label:c,readonly:J,config:V}),N=!s&&H&&(!J||J&&n)&&S.default.createElement(u,{type:"delRuleGroup",onClick:Z,label:o,config:V});return S.default.createElement("div",{className:"group--actions group--actions--tr"},S.default.createElement(f,{config:V},g,d,N))}}]),L}(S.PureComponent);i.RuleGroupExtActions=D},74481:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(92476)),m=r(e(86067)),M=r(e(85091)),I=r(e(80467)),T=r(e(72366)),P=r(e(64920)),S=r(e(39005)),C=r(e(66111)),A=r(e(59160)),O=r(e(80742)),b=r(e(15920)),D=e(65801),F=e(9252),U=e(9701),L=e(48281),$=e(31775),j,V,w;function x(h,s){var c=Object.keys(h);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(h);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),c.push.apply(c,o)}return c}function H(h){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?x(Object(c),!0).forEach(function(o){(0,E.default)(h,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(c)):x(Object(c)).forEach(function(o){Object.defineProperty(h,o,Object.getOwnPropertyDescriptor(c,o))})}return h}function Z(h){var s=ee();return function(){var o=(0,S.default)(h),u;if(s){var l=(0,S.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,P.default)(this,u)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k=(j=(0,b.default)("group switch_group"),(0,O.default)(V=j(V=(0,L.ConfirmFn)(V=(w=function(h){(0,T.default)(c,h);var s=Z(c);function c(o){var u;return(0,m.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"switch_group--children"},u.renderFooterWrapper=function(){return null},u.hasDefaultCase=function(){return u.props.children1.size&&u.props.children1.filter(function(l){return l.get("children1")==null}).size>0},(0,U.useOnPropsChanged)((0,I.default)(u)),u.onPropsChanged(o),u}return(0,M.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"canAddGroup",value:function(){var u=this.props.config.settings.maxNumberOfCases,l=this.props.children1.size;return u?l<u:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var u=this.props.children1.size,l=u;return this.hasDefaultCase()&&l--,l}},{key:"totalRulesCntForItem",value:function(u){return(0,$.getTotalRulesCountInTree)(u)}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.config.settings,f=l.canLeaveEmptyCase,y=l.canRegroupCases,p=this.props.children1.size,a=p;this.hasDefaultCase()&&a--;var n=(0,$.getTotalReordableNodesCountInTree)(u),g=n;return g==1&&y&&f&&a>1&&(g=111),g}},{key:"renderHeaderWrapper",value:function(){return C.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return C.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var u=this.props.config.settings.renderSwitchPrefix;return u?u():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addCaseGroup,y=u.addDefaultCaseGroup,p=u.isLocked,a=u.isTrueLocked,n=u.id;return C.default.createElement(F.SwitchGroupActions,{config:l,addCaseGroup:f,addDefaultCaseGroup:y,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:p,isTrueLocked:a,id:n})}}]),c}(D.BasicGroup),w.propTypes=H({},D.BasicGroup.propTypes),w))||V)||V)||V),R=k;i.default=R},9252:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.SwitchGroupActions=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=A(e(66111));function C(L){if(typeof WeakMap!="function")return null;var $=new WeakMap,j=new WeakMap;return(C=function(w){return w?j:$})(L)}function A(L,$){if(!$&&L&&L.__esModule)return L;if(L===null||E(L)!=="object"&&typeof L!="function")return{default:L};var j=C($);if(j&&j.has(L))return j.get(L);var V={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in L)if(x!=="default"&&Object.prototype.hasOwnProperty.call(L,x)){var H=w?Object.getOwnPropertyDescriptor(L,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=L[x]}return V.default=L,j&&j.set(L,V),V}function O(L){var $=b();return function(){var V=(0,P.default)(L),w;if($){var x=(0,P.default)(this).constructor;w=Reflect.construct(V,arguments,x)}else w=V.apply(this,arguments);return(0,T.default)(this,w)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},F="topRight",U=function(L){(0,I.default)(j,L);var $=O(j);function j(){return(0,m.default)(this,j),$.apply(this,arguments)}return(0,M.default)(j,[{key:"render",value:function(){var w=this.props,x=w.config,H=w.addCaseGroup,Z=w.addDefaultCaseGroup,ee=w.setLock,J=w.isLocked,k=w.isTrueLocked,R=w.id,h=w.canAddGroup,s=w.canAddDefault,c=x.settings,o=c.immutableGroupsMode,u=c.addCaseLabel,l=c.addDefaultCaseLabel,f=c.groupActionsPosition,y=c.renderButton,p=c.renderSwitch,a=c.renderButtonGroup,n=c.lockLabel,g=c.lockedLabel,d=c.showLock,N=D[f||F],W=d&&!(J&&!k)&&S.default.createElement(p,{type:"lock",id:R,value:J,setValue:ee,label:n,checkedLabel:g,config:x}),_=!o&&h&&!J&&S.default.createElement(y,{type:"addCaseGroup",onClick:H,label:u,readonly:J,config:x}),X=!o&&s&&!J&&S.default.createElement(y,{type:"addDefaultCaseGroup",onClick:Z,label:l,readonly:J,config:x});return S.default.createElement("div",{className:"group--actions ".concat(N)},S.default.createElement(a,{config:x},W,_,X))}}]),j}(S.PureComponent);i.SwitchGroupActions=U},19619:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(68307)),M=r(e(86067)),I=r(e(85091)),T=r(e(72366)),P=r(e(64920)),S=r(e(39005)),C=D(e(66111)),A=r(e(59160)),O=r(e(31536));function b($){if(typeof WeakMap!="function")return null;var j=new WeakMap,V=new WeakMap;return(b=function(x){return x?V:j})($)}function D($,j){if(!j&&$&&$.__esModule)return $;if($===null||E($)!=="object"&&typeof $!="function")return{default:$};var V=b(j);if(V&&V.has($))return V.get($);var w={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in $)if(H!=="default"&&Object.prototype.hasOwnProperty.call($,H)){var Z=x?Object.getOwnPropertyDescriptor($,H):null;Z&&(Z.get||Z.set)?Object.defineProperty(w,H,Z):w[H]=$[H]}return w.default=$,V&&V.set($,w),w}function F($){var j=U();return function(){var w=(0,S.default)($),x;if(j){var H=(0,S.default)(this).constructor;x=Reflect.construct(w,arguments,H)}else x=w.apply(this,arguments);return(0,P.default)(this,x)}}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var L=function($){(0,T.default)(V,$);var j=F(V);function V(){var w;(0,M.default)(this,V);for(var x=arguments.length,H=new Array(x),Z=0;Z<x;Z++)H[Z]=arguments[Z];return w=j.call.apply(j,[this].concat(H)),w.handleChange=function(ee){w.props.setOption("proximity",parseInt(ee))},w}return(0,I.default)(V,[{key:"render",value:function(){var x=this.props,H=x.defaults,Z=x.options,ee=x.config,J=x.optionLabel,k=x.optionPlaceholder,R=x.customProps,h=x.minProximity,s=x.maxProximity,c=x.optionTextBefore,o=x.readonly,u=ee.settings,l=ee.widgets,f=H?H.proximity:void 0,y=u.showLabels,p=Z.get("proximity",f),a=(0,O.default)(h,s+1).map(function(g){return{title:g,value:g}}),n=l.select.factory;return C.default.createElement("div",{className:"operator--PROXIMITY"},C.default.createElement("div",{className:"operator--options"},y&&C.default.createElement("label",{className:"rule--label"},J),!y&&c&&C.default.createElement("div",{className:"operator--options--sep"},C.default.createElement("span",null,c)),C.default.createElement(n,(0,m.default)({config:ee,value:p,listValues:a,setValue:this.handleChange,readonly:o,placeholder:k},R))),C.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),V}(C.PureComponent);i.default=L,L.propTypes={config:A.default.object.isRequired,setOption:A.default.func.isRequired,options:A.default.any.isRequired,minProximity:A.default.number,maxProximity:A.default.number,optionPlaceholder:A.default.string,optionTextBefore:A.default.string,optionLabel:A.default.string,customProps:A.default.object,readonly:A.default.bool},L.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},22369:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ProximityOperator",{enumerable:!0,get:function(){return E.default}});var E=r(e(19619))},98865:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(92476)),M=r(e(86067)),I=r(e(85091)),T=r(e(80467)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=V(e(66111)),O=r(e(59160)),b=e(79746),D=e(62413),F=e(60399),U=e(9701),L=r(e(4161)),$=r(e(65555));function j(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(j=function(s){return s?R:k})(J)}function V(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||E(J)!=="object"&&typeof J!="function")return{default:J};var R=j(k);if(R&&R.has(J))return R.get(J);var h={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(h,c,o):h[c]=J[c]}return h.default=J,R&&R.set(J,h),h}function w(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(J);k&&(h=h.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,h)}return R}function x(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?w(Object(R),!0).forEach(function(h){(0,m.default)(J,h,R[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):w(Object(R)).forEach(function(h){Object.defineProperty(J,h,Object.getOwnPropertyDescriptor(R,h))})}return J}function H(J){var k=Z();return function(){var h=(0,C.default)(J),s;if(k){var c=(0,C.default)(this).constructor;s=Reflect.construct(h,arguments,c)}else s=h.apply(this,arguments);return(0,S.default)(this,s)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ee=function(J){(0,P.default)(R,J);var k=H(R);function R(h){var s;return(0,M.default)(this,R),s=k.call(this,h),(0,U.useOnPropsChanged)((0,T.default)(s)),s.onPropsChanged(h),s}return(0,I.default)(R,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["selectedField","config","parentField"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.selectedField,o=s.config,u=s.parentField,l=c,f=o.settings,y=f.maxLabelsLength,p=f.fieldSeparatorDisplay,a=f.fieldPlaceholder,n=f.fieldSeparator,g=!!c,d=g?null:(0,F.truncateString)(a,y),N=g?(0,b.getFieldConfig)(o,l):null,W=N||{},_=(0,D.getFieldPath)(l,o),X=(0,D.getFieldPath)(l,o,!0),G=this.getFieldLabel(N,l,o),z=(0,D.getFieldPathLabels)(l,o),K=z?z.join(p):null;(K==G||u)&&(K=null);var Y=W.label2,re=typeof u=="string"?u.split(n):u,ne=u?(0,b.getFieldConfig)(o,u):null,ue=u?ne&&ne.subfields:o.fields,ae=this.buildOptions(re,o,ue,re);return{placeholder:d,items:ae,parentField:u,selectedKey:l,selectedKeys:_,selectedPath:X,selectedLabel:G,selectedOpts:W,selectedAltLabel:Y,selectedFullLabel:K}}},{key:"getFieldLabel",value:function(s,c,o){if(!c)return null;var u=o.settings.fieldSeparator,l=o.settings.maxLabelsLength,f=Array.isArray(c)?c:c.split(u),y=s&&s.label||(0,L.default)(f);return y=(0,F.truncateString)(y,l),y}},{key:"buildOptions",value:function(s,c,o){var u=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!o)return null;var y=c.settings,p=y.fieldSeparator,a=y.fieldSeparatorDisplay,n=l?l.join(p)+p:"";return(0,$.default)(o).map(function(g){var d=o[g],N=u.getFieldLabel(d,g,c),W=(0,D.getFieldPathLabels)(n+g,c),_=W.join(a);(_==N||s)&&(_=null);var X=d.label2,G=d.tooltip,z=(l||[]).concat(g),K=d.disabled;if(!d.hideForSelect)return d.type=="!struct"?{disabled:K,key:g,path:n+g,label:N,fullLabel:_,altLabel:X,tooltip:G,items:u.buildOptions(s,c,d.subfields,z,N)}:{disabled:K,key:g,path:n+g,label:N,fullLabel:_,altLabel:X,tooltip:G,grouplabel:f}}).filter(function(g){return!!g})}},{key:"render",value:function(){var s=this.props,c=s.config,o=s.customProps,u=s.setField,l=s.readonly,f=s.id,y=s.groupId,p=c.settings.renderField,a=x({id:f,groupId:y,config:c,customProps:o,readonly:l,setField:u},this.meta);return p(a)}}]),R}(A.PureComponent);i.default=ee,ee.propTypes={id:O.default.string,groupId:O.default.string,config:O.default.object.isRequired,selectedField:O.default.string,parentField:O.default.string,customProps:O.default.object,readonly:O.default.bool,setField:O.default.func.isRequired}},35205:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=b(e(66111)),C=r(e(98865)),A=e(48281);function O(L){if(typeof WeakMap!="function")return null;var $=new WeakMap,j=new WeakMap;return(O=function(w){return w?j:$})(L)}function b(L,$){if(!$&&L&&L.__esModule)return L;if(L===null||E(L)!=="object"&&typeof L!="function")return{default:L};var j=O($);if(j&&j.has(L))return j.get(L);var V={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in L)if(x!=="default"&&Object.prototype.hasOwnProperty.call(L,x)){var H=w?Object.getOwnPropertyDescriptor(L,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=L[x]}return V.default=L,j&&j.set(L,V),V}function D(L){var $=F();return function(){var V=(0,P.default)(L),w;if($){var x=(0,P.default)(this).constructor;w=Reflect.construct(V,arguments,x)}else w=V.apply(this,arguments);return(0,T.default)(this,w)}}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(L){(0,I.default)(j,L);var $=D(j);function j(){return(0,m.default)(this,j),$.apply(this,arguments)}return(0,M.default)(j,[{key:"render",value:function(){var w=this.props,x=w.config,H=w.selectedField,Z=w.setField,ee=w.parentField,J=w.classname,k=w.readonly,R=w.id,h=w.groupId;return S.default.createElement(A.Col,{className:J},x.settings.showLabels&&S.default.createElement("label",{className:"rule--label"},x.settings.fieldLabel),S.default.createElement(C.default,{config:x,selectedField:H,parentField:ee,setField:Z,customProps:x.settings.customFieldSelectProps,readonly:k,id:R,groupId:h}))}}]),j}(S.PureComponent);i.default=U},9305:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(92476)),M=r(e(47452)),I=r(e(86067)),T=r(e(85091)),P=r(e(80467)),S=r(e(72366)),C=r(e(64920)),A=r(e(39005)),O=x(e(66111)),b=r(e(59160)),D=e(79746),F=e(62413),U=e(60399),L=e(9701),$=r(e(4161)),j=r(e(65555)),V=r(e(29521));function w(R){if(typeof WeakMap!="function")return null;var h=new WeakMap,s=new WeakMap;return(w=function(o){return o?s:h})(R)}function x(R,h){if(!h&&R&&R.__esModule)return R;if(R===null||E(R)!=="object"&&typeof R!="function")return{default:R};var s=w(h);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function H(R,h){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);h&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function Z(R){for(var h=1;h<arguments.length;h++){var s=arguments[h]!=null?arguments[h]:{};h%2?H(Object(s),!0).forEach(function(c){(0,m.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}function ee(R){var h=J();return function(){var c=(0,A.default)(R),o;if(h){var u=(0,A.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,C.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(R){(0,S.default)(s,R);var h=ee(s);function s(c){var o;return(0,I.default)(this,s),o=h.call(this,c),(0,L.useOnPropsChanged)((0,P.default)(o)),o.onPropsChanged(c),o}return(0,T.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","operator","isFuncArg"],f=["config","field","value"],y=!this.items||l.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0,p=!this.meta||f.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0;p&&(this.meta=this.getMeta(o)),y&&(this.items=this.getItems(o))}},{key:"getItems",value:function(o){var u=o.config,l=o.field,f=o.operator,y=o.parentFuncs,p=o.fieldDefinition,a=o.isFuncArg,n=u.settings.canUseFuncForField,g=this.filterFuncs(u,u.funcs,l,f,n,y,a,p),d=this.buildOptions(u,g);return d}},{key:"getMeta",value:function(o){var u=o.config,l=o.field,f=o.value,y=u.settings,p=y.funcPlaceholder,a=y.fieldSeparatorDisplay,n=f,g=!!f,d=(0,D.getFieldConfig)(u,l),N=d.widgets.field,W=N&&N.widgetProps||{},_=g?null:p,X=g?(0,D.getFuncConfig)(u,n):null,G=X||{},z=(0,F.getFieldPath)(n,u),K=(0,F.getFieldPath)(n,u,!0),Y=this.getFuncLabel(X,n,u),re=(0,F.getFuncPathLabels)(n,u),ne=re?re.join(a):null;return ne==Y&&(ne=null),{placeholder:_,selectedKey:n,selectedKeys:z,selectedPath:K,selectedLabel:Y,selectedOpts:G,selectedFullLabel:ne}}},{key:"filterFuncs",value:function(o,u,l,f,y,p,a,n){u=(0,V.default)(u);var g=o.settings.fieldSeparator,d=(0,D.getFieldConfig)(o,l),N,W=d,_=(0,F.getWidgetForFieldOp)(o,l,f,"value");if(a&&n)W=n,N=n.type;else if(_){var X=o.widgets[_],G=X.type;N=G}else N=d.type;function z(K,Y){for(var re in K){var ne=K[re].subfields,ue=(Y||[]).concat(re),ae=ue.join(g),ve=(0,D.getFuncConfig)(o,ae);if(ve.type=="!struct")z(ne,ue)==0&&delete K[re];else{var se=ve.returnType==N;W.funcs&&(se=se&&W.funcs.includes(ae)),y&&(se=se&&y(l,d,ae,ve,f)),!ve.allowSelfNesting&&p&&p.map(function(ge){var ye=(0,M.default)(ge,2),Oe=ye[0],Se=ye[1];return Oe}).includes(ae)&&(se=!1),se||delete K[re]}}return(0,j.default)(K).length}return z(u,[]),u}},{key:"buildOptions",value:function(o,u){var l=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!u)return null;var p=o.settings,a=p.fieldSeparator,n=p.fieldSeparatorDisplay,g=f?f.join(a)+a:"";return(0,j.default)(u).map(function(d){var N=u[d],W=l.getFuncLabel(N,d,o),_=(0,F.getFuncPathLabels)(d,o),X=_.join(n);X==W&&(X=null);var G=N.tooltip,z=(f||[]).concat(d);return N.type=="!struct"?{key:d,path:g+d,label:W,fullLabel:X,tooltip:G,items:l.buildOptions(o,N.subfields,z,W)}:{key:d,path:g+d,label:W,fullLabel:X,tooltip:G,grouplabel:y}})}},{key:"getFuncLabel",value:function(o,u,l){if(!u)return null;var f=l.settings.fieldSeparator,y=l.settings.maxLabelsLength,p=Array.isArray(u)?u:u.split(f),a=o.label||(0,$.default)(p);return a=(0,U.truncateString)(a,y),a}},{key:"render",value:function(){var o=this.props,u=o.config,l=o.customProps,f=o.setValue,y=o.readonly,p=o.id,a=o.groupId,n=u.settings.renderFunc,g=Z({config:u,customProps:l,readonly:y,setField:f,items:this.items,id:p,groupId:a},this.meta);return n(g)}}]),s}(O.PureComponent);i.default=k,k.propTypes={id:b.default.string,groupId:b.default.string,config:b.default.object.isRequired,field:b.default.string.isRequired,operator:b.default.string,customProps:b.default.object,value:b.default.string,setValue:b.default.func.isRequired,readonly:b.default.bool,parentFuncs:b.default.array,fieldDefinition:b.default.object,isFuncArg:b.default.bool}},31404:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(68307)),M=r(e(90890)),I=r(e(86067)),T=r(e(85091)),P=r(e(80467)),S=r(e(72366)),C=r(e(64920)),A=r(e(39005)),O=w(e(66111)),b=r(e(59160)),D=r(e(9305)),F=e(79746),U=r(e(33753)),L=e(48281),$=e(12177),j=e(9701);function V(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(V=function(s){return s?R:k})(J)}function w(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||E(J)!=="object"&&typeof J!="function")return{default:J};var R=V(k);if(R&&R.has(J))return R.get(J);var h={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(h,c,o):h[c]=J[c]}return h.default=J,R&&R.set(J,h),h}function x(J){var k=H();return function(){var h=(0,A.default)(J),s;if(k){var c=(0,A.default)(this).constructor;s=Reflect.construct(h,arguments,c)}else s=h.apply(this,arguments);return(0,C.default)(this,s)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z=function(J){(0,S.default)(R,J);var k=x(R);function R(h){var s;return(0,I.default)(this,R),s=k.call(this,h),s.setFunc=function(c){s.props.setValue((0,$.setFunc)(s.props.value,c,s.props.config))},s.setArgValue=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,y=f[c];s.props.setValue((0,$.setArgValue)(s.props.value,c,o,y,u))},s.setArgValueSrc=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,y=f[c];s.props.setValue((0,$.setArgValueSrc)(s.props.value,c,o,y,u))},s.renderFuncSelect=function(){var c=s.props,o=c.config,u=c.field,l=c.operator,f=c.customProps,y=c.value,p=c.readonly,a=c.parentFuncs,n=c.id,g=c.groupId,d=c.isFuncArg,N=c.fieldDefinition,W=y?y.get("func"):null,_={value:W,setValue:s.setFunc,config:o,field:u,operator:l,customProps:f,readonly:p,parentFuncs:a,isFuncArg:d,fieldDefinition:N,id:n,groupId:g},X=o.settings,G=X.showLabels,z=X.funcLabel,K=G?O.default.createElement("label",{className:"rule--label"},z):null;return O.default.createElement(L.Col,{key:"func",className:"rule--func"},K,O.default.createElement(D.default,_))},s.renderArgLabel=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,y=o.label,p=s.props.config,a=u&&u.length==1&&u[0]=="const",n=!p.settings.showLabels&&(l=="boolean"||a)&&f;return n?O.default.createElement(L.Col,{className:"rule--func--arg-label"},y||c):null},s.renderArgLabelSep=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,y=s.props.config,p=u&&u.length==1&&u[0]=="const",a=!y.settings.showLabels&&(l=="boolean"||p)&&f;return a?O.default.createElement(L.Col,{className:"rule--func--arg-label-sep"},":"):null},s.renderArgVal=function(c,o,u){var l=s.props,f=l.config,y=l.field,p=l.operator,a=l.value,n=l.readonly,g=l.parentFuncs,d=l.id,N=l.groupId,W=a?a.getIn(["args",o]):null,_=W?W.get("value"):void 0,X=u.valueSources.length==1?u.valueSources[0]:void 0,G=W?W.get("valueSrc")||X||"value":X,z={config:f,fieldFunc:c,fieldArg:o,leftField:y,operator:null,value:_,valueSrc:G,setValue:s.setArgValue,setValueSrc:s.setArgValueSrc,funcKey:c,argKey:o,argDefinition:u,readonly:n,parentFuncs:g,id:d,groupId:N};return O.default.createElement(L.Col,{className:"rule--func--arg-value"},O.default.createElement(ee,z))},s.renderArgSep=function(c,o,u,l){var f=l.renderSeps;return u?O.default.createElement(L.Col,{className:"rule--func--arg-sep"},f?f[u-1]:", "):null},s.renderBracketBefore=function(c){var o=c.renderBrackets;return O.default.createElement(L.Col,{key:"before_args",className:"rule--func--bracket-before"},o?o[0]:"(")},s.renderBracketAfter=function(c){var o=c.renderBrackets;return O.default.createElement(L.Col,{key:"after_args",className:"rule--func--bracket-after"},o?o[1]:")")},s.renderFuncArgs=function(){var c=s.meta,o=c.funcDefinition,u=c.funcKey;if(!u)return null;var l=o.args;return l?O.default.createElement(O.default.Fragment,null,s.renderBracketBefore(o),O.default.createElement(L.Col,{key:"args",className:"rule--func--args"},Object.keys(l).map(function(f,y){return O.default.createElement(L.Col,{key:"arg-".concat(f,"-").concat(y),className:"rule--func--arg"},s.renderArgSep(f,l[f],y,o),s.renderArgLabel(f,l[f]),s.renderArgLabelSep(f,l[f]),s.renderArgVal(u,f,l[f]))})),s.renderBracketAfter(o)):null},(0,j.useOnPropsChanged)((0,P.default)(s)),s.onPropsChanged(h),s}return(0,T.default)(R,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["config","field","operator","value"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.config,o=s.field,u=s.operator,l=s.value,f=l?l.get("func"):null,y=f?(0,F.getFuncConfig)(c,f):null;return{funcDefinition:y,funcKey:f}}},{key:"render",value:function(){return O.default.createElement(L.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),R}(O.PureComponent);i.default=Z,Z.propTypes={id:b.default.string,groupId:b.default.string,config:b.default.object.isRequired,field:b.default.string.isRequired,operator:b.default.string,customProps:b.default.object,value:b.default.object,setValue:b.default.func.isRequired,readonly:b.default.bool,parentFuncs:b.default.array,fieldDefinition:b.default.object,isFuncArg:b.default.bool};var ee=function(J){(0,S.default)(R,J);var k=x(R);function R(){var h;(0,I.default)(this,R);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return h=k.call.apply(k,[this].concat(c)),h.setValue=function(u,l,f){var y=h.props,p=y.setValue,a=y.argKey;p(a,l)},h.setValueSrc=function(u,l,f){var y=h.props,p=y.setValueSrc,a=y.argKey;p(a,l)},h}return(0,T.default)(R,[{key:"render",value:function(){var s=this.props,c=s.funcKey,o=s.argKey,u=s.parentFuncs;return O.default.createElement(U.default,(0,m.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,M.default)(u||[]),[[c,o]])}))}}]),R}(O.PureComponent);ee.propTypes={funcKey:b.default.string.isRequired,argKey:b.default.string.isRequired,setValue:b.default.func.isRequired,setValueSrc:b.default.func.isRequired,readonly:b.default.bool,parentFuncs:b.default.array,id:b.default.string,groupId:b.default.string}},85578:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(92476)),M=r(e(86067)),I=r(e(85091)),T=r(e(80467)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=j(e(66111)),O=r(e(59160)),b=e(79746),D=r(e(65555)),F=r(e(76175)),U=r(e(74937)),L=e(9701);function $(ee){if(typeof WeakMap!="function")return null;var J=new WeakMap,k=new WeakMap;return($=function(h){return h?k:J})(ee)}function j(ee,J){if(!J&&ee&&ee.__esModule)return ee;if(ee===null||E(ee)!=="object"&&typeof ee!="function")return{default:ee};var k=$(J);if(k&&k.has(ee))return k.get(ee);var R={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in ee)if(s!=="default"&&Object.prototype.hasOwnProperty.call(ee,s)){var c=h?Object.getOwnPropertyDescriptor(ee,s):null;c&&(c.get||c.set)?Object.defineProperty(R,s,c):R[s]=ee[s]}return R.default=ee,k&&k.set(ee,R),R}function V(ee,J){var k=Object.keys(ee);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(ee);J&&(R=R.filter(function(h){return Object.getOwnPropertyDescriptor(ee,h).enumerable})),k.push.apply(k,R)}return k}function w(ee){for(var J=1;J<arguments.length;J++){var k=arguments[J]!=null?arguments[J]:{};J%2?V(Object(k),!0).forEach(function(R){(0,m.default)(ee,R,k[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(k)):V(Object(k)).forEach(function(R){Object.defineProperty(ee,R,Object.getOwnPropertyDescriptor(k,R))})}return ee}function x(ee){var J=H();return function(){var R=(0,C.default)(ee),h;if(J){var s=(0,C.default)(this).constructor;h=Reflect.construct(R,arguments,s)}else h=R.apply(this,arguments);return(0,S.default)(this,h)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z=function(ee){(0,P.default)(k,ee);var J=x(k);function k(R){var h;return(0,M.default)(this,k),h=J.call(this,R),(0,L.useOnPropsChanged)((0,T.default)(h)),h.onPropsChanged(R),h}return(0,I.default)(k,[{key:"onPropsChanged",value:function(h){var s=this.props,c=["config","selectedField","selectedOperator"],o=!this.meta||c.map(function(u){return h[u]!==s[u]}).filter(function(u){return u}).length>0;o&&(this.meta=this.getMeta(h))}},{key:"getMeta",value:function(h){var s=h.config,c=h.selectedField,o=h.selectedOperator,u=(0,b.getFieldConfig)(s,c),l=u?.operators,f=(0,U.default)((0,F.default)(s.operators,function(X,G){return l?.indexOf(G)!==-1}),function(X,G){return(0,b.getOperatorConfig)(s,G,c)}),y=this.buildOptions(s,f,l),p=!!o,a=p?f[o]:null,n=a||{},g=this.props.config.settings.operatorPlaceholder,d=o,N=p?[d]:null,W=N,_=n.label;return{placeholder:g,items:y,selectedKey:d,selectedKeys:N,selectedPath:W,selectedLabel:_,selectedOpts:n,fieldConfig:u}}},{key:"buildOptions",value:function(h,s,c){return!s||!c?null:(0,D.default)(s).sort(function(o,u){return c.indexOf(o)-c.indexOf(u)}).map(function(o){var u=s[o],l=u.label;return{key:o,path:o,label:l}})}},{key:"render",value:function(){var h=this.props,s=h.config,c=h.customProps,o=h.setOperator,u=h.readonly,l=h.id,f=h.groupId,y=s.settings.renderOperator,p=w({id:l,groupId:f,config:s,customProps:c,readonly:u,setField:o},this.meta);return p.items?y(p):null}}]),k}(A.PureComponent);i.default=Z,Z.propTypes={id:O.default.string,groupId:O.default.string,config:O.default.object.isRequired,selectedField:O.default.string,selectedOperator:O.default.string,readonly:O.default.bool,setOperator:O.default.func.isRequired}},65971:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(19934)),M=r(e(86067)),I=r(e(85091)),T=r(e(72366)),P=r(e(64920)),S=r(e(39005)),C=F(e(66111)),A=r(e(59160)),O=e(79746),b=["factory"];function D(j){if(typeof WeakMap!="function")return null;var V=new WeakMap,w=new WeakMap;return(D=function(H){return H?w:V})(j)}function F(j,V){if(!V&&j&&j.__esModule)return j;if(j===null||E(j)!=="object"&&typeof j!="function")return{default:j};var w=D(V);if(w&&w.has(j))return w.get(j);var x={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in j)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(j,Z)){var ee=H?Object.getOwnPropertyDescriptor(j,Z):null;ee&&(ee.get||ee.set)?Object.defineProperty(x,Z,ee):x[Z]=j[Z]}return x.default=j,w&&w.set(j,x),x}function U(j){var V=L();return function(){var x=(0,S.default)(j),H;if(V){var Z=(0,S.default)(this).constructor;H=Reflect.construct(x,arguments,Z)}else H=x.apply(this,arguments);return(0,P.default)(this,H)}}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(j){(0,T.default)(w,j);var V=U(w);function w(){return(0,M.default)(this,w),V.apply(this,arguments)}return(0,I.default)(w,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var H=(0,O.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof H.options>"u")return null;var Z=H.options,ee=Z.factory,J=(0,m.default)(Z,b),k=Object.assign({},J,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),R=ee(k),h=this.props.selectedOperator;return C.default.createElement("div",{className:"rule--operator rule--operator--".concat(h.toUpperCase())},R)}}]),w}(C.PureComponent);i.default=$,$.propTypes={config:A.default.object.isRequired,operatorOptions:A.default.any.isRequired,selectedField:A.default.string.isRequired,selectedOperator:A.default.string.isRequired,readonly:A.default.bool,setOperatorOption:A.default.func.isRequired}},64078:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(86067)),M=r(e(85091)),I=r(e(72366)),T=r(e(64920)),P=r(e(39005)),S=b(e(66111)),C=r(e(85578)),A=e(48281);function O(L){if(typeof WeakMap!="function")return null;var $=new WeakMap,j=new WeakMap;return(O=function(w){return w?j:$})(L)}function b(L,$){if(!$&&L&&L.__esModule)return L;if(L===null||E(L)!=="object"&&typeof L!="function")return{default:L};var j=O($);if(j&&j.has(L))return j.get(L);var V={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in L)if(x!=="default"&&Object.prototype.hasOwnProperty.call(L,x)){var H=w?Object.getOwnPropertyDescriptor(L,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=L[x]}return V.default=L,j&&j.set(L,V),V}function D(L){var $=F();return function(){var V=(0,P.default)(L),w;if($){var x=(0,P.default)(this).constructor;w=Reflect.construct(V,arguments,x)}else w=V.apply(this,arguments);return(0,T.default)(this,w)}}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(L){(0,I.default)(j,L);var $=D(j);function j(){return(0,m.default)(this,j),$.apply(this,arguments)}return(0,M.default)(j,[{key:"render",value:function(){var w=this.props,x=w.config,H=w.selectedField,Z=w.selectedOperator,ee=w.setOperator,J=w.selectedFieldPartsLabels,k=w.showOperator,R=w.showOperatorLabel,h=w.selectedFieldWidgetConfig,s=w.readonly,c=w.id,o=w.groupId,u=k&&S.default.createElement(A.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},x.settings.showLabels&&S.default.createElement("label",{className:"rule--label"},x.settings.operatorLabel),S.default.createElement(C.default,{key:"operator",config:x,selectedField:H,selectedOperator:Z,setOperator:ee,readonly:s,id:c,groupId:o})),l=R&&S.default.createElement(A.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},S.default.createElement("div",{className:"rule--operator"},x.settings.showLabels?S.default.createElement("label",{className:"rule--label"},"\xA0"):null,S.default.createElement("span",null,h.operatorInlineLabel)));return[u,l]}}]),j}(S.PureComponent);i.default=U},71162:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(92476)),M=r(e(86067)),I=r(e(85091)),T=r(e(80467)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=w(e(66111)),O=r(e(59160)),b=e(79746),D=e(62413),F=e(60399),U=e(9701),L=r(e(4161)),$=r(e(65555)),j=r(e(29521));function V(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,h=new WeakMap;return(V=function(c){return c?h:R})(k)}function w(k,R){if(!R&&k&&k.__esModule)return k;if(k===null||E(k)!=="object"&&typeof k!="function")return{default:k};var h=V(R);if(h&&h.has(k))return h.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,h&&h.set(k,s),s}function x(k,R){var h=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);R&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),h.push.apply(h,s)}return h}function H(k){for(var R=1;R<arguments.length;R++){var h=arguments[R]!=null?arguments[R]:{};R%2?x(Object(h),!0).forEach(function(s){(0,m.default)(k,s,h[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(h)):x(Object(h)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(h,s))})}return k}function Z(k){var R=ee();return function(){var s=(0,C.default)(k),c;if(R){var o=(0,C.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,S.default)(this,c)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(k){(0,P.default)(h,k);var R=Z(h);function h(s){var c;return(0,M.default)(this,h),c=R.call(this,s),(0,U.useOnPropsChanged)((0,T.default)(c)),c.onPropsChanged(s),c}return(0,I.default)(h,[{key:"onPropsChanged",value:function(c){var o=this.props,u=["config","field","operator","isFuncArg","parentField"],l=["config","field","operator","value","placeholder","isFuncArg","parentField"],f=!this.items||u.map(function(p){return c[p]!==o[p]}).filter(function(p){return p}).length>0,y=!this.meta||l.map(function(p){return c[p]!==o[p]}).filter(function(p){return p}).length>0;f&&(this.items=this.getItems(c)),y&&(this.meta=this.getMeta(c))}},{key:"getItems",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.parentField,y=c.isFuncArg,p=c.fieldDefinition,a=o.settings.canCompareFieldWithField,n=o.settings.fieldSeparator,g=typeof f=="string"?f.split(n):f,d=f?(0,b.getFieldConfig)(o,f):null,N=f?d&&d.subfields:o.fields,W=this.filterFields(o,N,u,f,g,l,a,y,p),_=this.buildOptions(g,o,W,g);return _}},{key:"getMeta",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.value,y=c.placeholder,p=c.isFuncArg,a=c.parentField,n=o.settings,g=n.fieldPlaceholder,d=n.fieldSeparatorDisplay,N=f,W=!!f,_=(0,b.getFieldConfig)(o,u),X=_.widgets.field,G=X&&X.widgetProps||{},z=W?null:p&&y||G.valuePlaceholder||g,K=W?(0,b.getFieldConfig)(o,N):null,Y=K||{},re=(0,D.getFieldPath)(N,o),ne=(0,D.getFieldPath)(N,o,!0),ue=this.getFieldLabel(K,N,o),ae=(0,D.getFieldPathLabels)(N,o),ve=ae?ae.join(d):null;(ve==ue||a)&&(ve=null);var se=Y.label2;return{placeholder:z,selectedKey:N,selectedKeys:re,selectedPath:ne,selectedLabel:ue,selectedOpts:Y,selectedAltLabel:se,selectedFullLabel:ve}}},{key:"filterFields",value:function(c,o,u,l,f,y,p,a,n){o=(0,j.default)(o);var g=c.settings.fieldSeparator,d=(0,b.getFieldConfig)(c,u),N,W=(0,D.getWidgetForFieldOp)(c,u,y,"value");if(a&&n)N=n.type;else if(W){var _=c.widgets[W],X=_.type;N=X}else N=d.type;function G(z,K){for(var Y in z){var re=z[Y].subfields,ne=(K||[]).concat(Y),ue=ne.join(g),ae=(0,b.getFieldConfig)(c,ue);if(!ae)delete z[Y];else if(ae.type=="!struct"||ae.type=="!group")G(re,ne)==0&&delete z[Y];else{var ve=ae.type==N&&(a?!0:ue!=u),se=p||c.settings.canCompareFieldWithField;se&&(ve=ve&&se(u,d,ue,ae,y)),ve||delete z[Y]}}return(0,$.default)(z).length}return G(o,f||[]),o}},{key:"buildOptions",value:function(c,o,u){var l=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var p=o.settings,a=p.fieldSeparator,n=p.fieldSeparatorDisplay,g=f?f.join(a)+a:"";return(0,$.default)(u).map(function(d){var N=u[d],W=l.getFieldLabel(N,d,o),_=(0,D.getFieldPathLabels)(d,o),X=_.join(n);(X==W||c)&&(X=null);var G=N.label2,z=N.tooltip,K=(f||[]).concat(d);if(!N.hideForCompare)return N.type=="!struct"||N.type=="!group"?{key:d,path:g+d,label:W,fullLabel:X,altLabel:G,tooltip:z,items:l.buildOptions(c,o,N.subfields,K,W)}:{key:d,path:g+d,label:W,fullLabel:X,altLabel:G,tooltip:z,grouplabel:y}}).filter(function(d){return!!d})}},{key:"getFieldLabel",value:function(c,o,u){if(!o)return null;var l=u.settings.fieldSeparator,f=u.settings.maxLabelsLength,y=Array.isArray(o)?o:o.split(l),p=c.label||(0,L.default)(y);return p=(0,F.truncateString)(p,f),p}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.customProps,l=c.setValue,f=c.readonly,y=c.id,p=c.groupId,a=o.settings.renderField,n=H({config:o,customProps:u,setField:l,readonly:f,items:this.items,id:y,groupId:p},this.meta);return a(n)}}]),h}(A.PureComponent);i.default=J,J.propTypes={id:O.default.string,groupId:O.default.string,setValue:O.default.func.isRequired,config:O.default.object.isRequired,field:O.default.string.isRequired,value:O.default.string,operator:O.default.string,customProps:O.default.object,readonly:O.default.bool,parentField:O.default.string,fieldDefinition:O.default.object,isFuncArg:O.default.bool}},33753:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(68307)),M=r(e(86067)),I=r(e(85091)),T=r(e(80467)),P=r(e(72366)),S=r(e(64920)),C=r(e(39005)),A=H(e(66111)),O=r(e(59160)),b=r(e(31536)),D=e(79746),F=e(62413),U=e(60399),L=e(9701),$=r(e(7275)),j=r(e(40745)),V=r(e(26014)),w=e(48281);function x(R){if(typeof WeakMap!="function")return null;var h=new WeakMap,s=new WeakMap;return(x=function(o){return o?s:h})(R)}function H(R,h){if(!h&&R&&R.__esModule)return R;if(R===null||E(R)!=="object"&&typeof R!="function")return{default:R};var s=x(h);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function Z(R){var h=ee();return function(){var c=(0,C.default)(R),o;if(h){var u=(0,C.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,S.default)(this,o)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J={cardinality:1},k=function(R){(0,P.default)(s,R);var h=Z(s);function s(c){var o;return(0,M.default)(this,s),o=h.call(this,c),o._setValue=function(u,l,f,y,p,a){if(u&&Array.isArray(y)){var n=[o.props.value.get(0),o.props.value.get(1)];n[0]!=y[0]&&o.props.setValue(0,y[0],f,p,a),n[1]!=y[1]&&o.props.setValue(1,y[1],f,p,a)}else o.props.setValue(l,y,f,p,a)},o._onChangeValueSrc=function(u,l){o.props.setValueSrc(u,l)},o.renderWidget=function(u,l,f){var y=f.config,p=f.isFuncArg,a=f.leftField,n=f.operator,g=f.value,d=f.valueError,N=f.readonly,W=f.parentField,_=f.parentFuncs,X=f.id,G=f.groupId,z=y.settings,K=l.widgets,Y=l.iValues,re=l.aField,ne=p?Y:g,ue=p?a:re,ae=K[u],ve=ae.valueSrc,se=ae.valueLabel,ge=z.showLabels?A.default.createElement("label",{className:"rule--label"},se.label):null;return A.default.createElement("div",{key:"widget-"+ue+"-"+u,className:"widget--widget"},ve=="func"?null:ge,A.default.createElement(V.default,(0,m.default)({id:X,groupId:G,valueSrc:ve,delta:u,value:ne,valueError:d,isFuncArg:p},(0,$.default)(l,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,$.default)(K[u],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:y,field:ue,parentField:W,parentFuncs:_,operator:n,readonly:N})))},o.renderValueSources=function(u,l,f){var y=f.config,p=f.isFuncArg,a=f.leftField,n=f.operator,g=f.readonly,d=y.settings,N=l.valueSources,W=l.widgets,_=l.aField,X=p?a:_,G=W[u],z=G.valueSrc,K=G.setValueSrcHandler,Y=d.valueSourcesInfo,re=d.renderValueSources,ne=N.map(function(ae){return[ae,{label:Y[ae].label}]}),ue=d.showLabels?A.default.createElement("label",{className:"rule--label"},"\xA0"):null;return N.length>1&&!g&&A.default.createElement("div",{key:"valuesrc-"+X+"-"+u,className:"widget--valuesrc"},ue,A.default.createElement(re,{key:"valuesrc-"+u,delta:u,valueSources:ne,valueSrc:z,config:y,field:X,operator:n,setValueSrc:K,readonly:g,title:d.valueSourcesPopupTitle}))},o.renderSep=function(u,l,f){var y=f.config,p=l.widgets,a=y.settings,n=p[u].sepText,g=a.showLabels?A.default.createElement("label",{className:"rule--label"},"\xA0"):null;return n&&A.default.createElement("div",{key:"widget-separators-"+u,className:"widget--sep"},g,A.default.createElement("span",null,n))},o.renderWidgetDelta=function(u){var l=o.renderSep(u,o.meta,o.props),f=o.renderValueSources(u,o.meta,o.props),y=o.renderWidget(u,o.meta,o.props);return[l,f,y]},(0,L.useOnPropsChanged)((0,T.default)(o)),o.onPropsChanged(c),o}return(0,I.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"],f=!this.meta||l.map(function(y){return o[y]!==u[y]||y=="isFuncArg"&&o.isFuncArg&&o.value!==u.value}).filter(function(y){return y}).length>0;f&&(this.meta=this.getMeta(o))}},{key:"getMeta",value:function(o){var u=this,l=o.config,f=o.field,y=o.fieldFunc,p=o.fieldArg,a=o.operator,n=o.valueSrc,g=o.value,d=o.isForRuleGruop,N=o.isCaseValue,W=o.isFuncArg,_=o.leftField,X=o.asyncListValues,G=W?{func:y,arg:p}:f,z=n,K=g;(W||d||N)&&(z=j.default.List([n]),K=j.default.List([g]));var Y=(0,D.getFieldConfig)(l,G),re=(0,F.getWidgetForFieldOp)(l,G,a),ne=(0,F.getWidgetsForFieldOp)(l,G,a),ue=W?J:(0,D.getOperatorConfig)(l,a,G);if((Y==null||ue==null)&&!N)return null;var ae=ue?.isSpecialRange,ve=ae&&(z.get(0)=="field"||z.get(1)=="field"),se=ae&&!ve,ge=se?1:(0,U.defaultValue)(ue?.cardinality,1);if(ge===0)return null;var ye=(0,F.getValueSourcesForFieldOp)(l,G,a,Y,W?_:null),Oe=(0,b.default)(0,ge).map(function(Se){var ce,Ne=z.get(Se)||null,we=(0,F.getWidgetForFieldOp)(l,G,a,Ne),je=(0,D.getFieldWidgetConfig)(l,G,a,we,Ne);ve&&(we=je.singleWidget,je=(0,D.getFieldWidgetConfig)(l,G,a,we,Ne));var Ke=(ce=je)===null||ce===void 0?void 0:ce.type,Ye=(0,F.getValueLabel)(l,G,a,Se,Ne,se),ke=(0,F.getValueLabel)(l,G,a,Se,null,se),at=ue!=null&&ue.textSeparators?ue?.textSeparators[Se]:null,He=u._onChangeValueSrc.bind(u,Se),fe=null,Ee=null;ae&&(fe=[(0,F.getValueLabel)(l,G,a,0),(0,F.getValueLabel)(l,G,a,1)],fe={placeholder:[fe[0].placeholder,fe[1].placeholder],label:[fe[0].label,fe[1].label]},Ee=ue?.textSeparators);var Ce=u._setValue.bind(u,ae,Se,Ke);return{valueSrc:Ne,valueLabel:Ye,widget:we,sepText:at,setValueSrcHandler:He,widgetDefinition:je,widgetValueLabel:ke,valueLabels:fe,textSeparators:Ee,setValueHandler:Ce}});return{defaultWidget:re,fieldDefinition:Y,operatorDefinition:ue,isSpecialRange:se,cardinality:ge,valueSources:ye,widgets:Oe,iValues:K,aField:G,asyncListValues:X}}},{key:"render",value:function(){if(!this.meta)return null;var o=this.meta,u=o.defaultWidget,l=o.cardinality;if(!u)return null;var f=u;return A.default.createElement(w.Col,{className:"rule--widget rule--widget--".concat(f.toUpperCase()),key:"widget-col-"+f},(0,b.default)(0,l).map(this.renderWidgetDelta))}}]),s}(A.PureComponent);i.default=k,k.propTypes={config:O.default.object.isRequired,value:O.default.any,valueSrc:O.default.any,valueError:O.default.any,field:O.default.string,operator:O.default.string,readonly:O.default.bool,asyncListValues:O.default.array,id:O.default.string,groupId:O.default.string,setValue:O.default.func,setValueSrc:O.default.func,isFuncArg:O.default.bool,fieldFunc:O.default.string,fieldArg:O.default.string,leftField:O.default.string,isForRuleGruop:O.default.bool,parentField:O.default.string,parentFuncs:O.default.array,isCaseValue:O.default.bool}},26014:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(19934)),m=r(e(66111)),M=e(60399),I=["factory"],T=function(S){var C=S.delta,A=S.isFuncArg,O=S.valueSrc,b=S.value,D=S.valueError,F=S.asyncListValues,U=S.isSpecialRange,L=S.fieldDefinition,$=S.widget,j=S.widgetDefinition,V=S.widgetValueLabel,w=S.valueLabels,x=S.textSeparators,H=S.setValueHandler,Z=S.config,ee=S.field,J=S.operator,k=S.readonly,R=S.parentField,h=S.parentFuncs,s=S.id,c=S.groupId,o=j.factory,u=(0,E.default)(j,I),l=A&&L.valueSources&&L.valueSources.length==1&&L.valueSources[0]=="const",f=L.defaultValue;if(!o)return"?";var y=U?[b.get(0),b.get(1)]:b?b.get(C):void 0,p=D&&(U?[D.get(0),D.get(1)]:D.get(C))||null;U&&y[0]===void 0&&y[1]===void 0&&(y=void 0);var a=L||{},n=a.fieldSettings,g=Object.assign({},u,n,{config:Z,field:ee,parentField:R,parentFuncs:h,fieldDefinition:L,operator:J,delta:C,isSpecialRange:U,isFuncArg:A,value:y,valueError:p,label:V.label,placeholder:V.placeholder,placeholders:w?w.placeholder:null,textSeparators:x,setValue:H,readonly:k,asyncListValues:F,id:s,groupId:c});return $=="field",l&&f?typeof f=="boolean"?f?g.labelYes||"YES":g.labelNo||"NO":n.listValues?Array.isArray(f)?f.map(function(d){return(0,M.getTitleInListValues)(n.listValues,d)||d}).join(", "):(0,M.getTitleInListValues)(n.listValues,f)||f:""+f:o(g)};i.default=T},48281:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.dummyFn=i.DragIcon=i.ConfirmFn=i.Col=void 0;var E=r(e(68307)),m=r(e(19934)),M=r(e(66111)),I=["children"],T=function(O){var b=O.children,D=(0,m.default)(O,I);return M.default.createElement("div",D,b)};i.Col=T;var P=function(){};i.dummyFn=P;var S=function(){return M.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},M.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),M.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};i.DragIcon=S;var C=function(O){return function(b){var D=b.config.settings.useConfirm,F=D?D():null;return M.default.createElement(O,(0,E.default)({},b,{confirmFn:F}))}};i.ConfirmFn=C},7614:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0});var E={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(i,"FuncWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"ValueFieldWidget",{enumerable:!0,get:function(){return m.default}});var m=r(e(71162)),M=r(e(31404)),I=e(64116);Object.keys(I).forEach(function(T){T==="default"||T==="__esModule"||Object.prototype.hasOwnProperty.call(E,T)||T in i&&i[T]===I[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return I[T]}})})},31755:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(66111)),m=function(I){var T=I.type,P=I.label,S=I.onClick,C=I.readonly,A=I.config,O={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},b=P||O[T];return E.default.createElement("button",{onClick:S,type:"button",disabled:C},b)};i.default=m},7229:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(66111)),m=function(I){var T=I.children,P=I.config;return E.default.createElement(E.default.Fragment,null,T)};i.default=m},69270:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(66111)),m=function(I){var T=I.id,P=I.not,S=I.setNot,C=I.conjunctionOptions,A=I.setConjunction,O=I.disabled,b=I.readonly,D=I.config,F=I.showNot,U=I.notLabel,L=Object.keys(C).length,$=O,j=D.settings.forceShowConj,V=j||L>1&&!$,w=function(){return Object.keys(C).map(function(J){var k=C[J],R=k.id,h=k.name,s=k.label,c=k.checked,o=A.isDummyFn?"__dummy":"";return(b||O)&&!c?null:[E.default.createElement("input",{key:R+o,type:"radio",id:R+o,name:h+o,checked:c,disabled:b||O,value:J,onChange:H}),E.default.createElement("label",{key:R+o+"label",htmlFor:R+o},s)]})},x=function(){var J="not";return[E.default.createElement("input",{key:T+J,type:"checkbox",id:T+J,checked:P,disabled:b,onChange:Z}),E.default.createElement("label",{key:T+J+"label",htmlFor:T+J},U||"NOT")]},H=function(J){return A(J.target.value)},Z=function(J){return S(J.target.checked)};return[F&&x(),V&&w()]};i.default=m},56778:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(66111)),m=function(I){var T=I.items,P=I.setField,S=I.selectedKey,C=I.readonly,A=function D(F){return F.map(function(U){var L=U.items,$=U.path,j=U.label,V=U.disabled;return L?E.default.createElement("optgroup",{disabled:V,key:$,label:j},D(L)):E.default.createElement("option",{disabled:V,key:$,value:$},j)})},O=function(F){return P(F.target.value)},b=S!=null;return E.default.createElement("select",{onChange:O,value:b?S:"",disabled:C},!b&&E.default.createElement("option",{disabled:!0,value:""}),A(T))};i.default=m},59484:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(66111)),m=function(I){var T=I.value,P=I.setValue,S=I.label,C=I.id,A=I.config,O=I.type,b=function(U){return P(U.target.checked)},D=O;return[E.default.createElement("input",{key:C+D,type:"checkbox",id:C+D,checked:!!T,onChange:b}),E.default.createElement("label",{key:C+D+"label",htmlFor:C+D},S)]};i.default=m},31025:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(47452)),m=r(e(66111)),M=function(T){var P=T.config,S=T.valueSources,C=T.valueSrc,A=T.title,O=T.setValueSrc,b=T.readonly,D=function(L){return L.map(function($){var j=(0,E.default)($,2),V=j[0],w=j[1];return m.default.createElement("option",{key:V,value:V},w.label)})},F=function(L){return O(L.target.value)};return m.default.createElement("select",{onChange:F,value:C,disabled:b},D(S))};i.default=M},53937:(te,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(E){var m=E.onOk,M=E.okText,I=E.cancelText,T=E.title;confirm(T)&&m()};i.default=e},64116:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"VanillaBooleanWidget",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(i,"VanillaButton",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"VanillaButtonGroup",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(i,"VanillaConjs",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(i,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(i,"VanillaDateWidget",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(i,"VanillaFieldSelect",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"VanillaNumberWidget",{enumerable:!0,get:function(){return O.default}}),i.VanillaProvider=void 0,Object.defineProperty(i,"VanillaSelectWidget",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"VanillaSliderWidget",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"VanillaSwitch",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(i,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"VanillaTextWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"VanillaTimeWidget",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(i,"VanillaValueSources",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(i,"vanillaConfirm",{enumerable:!0,get:function(){return V.default}});var E=r(e(66111)),m=r(e(14381)),M=r(e(31970)),I=r(e(624)),T=r(e(5567)),P=r(e(97648)),S=r(e(9726)),C=r(e(96346)),A=r(e(69462)),O=r(e(63846)),b=r(e(36530)),D=r(e(56778)),F=r(e(69270)),U=r(e(31755)),L=r(e(7229)),$=r(e(31025)),j=r(e(59484)),V=r(e(53937)),w=function(H){var Z=H.config,ee=H.children;return ee};i.VanillaProvider=w},14381:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=r(e(76833)),I=function(P){var S=P.value,C=P.setValue,A=P.config,O=P.labelYes,b=P.labelNo,D=P.readonly,F=P.customProps,U=F===void 0?{}:F,L=U.radioYes||{},$=U.radioNo||{},j=function(Z){return C(Z.target.checked)},V=function(Z){return C(Z.target.value=="true")},w=(0,M.default)(),x=(0,M.default)();return m.default.createElement(m.default.Fragment,null,m.default.createElement("input",(0,E.default)({key:w,type:"radio",id:w,value:!0,checked:!!S,disabled:D,onChange:V},L)),m.default.createElement("label",{style:{display:"inline"},key:w+"label",htmlFor:w},O),m.default.createElement("input",(0,E.default)({key:x,type:"radio",id:x,value:!1,checked:!S,disabled:D,onChange:V},$)),m.default.createElement("label",{style:{display:"inline"},key:x+"label",htmlFor:x},b))};i.default=I},5567:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=r(e(36365)),I=function(P){var S=P.value,C=P.setValue,A=P.config,O=P.valueFormat,b=P.readonly,D=P.customProps,F=function(L){var $=L.target.value;$==""&&($=void 0),C($)};return m.default.createElement("input",(0,E.default)({type:"date",value:S||"",disabled:b,onChange:F},D))};i.default=I},9726:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=r(e(36365)),I=function(P){var S=P.value,C=P.setValue,A=P.config,O=P.valueFormat,b=P.use12Hours,D=P.readonly,F=P.customProps,U=function(j){var V=j.target.value;V==""?V=void 0:V=(0,M.default)(new Date(V)).format(O),C(V)},L=S;return S?L=(0,M.default)(S).format("YYYY-MM-DDTHH:mm"):L="",m.default.createElement("input",(0,E.default)({type:"datetime-local",value:L,disabled:D,onChange:U},F))};i.default=I},96346:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=e(60399),I=r(e(50234)),T=function(S){var C=S.listValues,A=S.value,O=S.setValue,b=S.allowCustomValues,D=S.readonly,F=S.customProps,U=function(){return(0,M.mapListValues)(C,function(V){var w=V.title,x=V.value;return m.default.createElement("option",{key:x,value:x},w)})},L=function(V){for(var w=[],x=V.options,H=0;H<x.length;H++){var Z=x[H];Z.selected&&w.push(Z.value)}return w.length||(w=void 0),w},$=function(V){return O(L(V.target))};return m.default.createElement("select",(0,E.default)({multiple:!0,onChange:$,value:A,disabled:D},(0,I.default)(F,["showSearch","input","showCheckboxes"])),U())};i.default=T},63846:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=function(T){var P=T.value,S=T.setValue,C=T.config,A=T.readonly,O=T.min,b=T.max,D=T.step,F=T.placeholder,U=T.customProps,L=function(V){var w=V.target.value;w===""||w===null?w=void 0:w=Number(w),S(w)},$=P??"";return m.default.createElement("input",(0,E.default)({type:"number",value:$,placeholder:F,disabled:A,min:O,max:b,step:D,onChange:L},U))};i.default=M},69462:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=e(60399),I=r(e(50234)),T=function(S){var C=S.listValues,A=S.value,O=S.setValue,b=S.allowCustomValues,D=S.readonly,F=S.customProps,U=function(){return(0,M.mapListValues)(C,function(V){var w=V.title,x=V.value;return m.default.createElement("option",{key:x,value:x},w)})},L=function(V){return O(V.target.value)},$=A!=null;return m.default.createElement("select",(0,E.default)({onChange:L,value:$?A:"",disabled:D},(0,I.default)(F,["showSearch","input"])),!$&&m.default.createElement("option",{disabled:!0,value:""}),U())};i.default=T},36530:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=function(T){var P=T.value,S=T.setValue,C=T.config,A=T.readonly,O=T.min,b=T.max,D=T.step,F=T.placeholder,U=T.customProps,L=U===void 0?{}:U,$=L.input||{},j=L.slider||L,V=function(H){var Z=H.target.value;Z===""||Z===null?Z=void 0:Z=Number(Z),S(Z)},w=P??"";return[m.default.createElement("input",(0,E.default)({key:"number",type:"number",value:w,placeholder:F,disabled:A,min:O,max:b,step:D,onChange:V},$)),m.default.createElement("input",(0,E.default)({key:"range",type:"range",value:w,disabled:A,min:O,max:b,step:D,onChange:V},j))]};i.default=M},31970:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=function(T){var P=T.value,S=T.setValue,C=T.config,A=T.readonly,O=T.placeholder,b=T.maxLength,D=T.customProps,F=function($){var j=$.target.value;j===""&&(j=void 0),S(j)},U=P||"";return m.default.createElement("input",(0,E.default)({type:"text",value:U,placeholder:O,disabled:A,onChange:F,maxLength:b},D))};i.default=M},624:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=function(T){var P=T.value,S=T.setValue,C=T.config,A=T.readonly,O=T.placeholder,b=T.maxLength,D=T.maxRows,F=T.fullWidth,U=T.customProps,L=function(V){var w=V.target.value;w===""&&(w=void 0),S(w)},$=P||"";return m.default.createElement("textarea",(0,E.default)({value:$,placeholder:O,disabled:A,onChange:L,maxLength:b,style:{width:F?"100%":void 0}},U))};i.default=M},97648:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(68307)),m=r(e(66111)),M=function(T){var P=T.value,S=T.setValue,C=T.config,A=T.valueFormat,O=T.use12Hours,b=T.readonly,D=T.customProps,F=function(L){var $=L.target.value;$==""&&($=void 0),S($)};return m.default.createElement("input",(0,E.default)({type:"time",value:P||"",disabled:b,onChange:F},D))};i.default=M},20896:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.stringifyForDisplay=i.mongoFormatOp2=i.mongoFormatOp1=i.default=void 0;var m=r(e(92476)),M=r(e(66111)),I=b(e(7614)),T=b(e(22369)),P=e(1901),S=e(60399),C=r(e(36365)),A=e(42009);function O(a){if(typeof WeakMap!="function")return null;var n=new WeakMap,g=new WeakMap;return(O=function(N){return N?g:n})(a)}function b(a,n){if(!n&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var g=O(n);if(g&&g.has(a))return g.get(a);var d={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in a)if(W!=="default"&&Object.prototype.hasOwnProperty.call(a,W)){var _=N?Object.getOwnPropertyDescriptor(a,W):null;_&&(_.get||_.set)?Object.defineProperty(d,W,_):d[W]=a[W]}return d.default=a,g&&g.set(a,d),d}function D(a,n){var g=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);n&&(d=d.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),g.push.apply(g,d)}return g}function F(a){for(var n=1;n<arguments.length;n++){var g=arguments[n]!=null?arguments[n]:{};n%2?D(Object(g),!0).forEach(function(d){(0,m.default)(a,d,g[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(g)):D(Object(g)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(g,d))})}return a}var U=I.VanillaBooleanWidget,L=I.VanillaTextWidget,$=I.VanillaTextAreaWidget,j=I.VanillaDateWidget,V=I.VanillaTimeWidget,w=I.VanillaDateTimeWidget,x=I.VanillaMultiSelectWidget,H=I.VanillaSelectWidget,Z=I.VanillaNumberWidget,ee=I.VanillaSliderWidget,J=I.ValueFieldWidget,k=I.FuncWidget,R=T.ProximityOperator,h={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(n,g,d,N){return n.size>1?(d?"NOT ":"")+"("+n.join(" "+(N?"AND":"&&")+" ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},sqlFormatConj:function(n,g,d){return n.size>1?(d?"NOT ":"")+"("+n.join(" AND ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},spelFormatConj:function(n,g,d,N){return d&&(N=!1),n.size>1?(d?"!":"")+(N?"":"(")+n.join(" && ")+(N?"":")"):(d?"!(":"")+n.first()+(d?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(n,g,d,N){return n.size>1?(d?"NOT ":"")+"("+n.join(" "+(N?"OR":"||")+" ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},sqlFormatConj:function(n,g,d){return n.size>1?(d?"NOT ":"")+"("+n.join(" OR ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},spelFormatConj:function(n,g,d,N){return d&&(N=!1),n.size>1?(d?"!":"")+(N?"":"(")+n.join(" || ")+(N?"":")"):(d?"!(":"")+n.first()+(d?")":"")}}},s=function(n,g,d,N,W,_,X,G,z,K,Y,re){var ne=typeof N=="string"&&!N.startsWith("$")?"$"+N:N,ue=g(_,re);if(ue!==void 0)return d?!X&&(!n||n=="$eq")?(0,m.default)({},N,{$ne:ue}):X?{$not:(0,m.default)({},n,[ne,ue])}:(0,m.default)({},N,{$not:(0,m.default)({},n,ue)}):!X&&(!n||n=="$eq")?(0,m.default)({},N,ue):X?(0,m.default)({},n,[ne,ue]):(0,m.default)({},N,(0,m.default)({},n,ue))};i.mongoFormatOp1=s;var c=function(n,g,d,N,W,_,X,G,z,K,Y){var re=typeof d=="string"&&!d.startsWith("$")?"$"+d:d;if(g){var ne;return _?{$not:{$and:[(0,m.default)({},n[0],[re,W[0]]),(0,m.default)({},n[1],[re,W[1]])]}}:(0,m.default)({},d,{$not:(ne={},(0,m.default)(ne,n[0],W[0]),(0,m.default)(ne,n[1],W[1]),ne)})}else{var ue;return _?{$and:[(0,m.default)({},n[0],[re,W[0]]),(0,m.default)({},n[1],[re,W[1]])]}:(0,m.default)({},d,(ue={},(0,m.default)(ue,n[0],W[0]),(0,m.default)(ue,n[1],W[1]),ue))}};i.mongoFormatOp2=c;var o={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(n,g,d,N,W,_,X,G,z){var K=G?"=":_.label;return W=="boolean"&&G?d=="No"?"NOT ".concat(n):"".concat(n):"".concat(n," ").concat(K," ").concat(d)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(n,g,d,N,W,_,X,G,z){return W=="boolean"&&G?d=="No"?"".concat(n):"NOT ".concat(n):"".concat(n," ").concat(_.label," ").concat(d)},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:s.bind(null,"$lt",function(a){return a},!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:s.bind(null,"$lte",function(a){return a},!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:s.bind(null,"$gt",function(a){return a},!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:s.bind(null,"$gte",function(a){return a},!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,S.escapeRegExp)(a):void 0},!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,S.escapeRegExp)(a):void 0},!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?"^"+(0,S.escapeRegExp)(a):void 0},!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,S.escapeRegExp)(a)+"$":void 0},!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(n,g,d,N,W,_,X,G){var z=d.first(),K=d.get(1);return G?"".concat(n," BETWEEN ").concat(z," AND ").concat(K):"".concat(n," >= ").concat(z," && ").concat(n," <= ").concat(K)},spelFormatOp:function(n,g,d,N,W,_,X,G){var z=d[0],K=d[1];return"".concat(n," >= ").concat(z," && ").concat(n," <= ").concat(K)},mongoFormatOp:c.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null},elasticSearchQueryType:function(n){return n==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(n,g,d,N,W,_,X,G){var z=d.first(),K=d.get(1);return G?"".concat(n," NOT BETWEEN ").concat(z," AND ").concat(K):"(".concat(n," < ").concat(z," || ").concat(n," > ").concat(K,")")},spelFormatOp:function(n,g,d,N,W,_,X,G){var z=d[0],K=d[1];return"(".concat(n," < ").concat(z," || ").concat(n," > ").concat(K,")")},mongoFormatOp:c.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(n,g,d,N,W,_,X,G){return G?"".concat(n," IS EMPTY"):"!".concat(n)},sqlFormatOp:function(n,g,d,N,W,_,X,G){var z=(0,P.sqlEmptyValue)(G);return"COALESCE(".concat(n,", ").concat(z,") = ").concat(z)},spelFormatOp:function(n,g,d,N,W,_,X,G){return"".concat(n," <= ''")},mongoFormatOp:s.bind(null,"$in",function(a,n){return[(0,P.mongoEmptyValue)(n),null]},!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(n,g,d,N,W,_,X,G){return G?"".concat(n," IS NOT EMPTY"):"!!".concat(n)},sqlFormatOp:function(n,g,d,N,W,_,X,G){var z=(0,P.sqlEmptyValue)(G);return"COALESCE(".concat(n,", ").concat(z,") <> ").concat(z)},spelFormatOp:function(n,g,d,N,W,_,X,G){return"".concat(n," > ''")},mongoFormatOp:s.bind(null,"$nin",function(a,n){return[(0,P.mongoEmptyValue)(n),null]},!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(n,g,d,N,W,_,X,G){return G?"".concat(n," IS NULL"):"!".concat(n)},spelFormatOp:function(n,g,d,N,W,_,X,G){return"".concat(n," == null")},mongoFormatOp:s.bind(null,"$eq",function(a){return null},!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(n,g,d,N,W,_,X,G){return G?"".concat(n," IS NOT NULL"):"!!".concat(n)},spelFormatOp:function(n,g,d,N,W,_,X,G){return"".concat(n," != null")},mongoFormatOp:s.bind(null,"$ne",function(a){return null},!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(n,g,d,N,W,_,X,G){var z=G?"=":"==";return"".concat(n," ").concat(z," ").concat(d)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,g,d,N,W,_,X,G){return"".concat(n," != ").concat(d)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(n,g,d,N,W,_,X,G){return N=="value"?"".concat(n," IN (").concat(d.join(", "),")"):"".concat(n," IN (").concat(d,")")},sqlFormatOp:function(n,g,d,N,W,_,X,G){if(N=="value")return"".concat(n," IN (").concat(d.join(", "),")")},spelOp:"$contains",mongoFormatOp:s.bind(null,"$in",function(a){return a},!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(n,g,d,N,W,_,X,G){return N=="value"?"".concat(n," NOT IN (").concat(d.join(", "),")"):"".concat(n," NOT IN (").concat(d,")")},sqlFormatOp:function(n,g,d,N,W,_,X,G){if(N=="value")return"".concat(n," NOT IN (").concat(d.join(", "),")")},mongoFormatOp:s.bind(null,"$nin",function(a){return a},!1),reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(n,g,d,N,W,_,X,G){return N=="value"?"".concat(n," CONTAINS [").concat(d.join(", "),"]"):"".concat(n," CONTAINS ").concat(d)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(n,g,d){return{some:[n,{in:[{var:""},d]}]}},spelOp:"CollectionUtils.containsAny()",elasticSearchQueryType:"term",mongoFormatOp:s.bind(null,"$in",function(a){return a},!1)},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(n,g,d,N,W,_,X,G){return N=="value"?"".concat(n," NOT CONTAINS [").concat(d.join(", "),"]"):"".concat(n," NOT CONTAINS ").concat(d)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(n,g,d,N,W,_,X,G){var z=G?"=":"==";return N=="value"?"".concat(n," ").concat(z," [").concat(d.join(", "),"]"):"".concat(n," ").concat(z," ").concat(d)},sqlFormatOp:function(n,g,d,N,W,_,X,G){if(N=="value")return"".concat(n," = '").concat(d.map(function(z){return P.SqlString.trim(z)}).join(","),"'")},spelOp:".equals",mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(n,g,d){return{all:[n,{in:[{var:""},d]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,g,d,N,W,_,X,G){return N=="value"?"".concat(n," != [").concat(d.join(", "),"]"):"".concat(n," != ").concat(d)},sqlFormatOp:function(n,g,d,N,W,_,X,G){if(N=="value")return"".concat(n," != '").concat(d.map(function(z){return P.SqlString.trim(z)}).join(","),"'")},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(n,g,d,N,W,_,X,G){var z=d.first(),K=d.get(1),Y=X.get("proximity");return"".concat(n," ").concat(z," NEAR/").concat(Y," ").concat(K)},sqlFormatOp:function(n,g,d,N,W,_,X,G){var z=d.first(),K=d.get(1),Y=P.SqlString.trim(z),re=P.SqlString.trim(K),ne=X.get("proximity");return"CONTAINS(".concat(n,", 'NEAR((").concat(Y,", ").concat(re,"), ").concat(ne,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(n){return M.default.createElement(R,n)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(n){return"".concat(n," > 0")},mongoFormatOp:s.bind(null,"$gt",function(a){return 0},!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(n,g,d){return"".concat(n," == ").concat(d)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(n){return"".concat(n," == 0")},mongoFormatOp:s.bind(null,"$eq",function(a){return 0},!1)}},u=function(n){return n==null?"NULL":n.toString()};i.stringifyForDisplay=u;var l={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(n){return M.default.createElement(L,n)},formatValue:function(n,g,d,N){return N?u(n):JSON.stringify(n)},spelFormatValue:function(n,g,d,N,W){if(W.spelOp=="matches"&&N!="regex"){var _;return N=="starts_with"?_="(?s)^".concat((0,S.escapeRegExp)(n),".*"):N=="ends_with"?_="(?s).*".concat((0,S.escapeRegExp)(n),"$"):_="(?s).*".concat((0,S.escapeRegExp)(n),".*"),(0,P.spelEscape)(_)}else return(0,P.spelEscape)(n)},sqlFormatValue:function(n,g,d,N,W){return W.sqlOp=="LIKE"||W.sqlOp=="NOT LIKE"?P.SqlString.escapeLike(n,N!="starts_with",N!="ends_with"):P.SqlString.escape(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(n){return M.default.createElement($,n)},formatValue:function(n,g,d,N){return N?u(n):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){return W.sqlOp=="LIKE"||W.sqlOp=="NOT LIKE"?P.SqlString.escapeLike(n,N!="starts_with",N!="ends_with"):P.SqlString.escape(n)},spelFormatValue:function(n){return(0,P.spelEscape)(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return M.default.createElement(Z,n)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(n,g,d,N){return N?u(n):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){return P.SqlString.escape(n)},spelFormatValue:function(n,g,d){var N=d.step&&!Number.isInteger(d.step);return(0,P.spelEscape)(n,N)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return M.default.createElement(ee,n)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(n,g,d,N){return N?u(n):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){return P.SqlString.escape(n)},spelFormatValue:function(n){return(0,P.spelEscape)(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(H,n)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(n,g,d,N){var W=(0,S.getTitleInListValues)(g.fieldSettings.listValues||g.asyncListValues,n);return N?u(W):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){return P.SqlString.escape(n)},spelFormatValue:function(n){return(0,P.spelEscape)(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(n){return M.default.createElement(x,n)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(n,g,d,N){var W=n.map(function(_){return(0,S.getTitleInListValues)(g.fieldSettings.listValues||g.asyncListValues,_)});return N?W.map(u):n.map(JSON.stringify)},sqlFormatValue:function(n,g,d,N,W){return n.map(function(_){return P.SqlString.escape(_)})},spelFormatValue:function(n,g,d,N,W){var _=W.spelOp&&W.spelOp[0]=="$",X=(0,P.spelEscape)(n);return _&&(X=(0,P.spelFixList)(X)),X},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(j,n)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(n,g,d,N){var W=(0,C.default)(n,d.valueFormat);return N?W.format(d.dateFormat):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){var _=(0,C.default)(n,d.valueFormat);return P.SqlString.escape(_.format("YYYY-MM-DD"))},spelFormatValue:function(n,g,d,N,W){var _=(0,C.default)(n,d.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(_.format("YYYY-MM-DD"),"')")},jsonLogic:function(n,g,d){return(0,C.default)(n,d.valueFormat).toDate()},toJS:function(n,g){var d=(0,C.default)(n,g.valueFormat);return d.isValid()?d.toDate():void 0},mongoFormatValue:function(n,g,d){var N=(0,C.default)(n,d.valueFormat);return N.isValid()?N.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(V,n)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(n,g,d,N){var W=(0,C.default)(n,d.valueFormat);return N?W.format(d.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){var _=(0,C.default)(n,d.valueFormat);return P.SqlString.escape(_.format("HH:mm:ss"))},spelFormatValue:function(n,g,d,N,W){var _=(0,C.default)(n,d.valueFormat);return"T(java.time.LocalTime).parse('".concat(_.format("HH:mm:ss"),"')")},jsonLogic:function(n,g,d){var N=(0,C.default)(n,d.valueFormat);return N.get("hour")*60*60+N.get("minute")*60+N.get("second")},toJS:function(n,g){var d=(0,C.default)(n,g.valueFormat);return d.isValid()?d.get("hour")*60*60+d.get("minute")*60+d.get("second"):void 0},mongoFormatValue:function(n,g,d){var N=(0,C.default)(n,d.valueFormat);return N.get("hour")*60*60+N.get("minute")*60+N.get("second")},elasticSearchFormatValue:function(n,g,d,N){return{script:{script:{source:"doc[".concat(N,"][0].getHour() >== params.min && doc[").concat(N,"][0].getHour() <== params.max"),params:{min:g[0],max:g[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(w,n)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(n,g,d,N){var W=(0,C.default)(n,d.valueFormat);return N?W.format(d.dateFormat+" "+d.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,g,d,N,W){var _=(0,C.default)(n,d.valueFormat);return P.SqlString.escape(_.toDate())},spelFormatValue:function(n,g,d,N,W){var _=(0,C.default)(n,d.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(_.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(n,g,d){return(0,C.default)(n,d.valueFormat).toDate()},toJS:function(n,g){var d=(0,C.default)(n,g.valueFormat);return d.isValid()?d.toDate():void 0},mongoFormatValue:function(n,g,d){var N=(0,C.default)(n,d.valueFormat);return N.isValid()?N.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(n){return M.default.createElement(U,n)},labelYes:"Yes",labelNo:"No",formatValue:function(n,g,d,N){return N?n?"Yes":"No":JSON.stringify(!!n)},sqlFormatValue:function(n,g,d,N,W){return P.SqlString.escape(n)},spelFormatValue:function(n,g,d,N,W){return(0,P.spelEscape)(n)},defaultValue:!1,toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},field:{valueSrc:"field",factory:function(n){return M.default.createElement(J,n)},formatValue:function(n,g,d,N,W,_,X){return N&&X.label||n},sqlFormatValue:function(n,g,d,N,W,_){return n},spelFormatValue:function(n,g,d,N,W){return n},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(n){return M.default.createElement(k,n)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(n){return(0,P.spelEscape)(n===""?null:n)},spelImportValue:function(n){return[n.value,[]]},factory:function(n){var g=n.value,d=n.setValue;return M.default.createElement("input",{type:"text",value:g||"",onChange:function(W){return d(W.target.value)}})}}},f={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},y=F(F({},A.settings),{},{formatField:function(n,g,d,N,W,_){return _?d:n},formatSpelField:function(n,g,d,N,W,_){var X=N.map(function(G,z){var K=G.key,Y=G.parent;return z==0?Y=="[map]"?"#this[".concat((0,P.spelEscape)(K),"]"):(Y=="[class]",K):Y=="map"||Y=="[map]"?"[".concat((0,P.spelEscape)(K),"]"):(Y=="class"||Y=="[class]",".".concat(K))}).join("");return W.isSpelVariable&&(X="#"+X),X},sqlFormatReverse:function(n){if(n!=null)return"NOT("+n+")"},spelFormatReverse:function(n){if(n!=null)return"!("+n+")"},formatReverse:function(n,g,d,N,W,_){if(n!=null)return _?"NOT ("+n+")":"!("+n+")"},formatAggr:function(n,g,d,N,W,_,X,G,z,K){var Y=X.labelForFormat,re=X.cardinality;if(re==0){var ne=n?" HAVE ".concat(n):"";return"".concat(Y," OF ").concat(g).concat(ne)}else if(re==null||re==1){var ue=n?" WHERE ".concat(n):"";return"COUNT OF ".concat(g).concat(ue," ").concat(Y," ").concat(N)}else if(re==2){var ae=n?" WHERE ".concat(n):"",ve=N.first(),se=N.get(1);return"COUNT OF ".concat(g).concat(ae," ").concat(Y," ").concat(ve," AND ").concat(se)}},canCompareFieldWithField:function(n,g,d,N){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5}),p={conjunctions:h,operators:o,widgets:l,types:f,settings:y};i.default=p},42009:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.settings=void 0;var m=T(e(7614)),M=r(e(66111));function I(L){if(typeof WeakMap!="function")return null;var $=new WeakMap,j=new WeakMap;return(I=function(w){return w?j:$})(L)}function T(L,$){if(!$&&L&&L.__esModule)return L;if(L===null||E(L)!=="object"&&typeof L!="function")return{default:L};var j=I($);if(j&&j.has(L))return j.get(L);var V={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in L)if(x!=="default"&&Object.prototype.hasOwnProperty.call(L,x)){var H=w?Object.getOwnPropertyDescriptor(L,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=L[x]}return V.default=L,j&&j.set(L,V),V}var P=m.VanillaFieldSelect,S=m.VanillaConjs,C=m.VanillaButton,A=m.VanillaButtonGroup,O=m.VanillaProvider,b=m.VanillaValueSources,D=m.vanillaConfirm,F=m.VanillaSwitch,U={formatField:function($,j,V,w,x,H){return H?V:$},renderField:function($){return M.default.createElement(P,$)},renderOperator:function($){return M.default.createElement(P,$)},renderFunc:function($){return M.default.createElement(P,$)},renderConjs:function($){return M.default.createElement(S,$)},renderSwitch:function($){return M.default.createElement(F,$)},renderButton:function($){return M.default.createElement(C,$)},renderButtonGroup:function($){return M.default.createElement(A,$)},renderProvider:function($){return M.default.createElement(O,$)},renderValueSources:function($){return M.default.createElement(b,$)},renderConfirm:D,renderSwitchPrefix:function(){return M.default.createElement(M.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};i.settings=U},2986:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.UPPER=i.RELATIVE_DATETIME=i.NOW=i.LOWER=i.LINEAR_REGRESSION=void 0;var E=r(e(36365)),m={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};i.NOW=m;var M={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(C){var A=C.date,O=C.op,b=C.val,D=C.dim;return{date_add:[A,b*(O=="minus"?-1:1),D]}},jsonLogicImport:function(C){var A=C.date_add[0],O=Math.abs(C.date_add[1]),b=C.date_add[1]>=0?"plus":"minus",D=C.date_add[2];return[A,b,O,D]},jsonLogicCustomOps:{date_add:function(C,A,O){return(0,E.default)(C).add(A,O).toDate()}},sqlFormatFunc:function(C){var A=C.date,O=C.op,b=C.val,D=C.dim;return"DATE_ADD(".concat(A,", INTERVAL ").concat(parseInt(b)*(O=="minus"?-1:1)," ").concat(D.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(C){var A=C.date,O=C.op,b=C.val,D=C.dim;return b?"".concat(A," ").concat(O=="minus"?"-":"+"," ").concat(b," ").concat(D):A},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};i.RELATIVE_DATETIME=M;var I={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(C){return C.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.LOWER=I;var T={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(C){return C.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.UPPER=T;var P={label:"Linear regression",returnType:"number",formatFunc:function(C,A){var O=C.coef,b=C.bias,D=C.val;return"(".concat(O," * ").concat(D," + ").concat(b,")")},sqlFormatFunc:function(C){var A=C.coef,O=C.bias,b=C.val;return"(".concat(A," * ").concat(b," + ").concat(O,")")},spelFormatFunc:function(C){var A=C.coef,O=C.bias,b=C.val;return"(".concat(A," * ").concat(b," + ").concat(O,")")},mongoFormatFunc:function(C){var A=C.coef,O=C.bias,b=C.val;return{$sum:[{$multiply:[A,b]},O]}},jsonLogic:function(C){var A=C.coef,O=C.bias,b=C.val;return{"+":[{"*":[A,b]},O]}},jsonLogicImport:function(C){var A=C["+"][0]["*"][0],O=C["+"][0]["*"][1],b=C["+"][1];return[A,O,b]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};i.LINEAR_REGRESSION=P},46724:(te,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SET_VALUE_SRC=i.SET_VALUE=i.SET_TREE=i.SET_OPERATOR_OPTION=i.SET_OPERATOR=i.SET_NOT=i.SET_LOCK=i.SET_FIELD=i.SET_DRAG_START=i.SET_DRAG_PROGRESS=i.SET_DRAG_END=i.SET_CONJUNCTION=i.REMOVE_RULE=i.REMOVE_GROUP=i.PLACEMENT_PREPEND=i.PLACEMENT_BEFORE=i.PLACEMENT_APPEND=i.PLACEMENT_AFTER=i.MOVE_ITEM=i.ADD_RULE=i.ADD_GROUP=i.ADD_CASE_GROUP=void 0;var e="ADD_GROUP";i.ADD_GROUP=e;var r="ADD_CASE_GROUP";i.ADD_CASE_GROUP=r;var E="REMOVE_GROUP";i.REMOVE_GROUP=E;var m="SET_CONJUNCTION";i.SET_CONJUNCTION=m;var M="SET_NOT";i.SET_NOT=M;var I="ADD_RULE";i.ADD_RULE=I;var T="REMOVE_RULE";i.REMOVE_RULE=T;var P="SET_FIELD";i.SET_FIELD=P;var S="SET_OPERATOR";i.SET_OPERATOR=S;var C="SET_VALUE";i.SET_VALUE=C;var A="SET_VALUE_SRC";i.SET_VALUE_SRC=A;var O="SET_OPERATOR_OPTION";i.SET_OPERATOR_OPTION=O;var b="SET_LOCK";i.SET_LOCK=b;var D="SET_TREE";i.SET_TREE=D;var F="MOVE_ITEM";i.MOVE_ITEM=F;var U="after";i.PLACEMENT_AFTER=U;var L="before";i.PLACEMENT_BEFORE=L;var $="append";i.PLACEMENT_APPEND=$;var j="prepend";i.PLACEMENT_PREPEND=j;var V="SET_DRAG_PROGRESS";i.SET_DRAG_PROGRESS=V;var w="SET_DRAG_START";i.SET_DRAG_START=w;var x="SET_DRAG_END";i.SET_DRAG_END=x},93453:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.elasticSearchFormat=$;var E=r(e(92476)),m=e(62413),M=e(20495);function I(j,V){var w=Object.keys(j);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(j);V&&(x=x.filter(function(H){return Object.getOwnPropertyDescriptor(j,H).enumerable})),w.push.apply(w,x)}return w}function T(j){for(var V=1;V<arguments.length;V++){var w=arguments[V]!=null?arguments[V]:{};V%2?I(Object(w),!0).forEach(function(x){(0,E.default)(j,x,w[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(w)):I(Object(w)).forEach(function(x){Object.defineProperty(j,x,Object.getOwnPropertyDescriptor(w,x))})}return j}function P(j){if(j==null)return null;var V=j.split(",").map(Number);return{top_left:{lat:V[0],lon:V[1]},bottom_right:{lat:V[2],lon:V[3]}}}function S(j,V){if(j.length>1)return{gte:"".concat(j[0]),lte:"".concat(j[1])};var w=j[0];switch(V){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(w,"||/d"),lte:"".concat(w,"||+1d")};case"less_or_equal":return{lte:"".concat(w)};case"greater_or_equal":return{gte:"".concat(w)};case"less":return{lt:"".concat(w)};case"greater":return{gt:"".concat(w)};default:return}}function C(j){return{value:"*"+j+"*"}}function A(j,V){switch(j){case"AND":return V?"must_not":"must";case"OR":return V?"should_not":"should";case"NOT":return V?"must":"must_not";default:return}}function O(j,V,w){if(j==="boolean")return V;switch(w){case"term":case"wildcard":return"".concat(V,".keyword");case"geo_bounding_box":case"range":case"match":return V;default:return console.error("Can't determine query field for query type ".concat(w)),null}}function b(j){return{value:j}}function D(j,V){return j}function F(j,V,w,x,H){var Z=D(x,H);switch(j){case"filter":return{script:H.operators[w].elasticSearchScript(x,V)};case"exists":return{field:x};case"match":return(0,E.default)({},Z,V[0]);case"term":return(0,E.default)({},x,V[0]);case"geo_bounding_box":return(0,E.default)({},x,P(V[0]));case"range":return(0,E.default)({},x,S(V,w));case"wildcard":return(0,E.default)({},x,C(V[0]));case"regexp":return(0,E.default)({},x,b(V[0]));default:return}}function U(j,V,w,x,H){if(!(!j||!w||V==null)){var Z=w,ee=x.operators[Z];if(ee){var J=ee,k=J.elasticSearchQueryType,R=!1;if(!k&&ee.reversedOp){R=!0,Z=ee.reversedOp,ee=x.operators[Z];var h=ee;k=h.elasticSearchQueryType}var s=(0,m.getWidgetForFieldOp)(x,j,Z,H),c=x.widgets[s];if(c){var o=c.elasticSearchFormatValue,u;if(typeof k=="function"?u=k(s):u=k,!!u){var l;return typeof o=="function"?l=o(u,V,Z,j,x):l=F(u,V,Z,j,x),R?{bool:{must_not:(0,E.default)({},u,T({},l))}}:(0,E.default)({},u,T({},l))}}}}}function L(j,V,w,x,H){if(!(!j||!j.size)){var Z=j.valueSeq().toArray(),ee=A(V,w),J=Z.map(function(R){return x(R,H)}).filter(function(R){return R!==void 0});if(J.length){var k=J.flat(1/0);return{bool:(0,E.default)({},ee,k)}}}}function $(j,V){if(j){var w=j.get("type"),x=j.get("properties")||new Map;if(w==="rule"&&x.get("field")){var H,Z,ee=x.get("operator"),J=x.get("field"),k=x.get("value").toJS(),R=(H=x.get("valueType"))===null||H===void 0?void 0:H.get(0),h=(Z=x.get("valueSrc"))===null||Z===void 0?void 0:Z.get(0);return h==="func"?void 0:k&&Array.isArray(k[0])?k[0].map(function(u){return U(J,[u],ee,V,h)}):U(J,k,ee,V,h)}if(w==="group"||w==="rule_group"){var s=x.get("not"),c=x.get("conjunction");c||(c=(0,M.defaultConjunction)(V));var o=j.get("children1");return L(o,c,s,$,V)}}}},21058:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(94980);Object.keys(r).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===r[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return r[S]}})});var E=e(98522);Object.keys(E).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===E[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return E[S]}})});var m=e(31468);Object.keys(m).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===m[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return m[S]}})});var M=e(41437);Object.keys(M).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===M[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return M[S]}})});var I=e(15728);Object.keys(I).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===I[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return I[S]}})});var T=e(8310);Object.keys(T).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===T[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return T[S]}})});var P=e(93453);Object.keys(P).forEach(function(S){S==="default"||S==="__esModule"||S in i&&i[S]===P[S]||Object.defineProperty(i,S,{enumerable:!0,get:function(){return P[S]}})})},98522:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.jsonLogicFormat=void 0;var E=r(e(90890)),m=r(e(92476)),M=e(60399),I=e(79746),T=e(62413),P=e(20495),S=e(12177),C=e(40745),A=r(e(50234)),O=r(e(7275));function b(R,h){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);h&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function D(R){for(var h=1;h<arguments.length;h++){var s=arguments[h]!=null?arguments[h]:{};h%2?b(Object(s),!0).forEach(function(c){(0,m.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}function F(R,h){var s=typeof Symbol<"u"&&R[Symbol.iterator]||R["@@iterator"];if(!s){if(Array.isArray(R)||(s=U(R))||h&&R&&typeof R.length=="number"){s&&(R=s);var c=0,o=function(){};return{s:o,n:function(){return c>=R.length?{done:!0}:{done:!1,value:R[c++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,f;return{s:function(){s=s.call(R)},n:function(){var p=s.next();return u=p.done,p},e:function(p){l=!0,f=p},f:function(){try{!u&&s.return!=null&&s.return()}finally{if(l)throw f}}}}function U(R,h){if(R){if(typeof R=="string")return L(R,h);var s=Object.prototype.toString.call(R).slice(8,-1);if(s==="Object"&&R.constructor&&(s=R.constructor.name),s==="Map"||s==="Set")return Array.from(R);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return L(R,h)}}function L(R,h){(h==null||h>R.length)&&(h=R.length);for(var s=0,c=new Array(h);s<h;s++)c[s]=R[s];return c}var $=function(h,s){var c={usedFields:[],errors:[]},o=j(h,s,c,!0),u=c.errors,l=c.usedFields,f=s.settings.fieldSeparator,y={},p=F(l),a;try{for(p.s();!(a=p.n()).done;)for(var n=a.value,g=(0,I.getFieldConfig)(s,n)||{},d=n.split(f),N=y,W=0;W<d.length;W++){var _=d[W],X=(0,I.getFieldConfig)(s,d.slice(0,W+1))||{};W!=d.length-1?X.type=="!group"&&X.mode!="struct"?(N[_]||(N[_]=[{}]),N=N[_][0]):(N[_]||(N[_]={}),N=N[_]):N[_]||(N[_]=null)}}catch(G){p.e(G)}finally{p.f()}return{errors:u,logic:o,data:y}};i.jsonLogicFormat=$;var j=function(h,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(h){var l=h.get("type"),f=h.get("properties")||new C.Map,y=f.get("isLocked"),p=s.settings.jsonLogic.lockedOp,a;return l==="group"||l==="rule_group"?a=V(h,s,c,o,u):l==="rule"&&(a=w(h,s,c,u)),y&&a&&p&&(a=(0,m.default)({},p,a)),a}},V=function(h,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,l=h.get("type"),f=h.get("properties")||new C.Map,y=f.get("mode"),p=h.get("children1"),a=f.get("field");if(p){var n=f.get("conjunction");n||(n=(0,P.defaultConjunction)(s));var g=s.conjunctions[n],d=g.jsonLogicConj||n.toLowerCase(),N=f.get("not");if(d!="and"&&d!="or"){c.errors.push("Conjunction ".concat(d," is not supported"));return}var W=l==="rule_group"&&!o,_=W&&y!="struct"?a:u,X=f.get("operator"),G=X&&(0,I.getOperatorConfig)(s,X,a)||null,z=x(s,f,c,X,u),K=W&&(!X||G.cardinality==0),Y=p.map(function(se){return j(se,s,c,!1,_)}).filter(function(se){return typeof se<"u"});if(W&&y!="struct"&&!K){if(z==null)return}else if(!Y.size)return;var re={};if(Y.size==1&&!o?re=Y.first():re[d]=Y.toList().toJS(),N&&(re={"!":re}),W&&y!="struct"){var ne=ee(c,s,a,u);if(K){var ue=X||"some";re=(0,m.default)({},ue,[ne,re])}else{var ae=Y.size?{filter:[ne,re]}:ne,ve={reduce:[ae,{"+":[1,{var:"accumulator"}]},0]};re=k(s,f,ve,z,X)}}return re}},w=function(h,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=h.get("properties")||new C.Map,l=u.get("field"),f=u.get("operator"),y=u.get("operatorOptions");if(y=y?y.toJS():null,y&&!Object.keys(y).length&&(y=null),!(l==null||f==null)){var p=(0,I.getFieldConfig)(s,l)||{},a=(0,I.getOperatorConfig)(s,f,l)||{},n=a.reversedOp,g=(0,I.getOperatorConfig)(s,n,l)||{},d=!1;if(!a.jsonLogic&&!g.jsonLogic){c.errors.push("Operator ".concat(f," is not supported"));return}if(!a.jsonLogic&&g.jsonLogic){d=!0;var N=[n,f];f=N[0],n=N[1];var W=[g,a];a=W[0],g=W[1]}var _=x(s,u,c,f,o);if(_!==void 0){var X=ee(c,s,l,o);return k(s,u,X,_,f,y,p,d)}}},x=function(h,s,c,o,u){var l=s.get("field"),f=s.get("valueSrc"),y=s.get("valueType"),p=(0,I.getFieldConfig)(h,l)||{},a=(0,I.getOperatorConfig)(h,o,l)||{},n=(0,M.defaultValue)(a.cardinality,1),g=s.get("value"),d=s.get("asyncListValues");if(g!=null){var N=[],W=[],_=c.usedFields,X=g.map(function(z,K){var Y=f?f.get(K):null,re=y?y.get(K):null,ne=(0,S.completeValue)(z,Y,h),ue=(0,T.getWidgetForFieldOp)(h,l,o,Y),ae=(0,A.default)((0,I.getFieldWidgetConfig)(h,l,o,ue,Y),["factory"]),ve=H(c,h,ne,Y,re,ae,p,o,a,u,d);return ve!==void 0&&(N.push(Y),W.push(re)),ve}),G=X.filter(function(z){return z===void 0}).size>0;if(X.size<n||G){c.usedFields=_;return}return n>1?X.toArray():n==1?X.first():null}},H=function(h,s,c,o,u,l,f,y,p){var a=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,n=arguments.length>10?arguments[10]:void 0;if(c!==void 0){var g;if(o=="field")g=ee(h,s,c,a);else if(o=="func")g=Z(h,s,c,a);else if(typeof l.jsonLogic=="function"){var d=l.jsonLogic,N=[c,D(D({},(0,O.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,A.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];y&&(N.push(y),N.push(p)),g=d.apply(void 0,N)}else g=c;return g}},Z=function(h,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=c.get("func"),l=c.get("args"),f=(0,I.getFuncConfig)(s,u);if(!f.jsonLogic){h.errors.push("Func ".concat(u," is not supported"));return}var y={};for(var p in f.args){var a=f.args[p],n=(0,I.getFieldConfig)(s,a),g=l?l.get(p):void 0,d=g?g.get("value"):void 0,N=g?g.get("valueSrc"):void 0,W=H(h,s,d,N,a.type,n,a,null,null,o);if(d!=null&&W===void 0){h.errors.push("Can't format value of arg ".concat(p," for func ").concat(u));return}W!==void 0&&(y[p]=W)}var _=Object.values(y),X;if(typeof f.jsonLogic=="function"){var G=f.jsonLogic,z=[y];X=G.apply(void 0,z)}else{var K=f.jsonLogic||u,Y=!!f.jsonLogicIsMethod;if(Y){var re=_[0],ne=_.slice(1);ne.length?X={method:[re,K,ne]}:X={method:[re,K]}}else X=(0,m.default)({},K,_)}return X},ee=function(h,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=s.settings,l=u.fieldSeparator,f=u.jsonLogic,y;if(c){Array.isArray(c)&&(c=c.join(l));var p=(0,I.getFieldConfig)(s,c)||{},a=c;if(p.fieldName&&(a=p.fieldName),o){var n=(0,I.getFieldConfig)(s,o)||{},g=o;n.fieldName&&(g=n.fieldName),a.indexOf(g+l)==0?a=a.slice((g+l).length):h.errors.push("Can't cut group ".concat(g," from field ").concat(a))}var d=p.jsonLogicVar||(p.type=="!group"?f.groupVarKey:"var");y=(0,m.default)({},d,a),h.usedFields.indexOf(c)==-1&&h.usedFields.push(c)}return y},J=function(h,s,c,o){var u=h,l=(0,M.defaultValue)(s.cardinality,1),f=(0,M.defaultValue)(s._jsonLogicIsRevArgs,!1);typeof s.jsonLogic=="string"&&(u=s.jsonLogic);var y=["<","<=",">",">="],p=["==","!="],a=function(g,d,N,W,_){return l==0&&p.includes(u)?(0,m.default)({},u,[c,null]):l==0?(0,m.default)({},u,c):l==1&&f?(0,m.default)({},u,[o,c]):l==1?(0,m.default)({},u,[c,o]):l==2&&y.includes(u)?(0,m.default)({},u,[o[0],c,o[1]]):(0,m.default)({},u,[c].concat((0,E.default)(o)))};return a},k=function(h,s,c,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,p=s.get("field"),a=(0,I.getOperatorConfig)(h,u,p)||{},n=typeof a.jsonLogic=="function"?a.jsonLogic:J(u,a,c,o),g=[c,u,o,(0,A.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),l,f],d=n.apply(void 0,g);return y&&(d={"!":d}),d}},31468:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.mongodbFormat=i._mongodbFormat=void 0;var E=r(e(47452)),m=r(e(92476)),M=r(e(90890)),I=r(e(91148)),T=e(60399),P=e(79746),S=e(62413),C=e(20495),A=e(12177),O=r(e(50234)),b=r(e(7275)),D=e(40745),F=e(42009);function U(R,h){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);h&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function L(R){for(var h=1;h<arguments.length;h++){var s=arguments[h]!=null?arguments[h]:{};h%2?U(Object(s),!0).forEach(function(c){(0,m.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}var $=function(h){return(0,I.default)(h)=="object"&&h!==null&&!Array.isArray(h)},j=function(h,s){return V(h,s,!1)};i.mongodbFormat=j;var V=function(h,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o={errors:[]},u=w([],h,s,o);return c?[u,o.errors]:(o.errors.length&&console.warn("Errors while exporting to MongoDb:",o.errors),u)};i._mongodbFormat=V;var w=function(h,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(s){var p=s.get("type");if(p==="group"||p==="rule_group")return x(h,s,c,o,u,l,f,y);if(p==="rule")return H(h,s,c,o,u,l,f,y)}},x=function(h,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,p=s.get("type"),a=s.get("properties")||new D.Map,n=s.get("children1"),g=c.settings.canShortMongoQuery;if(n){var d=h.filter(function(ce){return ce.get("type")=="rule_group"}).length>0,N=h.filter(function(ce){return ce.get("type")=="rule_group"}).map(function(ce){return ce.get("properties").get("field")}).slice(-1).pop(),W=d&&N,_=p==="rule_group"?a.get("field"):null,X=ee(_,c,o,W),G=(0,P.getFieldConfig)(c,_)||{},z=G.mode,K=_&&z=="array",Y=u?!a.get("not"):a.get("not"),re=n.map(function(ce){return w([].concat((0,M.default)(h),[s]),ce,c,o,Y,!0,z=="array"?function(Ne){return"$$el.".concat(Ne)}:void 0)}).filter(function(ce){return typeof ce<"u"});if(!(!K&&!re.size)){var ne=a.get("conjunction");ne||(ne=(0,C.defaultConjunction)(c));var ue=c.conjunctions[ne],ae=ue.reversedConj;Y&&ae&&(ne=ae,ue=c.conjunctions[ne]);var ve=ue.mongoConj,se;if(re.size==1)se=re.first();else if(re.size>1){var ge=re.toList().toJS(),ye=g&&ve=="$and";ye&&(se=ge.reduce(function(ce,Ne){if(ce){for(var we in Ne){if(we[0]=="$"){ce=void 0;break}if(ce[we]==null)ce[we]=Ne[we];else{var je=ce[we],Ke=Ne[we];$(je)||(je={$eq:je}),$(Ke)||(Ke={$eq:Ke});var Ye=Object.keys(je)[0],ke=Object.keys(Ke)[0];if(Ye==ke){ce=void 0;break}ce[we]=Object.assign({},je,Ke)}}return ce}},{})),se||(se=(0,m.default)({},ve,ge))}if(_)if(z=="array"){var Oe={$size:X},Se=se?{$size:{$filter:{input:"$"+X,as:"el",cond:se}}}:Oe;se=w(h,s.set("type","rule"),c,o,!1,!1,function(ce){return Se},Oe),se={$expr:se}}else se=(0,m.default)({},X,{$elemMatch:se});return se}}},H=function(h,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,p=s.get("properties")||new D.Map,a=h.filter(function(at){return at.get("type")=="rule_group"}).length>0,n=h.filter(function(at){return at.get("type")=="rule_group"}).map(function(at){return at.get("properties").get("field")}).slice(-1).pop(),g=a&&n,d=p.get("operator"),N=p.get("operatorOptions"),W=p.get("field"),_=p.get("value"),X=p.get("valueSrc"),G=p.get("valueType"),z=p.get("asyncListValues");if(!(W==null||d==null||_===void 0)){var K=(0,P.getFieldConfig)(c,W)||{},Y=(0,P.getOperatorConfig)(c,d,W)||{},re=Y.reversedOp,ne=(0,P.getOperatorConfig)(c,re,W)||{},ue=(0,T.defaultValue)(Y.cardinality,1),ae=u;if(ae&&re){var ve=[re,d];d=ve[0],re=ve[1];var se=[ne,Y];Y=se[0],ne=se[1],ae=!1}var ge=ee(W,c,o,g),ye=[],Oe=[],Se=!1,ce=_.map(function(at,He){var fe=X?X.get(He):null,Ee=G?G.get(He):null,Ce=(0,A.completeValue)(at,fe,c),Fe=(0,S.getWidgetForFieldOp)(c,W,d,fe),De=(0,O.default)((0,P.getFieldWidgetConfig)(c,W,d,Fe,fe),["factory"]),Me=Z(o,c,Ce,fe,Ee,De,K,g,d,Y,z),Ae=(0,E.default)(Me,2),$e=Ae[0],rt=Ae[1];return $e!==void 0&&(Se=Se||rt,ye.push(fe),Oe.push(Ee)),$e});f&&(Se=!0);var Ne=Se&&l,we=ce.filter(function(at){return at===void 0}).size>0;if(!(ce.size<ue||we)){var je=ue>1?ce.toArray():ue==1?ce.first():null,Ke=Y.mongoFormatOp;if(!Ke){o.errors.push("Operator ".concat(d," is not supported"));return}var Ye=[f?f(ge):ge,d,y!==void 0&&je==null?y:je,Se,ye.length>1?ye:ye[0],Oe.length>1?Oe:Oe[0],(0,O.default)(Y,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),N,K],ke=Ke.apply(void 0,Ye);return Ne&&(ke={$expr:ke}),ae&&(ke={$not:ke}),ke}}},Z=function(h,s,c,o,u,l,f,y,p,a,n){if(c===void 0)return[void 0,!1];var g,d=!1;if(o=="field"){var N=J(h,s,c,y),W=(0,E.default)(N,2);g=W[0],d=W[1]}else if(o=="func"){var _=k(h,s,c,y),X=(0,E.default)(_,2);g=X[0],d=X[1]}else if(typeof l.mongoFormatValue=="function"){var G=l.mongoFormatValue,z=[c,L(L({},(0,b.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,O.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];p&&(z.push(p),z.push(a)),g=G.apply(void 0,z)}else g=c;return[g,d]},ee=function(h,s,c,o){if(h){var u=(0,P.getFieldConfig)(s,h)||{},l=s.settings.fieldSeparator,f=Array.isArray(h)?h:h.split(l),y=Array.isArray(h)?h.join(l):h;if(u.fieldName&&(y=u.fieldName),o){var p=(0,P.getFieldConfig)(s,o)||{},a=o;p.fieldName&&(a=p.fieldName),y.indexOf(a+".")==0?y=y.slice((a+".").length):c.errors.push("Can't cut group ".concat(a," from field ").concat(y))}return y}},J=function(h,s,c,o){var u=s.settings.fieldSeparator,l,f=!0;if(c){var y=(0,P.getFieldConfig)(s,c)||{},p=Array.isArray(c)?c:c.split(u),a=(0,S.getFieldPath)(c,s),n=(0,S.getFieldPathLabels)(c,s),g=n?n.join(u):null,d=s.settings.formatField||F.settings.formatField,N=ee(c,s,h,o),W=d(N,p,g,y,s,!1);l="$"+W}return[l,f]},k=function(h,s,c,o){var u=!0,l,f=c.get("func"),y=c.get("args"),p=(0,P.getFuncConfig)(s,f),a=p.mongoFunc||f,n=p.mongoArgsAsObject,g={},d=0,N=void 0;for(var W in p.args){var _=p.args[W],X=(0,P.getFieldConfig)(s,_),G=y?y.get(W):void 0,z=G?G.get("value"):void 0,K=G?G.get("valueSrc"):void 0,Y=G?G.get("asyncListValues"):void 0,re=(0,S.getWidgetForFieldOp)(s,X,null,K),ne=(0,O.default)((0,P.getFieldWidgetConfig)(s,X,null,re,K),["factory"]),ue=Z(h,s,z,K,_.type,ne,X,o,null,null,Y),ae=(0,E.default)(ue,2),ve=ae[0],se=ae[1];if(z!=null&&ve===void 0)return h.errors.push("Can't format value of arg ".concat(W," for func ").concat(f)),[void 0,!1];d++,ve!==void 0&&(g[W]=ve,N=ve)}if(typeof p.mongoFormatFunc=="function"){var ge=p.mongoFormatFunc,ye=[g];l=ge.apply(void 0,ye)}else{if(p.mongoFormatFunc===null)return h.errors.push("Functon ".concat(a," is not supported")),[void 0,!1];n?l=(0,m.default)({},a,g):d==1&&N!==void 0?l=(0,m.default)({},a,N):l=(0,m.default)({},a,Object.values(g))}return[l,u]}},94980:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryBuilderFormat=void 0;var E=r(e(92476)),m=e(60399),M=e(79746),I=e(20495),T=e(62413),P=e(12177),S=e(40745);function C(U,L){var $=Object.keys(U);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(U);L&&(j=j.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),$.push.apply($,j)}return $}function A(U){for(var L=1;L<arguments.length;L++){var $=arguments[L]!=null?arguments[L]:{};L%2?C(Object($),!0).forEach(function(j){(0,E.default)(U,j,$[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors($)):C(Object($)).forEach(function(j){Object.defineProperty(U,j,Object.getOwnPropertyDescriptor($,j))})}return U}var O=function(L,$){var j={usedFields:[]},V=b(L,$,j);if(V)return A(A({},V),j)};i.queryBuilderFormat=O;var b=function(L,$,j){if(L){var V=L.get("type"),w=L.get("children1");if((V==="group"||V==="rule_group")&&w&&w.size)return D(L,$,j);if(V==="rule")return F(L,$,j)}},D=function(L,$,j){var V=L.get("properties")||new S.Map,w=L.get("children1"),x=L.get("id"),H=w.map(function(k){return b(k,$,j)}).filter(function(k){return typeof k<"u"});if(H.size){var Z=V.get("conjunction");Z||(Z=(0,I.defaultConjunction)($));var ee=V.get("not"),J={id:x,rules:H.toList(),condition:Z.toUpperCase(),not:ee};return J}},F=function(L,$,j){var V=L.get("properties")||new S.Map,w=L.get("id"),x=V.get("operator"),H=V.get("operatorOptions"),Z=V.get("field"),ee=V.get("value"),J=V.get("valueSrc"),k=V.get("valueType"),R=ee.filter(function(d){return d===void 0}).size>0;if(!(Z==null||x==null||R)){var h=(0,M.getFieldConfig)($,Z)||{},s=(0,M.getOperatorConfig)($,x,Z)||{},c=h.type||"undefined",o=(0,m.defaultValue)(s.cardinality,1),u=$.types[h.type]||{},l=(0,T.formatFieldName)(Z,$,j);if(!(ee.size<o)){j.usedFields.indexOf(Z)==-1&&j.usedFields.push(Z),ee=ee.toArray(),J=J.toArray(),k=k.toArray();for(var f=[],y=0;y<ee.length;y++){var p={type:k[y],value:ee[y]};if(f.push(p),J[y]=="field"){var a=ee[y];j.usedFields.indexOf(a)==-1&&j.usedFields.push(a)}}var n=H?H.toJS():null;n&&!Object.keys(n).length&&(n=null);var g={id:w,fieldName:l,type:c,input:u.mainWidget,operator:x};return n&&(g.operatorOptions=n),g.values=f,g}}}},8310:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryString=void 0;var E=r(e(92476)),m=r(e(47452)),M=r(e(90890)),I=e(79746),T=e(62413),P=r(e(50234)),S=r(e(7275)),C=e(60399),A=e(20495),O=e(42009),b=e(12177),D=e(40745);function F(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(J);k&&(h=h.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,h)}return R}function U(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?F(Object(R),!0).forEach(function(h){(0,E.default)(J,h,R[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):F(Object(R)).forEach(function(h){Object.defineProperty(J,h,Object.getOwnPropertyDescriptor(R,h))})}return J}var L=function(k,R){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s={errors:[]},c=$(k,R,s,h,null);return s.errors.length&&console.warn("Errors while exporting to string:",s.errors),c};i.queryString=L;var $=function(k,R,h){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(k){var o=k.get("type"),u=k.get("children1");if(o==="group"||o==="rule_group")return j(k,R,h,s,c);if(o==="rule")return x(k,R,h,s,c)}},j=function(k,R,h){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=k.get("type"),u=k.get("properties")||new D.Map,l=u.get("mode"),f=k.get("children1");if(f){var y=o==="rule_group",p=y&&l=="array"?u.get("field"):null,a=y&&l=="array",n=u.get("not"),g=f.map(function(Y){return $(Y,R,h,s,p)}).filter(function(Y){return typeof Y<"u"});if(!(!a&&!g.size)){var d=u.get("conjunction");d||(d=(0,A.defaultConjunction)(R));var N=R.conjunctions[d],W=g.size?N.formatConj(g,d,n,s):null,_;if(p){var X=x(k,R,h,s,c,!0);if(X){var G,z=X.pop(),K=[W].concat((0,M.default)(X));_=(G=R.settings).formatAggr.apply(G,(0,M.default)(K)),z&&(_=R.settings.formatReverse(_,null,null,null,null,s))}}else _=W;return _}}},V=function(k,R,h,s,c,o){var u=R.get("field"),l=R.get("valueSrc"),f=R.get("valueType"),y=(0,I.getFieldConfig)(k,u)||{},p=s||R.get("operator"),a=(0,I.getOperatorConfig)(k,p,u)||{},n=(0,C.defaultValue)(a.cardinality,1),g=R.get("value"),d=R.get("asyncListValues"),N=[],W=[],_;if(g!=null){var X=g.map(function(z,K){var Y=l?l.get(K):null,re=f?f.get(K):null,ne=(0,b.completeValue)(z,Y,k),ue=(0,T.getWidgetForFieldOp)(k,u,p,Y),ae=(0,P.default)((0,I.getFieldWidgetConfig)(k,u,p,ue,Y),["factory"]),ve=H(k,h,ne,Y,re,ae,y,p,a,c,o,d);return ve!==void 0&&(N.push(Y),W.push(re)),ve}),G=X.filter(function(z){return z===void 0}).size>0;G||X.size<n||(_=n==1?X.first():X)}return[_,N.length>1?N:N[0],W.length>1?W:W[0]]},w=function(k,R){var h=R.labelForFormat||k,s=(0,C.defaultValue)(R.cardinality,1),c;return s==0?c=function(u,l,f,y,p,a,n,g){return"".concat(u," ").concat(h)}:s==1?c=function(u,l,f,y,p,a,n,g){return"".concat(u," ").concat(h," ").concat(f)}:s==2&&(c=function(u,l,f,y,p,a,n,g){var d=f.first(),N=f.get(1);return"".concat(u," ").concat(h," ").concat(d," AND ").concat(N)}),c},x=function(k,R,h){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,u=k.get("properties")||new D.Map,l=u.get("field"),f=u.get("operator"),y=u.get("operatorOptions");if(!(l==null||f==null)){var p=(0,I.getFieldConfig)(R,l)||{},a=(0,I.getOperatorConfig)(R,f,l)||{},n=a.reversedOp,g=(0,I.getOperatorConfig)(R,n,l)||{},d=!1,N=a.formatOp;if(!N&&n&&(N=g.formatOp,N)){d=!0;var W=[n,f];f=W[0],n=W[1];var _=[g,a];a=_[0],g=_[1]}if(N||(N=w(f,a)),!!N){var X=Z(R,h,l,s,c),G=V(R,u,h,f,s,c),z=(0,m.default)(G,3),K=z[0],Y=z[1],re=z[2];if(K!==void 0){var ne=[X,f,K,Y,re,(0,P.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),y,s,p,d];if(o)return ne;var ue=N.apply(void 0,ne);return d&&(ue=R.settings.formatReverse(ue,f,n,a,g,s)),ue}}}},H=function(k,R,h,s,c,o,u,l,f,y){var p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,a=arguments.length>11?arguments[11]:void 0;if(h!==void 0){var n;if(s=="field")n=Z(k,R,h,y,p);else if(s=="func")n=ee(k,R,h,y,p);else if(typeof o.formatValue=="function"){var g=o.formatValue,d=[h,U(U({},(0,S.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:a}),(0,P.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),y];if(l&&(d.push(l),d.push(f)),s=="field"){var N=(0,I.getFieldConfig)(k,h)||{};d.push(N)}n=g.apply(void 0,d)}else n=h;return n}},Z=function(k,R,h,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,u=k.settings,l=u.fieldSeparator,f=u.fieldSeparatorDisplay,y=null;if(h){var p=(0,I.getFieldConfig)(k,h)||{},a=Array.isArray(h)?h:h.split(l),n=(0,T.getFieldPath)(h,k),g=(0,T.getFieldPathLabels)(h,k,o?c:null),d=g?g.join(f):null,N=p.label2||d,W=k.settings.formatField||O.settings.formatField,_=(0,T.formatFieldName)(h,k,R,o?c:null);y=W(_,a,N,p,k,s)}return y},ee=function(k,R,h,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=h.get("func"),u=h.get("args"),l=(0,I.getFuncConfig)(k,o),f=s&&l.label||o,y={},p={};for(var a in l.args){var n=l.args[a],g=(0,I.getFieldConfig)(k,n),d=u?u.get(a):void 0,N=d?d.get("value"):void 0,W=d?d.get("valueSrc"):void 0,_=d?d.get("asyncListValues"):void 0,X=H(k,R,N,W,n.type,g,n,null,null,s,c,_),G=s&&n.label||a;X!==void 0&&(y[a]=X,p[G]=X)}var z=null;if(typeof l.formatFunc=="function"){var K=l.formatFunc,Y=[y,s];z=K.apply(void 0,Y)}else{var re=Object.entries(p).map(function(ne){var ue=(0,m.default)(ne,2),ae=ue[0],ve=ue[1];return s?"".concat(ae,": ").concat(ve):"".concat(ve)}).join(", ");z="".concat(f,"(").concat(re,")")}return z}},15728:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.spelFormat=i._spelFormat=void 0;var E=r(e(33138)),m=r(e(92476)),M=r(e(47452)),I=e(79746),T=e(62413),P=r(e(50234)),S=r(e(7275)),C=e(60399),A=e(20495),O=e(42009),b=e(12177),D=e(40745),F=e(1901);function U(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(o,y).enumerable})),l.push.apply(l,f)}return l}function L(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?U(Object(l),!0).forEach(function(f){(0,m.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):U(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var $=function(u,l){return j(u,l,!1)};i.spelFormat=$;var j=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y={errors:[]},p=V(u,l,y,null);return f?[p,y.errors]:(y.errors.length&&console.warn("Errors while exporting to SpEL:",y.errors),p)};i._spelFormat=j;var V=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(u){var p=u.get("type");if(p==="group"||p==="rule_group")return H(u,l,f,y);if(p==="rule")return k(u,l,f,y);if(p=="switch_group")return x(u,l,f,y);if(p=="case_group")return w(u,l,f,y)}},w=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("type");if(p!="case_group"){f.errors.push("Unexpected child of type ".concat(p," inside switch"));return}var a=u.get("properties")||new D.Map,n=R(l,a,f,null,y,"!case_value"),g=(0,M.default)(n,3),d=g[0],N=g[1],W=g[2],_=H(u,l,f,y);return[_,d]},x=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("properties")||new D.Map,a=u.get("children1");if(a){var n=a.map(function(K){return w(K,l,f,null)}).filter(function(K){return typeof K<"u"}).toArray();if(n.length){if(n.length==1&&!n[0][0])return n[0][1];for(var g=[],d=0;d<n.length;d++)d!=n.length-1&&!n[d][0]?f.errors.push("No condition for case ".concat(d)):(g.push(n[d]),d==n.length-1&&n[d][0]&&g.push([void 0,null]));for(var N="",W="",_=0;_<g.length;_++){var X=(0,M.default)(g[_],2),G=X[0],z=X[1];z==null&&(z="null"),G==null&&(G="true"),_!=g.length-1?(N+="(".concat(G," ? ").concat(z," : "),W+=")"):N+="".concat(z)}return N+W}}},H=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("type"),a=u.get("properties")||new D.Map,n=a.get("mode"),g=u.get("children1"),d=a.get("field");if(g){var N=a.get("conjunction");N||(N=(0,A.defaultConjunction)(l));var W=l.conjunctions[N],_=a.get("not"),X=p==="rule_group",G=X&&n!="struct",z=G?d:y,K=(0,I.getFieldConfig)(l,z)||{},Y=K.isSpelArray,re=a.get("operator");!re&&(!n||n=="some")&&(re="some");var ne=J(l,re,d),ue=ne!=re,ae=re&&(0,I.getOperatorConfig)(l,ne,d)||null,ve=X&&(!ne||ae.cardinality==0),se=R(l,a,f,ne,y,null),ge=(0,M.default)(se,3),ye=ge[0],Oe=ge[1],Se=ge[2],ce=g.map(function(fe){return V(fe,l,f,z)}).filter(function(fe){return typeof fe<"u"});if(G&&!ve){if(ye==null)return}else if(!ce.size)return;var Ne=X,we=ce.size?W.spelFormatConj(ce,N,_,Ne):null,je;if(G){var Ke=s(f,l,d,y),Ye=Y?".length":".size()",ke="".concat(Ke).concat(Ye),at=we?"".concat(Ke,".?[").concat(we,"]").concat(Ye):ke,He=ve?ke:ye;je=ee(f,l,a,at,He,ne,Oe,Se,ue)}else je=we;return je}},Z=function(u,l){var f=l.spelOp;if(f){var y=f[0]=="$",p=f[0]=="."||y,a=f.substring(f.length-2)=="()",n=p?f.slice(1):a?f.substring(0,f.length-2):f,g,d=(0,C.defaultValue)(l.cardinality,1);return d==0?g=function(W,_,X,G,z,K,Y,re){return p?"".concat(W,".").concat(n,"()"):"".concat(W," ").concat(n)}:d==1&&(g=function(W,_,X,G,z,K,Y,re){return y?"".concat(X,".").concat(n,"(").concat(W,")"):a?"".concat(n,"(").concat(W,", ").concat(X,")"):p?"".concat(W,".").concat(n,"(").concat(X,")"):"".concat(W," ").concat(n," ").concat(X)}),g}},ee=function(u,l,f,y,p,a,n,g){var d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,N=f.get("field"),W=(0,I.getOperatorConfig)(l,a,N)||{},_=(0,I.getFieldConfig)(l,N)||{},X=f.get("operatorOptions"),G=W.spelFormatOp||Z(a,W);if(!G){u.errors.push("Operator ".concat(a," is not supported"));return}var z=[y,a,p,n,g,(0,P.default)(W,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),X,_],K;return K=G.apply(void 0,z),d&&(K=l.settings.spelFormatReverse(K)),K===void 0&&u.errors.push("Operator ".concat(a," is not supported for value source ").concat(n)),K},J=function(u,l,f){if(l){var y=(0,I.getOperatorConfig)(u,l,f)||{},p=y.reversedOp,a=(0,I.getOperatorConfig)(u,p,f)||{},n=!1,g=y.spelOp||y.spelFormatOp,d=a.spelOp||a.spelFormatOp;if(!(!g&&!d)){if(!g&&d){n=!0;var N=[p,l];l=N[0],p=N[1];var W=[a,y];y=W[0],a=W[1]}return l}}},k=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("properties")||new D.Map,a=p.get("field"),n=p.get("operator");if(!(a==null||n==null)){var g=J(l,n,a);if(!g){f.errors.push("Operator ".concat(n," is not supported"));return}var d=g!=n,N=R(l,p,f,g,y,null),W=(0,M.default)(N,3),_=W[0],X=W[1],G=W[2];if(_!==void 0){var z=s(f,l,a,y),K=ee(f,l,p,z,_,g,X,G,d);return K}}},R=function(u,l,f,y,p){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,n=l.get("field"),g=l.get("valueSrc"),d=l.get("valueType");(a=="!case_value"||d&&d.get(0)=="case_value")&&(n="!case_value");var N=(0,I.getFieldConfig)(u,n)||{},W=(0,I.getOperatorConfig)(u,y,n)||{},_=(0,C.defaultValue)(W.cardinality,1),X=l.get("value"),G=l.get("asyncListValues"),z=[],K=[],Y;if(X!=null){var re=X.map(function(ue,ae){var ve=g?g.get(ae):null,se=d?d.get(ae):null,ge=(0,b.completeValue)(ue,ve,u),ye=(0,T.getWidgetForFieldOp)(u,n,y,ve),Oe=(0,P.default)((0,I.getFieldWidgetConfig)(u,n,y,ye,ve),["factory"]),Se=h(f,u,ge,ve,se,Oe,N,y,W,p,G);return Se!==void 0&&(z.push(ve),K.push(se)),Se}),ne=re.filter(function(ue){return ue===void 0}).size>0;re.size<_||ne||(Y=_>1?re.toArray():_==1?re.first():null)}return[Y,z.length>1?z:z[0],K.length>1?K:K[0]]},h=function(u,l,f,y,p,a,n,g,d){var N=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,W=arguments.length>10?arguments[10]:void 0;if(f!==void 0){var _;if(y=="field")_=s(u,l,f,N);else if(y=="func")_=c(u,l,f,N);else if(typeof a.spelFormatValue=="function"){var X=a.spelFormatValue,G=[f,L(L({},(0,S.default)(n,["fieldSettings","listValues"])),{},{asyncListValues:W}),(0,P.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(g&&(G.push(g),G.push(d)),y=="field"){var z=(0,I.getFieldConfig)(l,f)||{};G.push(z)}_=X.apply(void 0,G)}else _=(0,F.spelEscape)(f);return _}},s=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(f){var p=l.settings.fieldSeparator,a=(0,I.getFieldConfig)(l,f)||{},n=Array.isArray(f)?f:f.split(p),g=(0,T.getFieldPath)(f,l,y),d=(0,T.getFieldPartsConfigs)(f,l,y),N=l.settings.formatSpelField,W=(0,T.formatFieldName)(f,l,u);if(y){var _=(0,I.getFieldConfig)(l,y)||{},X=y;_.fieldName&&(X=_.fieldName),W.indexOf(X+p)==0?W=W.slice((X+p).length):u.errors.push("Can't cut group ".concat(X," from field ").concat(W))}var G=d.map(function(K){var Y=(0,M.default)(K,3),re=Y[0],ne=Y[1],ue=Y[2],ae;ue&&(ue.type=="!struct"||ue.type=="!group"&&ue.mode=="struct"?ae=ne.isSpelMap?"map":"class":ue.type=="!group"?ae=ne.isSpelItemMap?"[map]":"[class]":ae="class");var ve=ne?.isSpelVariable;return{key:re,parent:ae,isSpelVariable:ve}}),z=N(W,y,n,G,a,l);return z}},c=function(u,l,f){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=f.get("func"),a=f.get("args"),n=(0,I.getFuncConfig)(l,p),g=n.spelFunc||p,d={};for(var N in n.args){var W=n.args[N],_=(0,I.getFieldConfig)(l,W),X=a?a.get(N):void 0,G=X?X.get("value"):void 0,z=X?X.get("valueSrc"):void 0,K=X?X.get("asyncListValues"):void 0,Y=h(u,l,G,z,W.type,_,W,null,null,y,K);if(G!=null&&Y===void 0){u.errors.push("Can't format value of arg ".concat(N," for func ").concat(p));return}Y!==void 0&&(d[N]=Y)}var re;if(typeof n.spelFormatFunc=="function"){var ne=n.spelFormatFunc,ue=[d];re=ne.apply(void 0,ue)}else{var ae=Object.entries(d).map(function(ye){var Oe=(0,M.default)(ye,2),Se=Oe[0],ce=Oe[1];return ce});if(g[0]=="."&&ae.length){var ve=(0,E.default)(ae),se=ve[0],ge=ve.slice(1);re="".concat(se).concat(g,"(").concat(ge.join(", "),")")}else re="".concat(g,"(").concat(ae.join(", "),")")}return re}},41437:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlFormat=i._sqlFormat=void 0;var E=r(e(47452)),m=r(e(92476)),M=e(79746),I=e(62413),T=r(e(50234)),P=r(e(7275)),S=e(60399),C=e(20495),A=e(42009),O=e(12177),b=e(40745),D=e(1901);function F(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(J);k&&(h=h.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,h)}return R}function U(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?F(Object(R),!0).forEach(function(h){(0,m.default)(J,h,R[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):F(Object(R)).forEach(function(h){Object.defineProperty(J,h,Object.getOwnPropertyDescriptor(R,h))})}return J}var L=function(k,R){return $(k,R,!1)};i.sqlFormat=L;var $=function(k,R){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s={errors:[]},c=j(k,R,s);return h?[c,s.errors]:(s.errors.length&&console.warn("Errors while exporting to SQL:",s.errors),c)};i._sqlFormat=$;var j=function(k,R,h){if(k){var s=k.get("type"),c=k.get("children1");if((s==="group"||s==="rule_group")&&c&&c.size)return V(k,R,h);if(s==="rule")return x(k,R,h)}},V=function(k,R,h){var s=k.get("type"),c=k.get("properties")||new b.Map,o=k.get("children1"),u=s==="rule_group"?c.get("field"):null,l=(0,M.getFieldConfig)(R,u)||{};l.mode=="array"&&h.errors.push("Aggregation is not supported for ".concat(u));var f=c.get("not"),y=o.map(function(n){return j(n,R,h)}).filter(function(n){return typeof n<"u"});if(y.size){var p=c.get("conjunction");p||(p=(0,C.defaultConjunction)(R));var a=R.conjunctions[p];return a.sqlFormatConj(y,p,f)}},w=function(k,R){var h=R.sqlOp||k,s=(0,S.defaultValue)(R.cardinality,1),c;return s==0?c=function(u,l,f,y,p,a,n,g){return"".concat(u," ").concat(h)}:s==1?c=function(u,l,f,y,p,a,n,g){return"".concat(u," ").concat(h," ").concat(f)}:s==2&&(c=function(u,l,f,y,p,a,n,g){var d=f.first(),N=f.get(1);return"".concat(u," ").concat(h," ").concat(d," AND ").concat(N)}),c},x=function(k,R,h){var s=k.get("properties")||new b.Map,c=s.get("field"),o=s.get("operator"),u=s.get("operatorOptions"),l=s.get("valueSrc"),f=s.get("valueType"),y=s.get("value"),p=s.get("asyncListValues");if(!(c==null||o==null)){var a=(0,M.getFieldConfig)(R,c)||{},n=(0,M.getOperatorConfig)(R,o,c)||{},g=n.reversedOp,d=(0,M.getOperatorConfig)(R,g,c)||{},N=(0,S.defaultValue)(n.cardinality,1),W=!1,_=n.sqlOp||n.sqlFormatOp,X=d.sqlOp||d.sqlFormatOp;if(!_&&!X){h.errors.push("Operator ".concat(o," is not supported"));return}if(!X&&X){W=!0;var G=[g,o];o=G[0],g=G[1];var z=[d,n];n=z[0],d=z[1]}var K=[],Y=[],re=y.map(function(ye,Oe){var Se=l?l.get(Oe):null,ce=f?f.get(Oe):null,Ne=(0,O.completeValue)(ye,Se,R),we=(0,I.getWidgetForFieldOp)(R,c,o,Se),je=(0,T.default)((0,M.getFieldWidgetConfig)(R,c,o,we,Se),["factory"]),Ke=H(h,R,Ne,Se,ce,je,a,o,n,p);return Ke!==void 0&&(K.push(Se),Y.push(ce)),Ke}),ne=re.filter(function(ye){return ye===void 0}).size>0;if(!(ne||re.size<N)){var ue=N==1?re.first():re,ae=n.sqlFormatOp||w(o,n);if(!ae){h.errors.push("Operator ".concat(o," is not supported"));return}var ve=Z(h,R,c),se=[ve,o,ue,K.length>1?K:K[0],Y.length>1?Y:Y[0],(0,T.default)(n,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),u,a],ge;if(ge=ae.apply(void 0,se),W&&(ge=R.settings.sqlFormatReverse(ge)),ge===void 0){h.errors.push("Operator ".concat(o," is not supported for value source ").concat(K.join(", ")));return}return ge}}},H=function(k,R,h,s,c,o,u,l,f,y){if(h!==void 0){var p;if(s=="field")p=Z(k,R,h);else if(s=="func")p=ee(k,R,h);else if(typeof o.sqlFormatValue=="function"){var a=o.sqlFormatValue,n=[h,U(U({},(0,P.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:y}),(0,T.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(n.push(l),n.push(f)),s=="field"){var g=(0,M.getFieldConfig)(R,h)||{};n.push(g)}p=a.apply(void 0,n)}else Array.isArray(h)?p=h.map(function(d){return D.SqlString.escape(d)}):p=D.SqlString.escape(h);return p}},Z=function(k,R,h){if(h){var s=R.settings.fieldSeparator,c=(0,M.getFieldConfig)(R,h)||{},o=Array.isArray(h)?h:h.split(s),u=(0,I.getFieldPath)(h,R),l=(0,I.getFieldPathLabels)(h,R),f=l?l.join(s):null,y=R.settings.formatField||A.settings.formatField,p=(0,I.formatFieldName)(h,R,k),a=y(p,o,f,c,R);return a}},ee=function(k,R,h){var s=h.get("func"),c=h.get("args"),o=(0,M.getFuncConfig)(R,s),u=o.sqlFunc||s,l={};for(var f in o.args){var y=o.args[f],p=(0,M.getFieldConfig)(R,y),a=c?c.get(f):void 0,n=a?a.get("value"):void 0,g=a?a.get("valueSrc"):void 0,d=a?a.get("asyncListValues"):void 0,N=H(k,R,n,g,y.type,p,y,null,null,d);if(n!=null&&N===void 0){k.errors.push("Can't format value of arg ".concat(f," for func ").concat(s));return}N!==void 0&&(l[f]=N)}var W;if(typeof o.sqlFormatFunc=="function"){var _=o.sqlFormatFunc,X=[l];W=_.apply(void 0,X)}else{var G=Object.entries(l).map(function(z){var K=(0,E.default)(z,2),Y=K[0],re=K[1];return re}).join(", ");W="".concat(u,"(").concat(G,")")}return W}},9504:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(70889);Object.keys(r).forEach(function(M){M==="default"||M==="__esModule"||M in i&&i[M]===r[M]||Object.defineProperty(i,M,{enumerable:!0,get:function(){return r[M]}})});var E=e(87780);Object.keys(E).forEach(function(M){M==="default"||M==="__esModule"||M in i&&i[M]===E[M]||Object.defineProperty(i,M,{enumerable:!0,get:function(){return E[M]}})});var m=e(79620);Object.keys(m).forEach(function(M){M==="default"||M==="__esModule"||M in i&&i[M]===m[M]||Object.defineProperty(i,M,{enumerable:!0,get:function(){return m[M]}})})},87780:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromJsonLogic=i._loadFromJsonLogic=void 0;var E=r(e(90890)),m=r(e(33138)),M=r(e(92476)),I=r(e(47452)),T=r(e(76833)),P=e(60399),S=e(79746),C=e(62413),A=e(70889),O=e(20495),b=r(e(36365));function D(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(o,y).enumerable})),l.push.apply(l,f)}return l}function F(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?D(Object(l),!0).forEach(function(f){(0,M.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):D(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var U=function(u){return Array.from(new Set(u))},L=function(u){return u.reduce(function(l,f){var y=(0,I.default)(f,2),p=y[0],a=y[1];return F(F({},l),{},(0,M.default)({},p,a))},{})},$=function(u,l){return j(u,l,!1)};i.loadFromJsonLogic=$;var j=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y={errors:[]},p=(0,S.extendConfig)(l),a=V(p),n=u?w(u,a,p,"rule",y):void 0;n&&n.type!="group"&&(n=R(n,p));var g=n?(0,A.loadTree)(n):void 0;return f?[g,y.errors]:(y.errors.length&&console.warn("Errors while importing from JsonLogic:",y.errors),g)};i._loadFromJsonLogic=j;var V=function(u){var l={};for(var f in u.operators){var y=u.operators[f];if(typeof y.jsonLogic=="string"){var p=(y._jsonLogicIsRevArgs?"#":"")+y.jsonLogic+"/"+(0,P.defaultValue)(y.cardinality,1);l[p]||(l[p]=[]),l[p].push(f)}else if(typeof y.jsonLogic2=="string"){var a=y.jsonLogic2+"/"+(0,P.defaultValue)(y.cardinality,1);l[a]||(l[a]=[]),l[a].push(f)}}var n={};for(var g in u.conjunctions){var d=u.conjunctions[g],N=d.jsonLogicConj||g.toLowerCase();n[N]=g}var W={};for(var _ in u.funcs){var X=u.funcs[_],G=void 0;X.jsonLogicIsMethod?G="#"+X.jsonLogic:typeof X.jsonLogic=="string"&&(G=X.jsonLogic),G&&(W[G]||(W[G]=[]),W[G].push(_))}var z=u.settings.jsonLogic,K=z.groupVarKey,Y=z.altVarKey;return{operators:l,conjunctions:n,funcs:W,varKeys:["var",K,Y]}},w=function o(u,l,f,y,p){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,n=arguments.length>6?arguments[6]:void 0,g=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,N=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,W,_;(0,P.isJsonLogic)(u)&&(W=Object.keys(u)[0],_=u[W],Array.isArray(_)||(_=[_]));var X,G=p.errors.length,z=f.settings.jsonLogic.lockedOp,K=W=="!"&&_.length==1&&_[0]&&(0,P.isJsonLogic)(_[0])&&l.varKeys.includes(Object.keys(_[0])[0]),Y=W=="!"&&!K,re=z&&W==z;re?X=o(_[0],l,f,y,p,a,n,g,d,!0):Y?X=o(_[0],l,f,y,p,!a,n,g,d):y=="val"?X=H(W,_,l,f,a,p,d)||Z(W,_,l,f,a,n,p,d)||x(u,n,g,f,p):y=="rule"&&(X=ee(W,_,l,f,a,p,d,!1)||c(W,_,l,f,a,p,d));var ne=p.errors.length;return W!="!"&&X===void 0&&ne==G&&p.errors.push("Can't parse logic ".concat(JSON.stringify(u))),re&&(X.properties.isLocked=!0),X},x=function(u,l,f,y,p){if(u!==void 0){var a=y.widgets[f||l.mainWidget];if(!a){p.errors.push("No widget for type ".concat(l.type));return}if((0,P.isJsonLogic)(u)){p.errors.push("Unexpected logic in value: ".concat(JSON.stringify(u)));return}if(l&&l.type=="time"&&typeof u=="number"){var n=Math.floor(u/60/60)%24,g=Math.floor(u/60)%60,d=u%60,N=a.valueFormat;if(N){var W=new Date(u);W.setMilliseconds(0),W.setHours(n),W.setMinutes(g),W.setSeconds(d),u=(0,b.default)(W).format(N)}else u="".concat(n,":").concat(g,":").concat(d)}if(l&&["date","datetime"].includes(l.type)&&u&&!(u instanceof Date))try{var _=new Date(u);_ instanceof Date&&_.toISOString()===u&&(u=_)}catch{p.errors.push("Can't convert value ".concat(u," as Date")),u=void 0}if(u instanceof Date&&l){var X=a.valueFormat;X&&(u=(0,b.default)(u).format(X))}var G;if(u&&l.fieldSettings&&l.fieldSettings.asyncFetch){var z=Array.isArray(u)?u:[u];G=z}return{valueSrc:"value",value:u,valueType:a.type,asyncListValues:G}}},H=function(u,l,f,y,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,g=y.settings.fieldSeparator;if(f.varKeys.includes(u)&&typeof l[0]=="string"){var d=l[0];n&&(d=[n,d].join(g)),d=(0,S.normalizeField)(y,d);var N=(0,S.getFieldConfig)(y,d);if(!N){a.errors.push("No config for field ".concat(d));return}return{valueSrc:"field",value:d,valueType:N.type}}},Z=function(u,l,f,y,p,a,n){var g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(u){var d,N,W,_=u=="method";if(_){var X,G,z=(0,m.default)(l);X=z[0],d=z[1],G=z.slice(2),N=[X].concat((0,E.default)(G))}else d=u,N=l;var K=(_?"#":"")+d,Y=(f.funcs[K]||[]).filter(function(ce){return a?y.funcs[ce].returnType==a.type:!0});if(Y.length)W=Y[0];else for(var re=(0,M.default)({},u,l),ne=0,ue=Object.entries(y.funcs||{});ne<ue.length;ne++){var ae=(0,I.default)(ue[ne],2),ve=ae[0],se=ae[1];if(se.jsonLogicImport&&se.returnType==a.type){var ge=void 0;try{ge=se.jsonLogicImport(re)}catch{}ge&&(W=ve,N=ge)}}if(W&&W){var ye=y.funcs[W],Oe=Object.keys(ye.args||{}),Se=N.reduce(function(ce,Ne,we){var je=Oe[we],Ke=ye.args[je],Ye=w(Ne,f,y,"val",n,!1,Ke,null,g);if(Ye===void 0&&(Ye=Ke.defaultValue,Ye===void 0)){n.errors.push("No value for arg ".concat(je," of func ").concat(W));return}return F(F({},ce),{},(0,M.default)({},je,Ye))},{});return{valueSrc:"func",value:{func:W,args:Se},valueType:ye.returnType}}}},ee=function(u,l,f,y,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,d=f.conjunctions[u],N=y.settings.fieldSeparator,W=n?(0,S.getFieldConfig)(y,n):null,_=W?.type=="!group";if(d){var X="group",G=l.map(function(ge){return w(ge,f,y,"rule",a,!1,null,null,n)}).filter(function(ge){return ge!==void 0}).reduce(function(ge,ye){return F(F({},ge),{},(0,M.default)({},ye.id,ye))},{}),z=Object.values(G).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).filter(function(ge){return ge&&ge.includes(N)}),K=Object.fromEntries(U(z).map(function(ge){var ye=ge.split(N),Oe=Object.fromEntries(ye.slice(0,-1).map(function(Se,ce,Ne){return[].concat((0,E.default)(Ne.slice(0,ce)),[Se])}).map(function(Se){return[Se.join(N),(0,S.getFieldConfig)(y,Se)]}).filter(function(Se){var ce=(0,I.default)(Se,2),Ne=ce[0],we=ce[1];return we.type=="!group"}));return[ge,Object.keys(Oe)]})),Y=Object.values(G).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).map(function(ge){return K[ge]}).filter(function(ge){return ge&&ge.length}),re=U(Object.values(K).flat()),ne=J(re),ue={conjunction:d,not:p},ae=(0,T.default)(),ve={},se={};return Object.entries(G).map(function(ge){var ye=(0,I.default)(ge,2),Oe=ye[0],Se=ye[1];if(Se.type=="group"||Se.type=="rule_group")ve[Oe]=Se;else{var ce,Ne=Se==null||(ce=Se.properties)===null||ce===void 0?void 0:ce.field,we=K[Ne],je=we?.at(-1);if(!je)ve[Oe]=Se;else{var Ke=ve,Ye=n?n.split(N):[],ke=(0,P.shallowEqual)(Ye,je.split(N).slice(0,Ye.length));ke||(Ye=[]);var at=je.split(N).slice(Ye.length).map(function(He,fe,Ee){return[].concat((0,E.default)(Ye),(0,E.default)(Ee.slice(0,fe)),[He]).join(N)}).map(function(He){return(0,S.normalizeField)(y,He)}).map(function(He){return{f:He,fc:(0,S.getFieldConfig)(y,He)||{}}}).filter(function(He){var fe=He.fc;return fe.type!="!struct"});at.map(function(He,fe){var Ee=He.f,Ce=He.fc,Fe=se[Ee];Fe||(Fe=(0,T.default)(),se[Ee]=Fe,Ke[Fe]={type:"rule_group",id:Fe,children1:{},properties:{conjunction:d,not:!1,field:Ee,mode:Ce.mode}}),Ke=Ke[Fe].children1}),Ke[Oe]=Se}}}),{type:X,id:ae,children1:ve,properties:ue}}},J=function(u){for(var l=(0,E.default)(u).sort(function(p,a){return p.length-a.length}),f=0;f<l.length;f++)for(var y=f+1;y<l.length;y++)l[y].indexOf(l[f])==0&&(l.splice(y,1),y--);return l},k=function(u,l,f,y,p){if(u)return{type:"rule_group",id:(0,T.default)(),children1:(0,M.default)({},u.id,u),properties:{conjunction:p||(0,O.defaultGroupConjunction)(y,f),not:!1,field:l}}},R=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,T.default)(),children1:(0,M.default)({},u.id,u),properties:{conjunction:(0,O.defaultConjunction)(l),not:f}}},h=function(u,l,f,y,p,a,n){var g=[],d=s(u,l,f,y,p,a,g,!1)||s(u,l,f,y,p,a,g,!0);if(!d){n.errors.push(g.join("; ")||"Unknown op ".concat(u,"/").concat(l));return}return d},s=function(u,l,f,y,p,a,n,g){var d=(u=="all"||u=="some")&&(0,P.isJsonLogic)(f[1])&&Object.keys(f[1])[0]=="in",N=!d&&a.settings.groupOperators.includes(u),W=["==","!="],_=N?0:l-1;(N||W.includes(u)&&_==1&&f[1]===null)&&(_=0);var X=u+"/"+_,G=a.settings.fieldSeparator,z=p.operators[(g?"#":"")+X];if(z){var K,Y=[],re=["<","<=",">",">="];if(re.includes(u)&&l==3)K=f[1],Y=[f[0],f[2]];else if(g)K=f[1],Y=[f[0]];else{var ne=(0,m.default)(f);K=ne[0],Y=ne.slice(1)}if(!(0,P.isJsonLogic)(K)){n.push("Incorrect operands for ".concat(u,": ").concat(JSON.stringify(f)));return}var ue=Object.keys(K)[0],ae=Object.values(K)[0],ve,se,ge;if(p.varKeys.includes(ue)&&typeof ae=="string"&&(ve=ae),N&&(ge=!0,se=Y[0],Y=[]),ue=="reduce"&&Array.isArray(ae)&&ae.length==3){var ye=ae,Oe=(0,I.default)(ye,3),Se=Oe[0],ce=Oe[1],Ne=Oe[2];if((0,P.isJsonLogic)(Se)&&Ne==0&&(0,P.isJsonLogic)(ce)&&Array.isArray(ce["+"])&&ce["+"][0]==1&&(0,P.isJsonLogic)(ce["+"][1])&&ce["+"][1].var=="accumulator")if(ue=Object.keys(Se)[0],ae=Object.values(Se)[0],ue=="filter"){var we=ae,je=(0,I.default)(we,2),Ke=je[0],Ye=je[1];(0,P.isJsonLogic)(Ke)&&(ue=Object.keys(Ke)[0],ae=Object.values(Ke)[0],p.varKeys.includes(ue)&&typeof ae=="string"&&(ve=ae,se=Ye,ge=!0))}else p.varKeys.includes(ue)&&typeof ae=="string"&&(ve=ae,ge=!0)}if(!ve){n.push("Unknown field ".concat(JSON.stringify(K)));return}y&&(ve=[y,ve].join(G)),ve=(0,S.normalizeField)(a,ve);var ke=(0,S.getFieldConfig)(a,ve);if(!ke){n.push("No config for field ".concat(ve));return}var at=z[0];if(z.length>1&&ke&&ke.operators){if(z=z.filter(function(He){return ke.operators.includes(He)}),z.length==0){n.push("No corresponding ops for field ".concat(ve));return}at=z[0]}return{field:ve,fieldConfig:ke,opKey:at,args:Y,having:se}}},c=function o(u,l,f,y,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(u){var g=l.length;if((u=="all"||u=="some")&&(0,P.isJsonLogic)(l[1])){var d=Object.keys(l[1])[0];d=="in"&&(l=[l[0],l[1][d][1]],u=u+"-"+d)}var N=h(u,g,l,n,f,y,a);if(N){var W=N.field,_=N.fieldConfig,X=N.opKey,G=N.args,z=N.having,K=y.operators[X],Y=_.showNot!==void 0?_.showNot:y.settings.showNot,re=!0,ne,ue;if(_.type=="!group"&&z){ne=Object.keys(z)[0],ue=z[ne],Array.isArray(ue)||(ue=[ue]);var ae=ne=="!"&&ue.length==1&&ue[0]&&(0,P.isJsonLogic)(ue[0])&&f.varKeys.includes(Object.keys(ue[0])[0]);ne=="!"&&!ae&&(p=!p,z=z["!"],ne=Object.keys(z)[0],ue=z[ne],Array.isArray(ue)||(ue=[ue]))}p&&re&&K.reversedOp&&(p=!1,X=K.reversedOp,K=y.operators[X]);var ve=(0,C.getWidgetForFieldOp)(y,W,X),se=G.map(function(Ne){return w(Ne,f,y,"val",a,!1,_,ve,n)});if(!se.filter(function(Ne){return Ne===void 0}).length){var ge;if(_.type=="!group"&&z){if(f.conjunctions[ne]!==void 0)ge=ee(ne,ue,f,y,p,a,W,!0),p=!1;else{var ye,Oe=o(ne,ue,f,y,p&&re,a,W);p&&re&&!(Oe!=null&&(ye=Oe.properties)!==null&&ye!==void 0&&ye.not)&&(p=!1),ge=k(Oe,W,_,y,f.conjunctions.and)}if(!ge)return;ge.type="rule_group",p&&Object.assign(ge.properties,{not:p}),Object.assign(ge.properties,{field:W,mode:_.mode,operator:X}),_.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType})})}else if(_.type=="!group"&&!z)ge={type:"rule_group",id:(0,T.default)(),children1:{},properties:{conjunction:(0,O.defaultGroupConjunction)(y,_),not:p,mode:_.mode,field:W,operator:X}},_.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType})});else{var Se=se.map(function(Ne){return Ne.asyncListValues}).filter(function(Ne){return Ne!=null}),ce=Se.length?Se[0]:void 0;ge={type:"rule",id:(0,T.default)(),properties:{field:W,operator:X,value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType}),asyncListValues:ce}},p&&(ge=R(ge,y,p))}return ge}}}}},79620:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromSpel=i._loadFromSpel=void 0;var E=r(e(47452)),m=r(e(91148)),M=r(e(92476)),I=r(e(90890)),T=e(58750),P=r(e(76833)),S=e(79746),C=e(62413),A=e(70889),O=e(20495),b=e(60399),D=r(e(36365));function F(l,f){var y=Object.keys(l);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(l);f&&(p=p.filter(function(a){return Object.getOwnPropertyDescriptor(l,a).enumerable})),y.push.apply(y,p)}return y}function U(l){for(var f=1;f<arguments.length;f++){var y=arguments[f]!=null?arguments[f]:{};f%2?F(Object(y),!0).forEach(function(p){(0,M.default)(l,p,y[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(y)):F(Object(y)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(y,p))})}return l}var L=function(f,y){return $(f,y,!0)};i.loadFromSpel=L;var $=function(f,y){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a={errors:[]},n=(0,S.extendConfig)(y),g=w(n),d,N,W=void 0;try{var _=T.SpelExpressionEvaluator.compile(f);d=_._compiledExpression}catch(G){a.errors.push(G)}d&&(b.logger.debug("compiledExpression:",d),N=j(d,a),b.logger.debug("convertedObj:",N,a),W=k(N,g,n,a),W&&W.type!="group"&&W.type!="switch_group"&&(W=u(W,n,N.not)),b.logger.debug("jsTree:",W));var X=W?(0,A.loadTree)(W):void 0;return p?[X,a.errors]:(a.errors.length&&console.warn("Errors while importing from SpEL:",a.errors),X)};i._loadFromSpel=$;var j=function l(f,y){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=f.getType(),n=f.getChildren().map(function(ce){return l(ce,y,f)});if((a=="op-or"||a=="op-and")&&(n=n.reduce(function(ce,Ne){var we=Ne.type==a&&!Ne.not,je=we?Ne.children:[Ne];return[].concat((0,I.default)(ce),(0,I.default)(je))},[])),a=="op-not")return n.length!=1&&y.errors.push("Operator NOT should have 1 child, but got ".concat(n.length,"}")),U(U({},n[0]),{},{not:!n[0].not});if(a=="compound"){n=n.filter(function(ce){var Ne=ce.type=="selection"&&ce.children.length==1&&ce.children[0].type=="boolean"&&ce.children[0].val==!0;return!Ne});var g=n.find(function(ce){return ce.type=="selection"});g&&g.children.length!=1&&y.errors.push("Selection should have 1 child, but got ".concat(g.children.length));var d=g?g.children[0]:null,N=n[n.length-1],W=N.type=="method"&&N.val.methodName=="size"||N.type=="!func"&&N.methodName=="size",_=N.type=="property"&&N.val=="length",X=n.filter(function(ce){return ce!==g&&ce!==N}),G={type:"compound",children:X};if(W||_)return{type:"!aggr",filter:d,source:G};if(n=n.filter(function(ce){var Ne=ce.type=="variable"&&ce.val=="this",we=ce.type=="variable"&&ce.val=="root";return!(Ne||we)}),n=n.map(function(ce){return ce.type=="indexer"&&ce.children.length==1?{type:"indexer",val:ce.children[0].val,itype:ce.children[0].type}:ce}),N.type=="method"){var z=n.filter(function(ce){return ce!==N});return{type:"!func",obj:z,methodName:N.val.methodName,args:N.val.args}}if(N.type=="!func"){var K=n.filter(function(ce){return ce!==N});return U(U({},N),{},{obj:K})}}var Y;try{f.getRaw?Y=f.getRaw():f.getValue.length==0&&(Y=f.getValue())}catch(ce){b.logger.error("[spel2js] Error in getValue()",ce)}if(a=="ternary"&&(Y=V(n)),(0,m.default)(Y)==="object"&&Y!==null&&(Y.methodName||Y.functionName)&&(Y.args=Y.args.map(function(ce){return l(ce,y,f)})),a=="list"&&(Y=Y.map(function(ce){return l(ce,y,f)}),!p&&Y.length==1))return Y[0];if(a=="constructorref"){var re=n.find(function(ce){return ce.type=="qualifiedidentifier"}),ne=re?.val;if(!ne){y.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(n)));return}var ue=n.filter(function(ce){return ce.type!="qualifiedidentifier"});return{type:"!new",cls:ne,args:ue}}if(a=="typeref"){var ae=n.find(function(ce){return ce.type=="qualifiedidentifier"}),ve=ae?.val;if(!ve){y.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(n)));return}var se=n.filter(function(ce){return ce.type!="qualifiedidentifier"});return{type:"!type",cls:ve}}if(a=="function"||a=="method"){var ge=Y,ye=ge.functionName,Oe=ge.methodName,Se=ge.args;return{type:"!func",methodName:ye||Oe,isVar:a=="function",args:Se}}return{type:a,children:n,val:Y}},V=function(f){var y=[];function p(a){var n=(0,E.default)(a,3),g=n[0],d=n[1],N=n[2];y.push([g,d]),N?.type=="ternary"?p(N.children):y.push([void 0,N])}return p(f),y},w=function(f){var y={},p=function(K){var Y=f.operators[K];if(Y.spelOps)Y.spelOps.forEach(function(ne){var ue=ne;y[ue]||(y[ue]=[]),y[ue].push(K)});else if(Y.spelOp){var re=Y.spelOp;y[re]||(y[re]=[]),y[re].push(K)}else b.logger.log("[spel] No spelOp for operator ".concat(K))};for(var a in f.operators)p(a);var n={};for(var g in f.conjunctions){var d=f.conjunctions[g],N=d.spelConj||g.toLowerCase();n[N]=g}var W={};for(var _ in f.funcs){var X=f.funcs[_],G=void 0;typeof X.spelFunc=="string"&&(G=X.spelFunc),G&&(W[G]||(W[G]=[]),W[G].push(_))}return{operators:y,conjunctions:n,funcs:W}},x=function(f,y){var p=!1,a=f.map(function(n){if(n.type=="variable"||n.type=="property"||n.type=="indexer"&&n.itype=="string")return n.val;p=!0,y.errors.push("Unexpected item in compound: ".concat(JSON.stringify(n)))});return p?void 0:a},H=function l(f,y,p,a,n){if(f!=null){var g=p.settings.fieldSeparator,d={number:"number",string:"text",boolean:"boolean",null:"null"},N=n!=null&&n._groupField?[n?._groupField]:[];if(f.type=="compound"){var W,_,X=x(f.children,a);if(!X)return;var G=[].concat(N,(0,I.default)(X)),z=((W=f.children)===null||W===void 0||(_=W[0])===null||_===void 0?void 0:_.type)=="variable";return{valueSrc:"field",isVariable:z,value:G.join(g)}}else if(f.type=="variable"||f.type=="property"){var K=[].concat(N,[f.val]),Y=f.type=="variable";return{valueSrc:"field",isVariable:Y,value:K.join(g)}}else if(d[f.type]){var re=f.val,ne=d[f.type];return n!=null&&n.isUnary&&(re=-re),{valueSrc:"value",valueType:ne,value:re}}else if(f.type=="list"){var ue,ae=f.val.map(function(st){return l(st,y,p,a,f)}),ve=ae.length?(ue=ae[0])===null||ue===void 0?void 0:ue.valueType:null,se=ae.map(function(st){return st?.value}),ge="multiselect";return{valueSrc:"value",valueType:ge,value:se}}else if(f.type=="!func"){var ye,Oe=f.obj,Se=f.methodName,ce=f.args,Ne=f.isVar,we=(ye={},(0,M.default)(ye,".contains","like"),(0,M.default)(ye,".startsWith","starts_with"),(0,M.default)(ye,".endsWith","ends_with"),(0,M.default)(ye,"$contains","select_any_in"),(0,M.default)(ye,".equals","multiselect_equals"),(0,M.default)(ye,"CollectionUtils.containsAny()","multiselect_contains"),ye),je=ce.map(function(st){return l(st,y,p,a,U(U({},f),{},{_groupField:n?._groupField}))});if(Se=="contains"&&Oe&&Oe[0].type=="list"){var Ke=Oe.map(function(st){return l(st,y,p,a,f)});if(!(je.length==1&&je[0].valueSrc=="field")){a.errors.push("Expected arg to method ".concat(Se," to be field but got: ").concat(JSON.stringify(je)));return}var Ye=je[0].value;if(!(Ke.length==1&&Ke[0].valueType=="multiselect")){a.errors.push("Expected object of method ".concat(Se," to be inline list but got: ").concat(JSON.stringify(Ke)));return}var ke=we["$"+Se],at=Ke[0];return Z(p,a,Ye,ke,[at])}else if(Oe&&Oe[0].type=="property"&&we[Oe[0].val+"."+Se+"()"]){var He=we[Oe[0].val+"."+Se+"()"],fe=je[0].value,Ee=je.slice(1);return Z(p,a,fe,He,Ee)}else if(we["."+Se]){var Ce=we["."+Se],Fe=x(Oe,a);if(Fe&&je.length==1){var De=[].concat(N,(0,I.default)(Fe)),Me=De.join(g);return Z(p,a,Me,Ce,je)}}else if(Se=="parse"&&Oe&&Oe[0].type=="!new"&&Oe[0].cls.at(-1)=="SimpleDateFormat"){var Ae=Oe[0].args.map(function(st){return l(st,y,p,a,U(U({},f),{},{_groupField:n?._groupField}))});if(!(Ae.length==1&&Ae[0].valueType=="text")){a.errors.push("Expected args of ".concat(Oe[0].cls.join("."),".").concat(Se," to be 1 string but got: ").concat(JSON.stringify(Ae)));return}if(!(je.length==1&&je[0].valueType=="text")){a.errors.push("Expected args of ".concat(Oe[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(je)));return}var $e=Ae[0].value,rt=je[0].value,it=$e.includes(" ")?"datetime":"date",Qe=null,lt=it,ct=(0,S.getFieldConfig)(p,Qe),Ze=p.widgets[lt||ct?.mainWidget],gt=Ze.valueFormat,pe=(0,D.default)(rt,D.default.ISO_8601),he=pe.isValid()?pe.format(gt):void 0;return{valueSrc:"value",valueType:it,value:he}}else if(Se=="parse"&&Oe&&Oe[0].type=="!type"&&Oe[0].cls.at(-1)=="LocalTime"){if(!(je.length==1&&je[0].valueType=="text")){a.errors.push("Expected args of ".concat(Oe[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(je)));return}var Le=je[0].value,Pe="time",Ve=null,Ge=Pe,xe=(0,S.getFieldConfig)(p,Ve),et=p.widgets[Ge||xe?.mainWidget],We=et.valueFormat,Be=(0,D.default)(Le,"HH:mm:ss"),ft=Be.isValid()?Be.format(We):void 0;return{valueSrc:"value",valueType:Pe,value:ft}}else a.errors.push("Unsupported method ".concat(Se))}else{if(f.type=="op-plus"&&n?.type=="ternary")return s(f,y,p,a);a.errors.push("Can't convert arg of type ".concat(f.type))}}},Z=function(f,y,p,a,n){if(!n.filter(function(G){return G===void 0}).length){var g=(0,S.getFieldConfig)(f,p);if(!g){y.errors.push("No config for field ".concat(p));return}var d=(0,C.getWidgetForFieldOp)(f,p,a),N=f.widgets[d||g.mainWidget],W=n.map(function(G){return G.asyncListValues}).filter(function(G){return G!=null}),_=W.length?W[0]:void 0,X={type:"rule",id:(0,P.default)(),properties:{field:p,operator:a,value:n.map(function(G){return G.value}),valueSrc:n.map(function(G){return G.valueSrc}),valueType:n.map(function(G){return G.valueSrc=="value"&&(N?.type||g?.type)||G.valueType}),asyncListValues:_}};return X}},ee=function(f,y,p,a,n){var g=f.groupFilter,d=f.groupFieldValue;if(d.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(d));var N=d.value,W=Z(a,n,N,y,p);if(W){var _=(0,S.getFieldConfig)(a,N),X=_?.mode,G=U(U({},g||{}),{},{type:"rule_group",properties:U(U(U({},W.properties),g?.properties||{}),{},{mode:X})});return G.id||(G.id=(0,P.default)()),G}},J=function(f,y,p,a,n,g){var d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(f.type==y.type)if(f.type=="!aggr"){var N=[f.source,y.source].map(function(re){return H(re,a,n,g,U(U({},p),{},{_groupField:d?._groupField}))}),W=(0,E.default)(N,2),_=W[0],X=W[1];return _.value==X.value}else{var G=[f,y].map(function(re){return H(re,a,n,g,U(U({},p),{},{_groupField:d?._groupField}))}),z=(0,E.default)(G,2),K=z[0],Y=z[1];return K.value==Y.value}return!1},k=function l(f,y,p,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(f){var g;if(f.type.indexOf("op-")==0){var d=f.type.slice(3),N=(d=="minus"||d=="plus")&&f.children.length==1;if(N)return f.isUnary=!0,l(f.children[0],y,p,a,f);var W=d=="and"&&f.children.length==2&&f.children[0].type=="op-ge"&&f.children[1].type=="op-le",_=d=="or"&&f.children.length==2&&f.children[0].type=="op-lt"&&f.children[1].type=="op-gt",X=W||_;if(X){var G=(0,E.default)(f.children[0].children,2),z=G[0],K=G[1],Y=(0,E.default)(f.children[1].children,2),re=Y[0],ne=Y[1],ue=K.type=="number"&&ne.type=="number",ae=J(z,re,f,y,p,a,n);if(ue&&ae){var ve=K.val,se=ne.val,ge={type:"op-between",children:[z,K,ne]};return l(ge,y,p,a,n)}}var ye=y.operators[d],Oe;d=="eq"&&f.children[1].type=="null"?Oe="is_null":d=="ne"&&f.children[1].type=="null"?Oe="is_not_null":d=="le"&&f.children[1].type=="string"&&f.children[1].val==""?(Oe="is_empty",ye=["is_empty"]):d=="gt"&&f.children[1].type=="string"&&f.children[1].val==""?(Oe="is_not_empty",ye=["is_not_empty"]):d=="between"&&(Oe="between",ye=["between"]);var Se=function(){return f.children.map(function($e){return l($e,y,p,a,U(U({},f),{},{_groupField:n?._groupField}))})};if(d=="and"||d=="or"){var ce={},Ne=Se();Ne.forEach(function(Ae){if(Ae){var $e=(0,P.default)();Ae.id=$e,Ae.type!=null?ce[$e]=Ae:a.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(Ae)))}}),g={type:"group",id:(0,P.default)(),children1:ce,properties:{conjunction:y.conjunctions[d],not:f.not}}}else if(ye){var we=Se(),je=we[0],Ke=we.slice(1);if(Oe=ye[0],je)if(je.groupFieldValue){je.groupFieldValue.valueSrc!="field"&&a.errors.push("Expected group field ".concat(JSON.stringify(je)));var Ye=je.groupFieldValue.value,ke=Ke[0];ke&&ke.groupFieldValue&&ke.groupFieldValue.valueSrc=="field"&&ke.groupFieldValue.value==Ye?(Oe="all",Ke=[]):Oe=="equal"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0?(Oe="none",Ke=[]):Oe=="greater"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0&&(Oe="some",Ke=[]),g=ee(je,Oe,Ke,p,a)}else{je.valueSrc!="field"&&a.errors.push("Expected field ".concat(JSON.stringify(je)));var at=je.value;if(ye.length>1){b.logger.warn("[spel] Spel operator ".concat(d," can be mapped to ").concat(ye));var He=ye.map(function(Ae){return{op:Ae,widget:(0,C.getWidgetForFieldOp)(p,at,Ae)}});if(d=="eq"||d=="ne"){var fe=He.find(function(Ae){var $e=Ae.op,rt=Ae.widget;return rt&&rt!="field"});Oe=fe.op}}g=Z(p,a,at,Oe,Ke)}}else n||(g=R(f,y,p,a)),g||a.errors.push("Can't convert op ".concat(d))}else if(f.type=="!aggr"){var Ee,Ce=l(f.source,y,p,a,U(U({},f),{},{_groupField:n?._groupField})),Fe=l(f.filter,y,p,a,U(U({},f),{},{_groupField:Ce?.value}));((Ee=Fe)===null||Ee===void 0?void 0:Ee.type)=="rule"&&(Fe=u(Fe,p)),g={groupFilter:Fe,groupFieldValue:Ce},n||(g=void 0,a.errors.push("Unexpected !aggr in root"))}else if(f.type=="ternary"){var De={};f.val.forEach(function(Ae){var $e=(0,E.default)(Ae,2),rt=$e[0],it=$e[1],Qe=h(rt,it,y,p,a,f);Qe&&(De[Qe.id]=Qe)}),g={type:"switch_group",id:(0,P.default)(),children1:De,properties:{}}}else if(g=H(f,y,p,a,n),g&&!g.type&&!n){var Me=R(f,y,p,a);Me?g=Me:(g=void 0,a.errors.push("Can't convert rule of type ".concat(f.type,", it looks like var/literal")))}return g}},R=function(f,y,p,a){var n={},g=null,d=h(g,f,y,p,a);d&&(n[d.id]=d);var N={type:"switch_group",id:(0,P.default)(),children1:n,properties:{}};return N},h=function(f,y,p,a,n){var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,d=c(a,n,p,y,g),N;return f?(N=k(f,p,a,n,g),N&&N.type?(N.type!="group"&&(N=u(N,a)),N.type="case_group"):(n.errors.push("Unexpected case: ".concat(JSON.stringify(N))),N=void 0)):N={id:(0,P.default)(),type:"case_group",properties:{}},N&&(N.properties=U(U({},N.properties),d)),N},s=function(f,y,p,a){var n=[];function g(d){d.map(function(N){if(N.type=="op-plus")g(N.children);else{var W=H(N,y,p,a,f);W?n.push(W):a.errors.push("Can't convert ".concat(N.type," in concatenation"))}})}return g(f.children),{valueSrc:"value",valueType:"case_value",value:n}},c=function(f,y,p,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,g={},d;a?.type=="op-plus"?d=s(a,p,f,y):d=H(a,p,f,y,n);var N=f.widgets.case_value,W=N?.spelImportValue;if(W){var _=W(d),X=(0,E.default)(_,2),G=X[0],z=X[1];z.map(function(K){return y.errors.push(K)}),G&&(g={value:[G],valueSrc:["value"],valueType:["case_value"]})}else y.errors.push("No fucntion to import case value");return g},o=function(f,y,p,a,n){if(f)return{type:"rule_group",id:(0,P.default)(),children1:(0,M.default)({},f.id,f),properties:{conjunction:n||(0,O.defaultGroupConjunction)(a,p),not:!1,field:y}}},u=function(f,y){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,P.default)(),children1:(0,M.default)({},f.id,f),properties:{conjunction:(0,O.defaultConjunction)(y),not:p||!1}}}},70889:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.isImmutableTree=i.getTree=i.checkTree=void 0,Object.defineProperty(i,"isJsonLogic",{enumerable:!0,get:function(){return S.isJsonLogic}}),i.loadTree=i.isValidTree=i.isTree=void 0;var m=r(e(91148)),M=A(e(40745)),I=e(16226),T=e(79746),P=e(31775),S=e(60399);function C(j){if(typeof WeakMap!="function")return null;var V=new WeakMap,w=new WeakMap;return(C=function(H){return H?w:V})(j)}function A(j,V){if(!V&&j&&j.__esModule)return j;if(j===null||E(j)!=="object"&&typeof j!="function")return{default:j};var w=C(V);if(w&&w.has(j))return w.get(j);var x={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in j)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(j,Z)){var ee=H?Object.getOwnPropertyDescriptor(j,Z):null;ee&&(ee.get||ee.set)?Object.defineProperty(x,Z,ee):x[Z]=j[Z]}return x.default=j,w&&w.set(j,x),x}var O=function(V){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(V){var H=V;return H=H.toJS(),w&&(H=(0,P.getLightTree)(H,x)),H}};i.getTree=O;var b=function(V){if(U(V))return V;if(L(V))return $(V);if(typeof V=="string"&&V.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof V=="string")return $(JSON.parse(V));throw"Can't load tree!"};i.loadTree=b;var D=function(V,w){if(V){var x=(0,T.extendConfig)(w);return(0,I.validateTree)(V,null,x,x)}};i.checkTree=D;var F=function(V){return(0,P.getTreeBadFields)(V).length==0};i.isValidTree=F;var U=function(V){return M.Map.isMap(V)};i.isImmutableTree=U;var L=function(V){return(0,m.default)(V)=="object"&&(V.type=="group"||V.type=="switch_group")};i.isTree=L;function $(j){return(0,M.fromJS)(j,function(V,w){var x;if(V=="properties"){x=w.toOrderedMap();for(var H=0;H<2;H++){var Z;((Z=x.get("value"))===null||Z===void 0?void 0:Z.get(H))===null&&(x=x.setIn(["value",H],void 0))}}else if(V=="value"&&w.get(0)&&w.get(0).toJS!==void 0){var ee=w.get(0).toJS();ee.func?x=w.toOrderedMap():x=M.default.List.of(ee)}else V=="asyncListValues"?x=w.toJS():V=="children1"&&M.default.Iterable.isIndexed(w)?x=new M.default.OrderedMap(w.map(function(J){return[J.get("id"),J]})):x=M.default.Iterable.isIndexed(w)?w.toList():w.toOrderedMap();return x})}},96650:(te,i,e)=>{"use strict";var r,E=e(59018),m=e(91148);r={value:!0},Object.defineProperty(i,"I4",{enumerable:!0,get:function(){return D.default}}),r=void 0,Object.defineProperty(i,"Ib",{enumerable:!0,get:function(){return T.default}}),r=r=r=void 0,Object.defineProperty(i,"AE",{enumerable:!0,get:function(){return I.default}}),r=i.cQ=void 0;var M=E(e(92476)),I=E(e(65394)),T=E(e(17079)),P=U(e(21058));r=P;var S=U(e(9504));r=S;var C=U(e(7614));r=C;var A=U(e(22369));r=A;var O=U(e(35926)),b=U(e(2986));r=b;var D=E(e(20896));function F(V){if(typeof WeakMap!="function")return null;var w=new WeakMap,x=new WeakMap;return(F=function(Z){return Z?x:w})(V)}function U(V,w){if(!w&&V&&V.__esModule)return V;if(V===null||m(V)!=="object"&&typeof V!="function")return{default:V};var x=F(w);if(x&&x.has(V))return x.get(V);var H={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in V)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(V,ee)){var J=Z?Object.getOwnPropertyDescriptor(V,ee):null;J&&(J.get||J.set)?Object.defineProperty(H,ee,J):H[ee]=V[ee]}return H.default=V,x&&x.set(V,H),H}function L(V,w){var x=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);w&&(H=H.filter(function(Z){return Object.getOwnPropertyDescriptor(V,Z).enumerable})),x.push.apply(x,H)}return x}function $(V){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?L(Object(x),!0).forEach(function(H){(0,M.default)(V,H,x[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(x)):L(Object(x)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(x,H))})}return V}var j=$($($({},O),P),S);i.cQ=j},78669:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var E=r(e(66111)),m=E.default.createContext();i.default=m},42444:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var m=r(e(47452)),M=r(e(92476)),I=r(e(40745)),T=e(31775),P=e(20495),S=$(e(46724)),C=r(e(76833)),A=e(79746),O=e(62413),b=e(60399),D=e(16226),F=r(e(50234)),U=r(e(74937));function L(X){if(typeof WeakMap!="function")return null;var G=new WeakMap,z=new WeakMap;return(L=function(Y){return Y?z:G})(X)}function $(X,G){if(!G&&X&&X.__esModule)return X;if(X===null||E(X)!=="object"&&typeof X!="function")return{default:X};var z=L(G);if(z&&z.has(X))return z.get(X);var K={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var re in X)if(re!=="default"&&Object.prototype.hasOwnProperty.call(X,re)){var ne=Y?Object.getOwnPropertyDescriptor(X,re):null;ne&&(ne.get||ne.set)?Object.defineProperty(K,re,ne):K[re]=X[re]}return K.default=X,z&&z.set(X,K),K}function j(X,G){var z=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!z){if(Array.isArray(X)||(z=V(X))||G&&X&&typeof X.length=="number"){z&&(X=z);var K=0,Y=function(){};return{s:Y,n:function(){return K>=X.length?{done:!0}:{done:!1,value:X[K++]}},e:function(ve){throw ve},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,ne=!1,ue;return{s:function(){z=z.call(X)},n:function(){var ve=z.next();return re=ve.done,ve},e:function(ve){ne=!0,ue=ve},f:function(){try{!re&&z.return!=null&&z.return()}finally{if(ne)throw ue}}}}function V(X,G){if(X){if(typeof X=="string")return w(X,G);var z=Object.prototype.toString.call(X).slice(8,-1);if(z==="Object"&&X.constructor&&(z=X.constructor.name),z==="Map"||z==="Set")return Array.from(X);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return w(X,G)}}function w(X,G){(G==null||G>X.length)&&(G=X.length);for(var z=0,K=new Array(G);z<G;z++)K[z]=X[z];return K}function x(X,G){var z=Object.keys(X);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(X);G&&(K=K.filter(function(Y){return Object.getOwnPropertyDescriptor(X,Y).enumerable})),z.push.apply(z,K)}return z}function H(X){for(var G=1;G<arguments.length;G++){var z=arguments[G]!=null?arguments[G]:{};G%2?x(Object(z),!0).forEach(function(K){(0,M.default)(X,K,z[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(z)):x(Object(z)).forEach(function(K){Object.defineProperty(X,K,Object.getOwnPropertyDescriptor(z,K))})}return X}var Z=function(G,z,K,Y,re,ne){var ue=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,ae=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},ve=ne.settings.shouldCreateEmptyGroup,se=z.push(Y),ge=!ve,ye=!!(ae!=null&&ae.isDefaultCase),Oe=G;return G=c(G,z,K,Y,(0,P.defaultGroupProperties)(ne).merge(re||{}),ne,ue),G!==Oe&&(!ue&&!ye&&(G=G.setIn((0,T.expandTreePath)(se,"children1"),new I.default.OrderedMap),ge&&(G=c(G,se,"rule",(0,C.default)(),(0,P.defaultRuleProperties)(ne),ne))),G=(0,T.fixPathsInTree)(G)),G},ee=function(G,z,K){G=o(G,z);var Y=K.settings.canLeaveEmptyGroup,re=z.slice(0,-1),ne=!(0,T.hasChildren)(G,re);return ne&&!Y&&(G=(0,T.fixEmptyGroupsInTree)(G),(0,T.isEmptyTree)(G)&&!Y&&(G=c(G,new I.default.List,"rule",(0,C.default)(),(0,P.defaultRuleProperties)(K),K))),G=(0,T.fixPathsInTree)(G),G},J=function(G,z,K){G=o(G,z);var Y=K.settings.canLeaveEmptyGroup,re=z.pop(),ne=G.getIn((0,T.expandTreePath)(re)),ue=ne.getIn(["properties","field"]),ae=ne.getIn(["properties","operator"]),ve=ne.getIn(["properties","value",0]),se=ue?(0,A.getFieldConfig)(K,ue):null,ge=ae?(0,A.getOperatorConfig)(K,ae,ue):null,ye=ue&&ae&&ge.cardinality!=0,Oe=ne.get("type")=="rule_group",Se=!(0,T.hasChildren)(G,re),ce=Oe?ye&&se.initialEmptyWhere:Y;return Se&&!ce&&(Oe&&(G=G.deleteIn((0,T.expandTreePath)(re))),G=(0,T.fixEmptyGroupsInTree)(G),(0,T.isEmptyTree)(G)&&!Y&&(G=c(G,new I.default.List,"rule",(0,C.default)(),(0,P.defaultRuleProperties)(K),K))),G=(0,T.fixPathsInTree)(G),G},k=function(G,z,K){return G.setIn((0,T.expandTreePath)(z,"properties","not"),K)},R=function(G,z,K){return(0,T.removeIsLockedInTree)(G.setIn((0,T.expandTreePath)(z,"properties","isLocked"),K))},h=function(G,z,K){return G.setIn((0,T.expandTreePath)(z,"properties","conjunction"),K)},s=function X(G,z,K){K&&Array.isArray(K)&&(z.children1=new I.default.OrderedMap(K.reduce(function(Y,re){var ne=(0,C.default)(),ue=H(H({},re),{},{properties:(0,P.defaultItemProperties)(G,re).merge(re.properties||{}),id:ne});return X(G,ue,ue.children1),H(H({},Y),{},(0,M.default)({},ne,new I.default.Map(ue)))},{})))},c=function(G,z,K,Y,re,ne){var ue=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(K=="switch_group")throw new Error("Can't add switch_group programmatically");var ae=ne.settings,ve=ae.maxNumberOfCases,se=ae.maxNumberOfRules,ge=ae.maxNesting,ye=G.get("type"),Oe=ye=="switch_group",Se=G.getIn((0,T.expandTreePath)(z)),ce=Oe?G.getIn((0,T.expandTreePath)(z.take(2))):null,Ne=(0,T.expandTreePath)(z,"children1"),we=G.getIn(Ne),je=!!we&&we.size,Ke=je?we.size:null,Ye,ke;K=="case_group"?(Ye=Ke,ke=ve):K=="group"?(Ye=z.size,ke=ge):Se?.get("type")=="rule_group"||(Ye=Oe?(0,T.getTotalRulesCountInTree)(ce):(0,T.getTotalRulesCountInTree)(G),ke=se);var at=ke&&Ye?Ye<ke:!0,He={type:K,id:Y,properties:re};s(ne,He,ue);var fe=K=="case_group"&&je&&we.last().get("children1")==null;if(at){var Ee=new I.default.OrderedMap((0,M.default)({},Y,new I.default.Map(He)));if(!je)G=G.setIn(Ne,Ee);else if(fe){var Ce,Fe=we.last(),De=new I.default.OrderedMap((Ce={},(0,M.default)(Ce,Y,new I.default.Map(He)),(0,M.default)(Ce,Fe.get("id"),Fe),Ce));G=G.deleteIn((0,T.expandTreePath)(Ne,"children1",Fe.get("id"))),G=G.mergeIn(Ne,De)}else G=G.mergeIn(Ne,Ee);G=(0,T.fixPathsInTree)(G)}return G},o=function(G,z){return G=G.deleteIn((0,T.expandTreePath)(z)),G=(0,T.fixPathsInTree)(G),G},u=function(G,z,K,Y,re){var ne=(0,T.getItemByPath)(G,z),ue=z.pop(),ae=z.size>1?(0,T.getItemByPath)(G,ue):null,ve=ae?ae.get("children1"):null,se=(0,T.getItemByPath)(G,K),ge=Y==S.PLACEMENT_APPEND||Y==S.PLACEMENT_PREPEND?K:K.pop(),ye=Y==S.PLACEMENT_APPEND||Y==S.PLACEMENT_PREPEND?se:K.size>1?(0,T.getItemByPath)(G,ge):null,Oe=ye?ye.get("children1"):null;if(!ae||!ye||!ne)return G;var Se=ae.get("id")==ye.get("id"),ce=ge.size<ue.size&&(0,b.deepEqual)(ge.toArray(),ue.toArray().slice(0,ge.size)),Ne=ge.size>ue.size&&(0,b.deepEqual)(ue.toArray(),ge.toArray().slice(0,ue.size)),we=null,je=null;ce?we=I.default.List(ue.toArray().slice(ge.size)):Ne&&(je=I.default.List(ge.toArray().slice(ue.size)));var Ke=Oe,Ye=ve;return Ne||(Ye=Ye.delete(ne.get("id"))),Se?Ke=Ye:ce&&(Ke=Ke.updateIn((0,T.expandTreeSubpath)(we,"children1"),function(ke){return Ye})),Y==S.PLACEMENT_BEFORE||Y==S.PLACEMENT_AFTER?Ke=I.default.OrderedMap().withMutations(function(ke){var at=j(Ke.entries()),He;try{for(at.s();!(He=at.n()).done;){var fe=(0,m.default)(He.value,2),Ee=fe[0],Ce=fe[1];Ee==se.get("id")&&Y==S.PLACEMENT_BEFORE&&ke.set(ne.get("id"),ne),ke.set(Ee,Ce),Ee==se.get("id")&&Y==S.PLACEMENT_AFTER&&ke.set(ne.get("id"),ne)}}catch(Fe){at.e(Fe)}finally{at.f()}}):Y==S.PLACEMENT_APPEND?Ke=Ke.merge((0,M.default)({},ne.get("id"),ne)):Y==S.PLACEMENT_PREPEND&&(Ke=I.default.OrderedMap((0,M.default)({},ne.get("id"),ne)).merge(Ke)),Ne&&(Ye=Ye.updateIn((0,T.expandTreeSubpath)(je,"children1"),function(ke){return Ke}),Ye=Ye.delete(ne.get("id"))),!Se&&!ce&&(G=G.updateIn((0,T.expandTreePath)(ue,"children1"),function(ke){return Ye})),Ne||(G=G.updateIn((0,T.expandTreePath)(ge,"children1"),function(ke){return Ke})),G=(0,T.fixPathsInTree)(G),G},l=function(G,z,K,Y){if(!K)return o(G,z);var re=Y.settings,ne=re.fieldSeparator,ue=re.setOpOnChangeField,ae=re.showErrorMessage;Array.isArray(K)&&(K=K.join(ne));var ve=G.getIn((0,T.expandTreePath)(z,"type")),se=G.getIn((0,T.expandTreePath)(z,"properties")),ge=ve=="rule_group",ye=(0,A.getFieldConfig)(Y,K),Oe=ye.type=="!group",Se=Oe&&ye.mode=="array",ce=ge!=Oe,Ne=se.get("operator"),we=se.get("operatorOptions"),je=se.get("field"),Ke=se.get("value"),Ye=se.get("valueSrc",new I.default.List),ke=se.get("valueType",new I.default.List),at=ye&&ye.operators.indexOf(Ne)!==-1?Ne:null,He=null,fe=(0,O.getOperatorsForField)(Y,K);if(fe&&fe.length==1)He=fe[0];else if(fe&&fe.length>1){var Ee=j(ue||[]),Ce;try{for(Ee.s();!(Ce=Ee.n()).done;){var Fe=Ce.value;if(Fe=="keep"&&!ce?He=at:Fe=="default"?He=(0,P.defaultOperator)(Y,K,!1):Fe=="first"&&(He=(0,O.getFirstOperator)(Y,K)),He)break}}catch(lt){Ee.e(lt)}finally{Ee.f()}}if(!Oe&&!ye.operators)return console.warn("Type ".concat(ye.type," is not supported")),G;if(ge&&!Oe&&(G=G.setIn((0,T.expandTreePath)(z,"type"),"rule"),G=G.deleteIn((0,T.expandTreePath)(z,"children1")),G=G.setIn((0,T.expandTreePath)(z,"properties"),new I.default.OrderedMap)),Oe){G=G.setIn((0,T.expandTreePath)(z,"type"),"rule_group");var De=(0,O.getNewValueForFieldOp)(Y,Y,se,K,He,"field",!0),Me=De.canReuseValue,Ae=De.newValue,$e=De.newValueSrc,rt=De.newValueType,it=De.operatorCardinality,Qe=(0,P.defaultGroupProperties)(Y,ye).merge({field:K,mode:ye.mode});return Se&&(Qe=Qe.merge({operator:He,value:Ae,valueSrc:$e,valueType:rt})),G=G.setIn((0,T.expandTreePath)(z,"children1"),new I.default.OrderedMap),G=G.setIn((0,T.expandTreePath)(z,"properties"),Qe),ye.initialEmptyWhere&&it==1||(G=c(G,z,"rule",(0,C.default)(),(0,P.defaultRuleProperties)(Y,K),Y)),G=(0,T.fixPathsInTree)(G),G}return G.updateIn((0,T.expandTreePath)(z,"properties"),function(lt){return lt.withMutations(function(ct){var Ze=(0,O.getNewValueForFieldOp)(Y,Y,ct,K,He,"field",!0),gt=Ze.canReuseValue,pe=Ze.newValue,he=Ze.newValueSrc,Le=Ze.newValueType,Pe=Ze.newValueError;ae&&(ct=ct.set("valueError",Pe));var Ve=gt?we:(0,P.defaultOperatorOptions)(Y,He,K);return ct.set("field",K).set("operator",He).set("operatorOptions",Ve).set("value",pe).set("valueSrc",he).set("valueType",Le).delete("asyncListValues")})})},f=function(G,z,K,Y){var re=Y.settings.showErrorMessage,ne=G.getIn((0,T.expandTreePath)(z,"properties")),ue=G.getIn((0,T.expandTreePath)(z,"children1")),ae=ne.get("field"),ve=(0,A.getFieldConfig)(Y,ae),se=ve.type=="!group",ge=(0,A.getOperatorConfig)(Y,K,ae),ye=ge?(0,b.defaultValue)(ge.cardinality,1):null;return G=G.updateIn((0,T.expandTreePath)(z,"properties"),function(Oe){return Oe.withMutations(function(Se){var ce=Se.get("field"),Ne=Se.get("operatorOptions"),we=Se.get("value",new I.default.List),je=Se.get("valueSrc",new I.default.List),Ke=Se.get("operator"),Ye=(0,O.getNewValueForFieldOp)(Y,Y,Se,ce,K,"operator",!0),ke=Ye.canReuseValue,at=Ye.newValue,He=Ye.newValueSrc,fe=Ye.newValueType,Ee=Ye.newValueError;re&&(Se=Se.set("valueError",Ee));var Ce=ke?Ne:(0,P.defaultOperatorOptions)(Y,K,ce);return ke||(Se=Se.delete("asyncListValues")),Se.set("operator",K).set("operatorOptions",Ce).set("value",at).set("valueSrc",He).set("valueType",fe)})}),se&&ye==0&&ue.size==0&&(G=c(G,z,"rule",(0,C.default)(),(0,P.defaultRuleProperties)(Y,ae),Y)),G},y=function(G,z,K,Y,re,ne,ue,ae){var ve=ne.settings,se=ve.fieldSeparator,ge=ve.showErrorMessage,ye,Oe=G.getIn((0,T.expandTreePath)(z,"properties","valueSrc",K+""))||null;Oe==="field"&&Array.isArray(Y)&&(Y=Y.join(se));var Se=G.getIn((0,T.expandTreePath)(z,"properties","field"))||null,ce=G.getIn((0,T.expandTreePath)(z,"properties","operator"))||null,Ne=(0,A.getOperatorConfig)(ne,ce,Se),we=ce?(0,b.defaultValue)(Ne.cardinality,1):null,je=!1,Ke=re||g(Y,Oe,ne),Ye=!1,ke=(0,D.validateValue)(ne,Se,Se,ce,Y,Ke,Oe,ue,Ye,je),at=(0,m.default)(ke,2),He=at[0],fe=at[1],Ee=!He;if(fe!==Y&&(Y=fe),ge){var Ce=(0,O.getWidgetForFieldOp)(ne,Se,ce,Oe),Fe=(0,A.getFieldWidgetConfig)(ne,Se,ce,Ce,Oe),De=Array.from({length:we},function(Ze,gt){return G.getIn((0,T.expandTreePath)(z,"properties","valueSrc",gt+""))||null});if(Ne&&Ne.validateValues&&De.filter(function(Ze){return Ze=="value"||Ze==null}).length==we){var Me=Array.from({length:we},function(Ze,gt){return gt==K?Y:G.getIn((0,T.expandTreePath)(z,"properties","value",gt+""))||null}),Ae=Fe&&Fe.toJS?Me.map(function(Ze){return Fe.toJS(Ze,Fe)}):Me,$e=Ne.validateValues(Ae);G=G.setIn((0,T.expandTreePath)(z,"properties","valueError",we),$e)}}var rt=G.getIn((0,T.expandTreePath)(z,"properties","value"));rt||(G=G.setIn((0,T.expandTreePath)(z,"properties","value"),new I.default.List(new Array(we))).setIn((0,T.expandTreePath)(z,"properties","valueType"),new I.default.List(new Array(we))).setIn((0,T.expandTreePath)(z,"properties","valueError"),new I.default.List(new Array(we))));var it=G.getIn((0,T.expandTreePath)(z,"properties","value",K+"")),Qe=G.getIn((0,T.expandTreePath)(z,"properties","valueError",K)),lt=it==null,ct=!!Qe;return(Ee||ge)&&(G=G.deleteIn((0,T.expandTreePath)(z,"properties","asyncListValues")),typeof Y>"u"?(G=G.setIn((0,T.expandTreePath)(z,"properties","value",K+""),void 0),G=G.setIn((0,T.expandTreePath)(z,"properties","valueType",K+""),null)):(ue&&(G=G.setIn((0,T.expandTreePath)(z,"properties","asyncListValues"),ue)),G=G.setIn((0,T.expandTreePath)(z,"properties","value",K+""),Y),G=G.setIn((0,T.expandTreePath)(z,"properties","valueType",K+""),Ke),ye=ae&&!lt&&!ct)),ge&&(G=G.setIn((0,T.expandTreePath)(z,"properties","valueError",K),He)),ae&&(Ee&&ct||!Ee&&!ct)&&(G=G.setIn((0,T.expandTreePath)(z,"properties","valueError",K),He),ye=!1),{tree:G,isInternalValueChange:ye}},p=function(G,z,K,Y,re){var ne=re.settings.showErrorMessage,ue=G.getIn((0,T.expandTreePath)(z,"properties","field"))||null,ae=G.getIn((0,T.expandTreePath)(z,"properties","operator"))||null;if(G=G.setIn((0,T.expandTreePath)(z,"properties","value",K+""),void 0),G=G.setIn((0,T.expandTreePath)(z,"properties","valueType",K+""),null),G=G.deleteIn((0,T.expandTreePath)(z,"properties","asyncListValues")),ne){G=G.setIn((0,T.expandTreePath)(z,"properties","valueError",K),null);var ve=(0,A.getOperatorConfig)(re,ae,ue),se=ae?(0,b.defaultValue)(ve.cardinality,1):null;ve.validateValues&&(G=G.setIn((0,T.expandTreePath)(z,"properties","valueError",se),null))}if(typeof Y>"u"?G=G.setIn((0,T.expandTreePath)(z,"properties","valueSrc",K+""),null):G=G.setIn((0,T.expandTreePath)(z,"properties","valueSrc",K+""),Y),Y){var ge=G.getIn((0,T.expandTreePath)(z,"properties")),ye=(0,O.getNewValueForFieldOp)(re,re,ge,ue,ae,"valueSrc",!0),Oe=ye.canReuseValue,Se=ye.newValue,ce=ye.newValueSrc,Ne=ye.newValueType,we=ye.newValueError;!Oe&&ce.get(K)==Y&&(G=G.setIn((0,T.expandTreePath)(z,"properties","value",K+""),Se.get(K)),G=G.setIn((0,T.expandTreePath)(z,"properties","valueType",K+""),Ne.get(K)))}return G},a=function(G,z,K,Y){return G.setIn((0,T.expandTreePath)(z,"properties","operatorOptions",K),Y)},n=function(G,z){var K=z.settings.canLeaveEmptyGroup;return K||(G=(0,T.fixEmptyGroupsInTree)(G)),G},g=function(G,z,K){var Y=null;if(G){if(z==="field"){var re=(0,A.getFieldConfig)(K,G);re&&(Y=re.type)}else if(z==="func"){var ne=G.get("func");if(ne){var ue=(0,A.getFuncConfig)(K,ne);ue&&(Y=ue.returnType)}}}return Y},d=function(G,z){var K=G.getIn((0,T.expandTreePath)(z,"properties","field"))||null;return K},N={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},W=function(G,z){var K=["config","asyncListValues","__isInternal"],Y=[S.SET_TREE,S.SET_DRAG_START,S.SET_DRAG_PROGRESS,S.SET_DRAG_END],re=(0,U.default)((0,F.default)(G,K),b.applyToJS),ne=G.path&&d(z.tree,G.path)||G.field;return ne&&(re.affectedField=ne),(Y.includes(G.type)||G.type.indexOf("@@redux")==0)&&(re=null),re},_=function(G,z,K){var Y=(0,P.defaultRoot)(G),re=z||Y,ne=H({tree:re},N);return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne,ae=arguments.length>1?arguments[1]:void 0,ve={__isInternalValueChange:void 0,__lastAction:void 0},se={},ge=W(ae,ue);switch(ae.type){case S.SET_TREE:{var ye=K(ae.config,ae.tree);se.tree=ye;break}case S.ADD_CASE_GROUP:{se.tree=Z(ue.tree,ae.path,"case_group",ae.id,ae.properties,ae.config,ae.children,ae.meta);break}case S.ADD_GROUP:{se.tree=Z(ue.tree,ae.path,"group",ae.id,ae.properties,ae.config,ae.children,ae.meta);break}case S.REMOVE_GROUP:{se.tree=ee(ue.tree,ae.path,ae.config);break}case S.ADD_RULE:{se.tree=c(ue.tree,ae.path,ae.ruleType,ae.id,ae.properties,ae.config,ae.children);break}case S.REMOVE_RULE:{se.tree=J(ue.tree,ae.path,ae.config);break}case S.SET_CONJUNCTION:{se.tree=h(ue.tree,ae.path,ae.conjunction);break}case S.SET_NOT:{se.tree=k(ue.tree,ae.path,ae.not);break}case S.SET_FIELD:{se.tree=l(ue.tree,ae.path,ae.field,ae.config);break}case S.SET_LOCK:{se.tree=R(ue.tree,ae.path,ae.lock);break}case S.SET_OPERATOR:{se.tree=f(ue.tree,ae.path,ae.operator,ae.config);break}case S.SET_VALUE:{var Oe=y(ue.tree,ae.path,ae.delta,ae.value,ae.valueType,ae.config,ae.asyncListValues,ae.__isInternal),Se=Oe.tree,ce=Oe.isInternalValueChange;se.__isInternalValueChange=ce,se.tree=Se;break}case S.SET_VALUE_SRC:{se.tree=p(ue.tree,ae.path,ae.delta,ae.srcKey,ae.config);break}case S.SET_OPERATOR_OPTION:{se.tree=a(ue.tree,ae.path,ae.name,ae.value);break}case S.MOVE_ITEM:{se.tree=u(ue.tree,ae.fromPath,ae.toPath,ae.placement,ae.config);break}case S.SET_DRAG_START:{se.dragStart=ae.dragStart,se.dragging=ae.dragging,se.mousePos=ae.mousePos;break}case S.SET_DRAG_PROGRESS:{se.mousePos=ae.mousePos,se.dragging=ae.dragging;break}case S.SET_DRAG_END:{se.tree=n(ue.tree,G),se=H(H({},se),N);break}default:break}return ge&&(se.__lastAction=ge),H(H(H({},ue),ve),se)}};i.default=_},3684:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.simulateAsyncFetch=i.mergeListValues=i.listValueToOption=i.getListValue=void 0;var E=r(e(79788)),m=r(e(90890)),M=r(e(62052)),I=e(60399),T=function(O){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var F=(0,M.default)(E.default.mark(function U(L,$,j){var V,w,x,H,Z,ee,J,k;return E.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return V=j.pageSize!=null?j.pageSize:b,w=(0,I.listValuesToArray)(O).filter(function(s){var c=s.title;return L==null?!0:c.toUpperCase().indexOf(L.toUpperCase())!=-1}),x=V?Math.ceil(w.length/V):0,H=$||0,Z=V?Math.ceil(H/V):null,ee=V?w.slice(H,H+V):w,J=V?H+ee.length:null,k=V?J<w.length:!1,console.debug("simulateAsyncFetch",{search:L,offset:$,values:ee,hasMore:k,filtered:w}),h.next=11,(0,I.sleep)(D);case 11:return h.abrupt("return",{values:ee,hasMore:k});case 12:case"end":return h.stop()}},U)}));return function(U,L,$){return F.apply(this,arguments)}}()};i.simulateAsyncFetch=T;var P=function(O,b){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!b)return O;var F=O||[],U=b.filter(function($){return F.find(function(j){return j.value==$.value})==null}),L=D?[].concat((0,m.default)(U),(0,m.default)(F)):[].concat((0,m.default)(F),(0,m.default)(U));return L};i.mergeListValues=P;var S=function(O){if(O==null)return null;var b=O.title,D=O.value,F=O.disabled,U=O.groupTitle,L=O.renderTitle,$={title:b,value:D};return F&&($.disabled=F),U&&($.groupTitle=U),L&&($.renderTitle=L),$};i.listValueToOption=S;var C=function(O,b){return(0,I.mapListValues)(b,function(D){return D.value===O?D:null}).filter(function(D){return D!==null}).shift()};i.getListValue=C},79746:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeField=i.getOperatorConfig=i.getFuncConfig=i.getFuncArgConfig=i.getFieldWidgetConfig=i.getFieldRawConfig=i.getFieldConfig=i.extendConfig=i.createConfigMemo=void 0;var E=r(e(90890)),m=r(e(92476)),M=r(e(91148)),I=r(e(63955)),T=r(e(76833)),P=r(e(9094)),S=e(42009),C=r(e(36365)),A=e(60399),O=e(62413),b=r(e(29521)),D=r(e(7275));function F(p,a){var n=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);a&&(g=g.filter(function(d){return Object.getOwnPropertyDescriptor(p,d).enumerable})),n.push.apply(n,g)}return n}function U(p){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?F(Object(n),!0).forEach(function(g){(0,m.default)(p,g,n[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(n,g))})}return p}function L(p,a){var n=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!n){if(Array.isArray(p)||(n=$(p))||a&&p&&typeof p.length=="number"){n&&(p=n);var g=0,d=function(){};return{s:d,n:function(){return g>=p.length?{done:!0}:{done:!1,value:p[g++]}},e:function(G){throw G},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N=!0,W=!1,_;return{s:function(){n=n.call(p)},n:function(){var G=n.next();return N=G.done,G},e:function(G){W=!0,_=G},f:function(){try{!N&&n.return!=null&&n.return()}finally{if(W)throw _}}}}function $(p,a){if(p){if(typeof p=="string")return j(p,a);var n=Object.prototype.toString.call(p).slice(8,-1);if(n==="Object"&&p.constructor&&(n=p.constructor.name),n==="Map"||n==="Set")return Array.from(p);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(p,a)}}function j(p,a){(a==null||a>p.length)&&(a=p.length);for(var n=0,g=new Array(a);n<a;n++)g[n]=p[n];return g}var V=["conjunctions","fields","types","operators","widgets","settings","funcs"],w=function(a){return(0,D.default)(a,V)},x=function(){var a=new Map,n=2,g=0,d=function(X){var G=H(X,++g);return a.size+1>n&&a.delete(a.keys()[0]),a.set(X,G),G},N=function(X){var G=L(a.keys()),z;try{var K=function(){var se=z.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:a.get(se)}};for(G.s();!(z=G.n()).done;){var Y=K();if((0,M.default)(Y)==="object")return Y.v}}catch(ve){G.e(ve)}finally{G.f()}var re=L(a.values()),ne;try{var ue=function(){var se=ne.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:se}};for(re.s();!(ne=re.n()).done;){var ae=ue();if((0,M.default)(ae)==="object")return ae.v}}catch(ve){re.e(ve)}finally{re.f()}return null},W=function(X){return N(X)||d(X)};return function(_){return W(w(_))}};i.createConfigMemo=x;var H=function(a,n){return a.__configId||(a=U({},a),a.settings=(0,I.default)({},S.settings,a.settings),a._fieldsCntByType={},a._funcsCntByType={},a.types=(0,b.default)(a.types),Z(a.types,a),a.fields=(0,b.default)(a.fields),a.__fieldNames={},J(a.fields,a),a.funcs=(0,b.default)(a.funcs),k(a.funcs,a),C.default.locale(a.settings.locale.moment),Object.defineProperty(a,"__configId",{enumerable:!1,writable:!1,value:n||(0,T.default)()})),a};i.extendConfig=H;function Z(p,a){for(var n in p){var g=p[n];ee(n,g,a)}}function ee(p,a,n){var g=null,d=null;a.mainWidget=a.mainWidget||Object.keys(a.widgets).filter(function(K){return K!="field"&&K!="func"})[0];for(var N in a.widgets){var W=a.widgets[N];if(W.operators){var _=W.operators;a.excludeOperators&&(_=_.filter(function(K){return!a.excludeOperators.includes(K)})),g=(0,A.mergeArraysSmart)(g,_)}W.defaultOperator&&(d=W.defaultOperator),N==a.mainWidget&&(W=(0,I.default)({},{widgetProps:a.mainWidgetProps||{}},W)),a.widgets[N]=W}a.valueSources||(a.valueSources=Object.keys(n.settings.valueSourcesInfo));var X=L(a.valueSources),G;try{for(X.s();!(G=X.n()).done;){var z=G.value;z!="value"&&!a.widgets[z]&&(a.widgets[z]={})}}catch(K){X.e(K)}finally{X.f()}!a.operators&&g&&(a.operators=Array.from(new Set(g))),!a.defaultOperator&&d&&(a.defaultOperator=d)}function J(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var g in p)R(p[g],a,[].concat((0,E.default)(n),[g])),p[g].subfields&&J(p[g].subfields,a,[].concat((0,E.default)(n),[g]))}function k(p,a){if(p)for(var n in p){var g=p[n];g.returnType&&(a._funcsCntByType[g.returnType]||(a._funcsCntByType[g.returnType]=0),a._funcsCntByType[g.returnType]++);for(var d in g.args)R(g.args[d],a,null,!0);if(g.args){var N=Object.keys(g.args),W=!0,_=L(N.reverse()),X;try{for(_.s();!(X=_.n()).done;){var G=X.value,z=g.args[G];!W&&z.isOptional&&delete z.isOptional,z.isOptional||(W=!1)}}catch(K){_.e(K)}finally{_.f()}}g.subfields&&k(g.subfields,a)}}function R(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=null,N=null,W=a.types[p.type],_=p.excludeOperators||[];if(p.type!="!struct"&&p.type!="!group"){var X=["listValues","allowCustomValues","validateValue"];p.fieldSettings||(p.fieldSettings={});for(var G=0,z=X;G<z.length;G++){var K=z[G];p[K]&&(p.fieldSettings[K]=p[K],delete p[K])}if(p.fieldSettings.listValues&&(p.fieldSettings.listValues=(0,A.normalizeListValues)(p.fieldSettings.listValues,p.type,p.fieldSettings)),!W){p.disabled=!0;return}g||(a._fieldsCntByType[p.type]||(a._fieldsCntByType[p.type]=0),a._fieldsCntByType[p.type]++),p.widgets||(p.widgets={}),g&&(p._isFuncArg=!0),p.mainWidget=p.mainWidget||W.mainWidget,p.valueSources=p.valueSources||W.valueSources;var Y=W.excludeOperators||[];for(var re in W.widgets){var ne=p.widgets[re]||{},ue=W.widgets[re]||{};g||function(){var ve=[].concat((0,E.default)(_),(0,E.default)(Y)),se=p.preferWidgets&&(re=="field"||p.preferWidgets.includes(re))||ve.length>0;if(ne.operators){var ge=ne.operators.filter(function(Oe){return!ve.includes(Oe)});d=[].concat((0,E.default)(d||[]),(0,E.default)(ge))}else if(se&&ue.operators){var ye=ue.operators.filter(function(Oe){return!ve.includes(Oe)});d=[].concat((0,E.default)(d||[]),(0,E.default)(ye))}ne.defaultOperator&&(N=ne.defaultOperator)}(),re==p.mainWidget&&(ne=(0,I.default)({},{widgetProps:p.mainWidgetProps||{}},ne)),p.widgets[re]=ne}g||(!p.operators&&d&&(p.operators=Array.from(new Set(d))),!p.defaultOperator&&N&&(p.defaultOperator=N))}var ae=s(a,n);ae&&(p.fieldName=ae),n&&p.fieldName&&(a.__fieldNames[p.fieldName]=n)}var h=function(a,n){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!n)return null;if(n=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:a.widgets.case_value}};var N=a.settings.fieldSeparator,W=Array.isArray(n)?n:n.split(N),_=a[g];if(!_)return null;for(var X=_,G=null,z=[],K=0;K<W.length;K++){var Y=W[K];z.push(Y);var re=z.join(N);G=X[re],K<W.length-1&&(G&&G[d]?(X=G[d],z=[]):G=null)}return G};i.getFieldRawConfig=h;var s=function(a,n){if(!n)return null;for(var g=a.settings.fieldSeparator,d=(0,E.default)(n),N=[],W,_;(W=d.pop())!==void 0&&d.length>0;)if(N.unshift(W),_=h(a,d),_.fieldName)return[_.fieldName].concat(N).join(g);return null},c=function(a,n){var g=a.settings.fieldSeparator,d=Array.isArray(n)?n.join(g):n;return a.__fieldNames[d]?a.__fieldNames[d].join(g):d};i.normalizeField=c;var o=function(a,n){if(!n)return null;var g=h(a,n,"funcs","subfields");return g||null};i.getFuncConfig=o;var u=function(a,n,g){var d=o(a,n);if(!d)return null;var N=d.args&&d.args[g]||null;if(!N)return null;var W=a.types[N.type]||{},_=(0,P.default)({},W,N||{},function(X,G,z,K,Y,re){if(Array.isArray(X))return G});return _};i.getFuncArgConfig=u;var l=function(a,n){if(!n)return null;if((0,M.default)(n)=="object"&&!n.func&&n.type)return n;if((0,M.default)(n)=="object"&&n.func&&n.arg)return u(a,n.func,n.arg);var g=h(a,n);if(!g)return null;var d=a.types[g.type]||{},N=(0,P.default)({},d,g||{},function(W,_,X,G,z,K){if(Array.isArray(W))return _});return N};i.getFieldConfig=l;var f=function(a,n){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!n)return null;var d=a.operators[n];if(g){var N=l(a,g),W=(0,O.getWidgetForFieldOp)(a,g,n),_=a.widgets[W]||{},X=(N&&N.widgets?N.widgets[W]:{})||{},G=(_.opProps||{})[n],z=(X.opProps||{})[n],K=(0,I.default)({},d,G,z);return K}else return d};i.getOperatorConfig=f;var y=function(a,n,g){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n||!(g||d)&&N!="const"&&n!="!case_value")return null;var W=l(a,n);d||(d=(0,O.getWidgetForFieldOp)(a,n,g,N));var _=a.widgets[d]||{},X=(W&&W.widgets?W.widgets[d]:{})||{},G=X.widgetProps||{},z=(N=="value"||!N)&&W&&W.fieldSettings||{},K=(0,I.default)({},_,G,z);return K};i.getFieldWidgetConfig=y},20495:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.defaultRuleProperties=i.defaultRule=i.defaultRoot=i.defaultOperatorOptions=i.defaultOperator=i.defaultItemProperties=i.defaultGroupProperties=i.defaultGroupConjunction=i.defaultField=i.defaultConjunction=void 0;var E=r(e(92476)),m=r(e(40745)),M=r(e(76833)),I=e(79746),T=e(62413);function P(V,w){var x=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);w&&(H=H.filter(function(Z){return Object.getOwnPropertyDescriptor(V,Z).enumerable})),x.push.apply(x,H)}return x}function S(V){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?P(Object(x),!0).forEach(function(H){(0,E.default)(V,H,x[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(x)):P(Object(x)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(x,H))})}return V}var C=function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return typeof w.settings.defaultField=="function"?w.settings.defaultField(H):w.settings.defaultField||(x?(0,T.getFirstField)(w,H):null)};i.defaultField=C;var A=function(w,x){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,Z=(0,I.getFieldConfig)(w,x),ee=Z&&Z.operators||[],J=Z&&Z.defaultOperator;ee.includes(J)||(J=null),!J&&H&&(J=(0,T.getFirstOperator)(w,x));var k=typeof w.settings.defaultOperator=="function"?w.settings.defaultOperator(x,Z):J;return k};i.defaultOperator=A;var O=function(w,x,H){var Z=x?(0,I.getOperatorConfig)(w,x,H):null;return Z&&Z.options?new m.default.Map(Z.options&&Z.options.defaults||{}):null};i.defaultOperatorOptions=O;var b=function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Z=null,ee=null,J=w.settings,k=J.setDefaultFieldAndOp,R=J.showErrorMessage;if(H){var h,s;Z=H==null||(h=H.properties)===null||h===void 0?void 0:h.field,ee=H==null||(s=H.properties)===null||s===void 0?void 0:s.operator}else k&&(Z=C(w,!0,x),ee=A(w,Z));var c=new m.default.Map({field:Z,operator:ee,value:new m.default.List,valueSrc:new m.default.List,operatorOptions:O(w,ee,Z)});if(R&&(c=c.set("valueError",new m.default.List)),Z&&ee){var o=(0,T.getNewValueForFieldOp)(w,w,c,Z,ee,"operator",!1),u=o.newValue,l=o.newValueSrc,f=o.newValueType,y=o.newValueError;c=c.set("value",u).set("valueSrc",l).set("valueType",f),R&&(c=c.set("valueError",y))}return c};i.defaultRuleProperties=b;var D=function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;x=(0,I.getFieldConfig)(w,x);var H=x&&x.conjunctions||Object.keys(w.conjunctions);return H.length==1?H[0]:w.settings.defaultGroupConjunction||w.settings.defaultConjunction||H[0]};i.defaultGroupConjunction=D;var F=function(w){return w.settings.defaultConjunction||Object.keys(w.conjunctions)[0]};i.defaultConjunction=F;var U=function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new m.default.Map({conjunction:D(w,x),not:!1})};i.defaultGroupProperties=U;var L=function(w,x){var H;return x&&x.type=="group"?U(w,x==null||(H=x.properties)===null||H===void 0?void 0:H.field):b(w,null,x)};i.defaultItemProperties=L;var $=function(w,x){return(0,E.default)({},w,new m.default.Map({type:"rule",id:w,properties:b(x)}))};i.defaultRule=$;var j=function(w){return new m.default.Map({type:"group",id:(0,M.default)(),children1:new m.default.OrderedMap(S({},$((0,M.default)(),w))),properties:U(w)})};i.defaultRoot=j},1901:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlEmptyValue=i.spelImportConcat=i.spelFormatConcat=i.spelFixList=i.spelEscape=i.mongoEmptyValue=i.SqlString=void 0;var E=r(e(91148)),m=e(62211);i.SqlString=m,m.trim=function(b){return b.charAt(0)=="'"?b.substring(1,b.length-1):b},m.escapeLike=function(b){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,U=m.escape(b);return U=m.trim(U),U=U.replace(/[%_]/g,"\\$&"),U=(D?"%":"")+U+(F?"%":""),U="'"+U+"'",U};var M=function(D){var F="''",U=D?.type;return U=="date"?F="'0000-00-00'":U=="datetime"?F="'0000-00-00 00:00'":U=="time"?F="'00:00'":U=="number"&&(F="0"),F};i.sqlEmptyValue=M;var I=function(D){var F="",U=D?.type;return U=="number"&&(F=0),F};i.mongoEmptyValue=I;var T=function(D){return"'"+D.replace(/'/g,"''")+"'"},P=function(D){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U,L,$=["int","float"];D.map(function(w){if(w!=null){if(typeof w=="string")L="String";else if(typeof w=="number")L=Number.isInteger(w)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(w," in array"));if(!U)U=L;else if(U!=L)if($.includes(U)&&$.includes(L))U="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(U," and ").concat(L))}}),U||(U="String");var j;U=="float"?j=D.map(function(w){return C(w,!0)}):j=D.map(function(w){return C(w)});var V;return F?V="new ".concat(U,"[]{").concat(j.join(", "),"}"):V="{".concat(j.join(", "),"}"),V},S=function(D){return"".concat(D,".?[true]")};i.spelFixList=S;var C=function(D){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(D==null)return"null";switch((0,E.default)(D)){case"boolean":return D?"true":"false";case"number":return!Number.isFinite(D)||isNaN(D)?void 0:D+(!Number.isInteger(D)||F?"f":"");case"object":if(Array.isArray(D))return P(D,U);throw new Error("spelEscape: Object is not supported");default:return T(D)}};i.spelEscape=C;var A=function(D){return D&&Array.isArray(D)&&D.length?D.map(function(F){if(F.type=="const")return C(F.value);if(F.type=="property")return""+F.value;if(F.type=="variable")return"#"+F.value}).filter(function(F){return F!=null}).join(" + "):"null"};i.spelFormatConcat=A;var O=function(D){if(D==null)return[void 0,[]];var F=[],U=D.valueType=="case_value"?D.value:[D],L=U.map(function($){if($.valueSrc=="value")return $.value===null?void 0:{type:"const",value:$.value};if($.valueSrc=="field")return{type:$.isVariable?"variable":"property",value:$.value};F.push("Unsupported valueSrc ".concat($.valueSrc," in concatenation"))}).filter(function($){return $!=null});return[L,F]};i.spelImportConcat=O},12177:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.setFunc=i.setArgValueSrc=i.setArgValue=i.completeValue=i.completeFuncValue=void 0;var E=r(e(91148)),m=e(79746),M=e(62413),I=r(e(40745));function T($,j){var V=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!V){if(Array.isArray($)||(V=P($))||j&&$&&typeof $.length=="number"){V&&($=V);var w=0,x=function(){};return{s:x,n:function(){return w>=$.length?{done:!0}:{done:!1,value:$[w++]}},e:function(k){throw k},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,Z=!1,ee;return{s:function(){V=V.call($)},n:function(){var k=V.next();return H=k.done,k},e:function(k){Z=!0,ee=k},f:function(){try{!H&&V.return!=null&&V.return()}finally{if(Z)throw ee}}}}function P($,j){if($){if(typeof $=="string")return S($,j);var V=Object.prototype.toString.call($).slice(8,-1);if(V==="Object"&&$.constructor&&(V=$.constructor.name),V==="Map"||V==="Set")return Array.from($);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return S($,j)}}function S($,j){(j==null||j>$.length)&&(j=$.length);for(var V=0,w=new Array(j);V<j;V++)w[V]=$[V];return w}var C=function(j){return(0,E.default)(j)=="object"&&j!==null&&!Array.isArray(j)},A=function(j,V,w){return V=="func"?O(j,w):j};i.completeValue=A;var O=function(j,V){var w=function(H){if(H){var Z=H.get("func"),ee=Z&&(0,m.getFuncConfig)(V,Z);if(ee){var J=H,k=!1;for(var R in ee.args){var h=ee.args[R],s=h.valueSources,c=h.isOptional,o=h.defaultValue,u=(0,M.filterValueSourcesForField)(V,s,h),l=J.get("args"),f=u.length==1?u[0]:void 0,y=l?l.get(R):void 0,p=y?y.get("value"):void 0,a=(y?y.get("valueSrc"):void 0)||f;if(p!==void 0){var n=A(p,a,V);if(n===void 0||(n!==p&&(J=J.setIn(["args",R,"value"],n)),k))return}else if(o!==void 0&&!C(o))J=J.setIn(["args",R,"value"],F(h)),J=J.setIn(["args",R,"valueSrc"],"value");else if(c)k=!0;else return}return J}}};return w(j)};i.completeFuncValue=O;var b=function(j,V){var w=[],x=[],H=function Z(ee){var J=ee&&ee.get("args");if(J){var k=T(J.values()),R;try{for(k.s();!(R=k.n()).done;){var h=R.value;if(h.get("valueSrc")=="field"){var s=h.get("value");if(s){var c=V?(0,m.getFieldConfig)(V,s):void 0;V&&!c?x.push(s):w.push(s)}}else h.get("valueSrc")=="func"&&Z(h.get("value"))}}catch(o){k.e(o)}finally{k.f()}}};return H(j),[w,x]},D=function(j,V,w){var x=w.settings.fieldSeparator;j=j||new I.default.Map,Array.isArray(V)&&(V=V.join(x)),j=j.set("func",V),j=j.set("args",new I.default.Map);var H=V&&(0,m.getFuncConfig)(w,V);if(H)for(var Z in H.args){var ee=H.args[Z],J=ee.valueSources,k=ee.defaultValue,R=(0,M.filterValueSourcesForField)(w,J,ee),h=R.length?R[0]:void 0,s=k?C(k)&&k.func?"func":"value":void 0,c=s||h;k!==void 0&&(j=j.setIn(["args",Z,"value"],F(ee))),c&&(j=j.setIn(["args",Z,"valueSrc"],c))}return j};i.setFunc=D;var F=function(j){var V=j.defaultValue;return C(V)&&!I.default.Map.isMap(V)&&V.func?I.default.fromJS(V,function(w,x){return I.default.Iterable.isIndexed(x)?x.toList():x.toOrderedMap()}):V},U=function(j,V,w,x,H){if(j&&j.get("func")){j=j.setIn(["args",V,"value"],w);var Z=x.valueSources,ee=(0,M.filterValueSourcesForField)(H,Z,x),J=ee.length==1?ee[0]:void 0;J&&(j=j.setIn(["args",V,"valueSrc"],J))}return j};i.setArgValue=U;var L=function(j,V,w,x,H){return j&&j.get("func")&&(j=j.setIn(["args",V],new I.default.Map({valueSrc:w}))),j};i.setArgValueSrc=L},35926:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.TreeUtils=i.ExportUtils=i.DefaultUtils=i.ConfigUtils=void 0,Object.defineProperty(i,"getSwitchValues",{enumerable:!0,get:function(){return S.getSwitchValues}}),Object.defineProperty(i,"simulateAsyncFetch",{enumerable:!0,get:function(){return M.simulateAsyncFetch}}),Object.defineProperty(i,"uuid",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"validateTree",{enumerable:!0,get:function(){return m.validateTree}});var m=e(16226),M=e(3684),I=r(e(76833)),T=O(e(79746));i.ConfigUtils=T;var P=O(e(20495));i.DefaultUtils=P;var S=O(e(31775));i.TreeUtils=S;var C=O(e(1901));i.ExportUtils=C;function A(b){if(typeof WeakMap!="function")return null;var D=new WeakMap,F=new WeakMap;return(A=function(L){return L?F:D})(b)}function O(b,D){if(!D&&b&&b.__esModule)return b;if(b===null||E(b)!=="object"&&typeof b!="function")return{default:b};var F=A(D);if(F&&F.has(b))return F.get(b);var U={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in b)if($!=="default"&&Object.prototype.hasOwnProperty.call(b,$)){var j=L?Object.getOwnPropertyDescriptor(b,$):null;j&&(j.get||j.set)?Object.defineProperty(U,$,j):U[$]=b[$]}return U.default=b,F&&F.set(b,U),U}},9701:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.useOnPropsChanged=i.pureShouldComponentUpdate=i.liteShouldComponentUpdate=i.isUsingLegacyReactDomRender=i.bindActionCreators=void 0;var E=r(e(66111)),m=r(e(74937)),M=e(60399),I=function(F){if(F._reactRootContainer)return"root";if(Object.getOwnPropertyNames(F).filter(function(U){return U.startsWith("__reactContainer")}).length>0)return"container"},T=function D(F){if(F){var U=I(F);return U!==void 0?U:D(F.parentNode)}},P=function(F){return T(F)==="root"};i.isUsingLegacyReactDomRender=P;var S=function(F,U){return function(L,$){var j=F.props,V=F.state,w=L!=j||$!=V;if(w&&V==$&&j!=L){var x=[];for(var H in L){var Z=L[H]!=j[H];Z&&(U[H]=="ignore"?Z=!1:U[H]=="shallow_deep"?Z=!(0,M.shallowEqual)(L[H],j[H],!0):U[H]=="shallow"?Z=!(0,M.shallowEqual)(L[H],j[H]):typeof U[H]=="function"&&(Z=U[H](L[H],j[H],$))),Z&&x.push(H)}x.length||(w=!1)}return w}};i.liteShouldComponentUpdate=S;var C=function(F){return function(U,L){return!(0,M.shallowEqual)(F.props,U)||!(0,M.shallowEqual)(F.state,L)}};i.pureShouldComponentUpdate=C;var A=function(){var F=E.default.version.split(".").map(parseInt.bind(null,10));return F[0]==16&&F[1]>=3||F[0]>16},O=function(F){A?F.UNSAFE_componentWillReceiveProps=function(U){F.onPropsChanged(U)}:F.componentWillReceiveProps=function(U){F.onPropsChanged(U)}};i.useOnPropsChanged=O;var b=function(F,U,L){return(0,m.default)(F,function($){return function(){for(var j=arguments.length,V=new Array(j),w=0;w<j;w++)V[w]=arguments[w];return L($.apply(void 0,[U].concat(V)))}})};i.bindActionCreators=b},62413:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.getWidgetsForFieldOp=i.getWidgetForFieldOp=i.getValueSourcesForFieldOp=i.getValueLabel=i.getOperatorsForField=i.getNewValueForFieldOp=i.getFuncPathLabels=i.getFirstOperator=i.getFirstField=i.getFieldPathLabels=i.getFieldPath=i.getFieldPartsConfigs=i.formatFieldName=i.filterValueSourcesForField=void 0;var E=r(e(91148)),m=r(e(90890)),M=r(e(47452)),I=e(79746),T=e(60399),P=r(e(40745)),S=e(16226),C=r(e(4161)),A=["select","multiselect","treeselect","treemultiselect"],O=function(R){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;h||(h=R);var y=s.get("field"),p=s.get("operator"),a=s.get("value"),n=s.get("valueSrc",new P.default.List),g=s.get("valueType",new P.default.List),d=s.get("asyncListValues"),N=R.settings,W=N.convertableWidgets,_=N.clearValueOnChangeField,X=N.clearValueOnChangeOp,G=N.showErrorMessage,z=(0,I.getOperatorConfig)(R,o,c),K=o?(0,T.defaultValue)(z.cardinality,1):null,Y=(0,I.getFieldConfig)(h,y),re=(0,I.getFieldConfig)(R,c),ne=y&&p&&o&&a!=null&&(!u||u=="field"&&!_||u=="operator"&&!X)&&Y&&re&&Y.type==re.type;ne&&A.includes(Y.type)&&u=="field"&&(ne=!1);for(var ue=0;ue<K;ue++){var ae=n.get(ue)||null,ve=ee(h,y,p,ae),se=ee(R,c,o,ae),ge=ae=="value"?ve:ee(h,y,p,"value"),ye=ae=="value"?se:ee(R,c,o,"value"),Oe=ye==ge||(W[ge]||[]).includes(ye);Oe||(ne=!1)}p!=o&&[p,o].includes("proximity")&&(ne=!1);var Se=(0,I.getFieldWidgetConfig)(R,c,o,null,n.first()),ce=Z(R,c,o),Ne={},we=Array.from({length:K},function(){return null});if(ne)for(var je=function(De){var Me=a.get(De),Ae=g.get(De)||null,$e=n.get(De)||null,rt=ce.find(function(Pe){return Pe==$e})!=null;!rt&&De>0&&$e==null&&(rt=!0);var it=d,Qe=(0,S.validateValue)(R,c,c,o,Me,Ae,$e,it,l,f),lt=(0,M.default)(Qe,2),ct=lt[0],Ze=lt[1],gt=!ct,pe=Ze!==Me,he=!rt||!gt&&(u=="field"||!G&&!pe),Le=!!ct&&G&&!he&&!pe;if(Le&&(we[De]=ct),pe&&(Ne[De]=Ze),he)return ne=!1,"break"},Ke=0;Ke<K;Ke++){var Ye=je(Ke);if(Ye==="break")break}var ke=null,at=null,He=null,fe=null;if(ke=new P.default.List(Array.from({length:K},function(Fe,De){var Me=void 0;if(ne)De<a.size&&(Me=a.get(De),Ne[De]!==void 0&&(Me=Ne[De]));else if(K==1){var Ae;Me=(0,T.getFirstDefined)([re?.defaultValue,re==null||(Ae=re.fieldSettings)===null||Ae===void 0?void 0:Ae.defaultValue,Se?.defaultValue])}return Me})),at=new P.default.List(Array.from({length:K},function(Fe,De){var Me=null;return ne?De<n.size&&(Me=n.get(De)):(ce.length==1||ce.length>1)&&(Me=ce[0]),Me})),G){if(z&&z.validateValues&&at.toJS().filter(function(Fe){return Fe=="value"||Fe==null}).length==K){var Ee=Se&&Se.toJS?ke.toJS().map(function(Fe){return Se.toJS(Fe,Se)}):ke.toJS(),Ce=z.validateValues(Ee);G&&we.push(Ce)}fe=new P.default.List(we)}return He=new P.default.List(Array.from({length:K},function(Fe,De){var Me=null;return ne?De<g.size&&(Me=g.get(De)):K==1&&Se&&Se.type!==void 0?Me=Se.type:K==1&&re&&re.type!==void 0&&(Me=re.type=="!group"?"number":re.type),Me})),{canReuseValue:ne,newValue:ke,newValueSrc:at,newValueType:He,newValueError:fe,operatorCardinality:K}};i.getNewValueForFieldOp=O;var b=function(R){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=R.settings.fieldSeparator,c=typeof h=="string"?h.split(s):h,o=h?(0,I.getFieldRawConfig)(R,h):R,u=o,l=null,f=[];do{var y=u===R?R.fields:u.subfields;if(!y||!Object.keys(y).length){u=l=null;break}l=Object.keys(y)[0],f.push(l),u=y[l]}while(u.type=="!struct"||u.type=="!group");return(c||[]).concat(f).join(s)};i.getFirstField=b;var D=function(R,h){var s=(0,I.getFieldConfig)(R,h),c=s?s.operators:[];return c};i.getOperatorsForField=D;var F=function(R,h){var s=D(R,h);return s?s[0]:null};i.getFirstOperator=F;var U=function(R,h){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!R)return null;var c=h.settings.fieldSeparator,o=Array.isArray(R)?R:R.split(c);return s?o:o.map(function(u,l,f){return f.slice(0,l+1)}).map(function(u){return u.join(c)})};i.getFieldPath=U;var L=function(R,h){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return $(R,h,s,"funcs","subfields")};i.getFuncPathLabels=L;var $=function(R,h){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!R)return null;var u=h.settings.fieldSeparator,l=Array.isArray(R)?R:R.split(u),f=s?Array.isArray(s)?s:s.split(u):[];return l.slice(f.length).map(function(y,p,a){return a.slice(0,p+1)}).map(function(y){return[].concat((0,m.default)(f),(0,m.default)(y)).join(u)}).map(function(y){var p=(0,I.getFieldRawConfig)(h,y,c,o);return p&&p.label||p&&(0,C.default)(y.split(u))}).filter(function(y){return y!=null})};i.getFieldPathLabels=$;var j=function(R,h){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!R)return null;var c=s&&(0,I.getFieldRawConfig)(h,s)||null,o=h.settings.fieldSeparator,u=Array.isArray(R)?R:R.split(o),l=s?Array.isArray(s)?s:s.split(o):[];return u.slice(l.length).map(function(f,y,p){return p.slice(0,y+1)}).map(function(f){return{part:[].concat((0,m.default)(l),(0,m.default)(f)).join(o),key:f[f.length-1]}}).map(function(f){var y=f.part,p=f.key,a=(0,I.getFieldRawConfig)(h,y);return{key:p,cnf:a}}).map(function(f,y,p){var a=f.key,n=f.cnf,g=y>0?p[y-1].cnf:c;return[a,n,g]})};i.getFieldPartsConfigs=j;var V=function(R,h,s,c){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=h&&(0,E.default)(h)=="object"&&!!h.func&&!!h.arg,f=R.settings.showLabels,y=(0,I.getFieldConfig)(R,h),p=(0,I.getFieldWidgetConfig)(R,h,s,null,o)||{},a=(0,I.getOperatorConfig)(R,s,h)||{},n=u?1:a.cardinality,g=null;if(n>1){var d=p.valueLabels||a.valueLabels;d&&(g=d[c]),g&&(0,E.default)(g)!="object"&&(g={label:g,placeholder:g}),g||(g={label:R.settings.valueLabel+" "+(c+1),placeholder:R.settings.valuePlaceholder+" "+(c+1)})}else{var N=p.valueLabel,W=p.valuePlaceholder;l&&(N||(N=y.label||h.arg),!W&&!f&&(W=y.label||h.arg)),g={label:N||R.settings.valueLabel,placeholder:W||R.settings.valuePlaceholder}}return g};i.getValueLabel=V;function w(k,R){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=[],o=[];if(!R)return{widgets:c,valueSrcs:o};var u=(0,E.default)(R)=="object"&&(!!R.func&&!!R.arg||R._isFuncArg),l=(0,I.getFieldConfig)(k,R),f=h?k.operators[h]:null;if(l&&l.widgets){var y=function(g){var d=l.widgets[g],N=k.widgets[g].valueSrc||"value",W=!0;if(g=="field"&&(W=W&&H(k,["field"],l).length>0),g=="func"&&(W=W&&H(k,["func"],l).length>0),s=="value"&&!d.operators&&!u&&R!="!case_value"&&(W=!1),d.operators&&h&&(W=W&&d.operators.indexOf(h)!=-1),s&&s!=N&&s!="const"&&(W=!1),f&&f.cardinality==0&&N!="value"&&(W=!1),W){c.push(g);var _=l.valueSources&&l.valueSources.indexOf(N)!=-1;f&&f.valueSources&&f.valueSources.indexOf(N)==-1&&(_=!1),_&&!o.find(function(X){return X==N})&&o.push(N)}};for(var p in l.widgets)y(p)}var a=function(g){var d=0;return l.preferWidgets?l.preferWidgets.includes(g)&&(d+=10-l.preferWidgets.indexOf(g)):g==l.mainWidget&&(d+=100),g=="field"&&(d-=1),g=="func"&&(d-=2),d};return c.sort(function(n,g){return a(g)-a(n)}),{widgets:c,valueSrcs:o}}var x=function(R,h,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=w(R,h,s,c),u=o.widgets;return u};i.getWidgetsForFieldOp=x;var H=function(R,h,s){return s?h.filter(function(c){var o=!0;if(c=="field"&&R._fieldsCntByType){var u=s._isFuncArg?0:1;o=o&&R._fieldsCntByType[s.type]>u}return c=="func"&&(R._funcsCntByType&&(o=o&&!!R._funcsCntByType[s.type]),s.funcs&&(o=o&&s.funcs.length>0)),o}):h};i.filterValueSourcesForField=H;var Z=function(R,h,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=w(R,h,s,null),l=u.valueSrcs,f=H(R,l,c);return f};i.getValueSourcesForFieldOp=Z;var ee=function(R,h,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=w(R,h,s,c),u=o.widgets,l=null;return u.length&&(l=u[0]),l};i.getWidgetForFieldOp=ee;var J=function(R,h,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(R){var o=(0,I.getFieldConfig)(h,R)||{},u=h.settings.fieldSeparator,l=Array.isArray(R)?R:R.split(u),f=Array.isArray(R)?R.join(u):R;if(o.tableName){var y=(0,m.default)(l);y[0]=o.tableName,f=y.join(u)}if(o.fieldName&&(f=o.fieldName),c){var p=(0,I.getFieldConfig)(h,c)||{},a=c;p.fieldName&&(a=p.fieldName),f.indexOf(a+u)==0?f=f.slice((a+u).length):s.errors.push("Can't cut group ".concat(a," from field ").concat(f))}return f}};i.formatFieldName=J},60399:(te,i,e)=>{"use strict";var r=e(59018),E=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.applyToJS=g,i.mapListValues=i.logger=i.listValuesToArray=i.isJsonLogic=i.isImmutable=i.immutableEqual=i.getValueInListValues=i.getTitleInListValues=i.getLogger=i.getItemInListValues=i.getFirstDefined=i.flatizeTreeData=i.escapeRegExp=i.eqSet=i.eqArrSet=i.defaultValue=i.defaultTreeDataMap=i.deepEqual=void 0,i.mergeArraysSmart=N,i.shallowEqual=i.removePrefixPath=i.normalizeListValues=void 0,i.sleep=a,i.toImmutableList=d,i.truncateString=void 0;var m=r(e(47452)),M=r(e(90890)),I=r(e(91148)),T=S(e(40745));function P(z){if(typeof WeakMap!="function")return null;var K=new WeakMap,Y=new WeakMap;return(P=function(ne){return ne?Y:K})(z)}function S(z,K){if(!K&&z&&z.__esModule)return z;if(z===null||E(z)!=="object"&&typeof z!="function")return{default:z};var Y=P(K);if(Y&&Y.has(z))return Y.get(z);var re={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in z)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(z,ue)){var ae=ne?Object.getOwnPropertyDescriptor(z,ue):null;ae&&(ae.get||ae.set)?Object.defineProperty(re,ue,ae):re[ue]=z[ue]}return re.default=z,Y&&Y.set(z,re),re}function C(z,K){var Y=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!Y){if(Array.isArray(z)||(Y=A(z))||K&&z&&typeof z.length=="number"){Y&&(z=Y);var re=0,ne=function(){};return{s:ne,n:function(){return re>=z.length?{done:!0}:{done:!1,value:z[re++]}},e:function(ge){throw ge},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ue=!0,ae=!1,ve;return{s:function(){Y=Y.call(z)},n:function(){var ge=Y.next();return ue=ge.done,ge},e:function(ge){ae=!0,ve=ge},f:function(){try{!ue&&Y.return!=null&&Y.return()}finally{if(ae)throw ve}}}}function A(z,K){if(z){if(typeof z=="string")return O(z,K);var Y=Object.prototype.toString.call(z).slice(8,-1);if(Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set")return Array.from(z);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return O(z,K)}}function O(z,K){(K==null||K>z.length)&&(K=z.length);for(var Y=0,re=new Array(K);Y<K;Y++)re[Y]=z[Y];return re}var b=function(K,Y){return typeof K>"u"?Y:K};i.defaultValue=b;var D=function(K,Y,re){if(!Y||K.length<=Y)return K;var ne=K.substr(0,Y-1);return(re?ne.substr(0,ne.lastIndexOf(" ")):ne)+"..."};i.truncateString=D;var F=function(K,Y){return K===Y?!0:K.equals(Y)};i.immutableEqual=F;var U=function(K,Y){return K===Y?!0:T.Map.isMap(K)?K.equals(Y):JSON.stringify(K)==JSON.stringify(Y)};i.deepEqual=U;var L=function(K,Y){if(K.size!==Y.size)return!1;var re=C(K),ne;try{for(re.s();!(ne=re.n()).done;){var ue=ne.value;if(!Y.has(ue))return!1}}catch(ae){re.e(ae)}finally{re.f()}return!0};i.eqSet=L;var $=function(K,Y){return L(new Set(K),new Set(Y))};i.eqArrSet=$;var j=function(K,Y){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return K===Y?!0:Array.isArray(K)?V(K,Y,re):T.Map.isMap(K)?K.equals(Y):(0,I.default)(K)=="object"?w(K,Y,re):K===Y};i.shallowEqual=j;function V(z,K){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(z===K)return!0;if(!z||!K)return!1;var re=z.length;if(K.length!==re)return!1;for(var ne=0;ne<re;ne++){var ue=Y?j(z[ne],K[ne],Y):z[ne]===K[ne];if(!ue)return!1}return!0}function w(z,K){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(z===K)return!0;if(!z||!K)return!1;var re=Object.keys(z),ne=Object.keys(K),ue=re.length;if(ne.length!==ue)return!1;for(var ae=0;ae<ue;ae++){var ve=re[ae],se=Y?j(z[ve],K[ve],Y):z[ve]===K[ve];if(!se)return!1}return!0}var x=function(K){return K.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};i.escapeRegExp=x;var H=function(K){return(0,I.default)(K)=="object"&&K!==null},Z=function(K,Y){return H(K)?K:{value:K,title:Y!==void 0?Y:K}},ee=function(K){if(!H(K))return K;if(Array.isArray(K))return K.map(function(ue){return Z(ue)});var Y=[];for(var re in K){var ne=K[re];Y.push(Z(re,ne))}return Y};i.listValuesToArray=ee;var J=function(K,Y){if(Array.isArray(K)){var re=K.map(function(ne){return Z(ne)});return re.find(function(ne){return ne.value===Y})||re.find(function(ne){return"".concat(ne.value)===Y})}else return K[Y]!==void 0?Z(Y,K[Y]):void 0};i.getItemInListValues=J;var k=function(K,Y){if(K==null)return Y;var re=J(K,Y);return re!==void 0?re.title:Y};i.getTitleInListValues=k;var R=function(K,Y){if(K==null)return Y;var re=J(K,Y);return re!==void 0?re.value:Y};i.getValueInListValues=R;var h=function(K,Y){var re=[];if(Array.isArray(K)){var ne=C(K),ue;try{for(ne.s();!(ue=ne.n()).done;){var ae=ue.value,ve=Y(Z(ae));ve!=null&&re.push(ve)}}catch(ye){ne.e(ye)}finally{ne.f()}}else for(var se in K){var ge=Y(Z(se,K[se]));ge!=null&&re.push(ge)}return re};i.mapListValues=h;var s={id:"value",pId:"parent",rootPId:void 0};i.defaultTreeDataMap=s;var c=function(K){var Y=s,re,ne,ue=function ve(se,ge,ye){if(se.children){ye==1&&(se[Y.pId]=Y.rootPId);var Oe=se.children.length,Se=C(se.children),ce;try{for(Se.s();!(ce=Se.n()).done;){var Ne=ce.value;Ne[Y.pId]=se[Y.id],re++,ge.splice(re,0,Ne),ne++,ve(Ne,ge,ye+1)}}catch(we){Se.e(we)}finally{Se.f()}delete se.children,Oe==0&&(ge.splice(re,1),re--,ne--)}};if(Array.isArray(K))for(ne=K.length,re=0;re<ne;re++){var ae=K[re];H(ae)&&(ae[Y.pId]!==void 0&&ae[Y.pId]!=Y.rootPId||ue(ae,K,1))}return K};i.flatizeTreeData=c;var o=function z(K,Y){var re=s,ne=J(K,Y),ue=ne?ne[re.pId]:void 0,ae=ue?K.find(function(ve){return ve[re.id]===ue}):void 0;return ae?[ae.value].concat((0,M.default)(z(K,ae.value))):[]},u=function(K,Y){var re=s,ne=J(K,Y);return ne?K.filter(function(ue){return ue[re.pId]===ne[re.id]}).map(function(ue){return ue.value}):[]},l=function(K,Y,re){var ne=C(K),ue;try{for(ne.s();!(ue=ne.n()).done;){var ae=ue.value;if(ae.path=o(K,ae.value),Y.treeSelectOnlyLeafs!=!1){var ve=u(K,ae.value);re||(ae.selectable=ve.length==0)}}}catch(se){ne.e(se)}finally{ne.f()}return K},f=function(K,Y,re){var ne=["treeselect","treemultiselect"].includes(Y),ue=["multiselect","treemultiselect"].includes(Y);return ne&&(K=ee(K),K=c(K),K=l(K,re,ue)),K};i.normalizeListValues=f;var y=function(K,Y){if(!K)return K;for(var re=!0,ne=0;ne<Y.length;ne++){var ue=Y[ne];if(!(K[ne]!==void 0&&ue==K[ne])){re=!1;break}}return re?K.slice(Y.length):K};i.removePrefixPath=y;var p=function(K){return(0,I.default)(K)==="object"&&K!==null&&!Array.isArray(K)&&Object.keys(K).length===1};i.isJsonLogic=p;function a(z){return new Promise(function(K){setTimeout(K,z)})}var n=function(K){return(0,I.default)(K)==="object"&&K!==null&&typeof K.toJS=="function"};i.isImmutable=n;function g(z){return n(z)?z.toJS():z}function d(z){return n(z)?z:new T.default.List(z)}function N(z,K){return z||(z=[]),K||(K=[]),K.map(function(Y){return[Y,z.indexOf(Y)]}).map(function(Y,re,ne){var ue=(0,m.default)(Y,2),ae=ue[0],ve=ue[1];if(ve==-1){var se=ne.slice(re+1),ge=ne.slice(0,re),ye=ge.reverse().find(function(Se){var ce=(0,m.default)(Se,2),Ne=ce[0],we=ce[1];return we!=-1}),Oe=se.find(function(Se){var ce=(0,m.default)(Se,2),Ne=ce[0],we=ce[1];return we!=-1});return Oe?[ae,"before",Oe[0]]:ye?[ae,"after",ye[0]]:[ae,"append",null]}else return null}).filter(function(Y){return Y!==null}).reduce(function(Y,re){var ne=(0,m.default)(re,3),ue=ne[0],ae=ne[1],ve=ne[2],se=Y.indexOf(ve);return Y.indexOf(ue)==-1&&(se>-1?Y.splice(se+(ae=="after"?1:0),0,ue):Y.splice(ae=="append"?1/0:0,0,ue)),Y},z.slice())}var W=function(){return typeof process<"u"&&process.env&&!1},_=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=K??W();return Y?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};i.getLogger=_;var X=function(){for(var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Y,re=0;re<K.length;re++){var ne=K[re];if(ne!==void 0){Y=ne;break}}return Y};i.getFirstDefined=X;var G=_();i.logger=G},31775:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.removePathsInTree=i.removeIsLockedInTree=i.isEmptyTree=i.hasChildren=i.getTreeBadFields=i.getTotalRulesCountInTree=i.getTotalReordableNodesCountInTree=i.getSwitchValues=i.getLightTree=i.getItemByPath=i.getFlatTree=i.fixPathsInTree=i.fixEmptyGroupsInTree=i.expandTreeSubpath=i.expandTreePath=void 0;var E=r(e(90890)),m=r(e(92476)),M=r(e(40745)),I=function(x){for(var H=arguments.length,Z=new Array(H>1?H-1:0),ee=1;ee<H;ee++)Z[ee-1]=arguments[ee];return x.interpose("children1").withMutations(function(J){return J.skip(1),J.push.apply(J,Z),J})};i.expandTreePath=I;var T=function(x){for(var H=arguments.length,Z=new Array(H>1?H-1:0),ee=1;ee<H;ee++)Z[ee-1]=arguments[ee];return x.interpose("children1").withMutations(function(J){return J.push.apply(J,Z),J})};i.expandTreeSubpath=T;var P=function(x,H){var Z=new M.default.OrderedMap((0,m.default)({},x.get("id"),x)),ee=x;return H.forEach(function(J){ee=Z.get(J),Z=ee.get("children1")}),ee};i.getItemByPath=P;var S=function(x){var H=x;function Z(ee,J){var k=J.push(ee.get("id"));ee.get("path")&&(H=H.removeIn(I(k,"path")));var R=ee.get("children1");R&&R.map(function(h,s){Z(h,k)})}return Z(x,new M.default.List),H};i.removePathsInTree=S;var C=function(x){var H=x;function Z(ee,J){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=J.push(ee.get("id")),h=ee.getIn(["properties","isLocked"]);k&&h&&(H=H.deleteIn(I(R,"properties","isLocked")));var s=ee.get("children1");s&&s.map(function(c,o){Z(c,R,h||k)})}return Z(x,new M.default.List),H};i.removeIsLockedInTree=C;var A=function(x){var H=x;function Z(ee,J,k,R){if(ee){var h=ee.get("path"),s=ee.get("id"),c=s||R,o=J.push(c);(!h||!h.equals(o))&&(H=H.setIn(I(o,"path"),o)),s||(H=H.setIn(I(o,"id"),c));var u=ee.get("children1");u&&(u.constructor.name=="Map"&&(H=H.setIn(I(o,"children1"),new M.default.OrderedMap(u))),u.map(function(l,f){Z(l,o,k+1,f)}))}}return Z(x,new M.default.List,0),H};i.fixPathsInTree=A;var O=function(x){var H=x;function Z(ee,J,k,R){if(!ee)return!1;var h=ee.get("id")||R,s=J.push(h),c=ee.get("children1");if(c){var o=c.map(function(u,l){return Z(u,s,k+1,l)}).reduce(function(u,l){return u&&l},!0);if((c.size==0||o)&&k>0)return H=H.deleteIn(I(s)),!0}return!1}return Z(x,new M.default.List,0),H};i.fixEmptyGroupsInTree=O;var b=function(x){var H=[],Z={},ee=0;function J(c,o,u,l,f,y,p,a,n){var g=c.get("type"),d=c.get("collapsed"),N=c.get("id"),W=c.get("children1"),_=c.getIn(["properties","isLocked"]),X=W?W.map(function(ve,se){return se}):null,G=g=="rule_group",z=!f&&(!W||G),K=H.length,Y=ee;if(H.push(N),u||(ee+=1),p.height=(p.height||0)+1,Z[N]={type:g,parent:o.length?o[o.length-1]:null,parentType:a,caseId:g=="case_group"?N:n,isDefaultCase:g=="case_group"&&!W,path:o.concat(N),lev:y,leaf:!W,index:K,id:N,children:X,leafsCount:0,_top:K,_height:ne-K,top:u?null:Y,height:ae,bottom:(u?null:Y)+ae,collapsed:d,node:c,isLocked:_||l},W){var re={};W.map(function(ve,se){J(ve,o.concat(N),u||d,l||_,f||G,y+1,re,g,g=="case_group"?N:n)}),d||(p.height=(p.height||0)+(re.height||0))}n&&z&&Z[n].leafsCount++;var ne=H.length,ue=ee,ae=p.height;Object.assign(Z[N],{_height:ne-K,height:ae,bottom:(u?null:Y)+ae})}J(x,[],!1,!1,!1,0,{},null,null);for(var k=0;k<H.length;k++){var R=k>0?H[k-1]:null,h=k<H.length-1?H[k+1]:null,s=Z[H[k]];s.prev=R,s.next=h}return{flat:H,items:Z}};i.getFlatTree=b;var D=function(x){if(!x)return-1;var H=0;function Z(ee,J,k){var R,h,s;typeof ee.get=="function"?(R=ee.get("id"),h=ee.get("children1"),s=ee.get("type")):(R=ee.id,h=ee.children1,s=ee.type);var c=s=="rule_group";H++,h&&!c&&h.map(function(o,u){Z(o,J.concat(R),k+1)})}return Z(x,[],0),H-1};i.getTotalReordableNodesCountInTree=D;var F=function(x){if(!x)return-1;var H=0;function Z(ee,J,k){var R,h,s;typeof ee.get=="function"?(R=ee.get("id"),h=ee.get("children1"),s=ee.get("type")):(R=ee.id,h=ee.children1,s=ee.type),s=="rule"||s=="rule_group"?H++:h&&h.map(function(c,o){Z(c,J.concat(R),k+1)})}return Z(x,[],0),H};i.getTotalRulesCountInTree=F;var U=function(x){var H=[];function Z(ee,J,k){var R=ee.get("id"),h=ee.get("children1"),s=ee.getIn(["properties","valueError"]),c=ee.getIn(["properties","field"]);s&&s.size>0&&s.filter(function(o){return o!=null}).size>0&&H.push(c),h&&h.map(function(o,u){Z(o,J.concat(R),k+1)})}return x&&Z(x,[],0),Array.from(new Set(H))};i.getTreeBadFields=U;var L=function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Z=x;function ee(J,k){J.path&&delete J.path,!H&&k&&delete J.id;var R=J.properties;R&&R.operatorOptions==null&&delete R.operatorOptions;var h=J.children1;if(h){for(var s in h)ee(h[s],s);H&&(J.children1=Object.values(h))}}return ee(x,null),Z};i.getLightTree=L;var $=function(x){var H=[],Z=x.get("children1");return Z&&Z.map(function(ee){var J=ee.getIn(["properties","value"]),k;J&&J.size==1?(k=J.get(0),Array.isArray(k)&&k.length==0&&(k=null)):k=null,H=[].concat((0,E.default)(H),[k])}),H};i.getSwitchValues=$;var j=function(x){return!x.get("children1")||x.get("children1").size==0};i.isEmptyTree=j;var V=function(x,H){return x.getIn(I(H,"children1")).size>0};i.hasChildren=V},76833:(te,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=0,r=function(){var m=(new Date().getTime().toString(16)+"FF").substr(0,11),M="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(I){var T=I==="s"?Math.floor(Math.random()*16):e++&15,P=I==="x"?T:T&3|8;return P.toString(16)});return M+m};i.default=r},16226:(te,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.validateValue=i.validateTree=i.validateAndFixTree=i.createValidationMemo=void 0;var E=r(e(90890)),m=r(e(47452)),M=r(e(91148)),I=e(79746),T=e(62413),P=e(60399),S=e(20495),C=e(31775),A=r(e(50234)),O=e(40745),b=function(k){return(0,M.default)(k)=="object"&&k!==null&&Array.isArray(k)?"array":(0,M.default)(k)},D=function(k,R){return b(k)==R||R=="number"&&!isNaN(k)},F=function(){var k,R,h;return function(s,c,o){return c?(s.__configId===h&&((0,P.immutableEqual)(c,k)||(0,P.immutableEqual)(c,R))||(h=s.__configId,k=c,R=U(c,null,s,o||s)),R):null}};i.createValidationMemo=F;var U=function(k,R,h,s){var c=L(k,R,h,s);return c=(0,C.fixPathsInTree)(c),c};i.validateAndFixTree=U;var L=function(k,R,h,s,c,o){c===void 0&&(c=h.settings.removeEmptyGroupsOnLoad),o===void 0&&(o=h.settings.removeIncompleteRulesOnLoad);var u={config:h,oldConfig:s,removeEmptyGroups:c,removeIncompleteRules:o};return $(k,[],null,{},u)};i.validateTree=L;function $(J,k,R,h,s){var c=J.get("type"),o=J.get("children1");return(c==="group"||c==="rule_group"||c=="case_group"||c=="switch_group")&&o&&o.size?j(J,k,R,h,s):c==="rule"?V(J,k,R,h,s):J}function j(J,k,R,h,s){var c=s.removeEmptyGroups,o=J.get("id"),u=J.get("children1"),l=u;!o&&R&&(o=R,J=J.set("id",o),h.sanitized=!0);var f={};u=u.map(function(p,a){return $(p,k.concat(o),a,f,s)}),c&&(u=u.filter(function(p){return p!=null}));var y=f.sanitized||l.size!=u.size;return!u.size&&c&&k.length&&(y=!0,J=void 0),y&&(h.sanitized=!0),y&&J&&(J=J.set("children1",u)),J}function V(J,k,R,h,s){var c=s.removeIncompleteRules,o=s.config,u=s.oldConfig,l=o.settings.showErrorMessage,f=J.get("id"),y=J.get("properties"),p=y.get("field")||null,a=y.get("operator")||null,n=y.get("operatorOptions"),g=y.get("valueSrc"),d=y.get("value"),N=y.get("valueError"),W={field:p,operator:a,operatorOptions:n?n.toJS():{},valueSrc:g?g.toJS():null,value:d?d.toJS():null,valueError:N?N.toJS():null},_=p&&a&&d&&!d.includes(void 0);!f&&R&&(f=R,J=J.set("id",f),h.sanitized=!0);var X=p?(0,I.getFieldConfig)(o,p):null;p&&!X&&(P.logger.warn("No config for field ".concat(p)),p=null),p==null&&(y=["operator","operatorOptions","valueSrc","value"].reduce(function(Oe,Se){return Oe.delete(Se)},y),a=null),(a=="range_between"||a=="range_not_between")&&(a=a=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(y.get("operator")," to ").concat(a)),y=y.set("operator",a));var G=a?(0,I.getOperatorConfig)(o,a,p):null;a&&!G&&(console.warn("No config for operator ".concat(a)),a=null);var z=p?(0,T.getOperatorsForField)(o,p):[];z?a&&z.indexOf(a)==-1&&(a=="is_empty"||a=="is_not_empty"?(a=a=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(y.get("operator")," to ").concat(a," for ").concat(p)),y=y.set("operator",a)):(console.warn("Operator ".concat(a," is not supported for field ").concat(p)),a=null)):(console.warn("Type of field ".concat(p," is not supported")),a=null),a==null&&(y=y.delete("operatorOptions"),y=y.delete("valueSrc"),y=y.delete("value")),n=y.get("operatorOptions");var K=a?(0,P.defaultValue)(G.cardinality,1):null;!a||n&&!G.options?(n=null,y=y.delete("operatorOptions")):a&&!n&&G.options&&(n=(0,S.defaultOperatorOptions)(o,a,p),y=y.set("operatorOptions",n)),g=y.get("valueSrc"),d=y.get("value");var Y=!l,re=!0,ne=(0,T.getNewValueForFieldOp)(o,u,y,p,a,null,Y,re),ue=ne.newValue,ae=ne.newValueSrc,ve=ne.newValueError;d=ue,g=ae,N=ve,y=y.set("value",d),y=y.set("valueSrc",g),l&&(y=y.set("valueError",N));var se={field:p,operator:a,operatorOptions:n?n.toJS():{},valueSrc:g?g.toJS():null,value:d?d.toJS():null,valueError:N?N.toJS():null},ge=!(0,P.deepEqual)(W,se),ye=p&&a&&d&&!d.includes(void 0);return ge&&(h.sanitized=!0),!ye&&c?J=void 0:ge&&(J=J.set("properties",y)),J}var w=function(k,R,h,s,c,o,u,l){var f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,a=null,n=c;if(c!=null){if(u=="field"){var g=Z(R,h,c,u,o,l,k,s,y,f),d=(0,m.default)(g,2);a=d[0],n=d[1]}else if(u=="func"){var N=ee(R,h,c,u,o,l,k,s,y,f),W=(0,m.default)(N,2);a=W[0],n=W[1]}else if(u=="value"||!u){var _=H(R,h,c,u,o,l,k,s,y,f),X=(0,m.default)(_,2);a=X[0],n=X[1]}if(!a){var G=(0,I.getFieldConfig)(k,h),z=(0,T.getWidgetForFieldOp)(k,h,s,u),K=s?(0,I.getOperatorConfig)(k,s,h):null,Y=(0,A.default)((0,I.getFieldWidgetConfig)(k,h,s,z,u),["factory"]),re=u=="field"?(0,I.getFieldConfig)(k,c):null,ne=Y,ue=Y.validateValue;if(typeof ue=="function"){var ae=[n,ne,s,K];u=="field"&&ae.push(re);var ve=ue.apply(void 0,ae);typeof ve=="boolean"?ve==!1&&(a="Invalid value"):a=ve}}}return p&&a&&console.warn("[RAQB validate]","Field ".concat(h,": ").concat(a)),[a,n]};i.validateValue=w;var x=function(k,R,h,s,c){var o=O.List.isList(k)?k.toJS():k instanceof Array?(0,E.default)(k):void 0;if(o){var u=o.reduce(function(g,d){var N=(0,m.default)(g,2),W=N[0],_=N[1],X=(0,P.getItemInListValues)(R,d);return X==null?[W,[].concat((0,E.default)(_),[d])]:[[].concat((0,E.default)(W),[X.value]),_]},[[],[]]),l=(0,m.default)(u,2),f=l[0],y=l[1],p=y.length>1,a=y.length?"".concat(p?"Values":"Value"," ").concat(y.join(", ")," ").concat(p?"are":"is"," not in list of values"):null;return c!==void 0?h=c:h=h||s,[a,h?f:k]}else{var n=(0,P.getItemInListValues)(R,k);return n==null?["Value ".concat(k," is not in list of values"),k]:(k=n.value,[null,k])}},H=function(k,R,h,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(R){var p=(0,I.getFieldConfig)(u,R),a=(0,T.getWidgetForFieldOp)(u,R,l,s),n=u.widgets[a],g=n.type,d=n.jsType,N=p.fieldSettings;if(c!=g)return["Value should have type ".concat(g,", but got value of type ").concat(c),h];if(d&&!D(h,d)&&!N.listValues)return["Value should have JS type ".concat(d,", but got value of type ").concat((0,M.default)(h)),h];if(N){var W=o||N.listValues;if(W&&!N.allowCustomValues)return x(h,W,y,f,u.settings.removeInvalidMultiSelectValuesOnLoad);if(N.min!=null&&h<N.min)return["Value ".concat(h," < min ").concat(N.min),y?N.min:h];if(N.max!=null&&h>N.max)return["Value ".concat(h," > max ").concat(N.max),y?N.max:h]}}return[null,h]},Z=function(k,R,h,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=u.settings.fieldSeparator,a=(0,M.default)(R)=="object"&&R?._isFuncArg,n=Array.isArray(k)?k.join(p):k,g=Array.isArray(h)?h.join(p):h,d=(0,I.getFieldConfig)(u,h);return d?g==n&&!a?["Can't compare field ".concat(k," with itself"),h]:c&&c!=d.type?["Field ".concat(h," is of type ").concat(d.type,", but expected ").concat(c),h]:[null,h]:["Unknown field ".concat(h),h]},ee=function(k,R,h,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=h;if(h){var a=h.get("func");if(a){var n=(0,I.getFuncConfig)(u,a);if(n){if(c&&n.returnType!=c)return["Function ".concat(a," should return value of type ").concat(n.returnType,", but got ").concat(c),h];for(var g in n.args){var d=n.args[g],N=p.get("args"),W=N?N.get(g):void 0,_=(0,I.getFieldConfig)(u,d),X=W?W.get("value"):void 0,G=W?W.get("valueSrc"):void 0;if(X!==void 0){var z=w(u,k,_,l,X,d.type,G,o,y,f,!1),K=(0,m.default)(z,2),Y=K[0],re=K[1];if(Y!==null)if(y)p=p.deleteIn(["args",g]),d.defaultValue!==void 0&&(p=p.setIn(["args",g,"value"],d.defaultValue),p=p.setIn(["args",g,"valueSrc"],"value"));else return["Invalid value of arg ".concat(g," for func ").concat(a,": ").concat(Y),h];else re!==X&&(p=p.setIn(["args",g,"value"],re))}else if(f&&d.defaultValue===void 0&&!y)return["Value of arg ".concat(g," for func ").concat(a," is required"),h]}}else return["Unknown function ".concat(a),h]}}return[null,p]}},95512:(te,i,e)=>{"use strict";e.r(i),e.d(i,{Provider:()=>F,ReactReduxContext:()=>m,batch:()=>He.unstable_batchedUpdates,connect:()=>Oe,connectAdvanced:()=>c,createDispatchHook:()=>we,createSelectorHook:()=>ke,createStoreHook:()=>ce,shallowEqual:()=>u,useDispatch:()=>je,useSelector:()=>at,useStore:()=>Ne});var r=e(66111),E=e(59160),m=r.createContext(null);const M=null;function I(fe){fe()}var T=I,P=function(Ee){return T=Ee},S=function(){return T};function C(){var fe=S(),Ee=null,Ce=null;return{clear:function(){Ee=null,Ce=null},notify:function(){fe(function(){for(var De=Ee;De;)De.callback(),De=De.next})},get:function(){for(var De=[],Me=Ee;Me;)De.push(Me),Me=Me.next;return De},subscribe:function(De){var Me=!0,Ae=Ce={callback:De,next:null,prev:Ce};return Ae.prev?Ae.prev.next=Ae:Ee=Ae,function(){!Me||Ee===null||(Me=!1,Ae.next?Ae.next.prev=Ae.prev:Ce=Ae.prev,Ae.prev?Ae.prev.next=Ae.next:Ee=Ae.next)}}}}var A={notify:function(){},get:function(){return[]}};function O(fe,Ee){var Ce,Fe=A;function De(lt){return rt(),Fe.subscribe(lt)}function Me(){Fe.notify()}function Ae(){Qe.onStateChange&&Qe.onStateChange()}function $e(){return Boolean(Ce)}function rt(){Ce||(Ce=Ee?Ee.addNestedSub(Ae):fe.subscribe(Ae),Fe=C())}function it(){Ce&&(Ce(),Ce=void 0,Fe.clear(),Fe=A)}var Qe={addNestedSub:De,notifyNestedSubs:Me,handleChangeWrapper:Ae,isSubscribed:$e,trySubscribe:rt,tryUnsubscribe:it,getListeners:function(){return Fe}};return Qe}var b=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?r.useLayoutEffect:r.useEffect;function D(fe){var Ee=fe.store,Ce=fe.context,Fe=fe.children,De=(0,r.useMemo)(function(){var $e=O(Ee);return{store:Ee,subscription:$e}},[Ee]),Me=(0,r.useMemo)(function(){return Ee.getState()},[Ee]);b(function(){var $e=De.subscription;return $e.onStateChange=$e.notifyNestedSubs,$e.trySubscribe(),Me!==Ee.getState()&&$e.notifyNestedSubs(),function(){$e.tryUnsubscribe(),$e.onStateChange=null}},[De,Me]);var Ae=Ce||m;return r.createElement(Ae.Provider,{value:De},Fe)}const F=D;var U=e(22060),L=e(49309),$=e(24420),j=e.n($),V=e(2459),w=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],x=["reactReduxForwardedRef"],H=[],Z=[null,null],ee=function(Ee){try{return JSON.stringify(Ee)}catch{return String(Ee)}};function J(fe,Ee){var Ce=fe[1];return[Ee.payload,Ce+1]}function k(fe,Ee,Ce){b(function(){return fe.apply(void 0,Ee)},Ce)}function R(fe,Ee,Ce,Fe,De,Me,Ae){fe.current=Fe,Ee.current=De,Ce.current=!1,Me.current&&(Me.current=null,Ae())}function h(fe,Ee,Ce,Fe,De,Me,Ae,$e,rt,it){if(fe){var Qe=!1,lt=null,ct=function(){if(!Qe){var pe=Ee.getState(),he,Le;try{he=Fe(pe,De.current)}catch(Pe){Le=Pe,lt=Pe}Le||(lt=null),he===Me.current?Ae.current||rt():(Me.current=he,$e.current=he,Ae.current=!0,it({type:"STORE_UPDATED",payload:{error:Le}}))}};Ce.onStateChange=ct,Ce.trySubscribe(),ct();var Ze=function(){if(Qe=!0,Ce.tryUnsubscribe(),Ce.onStateChange=null,lt)throw lt};return Ze}}var s=function(){return[null,0]};function c(fe,Ee){Ee===void 0&&(Ee={});var Ce=Ee,Fe=Ce.getDisplayName,De=Fe===void 0?function(et){return"ConnectAdvanced("+et+")"}:Fe,Me=Ce.methodName,Ae=Me===void 0?"connectAdvanced":Me,$e=Ce.renderCountProp,rt=$e===void 0?void 0:$e,it=Ce.shouldHandleStateChanges,Qe=it===void 0?!0:it,lt=Ce.storeKey,ct=lt===void 0?"store":lt,Ze=Ce.withRef,gt=Ze===void 0?!1:Ze,pe=Ce.forwardRef,he=pe===void 0?!1:pe,Le=Ce.context,Pe=Le===void 0?m:Le,Ve=(0,L.Z)(Ce,w);if(!1)var Ge;var xe=Pe;return function(We){var Be=We.displayName||We.name||"Component",ft=De(Be),st=(0,U.Z)({},Ve,{getDisplayName:De,methodName:Ae,renderCountProp:rt,shouldHandleStateChanges:Qe,storeKey:ct,displayName:ft,wrappedComponentName:Be,WrappedComponent:We}),pt=Ve.pure;function ut(_e){return fe(_e.dispatch,st)}var be=pt?r.useMemo:function(_e){return _e()};function Xe(_e){var dt=(0,r.useMemo)(function(){var Kt=_e.reactReduxForwardedRef,ur=(0,L.Z)(_e,x);return[_e.context,Kt,ur]},[_e]),mt=dt[0],Nt=dt[1],tt=dt[2],Ct=(0,r.useMemo)(function(){return mt&&mt.Consumer&&(0,V.isContextConsumer)(r.createElement(mt.Consumer,null))?mt:xe},[mt,xe]),le=(0,r.useContext)(Ct),me=Boolean(_e.store)&&Boolean(_e.store.getState)&&Boolean(_e.store.dispatch),Ue=Boolean(le)&&Boolean(le.store),ot=me?_e.store:le.store,yt=(0,r.useMemo)(function(){return ut(ot)},[ot]),Pt=(0,r.useMemo)(function(){if(!Qe)return Z;var Kt=O(ot,me?null:le.subscription),ur=Kt.notifyNestedSubs.bind(Kt);return[Kt,ur]},[ot,me,le]),Gt=Pt[0],rr=Pt[1],kt=(0,r.useMemo)(function(){return me?le:(0,U.Z)({},le,{subscription:Gt})},[me,le,Gt]),fr=(0,r.useReducer)(J,H,s),Or=fr[0],Ht=Or[0],$t=fr[1];if(Ht&&Ht.error)throw Ht.error;var nr=(0,r.useRef)(),Yt=(0,r.useRef)(tt),zt=(0,r.useRef)(),ar=(0,r.useRef)(!1),Qt=be(function(){return zt.current&&tt===Yt.current?zt.current:yt(ot.getState(),tt)},[ot,Ht,tt]);k(R,[Yt,nr,ar,tt,Qt,zt,rr]),k(h,[Qe,ot,Gt,yt,Yt,nr,ar,zt,rr,$t],[ot,Gt,yt]);var Jt=(0,r.useMemo)(function(){return r.createElement(We,(0,U.Z)({},Qt,{ref:Nt}))},[Nt,We,Qt]),Er=(0,r.useMemo)(function(){return Qe?r.createElement(Ct.Provider,{value:kt},Jt):Jt},[Ct,Jt,kt]);return Er}var nt=pt?r.memo(Xe):Xe;if(nt.WrappedComponent=We,nt.displayName=Xe.displayName=ft,he){var ze=r.forwardRef(function(dt,mt){return r.createElement(nt,(0,U.Z)({},dt,{reactReduxForwardedRef:mt}))});return ze.displayName=ft,ze.WrappedComponent=We,j()(ze,We)}return j()(nt,We)}}function o(fe,Ee){return fe===Ee?fe!==0||Ee!==0||1/fe===1/Ee:fe!==fe&&Ee!==Ee}function u(fe,Ee){if(o(fe,Ee))return!0;if(typeof fe!="object"||fe===null||typeof Ee!="object"||Ee===null)return!1;var Ce=Object.keys(fe),Fe=Object.keys(Ee);if(Ce.length!==Fe.length)return!1;for(var De=0;De<Ce.length;De++)if(!Object.prototype.hasOwnProperty.call(Ee,Ce[De])||!o(fe[Ce[De]],Ee[Ce[De]]))return!1;return!0}function l(fe,Ee){var Ce={},Fe=function(Ae){var $e=fe[Ae];typeof $e=="function"&&(Ce[Ae]=function(){return Ee($e.apply(void 0,arguments))})};for(var De in fe)Fe(De);return Ce}function f(fe){return function(Ce,Fe){var De=fe(Ce,Fe);function Me(){return De}return Me.dependsOnOwnProps=!1,Me}}function y(fe){return fe.dependsOnOwnProps!==null&&fe.dependsOnOwnProps!==void 0?Boolean(fe.dependsOnOwnProps):fe.length!==1}function p(fe,Ee){return function(Fe,De){var Me=De.displayName,Ae=function(rt,it){return Ae.dependsOnOwnProps?Ae.mapToProps(rt,it):Ae.mapToProps(rt)};return Ae.dependsOnOwnProps=!0,Ae.mapToProps=function(rt,it){Ae.mapToProps=fe,Ae.dependsOnOwnProps=y(fe);var Qe=Ae(rt,it);return typeof Qe=="function"&&(Ae.mapToProps=Qe,Ae.dependsOnOwnProps=y(Qe),Qe=Ae(rt,it)),Qe},Ae}}function a(fe){return typeof fe=="function"?p(fe,"mapDispatchToProps"):void 0}function n(fe){return fe?void 0:f(function(Ee){return{dispatch:Ee}})}function g(fe){return fe&&typeof fe=="object"?f(function(Ee){return l(fe,Ee)}):void 0}const d=[a,n,g];function N(fe){return typeof fe=="function"?p(fe,"mapStateToProps"):void 0}function W(fe){return fe?void 0:f(function(){return{}})}const _=[N,W];function X(fe,Ee,Ce){return(0,U.Z)({},Ce,fe,Ee)}function G(fe){return function(Ce,Fe){var De=Fe.displayName,Me=Fe.pure,Ae=Fe.areMergedPropsEqual,$e=!1,rt;return function(Qe,lt,ct){var Ze=fe(Qe,lt,ct);return $e?(!Me||!Ae(Ze,rt))&&(rt=Ze):($e=!0,rt=Ze),rt}}}function z(fe){return typeof fe=="function"?G(fe):void 0}function K(fe){return fe?void 0:function(){return X}}const Y=[z,K];var re=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ne(fe,Ee,Ce,Fe){return function(Me,Ae){return Ce(fe(Me,Ae),Ee(Fe,Ae),Ae)}}function ue(fe,Ee,Ce,Fe,De){var Me=De.areStatesEqual,Ae=De.areOwnPropsEqual,$e=De.areStatePropsEqual,rt=!1,it,Qe,lt,ct,Ze;function gt(Ve,Ge){return it=Ve,Qe=Ge,lt=fe(it,Qe),ct=Ee(Fe,Qe),Ze=Ce(lt,ct,Qe),rt=!0,Ze}function pe(){return lt=fe(it,Qe),Ee.dependsOnOwnProps&&(ct=Ee(Fe,Qe)),Ze=Ce(lt,ct,Qe),Ze}function he(){return fe.dependsOnOwnProps&&(lt=fe(it,Qe)),Ee.dependsOnOwnProps&&(ct=Ee(Fe,Qe)),Ze=Ce(lt,ct,Qe),Ze}function Le(){var Ve=fe(it,Qe),Ge=!$e(Ve,lt);return lt=Ve,Ge&&(Ze=Ce(lt,ct,Qe)),Ze}function Pe(Ve,Ge){var xe=!Ae(Ge,Qe),et=!Me(Ve,it);return it=Ve,Qe=Ge,xe&&et?pe():xe?he():et?Le():Ze}return function(Ge,xe){return rt?Pe(Ge,xe):gt(Ge,xe)}}function ae(fe,Ee){var Ce=Ee.initMapStateToProps,Fe=Ee.initMapDispatchToProps,De=Ee.initMergeProps,Me=(0,L.Z)(Ee,re),Ae=Ce(fe,Me),$e=Fe(fe,Me),rt=De(fe,Me),it=Me.pure?ue:ne;return it(Ae,$e,rt,fe,Me)}var ve=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function se(fe,Ee,Ce){for(var Fe=Ee.length-1;Fe>=0;Fe--){var De=Ee[Fe](fe);if(De)return De}return function(Me,Ae){throw new Error("Invalid value of type "+typeof fe+" for "+Ce+" argument when connecting component "+Ae.wrappedComponentName+".")}}function ge(fe,Ee){return fe===Ee}function ye(fe){var Ee=fe===void 0?{}:fe,Ce=Ee.connectHOC,Fe=Ce===void 0?c:Ce,De=Ee.mapStateToPropsFactories,Me=De===void 0?_:De,Ae=Ee.mapDispatchToPropsFactories,$e=Ae===void 0?d:Ae,rt=Ee.mergePropsFactories,it=rt===void 0?Y:rt,Qe=Ee.selectorFactory,lt=Qe===void 0?ae:Qe;return function(Ze,gt,pe,he){he===void 0&&(he={});var Le=he,Pe=Le.pure,Ve=Pe===void 0?!0:Pe,Ge=Le.areStatesEqual,xe=Ge===void 0?ge:Ge,et=Le.areOwnPropsEqual,We=et===void 0?u:et,Be=Le.areStatePropsEqual,ft=Be===void 0?u:Be,st=Le.areMergedPropsEqual,pt=st===void 0?u:st,ut=(0,L.Z)(Le,ve),be=se(Ze,Me,"mapStateToProps"),Xe=se(gt,$e,"mapDispatchToProps"),nt=se(pe,it,"mergeProps");return Fe(lt,(0,U.Z)({methodName:"connect",getDisplayName:function(_e){return"Connect("+_e+")"},shouldHandleStateChanges:Boolean(Ze),initMapStateToProps:be,initMapDispatchToProps:Xe,initMergeProps:nt,pure:Ve,areStatesEqual:xe,areOwnPropsEqual:We,areStatePropsEqual:ft,areMergedPropsEqual:pt},ut))}}const Oe=ye();function Se(){var fe=(0,r.useContext)(m);return fe}function ce(fe){fe===void 0&&(fe=m);var Ee=fe===m?Se:function(){return(0,r.useContext)(fe)};return function(){var Fe=Ee(),De=Fe.store;return De}}var Ne=ce();function we(fe){fe===void 0&&(fe=m);var Ee=fe===m?Ne:ce(fe);return function(){var Fe=Ee();return Fe.dispatch}}var je=we(),Ke=function(Ee,Ce){return Ee===Ce};function Ye(fe,Ee,Ce,Fe){var De=(0,r.useReducer)(function(gt){return gt+1},0),Me=De[1],Ae=(0,r.useMemo)(function(){return O(Ce,Fe)},[Ce,Fe]),$e=(0,r.useRef)(),rt=(0,r.useRef)(),it=(0,r.useRef)(),Qe=(0,r.useRef)(),lt=Ce.getState(),ct;try{if(fe!==rt.current||lt!==it.current||$e.current){var Ze=fe(lt);Qe.current===void 0||!Ee(Ze,Qe.current)?ct=Ze:ct=Qe.current}else ct=Qe.current}catch(gt){throw $e.current&&(gt.message+=`
The error may be correlated with this previous error:
`+$e.current.stack+`

`),gt}return b(function(){rt.current=fe,it.current=lt,Qe.current=ct,$e.current=void 0}),b(function(){function gt(){try{var pe=Ce.getState();if(pe===it.current)return;var he=rt.current(pe);if(Ee(he,Qe.current))return;Qe.current=he,it.current=pe}catch(Le){$e.current=Le}Me()}return Ae.onStateChange=gt,Ae.trySubscribe(),gt(),function(){return Ae.tryUnsubscribe()}},[Ce,Ae]),ct}function ke(fe){fe===void 0&&(fe=m);var Ee=fe===m?Se:function(){return(0,r.useContext)(fe)};return function(Fe,De){De===void 0&&(De=Ke);var Me=Ee(),Ae=Me.store,$e=Me.subscription,rt=Ye(Fe,De,Ae,$e);return(0,r.useDebugValue)(rt),rt}}var at=ke(),He=e(15638);P(He.unstable_batchedUpdates)},73143:(te,i,e)=>{"use strict";e.d(i,{Z:()=>S});var r=e(81582),E=e.n(r),m=e(66111),M=e(41213),I=function(C){C===void 0&&(C={});var A=(0,m.useState)(C),O=A[0],b=A[1],D=(0,m.useCallback)(function(F){b(function(U){return Object.assign({},U,F instanceof Function?F(U):F)})},[]);return[O,D]};const T=I;var P=function(){var C=(0,M.Z)(),A=T({value:void 0,error:void 0,noUserInteraction:!0}),O=A[0],b=A[1],D=(0,m.useCallback)(function(F){if(C()){var U,L;try{if(typeof F!="string"&&typeof F!="number"){var $=new Error("Cannot copy typeof "+typeof F+" to clipboard, must be a string");b({value:F,error:$,noUserInteraction:!0});return}else if(F===""){var $=new Error("Cannot copy empty string to clipboard.");b({value:F,error:$,noUserInteraction:!0});return}L=F.toString(),U=E()(L),b({value:L,error:void 0,noUserInteraction:U})}catch(j){b({value:L,error:j,noUserInteraction:U})}}},[]);return[O,D]};const S=P},42638:(te,i,e)=>{"use strict";var r;r={value:!0};var E=e(9683),m=e(66111),M=E.__importDefault(e(55986));function I(T,P){P===void 0&&(P=[]);var S=M.default(T,P,{loading:!0}),C=S[0],A=S[1];return m.useEffect(function(){A()},[A]),C}i.Z=I},29521:(te,i,e)=>{var r=e(76345).Buffer,E=function(){"use strict";function m(D,F){return F!=null&&D instanceof F}var M;try{M=Map}catch{M=function(){}}var I;try{I=Set}catch{I=function(){}}var T;try{T=Promise}catch{T=function(){}}function P(D,F,U,L,$){typeof F=="object"&&(U=F.depth,L=F.prototype,$=F.includeNonEnumerable,F=F.circular);var j=[],V=[],w=typeof r<"u";typeof F>"u"&&(F=!0),typeof U>"u"&&(U=1/0);function x(H,Z){if(H===null)return null;if(Z===0)return H;var ee,J;if(typeof H!="object")return H;if(m(H,M))ee=new M;else if(m(H,I))ee=new I;else if(m(H,T))ee=new T(function(f,y){H.then(function(p){f(x(p,Z-1))},function(p){y(x(p,Z-1))})});else if(P.__isArray(H))ee=[];else if(P.__isRegExp(H))ee=new RegExp(H.source,b(H)),H.lastIndex&&(ee.lastIndex=H.lastIndex);else if(P.__isDate(H))ee=new Date(H.getTime());else{if(w&&r.isBuffer(H))return r.allocUnsafe?ee=r.allocUnsafe(H.length):ee=new r(H.length),H.copy(ee),ee;m(H,Error)?ee=Object.create(H):typeof L>"u"?(J=Object.getPrototypeOf(H),ee=Object.create(J)):(ee=Object.create(L),J=L)}if(F){var k=j.indexOf(H);if(k!=-1)return V[k];j.push(H),V.push(ee)}m(H,M)&&H.forEach(function(f,y){var p=x(y,Z-1),a=x(f,Z-1);ee.set(p,a)}),m(H,I)&&H.forEach(function(f){var y=x(f,Z-1);ee.add(y)});for(var R in H){var h;J&&(h=Object.getOwnPropertyDescriptor(J,R)),!(h&&h.set==null)&&(ee[R]=x(H[R],Z-1))}if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(H),R=0;R<s.length;R++){var c=s[R],o=Object.getOwnPropertyDescriptor(H,c);o&&!o.enumerable&&!$||(ee[c]=x(H[c],Z-1),o.enumerable||Object.defineProperty(ee,c,{enumerable:!1}))}if($)for(var u=Object.getOwnPropertyNames(H),R=0;R<u.length;R++){var l=u[R],o=Object.getOwnPropertyDescriptor(H,l);o&&o.enumerable||(ee[l]=x(H[l],Z-1),Object.defineProperty(ee,l,{enumerable:!1}))}return ee}return x(D,U)}P.clonePrototype=function(F){if(F===null)return null;var U=function(){};return U.prototype=F,new U};function S(D){return Object.prototype.toString.call(D)}P.__objToStr=S;function C(D){return typeof D=="object"&&S(D)==="[object Date]"}P.__isDate=C;function A(D){return typeof D=="object"&&S(D)==="[object Array]"}P.__isArray=A;function O(D){return typeof D=="object"&&S(D)==="[object RegExp]"}P.__isRegExp=O;function b(D){var F="";return D.global&&(F+="g"),D.ignoreCase&&(F+="i"),D.multiline&&(F+="m"),F}return P.__getRegExpFlags=b,P}();te.exports&&(te.exports=E)},81582:(te,i,e)=>{"use strict";var r=e(66259),E={"text/plain":"Text","text/html":"Url",default:"Text"},m="Copy to clipboard: #{key}, Enter";function M(T){var P=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return T.replace(/#{\s*key\s*}/g,P)}function I(T,P){var S,C,A,O,b,D,F=!1;P||(P={}),S=P.debug||!1;try{A=r(),O=document.createRange(),b=document.getSelection(),D=document.createElement("span"),D.textContent=T,D.style.all="unset",D.style.position="fixed",D.style.top=0,D.style.clip="rect(0, 0, 0, 0)",D.style.whiteSpace="pre",D.style.webkitUserSelect="text",D.style.MozUserSelect="text",D.style.msUserSelect="text",D.style.userSelect="text",D.addEventListener("copy",function(L){if(L.stopPropagation(),P.format)if(L.preventDefault(),typeof L.clipboardData>"u"){S&&console.warn("unable to use e.clipboardData"),S&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var $=E[P.format]||E.default;window.clipboardData.setData($,T)}else L.clipboardData.clearData(),L.clipboardData.setData(P.format,T);P.onCopy&&(L.preventDefault(),P.onCopy(L.clipboardData))}),document.body.appendChild(D),O.selectNodeContents(D),b.addRange(O);var U=document.execCommand("copy");if(!U)throw new Error("copy command was unsuccessful");F=!0}catch(L){S&&console.error("unable to copy using execCommand: ",L),S&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(P.format||"text",T),P.onCopy&&P.onCopy(window.clipboardData),F=!0}catch($){S&&console.error("unable to copy using clipboardData: ",$),S&&console.error("falling back to prompt"),C=M("message"in P?P.message:m),window.prompt(C,T)}}finally{b&&(typeof b.removeRange=="function"?b.removeRange(O):b.removeAllRanges()),D&&document.body.removeChild(D),A()}return F}te.exports=I},40745:function(te){(function(i,e){te.exports=e()})(this,function(){"use strict";var i=Array.prototype.slice;function e(t,v){v&&(t.prototype=Object.create(v.prototype)),t.prototype.constructor=t}function r(t){return I(t)?t:z(t)}e(E,r);function E(t){return T(t)?t:K(t)}e(m,r);function m(t){return P(t)?t:Y(t)}e(M,r);function M(t){return I(t)&&!S(t)?t:re(t)}function I(t){return!!(t&&t[A])}function T(t){return!!(t&&t[O])}function P(t){return!!(t&&t[b])}function S(t){return T(t)||P(t)}function C(t){return!!(t&&t[D])}r.isIterable=I,r.isKeyed=T,r.isIndexed=P,r.isAssociative=S,r.isOrdered=C,r.Keyed=E,r.Indexed=m,r.Set=M;var A="@@__IMMUTABLE_ITERABLE__@@",O="@@__IMMUTABLE_KEYED__@@",b="@@__IMMUTABLE_INDEXED__@@",D="@@__IMMUTABLE_ORDERED__@@",F="delete",U=5,L=1<<U,$=L-1,j={},V={value:!1},w={value:!1};function x(t){return t.value=!1,t}function H(t){t&&(t.value=!0)}function Z(){}function ee(t,v){v=v||0;for(var B=Math.max(0,t.length-v),Q=new Array(B),q=0;q<B;q++)Q[q]=t[q+v];return Q}function J(t){return t.size===void 0&&(t.size=t.__iterate(R)),t.size}function k(t,v){if(typeof v!="number"){var B=v>>>0;if(""+B!==v||B===4294967295)return NaN;v=B}return v<0?J(t)+v:v}function R(){return!0}function h(t,v,B){return(t===0||B!==void 0&&t<=-B)&&(v===void 0||B!==void 0&&v>=B)}function s(t,v){return o(t,v,0)}function c(t,v){return o(t,v,v)}function o(t,v,B){return t===void 0?B:t<0?Math.max(0,v+t):v===void 0?t:Math.min(v,t)}var u=0,l=1,f=2,y=typeof Symbol=="function"&&Symbol.iterator,p="@@iterator",a=y||p;function n(t){this.next=t}n.prototype.toString=function(){return"[Iterator]"},n.KEYS=u,n.VALUES=l,n.ENTRIES=f,n.prototype.inspect=n.prototype.toSource=function(){return this.toString()},n.prototype[a]=function(){return this};function g(t,v,B,Q){var q=t===0?v:t===1?B:[v,B];return Q?Q.value=q:Q={value:q,done:!1},Q}function d(){return{value:void 0,done:!0}}function N(t){return!!X(t)}function W(t){return t&&typeof t.next=="function"}function _(t){var v=X(t);return v&&v.call(t)}function X(t){var v=t&&(y&&t[y]||t[p]);if(typeof v=="function")return v}function G(t){return t&&typeof t.length=="number"}e(z,r);function z(t){return t==null?Oe():I(t)?t.toSeq():Ne(t)}z.of=function(){return z(arguments)},z.prototype.toSeq=function(){return this},z.prototype.toString=function(){return this.__toString("Seq {","}")},z.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},z.prototype.__iterate=function(t,v){return je(this,t,v,!0)},z.prototype.__iterator=function(t,v){return Ke(this,t,v,!0)},e(K,z);function K(t){return t==null?Oe().toKeyedSeq():I(t)?T(t)?t.toSeq():t.fromEntrySeq():Se(t)}K.prototype.toKeyedSeq=function(){return this},e(Y,z);function Y(t){return t==null?Oe():I(t)?T(t)?t.entrySeq():t.toIndexedSeq():ce(t)}Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(t,v){return je(this,t,v,!1)},Y.prototype.__iterator=function(t,v){return Ke(this,t,v,!1)},e(re,z);function re(t){return(t==null?Oe():I(t)?T(t)?t.entrySeq():t:ce(t)).toSetSeq()}re.of=function(){return re(arguments)},re.prototype.toSetSeq=function(){return this},z.isSeq=ge,z.Keyed=K,z.Set=re,z.Indexed=Y;var ne="@@__IMMUTABLE_SEQ__@@";z.prototype[ne]=!0,e(ue,Y);function ue(t){this._array=t,this.size=t.length}ue.prototype.get=function(t,v){return this.has(t)?this._array[k(this,t)]:v},ue.prototype.__iterate=function(t,v){for(var B=this._array,Q=B.length-1,q=0;q<=Q;q++)if(t(B[v?Q-q:q],q,this)===!1)return q+1;return q},ue.prototype.__iterator=function(t,v){var B=this._array,Q=B.length-1,q=0;return new n(function(){return q>Q?d():g(t,q,B[v?Q-q++:q++])})},e(ae,K);function ae(t){var v=Object.keys(t);this._object=t,this._keys=v,this.size=v.length}ae.prototype.get=function(t,v){return v!==void 0&&!this.has(t)?v:this._object[t]},ae.prototype.has=function(t){return this._object.hasOwnProperty(t)},ae.prototype.__iterate=function(t,v){for(var B=this._object,Q=this._keys,q=Q.length-1,ie=0;ie<=q;ie++){var oe=Q[v?q-ie:ie];if(t(B[oe],oe,this)===!1)return ie+1}return ie},ae.prototype.__iterator=function(t,v){var B=this._object,Q=this._keys,q=Q.length-1,ie=0;return new n(function(){var oe=Q[v?q-ie:ie];return ie++>q?d():g(t,oe,B[oe])})},ae.prototype[D]=!0,e(ve,Y);function ve(t){this._iterable=t,this.size=t.length||t.size}ve.prototype.__iterateUncached=function(t,v){if(v)return this.cacheResult().__iterate(t,v);var B=this._iterable,Q=_(B),q=0;if(W(Q))for(var ie;!(ie=Q.next()).done&&t(ie.value,q++,this)!==!1;);return q},ve.prototype.__iteratorUncached=function(t,v){if(v)return this.cacheResult().__iterator(t,v);var B=this._iterable,Q=_(B);if(!W(Q))return new n(d);var q=0;return new n(function(){var ie=Q.next();return ie.done?ie:g(t,q++,ie.value)})},e(se,Y);function se(t){this._iterator=t,this._iteratorCache=[]}se.prototype.__iterateUncached=function(t,v){if(v)return this.cacheResult().__iterate(t,v);for(var B=this._iterator,Q=this._iteratorCache,q=0;q<Q.length;)if(t(Q[q],q++,this)===!1)return q;for(var ie;!(ie=B.next()).done;){var oe=ie.value;if(Q[q]=oe,t(oe,q++,this)===!1)break}return q},se.prototype.__iteratorUncached=function(t,v){if(v)return this.cacheResult().__iterator(t,v);var B=this._iterator,Q=this._iteratorCache,q=0;return new n(function(){if(q>=Q.length){var ie=B.next();if(ie.done)return ie;Q[q]=ie.value}return g(t,q,Q[q++])})};function ge(t){return!!(t&&t[ne])}var ye;function Oe(){return ye||(ye=new ue([]))}function Se(t){var v=Array.isArray(t)?new ue(t).fromEntrySeq():W(t)?new se(t).fromEntrySeq():N(t)?new ve(t).fromEntrySeq():typeof t=="object"?new ae(t):void 0;if(!v)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return v}function ce(t){var v=we(t);if(!v)throw new TypeError("Expected Array or iterable object of values: "+t);return v}function Ne(t){var v=we(t)||typeof t=="object"&&new ae(t);if(!v)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return v}function we(t){return G(t)?new ue(t):W(t)?new se(t):N(t)?new ve(t):void 0}function je(t,v,B,Q){var q=t._cache;if(q){for(var ie=q.length-1,oe=0;oe<=ie;oe++){var de=q[B?ie-oe:oe];if(v(de[1],Q?de[0]:oe,t)===!1)return oe+1}return oe}return t.__iterateUncached(v,B)}function Ke(t,v,B,Q){var q=t._cache;if(q){var ie=q.length-1,oe=0;return new n(function(){var de=q[B?ie-oe:oe];return oe++>ie?d():g(v,Q?de[0]:oe-1,de[1])})}return t.__iteratorUncached(v,B)}function Ye(t,v){return v?ke(v,t,"",{"":t}):at(t)}function ke(t,v,B,Q){return Array.isArray(v)?t.call(Q,B,Y(v).map(function(q,ie){return ke(t,q,ie,v)})):He(v)?t.call(Q,B,K(v).map(function(q,ie){return ke(t,q,ie,v)})):v}function at(t){return Array.isArray(t)?Y(t).map(at).toList():He(t)?K(t).map(at).toMap():t}function He(t){return t&&(t.constructor===Object||t.constructor===void 0)}function fe(t,v){if(t===v||t!==t&&v!==v)return!0;if(!t||!v)return!1;if(typeof t.valueOf=="function"&&typeof v.valueOf=="function"){if(t=t.valueOf(),v=v.valueOf(),t===v||t!==t&&v!==v)return!0;if(!t||!v)return!1}return!!(typeof t.equals=="function"&&typeof v.equals=="function"&&t.equals(v))}function Ee(t,v){if(t===v)return!0;if(!I(v)||t.size!==void 0&&v.size!==void 0&&t.size!==v.size||t.__hash!==void 0&&v.__hash!==void 0&&t.__hash!==v.__hash||T(t)!==T(v)||P(t)!==P(v)||C(t)!==C(v))return!1;if(t.size===0&&v.size===0)return!0;var B=!S(t);if(C(t)){var Q=t.entries();return v.every(function(Te,Re){var Ie=Q.next().value;return Ie&&fe(Ie[1],Te)&&(B||fe(Ie[0],Re))})&&Q.next().done}var q=!1;if(t.size===void 0)if(v.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{q=!0;var ie=t;t=v,v=ie}var oe=!0,de=v.__iterate(function(Te,Re){if(B?!t.has(Te):q?!fe(Te,t.get(Re,j)):!fe(t.get(Re,j),Te))return oe=!1,!1});return oe&&t.size===de}e(Ce,Y);function Ce(t,v){if(!(this instanceof Ce))return new Ce(t,v);if(this._value=t,this.size=v===void 0?1/0:Math.max(0,v),this.size===0){if(Fe)return Fe;Fe=this}}Ce.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Ce.prototype.get=function(t,v){return this.has(t)?this._value:v},Ce.prototype.includes=function(t){return fe(this._value,t)},Ce.prototype.slice=function(t,v){var B=this.size;return h(t,v,B)?this:new Ce(this._value,c(v,B)-s(t,B))},Ce.prototype.reverse=function(){return this},Ce.prototype.indexOf=function(t){return fe(this._value,t)?0:-1},Ce.prototype.lastIndexOf=function(t){return fe(this._value,t)?this.size:-1},Ce.prototype.__iterate=function(t,v){for(var B=0;B<this.size;B++)if(t(this._value,B,this)===!1)return B+1;return B},Ce.prototype.__iterator=function(t,v){var B=this,Q=0;return new n(function(){return Q<B.size?g(t,Q++,B._value):d()})},Ce.prototype.equals=function(t){return t instanceof Ce?fe(this._value,t._value):Ee(t)};var Fe;function De(t,v){if(!t)throw new Error(v)}e(Me,Y);function Me(t,v,B){if(!(this instanceof Me))return new Me(t,v,B);if(De(B!==0,"Cannot step a Range by 0"),t=t||0,v===void 0&&(v=1/0),B=B===void 0?1:Math.abs(B),v<t&&(B=-B),this._start=t,this._end=v,this._step=B,this.size=Math.max(0,Math.ceil((v-t)/B-1)+1),this.size===0){if(Ae)return Ae;Ae=this}}Me.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Me.prototype.get=function(t,v){return this.has(t)?this._start+k(this,t)*this._step:v},Me.prototype.includes=function(t){var v=(t-this._start)/this._step;return v>=0&&v<this.size&&v===Math.floor(v)},Me.prototype.slice=function(t,v){return h(t,v,this.size)?this:(t=s(t,this.size),v=c(v,this.size),v<=t?new Me(0,0):new Me(this.get(t,this._end),this.get(v,this._end),this._step))},Me.prototype.indexOf=function(t){var v=t-this._start;if(v%this._step===0){var B=v/this._step;if(B>=0&&B<this.size)return B}return-1},Me.prototype.lastIndexOf=function(t){return this.indexOf(t)},Me.prototype.__iterate=function(t,v){for(var B=this.size-1,Q=this._step,q=v?this._start+B*Q:this._start,ie=0;ie<=B;ie++){if(t(q,ie,this)===!1)return ie+1;q+=v?-Q:Q}return ie},Me.prototype.__iterator=function(t,v){var B=this.size-1,Q=this._step,q=v?this._start+B*Q:this._start,ie=0;return new n(function(){var oe=q;return q+=v?-Q:Q,ie>B?d():g(t,ie++,oe)})},Me.prototype.equals=function(t){return t instanceof Me?this._start===t._start&&this._end===t._end&&this._step===t._step:Ee(this,t)};var Ae;e($e,r);function $e(){throw TypeError("Abstract")}e(rt,$e);function rt(){}e(it,$e);function it(){}e(Qe,$e);function Qe(){}$e.Keyed=rt,$e.Indexed=it,$e.Set=Qe;var lt=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(v,B){v=v|0,B=B|0;var Q=v&65535,q=B&65535;return Q*q+((v>>>16)*q+Q*(B>>>16)<<16>>>0)|0};function ct(t){return t>>>1&1073741824|t&3221225471}function Ze(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var v=typeof t;if(v==="number"){if(t!==t||t===1/0)return 0;var B=t|0;for(B!==t&&(B^=t*4294967295);t>4294967295;)t/=4294967295,B^=t;return ct(B)}if(v==="string")return t.length>Be?gt(t):pe(t);if(typeof t.hashCode=="function")return t.hashCode();if(v==="object")return he(t);if(typeof t.toString=="function")return pe(t.toString());throw new Error("Value type "+v+" cannot be hashed.")}function gt(t){var v=pt[t];return v===void 0&&(v=pe(t),st===ft&&(st=0,pt={}),st++,pt[t]=v),v}function pe(t){for(var v=0,B=0;B<t.length;B++)v=31*v+t.charCodeAt(B)|0;return ct(v)}function he(t){var v;if(Ge&&(v=xe.get(t),v!==void 0)||(v=t[We],v!==void 0)||!Pe&&(v=t.propertyIsEnumerable&&t.propertyIsEnumerable[We],v!==void 0||(v=Ve(t),v!==void 0)))return v;if(v=++et,et&1073741824&&(et=0),Ge)xe.set(t,v);else{if(Le!==void 0&&Le(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Pe)Object.defineProperty(t,We,{enumerable:!1,configurable:!1,writable:!1,value:v});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[We]=v;else if(t.nodeType!==void 0)t[We]=v;else throw new Error("Unable to set a non-enumerable property on object.")}return v}var Le=Object.isExtensible,Pe=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Ve(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Ge=typeof WeakMap=="function",xe;Ge&&(xe=new WeakMap);var et=0,We="__immutablehash__";typeof Symbol=="function"&&(We=Symbol(We));var Be=16,ft=255,st=0,pt={};function ut(t){De(t!==1/0,"Cannot perform this action with an infinite size.")}e(be,rt);function be(t){return t==null?yt():Xe(t)&&!C(t)?t:yt().withMutations(function(v){var B=E(t);ut(B.size),B.forEach(function(Q,q){return v.set(q,Q)})})}be.of=function(){var t=i.call(arguments,0);return yt().withMutations(function(v){for(var B=0;B<t.length;B+=2){if(B+1>=t.length)throw new Error("Missing value for key: "+t[B]);v.set(t[B],t[B+1])}})},be.prototype.toString=function(){return this.__toString("Map {","}")},be.prototype.get=function(t,v){return this._root?this._root.get(0,void 0,t,v):v},be.prototype.set=function(t,v){return Pt(this,t,v)},be.prototype.setIn=function(t,v){return this.updateIn(t,j,function(){return v})},be.prototype.remove=function(t){return Pt(this,t,j)},be.prototype.deleteIn=function(t){return this.updateIn(t,function(){return j})},be.prototype.update=function(t,v,B){return arguments.length===1?t(this):this.updateIn([t],v,B)},be.prototype.updateIn=function(t,v,B){B||(B=v,v=void 0);var Q=ar(this,_r(t),v,B);return Q===j?void 0:Q},be.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):yt()},be.prototype.merge=function(){return $t(this,void 0,arguments)},be.prototype.mergeWith=function(t){var v=i.call(arguments,1);return $t(this,t,v)},be.prototype.mergeIn=function(t){var v=i.call(arguments,1);return this.updateIn(t,yt(),function(B){return typeof B.merge=="function"?B.merge.apply(B,v):v[v.length-1]})},be.prototype.mergeDeep=function(){return $t(this,nr,arguments)},be.prototype.mergeDeepWith=function(t){var v=i.call(arguments,1);return $t(this,Yt(t),v)},be.prototype.mergeDeepIn=function(t){var v=i.call(arguments,1);return this.updateIn(t,yt(),function(B){return typeof B.mergeDeep=="function"?B.mergeDeep.apply(B,v):v[v.length-1]})},be.prototype.sort=function(t){return Rt(er(this,t))},be.prototype.sortBy=function(t,v){return Rt(er(this,v,t))},be.prototype.withMutations=function(t){var v=this.asMutable();return t(v),v.wasAltered()?v.__ensureOwner(this.__ownerID):this},be.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new Z)},be.prototype.asImmutable=function(){return this.__ensureOwner()},be.prototype.wasAltered=function(){return this.__altered},be.prototype.__iterator=function(t,v){return new Ct(this,t,v)},be.prototype.__iterate=function(t,v){var B=this,Q=0;return this._root&&this._root.iterate(function(q){return Q++,t(q[1],q[0],B)},v),Q},be.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ue(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function Xe(t){return!!(t&&t[nt])}be.isMap=Xe;var nt="@@__IMMUTABLE_MAP__@@",ze=be.prototype;ze[nt]=!0,ze[F]=ze.remove,ze.removeIn=ze.deleteIn;function _e(t,v){this.ownerID=t,this.entries=v}_e.prototype.get=function(t,v,B,Q){for(var q=this.entries,ie=0,oe=q.length;ie<oe;ie++)if(fe(B,q[ie][0]))return q[ie][1];return Q},_e.prototype.update=function(t,v,B,Q,q,ie,oe){for(var de=q===j,Te=this.entries,Re=0,Ie=Te.length;Re<Ie&&!fe(Q,Te[Re][0]);Re++);var Je=Re<Ie;if(Je?Te[Re][1]===q:de)return this;if(H(oe),(de||!Je)&&H(ie),!(de&&Te.length===1)){if(!Je&&!de&&Te.length>=ur)return fr(t,Te,Q,q);var qe=t&&t===this.ownerID,vt=qe?Te:ee(Te);return Je?de?Re===Ie-1?vt.pop():vt[Re]=vt.pop():vt[Re]=[Q,q]:vt.push([Q,q]),qe?(this.entries=vt,this):new _e(t,vt)}};function dt(t,v,B){this.ownerID=t,this.bitmap=v,this.nodes=B}dt.prototype.get=function(t,v,B,Q){v===void 0&&(v=Ze(B));var q=1<<((t===0?v:v>>>t)&$),ie=this.bitmap;return ie&q?this.nodes[Qt(ie&q-1)].get(t+U,v,B,Q):Q},dt.prototype.update=function(t,v,B,Q,q,ie,oe){B===void 0&&(B=Ze(Q));var de=(v===0?B:B>>>v)&$,Te=1<<de,Re=this.bitmap,Ie=(Re&Te)!==0;if(!Ie&&q===j)return this;var Je=Qt(Re&Te-1),qe=this.nodes,vt=Ie?qe[Je]:void 0,ht=Gt(vt,t,v+U,B,Q,q,ie,oe);if(ht===vt)return this;if(!Ie&&ht&&qe.length>=pn)return Ht(t,qe,Re,de,ht);if(Ie&&!ht&&qe.length===2&&rr(qe[Je^1]))return qe[Je^1];if(Ie&&ht&&qe.length===1&&rr(ht))return ht;var Tt=t&&t===this.ownerID,Vt=Ie?ht?Re:Re^Te:Re|Te,Wt=Ie?ht?Jt(qe,Je,ht,Tt):Kt(qe,Je,Tt):Er(qe,Je,ht,Tt);return Tt?(this.bitmap=Vt,this.nodes=Wt,this):new dt(t,Vt,Wt)};function mt(t,v,B){this.ownerID=t,this.count=v,this.nodes=B}mt.prototype.get=function(t,v,B,Q){v===void 0&&(v=Ze(B));var q=(t===0?v:v>>>t)&$,ie=this.nodes[q];return ie?ie.get(t+U,v,B,Q):Q},mt.prototype.update=function(t,v,B,Q,q,ie,oe){B===void 0&&(B=Ze(Q));var de=(v===0?B:B>>>v)&$,Te=q===j,Re=this.nodes,Ie=Re[de];if(Te&&!Ie)return this;var Je=Gt(Ie,t,v+U,B,Q,q,ie,oe);if(Je===Ie)return this;var qe=this.count;if(!Ie)qe++;else if(!Je&&(qe--,qe<vn))return Or(t,Re,qe,de);var vt=t&&t===this.ownerID,ht=Jt(Re,de,Je,vt);return vt?(this.count=qe,this.nodes=ht,this):new mt(t,qe,ht)};function Nt(t,v,B){this.ownerID=t,this.keyHash=v,this.entries=B}Nt.prototype.get=function(t,v,B,Q){for(var q=this.entries,ie=0,oe=q.length;ie<oe;ie++)if(fe(B,q[ie][0]))return q[ie][1];return Q},Nt.prototype.update=function(t,v,B,Q,q,ie,oe){B===void 0&&(B=Ze(Q));var de=q===j;if(B!==this.keyHash)return de?this:(H(oe),H(ie),kt(this,t,v,B,[Q,q]));for(var Te=this.entries,Re=0,Ie=Te.length;Re<Ie&&!fe(Q,Te[Re][0]);Re++);var Je=Re<Ie;if(Je?Te[Re][1]===q:de)return this;if(H(oe),(de||!Je)&&H(ie),de&&Ie===2)return new tt(t,this.keyHash,Te[Re^1]);var qe=t&&t===this.ownerID,vt=qe?Te:ee(Te);return Je?de?Re===Ie-1?vt.pop():vt[Re]=vt.pop():vt[Re]=[Q,q]:vt.push([Q,q]),qe?(this.entries=vt,this):new Nt(t,this.keyHash,vt)};function tt(t,v,B){this.ownerID=t,this.keyHash=v,this.entry=B}tt.prototype.get=function(t,v,B,Q){return fe(B,this.entry[0])?this.entry[1]:Q},tt.prototype.update=function(t,v,B,Q,q,ie,oe){var de=q===j,Te=fe(Q,this.entry[0]);if(Te?q===this.entry[1]:de)return this;if(H(oe),de){H(ie);return}return Te?t&&t===this.ownerID?(this.entry[1]=q,this):new tt(t,this.keyHash,[Q,q]):(H(ie),kt(this,t,v,Ze(Q),[Q,q]))},_e.prototype.iterate=Nt.prototype.iterate=function(t,v){for(var B=this.entries,Q=0,q=B.length-1;Q<=q;Q++)if(t(B[v?q-Q:Q])===!1)return!1},dt.prototype.iterate=mt.prototype.iterate=function(t,v){for(var B=this.nodes,Q=0,q=B.length-1;Q<=q;Q++){var ie=B[v?q-Q:Q];if(ie&&ie.iterate(t,v)===!1)return!1}},tt.prototype.iterate=function(t,v){return t(this.entry)},e(Ct,n);function Ct(t,v,B){this._type=v,this._reverse=B,this._stack=t._root&&me(t._root)}Ct.prototype.next=function(){for(var t=this._type,v=this._stack;v;){var B=v.node,Q=v.index++,q;if(B.entry){if(Q===0)return le(t,B.entry)}else if(B.entries){if(q=B.entries.length-1,Q<=q)return le(t,B.entries[this._reverse?q-Q:Q])}else if(q=B.nodes.length-1,Q<=q){var ie=B.nodes[this._reverse?q-Q:Q];if(ie){if(ie.entry)return le(t,ie.entry);v=this._stack=me(ie,v)}continue}v=this._stack=this._stack.__prev}return d()};function le(t,v){return g(t,v[0],v[1])}function me(t,v){return{node:t,index:0,__prev:v}}function Ue(t,v,B,Q){var q=Object.create(ze);return q.size=t,q._root=v,q.__ownerID=B,q.__hash=Q,q.__altered=!1,q}var ot;function yt(){return ot||(ot=Ue(0))}function Pt(t,v,B){var Q,q;if(t._root){var ie=x(V),oe=x(w);if(Q=Gt(t._root,t.__ownerID,0,void 0,v,B,ie,oe),!oe.value)return t;q=t.size+(ie.value?B===j?-1:1:0)}else{if(B===j)return t;q=1,Q=new _e(t.__ownerID,[[v,B]])}return t.__ownerID?(t.size=q,t._root=Q,t.__hash=void 0,t.__altered=!0,t):Q?Ue(q,Q):yt()}function Gt(t,v,B,Q,q,ie,oe,de){return t?t.update(v,B,Q,q,ie,oe,de):ie===j?t:(H(de),H(oe),new tt(v,Q,[q,ie]))}function rr(t){return t.constructor===tt||t.constructor===Nt}function kt(t,v,B,Q,q){if(t.keyHash===Q)return new Nt(v,Q,[t.entry,q]);var ie=(B===0?t.keyHash:t.keyHash>>>B)&$,oe=(B===0?Q:Q>>>B)&$,de,Te=ie===oe?[kt(t,v,B+U,Q,q)]:(de=new tt(v,Q,q),ie<oe?[t,de]:[de,t]);return new dt(v,1<<ie|1<<oe,Te)}function fr(t,v,B,Q){t||(t=new Z);for(var q=new tt(t,Ze(B),[B,Q]),ie=0;ie<v.length;ie++){var oe=v[ie];q=q.update(t,0,void 0,oe[0],oe[1])}return q}function Or(t,v,B,Q){for(var q=0,ie=0,oe=new Array(B),de=0,Te=1,Re=v.length;de<Re;de++,Te<<=1){var Ie=v[de];Ie!==void 0&&de!==Q&&(q|=Te,oe[ie++]=Ie)}return new dt(t,q,oe)}function Ht(t,v,B,Q,q){for(var ie=0,oe=new Array(L),de=0;B!==0;de++,B>>>=1)oe[de]=B&1?v[ie++]:void 0;return oe[Q]=q,new mt(t,ie+1,oe)}function $t(t,v,B){for(var Q=[],q=0;q<B.length;q++){var ie=B[q],oe=E(ie);I(ie)||(oe=oe.map(function(de){return Ye(de)})),Q.push(oe)}return zt(t,v,Q)}function nr(t,v,B){return t&&t.mergeDeep&&I(v)?t.mergeDeep(v):fe(t,v)?t:v}function Yt(t){return function(v,B,Q){if(v&&v.mergeDeepWith&&I(B))return v.mergeDeepWith(t,B);var q=t(v,B,Q);return fe(v,q)?v:q}}function zt(t,v,B){return B=B.filter(function(Q){return Q.size!==0}),B.length===0?t:t.size===0&&!t.__ownerID&&B.length===1?t.constructor(B[0]):t.withMutations(function(Q){for(var q=v?function(oe,de){Q.update(de,j,function(Te){return Te===j?oe:v(Te,oe,de)})}:function(oe,de){Q.set(de,oe)},ie=0;ie<B.length;ie++)B[ie].forEach(q)})}function ar(t,v,B,Q){var q=t===j,ie=v.next();if(ie.done){var oe=q?B:t,de=Q(oe);return de===oe?t:de}De(q||t&&t.set,"invalid keyPath");var Te=ie.value,Re=q?j:t.get(Te,j),Ie=ar(Re,v,B,Q);return Ie===Re?t:Ie===j?t.remove(Te):(q?yt():t).set(Te,Ie)}function Qt(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function Jt(t,v,B,Q){var q=Q?t:ee(t);return q[v]=B,q}function Er(t,v,B,Q){var q=t.length+1;if(Q&&v+1===q)return t[v]=B,t;for(var ie=new Array(q),oe=0,de=0;de<q;de++)de===v?(ie[de]=B,oe=-1):ie[de]=t[de+oe];return ie}function Kt(t,v,B){var Q=t.length-1;if(B&&v===Q)return t.pop(),t;for(var q=new Array(Q),ie=0,oe=0;oe<Q;oe++)oe===v&&(ie=1),q[oe]=t[oe+ie];return q}var ur=L/4,pn=L/2,vn=L/4;e(Et,it);function Et(t){var v=Sr();if(t==null)return v;if(Mr(t))return t;var B=m(t),Q=B.size;return Q===0?v:(ut(Q),Q>0&&Q<L?or(0,Q,U,null,new Bt(B.toArray())):v.withMutations(function(q){q.setSize(Q),B.forEach(function(ie,oe){return q.set(oe,ie)})}))}Et.of=function(){return this(arguments)},Et.prototype.toString=function(){return this.__toString("List [","]")},Et.prototype.get=function(t,v){if(t=k(this,t),t>=0&&t<this.size){t+=this._origin;var B=Ur(this,t);return B&&B.array[t&$]}return v},Et.prototype.set=function(t,v){return gn(this,t,v)},Et.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Et.prototype.insert=function(t,v){return this.splice(t,0,v)},Et.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=U,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Sr()},Et.prototype.push=function(){var t=arguments,v=this.size;return this.withMutations(function(B){xt(B,0,v+t.length);for(var Q=0;Q<t.length;Q++)B.set(v+Q,t[Q])})},Et.prototype.pop=function(){return xt(this,0,-1)},Et.prototype.unshift=function(){var t=arguments;return this.withMutations(function(v){xt(v,-t.length);for(var B=0;B<t.length;B++)v.set(B,t[B])})},Et.prototype.shift=function(){return xt(this,1)},Et.prototype.merge=function(){return cr(this,void 0,arguments)},Et.prototype.mergeWith=function(t){var v=i.call(arguments,1);return cr(this,t,v)},Et.prototype.mergeDeep=function(){return cr(this,nr,arguments)},Et.prototype.mergeDeepWith=function(t){var v=i.call(arguments,1);return cr(this,Yt(t),v)},Et.prototype.setSize=function(t){return xt(this,0,t)},Et.prototype.slice=function(t,v){var B=this.size;return h(t,v,B)?this:xt(this,s(t,B),c(v,B))},Et.prototype.__iterator=function(t,v){var B=0,Q=wr(this,v);return new n(function(){var q=Q();return q===ir?d():g(t,B++,q)})},Et.prototype.__iterate=function(t,v){for(var B=0,Q=wr(this,v),q;(q=Q())!==ir&&t(q,B++,this)!==!1;);return B},Et.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?or(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function Mr(t){return!!(t&&t[Vr])}Et.isList=Mr;var Vr="@@__IMMUTABLE_LIST__@@",Ft=Et.prototype;Ft[Vr]=!0,Ft[F]=Ft.remove,Ft.setIn=ze.setIn,Ft.deleteIn=Ft.removeIn=ze.removeIn,Ft.update=ze.update,Ft.updateIn=ze.updateIn,Ft.mergeIn=ze.mergeIn,Ft.mergeDeepIn=ze.mergeDeepIn,Ft.withMutations=ze.withMutations,Ft.asMutable=ze.asMutable,Ft.asImmutable=ze.asImmutable,Ft.wasAltered=ze.wasAltered;function Bt(t,v){this.array=t,this.ownerID=v}Bt.prototype.removeBefore=function(t,v,B){if(B===v?1<<v:this.array.length===0)return this;var Q=B>>>v&$;if(Q>=this.array.length)return new Bt([],t);var q=Q===0,ie;if(v>0){var oe=this.array[Q];if(ie=oe&&oe.removeBefore(t,v-U,B),ie===oe&&q)return this}if(q&&!ie)return this;var de=Xt(this,t);if(!q)for(var Te=0;Te<Q;Te++)de.array[Te]=void 0;return ie&&(de.array[Q]=ie),de},Bt.prototype.removeAfter=function(t,v,B){if(B===(v?1<<v:0)||this.array.length===0)return this;var Q=B-1>>>v&$;if(Q>=this.array.length)return this;var q;if(v>0){var ie=this.array[Q];if(q=ie&&ie.removeAfter(t,v-U,B),q===ie&&Q===this.array.length-1)return this}var oe=Xt(this,t);return oe.array.splice(Q+1),q&&(oe.array[Q]=q),oe};var ir={};function wr(t,v){var B=t._origin,Q=t._capacity,q=lr(Q),ie=t._tail;return oe(t._root,t._level,0);function oe(Re,Ie,Je){return Ie===0?de(Re,Je):Te(Re,Ie,Je)}function de(Re,Ie){var Je=Ie===q?ie&&ie.array:Re&&Re.array,qe=Ie>B?0:B-Ie,vt=Q-Ie;return vt>L&&(vt=L),function(){if(qe===vt)return ir;var ht=v?--vt:qe++;return Je&&Je[ht]}}function Te(Re,Ie,Je){var qe,vt=Re&&Re.array,ht=Je>B?0:B-Je>>Ie,Tt=(Q-Je>>Ie)+1;return Tt>L&&(Tt=L),function(){do{if(qe){var Vt=qe();if(Vt!==ir)return Vt;qe=null}if(ht===Tt)return ir;var Wt=v?--Tt:ht++;qe=oe(vt&&vt[Wt],Ie-U,Je+(Wt<<Ie))}while(!0)}}}function or(t,v,B,Q,q,ie,oe){var de=Object.create(Ft);return de.size=v-t,de._origin=t,de._capacity=v,de._level=B,de._root=Q,de._tail=q,de.__ownerID=ie,de.__hash=oe,de.__altered=!1,de}var jr;function Sr(){return jr||(jr=or(0,0,U))}function gn(t,v,B){if(v=k(t,v),v!==v)return t;if(v>=t.size||v<0)return t.withMutations(function(oe){v<0?xt(oe,v).set(0,B):xt(oe,0,v+1).set(v,B)});v+=t._origin;var Q=t._tail,q=t._root,ie=x(w);return v>=lr(t._capacity)?Q=Tr(Q,t.__ownerID,0,v,B,ie):q=Tr(q,t.__ownerID,t._level,v,B,ie),ie.value?t.__ownerID?(t._root=q,t._tail=Q,t.__hash=void 0,t.__altered=!0,t):or(t._origin,t._capacity,t._level,q,Q):t}function Tr(t,v,B,Q,q,ie){var oe=Q>>>B&$,de=t&&oe<t.array.length;if(!de&&q===void 0)return t;var Te;if(B>0){var Re=t&&t.array[oe],Ie=Tr(Re,v,B-U,Q,q,ie);return Ie===Re?t:(Te=Xt(t,v),Te.array[oe]=Ie,Te)}return de&&t.array[oe]===q?t:(H(ie),Te=Xt(t,v),q===void 0&&oe===Te.array.length-1?Te.array.pop():Te.array[oe]=q,Te)}function Xt(t,v){return v&&t&&v===t.ownerID?t:new Bt(t?t.array.slice():[],v)}function Ur(t,v){if(v>=lr(t._capacity))return t._tail;if(v<1<<t._level+U){for(var B=t._root,Q=t._level;B&&Q>0;)B=B.array[v>>>Q&$],Q-=U;return B}}function xt(t,v,B){v!==void 0&&(v=v|0),B!==void 0&&(B=B|0);var Q=t.__ownerID||new Z,q=t._origin,ie=t._capacity,oe=q+v,de=B===void 0?ie:B<0?ie+B:q+B;if(oe===q&&de===ie)return t;if(oe>=de)return t.clear();for(var Te=t._level,Re=t._root,Ie=0;oe+Ie<0;)Re=new Bt(Re&&Re.array.length?[void 0,Re]:[],Q),Te+=U,Ie+=1<<Te;Ie&&(oe+=Ie,q+=Ie,de+=Ie,ie+=Ie);for(var Je=lr(ie),qe=lr(de);qe>=1<<Te+U;)Re=new Bt(Re&&Re.array.length?[Re]:[],Q),Te+=U;var vt=t._tail,ht=qe<Je?Ur(t,de-1):qe>Je?new Bt([],Q):vt;if(vt&&qe>Je&&oe<ie&&vt.array.length){Re=Xt(Re,Q);for(var Tt=Re,Vt=Te;Vt>U;Vt-=U){var Wt=Je>>>Vt&$;Tt=Tt.array[Wt]=Xt(Tt.array[Wt],Q)}Tt.array[Je>>>U&$]=vt}if(de<ie&&(ht=ht&&ht.removeAfter(Q,0,de)),oe>=qe)oe-=qe,de-=qe,Te=U,Re=null,ht=ht&&ht.removeBefore(Q,0,oe);else if(oe>q||qe<Je){for(Ie=0;Re;){var yr=oe>>>Te&$;if(yr!==qe>>>Te&$)break;yr&&(Ie+=(1<<Te)*yr),Te-=U,Re=Re.array[yr]}Re&&oe>q&&(Re=Re.removeBefore(Q,Te,oe-Ie)),Re&&qe<Je&&(Re=Re.removeAfter(Q,Te,qe-Ie)),Ie&&(oe-=Ie,de-=Ie)}return t.__ownerID?(t.size=de-oe,t._origin=oe,t._capacity=de,t._level=Te,t._root=Re,t._tail=ht,t.__hash=void 0,t.__altered=!0,t):or(oe,de,Te,Re,ht)}function cr(t,v,B){for(var Q=[],q=0,ie=0;ie<B.length;ie++){var oe=B[ie],de=m(oe);de.size>q&&(q=de.size),I(oe)||(de=de.map(function(Te){return Ye(Te)})),Q.push(de)}return q>t.size&&(t=t.setSize(q)),zt(t,v,Q)}function lr(t){return t<L?0:t-1>>>U<<U}e(Rt,be);function Rt(t){return t==null?dr():Wr(t)?t:dr().withMutations(function(v){var B=E(t);ut(B.size),B.forEach(function(Q,q){return v.set(q,Q)})})}Rt.of=function(){return this(arguments)},Rt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Rt.prototype.get=function(t,v){var B=this._map.get(t);return B!==void 0?this._list.get(B)[1]:v},Rt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):dr()},Rt.prototype.set=function(t,v){return Br(this,t,v)},Rt.prototype.remove=function(t){return Br(this,t,j)},Rt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Rt.prototype.__iterate=function(t,v){var B=this;return this._list.__iterate(function(Q){return Q&&t(Q[1],Q[0],B)},v)},Rt.prototype.__iterator=function(t,v){return this._list.fromEntrySeq().__iterator(t,v)},Rt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var v=this._map.__ensureOwner(t),B=this._list.__ensureOwner(t);return t?Rr(v,B,t,this.__hash):(this.__ownerID=t,this._map=v,this._list=B,this)};function Wr(t){return Xe(t)&&C(t)}Rt.isOrderedMap=Wr,Rt.prototype[D]=!0,Rt.prototype[F]=Rt.prototype.remove;function Rr(t,v,B,Q){var q=Object.create(Rt.prototype);return q.size=t?t.size:0,q._map=t,q._list=v,q.__ownerID=B,q.__hash=Q,q}var Gr;function dr(){return Gr||(Gr=Rr(yt(),Sr()))}function Br(t,v,B){var Q=t._map,q=t._list,ie=Q.get(v),oe=ie!==void 0,de,Te;if(B===j){if(!oe)return t;q.size>=L&&q.size>=Q.size*2?(Te=q.filter(function(Re,Ie){return Re!==void 0&&ie!==Ie}),de=Te.toKeyedSeq().map(function(Re){return Re[0]}).flip().toMap(),t.__ownerID&&(de.__ownerID=Te.__ownerID=t.__ownerID)):(de=Q.remove(v),Te=ie===q.size-1?q.pop():q.set(ie,void 0))}else if(oe){if(B===q.get(ie)[1])return t;de=Q,Te=q.set(ie,[v,B])}else de=Q.set(v,q.size),Te=q.set(q.size,[v,B]);return t.__ownerID?(t.size=de.size,t._map=de,t._list=Te,t.__hash=void 0,t):Rr(de,Te)}e(Mt,K);function Mt(t,v){this._iter=t,this._useKeys=v,this.size=t.size}Mt.prototype.get=function(t,v){return this._iter.get(t,v)},Mt.prototype.has=function(t){return this._iter.has(t)},Mt.prototype.valueSeq=function(){return this._iter.valueSeq()},Mt.prototype.reverse=function(){var t=this,v=Cr(this,!0);return this._useKeys||(v.valueSeq=function(){return t._iter.toSeq().reverse()}),v},Mt.prototype.map=function(t,v){var B=this,Q=zr(this,t,v);return this._useKeys||(Q.valueSeq=function(){return B._iter.toSeq().map(t,v)}),Q},Mt.prototype.__iterate=function(t,v){var B=this,Q;return this._iter.__iterate(this._useKeys?function(q,ie){return t(q,ie,B)}:(Q=v?Qr(this):0,function(q){return t(q,v?--Q:Q++,B)}),v)},Mt.prototype.__iterator=function(t,v){if(this._useKeys)return this._iter.__iterator(t,v);var B=this._iter.__iterator(l,v),Q=v?Qr(this):0;return new n(function(){var q=B.next();return q.done?q:g(t,v?--Q:Q++,q.value,q)})},Mt.prototype[D]=!0,e(_t,Y);function _t(t){this._iter=t,this.size=t.size}_t.prototype.includes=function(t){return this._iter.includes(t)},_t.prototype.__iterate=function(t,v){var B=this,Q=0;return this._iter.__iterate(function(q){return t(q,Q++,B)},v)},_t.prototype.__iterator=function(t,v){var B=this._iter.__iterator(l,v),Q=0;return new n(function(){var q=B.next();return q.done?q:g(t,Q++,q.value,q)})},e(Zt,re);function Zt(t){this._iter=t,this.size=t.size}Zt.prototype.has=function(t){return this._iter.includes(t)},Zt.prototype.__iterate=function(t,v){var B=this;return this._iter.__iterate(function(Q){return t(Q,Q,B)},v)},Zt.prototype.__iterator=function(t,v){var B=this._iter.__iterator(l,v);return new n(function(){var Q=B.next();return Q.done?Q:g(t,Q.value,Q.value,Q)})},e(qt,K);function qt(t){this._iter=t,this.size=t.size}qt.prototype.entrySeq=function(){return this._iter.toSeq()},qt.prototype.__iterate=function(t,v){var B=this;return this._iter.__iterate(function(Q){if(Q){Yr(Q);var q=I(Q);return t(q?Q.get(1):Q[1],q?Q.get(0):Q[0],B)}},v)},qt.prototype.__iterator=function(t,v){var B=this._iter.__iterator(l,v);return new n(function(){for(;;){var Q=B.next();if(Q.done)return Q;var q=Q.value;if(q){Yr(q);var ie=I(q);return g(t,ie?q.get(0):q[0],ie?q.get(1):q[1],Q)}}})},_t.prototype.cacheResult=Mt.prototype.cacheResult=Zt.prototype.cacheResult=qt.prototype.cacheResult=Nr;function xr(t){var v=wt(t);return v._iter=t,v.size=t.size,v.flip=function(){return t},v.reverse=function(){var B=t.reverse.apply(this);return B.flip=function(){return t.reverse()},B},v.has=function(B){return t.includes(B)},v.includes=function(B){return t.has(B)},v.cacheResult=Nr,v.__iterateUncached=function(B,Q){var q=this;return t.__iterate(function(ie,oe){return B(oe,ie,q)!==!1},Q)},v.__iteratorUncached=function(B,Q){if(B===f){var q=t.__iterator(B,Q);return new n(function(){var ie=q.next();if(!ie.done){var oe=ie.value[0];ie.value[0]=ie.value[1],ie.value[1]=oe}return ie})}return t.__iterator(B===l?u:l,Q)},v}function zr(t,v,B){var Q=wt(t);return Q.size=t.size,Q.has=function(q){return t.has(q)},Q.get=function(q,ie){var oe=t.get(q,j);return oe===j?ie:v.call(B,oe,q,t)},Q.__iterateUncached=function(q,ie){var oe=this;return t.__iterate(function(de,Te,Re){return q(v.call(B,de,Te,Re),Te,oe)!==!1},ie)},Q.__iteratorUncached=function(q,ie){var oe=t.__iterator(f,ie);return new n(function(){var de=oe.next();if(de.done)return de;var Te=de.value,Re=Te[0];return g(q,Re,v.call(B,Te[1],Re,t),de)})},Q}function Cr(t,v){var B=wt(t);return B._iter=t,B.size=t.size,B.reverse=function(){return t},t.flip&&(B.flip=function(){var Q=xr(t);return Q.reverse=function(){return t.flip()},Q}),B.get=function(Q,q){return t.get(v?Q:-1-Q,q)},B.has=function(Q){return t.has(v?Q:-1-Q)},B.includes=function(Q){return t.includes(Q)},B.cacheResult=Nr,B.__iterate=function(Q,q){var ie=this;return t.__iterate(function(oe,de){return Q(oe,de,ie)},!q)},B.__iterator=function(Q,q){return t.__iterator(Q,!q)},B}function Kr(t,v,B,Q){var q=wt(t);return Q&&(q.has=function(ie){var oe=t.get(ie,j);return oe!==j&&!!v.call(B,oe,ie,t)},q.get=function(ie,oe){var de=t.get(ie,j);return de!==j&&v.call(B,de,ie,t)?de:oe}),q.__iterateUncached=function(ie,oe){var de=this,Te=0;return t.__iterate(function(Re,Ie,Je){if(v.call(B,Re,Ie,Je))return Te++,ie(Re,Q?Ie:Te-1,de)},oe),Te},q.__iteratorUncached=function(ie,oe){var de=t.__iterator(f,oe),Te=0;return new n(function(){for(;;){var Re=de.next();if(Re.done)return Re;var Ie=Re.value,Je=Ie[0],qe=Ie[1];if(v.call(B,qe,Je,t))return g(ie,Q?Je:Te++,qe,Re)}})},q}function hn(t,v,B){var Q=be().asMutable();return t.__iterate(function(q,ie){Q.update(v.call(B,q,ie,t),0,function(oe){return oe+1})}),Q.asImmutable()}function mn(t,v,B){var Q=T(t),q=(C(t)?Rt():be()).asMutable();t.__iterate(function(oe,de){q.update(v.call(B,oe,de,t),function(Te){return Te=Te||[],Te.push(Q?[de,oe]:oe),Te})});var ie=Jr(t);return q.map(function(oe){return Ot(t,ie(oe))})}function Pr(t,v,B,Q){var q=t.size;if(v!==void 0&&(v=v|0),B!==void 0&&(B===1/0?B=q:B=B|0),h(v,B,q))return t;var ie=s(v,q),oe=c(B,q);if(ie!==ie||oe!==oe)return Pr(t.toSeq().cacheResult(),v,B,Q);var de=oe-ie,Te;de===de&&(Te=de<0?0:de);var Re=wt(t);return Re.size=Te===0?Te:t.size&&Te||void 0,!Q&&ge(t)&&Te>=0&&(Re.get=function(Ie,Je){return Ie=k(this,Ie),Ie>=0&&Ie<Te?t.get(Ie+ie,Je):Je}),Re.__iterateUncached=function(Ie,Je){var qe=this;if(Te===0)return 0;if(Je)return this.cacheResult().__iterate(Ie,Je);var vt=0,ht=!0,Tt=0;return t.__iterate(function(Vt,Wt){if(!(ht&&(ht=vt++<ie)))return Tt++,Ie(Vt,Q?Wt:Tt-1,qe)!==!1&&Tt!==Te}),Tt},Re.__iteratorUncached=function(Ie,Je){if(Te!==0&&Je)return this.cacheResult().__iterator(Ie,Je);var qe=Te!==0&&t.__iterator(Ie,Je),vt=0,ht=0;return new n(function(){for(;vt++<ie;)qe.next();if(++ht>Te)return d();var Tt=qe.next();return Q||Ie===l?Tt:Ie===u?g(Ie,ht-1,void 0,Tt):g(Ie,ht-1,Tt.value[1],Tt)})},Re}function yn(t,v,B){var Q=wt(t);return Q.__iterateUncached=function(q,ie){var oe=this;if(ie)return this.cacheResult().__iterate(q,ie);var de=0;return t.__iterate(function(Te,Re,Ie){return v.call(B,Te,Re,Ie)&&++de&&q(Te,Re,oe)}),de},Q.__iteratorUncached=function(q,ie){var oe=this;if(ie)return this.cacheResult().__iterator(q,ie);var de=t.__iterator(f,ie),Te=!0;return new n(function(){if(!Te)return d();var Re=de.next();if(Re.done)return Re;var Ie=Re.value,Je=Ie[0],qe=Ie[1];return v.call(B,qe,Je,oe)?q===f?Re:g(q,Je,qe,Re):(Te=!1,d())})},Q}function kr(t,v,B,Q){var q=wt(t);return q.__iterateUncached=function(ie,oe){var de=this;if(oe)return this.cacheResult().__iterate(ie,oe);var Te=!0,Re=0;return t.__iterate(function(Ie,Je,qe){if(!(Te&&(Te=v.call(B,Ie,Je,qe))))return Re++,ie(Ie,Q?Je:Re-1,de)}),Re},q.__iteratorUncached=function(ie,oe){var de=this;if(oe)return this.cacheResult().__iterator(ie,oe);var Te=t.__iterator(f,oe),Re=!0,Ie=0;return new n(function(){var Je,qe,vt;do{if(Je=Te.next(),Je.done)return Q||ie===l?Je:ie===u?g(ie,Ie++,void 0,Je):g(ie,Ie++,Je.value[1],Je);var ht=Je.value;qe=ht[0],vt=ht[1],Re&&(Re=v.call(B,vt,qe,de))}while(Re);return ie===f?Je:g(ie,qe,vt,Je)})},q}function On(t,v){var B=T(t),Q=[t].concat(v).map(function(oe){return I(oe)?B&&(oe=E(oe)):oe=B?Se(oe):ce(Array.isArray(oe)?oe:[oe]),oe}).filter(function(oe){return oe.size!==0});if(Q.length===0)return t;if(Q.length===1){var q=Q[0];if(q===t||B&&T(q)||P(t)&&P(q))return q}var ie=new ue(Q);return B?ie=ie.toKeyedSeq():P(t)||(ie=ie.toSetSeq()),ie=ie.flatten(!0),ie.size=Q.reduce(function(oe,de){if(oe!==void 0){var Te=de.size;if(Te!==void 0)return oe+Te}},0),ie}function Hr(t,v,B){var Q=wt(t);return Q.__iterateUncached=function(q,ie){var oe=0,de=!1;function Te(Re,Ie){var Je=this;Re.__iterate(function(qe,vt){return(!v||Ie<v)&&I(qe)?Te(qe,Ie+1):q(qe,B?vt:oe++,Je)===!1&&(de=!0),!de},ie)}return Te(t,0),oe},Q.__iteratorUncached=function(q,ie){var oe=t.__iterator(q,ie),de=[],Te=0;return new n(function(){for(;oe;){var Re=oe.next();if(Re.done!==!1){oe=de.pop();continue}var Ie=Re.value;if(q===f&&(Ie=Ie[1]),(!v||de.length<v)&&I(Ie))de.push(oe),oe=Ie.__iterator(q,ie);else return B?Re:g(q,Te++,Ie,Re)}return d()})},Q}function En(t,v,B){var Q=Jr(t);return t.toSeq().map(function(q,ie){return Q(v.call(B,q,ie,t))}).flatten(!0)}function Sn(t,v){var B=wt(t);return B.size=t.size&&t.size*2-1,B.__iterateUncached=function(Q,q){var ie=this,oe=0;return t.__iterate(function(de,Te){return(!oe||Q(v,oe++,ie)!==!1)&&Q(de,oe++,ie)!==!1},q),oe},B.__iteratorUncached=function(Q,q){var ie=t.__iterator(l,q),oe=0,de;return new n(function(){return(!de||oe%2)&&(de=ie.next(),de.done)?de:oe%2?g(Q,oe++,v):g(Q,oe++,de.value,de)})},B}function er(t,v,B){v||(v=Xr);var Q=T(t),q=0,ie=t.toSeq().map(function(oe,de){return[de,oe,q++,B?B(oe,de,t):oe]}).toArray();return ie.sort(function(oe,de){return v(oe[3],de[3])||oe[2]-de[2]}).forEach(Q?function(oe,de){ie[de].length=2}:function(oe,de){ie[de]=oe[1]}),Q?K(ie):P(t)?Y(ie):re(ie)}function pr(t,v,B){if(v||(v=Xr),B){var Q=t.toSeq().map(function(q,ie){return[q,B(q,ie,t)]}).reduce(function(q,ie){return $r(v,q[1],ie[1])?ie:q});return Q&&Q[0]}else return t.reduce(function(q,ie){return $r(v,q,ie)?ie:q})}function $r(t,v,B){var Q=t(B,v);return Q===0&&B!==v&&(B==null||B!==B)||Q>0}function Lr(t,v,B){var Q=wt(t);return Q.size=new ue(B).map(function(q){return q.size}).min(),Q.__iterate=function(q,ie){for(var oe=this.__iterator(l,ie),de,Te=0;!(de=oe.next()).done&&q(de.value,Te++,this)!==!1;);return Te},Q.__iteratorUncached=function(q,ie){var oe=B.map(function(Re){return Re=r(Re),_(ie?Re.reverse():Re)}),de=0,Te=!1;return new n(function(){var Re;return Te||(Re=oe.map(function(Ie){return Ie.next()}),Te=Re.some(function(Ie){return Ie.done})),Te?d():g(q,de++,v.apply(null,Re.map(function(Ie){return Ie.value})))})},Q}function Ot(t,v){return ge(t)?v:t.constructor(v)}function Yr(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qr(t){return ut(t.size),J(t)}function Jr(t){return T(t)?E:P(t)?m:M}function wt(t){return Object.create((T(t)?K:P(t)?Y:re).prototype)}function Nr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):z.prototype.cacheResult.call(this)}function Xr(t,v){return t>v?1:t<v?-1:0}function _r(t){var v=_(t);if(!v){if(!G(t))throw new TypeError("Expected iterable or array-like: "+t);v=_(r(t))}return v}e(Dt,rt);function Dt(t,v){var B,Q=function(oe){if(oe instanceof Q)return oe;if(!(this instanceof Q))return new Q(oe);if(!B){B=!0;var de=Object.keys(t);Tn(q,de),q.size=de.length,q._name=v,q._keys=de,q._defaultValues=t}this._map=be(oe)},q=Q.prototype=Object.create(It);return q.constructor=Q,Q}Dt.prototype.toString=function(){return this.__toString(Zr(this)+" {","}")},Dt.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Dt.prototype.get=function(t,v){if(!this.has(t))return v;var B=this._defaultValues[t];return this._map?this._map.get(t,B):B},Dt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=vr(this,yt()))},Dt.prototype.set=function(t,v){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Zr(this));if(this._map&&!this._map.has(t)){var B=this._defaultValues[t];if(v===B)return this}var Q=this._map&&this._map.set(t,v);return this.__ownerID||Q===this._map?this:vr(this,Q)},Dt.prototype.remove=function(t){if(!this.has(t))return this;var v=this._map&&this._map.remove(t);return this.__ownerID||v===this._map?this:vr(this,v)},Dt.prototype.wasAltered=function(){return this._map.wasAltered()},Dt.prototype.__iterator=function(t,v){var B=this;return E(this._defaultValues).map(function(Q,q){return B.get(q)}).__iterator(t,v)},Dt.prototype.__iterate=function(t,v){var B=this;return E(this._defaultValues).map(function(Q,q){return B.get(q)}).__iterate(t,v)},Dt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var v=this._map&&this._map.__ensureOwner(t);return t?vr(this,v,t):(this.__ownerID=t,this._map=v,this)};var It=Dt.prototype;It[F]=It.remove,It.deleteIn=It.removeIn=ze.removeIn,It.merge=ze.merge,It.mergeWith=ze.mergeWith,It.mergeIn=ze.mergeIn,It.mergeDeep=ze.mergeDeep,It.mergeDeepWith=ze.mergeDeepWith,It.mergeDeepIn=ze.mergeDeepIn,It.setIn=ze.setIn,It.update=ze.update,It.updateIn=ze.updateIn,It.withMutations=ze.withMutations,It.asMutable=ze.asMutable,It.asImmutable=ze.asImmutable;function vr(t,v,B){var Q=Object.create(Object.getPrototypeOf(t));return Q._map=v,Q.__ownerID=B,Q}function Zr(t){return t._name||t.constructor.name||"Record"}function Tn(t,v){try{v.forEach(Rn.bind(void 0,t))}catch{}}function Rn(t,v){Object.defineProperty(t,v,{get:function(){return this.get(v)},set:function(B){De(this.__ownerID,"Cannot set on an immutable record."),this.set(v,B)}})}e(St,Qe);function St(t){return t==null?Ar():Ir(t)&&!C(t)?t:Ar().withMutations(function(v){var B=M(t);ut(B.size),B.forEach(function(Q){return v.add(Q)})})}St.of=function(){return this(arguments)},St.fromKeys=function(t){return this(E(t).keySeq())},St.prototype.toString=function(){return this.__toString("Set {","}")},St.prototype.has=function(t){return this._map.has(t)},St.prototype.add=function(t){return Fr(this,this._map.set(t,!0))},St.prototype.remove=function(t){return Fr(this,this._map.remove(t))},St.prototype.clear=function(){return Fr(this,this._map.clear())},St.prototype.union=function(){var t=i.call(arguments,0);return t=t.filter(function(v){return v.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(v){for(var B=0;B<t.length;B++)M(t[B]).forEach(function(Q){return v.add(Q)})})},St.prototype.intersect=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(B){return M(B)});var v=this;return this.withMutations(function(B){v.forEach(function(Q){t.every(function(q){return q.includes(Q)})||B.remove(Q)})})},St.prototype.subtract=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(B){return M(B)});var v=this;return this.withMutations(function(B){v.forEach(function(Q){t.some(function(q){return q.includes(Q)})&&B.remove(Q)})})},St.prototype.merge=function(){return this.union.apply(this,arguments)},St.prototype.mergeWith=function(t){var v=i.call(arguments,1);return this.union.apply(this,v)},St.prototype.sort=function(t){return jt(er(this,t))},St.prototype.sortBy=function(t,v){return jt(er(this,v,t))},St.prototype.wasAltered=function(){return this._map.wasAltered()},St.prototype.__iterate=function(t,v){var B=this;return this._map.__iterate(function(Q,q){return t(q,q,B)},v)},St.prototype.__iterator=function(t,v){return this._map.map(function(B,Q){return Q}).__iterator(t,v)},St.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var v=this._map.__ensureOwner(t);return t?this.__make(v,t):(this.__ownerID=t,this._map=v,this)};function Ir(t){return!!(t&&t[qr])}St.isSet=Ir;var qr="@@__IMMUTABLE_SET__@@",bt=St.prototype;bt[qr]=!0,bt[F]=bt.remove,bt.mergeDeep=bt.merge,bt.mergeDeepWith=bt.mergeWith,bt.withMutations=ze.withMutations,bt.asMutable=ze.asMutable,bt.asImmutable=ze.asImmutable,bt.__empty=Ar,bt.__make=en;function Fr(t,v){return t.__ownerID?(t.size=v.size,t._map=v,t):v===t._map?t:v.size===0?t.__empty():t.__make(v)}function en(t,v){var B=Object.create(bt);return B.size=t?t.size:0,B._map=t,B.__ownerID=v,B}var tn;function Ar(){return tn||(tn=en(yt()))}e(jt,St);function jt(t){return t==null?Dr():rn(t)?t:Dr().withMutations(function(v){var B=M(t);ut(B.size),B.forEach(function(Q){return v.add(Q)})})}jt.of=function(){return this(arguments)},jt.fromKeys=function(t){return this(E(t).keySeq())},jt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function rn(t){return Ir(t)&&C(t)}jt.isOrderedSet=rn;var gr=jt.prototype;gr[D]=!0,gr.__empty=Dr,gr.__make=nn;function nn(t,v){var B=Object.create(gr);return B.size=t?t.size:0,B._map=t,B.__ownerID=v,B}var an;function Dr(){return an||(an=nn(dr()))}e(Lt,it);function Lt(t){return t==null?br():un(t)?t:br().unshiftAll(t)}Lt.of=function(){return this(arguments)},Lt.prototype.toString=function(){return this.__toString("Stack [","]")},Lt.prototype.get=function(t,v){var B=this._head;for(t=k(this,t);B&&t--;)B=B.next;return B?B.value:v},Lt.prototype.peek=function(){return this._head&&this._head.value},Lt.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,v=this._head,B=arguments.length-1;B>=0;B--)v={value:arguments[B],next:v};return this.__ownerID?(this.size=t,this._head=v,this.__hash=void 0,this.__altered=!0,this):sr(t,v)},Lt.prototype.pushAll=function(t){if(t=m(t),t.size===0)return this;ut(t.size);var v=this.size,B=this._head;return t.reverse().forEach(function(Q){v++,B={value:Q,next:B}}),this.__ownerID?(this.size=v,this._head=B,this.__hash=void 0,this.__altered=!0,this):sr(v,B)},Lt.prototype.pop=function(){return this.slice(1)},Lt.prototype.unshift=function(){return this.push.apply(this,arguments)},Lt.prototype.unshiftAll=function(t){return this.pushAll(t)},Lt.prototype.shift=function(){return this.pop.apply(this,arguments)},Lt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):br()},Lt.prototype.slice=function(t,v){if(h(t,v,this.size))return this;var B=s(t,this.size),Q=c(v,this.size);if(Q!==this.size)return it.prototype.slice.call(this,t,v);for(var q=this.size-B,ie=this._head;B--;)ie=ie.next;return this.__ownerID?(this.size=q,this._head=ie,this.__hash=void 0,this.__altered=!0,this):sr(q,ie)},Lt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?sr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Lt.prototype.__iterate=function(t,v){if(v)return this.reverse().__iterate(t);for(var B=0,Q=this._head;Q&&t(Q.value,B++,this)!==!1;)Q=Q.next;return B},Lt.prototype.__iterator=function(t,v){if(v)return this.reverse().__iterator(t);var B=0,Q=this._head;return new n(function(){if(Q){var q=Q.value;return Q=Q.next,g(t,B++,q)}return d()})};function un(t){return!!(t&&t[on])}Lt.isStack=un;var on="@@__IMMUTABLE_STACK__@@",tr=Lt.prototype;tr[on]=!0,tr.withMutations=ze.withMutations,tr.asMutable=ze.asMutable,tr.asImmutable=ze.asImmutable,tr.wasAltered=ze.wasAltered;function sr(t,v,B,Q){var q=Object.create(tr);return q.size=t,q._head=v,q.__ownerID=B,q.__hash=Q,q.__altered=!1,q}var ln;function br(){return ln||(ln=sr(0))}function Ut(t,v){var B=function(Q){t.prototype[Q]=v[Q]};return Object.keys(v).forEach(B),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(v).forEach(B),t}r.Iterator=n,Ut(r,{toArray:function(){ut(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(v,B){t[B]=v}),t},toIndexedSeq:function(){return new _t(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Mt(this,!0)},toMap:function(){return be(this.toKeyedSeq())},toObject:function(){ut(this.size);var t={};return this.__iterate(function(v,B){t[B]=v}),t},toOrderedMap:function(){return Rt(this.toKeyedSeq())},toOrderedSet:function(){return jt(T(this)?this.valueSeq():this)},toSet:function(){return St(T(this)?this.valueSeq():this)},toSetSeq:function(){return new Zt(this)},toSeq:function(){return P(this)?this.toIndexedSeq():T(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Lt(T(this)?this.valueSeq():this)},toList:function(){return Et(T(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,v){return this.size===0?t+v:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+v},concat:function(){var t=i.call(arguments,0);return Ot(this,On(this,t))},includes:function(t){return this.some(function(v){return fe(v,t)})},entries:function(){return this.__iterator(f)},every:function(t,v){ut(this.size);var B=!0;return this.__iterate(function(Q,q,ie){if(!t.call(v,Q,q,ie))return B=!1,!1}),B},filter:function(t,v){return Ot(this,Kr(this,t,v,!0))},find:function(t,v,B){var Q=this.findEntry(t,v);return Q?Q[1]:B},forEach:function(t,v){return ut(this.size),this.__iterate(v?t.bind(v):t)},join:function(t){ut(this.size),t=t!==void 0?""+t:",";var v="",B=!0;return this.__iterate(function(Q){B?B=!1:v+=t,v+=Q!=null?Q.toString():""}),v},keys:function(){return this.__iterator(u)},map:function(t,v){return Ot(this,zr(this,t,v))},reduce:function(t,v,B){ut(this.size);var Q,q;return arguments.length<2?q=!0:Q=v,this.__iterate(function(ie,oe,de){q?(q=!1,Q=ie):Q=t.call(B,Q,ie,oe,de)}),Q},reduceRight:function(t,v,B){var Q=this.toKeyedSeq().reverse();return Q.reduce.apply(Q,arguments)},reverse:function(){return Ot(this,Cr(this,!0))},slice:function(t,v){return Ot(this,Pr(this,t,v,!0))},some:function(t,v){return!this.every(mr(t),v)},sort:function(t){return Ot(this,er(this,t))},values:function(){return this.__iterator(l)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,v){return J(t?this.toSeq().filter(t,v):this)},countBy:function(t,v){return hn(this,t,v)},equals:function(t){return Ee(this,t)},entrySeq:function(){var t=this;if(t._cache)return new ue(t._cache);var v=t.toSeq().map(Pn).toIndexedSeq();return v.fromEntrySeq=function(){return t.toSeq()},v},filterNot:function(t,v){return this.filter(mr(t),v)},findEntry:function(t,v,B){var Q=B;return this.__iterate(function(q,ie,oe){if(t.call(v,q,ie,oe))return Q=[ie,q],!1}),Q},findKey:function(t,v){var B=this.findEntry(t,v);return B&&B[0]},findLast:function(t,v,B){return this.toKeyedSeq().reverse().find(t,v,B)},findLastEntry:function(t,v,B){return this.toKeyedSeq().reverse().findEntry(t,v,B)},findLastKey:function(t,v){return this.toKeyedSeq().reverse().findKey(t,v)},first:function(){return this.find(R)},flatMap:function(t,v){return Ot(this,En(this,t,v))},flatten:function(t){return Ot(this,Hr(this,t,!0))},fromEntrySeq:function(){return new qt(this)},get:function(t,v){return this.find(function(B,Q){return fe(Q,t)},void 0,v)},getIn:function(t,v){for(var B=this,Q=_r(t),q;!(q=Q.next()).done;){var ie=q.value;if(B=B&&B.get?B.get(ie,j):j,B===j)return v}return B},groupBy:function(t,v){return mn(this,t,v)},has:function(t){return this.get(t,j)!==j},hasIn:function(t){return this.getIn(t,j)!==j},isSubset:function(t){return t=typeof t.includes=="function"?t:r(t),this.every(function(v){return t.includes(v)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:r(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(v){return fe(v,t)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return pr(this,t)},maxBy:function(t,v){return pr(this,v,t)},min:function(t){return pr(this,t?sn(t):cn)},minBy:function(t,v){return pr(this,v?sn(v):cn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ot(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,v){return Ot(this,kr(this,t,v,!0))},skipUntil:function(t,v){return this.skipWhile(mr(t),v)},sortBy:function(t,v){return Ot(this,er(this,v,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ot(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,v){return Ot(this,yn(this,t,v))},takeUntil:function(t,v){return this.takeWhile(mr(t),v)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Nn(this))}});var At=r.prototype;At[A]=!0,At[a]=At.values,At.__toJS=At.toArray,At.__toStringMapper=fn,At.inspect=At.toSource=function(){return this.toString()},At.chain=At.flatMap,At.contains=At.includes,Ut(E,{flip:function(){return Ot(this,xr(this))},mapEntries:function(t,v){var B=this,Q=0;return Ot(this,this.toSeq().map(function(q,ie){return t.call(v,[ie,q],Q++,B)}).fromEntrySeq())},mapKeys:function(t,v){var B=this;return Ot(this,this.toSeq().flip().map(function(Q,q){return t.call(v,Q,q,B)}).flip())}});var hr=E.prototype;hr[O]=!0,hr[a]=At.entries,hr.__toJS=At.toObject,hr.__toStringMapper=function(t,v){return JSON.stringify(v)+": "+fn(t)},Ut(m,{toKeyedSeq:function(){return new Mt(this,!1)},filter:function(t,v){return Ot(this,Kr(this,t,v,!1))},findIndex:function(t,v){var B=this.findEntry(t,v);return B?B[0]:-1},indexOf:function(t){var v=this.keyOf(t);return v===void 0?-1:v},lastIndexOf:function(t){var v=this.lastKeyOf(t);return v===void 0?-1:v},reverse:function(){return Ot(this,Cr(this,!1))},slice:function(t,v){return Ot(this,Pr(this,t,v,!1))},splice:function(t,v){var B=arguments.length;if(v=Math.max(v|0,0),B===0||B===2&&!v)return this;t=s(t,t<0?this.count():this.size);var Q=this.slice(0,t);return Ot(this,B===1?Q:Q.concat(ee(arguments,2),this.slice(t+v)))},findLastIndex:function(t,v){var B=this.findLastEntry(t,v);return B?B[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Ot(this,Hr(this,t,!1))},get:function(t,v){return t=k(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?v:this.find(function(B,Q){return Q===t},void 0,v)},has:function(t){return t=k(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Ot(this,Sn(this,t))},interleave:function(){var t=[this].concat(ee(arguments)),v=Lr(this.toSeq(),Y.of,t),B=v.flatten(!0);return v.size&&(B.size=v.size*t.length),Ot(this,B)},keySeq:function(){return Me(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,v){return Ot(this,kr(this,t,v,!1))},zip:function(){var t=[this].concat(ee(arguments));return Ot(this,Lr(this,Ln,t))},zipWith:function(t){var v=ee(arguments);return v[0]=this,Ot(this,Lr(this,t,v))}}),m.prototype[b]=!0,m.prototype[D]=!0,Ut(M,{get:function(t,v){return this.has(t)?t:v},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),M.prototype.has=At.includes,M.prototype.contains=M.prototype.includes,Ut(K,E.prototype),Ut(Y,m.prototype),Ut(re,M.prototype),Ut(rt,E.prototype),Ut(it,m.prototype),Ut(Qe,M.prototype);function Cn(t,v){return v}function Pn(t,v){return[v,t]}function mr(t){return function(){return!t.apply(this,arguments)}}function sn(t){return function(){return-t.apply(this,arguments)}}function fn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Ln(){return ee(arguments)}function cn(t,v){return t<v?1:t>v?-1:0}function Nn(t){if(t.size===1/0)return 0;var v=C(t),B=T(t),Q=v?1:0,q=t.__iterate(B?v?function(ie,oe){Q=31*Q+dn(Ze(ie),Ze(oe))|0}:function(ie,oe){Q=Q+dn(Ze(ie),Ze(oe))|0}:v?function(ie){Q=31*Q+Ze(ie)|0}:function(ie){Q=Q+Ze(ie)|0});return In(q,Q)}function In(t,v){return v=lt(v,3432918353),v=lt(v<<15|v>>>-15,461845907),v=lt(v<<13|v>>>-13,5),v=(v+3864292196|0)^t,v=lt(v^v>>>16,2246822507),v=lt(v^v>>>13,3266489909),v=ct(v^v>>>16),v}function dn(t,v){return t^v+2654435769+(t<<6)+(t>>2)|0}var Fn={Iterable:r,Seq:z,Collection:$e,Map:be,OrderedMap:Rt,List:Et,Stack:Lt,Set:St,OrderedSet:jt,Record:Dt,Range:Me,Repeat:Ce,is:fe,fromJS:Ye};return Fn})},46916:(te,i,e)=>{var r=e(9087),E=e(2174);function m(M,I,T){(T!==void 0&&!E(M[I],T)||T===void 0&&!(I in M))&&r(M,I,T)}te.exports=m},25125:(te,i,e)=>{var r=e(64792),E=e(46916),m=e(86752),M=e(82356),I=e(44166),T=e(56941),P=e(82273);function S(C,A,O,b,D){C!==A&&m(A,function(F,U){if(D||(D=new r),I(F))M(C,A,U,O,S,b,D);else{var L=b?b(P(C,U),F,U+"",C,A,D):void 0;L===void 0&&(L=F),E(C,U,L)}},T)}te.exports=S},82356:(te,i,e)=>{var r=e(46916),E=e(77925),m=e(23369),M=e(41603),I=e(11416),T=e(60424),P=e(42298),S=e(49193),C=e(39275),A=e(70712),O=e(44166),b=e(48565),D=e(77711),F=e(82273),U=e(95549);function L($,j,V,w,x,H,Z){var ee=F($,V),J=F(j,V),k=Z.get(J);if(k){r($,V,k);return}var R=H?H(ee,J,V+"",$,j,Z):void 0,h=R===void 0;if(h){var s=P(J),c=!s&&C(J),o=!s&&!c&&D(J);R=J,s||c||o?P(ee)?R=ee:S(ee)?R=M(ee):c?(h=!1,R=E(J,!0)):o?(h=!1,R=m(J,!0)):R=[]:b(J)||T(J)?(R=ee,T(ee)?R=U(ee):(!O(ee)||A(ee))&&(R=I(J))):h=!1}h&&(Z.set(J,R),x(R,J,w,H,Z),Z.delete(J)),r($,V,R)}te.exports=L},92901:te=>{var i=9007199254740991,e=Math.floor;function r(E,m){var M="";if(!E||m<1||m>i)return M;do m%2&&(M+=E),m=e(m/2),m&&(E+=E);while(m);return M}te.exports=r},84915:(te,i,e)=>{var r=e(88199),E=e(96138),m=e(6140);function M(I,T){return m(E(I,T,r),I+"")}te.exports=M},95163:(te,i,e)=>{var r=e(65602);function E(m,M){return r(M,function(I){return m[I]})}te.exports=E},65962:(te,i,e)=>{var r=e(84915),E=e(99382);function m(M){return r(function(I,T){var P=-1,S=T.length,C=S>1?T[S-1]:void 0,A=S>2?T[2]:void 0;for(C=M.length>3&&typeof C=="function"?(S--,C):void 0,A&&E(T[0],T[1],A)&&(C=S<3?void 0:C,S=1),I=Object(I);++P<S;){var O=T[P];O&&M(I,O,P,C)}return I})}te.exports=m},82273:te=>{function i(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}te.exports=i},44889:(te,i,e)=>{var r=e(66408),E=/[\\^$.*+?()[\]{}|]/g,m=RegExp(E.source);function M(I){return I=r(I),I&&m.test(I)?I.replace(E,"\\$&"):I}te.exports=M},1660:(te,i,e)=>{var r=e(43436),E=e(5448),m=e(93748),M=e(77118),I=e(74114),T=Math.max;function P(S,C,A,O){S=E(S)?S:I(S),A=A&&!O?M(A):0;var b=S.length;return A<0&&(A=T(b+A,0)),m(S)?A<=b&&S.indexOf(C,A)>-1:!!b&&r(S,C,A)>-1}te.exports=P},49193:(te,i,e)=>{var r=e(5448),E=e(81962);function m(M){return E(M)&&r(M)}te.exports=m},8727:(te,i,e)=>{var r=e(88003),E=e(51261),m=e(60424),M=e(42298),I=e(5448),T=e(39275),P=e(49154),S=e(77711),C="[object Map]",A="[object Set]",O=Object.prototype,b=O.hasOwnProperty;function D(F){if(F==null)return!0;if(I(F)&&(M(F)||typeof F=="string"||typeof F.splice=="function"||T(F)||S(F)||m(F)))return!F.length;var U=E(F);if(U==C||U==A)return!F.size;if(P(F))return!r(F).length;for(var L in F)if(b.call(F,L))return!1;return!0}te.exports=D},93748:(te,i,e)=>{var r=e(94451),E=e(42298),m=e(81962),M="[object String]";function I(T){return typeof T=="string"||!E(T)&&m(T)&&r(T)==M}te.exports=I},74937:(te,i,e)=>{var r=e(9087),E=e(43346),m=e(57279);function M(I,T){var P={};return T=m(T,3),E(I,function(S,C,A){r(P,C,T(S,C,A))}),P}te.exports=M},63955:(te,i,e)=>{var r=e(25125),E=e(65962),m=E(function(M,I,T){r(M,I,T)});te.exports=m},9094:(te,i,e)=>{var r=e(25125),E=e(65962),m=E(function(M,I,T,P){r(M,I,T,P)});te.exports=m},76175:(te,i,e)=>{var r=e(65602),E=e(57279),m=e(88582),M=e(72979);function I(T,P){if(T==null)return{};var S=r(M(T),function(C){return[C]});return P=E(P),m(T,S,function(C,A){return P(C,A[0])})}te.exports=I},59788:(te,i,e)=>{var r=e(92901),E=e(99382),m=e(77118),M=e(66408);function I(T,P,S){return(S?E(T,P,S):P===void 0)?P=1:P=m(P),r(M(T),P)}te.exports=I},94738:(te,i,e)=>{var r=e(9906),E=e(44855),m=e(77118),M=e(66408);function I(T,P,S){return T=M(T),S=S==null?0:r(m(S),0,T.length),P=E(P),T.slice(S,S+P.length)==P}te.exports=I},77118:(te,i,e)=>{var r=e(3351);function E(m){var M=r(m),I=M%1;return M===M?I?M-I:M:0}te.exports=E},95549:(te,i,e)=>{var r=e(2701),E=e(56941);function m(M){return r(M,E(M))}te.exports=m},74114:(te,i,e)=>{var r=e(95163),E=e(65555);function m(M){return M==null?[]:r(M,E(M))}te.exports=m},58750:function(te){(function(e,r){te.exports=r()})(this,function(){return function(i){var e={};function r(E){if(e[E])return e[E].exports;var m=e[E]={i:E,l:!1,exports:{}};return i[E].call(m.exports,m,m.exports,r),m.l=!0,m.exports}return r.m=i,r.c=e,r.d=function(E,m,M){r.o(E,m)||Object.defineProperty(E,m,{configurable:!1,enumerable:!0,get:M})},r.n=function(E){var m=E&&E.__esModule?function(){return E.default}:function(){return E};return r.d(m,"a",m),m},r.o=function(E,m){return Object.prototype.hasOwnProperty.call(E,m)},r.p="",r(r.s=3)}([function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function E(M,I){var T={},P=M||"Abstract",S=[],C=null,A;if(T._type=P,T.getType=function(){return P},T.setType=function(F){P=F},T.getChildren=function(){return S},T.addChild=function(F){if(F){if(!F.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(F)};F.setParent(T),S.push(F)}},T.getParent=function(){return C},T.setParent=function(F){C=F},T.getContext=function(F){return A||F.activeContext.peek()},T.setContext=function(F){A=F},T.getStartPosition=function(){return I>>16},T.getEndPosition=function(){return I&65535},T.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},T.toString=function(){var F="Kind: "+T.getType();F+=", Children: [";for(var U=0,L=T.getChildren().length;U<L;U+=1)F+="{"+T.getChildren()[U]+"}, ";return F+="]",F},I===0)throw{name:"Error",message:"Position cannot be 0"};for(var O=arguments.length,b=Array(O>2?O-2:0),D=2;D<O;D++)b[D-2]=arguments[D];return b&&b.forEach(function(F){T.addChild(F)}),T}var m=e.SpelNode={create:E}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=E;function E(m){this.elements=m||[]}E.prototype.push=function(m){return this.elements.push(m),m},E.prototype.pop=function(){return this.elements.pop()},E.prototype.peek=function(){return this.elements[this.elements.length-1]},E.prototype.empty=function(){return this.elements.length>0},E.prototype.search=function(m){return this.elements.length-this.elements.indexOf(m)}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var E={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function m(I){this.type=I,this.tokenChars=E[I],this._hasPayload=typeof E[I]!="string",typeof E[I]=="number"&&(this._ordinal=E[I])}for(var M in E)E.hasOwnProperty(M)&&(m[M]=new m(M));m.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},m.prototype.getLength=function(){return this.tokenChars.length},m.prototype.hasPayload=function(){return this._hasPayload},m.prototype.valueOf=function(I){for(var T in E)if(E.hasOwnProperty(T)&&E[T]===I)return m[T]},m.prototype.ordinal=function(){return this._ordinal},e.TokenKind=m},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardContext=e.SpelExpressionEvaluator=void 0;var E=r(4),m=r(50);e.SpelExpressionEvaluator=E.SpelExpressionEvaluator,e.StandardContext=m.StandardContext},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionEvaluator=void 0;var E=r(5),m=r(1),M={};function I(T,P,S){var C=new m.Stack,A;return P||(P={}),C.push(P),A={rootContext:P,activeContext:C,locals:S},T.getValue(A)}M.compile=function(T){var P=(0,E.SpelExpressionParser)().parse(T);return{eval:function(C,A){return I(P,C,A)},_compiledExpression:P}},M.eval=function(T,P,S){return M.compile(T).eval(P,S)},e.SpelExpressionEvaluator=M},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionParser=void 0;var E=r(2),m=r(6),M=r(8),I=r(9),T=r(10),P=r(11),S=r(12),C=r(13),A=r(14),O=r(15),b=r(16),D=r(17),F=r(18),U=r(19),L=r(20),$=r(21),j=r(22),V=r(23),w=r(24),x=r(25),H=r(26),Z=r(27),ee=r(28),J=r(29),k=r(30),R=r(31),h=r(32),s=r(33),c=r(34),o=r(35),u=r(36),l=r(37),f=r(38),y=r(39),p=r(40),a=r(41),n=r(42),g=r(43),d=r(44),N=r(45),W=r(46),_=r(47),X=r(48),G=r(49),z=e.SpelExpressionParser=function(){var Y=new RegExp("[\\p{L}\\p{N}_$]+"),re,ne=[],ue,ae,ve,se;function ge(le){re=le}function ye(le,me){try{ue=le,ae=m.Tokenizer.tokenize(le),ve=ae.length,se=0,ne=[];var Ue=Oe();return be()&&ze(nt().startPos,"MORE_INPUT",Xe().toString()),Ue}catch(ot){throw ot.message}}function Oe(){var le=Se();if(be()){var me=nt();if(me.getKind()===E.TokenKind.ASSIGN){le===null&&(le=P.NullLiteral.create(Ct(me.startPos-1,me.endPos-1))),Xe();var Ue=Se();return F.Assign.create(tt(me),le,Ue)}if(me.getKind()===E.TokenKind.ELVIS){le===null&&(le=P.NullLiteral.create(Ct(me.startPos-1,me.endPos-2))),Xe();var ot=Oe();return ot===null&&(ot=P.NullLiteral.create(Ct(me.startPos+1,me.endPos+1))),f.Elvis.create(tt(me),le,ot)}if(me.getKind()===E.TokenKind.QMARK){le===null&&(le=P.NullLiteral.create(Ct(me.startPos-1,me.endPos-1))),Xe();var yt=Oe();We(E.TokenKind.COLON);var Pt=Oe();return l.Ternary.create(tt(me),le,yt,Pt)}}return le}function Se(){for(var le=ce();pt("or")||Be(E.TokenKind.SYMBOLIC_OR);){var me=Xe(),Ue=ce();dt(me,le,Ue),le=o.OpOr.create(tt(me),le,Ue)}return le}function ce(){for(var le=Ne();pt("and")||Be(E.TokenKind.SYMBOLIC_AND);){var me=Xe(),Ue=Ne();dt(me,le,Ue),le=c.OpAnd.create(tt(me),le,Ue)}return le}function Ne(){var le=we(),me=et();if(me!==null){var Ue=Xe(),ot=we();dt(Ue,le,ot);var yt=me.kind;if(me.isNumericRelationalOperator()){var Pt=tt(Ue);return yt===E.TokenKind.GT?j.OpGT.create(Pt,le,ot):yt===E.TokenKind.LT?w.OpLT.create(Pt,le,ot):yt===E.TokenKind.LE?V.OpLE.create(Pt,le,ot):yt===E.TokenKind.GE?$.OpGE.create(Pt,le,ot):yt===E.TokenKind.EQ?U.OpEQ.create(Pt,le,ot):L.OpNE.create(Pt,le,ot)}return yt===E.TokenKind.INSTANCEOF?g.OpInstanceof.create(tt(Ue),le,ot):yt===E.TokenKind.MATCHES?u.OpMatches.create(tt(Ue),le,ot):d.OpBetween.create(tt(Ue),le,ot)}return le}function we(){for(var le=je();st(E.TokenKind.PLUS,E.TokenKind.MINUS,E.TokenKind.INC);){var me=Xe(),Ue=je();Nt(me,Ue),me.getKind()===E.TokenKind.PLUS?le=x.OpPlus.create(tt(me),le,Ue):me.getKind()===E.TokenKind.MINUS&&(le=H.OpMinus.create(tt(me),le,Ue))}return le}function je(){for(var le=Ke();st(E.TokenKind.STAR,E.TokenKind.DIV,E.TokenKind.MOD);){var me=Xe(),Ue=Ke();dt(me,le,Ue),me.getKind()===E.TokenKind.STAR?le=Z.OpMultiply.create(tt(me),le,Ue):me.getKind()===E.TokenKind.DIV?le=ee.OpDivide.create(tt(me),le,Ue):le=J.OpModulus.create(tt(me),le,Ue)}return le}function Ke(){var le=Ye(),me;if(Be(E.TokenKind.POWER)){me=Xe();var Ue=Ye();return Nt(me,Ue),k.OpPower.create(tt(me),le,Ue)}return le!==null&&st(E.TokenKind.INC,E.TokenKind.DEC)?(me=Xe(),me.getKind()===E.TokenKind.INC?R.OpInc.create(tt(me),!0,le):h.OpDec.create(tt(me),!0,le)):le}function Ye(){var le,me;return st(E.TokenKind.PLUS,E.TokenKind.MINUS,E.TokenKind.NOT)?(le=Xe(),me=Ye(),le.getKind()===E.TokenKind.NOT?s.OpNot.create(tt(le),me):le.getKind()===E.TokenKind.PLUS?x.OpPlus.create(tt(le),me):H.OpMinus.create(tt(le),me)):st(E.TokenKind.INC,E.TokenKind.DEC)?(le=Xe(),me=Ye(),le.getKind()===E.TokenKind.INC?R.OpInc.create(tt(le),!1,me):h.OpDec.create(tt(le),!1,me)):ke()}function ke(){var le=[],me=Ae();for(le.push(me);at();)le.push(Ve());return le.length===1?le[0]:b.CompoundExpression.create(Ct(me.getStartPosition(),le[le.length-1].getEndPosition()),le)}function at(){var le=null;return st(E.TokenKind.DOT,E.TokenKind.SAFE_NAVI)?le=fe():le=He(),le===null?!1:(Pe(le),!0)}function He(){return Be(E.TokenKind.LSQUARE)&&ct()?Ve():null}function fe(){var le=Xe(),me=le.getKind()===E.TokenKind.SAFE_NAVI;return he(me)||Ee()||Qe(me)||Ze(me)?Ve():(nt()===null?ze(le.startPos,"OOD"):ze(le.startPos,"UNEXPECTED_DATA_AFTER_DOT",_e(nt())),null)}function Ee(){if(!Be(E.TokenKind.HASH))return!1;var le=Xe(),me=We(E.TokenKind.IDENTIFIER),Ue=Ce();return Ue===null?(Pe(O.VariableReference.create(me.data,Ct(le.startPos,me.endPos))),!0):(Pe(S.FunctionReference.create(me.data,Ct(le.startPos,me.endPos),Ue)),!0)}function Ce(){if(!Be(E.TokenKind.LPAREN))return null;var le=[];return De(le),We(E.TokenKind.RPAREN),le}function Fe(le){Be(E.TokenKind.LPAREN)||ze(tt(nt()),"MISSING_CONSTRUCTOR_ARGS"),De(le),We(E.TokenKind.RPAREN)}function De(le){var me=nt().startPos,Ue;do{Xe();var ot=nt();ot===null&&ze(me,"RUN_OUT_OF_ARGUMENTS"),ot.getKind()!==E.TokenKind.RPAREN&&le.push(Oe()),Ue=nt()}while(Ue!==null&&Ue.kind===E.TokenKind.COMMA);Ue===null&&ze(me,"RUN_OUT_OF_ARGUMENTS")}function Me(le){return le===null?ue.length:le.startPos}function Ae(){return Ge()||xe()||rt()||it()||Le()||he(!1)||Ee()||$e()||Qe(!1)||Ze(!1)||ct()||lt()?Ve():null}function $e(){if(Be(E.TokenKind.BEAN_REF)){var le=Xe(),me=null,Ue=null;Be(E.TokenKind.IDENTIFIER)?(me=We(E.TokenKind.IDENTIFIER),Ue=me.data):Be(E.TokenKind.LITERAL_STRING)?(me=We(E.TokenKind.LITERAL_STRING),Ue=me.stringValue(),Ue=Ue.substring(1,Ue.length()-1)):ze(le.startPos,"INVALID_BEAN_REFERENCE");var ot=W.BeanReference.create(tt(me),Ue);return Pe(ot),!0}return!1}function rt(){if(Be(E.TokenKind.IDENTIFIER)){var le=nt();if(le.stringValue()!=="T")return!1;var me=Xe();if(Be(E.TokenKind.RSQUARE))return Pe(A.PropertyReference.create(me.stringValue(),tt(me))),!0;We(E.TokenKind.LPAREN);for(var Ue=gt(),ot=0;ft(E.TokenKind.LSQUARE,!0);)We(E.TokenKind.RSQUARE),ot++;return We(E.TokenKind.RPAREN),Pe(N.TypeReference.create(tt(le),Ue,ot)),!0}return!1}function it(){if(Be(E.TokenKind.IDENTIFIER)){var le=nt();return le.stringValue().toLowerCase()!=="null"?!1:(Xe(),Pe(P.NullLiteral.create(tt(le))),!0)}return!1}function Qe(le){var me=nt();if(!ft(E.TokenKind.PROJECT,!0))return!1;var Ue=Oe();return We(E.TokenKind.RSQUARE),Pe(n.Projection.create(le,tt(me),Ue)),!0}function lt(){var le=nt(),me=[];if(!ft(E.TokenKind.LCURLY,!0))return!1;var Ue=null,ot=nt();if(ft(E.TokenKind.RCURLY,!0))Ue=y.InlineList.create(Ct(le.startPos,ot.endPos));else if(ft(E.TokenKind.COLON,!0))ot=We(E.TokenKind.RCURLY),Ue=p.InlineMap.create(Ct(le.startPos,ot.endPos));else{var yt=Oe();if(Be(E.TokenKind.RCURLY))me.push(yt),ot=We(E.TokenKind.RCURLY),Ue=y.InlineList.create(Ct(le.startPos,ot.endPos),me);else if(ft(E.TokenKind.COMMA,!0)){me.push(yt);do me.push(Oe());while(ft(E.TokenKind.COMMA,!0));ot=We(E.TokenKind.RCURLY),Ue=y.InlineList.create(tt(le.startPos,ot.endPos),me)}else if(ft(E.TokenKind.COLON,!0)){var Pt=[];for(Pt.push(yt),Pt.push(Oe());ft(E.TokenKind.COMMA,!0);)Pt.push(Oe()),We(E.TokenKind.COLON),Pt.push(Oe());ot=We(E.TokenKind.RCURLY),Ue=p.InlineMap.create(Ct(le.startPos,ot.endPos),Pt)}else ze(le.startPos,"OOD")}return Pe(Ue),!0}function ct(){var le=nt();if(!ft(E.TokenKind.LSQUARE,!0))return!1;var me=Oe();return We(E.TokenKind.RSQUARE),Pe(D.Indexer.create(tt(le),me)),!0}function Ze(le){var me=nt();if(!ut())return!1;Xe();var Ue=Oe();return Ue===null&&ze(tt(me),"MISSING_SELECTION_EXPRESSION"),We(E.TokenKind.RSQUARE),me.getKind()===E.TokenKind.SELECT_FIRST?Pe(a.Selection.create(le,a.Selection.FIRST,tt(me),Ue)):me.getKind()===E.TokenKind.SELECT_LAST?Pe(a.Selection.create(le,a.Selection.LAST,tt(me),Ue)):Pe(a.Selection.create(le,a.Selection.ALL,tt(me),Ue)),!0}function gt(){for(var le=[],me=nt();pe(me);)Xe(),me.kind!==E.TokenKind.DOT&&le.push(_.Identifier.create(me.stringValue(),tt(me))),me=nt();le.length||(me===null&&ze(ue.length(),"OOD"),ze(me.startPos,"NOT_EXPECTED_TOKEN","qualified ID",me.getKind().toString().toLowerCase()));var Ue=Ct(le[0].getStartPosition(),le[le.length-1].getEndPosition());return X.QualifiedIdentifier.create(Ue,le)}function pe(le){if(le===null||le.kind===E.TokenKind.LITERAL_STRING)return!1;if(le.kind===E.TokenKind.DOT||le.kind===E.TokenKind.IDENTIFIER)return!0;var me=le.stringValue();return me&&me.length&&Y.test(me)}function he(le){if(Be(E.TokenKind.IDENTIFIER)){var me=Xe(),Ue=Ce();return Ue===null?(Pe(A.PropertyReference.create(le,me.stringValue(),tt(me))),!0):(Pe(C.MethodReference.create(le,me.stringValue(),tt(me),Ue)),!0)}return!1}function Le(){if(pt("new")){var le=Xe();if(Be(E.TokenKind.RSQUARE))return Pe(A.PropertyReference.create(le.stringValue(),tt(le))),!0;var me=gt(),Ue=[];if(Ue.push(me),Be(E.TokenKind.LSQUARE)){for(var ot=[];ft(E.TokenKind.LSQUARE,!0);)Be(E.TokenKind.RSQUARE)?ot.push(null):ot.push(Oe()),We(E.TokenKind.RSQUARE);lt()&&Ue.push(Ve()),Pe(G.ConstructorReference.create(tt(le),ot,Ue))}else Fe(Ue),Pe(G.ConstructorReference.create(tt(le),Ue));return!0}return!1}function Pe(le){ne.push(le)}function Ve(){return ne.pop()}function Ge(){var le=nt();if(le===null)return!1;if(le.getKind()===E.TokenKind.LITERAL_INT||le.getKind()===E.TokenKind.LITERAL_LONG)Pe(I.NumberLiteral.create(parseInt(le.stringValue(),10),tt(le)));else if(le.getKind()===E.TokenKind.LITERAL_REAL||le.getKind()===E.TokenKind.LITERAL_REAL_FLOAT)Pe(I.NumberLiteral.create(parseFloat(le.stringValue()),tt(le)));else if(le.getKind()===E.TokenKind.LITERAL_HEXINT||le.getKind()===E.TokenKind.LITERAL_HEXLONG)Pe(I.NumberLiteral.create(parseInt(le.stringValue(),16),tt(le)));else if(pt("true"))Pe(M.BooleanLiteral.create(!0,tt(le)));else if(pt("false"))Pe(M.BooleanLiteral.create(!1,tt(le)));else if(le.getKind()===E.TokenKind.LITERAL_STRING)Pe(T.StringLiteral.create(le.stringValue(),tt(le)));else return!1;return Xe(),!0}function xe(){if(Be(E.TokenKind.LPAREN)){Xe();var le=Oe();return We(E.TokenKind.RPAREN),Pe(le),!0}else return!1}function et(){var le=nt();if(le===null)return null;if(le.isNumericRelationalOperator())return le;if(le.isIdentifier()){var me=le.stringValue();if(me.toLowerCase()==="instanceof")return le.asInstanceOfToken();if(me.toLowerCase()==="matches")return le.asMatchesToken();if(me.toLowerCase()==="between")return le.asBetweenToken()}return null}function We(le){var me=Xe();return me===null&&ze(ue.length,"OOD"),me.getKind()!==le&&ze(me.startPos,"NOT_EXPECTED_TOKEN",le.toString().toLowerCase(),me.getKind().toString().toLowerCase()),me}function Be(le){return ft(le,!1)}function ft(le,me){if(!be())return!1;var Ue=nt();return Ue.getKind()===le?(me&&se++,!0):le===E.TokenKind.IDENTIFIER&&Ue.getKind().ordinal()>=E.TokenKind.DIV.ordinal()&&Ue.getKind().ordinal()<=E.TokenKind.NOT.ordinal()&&Ue.data!==null}function st(){if(!be())return!1;for(var le=nt(),me=Array.prototype.slice.call(arguments),Ue=0,ot=me.length;Ue<ot;Ue+=1)if(le.getKind()===me[Ue])return!0;return!1}function pt(le){if(!be())return!1;var me=nt();return me.getKind()===E.TokenKind.IDENTIFIER&&me.stringValue().toLowerCase()===le.toLowerCase()}function ut(){if(!be())return!1;var le=nt();return le.getKind()===E.TokenKind.SELECT||le.getKind()===E.TokenKind.SELECT_FIRST||le.getKind()===E.TokenKind.SELECT_LAST}function be(){return se<ae.length}function Xe(){return se>=ve?null:ae[se++]}function nt(){return se>=ve?null:ae[se]}function ze(le,me,Ue,ot){throw Ue&&(me+=`
Expected: `+Ue),ot&&(me+=`
Actual: `+ot),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+ue+"' at position "+le+". Message: "+me}}function _e(le){return le.getKind().hasPayload()?le.stringValue():le.getKind().toString().toLowerCase()}function dt(le,me,Ue){mt(le,me),Nt(le,Ue)}function mt(le,me){me===null&&ze(le.startPos,"LEFT_OPERAND_PROBLEM")}function Nt(le,me){me===null&&ze(le.startPos,"RIGHT_OPERAND_PROBLEM")}function tt(le){return(le.startPos<<16)+le.endPos}function Ct(le,me){return(le<<16)+me}return{setConfiguration:ge,parse:ye}}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var E=r(7),m=r(2),M=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],I=[],T=1,P=2,S=4;function C(){var b;for(b="0".charCodeAt(0);b<="9".charCodeAt(0);b+=1)I[b]|=T|P;for(b="A".charCodeAt(0);b<="F".charCodeAt(0);b+=1)I[b]|=P;for(b="a".charCodeAt(0);b<="f".charCodeAt(0);b+=1)I[b]|=P;for(b="A".charCodeAt(0);b<="Z".charCodeAt(0);b+=1)I[b]|=S;for(b="a".charCodeAt(0);b<="z".charCodeAt(0);b+=1)I[b]|=S}C();function A(b){var D=b,F=b+"\0",U=F.length,L=0,$=[];function j(){for(var d;L<U;)if(d=F[L],n(d))H();else switch(d){case"+":R(m.TokenKind.INC)?s(m.TokenKind.INC):h(m.TokenKind.PLUS);break;case"_":H();break;case"-":R(m.TokenKind.DEC)?s(m.TokenKind.DEC):h(m.TokenKind.MINUS);break;case":":h(m.TokenKind.COLON);break;case".":h(m.TokenKind.DOT);break;case",":h(m.TokenKind.COMMA);break;case"*":h(m.TokenKind.STAR);break;case"/":h(m.TokenKind.DIV);break;case"%":h(m.TokenKind.MOD);break;case"(":h(m.TokenKind.LPAREN);break;case")":h(m.TokenKind.RPAREN);break;case"[":h(m.TokenKind.LSQUARE);break;case"#":h(m.TokenKind.HASH);break;case"]":h(m.TokenKind.RSQUARE);break;case"{":h(m.TokenKind.LCURLY);break;case"}":h(m.TokenKind.RCURLY);break;case"@":h(m.TokenKind.BEAN_REF);break;case"^":R(m.TokenKind.SELECT_FIRST)?s(m.TokenKind.SELECT_FIRST):h(m.TokenKind.POWER);break;case"!":R(m.TokenKind.NE)?s(m.TokenKind.NE):R(m.TokenKind.PROJECT)?s(m.TokenKind.PROJECT):h(m.TokenKind.NOT);break;case"=":R(m.TokenKind.EQ)?s(m.TokenKind.EQ):h(m.TokenKind.ASSIGN);break;case"&":if(!R(m.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+D+") at position "+L};s(m.TokenKind.SYMBOLIC_AND);break;case"|":if(!R(m.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+D+") at position "+L};s(m.TokenKind.SYMBOLIC_OR);break;case"?":R(m.TokenKind.SELECT)?s(m.TokenKind.SELECT):R(m.TokenKind.ELVIS)?s(m.TokenKind.ELVIS):R(m.TokenKind.SAFE_NAVI)?s(m.TokenKind.SAFE_NAVI):h(m.TokenKind.QMARK);break;case"$":R(m.TokenKind.SELECT_LAST)?s(m.TokenKind.SELECT_LAST):H();break;case">":R(m.TokenKind.GE)?s(m.TokenKind.GE):h(m.TokenKind.GT);break;case"<":R(m.TokenKind.LE)?s(m.TokenKind.LE):h(m.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":x(d==="0");break;case" ":case"	":case"\r":case`
`:L+=1;break;case"'":V();break;case'"':w();break;case"\0":L+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+D+") at position "+L};default:throw{name:"SpelParseException",message:"Cannot handle character '"+d+"' in expression ("+D+") at position "+L}}}function V(){for(var d=L,N=!1,W;!N;)if(L+=1,W=F[L],W==="'"&&(F[L+1]==="'"?L+=1:N=!0),W.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+D+") at position "+L};L+=1,$.push(new E.Token(m.TokenKind.LITERAL_STRING,k(d,L),d,L))}function w(){for(var d=L,N=!1,W;!N;)if(L+=1,W=F[L],W==='"'&&(F[L+1]==='"'?L+=1:N=!0),W.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+D+") at position "+L};L+=1,$.push(new E.Token(m.TokenKind.LITERAL_STRING,k(d,L),d,L))}function x(d){var N=!1,W=L,_=F[L+1],X=_==="x"||_==="X",G,z,K,Y;if(d&&X){L=L+1;do L+=1;while(g(F[L]));u("L","l")?(ee(k(W+2,L),!0,W,L),L+=1):ee(k(W+2,L),!1,W,L);return}do L+=1;while(a(F[L]));if(_=F[L],_==="."){N=!0,G=L;do L+=1;while(a(F[L]));if(L===G+1){L=G,Z(k(W,L),!1,W,L);return}}if(z=L,u("L","l")){if(N)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+D+") at position "+L};Z(k(W,z),!0,W,z),L+=1}else if(l(F[L])){N=!0,L+=1,K=F[L],p(K)&&(L+=1);do L+=1;while(a(F[L]));Y=!1,f(F[L])?(Y=!0,L+=1,z=L):y(F[L])&&(L+=1,z=L),J(k(W,L),Y,W,L)}else _=F[L],Y=!1,f(_)?(N=!0,Y=!0,L+=1,z=L):y(_)&&(N=!0,L+=1,z=L),N?J(k(W,z),Y,W,z):Z(k(W,z),!1,W,z)}function H(){var d=L,N,W,_;do L+=1;while(o(F[L]));if(N=k(d,L),(L-d===2||L-d===3)&&(W=N.toUpperCase(),_=M.indexOf(W),_>=0)){c(m.TokenKind.valueOf(W),d,N);return}$.push(new E.Token(m.TokenKind.IDENTIFIER,N.replace("\0",""),d,L))}function Z(d,N,W,_){N?$.push(new E.Token(m.TokenKind.LITERAL_LONG,d,W,_)):$.push(new E.Token(m.TokenKind.LITERAL_INT,d,W,_))}function ee(d,N,W,_){if(d.length===0)throw N?{name:"SpelParseException",message:"Not a long in expression ("+D+") at position "+L}:{name:"SpelParseException",message:"Not an int in expression ("+D+") at position "+L};N?$.push(new E.Token(m.TokenKind.LITERAL_HEXLONG,d,W,_)):$.push(new E.Token(m.TokenKind.LITERAL_HEXINT,d,W,_))}function J(d,N,W,_){N?$.push(new E.Token(m.TokenKind.LITERAL_REAL_FLOAT,d,W,_)):$.push(new E.Token(m.TokenKind.LITERAL_REAL,d,W,_))}function k(d,N){return F.substring(d,N)}function R(d){return d.tokenChars.length===2&&F[L]===d.tokenChars[0]?F[L+1]===d.tokenChars[1]:!1}function h(d){$.push(new E.Token(d,null,L,L+1)),L+=1}function s(d){$.push(new E.Token(d,null,L,L+2)),L+=2}function c(d,N,W){$.push(new E.Token(d,W,N,N+d.getLength()))}function o(d){return n(d)||a(d)||d==="_"||d==="$"}function u(d,N){var W=F[L];return W===d||W===N}function l(d){return d==="e"||d==="E"}function f(d){return d==="f"||d==="F"}function y(d){return d==="d"||d==="D"}function p(d){return d==="+"||d==="-"}function a(d){return d.charCodeAt(0)>255?!1:(I[d.charCodeAt(0)]&T)!==0}function n(d){return d.charCodeAt(0)>255?!1:(I[d.charCodeAt(0)]&S)!==0}function g(d){return d.charCodeAt(0)>255?!1:(I[d.charCodeAt(0)]&P)!==0}return j(),$}var O=e.Tokenizer={tokenize:A}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0;var E=r(2);function m(M,I,T,P){this.kind=M,this.startPos=T,this.endPos=P,I&&(this.data=I)}m.prototype.getKind=function(){return this.kind},m.prototype.toString=function(){var M="[";return M+=this.kind.toString(),this.kind.hasPayload()&&(M+=":"+this.data),M+="]",M+="("+this.startPos+","+this.endPos+")",M},m.prototype.isIdentifier=function(){return this.kind===E.TokenKind.IDENTIFIER},m.prototype.isNumericRelationalOperator=function(){return this.kind===E.TokenKind.GT||this.kind===E.TokenKind.GE||this.kind===E.TokenKind.LT||this.kind===E.TokenKind.LE||this.kind===E.TokenKind.EQ||this.kind===E.TokenKind.NE},m.prototype.stringValue=function(){return this.data},m.prototype.asInstanceOfToken=function(){return new m(E.TokenKind.INSTANCEOF,this.startPos,this.endPos)},m.prototype.asMatchesToken=function(){return new m(E.TokenKind.MATCHES,this.startPos,this.endPos)},m.prototype.asBetweenToken=function(){return new m(E.TokenKind.BETWEEN,this.startPos,this.endPos)},m.prototype.getStartPosition=function(){return this.startPos},m.prototype.getEndPosition=function(){return this.endPos},e.Token=m},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteral=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("boolean",T);return P.getValue=function(){return I},P.setValue=function(S){return I=S},P}var M=e.BooleanLiteral={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteral=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("number",T);return P.getValue=function(){return I},P.setValue=function(S){return I=S},P}var M=e.NumberLiteral={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringLiteral=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("string",T);function S(C){return(C[0]==="'"&&C[C.length-1]==="'"||C[0]==='"'&&C[C.length-1]==='"')&&(C=C.substring(1,C.length-1)),C.replace(/''/g,"'").replace(/""/g,'"')}return I=S(I),P.getValue=function(){return I},P.setValue=function(C){return I=C},P}var M=e.StringLiteral={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullLiteral=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("null",T);return P.getValue=function(){return null},P}var M=e.NullLiteral={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionReference=void 0;var E=r(0),m=r(1);function M(T,P,S){var C=E.SpelNode.create("function",P);return C.getRaw=function(){return{functionName:T,args:S}},C.getValue=function(A){var O=A.locals||{},b=A.rootContext,D=[];if(S.forEach(function(F){var U=A.activeContext;A.activeContext=new m.Stack,A.activeContext.push(A.rootContext),D.push(F.getValue(A)),A.activeContext=U}),O[T])return O[T].apply(b,D);throw{name:"FunctionDoesNotExistException",message:"Function '"+T+"' does not exist."}},C}var I=e.FunctionReference={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MethodReference=void 0;var E=r(0),m=r(1);function M(T,P,S,C){var A=E.SpelNode.create("method",S);return A.getRaw=function(){return{methodName:P,args:C}},A.getValue=function(O){var b=O.activeContext.peek(),D=[],F;if(!b)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+P+"' for an undefined context."};function U(L){if(L==null){if(T)return null;throw{name:"NullPointerException",message:"Method "+P+" does not exist."}}return L}if(C.forEach(function(L){var $=O.activeContext;O.activeContext=new m.Stack,O.activeContext.push(O.rootContext),D.push(L.getValue(O)),O.activeContext=$}),P.substr(0,3)==="get"&&!b[P])return U(b[P.charAt(3).toLowerCase()+P.substring(4)]);if(P.substr(0,3)==="set"&&!b[P])return b[P.charAt(3).toLowerCase()+P.substring(4)]=D[0];if(Array.isArray(b)){if(P==="size")return b.length;if(P==="contains")return b.includes(D[0])}return F=U(b[P]),F?F.apply(b,D):null},A}var I=e.MethodReference={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyReference=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("property",P);return S.getRaw=function(){return T},S.getValue=function(C){var A=C.activeContext.peek();if(!A){if(I)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+T+"' for an undefined context."}}if(A[T]===void 0||A[T]===null){if(I)return null;if(T==="size"&&Array.isArray(A))return A.length;throw{name:"NullPointerException",message:"Property '"+T+"' does not exist."}}return A[T]},S.setValue=function(C,A){var O=A.activeContext.peek();if(!O)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+T+"' for an undefined context."};return O[T]=C},S.getName=function(){return T},S}var M=e.PropertyReference={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VariableReference=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("variable",T);return P.getRaw=function(){return I},P.getValue=function(S){var C=S.activeContext.peek(),A=S.locals;if(!C)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+I+"' for an undefined context."};return I==="this"?C:I==="root"?S.rootContext:A[I]},P.setValue=function(S,C){var A=C.locals;return A[I]=S},P}var M=e.VariableReference={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompoundExpression=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create.apply(null,["compound",I].concat(T));function S(C){var A=P.getChildren().length,O;for(O=0;O<A;O+=1)P.getChildren()[O].getType()==="indexer"?C.activeContext.push(C.activeContext.peek()[P.getChildren()[O].getValue(C)]):C.activeContext.push(P.getChildren()[O].getValue(C));return function(){for(O=0;O<A;O+=1)C.activeContext.pop()}}return P.getValue=function(C){var A=C.activeContext.peek(),O;if(!A)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var b=S(C);return O=C.activeContext.peek(),b(),O},P.setValue=function(C,A){var O=S(A),b=P.getChildren().length;return A.activeContext.pop(),C=P.getChildren()[b-1].setValue(C,A),A.activeContext.push(null),O(),C},P}var M=e.CompoundExpression={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Indexer=void 0;var E=r(0),m=r(1);function M(T,P){var S=E.SpelNode.create.apply(null,["indexer",T].concat(P));return S.getValue=function(C){var A=C.activeContext,O,b=S.getChildren().length,D,F;if(C.activeContext=new m.Stack,C.activeContext.push(C.rootContext),O=C.activeContext.peek(),!O)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(D=0;D<b;D+=1)C.activeContext.push(S.getChildren()[D].getValue(C));for(F=C.activeContext.peek(),D=0;D<b;D+=1)C.activeContext.pop();return C.activeContext=A,F},S}var I=e.Indexer={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assign=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("assign",I,T,P);return S.getValue=function(C){var A=C.activeContext.peek();if(!A)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+T.getValue(C)+"' for an undefined context."};return T.setValue(P.getValue(C),C)},S}var M=e.Assign={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpEQ=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-eq",I,T,P);return S.getValue=function(C){return T.getValue(C)===P.getValue(C)},S}var M=e.OpEQ={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNE=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-ne",I,T,P);return S.getValue=function(C){return T.getValue(C)!==P.getValue(C)},S}var M=e.OpNE={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGE=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-ge",I,T,P);return S.getValue=function(C){return T.getValue(C)>=P.getValue(C)},S}var M=e.OpGE={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGT=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-gt",I,T,P);return S.getValue=function(C){return T.getValue(C)>P.getValue(C)},S}var M=e.OpGT={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLE=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-le",I,T,P);return S.getValue=function(C){return T.getValue(C)<=P.getValue(C)},S}var M=e.OpLE={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLT=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-lt",I,T,P);return S.getValue=function(C){return T.getValue(C)<P.getValue(C)},S}var M=e.OpLT={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPlus=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-plus",I,T,P);return S.getValue=function(C){return P?T.getValue(C)+P.getValue(C):+T.getValue(C)},S}var M=e.OpPlus={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMinus=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-minus",I,T,P);return S.getValue=function(C){return P?T.getValue(C)-P.getValue(C):-T.getValue(C)},S}var M=e.OpMinus={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMultiply=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-multiply",I,T,P);return S.getValue=function(C){var A=T.getValue(C),O=P.getValue(C);if(typeof A=="number"&&typeof O=="number")return A*O;if(typeof A=="string"&&typeof O=="number"){for(var b="",D=0;D<O;D+=1)b+=A;return b}return null},S}var M=e.OpMultiply={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDivide=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-divide",I,T,P);return S.getValue=function(C){return T.getValue(C)/P.getValue(C)},S}var M=e.OpDivide={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpModulus=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-modulus",I,T,P);return S.getValue=function(C){return T.getValue(C)%P.getValue(C)},S}var M=e.OpModulus={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPower=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-power",I,T,P);return S.getValue=function(C){return Math.pow(T.getValue(C),P.getValue(C))},S}var M=e.OpPower={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInc=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-inc",I,P);return S.getValue=function(C){var A=P.getValue(C);return P.setValue(A+1,C),T?A:A+1},S}var M=e.OpInc={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDec=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-dec",I,P);return S.getValue=function(C){var A=P.getValue(C);return P.setValue(A-1,C),T?A:A-1},S}var M=e.OpDec={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNot=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("op-not",I,T);return P.getValue=function(S){return!T.getValue(S)},P}var M=e.OpNot={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpAnd=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-and",I,T,P);return S.getValue=function(C){return!!T.getValue(C)&&!!P.getValue(C)},S}var M=e.OpAnd={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpOr=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("op-or",I,T,P);return S.getValue=function(C){return!!T.getValue(C)||!!P.getValue(C)},S}var M=e.OpOr={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMatches=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("matches",I,T,P);return S.getValue=function(C){var A=T.getValue(C),O=P.getValue(C);try{var b=new RegExp(O);return!!b.exec(A)}catch(D){throw{name:"EvaluationException",message:D.toString()}}},S}var M=e.OpMatches={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ternary=void 0;var E=r(0);function m(I,T,P,S){var C=E.SpelNode.create("ternary",I,T,P,S);return C.getValue=function(A){return T.getValue(A)?P.getValue(A):S.getValue(A)},C}var M=e.Ternary={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elvis=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("elvis",I,T,P);return S.getValue=function(C){return T.getValue(C)!==null?T.getValue(C):P.getValue(C)},S}var M=e.Elvis={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineList=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("list",I),S=[].concat(T||[]);return P.getRaw=function(){return S},P.getValue=function(C){return S.map(function(A){return A.getValue(C)})},P}var M=e.InlineList={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineMap=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("map",I),S=[].concat(T||[]);return P.getValue=function(C){var A=!0,O=null,b={};return S.forEach(function(D){A?D.getType()==="property"?O=D.getName():O=D.getValue(C):b[O]=D.getValue(C),A=!A}),b},P}var M=e.InlineMap={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},m=r(0);function M(C,A,O){var b=!1;return O.activeContext.push(C),b=A.getValue(O),O.activeContext.pop(),b}function I(C,A,O,b){var D=C.filter(function(F){return M(F,O,b)});switch(A){case"ALL":return D;case"FIRST":return D[0]||null;case"LAST":return D.length?D[D.length-1]:null}}function T(C,A,O,b){var D={},F,U,L=[],$={};for(U in C)C.hasOwnProperty(U)&&(F={key:U,value:C[U]},M(F,O,b)&&L.push(F));switch(A){case"ALL":return L.forEach(function(j){D[j.key]=j.value}),D;case"FIRST":return L.length?($[L[0].key]=L[0].value,$):null;case"LAST":return L.length?($[L[L.length-1].key]=L[L.length-1].value,$):null}L.forEach(function(j){D[j.key]=j.value})}function P(C,A,O,b){var D=m.SpelNode.create("selection",O,b);return D.getValue=function(F){var U=F.activeContext.peek();if(U){if(Array.isArray(U))return I(U,A,b,F);if((typeof U>"u"?"undefined":E(U))==="object")return T(U,A,b,F)}return null},D}var S=e.Selection={create:P,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Projection=void 0;var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},m=r(0);function M(P,S,C){return P.map(function(A){var O;return C.activeContext.push(A),O=S.getValue(C),C.activeContext.pop(),O})}function I(P,S,C){var A=m.SpelNode.create("projection",S,C);return A.getValue=function(O){var b=O.activeContext.peek(),D=[],F;if(Array.isArray(b))return M(b,C,O);if((typeof b>"u"?"undefined":E(b))==="object"){for(F in b)b.hasOwnProperty(F)&&D.push(b[F]);return M(D,C,O)}return null},A}var T=e.Projection={create:I}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInstanceof=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("instanceof",I,T,P);return S.getValue=function(C){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},S}var M=e.OpInstanceof={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpBetween=void 0;var E=r(0);function m(I,T,P){var S=E.SpelNode.create("between",I,T,P);return S.getValue=function(C){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},S}var M=e.OpBetween={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeReference=void 0;var E=r(0);function m(I,S,P){var S=E.SpelNode.create("typeref",I,S);return S.getValue=function(C){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},S}var M=e.TypeReference={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeanReference=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("beanref",I);return P.getValue=function(S){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},P}var M=e.BeanReference={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Identifier=void 0;var E=r(0);function m(I,T){var P=E.SpelNode.create("identifier",T);return P.getRaw=function(){return I},P.getValue=function(S){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},P}var M=e.Identifier={create:m}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QualifiedIdentifier=void 0;var E=r(0);function m(T){if(Array.isArray(T)){for(var P=0,S=Array(T.length);P<T.length;P++)S[P]=T[P];return S}else return Array.from(T)}function M(T,P){var S=E.SpelNode.create.apply(E.SpelNode,["qualifiedidentifier",T].concat(m(P)));return S.getRaw=function(){return P.map(function(C){return C.getRaw()})},S.getValue=function(C){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},S}var I=e.QualifiedIdentifier={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorReference=void 0;var E=r(0),m=r(1);function M(S){if(Array.isArray(S)){for(var C=0,A=Array(S.length);C<S.length;C++)A[C]=S[C];return A}else return Array.from(S)}function I(S){return Array.isArray(S)?S:Array.from(S)}function T(S,C,A){var O=A!==void 0,b;O?b=C.length&&C[0]&&C[0].getType()==="number"?C[0].getValue():null:(A=C,C=void 0);var D=A,F=I(D),U=F[0],L=F.slice(1),$=E.SpelNode.create.apply(E.SpelNode,["constructorref",S].concat(M(A)));return $.getRaw=function(){return b},$.getValue=function(j){if(O&&L.length<=1){var V=[];return L.forEach(function(w){var x=j.activeContext;j.activeContext=new m.Stack,j.activeContext.push(j.rootContext),V.push(w.getValue(j)),j.activeContext=x}),L.length===1?V[0]:b?new Array(b):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},$}var P=e.ConstructorReference={create:T}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function E(M,I){var T={};return T.authentication=M||{},T.principal=I||{},T.hasRole=function(P){var S=!1;return!P||!T.authentication&&!Array.isArray(T.authentication.authorities)?!1:(T.authentication.authorities.forEach(function(C){C.authority.toLowerCase()===P.toLowerCase()&&(S=!0)}),S)},T.hasPermission=function(){var P=Array.prototype.slice.call(arguments);if(P.length===1)return T.hasRole(P[0])},T}var m=e.StandardContext={create:E}}])})},61581:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=T(e(1660)),E=T(e(87957)),m=T(e(2018)),M=T(e(26025)),I=T(e(7334));function T(b){return b&&b.__esModule?b:{default:b}}function P(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}function S(b,D){for(var F=0;F<D.length;F++){var U=D[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(b,U.key,U)}}function C(b,D,F){return D&&S(b.prototype,D),F&&S(b,F),b}var A=function(D){return D.replace(/[\t ]+$/,"")},O=function(){function b(D,F,U){P(this,b),this.cfg=D||{},this.indentation=new m.default(this.cfg.indent),this.inlineBlock=new M.default,this.params=new I.default(this.cfg.params),this.tokenizer=F,this.tokenOverride=U,this.previousReservedWord={},this.tokens=[],this.index=0}return C(b,[{key:"format",value:function(F){this.tokens=this.tokenizer.tokenize(F);var U=this.getFormattedQueryFromTokens();return U.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var F=this,U="";return this.tokens.forEach(function(L,$){F.index=$,F.tokenOverride&&(L=F.tokenOverride(L,F.previousReservedWord)||L),L.type===E.default.WHITESPACE||(L.type===E.default.LINE_COMMENT?U=F.formatLineComment(L,U):L.type===E.default.BLOCK_COMMENT?U=F.formatBlockComment(L,U):L.type===E.default.RESERVED_TOP_LEVEL?(U=F.formatTopLevelReservedWord(L,U),F.previousReservedWord=L):L.type===E.default.RESERVED_TOP_LEVEL_NO_INDENT?(U=F.formatTopLevelReservedWordNoIndent(L,U),F.previousReservedWord=L):L.type===E.default.RESERVED_NEWLINE?(U=F.formatNewlineReservedWord(L,U),F.previousReservedWord=L):L.type===E.default.RESERVED?(U=F.formatWithSpaces(L,U),F.previousReservedWord=L):L.type===E.default.OPEN_PAREN?U=F.formatOpeningParentheses(L,U):L.type===E.default.CLOSE_PAREN?U=F.formatClosingParentheses(L,U):L.type===E.default.PLACEHOLDER?U=F.formatPlaceholder(L,U):L.value===","?U=F.formatComma(L,U):L.value===":"?U=F.formatWithSpaceAfter(L,U):L.value==="."?U=F.formatWithoutSpaces(L,U):L.value===";"?U=F.formatQuerySeparator(L,U):U=F.formatWithSpaces(L,U))}),U}},{key:"formatLineComment",value:function(F,U){return this.addNewline(U+F.value)}},{key:"formatBlockComment",value:function(F,U){return this.addNewline(this.addNewline(U)+this.indentComment(F.value))}},{key:"indentComment",value:function(F){return F.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(F,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(F.value)),this.addNewline(U)}},{key:"formatTopLevelReservedWord",value:function(F,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U),this.indentation.increaseTopLevel(),U+=this.equalizeWhitespace(this.formatReservedWord(F.value)),this.addNewline(U)}},{key:"formatNewlineReservedWord",value:function(F,U){return this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(F.value))+" "}},{key:"equalizeWhitespace",value:function(F){return F.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(F,U){var L=[E.default.WHITESPACE,E.default.OPEN_PAREN,E.default.LINE_COMMENT];return(0,r.default)(L,this.previousToken().type)||(U=A(U)),U+=this.cfg.uppercase?F.value.toUpperCase():F.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),U=this.addNewline(U)),U}},{key:"formatClosingParentheses",value:function(F,U){return F.value=this.cfg.uppercase?F.value.toUpperCase():F.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(F,U)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(F,this.addNewline(U)))}},{key:"formatPlaceholder",value:function(F,U){return U+this.params.get(F)+" "}},{key:"formatComma",value:function(F,U){return U=A(U)+F.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?U:this.addNewline(U)}},{key:"formatWithSpaceAfter",value:function(F,U){return A(U)+F.value+" "}},{key:"formatWithoutSpaces",value:function(F,U){return A(U)+F.value}},{key:"formatWithSpaces",value:function(F,U){var L=F.type==="reserved"?this.formatReservedWord(F.value):F.value;return U+L+" "}},{key:"formatReservedWord",value:function(F){return this.cfg.uppercase?F.toUpperCase():F}},{key:"formatQuerySeparator",value:function(F,U){return this.indentation.resetIndentation(),A(U)+F.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(F){return F=A(F),F.endsWith(`
`)||(F+=`
`),F+this.indentation.getIndent()}},{key:"previousToken",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-F]||{}}}]),b}();i.default=O,te.exports=i.default},2018:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=m(e(59788)),E=m(e(4161));function m(A){return A&&A.__esModule?A:{default:A}}function M(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function I(A,O){for(var b=0;b<O.length;b++){var D=O[b];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}function T(A,O,b){return O&&I(A.prototype,O),b&&I(A,b),A}var P="top-level",S="block-level",C=function(){function A(O){M(this,A),this.indent=O||"  ",this.indentTypes=[]}return T(A,[{key:"getIndent",value:function(){return(0,r.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(P)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(S)}},{key:"decreaseTopLevel",value:function(){(0,E.default)(this.indentTypes)===P&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var b=this.indentTypes.pop();if(b!==P)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),A}();i.default=C,te.exports=i.default},26025:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=E(e(87957));function E(S){return S&&S.__esModule?S:{default:S}}function m(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function M(S,C){for(var A=0;A<C.length;A++){var O=C[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}function I(S,C,A){return C&&M(S.prototype,C),A&&M(S,A),S}var T=50,P=function(){function S(){m(this,S),this.level=0}return I(S,[{key:"beginIfPossible",value:function(A,O){this.level===0&&this.isInlineBlock(A,O)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(A,O){for(var b=0,D=0,F=O;F<A.length;F++){var U=A[F];if(b+=U.value.length,b>T)return!1;if(U.type===r.default.OPEN_PAREN)D++;else if(U.type===r.default.CLOSE_PAREN&&(D--,D===0))return!0;if(this.isForbiddenToken(U))return!1}return!1}},{key:"isForbiddenToken",value:function(A){var O=A.type,b=A.value;return O===r.default.RESERVED_TOP_LEVEL||O===r.default.RESERVED_NEWLINE||O===r.default.COMMENT||O===r.default.BLOCK_COMMENT||b===";"}}]),S}();i.default=P,te.exports=i.default},7334:(te,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;function e(M,I){if(!(M instanceof I))throw new TypeError("Cannot call a class as a function")}function r(M,I){for(var T=0;T<I.length;T++){var P=I[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(M,P.key,P)}}function E(M,I,T){return I&&r(M.prototype,I),T&&r(M,T),M}var m=function(){function M(I){e(this,M),this.params=I,this.index=0}return E(M,[{key:"get",value:function(T){var P=T.key,S=T.value;return this.params?P?this.params[P]:this.params[this.index++]:S}}]),M}();i.default=m,te.exports=i.default},87345:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=M(e(8727)),E=M(e(44889)),m=M(e(87957));function M(C){return C&&C.__esModule?C:{default:C}}function I(C,A){if(!(C instanceof A))throw new TypeError("Cannot call a class as a function")}function T(C,A){for(var O=0;O<A.length;O++){var b=A[O];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(C,b.key,b)}}function P(C,A,O){return A&&T(C.prototype,A),O&&T(C,O),C}var S=function(){function C(A){I(this,C),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(A.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(A.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(A.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(A.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(A.reservedWords),this.WORD_REGEX=this.createWordRegex(A.specialWordChars),this.STRING_REGEX=this.createStringRegex(A.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(A.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(A.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(A.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(A.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(A.namedPlaceholderTypes,this.createStringPattern(A.stringTypes))}return P(C,[{key:"createLineCommentRegex",value:function(O){return new RegExp("^((?:".concat(O.map(function(b){return(0,E.default)(b)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(O){var b=O.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(b,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(O.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(O){return new RegExp("^("+this.createStringPattern(O)+")","u")}},{key:"createStringPattern",value:function(O){var b={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return O.map(function(D){return b[D]}).join("|")}},{key:"createParenRegex",value:function(O){var b=this;return new RegExp("^("+O.map(function(D){return b.escapeParen(D)}).join("|")+")","iu")}},{key:"escapeParen",value:function(O){return O.length===1?(0,E.default)(O):"\\b"+O+"\\b"}},{key:"createPlaceholderRegex",value:function(O,b){if((0,r.default)(O))return!1;var D=O.map(E.default).join("|");return new RegExp("^((?:".concat(D,")(?:").concat(b,"))"),"u")}},{key:"tokenize",value:function(O){if(!O)return[];for(var b=[],D;O.length;)D=this.getNextToken(O,D),O=O.substring(D.value.length),b.push(D);return b}},{key:"getNextToken",value:function(O,b){return this.getWhitespaceToken(O)||this.getCommentToken(O)||this.getStringToken(O)||this.getOpenParenToken(O)||this.getCloseParenToken(O)||this.getPlaceholderToken(O)||this.getNumberToken(O)||this.getReservedWordToken(O,b)||this.getWordToken(O)||this.getOperatorToken(O)}},{key:"getWhitespaceToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(O){return this.getLineCommentToken(O)||this.getBlockCommentToken(O)}},{key:"getLineCommentToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(O){return this.getIdentNamedPlaceholderToken(O)||this.getStringNamedPlaceholderToken(O)||this.getIndexedPlaceholderToken(O)}},{key:"getIdentNamedPlaceholderToken",value:function(O){return this.getPlaceholderTokenWithKey({input:O,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(D){return D.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(O){var b=this;return this.getPlaceholderTokenWithKey({input:O,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(F){return b.getEscapedPlaceholderKey({key:F.slice(2,-1),quoteChar:F.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(O){return this.getPlaceholderTokenWithKey({input:O,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(D){return D.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(O){var b=O.input,D=O.regex,F=O.parseKey,U=this.getTokenOnFirstMatch({input:b,regex:D,type:m.default.PLACEHOLDER});return U&&(U.key=F(U.value)),U}},{key:"getEscapedPlaceholderKey",value:function(O){var b=O.key,D=O.quoteChar;return b.replace(new RegExp((0,E.default)("\\"+D),"gu"),D)}},{key:"getNumberToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(O,b){if(!(b&&b.value&&b.value==="."))return this.getTopLevelReservedToken(O)||this.getNewlineReservedToken(O)||this.getTopLevelReservedTokenNoIndent(O)||this.getPlainReservedToken(O)}},{key:"getTopLevelReservedToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(O){return this.getTokenOnFirstMatch({input:O,type:m.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(O){var b=O.input,D=O.type,F=O.regex,U=b.match(F);if(U)return{type:D,value:U[1]}}}]),C}();i.default=S,te.exports=i.default},87957:(te,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};i.default=e,te.exports=i.default},66168:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=m(e(61581)),E=m(e(87345));function m(D){return D&&D.__esModule?D:{default:D}}function M(D,F){if(!(D instanceof F))throw new TypeError("Cannot call a class as a function")}function I(D,F){for(var U=0;U<F.length;U++){var L=F[U];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}function T(D,F,U){return F&&I(D.prototype,F),U&&I(D,U),D}var P=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],S=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],C=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],A=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],O,b=function(){function D(F){M(this,D),this.cfg=F}return T(D,[{key:"format",value:function(U){return O||(O=new E.default({reservedWords:P,reservedTopLevelWords:S,reservedNewlineWords:A,reservedTopLevelWordsNoIndent:C,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new r.default(this.cfg,O).format(U)}}]),D}();i.default=b,te.exports=i.default},23582:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=m(e(61581)),E=m(e(87345));function m(D){return D&&D.__esModule?D:{default:D}}function M(D,F){if(!(D instanceof F))throw new TypeError("Cannot call a class as a function")}function I(D,F){for(var U=0;U<F.length;U++){var L=F[U];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}function T(D,F,U){return F&&I(D.prototype,F),U&&I(D,U),D}var P=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],S=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],C=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],A=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],O,b=function(){function D(F){M(this,D),this.cfg=F}return T(D,[{key:"format",value:function(U){return O||(O=new E.default({reservedWords:P,reservedTopLevelWords:S,reservedNewlineWords:A,reservedTopLevelWordsNoIndent:C,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,O).format(U)}}]),D}();i.default=b,te.exports=i.default},9924:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=M(e(61581)),E=M(e(87345)),m=M(e(87957));function M(U){return U&&U.__esModule?U:{default:U}}function I(U,L){if(!(U instanceof L))throw new TypeError("Cannot call a class as a function")}function T(U,L){for(var $=0;$<L.length;$++){var j=L[$];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(U,j.key,j)}}function P(U,L,$){return L&&T(U.prototype,L),$&&T(U,$),U}var S=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],C=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],A=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],O=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],b=function(L,$){if(L.type===m.default.RESERVED_TOP_LEVEL&&L.value==="SET"&&$.value==="BY")return L.type=m.default.RESERVED,L},D,F=function(){function U(L){I(this,U),this.cfg=L}return P(U,[{key:"format",value:function($){return D||(D=new E.default({reservedWords:S,reservedTopLevelWords:C,reservedNewlineWords:O,reservedTopLevelWordsNoIndent:A,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new r.default(this.cfg,D,b).format($)}}]),U}();i.default=F,te.exports=i.default},68034:(te,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=m(e(61581)),E=m(e(87345));function m(D){return D&&D.__esModule?D:{default:D}}function M(D,F){if(!(D instanceof F))throw new TypeError("Cannot call a class as a function")}function I(D,F){for(var U=0;U<F.length;U++){var L=F[U];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}function T(D,F,U){return F&&I(D.prototype,F),U&&I(D,U),D}var P=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],S=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],C=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],A=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],O,b=function(){function D(F){M(this,D),this.cfg=F}return T(D,[{key:"format",value:function(U){return O||(O=new E.default({reservedWords:P,reservedTopLevelWords:S,reservedNewlineWords:A,reservedTopLevelWordsNoIndent:C,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,O).format(U)}}]),D}();i.default=b,te.exports=i.default},17249:(te,i,e)=>{"use strict";var r;r={value:!0},i.ZP=r=void 0;var E=T(e(66168)),m=T(e(23582)),M=T(e(9924)),I=T(e(68034));function T(C){return C&&C.__esModule?C:{default:C}}var P=function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(O.language){case"db2":return new E.default(O).format(A);case"n1ql":return new m.default(O).format(A);case"pl/sql":return new M.default(O).format(A);case"sql":case void 0:return new I.default(O).format(A);default:throw Error("Unsupported SQL dialect: ".concat(O.language))}};r=P;var S={format:P};i.ZP=S},62211:(te,i,e)=>{te.exports=e(23509)},23509:(te,i,e)=>{var r=e(56834).Buffer,E=i,m=/`/g,M=/\./g,I=/[\0\b\t\n\r\x1a\"\'\\]/g,T={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};E.escapeId=function(O,b){if(Array.isArray(O)){for(var D="",F=0;F<O.length;F++)D+=(F===0?"":", ")+E.escapeId(O[F],b);return D}else return b?"`"+String(O).replace(m,"``")+"`":"`"+String(O).replace(m,"``").replace(M,"`.`")+"`"},E.escape=function(O,b,D){if(O==null)return"NULL";switch(typeof O){case"boolean":return O?"true":"false";case"number":return O+"";case"object":return Object.prototype.toString.call(O)==="[object Date]"?E.dateToString(O,D||"local"):Array.isArray(O)?E.arrayToList(O,D):r.isBuffer(O)?E.bufferToString(O):typeof O.toSqlString=="function"?String(O.toSqlString()):b?P(O.toString()):E.objectToValues(O,D);default:return P(O)}},E.arrayToList=function(O,b){for(var D="",F=0;F<O.length;F++){var U=O[F];Array.isArray(U)?D+=(F===0?"":", ")+"("+E.arrayToList(U,b)+")":D+=(F===0?"":", ")+E.escape(U,!0,b)}return D},E.format=function(O,b,D,F){if(b==null)return O;Array.isArray(b)||(b=[b]);for(var U=0,L=/\?+/g,$="",j=0,V;j<b.length&&(V=L.exec(O));){var w=V[0].length;if(!(w>2)){var x=w===2?E.escapeId(b[j]):E.escape(b[j],D,F);$+=O.slice(U,V.index)+x,U=L.lastIndex,j++}}return U===0?O:U<O.length?$+O.slice(U):$},E.dateToString=function(O,b){var D=new Date(O);if(isNaN(D.getTime()))return"NULL";var F,U,L,$,j,V,w;if(b==="local")F=D.getFullYear(),U=D.getMonth()+1,L=D.getDate(),$=D.getHours(),j=D.getMinutes(),V=D.getSeconds(),w=D.getMilliseconds();else{var x=C(b);x!==!1&&x!==0&&D.setTime(D.getTime()+x*6e4),F=D.getUTCFullYear(),U=D.getUTCMonth()+1,L=D.getUTCDate(),$=D.getUTCHours(),j=D.getUTCMinutes(),V=D.getUTCSeconds(),w=D.getUTCMilliseconds()}var H=S(F,4)+"-"+S(U,2)+"-"+S(L,2)+" "+S($,2)+":"+S(j,2)+":"+S(V,2)+"."+S(w,3);return P(H)},E.bufferToString=function(O){return"X"+P(O.toString("hex"))},E.objectToValues=function(O,b){var D="";for(var F in O){var U=O[F];typeof U!="function"&&(D+=(D.length===0?"":", ")+E.escapeId(F)+" = "+E.escape(U,!0,b))}return D},E.raw=function(O){if(typeof O!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return O}}};function P(A){for(var O=I.lastIndex=0,b="",D;D=I.exec(A);)b+=A.slice(O,D.index)+T[D[0]],O=I.lastIndex;return O===0?"'"+A+"'":O<A.length?"'"+b+A.slice(O)+"'":"'"+b+"'"}function S(A,O){for(A=A.toString();A.length<O;)A="0"+A;return A}function C(A){if(A==="Z")return 0;var O=A.match(/([\+\-\s])(\d\d):?(\d\d)?/);return O?(O[1]==="-"?-1:1)*(parseInt(O[2],10)+(O[3]?parseInt(O[3],10):0)/60)*60:!1}},66259:te=>{te.exports=function(){var i=document.getSelection();if(!i.rangeCount)return function(){};for(var e=document.activeElement,r=[],E=0;E<i.rangeCount;E++)r.push(i.getRangeAt(E));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return i.removeAllRanges(),function(){i.type==="Caret"&&i.removeAllRanges(),i.rangeCount||r.forEach(function(m){i.addRange(m)}),e&&e.focus()}}},68793:te=>{function i(e,r){(r==null||r>e.length)&&(r=e.length);for(var E=0,m=new Array(r);E<r;E++)m[E]=e[E];return m}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},42134:te=>{function i(e){if(Array.isArray(e))return e}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},33299:(te,i,e)=>{var r=e(68793);function E(m){if(Array.isArray(m))return r(m)}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},80467:te=>{function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},62052:te=>{function i(r,E,m,M,I,T,P){try{var S=r[T](P),C=S.value}catch(A){m(A);return}S.done?E(C):Promise.resolve(C).then(M,I)}function e(r){return function(){var E=this,m=arguments;return new Promise(function(M,I){var T=r.apply(E,m);function P(C){i(T,M,I,P,S,"next",C)}function S(C){i(T,M,I,P,S,"throw",C)}P(void 0)})}}te.exports=e,te.exports.__esModule=!0,te.exports.default=te.exports},86067:te=>{function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},85091:te=>{function i(r,E){for(var m=0;m<E.length;m++){var M=E[m];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(r,M.key,M)}}function e(r,E,m){return E&&i(r.prototype,E),m&&i(r,m),Object.defineProperty(r,"prototype",{writable:!1}),r}te.exports=e,te.exports.__esModule=!0,te.exports.default=te.exports},92476:te=>{function i(e,r,E){return r in e?Object.defineProperty(e,r,{value:E,enumerable:!0,configurable:!0,writable:!0}):e[r]=E,e}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},68307:te=>{function i(){return te.exports=i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var E=arguments[r];for(var m in E)Object.prototype.hasOwnProperty.call(E,m)&&(e[m]=E[m])}return e},te.exports.__esModule=!0,te.exports.default=te.exports,i.apply(this,arguments)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},36610:(te,i,e)=>{var r=e(38197);function E(){return typeof Reflect<"u"&&Reflect.get?(te.exports=E=Reflect.get.bind(),te.exports.__esModule=!0,te.exports.default=te.exports):(te.exports=E=function(M,I,T){var P=r(M,I);if(P){var S=Object.getOwnPropertyDescriptor(P,I);return S.get?S.get.call(arguments.length<3?M:T):S.value}},te.exports.__esModule=!0,te.exports.default=te.exports),E.apply(this,arguments)}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},39005:te=>{function i(e){return te.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},te.exports.__esModule=!0,te.exports.default=te.exports,i(e)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},72366:(te,i,e)=>{var r=e(89822);function E(m,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(M&&M.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),M&&r(m,M)}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},59018:te=>{function i(e){return e&&e.__esModule?e:{default:e}}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},75963:te=>{function i(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},25400:te=>{function i(e,r){var E=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(E!=null){var m=[],M=!0,I=!1,T,P;try{for(E=E.call(e);!(M=(T=E.next()).done)&&(m.push(T.value),!(r&&m.length===r));M=!0);}catch(S){I=!0,P=S}finally{try{!M&&E.return!=null&&E.return()}finally{if(I)throw P}}return m}}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},8343:te=>{function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},16306:te=>{function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},19934:(te,i,e)=>{var r=e(96498);function E(m,M){if(m==null)return{};var I=r(m,M),T,P;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(m);for(P=0;P<S.length;P++)T=S[P],!(M.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(m,T)&&(I[T]=m[T])}return I}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},96498:te=>{function i(e,r){if(e==null)return{};var E={},m=Object.keys(e),M,I;for(I=0;I<m.length;I++)M=m[I],!(r.indexOf(M)>=0)&&(E[M]=e[M]);return E}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},64920:(te,i,e)=>{var r=e(91148).default,E=e(80467);function m(M,I){if(I&&(r(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(M)}te.exports=m,te.exports.__esModule=!0,te.exports.default=te.exports},277:(te,i,e)=>{var r=e(91148).default;function E(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */te.exports=E=function(){return m},te.exports.__esModule=!0,te.exports.default=te.exports;var m={},M=Object.prototype,I=M.hasOwnProperty,T=Object.defineProperty||function(o,u,l){o[u]=l.value},P=typeof Symbol=="function"?Symbol:{},S=P.iterator||"@@iterator",C=P.asyncIterator||"@@asyncIterator",A=P.toStringTag||"@@toStringTag";function O(o,u,l){return Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}),o[u]}try{O({},"")}catch{O=function(l,f,y){return l[f]=y}}function b(o,u,l,f){var y=u&&u.prototype instanceof U?u:U,p=Object.create(y.prototype),a=new h(f||[]);return T(p,"_invoke",{value:ee(o,l,a)}),p}function D(o,u,l){try{return{type:"normal",arg:o.call(u,l)}}catch(f){return{type:"throw",arg:f}}}m.wrap=b;var F={};function U(){}function L(){}function $(){}var j={};O(j,S,function(){return this});var V=Object.getPrototypeOf,w=V&&V(V(s([])));w&&w!==M&&I.call(w,S)&&(j=w);var x=$.prototype=U.prototype=Object.create(j);function H(o){["next","throw","return"].forEach(function(u){O(o,u,function(l){return this._invoke(u,l)})})}function Z(o,u){function l(y,p,a,n){var g=D(o[y],o,p);if(g.type!=="throw"){var d=g.arg,N=d.value;return N&&r(N)=="object"&&I.call(N,"__await")?u.resolve(N.__await).then(function(W){l("next",W,a,n)},function(W){l("throw",W,a,n)}):u.resolve(N).then(function(W){d.value=W,a(d)},function(W){return l("throw",W,a,n)})}n(g.arg)}var f;T(this,"_invoke",{value:function(p,a){function n(){return new u(function(g,d){l(p,a,g,d)})}return f=f?f.then(n,n):n()}})}function ee(o,u,l){var f="suspendedStart";return function(y,p){if(f==="executing")throw new Error("Generator is already running");if(f==="completed"){if(y==="throw")throw p;return c()}for(l.method=y,l.arg=p;;){var a=l.delegate;if(a){var n=J(a,l);if(n){if(n===F)continue;return n}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(f==="suspendedStart")throw f="completed",l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);f="executing";var g=D(o,u,l);if(g.type==="normal"){if(f=l.done?"completed":"suspendedYield",g.arg===F)continue;return{value:g.arg,done:l.done}}g.type==="throw"&&(f="completed",l.method="throw",l.arg=g.arg)}}}function J(o,u){var l=o.iterator[u.method];if(l===void 0){if(u.delegate=null,u.method==="throw"){if(o.iterator.return&&(u.method="return",u.arg=void 0,J(o,u),u.method==="throw"))return F;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var f=D(l,o.iterator,u.arg);if(f.type==="throw")return u.method="throw",u.arg=f.arg,u.delegate=null,F;var y=f.arg;return y?y.done?(u[o.resultName]=y.value,u.next=o.nextLoc,u.method!=="return"&&(u.method="next",u.arg=void 0),u.delegate=null,F):y:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,F)}function k(o){var u={tryLoc:o[0]};1 in o&&(u.catchLoc=o[1]),2 in o&&(u.finallyLoc=o[2],u.afterLoc=o[3]),this.tryEntries.push(u)}function R(o){var u=o.completion||{};u.type="normal",delete u.arg,o.completion=u}function h(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(k,this),this.reset(!0)}function s(o){if(o){var u=o[S];if(u)return u.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var l=-1,f=function y(){for(;++l<o.length;)if(I.call(o,l))return y.value=o[l],y.done=!1,y;return y.value=void 0,y.done=!0,y};return f.next=f}}return{next:c}}function c(){return{value:void 0,done:!0}}return L.prototype=$,T(x,"constructor",{value:$,configurable:!0}),T($,"constructor",{value:L,configurable:!0}),L.displayName=O($,A,"GeneratorFunction"),m.isGeneratorFunction=function(o){var u=typeof o=="function"&&o.constructor;return!!u&&(u===L||(u.displayName||u.name)==="GeneratorFunction")},m.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,$):(o.__proto__=$,O(o,A,"GeneratorFunction")),o.prototype=Object.create(x),o},m.awrap=function(o){return{__await:o}},H(Z.prototype),O(Z.prototype,C,function(){return this}),m.AsyncIterator=Z,m.async=function(o,u,l,f,y){y===void 0&&(y=Promise);var p=new Z(b(o,u,l,f),y);return m.isGeneratorFunction(u)?p:p.next().then(function(a){return a.done?a.value:p.next()})},H(x),O(x,A,"Generator"),O(x,S,function(){return this}),O(x,"toString",function(){return"[object Generator]"}),m.keys=function(o){var u=Object(o),l=[];for(var f in u)l.push(f);return l.reverse(),function y(){for(;l.length;){var p=l.pop();if(p in u)return y.value=p,y.done=!1,y}return y.done=!0,y}},m.values=s,h.prototype={constructor:h,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!u)for(var l in this)l.charAt(0)==="t"&&I.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if(u.type==="throw")throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var l=this;function f(d,N){return a.type="throw",a.arg=u,l.next=d,N&&(l.method="next",l.arg=void 0),!!N}for(var y=this.tryEntries.length-1;y>=0;--y){var p=this.tryEntries[y],a=p.completion;if(p.tryLoc==="root")return f("end");if(p.tryLoc<=this.prev){var n=I.call(p,"catchLoc"),g=I.call(p,"finallyLoc");if(n&&g){if(this.prev<p.catchLoc)return f(p.catchLoc,!0);if(this.prev<p.finallyLoc)return f(p.finallyLoc)}else if(n){if(this.prev<p.catchLoc)return f(p.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<p.finallyLoc)return f(p.finallyLoc)}}}},abrupt:function(u,l){for(var f=this.tryEntries.length-1;f>=0;--f){var y=this.tryEntries[f];if(y.tryLoc<=this.prev&&I.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var p=y;break}}p&&(u==="break"||u==="continue")&&p.tryLoc<=l&&l<=p.finallyLoc&&(p=null);var a=p?p.completion:{};return a.type=u,a.arg=l,p?(this.method="next",this.next=p.finallyLoc,F):this.complete(a)},complete:function(u,l){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&l&&(this.next=l),F},finish:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.finallyLoc===u)return this.complete(f.completion,f.afterLoc),R(f),F}},catch:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.tryLoc===u){var y=f.completion;if(y.type==="throw"){var p=y.arg;R(f)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(u,l,f){return this.delegate={iterator:s(u),resultName:l,nextLoc:f},this.method==="next"&&(this.arg=void 0),F}},m}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},89822:te=>{function i(e,r){return te.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,M){return m.__proto__=M,m},te.exports.__esModule=!0,te.exports.default=te.exports,i(e,r)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},47452:(te,i,e)=>{var r=e(42134),E=e(25400),m=e(85665),M=e(8343);function I(T,P){return r(T)||E(T,P)||m(T,P)||M()}te.exports=I,te.exports.__esModule=!0,te.exports.default=te.exports},38197:(te,i,e)=>{var r=e(39005);function E(m,M){for(;!Object.prototype.hasOwnProperty.call(m,M)&&(m=r(m),m!==null););return m}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},33138:(te,i,e)=>{var r=e(42134),E=e(75963),m=e(85665),M=e(8343);function I(T){return r(T)||E(T)||m(T)||M()}te.exports=I,te.exports.__esModule=!0,te.exports.default=te.exports},90890:(te,i,e)=>{var r=e(33299),E=e(75963),m=e(85665),M=e(16306);function I(T){return r(T)||E(T)||m(T)||M()}te.exports=I,te.exports.__esModule=!0,te.exports.default=te.exports},91148:te=>{function i(e){return te.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},te.exports.__esModule=!0,te.exports.default=te.exports,i(e)}te.exports=i,te.exports.__esModule=!0,te.exports.default=te.exports},85665:(te,i,e)=>{var r=e(68793);function E(m,M){if(m){if(typeof m=="string")return r(m,M);var I=Object.prototype.toString.call(m).slice(8,-1);if(I==="Object"&&m.constructor&&(I=m.constructor.name),I==="Map"||I==="Set")return Array.from(m);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return r(m,M)}}te.exports=E,te.exports.__esModule=!0,te.exports.default=te.exports},79788:(te,i,e)=>{var r=e(277)();te.exports=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}}]);

//# sourceMappingURL=9243.bacc4c3d9ea0b5a88356.js.map